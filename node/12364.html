<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12364 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:47:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>cannot delete input or feed - keeps reappearing | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">cannot delete input or feed - keeps reappearing</h3>
        <span class="submitted">Submitted by <a href="../user/6791.html" title="View user profile.">a234525</a> on Fri, 18/03/2016 - 20:09</span>
        <div class="content"><p>Local emonhub and emoncms&nbsp;on a pi which has been&nbsp;working fine for a few weeks.</p>
<p>I have been experimenting with redis&nbsp;and adding some json uploads from another system. This has meant adding and deleting feeds several times.</p>
<p>I have 3 inputs that I cannot delete. They say &quot;ERROR&quot; under process list on the input screen. When I try and delete them they instantly reappear on the gui.</p>
<p>If I click the spanner icon to go into the process list setup screen, the feeds within the process say &quot;feedid&nbsp;136 does not exists or was deleted&quot;. When I try and delete the processes and press &quot;Save&quot; then a popup appears saying &quot;could not save process list, undefined&quot;&nbsp;</p>
<p>All my main feeds have also stopped updating.</p>
<p>Any ideas how to delete these extra feeds?</p>
<p>&nbsp;</p>
<p>Thanks.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5736.html" class="topic-previous" title="Go to previous forum topic">‹ Profile module</a>
              <a href="12372.html" class="topic-next" title="Go to next forum topic">Patch for reading config file, and contributor guidelines ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-40446"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6791.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="a234525&#039;s picture" title="a234525&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: cannot delete input or feed - keeps reappearing</h3>

    <div class="submitted">Submitted by <a href="../user/6791.html" title="View user profile.">a234525</a> on Sun, 20/03/2016 - 08:54.</div>
    <div class="content">
     <p>Anyone?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: cannot delete input or feed - keeps reappearing</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 20/03/2016 - 10:12.</div>
    <div class="content">
     <p>Can you try flushing Redis;</p>
<pre>
redis-cli&nbsp;flushall</pre><p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40473"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6791.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="a234525&#039;s picture" title="a234525&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: cannot delete input or feed - keeps reappearing</h3>

    <div class="submitted">Submitted by <a href="../user/6791.html" title="View user profile.">a234525</a> on Sun, 20/03/2016 - 23:54.</div>
    <div class="content">
     <p>Thank you for replying Paul. I get the following message.</p>
<p>pi@emoncms:~ $ redis-cli flushall<br />
(error) MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on disk. Commands that may modify the data set are disabled. Please check Redis logs for details about the error.<br />
pi@emoncms:~ $</p>
<p>thanks!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40509"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6791.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="a234525&#039;s picture" title="a234525&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: cannot delete input or feed - keeps reappearing</h3>

    <div class="submitted">Submitted by <a href="../user/6791.html" title="View user profile.">a234525</a> on Mon, 21/03/2016 - 23:51.</div>
    <div class="content">
     <p>I found the redis log which&nbsp;had entries like this</p>
<pre>
[544] 21 Mar 23:20:08.057 * 1 changes in 900 seconds. Saving...
[544] 21 Mar 23:20:08.058 # Can&#39;t save in background: fork: Cannot allocate memory</pre><p>&nbsp;</p>
<p>After googling for that I set the following switch in sysctl.conf</p>
<pre>

vm.overcommit_memory=1
</pre><p>&nbsp;</p>
<p>Now the feeds seem to be working again. The redis log now says</p>
<pre>
[543] 21 Mar 23:25:20.640 # You requested maxclients of 10000 requiring at least 10032 max file descriptors.
[543] 21 Mar 23:25:20.664 # Redis can&#39;t set maximum open files to 10032 because of OS error: Operation not permitted.
[543] 21 Mar 23:25:20.664 # Current maximum open files is 1024. maxclients has been reduced to 4064 to compensate for low ulimit. If you need higher maxclients increase &#39;ulimit -n&#39;.
[543] 21 Mar 23:25:20.678 # Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with &#39;noeviction&#39; policy now.
                _._
           _.-``__ &#39;&#39;-._
      _.-``    `.  `_.  &#39;&#39;-._           Redis 2.8.17 (00000000/0) 32 bit
  .-`` .-```.  ```\/    _.,_ &#39;&#39;-._
 (    &#39;      ,       .-`  | `,    )     Running in stand alone mode
 |`-._`-...-` __...-.``-._|&#39;` _.-&#39;|     Port: 6379
 |    `-._   `._    /     _.-&#39;    |     PID: 543
  `-._    `-._  `-./  _.-&#39;    _.-&#39;
 |`-._`-._    `-.__.-&#39;    _.-&#39;_.-&#39;|
 |    `-._`-._        _.-&#39;_.-&#39;    |           <a href="http://redis.io/" title="http://redis.io">http://redis.io</a>
  `-._    `-._`-.__.-&#39;_.-&#39;    _.-&#39;
 |`-._`-._    `-.__.-&#39;    _.-&#39;_.-&#39;|
 |    `-._`-._        _.-&#39;_.-&#39;    |
  `-._    `-._`-.__.-&#39;_.-&#39;    _.-&#39;
      `-._    `-.__.-&#39;    _.-&#39;
          `-._        _.-&#39;
              `-.__.-&#39;

[543] 21 Mar 23:25:20.739 # Server started, Redis version 2.8.17
[543] 21 Mar 23:28:13.121 * DB loaded from disk: 172.370 seconds
[543] 21 Mar 23:28:13.121 * The server is now ready to accept connections on port 6379
[543] 21 Mar 23:30:21.008 * 10 changes in 300 seconds. Saving...
[543] 21 Mar 23:30:21.049 * Background saving started by pid 1264
[1264] 21 Mar 23:31:33.399 * DB saved on disk
[1264] 21 Mar 23:31:33.481 * RDB: 4 MB of memory used by copy-on-write
[543] 21 Mar 23:31:33.640 * Background saving terminated with success
[543] 21 Mar 23:36:34.002 * 10 changes in 300 seconds. Saving...
[543] 21 Mar 23:36:34.046 * Background saving started by pid 1266
[1266] 21 Mar 23:37:44.773 * DB saved on disk
[1266] 21 Mar 23:37:44.799 * RDB: 4 MB of memory used by copy-on-write
[543] 21 Mar 23:37:44.883 * Background saving terminated with success
[543] 21 Mar 23:42:45.094 * 10 changes in 300 seconds. Saving...
[543] 21 Mar 23:42:45.146 * Background saving started by pid 1332
[1332] 21 Mar 23:43:58.111 * DB saved on disk
[1332] 21 Mar 23:43:58.138 * RDB: 4 MB of memory used by copy-on-write
[543] 21 Mar 23:43:58.219 * Background saving terminated with success</pre><p>&nbsp;</p>
<p>I am worried that there is still a problem. Should I have set that overcommit setting?</p>
<p>&nbsp;</p>
<p>thanks,</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12364"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-gieVysiVTm7BSz9XX0EQZcwBSxheLjdMk130WAytsYQ" value="form-gieVysiVTm7BSz9XX0EQZcwBSxheLjdMk130WAytsYQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
