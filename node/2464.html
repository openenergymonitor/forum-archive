<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2464 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:39:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emontx Shield SMT with new layout in development | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emontx Shield SMT with new layout in development</h3>
        <span class="submitted">Submitted by <a href="../user/3695.html" title="View user profile.">chaveiro</a> on Wed, 12/06/2013 - 23:55</span>
        <div class="content"><p>I&#39;d like to help improove that next emontx Shield. Can help with pcb design etc.</p>
<p>A few questions and ideias for forum brainstorming session:</p>
<p><strong>1- </strong>Why 4 sensor ports? 2Voltage+ 1Current seems fine for all projects. More than this we have lower sample rate.</p>
<p>&nbsp; - can we do a 3 sensor 2V+1I shield only ?</p>
<p><strong>2-</strong> Offer to improove design layout to better shield analog part to reduce noise. Capacitor to AREF. Anti-aliasing caps.</p>
<p><strong>3-</strong> Sometimes sensor space is critical. Can we leave some place on the shield to receive a mini arduino like this : <a href="http://playground.arduino.cc/Learning/ArduinoMini" title="http://playground.arduino.cc/Learning/ArduinoMini">http://playground.arduino.cc/Learning/ArduinoMini</a></p>
<p>Instead of pluging sheild in arduino, we can optionaly plug mini arduino in shield.</p>
<p><strong>4-</strong> Other option similar to (3) is to ditch arduino itself and place the atmega and cristal directly on the shield.</p>
<p><strong>5-</strong> I&#39;ve taken other considerations at option (4) like a shield with it&#39;s own atmega (with arduino code) but outputs only calculated data on I2C shield pins. The ideia is that each of this shields are stakable on each other and can report different fases data for a master arduino on the bottom of the stack that does not need to process any low level data. Eg. fast samples and different zones, etc.</p>
<p><strong>6-</strong> Shield with professional Poli Phase Measurement&nbsp; chip like Analog ADE7758 or ADE7780 with this capabilities out of the box:</p>
<div class="col_one" id="srdFeaturesDivCol1">
<ul>
<li>
			Highly accurate; supports IEC 60687, IEC 61036, IEC 61268, IEC 62053-21, IEC 62053-22, and IEC 62053-23</li>
<li>
			Compatible with 3-phase/3-wire, 3-phase/4-wire, and other 3-phase services</li>
<li>
			Less than 0.1% active energy error over a dynamic range of 1000 to 1 at 25&deg;C</li>
<li>
			Supplies active/reactive/apparent energy, voltage rms, current rms, and sampled waveform data</li>
</ul>
<p>Requires an arduino library for it. I&#39;d go with ADE7780 and I2C to arduino so we can use SPI for ethernet in arduino if required. Also we could adopt the app note schematic for direct line measuremet with galvanic isolation ics and a protective (Heat-shrink large tube) on the exposed solders. All electrical shock warning included. This way we dont need the voltage transformer and can measure 3 line voltages easily for tri-phases.</p>
<p>I can help with this lib development also.</p>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Please post your comments. I see that much improvement can still be made to this energy mettering aparatus.</p>
<p>Note: My prefered is idea 6.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2473.html" class="topic-previous" title="Go to previous forum topic">‹ EEPROM</a>
              <a href="2460.html" class="topic-next" title="Go to next forum topic">Can we make Emonbase with three moudles: Arduino UNO + emonTx Shield + Arduino Ethernet Shield ? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-12941"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1774.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield SMT with new layout in development</h3>

    <div class="submitted">Submitted by <a href="../user/1774.html" title="View user profile.">PaulOckenden</a> on Thu, 13/06/2013 - 08:02.</div>
    <div class="content">
     <p><em>4- Other option similar to (3) is to ditch arduino itself and place the atmega and cristal directly on the shield.</em></p>
<p>Isn&#39;t that an emonTX? Or am I missing something?</p>
<p>P.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12955"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield SMT with new layout in development</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 13/06/2013 - 13:19.</div>
    <div class="content">
     <p>Nuno,</p>
<p>most of these points have been discussed before, results were roughly as follows (please, forum members, correct me if I am wrong!):</p>
<p>1. You need at least 1 voltage and 1 current for one phase consumption meter. Additionally 1 current sensor for PV feed. And 1 voltage plus 3 current sensors total for the usual three phase systems (standard in Germany). 4 current sensors for 3 phase system plus PV feed. So, 1 voltage and 4 currents is very nice to have. More sensors is very special, less does not cover all &#39;standard&#39; use cases.</p>
<p>2. I would also prefer to have a decent anti-aliasing filter, yes.</p>
<p>3. This is very near to how the new emonTx is designed (with a Ciseco RFu-328)</p>
<p>4. as Paul already said, that is the current emontx.</p>
<p>5. too expensive (in my opinion), very special. Most of this can be done with the existing emontx.</p>
<p>6. sacrificing strict mains isolation and non-intrusive retrofitting is a no-go (my humble opinion, which seems to be shared by OEM).</p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12958"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield SMT with new layout in development</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 13/06/2013 - 15:27.</div>
    <div class="content">
     <p>J&ouml;rg - two points: (a) don&#39;t forget the American system where phases are centre-tapped to earth and loads can be 110 V (L-N) or 220 V (L-L), i.e. essentially 6 phases; and (b) you&#39;re assuming with one voltage measurement that the voltages track each other exactly. That&#39;s not necessarily true, and increasing the measurement accuracy makes the imbalance more noticeable.</p>
<p>(5) is surely just the same as MartinR&#39;s &quot;Full Fat&quot; 3 phase system?</p>
<p>(6) I understand many kits are sold to schools. Anything not totally packaged, certified and safe is not an option in that market. Splitting sales between the safe low voltage emonTx and an emonTxPro (?) that if sold would need CE certification and marking would inevitably raise costs in the shop and support effort needed in the forums.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12959"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield SMT with new layout in development</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 13/06/2013 - 16:05.</div>
    <div class="content">
     <p>Robert,</p>
<p>a) yes, true, but three phase systems are (to my knowledge) absolutely unusual for residential use in the US (please correct me) and the industrial three phase systems are usually 270/480V? (Is OEM really meant to be used there?).</p>
<p>b) I am running this arrangement since 4-5 months now with an overall accuracy of better than +/-2% compared to the ferraris meter, not too bad (but you are right, there is no guarantee it works that good under all circumstances).</p>
<p>(5) yes, and it is doable with the standard emontx hardware. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12962"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield SMT with new layout in development</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 13/06/2013 - 19:21.</div>
    <div class="content">
     <p>J&ouml;rg:<br />
	(a) I think (without searching the forums to check) we&#39;ve had the question asked, so even if they&#39;re as rare as 3 phase residential systems in the UK (I know of 2, MartinR and Tinbum, plus Noah - but his is a converted industrial building I believe, and I&#39;d never ever heard of one before those) they must be considered at the development stage, even if not progressed.</p>
<p>(b) That must be the network planners&#39; dream! What it probably means is that short-term imbalances cancel in the long term.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12963"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield SMT with new layout in development</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Thu, 13/06/2013 - 19:50.</div>
    <div class="content">
     <p>There Isnt a&nbsp;ade7780 as I can see maybe you meant&nbsp;ade7880. The IC seems a bit expensive (&pound;10) and overspeced. &nbsp;</p>
<p>You could use 6) with jack sockets for V &amp; I then people can use either isolated or not.</p>
<p>I am looking at doing a single phase PCB using two&nbsp;ADE7757ARN&nbsp;chips as they are 60p each. I can do a single phase reading of consumption and IMPORT/(EXPORT). These chips are simple to interface just single pulses per 10 Joules and a Reverse flow indicator. I did look at some maxim chips that give you voltage current reactive power etc but I am really only interested in power in and power out.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12968"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield SMT with new layout in development</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 13/06/2013 - 21:04.</div>
    <div class="content">
     <p><em>(b) That must be the network planners&#39; dream! What it probably means is that short-term imbalances cancel in the long term.</em></p>
<p>Yes, as nearly every house-(hold) in Germany is equipped with three-phase and the loads in the houses are distributed with some reason, this seems to work quite well (even locally). This might have changed a bit lately due to more and more PV systems being installed where most of them are one phase or at least not symmetrically distributed between phases. On a bigger scale this should also average out, but local voltage variations have clearly increased.</p>
<p>Before this becomes too much off-topic:</p>
<p>There is a quite interesting range of ICs from Maxim/Teridian (e.g MAX78700) where the (per phase) ADCs are powered from and communicate with a mains isolated (or earthed) master IC via a simple pulse transormer. Unfortunately the protocol is proprietary and not documented. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12973"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield SMT with new layout in development</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Thu, 13/06/2013 - 23:37.</div>
    <div class="content">
     <p>Ok been digging a little further and found this&nbsp;CS5490-ISZ</p>
<p>Its a single phase meter IC with a uart&nbsp;interface and there is a reference design here</p>
<p><a href="http://www.cirrus.com/en/pubs/rdDatasheet/CRD5490-Z_RD1.pdf">http://www.cirrus.com/en/pubs/rdDatasheet/CRD5490-Z_RD1.pdf</a></p>
<p>It could easily be modded&nbsp;by removing the PIC&nbsp;uart to converter and using an encapsulated 38v to 3.3v converter to make a rather nifty power monitor device it plug into the emon tx. A little monitor that plugs in and give Line voltage, Load current and Active Reactive &amp; Apparent Power, Power Factor, Line Frequency, Zero Cross Point and Temperature. reading kit cost approximately&nbsp;&pound;15&nbsp;+ cost of a CT. All with an accuracy of 0.1% and with the only overhead on the Emon&nbsp;is reading the 24 bit values through the optically isolated UART port.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2464"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-3vK4RuLqXm9-77LjGjgld-VOQscfCRytQD879LEm5-w" value="form-3vK4RuLqXm9-77LjGjgld-VOQscfCRytQD879LEm5-w"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
