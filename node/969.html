<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/969 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:18:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Phase controlled power switch for &#039;excess&#039; solar power | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Phase controlled power switch for &#039;excess&#039; solar power</h3>
        <span class="submitted">Submitted by <a href="../user/851.html" title="View user profile.">daveb</a> on Mon, 20/08/2012 - 18:14</span>
        <div class="content"><p>Hi All</p>
<p>Finally got round to documenting some of my recent design for a power controller. It is based on JeeNode hardware and uses an RFM12B&nbsp;radio link to communicate with a gateway node.</p>
<p><a href="http://www.rotwang.co.uk/projects/kettle.html" title="http://www.rotwang.co.uk/projects/kettle.html">http://www.rotwang.co.uk/projects/kettle.html</a></p>
<p>I&nbsp;still need to write up the software. I&nbsp;hope to do that shortly, but in the meantime, comments welcome.</p>
<p>Dave</p>
  <div class="forum-topic-navigation clear-block">
          <a href="953.html" class="topic-previous" title="Go to previous forum topic">‹ PHASE calculations</a>
              <a href="846.html" class="topic-next" title="Go to next forum topic">How is it calculated 1480. NUMBER OF SAMPLES 1480 it come from?. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-5830"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Phase controlled power switch for 'excess' solar power</h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Tue, 21/08/2012 - 09:17.</div>
    <div class="content">
     <p>Dave,</p>
<p>I've just done something similar to this, but chickened out of building my own phase angle controller. Instead I opted for an EVR25 (<a href="http://www.united-automation.com/evr-25-phase-angle-power-regulator-stack/">http://www.united-automation.com/evr-25-phase-angle-power-regulator-stack/</a>).</p>
<p>This is connected to an emonTx though a length of CAT5 cable running between by airing cupboard (where the EVR25 is) and the fuse box (where emontx lives). I considered doing this link wirelessly like you, but as I had to get an electrician in anyway to run a feed for the immersion heater, I had him also run the cat5 at the same time while he had the floor up.</p>
<p>I&nbsp;use a spare DIO signal on the emontx, fed through an op-amp low-pass filter with x2 gain to convert the 0 - 3.3V PWM&nbsp;output into about 0-6.5V DC to control the EVR25.</p>
<p>The control software on the emontx turned out to be very simple, and worked almost first time! The wired connection allows me update the power output rather quickly - about once per second - thus tracking changes in load and /&nbsp;or&nbsp;PV&nbsp;output rather nicely.</p>
<p>With a wireless link, you would not want to send an update more than perhaps once every 10 seconds, otherwise you may clobber any other 433Mhz remote controls in the area (e.g. car keys, garage doors, remote thermomoters).</p>
<p>My&nbsp;system only 'went live' a couple of days ago, and since then we've had enough hot water for two showers each morning with the gas boiler turned off.</p>
<p>However, the system is not without its problems. The immersion heater only really heats the top half of the tank, since the thermostat is rather high up. This means that the botton half of the tank remains cold, and there will be a layer in the middle at just the right temperature for leogionella to thrive. I'm not sure how worried I should be about this!</p>
<p>One solution would be to install a destratification pump to circulate water from the top to the bottom of the tank. Sounds simple, but what is the logic required for controlling a destrat pump? Also, what is the best way to ensure that the gas boiler comes on to top-up the solar heating when required, but ONLY if really needed?</p>
<p>So I'm pondering whether to add a tank temp sensor to the emon TX, and perhaps two relay outputs to control a destrat pump and the boiler (in place of the tank thermostat), but the control logic needs some careful thought... any ideas anyone?</p>
<p>Martin</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5831"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Phase controlled power switch for 'excess' solar power</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Tue, 21/08/2012 - 11:16.</div>
    <div class="content">
     <p>Martin Get a longer heater</p>
<p>I'm working on Robins (Calypso_rae) circuit and had the option of fitting an economy 7 tank with a low level heater and a gas fired coil for back up, until my plumber came up with a 36&quot; heater to replace mt 27&quot; one this slots nicely throught the existing coil and extends to within a couple of inches of the bottom of the tank, don't worry about legionella the water needs to be static and warm for quite some time for it to develop, think about when you go on holiday leaving a tank of warm water thats no problem, if it were not used for say six months then you would need to flush the tank throughly. As you are using the water dayly you have nothing to fear with the stratification.</p>
<p>As for when you need to top up with the gas boiler, all you need to do is set the timer on for some time in the morning before you shower etc, and chose how far up the tank you need to put the boiler thermostat, oh yes make sure the immersion thermostat is set a few degrees higher than the gas boiler one to make sure that on a good day the gas won't fire up.</p>
<p>From your last two paragraphs it sounds like you are trying to make things a little too complicated, the&nbsp;fewer parts in the system you have the less there is to go wrong, after all the immersion/indirect coil system has been around for donkeys years you just need to get the existing stats to do what you want.</p>
<p>Good luck, Rich.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5832"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Phase controlled power switch for 'excess' solar power</h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Tue, 21/08/2012 - 11:18.</div>
    <div class="content">
     <p>Rich,</p>
<p>You're probably right! The IH I have is a 27&quot; one from B&amp;Q - the longest they had, but a 36&quot; heater would probably work better. It's also important I guess to get a IH with the longest possible thermostat - they seem to be available with 11 and 18inch stats.&nbsp;</p>
<p>Spending &pound;20 on another IH would be much easier and cheaper than a installing a pump!</p>
<p>Currently, with the 27&quot; IH, when the IH stat turns off (set to 60 degrees), the temp at the level of the boiler stat (at top of heating coil) is barely above ambient, so the boiler will turn on every day when it's not really necessary.&nbsp; Maybe a longer IH coupled with lifting the boiler stat a few inches higher might be all it needs.</p>
<p>Thanks for your input,</p>
<p>Martin</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5837"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Phase controlled power switch for 'excess' solar power</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Tue, 21/08/2012 - 14:03.</div>
    <div class="content">
     <p>This may sound daft but I've just drawn a heater on paper10cm long with a stat 6cm long and measured the heater length down to the end of the stat so above the end of the stat is 6+6 cm so 12, below the stat 4 + 4 cm plus 1 cm for the bend is 9cm so below the stat is 3/4 of whats above the stat, that water by convection will rise so I guess the temperature will be pretty constant for the whole depth of the heater so you may be able to leave the boiler stat where it is.</p>
<p><a href="http://www.ebay.co.uk/itm/Hand-Held-Digital-Alarm-Thermometer-with-Probe-/300760612494?pt=UK_BOI_Electrical_Test_Measurement_Equipment_ET&amp;hash=item4606babe8e">http://www.ebay.co.uk/itm/Hand-Held-Digital-Alarm-Thermometer-with-Probe-/300760612494?pt=UK_BOI_Electrical_Test_Measurement_Equipment_ET&amp;hash=item4606babe8e</a></p>
<p>Get yourself one of these!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5838"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/851.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="daveb&#039;s picture" title="daveb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Phase controlled power switch for 'excess' solar power</h3>

    <div class="submitted">Submitted by <a href="../user/851.html" title="View user profile.">daveb</a> on Tue, 21/08/2012 - 14:41.</div>
    <div class="content">
     <p>Phase control isn't difficult. You just need to sync to the mains cycle and use a timer to offset the phase. The zero crossing detector gives you the start of each cycle. The code I'm using is similar to that I&nbsp;used here</p>
<p><a href="http://www.rotwang.co.uk/projects/triac.html" title="http://www.rotwang.co.uk/projects/triac.html">http://www.rotwang.co.uk/projects/triac.html</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5898"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/851.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="daveb&#039;s picture" title="daveb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Phase controlled power switch for 'excess' solar power</h3>

    <div class="submitted">Submitted by <a href="../user/851.html" title="View user profile.">daveb</a> on Fri, 24/08/2012 - 11:17.</div>
    <div class="content">
     <p>I've added library code for triac phase control to the site.</p>
<p>This will allow you to make a phase controlled system just by adding the Triac object to your code, with some simple initialisation.</p>
<p>Comments welcome.</p>
<p><a href="http://www.rotwang.co.uk/projects/kettle.html" title="http://www.rotwang.co.uk/projects/kettle.html">http://www.rotwang.co.uk/projects/kettle.html</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5904"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Phase controlled power switch for 'excess' solar power</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 24/08/2012 - 17:24.</div>
    <div class="content">
     <p>You have a lot of interesting material here, Dave.</p>
<p>I'm not sure where you are measuring current/power.&nbsp; If you measure just at the supply point, then only the net inport or export is detected.&nbsp; That's all that is needed for a PV diversion facility, but it doesn't convey the entire picture.</p>
<p>Are there any benefits in using phase-control for the triac rather than the zero-crossing approach that I've gone for?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5911"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/851.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="daveb&#039;s picture" title="daveb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Phase controlled power switch for 'excess' solar power</h3>

    <div class="submitted">Submitted by <a href="../user/851.html" title="View user profile.">daveb</a> on Sun, 26/08/2012 - 08:19.</div>
    <div class="content">
     <p>Hi Calypso Rae</p>
<p>I'm using my previous projects to measure power. I&nbsp;read the IrDA&nbsp;output of my solar generation meter and post results every 1m. I&nbsp;also monitor the import meter for import / export. This is read every 1s. Each reading generates an event in the broker that can be handled by a control, in this case a kettle controller assigned to the Triac interface. This does proportional control, but just switches on full if the solar generation is less than 300W, so the kettle still works in the gloom.</p>
<p>There are advantages and disadvantages of both. Robert Wall has just pointed out to me that phase switching should be suppressed, as it generates harmonics (ie. radio interference). I'll look into what suppression circuitry I&nbsp;need and amend my design.</p>
<p>With phase control you get much finer control of power. In my case 100 steps of phase. It also averages across a half cycle. I&nbsp;suspect smart meters will start getting wise to people trying to make best use of their spare energy. It would be possible to reduce the averaging period, perhaps down to a cycle, so switching on for 2 successive half cycles might incurr a charge in the future.</p>
<p>Perhaps I&nbsp;should amend my library to also allow half-cycle switching? You would still need the zero crossing detector hardware, but this is simple to build.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/969"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-qBwCAA0dwfQIqU57G7q5VjEAtNT0NKQVCNHv6fKlVIQ" value="form-qBwCAA0dwfQIqU57G7q5VjEAtNT0NKQVCNHv6fKlVIQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/969 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:18:09 GMT -->
</html>
