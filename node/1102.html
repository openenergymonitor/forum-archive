<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/1102 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:08:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Growatt and ecocms | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Growatt and ecocms</h3>
        <span class="submitted">Submitted by Guest on Sun, 30/09/2012 - 00:08</span>
        <div class="content"><p>I&#39;m trying to set up a raspberry Pi and ecocms to be my monitoring platform. I have a growatt inverter which I can communiocate with Shinenet and PVBeancounter. Is there any available scrpt that anyone is aware of to extract data from growatt with Linux?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3313.html" class="topic-previous" title="Go to previous forum topic">‹ RMS and math question</a>
              <a href="3297.html" class="topic-next" title="Go to next forum topic">SIGNIFICANTLY INACCURATE emonTxV3_4chan_continuous ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-6449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Growatt and ecocms</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 30/09/2012 - 15:10.</div>
    <div class="content">
     <p>there seems to be a spec sheet for the rs232 comms:&nbsp;http://snafu.priv.at/mystuff/growatt-proto.pdf and a perl&nbsp;script by a guy called Alexander Zangerl:&nbsp;http://snafu.priv.at/mystuff/growatt.html, can that be used?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6455"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="tommiy&#039;s picture" title="tommiy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Growatt and ecocms</h3>

    <div class="submitted">Submitted by tommiy (not verified) on Sun, 30/09/2012 - 20:01.</div>
    <div class="content">
     <p>These detail the pre modbus implementation. This is what the content pf snarfu state. PVBean apparently has the modbus protocol spec and i&#39;ve asked for that as well as emailing the contact on the bottom of the snarf documentation.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6700"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gor1don&#039;s picture" title="gor1don&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Growatt and ecocms</h3>

    <div class="submitted">Submitted by gor1don (not verified) on Tue, 16/10/2012 - 12:43.</div>
    <div class="content">
     <p>Did you get any further with this? I have a Shine net agent that monitors the comms between the PC and the inverter. I see commands sent and responses received, e.g.</p>
<p>INFO [Thread-262] (BlueToothCommandSender.java:94) - commu = true<br />
	INFO [Thread-262] (BlueToothCommandSender.java:95) - rs = true<br />
	INFO [Thread-262] (BlueToothCommandSender.java:96) - inverter is lost = false<br />
	INFO [Thread-262] (AbstractCommandSender.java:202) - command = 3f 23 3 32 42 0<br />
	0 de<br />
	INFO [Thread-262] (AbstractCommandSender.java:206) - returnData = 23 3f 3 32 42<br />
	15 0 0 0 0 0 0 0 0 44 0 0 61 f0 0 0 81 aa 0 0 f1 38 5 a0<br />
	INFO [Thread-262] (BlueToothCommandSender.java:94) - commu = true<br />
	INFO [Thread-262] (BlueToothCommandSender.java:95) - rs = true<br />
	INFO [Thread-262] (BlueToothCommandSender.java:96) - inverter is lost = false<br />
	INFO [Thread-262] (AbstractCommandSender.java:202) - command = 3f 23 3 32 41 0<br />
	0 dd<br />
	INFO [Thread-262] (AbstractCommandSender.java:206) - returnData = 23 3f 3 32 41<br />
	23 1 d 3b 0 0 66 2f 9 b8 0 65 13 81 63 1f 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 84<br />
	1e 19 7 2b<br />
	INFO [Thread-262] (BlueToothCommandSender.java:94) - commu = true<br />
	INFO [Thread-262] (BlueToothCommandSender.java:95) - rs = true<br />
	INFO [Thread-262] (BlueToothCommandSender.java:96) - inverter is lost = false<br />
	INFO [Thread-262] (AbstractCommandSender.java:202) - command = 3f 23 3 32 42 0<br />
	0 de<br />
	INFO [Thread-262] (AbstractCommandSender.java:206) - returnData = 23 3f 3 32 42<br />
	15 0 0 0 0 0 0 0 0 44 0 0 61 f0 0 0 81 aa 0 0 f1 38 5 a0<br />
	INFO [Thread-262] (BlueToothCommandSender.java:94) - commu = true<br />
	INFO [Thread-262] (BlueToothCommandSender.java:95) - rs = true<br />
	INFO [Thread-262] (BlueToothCommandSender.java:96) - inverter is lost = false<br />
	INFO [Thread-262] (AbstractCommandSender.java:202) - command = 3f 23 3 32 41 0<br />
	0 dd<br />
	INFO [Thread-262] (AbstractCommandSender.java:206) - returnData = 23 3f 3 32 41<br />
	23 1 d 1e 0 0 68 48 9 ae 0 68 13 85 65 28 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 84<br />
	1e 19 7 4d</p>
<p>&nbsp;</p>
<p>Is it just a question of using the Raspberry pi to send the command and then to capture the data via the serial port?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14799"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4305.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4305.png" alt="Elwell&#039;s picture" title="Elwell&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Growatt and ecocms</h3>

    <div class="submitted">Submitted by <a href="../user/4305.html" title="View user profile.">Elwell</a> on Tue, 03/09/2013 - 11:59.</div>
    <div class="content">
     <p>Hi folks - awakening an old thread.</p>
<p>I've just had 10*250w panels and a Growatt Sungold 3000 fitted. Sadly their 'remote monitor' turned out to be a non-hackable (ahem, without a soldering iron) <a href="http://efergy.com/au/products/electricity-monitors/elitev3-monitor" title="http://efergy.com/au/products/electricity-monitors/elitev3-monitor">http://efergy.com/au/products/electricity-monitors/elitev3-monitor</a></p>
<p>Thanks to the wondrous world of .au wiring, my ideal setup of 3 CT sensors arranged over load (house), supply (grid) and generation (PV) isn't possible as there's no way to get the house busbars separated (and you need a licenced spark to do any work on power over here). Secondly, the nice metal meter box doesn't really bode well for mounting a radio transmitter inside...</p>
<p>so, time to investigate the inverter rs232...</p>
<p>Like the original poster I couldn't get the perl script to work, so set about hacking modbus (new to me) and ended up with <a href="https://github.com/Elwell/solarmon" title="https://github.com/Elwell/solarmon">https://github.com/Elwell/solarmon</a> -- Still a work in progress. </p>
<p>I'm using read_value.py to read out the values and comparing the fields with what's on the display at the same time (ish - not easy when at work and doing it over SSH)</p>
<p>when all done, read_pv will datalog at o(5s) intervals for local detailed logs, and publish to local mqtt broker and consolidated data to pvoutput.org. This will be started / stopped at sunrise/sunset (calculated with pyephem) so that I get a daily summary</p>
<p>oh, and later on I'll build up my emontx board (sadly the damn jack sockets I purchased locally don't match the PCB...) but I'll also see if I can make an ANSI optical probe to read the EM1000 meter since the ct coils can't tell direction...</p>
<p>Andrew</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15334"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Caspianjvc&#039;s picture" title="Caspianjvc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Growatt and ecocms</h3>

    <div class="submitted">Submitted by Caspianjvc (not verified) on Sat, 21/09/2013 - 09:44.</div>
    <div class="content">
     <p>How are your scripts going? I have a raspberry pi that I am interested in using with my sun gold 3000. Do you have more info on how to automate the output. Do you just create a cron job to trigger one of the scripts?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16708"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4305.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4305.png" alt="Elwell&#039;s picture" title="Elwell&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Growatt and ecocms</h3>

    <div class="submitted">Submitted by <a href="../user/4305.html" title="View user profile.">Elwell</a> on Wed, 11/12/2013 - 07:02.</div>
    <div class="content">
     <p>Hi&nbsp;Caspianjvc,</p>
<p>Well, system is still only half finished - busy doing other things and it was working well enough...</p>
<p>So - I have a nightly cron job at 10pm&nbsp;on a guruplug that uses pyephem to calculate the next sunrise and sunset and publish these as a retained message to my broker. It also sets up two &#39;at&#39; jobs - one to start off the monitoring at sunrise (running in screen as I haven&#39;t propely daemonised it) and a second to kill off the tasks at sunset. This means that the inverter is normally booted (ie, serial port responds) even if it&#39;s not generating any significant amount of power.&nbsp;</p>
<p>The actual monitor probe then queries the inverter over modbus-rtu@9600 baud and publishes to the broker, as well as a daily logfile&nbsp;(pvlog-YYYY-MM-DD.log) &nbsp;- I don&#39;t need to worry about log rollover as it starts and stops during one day.</p>
<p>ie</p>
<p>andrew@mythic:~$ mosquitto_sub -h localhost -v -t \#<br />
	sunrise 2013-12-11 05:03:20<br />
	sunset 2013-12-11 19:16:25<br />
	solar/AC_Hz 49.98<br />
	solar/PV_A 7.9<br />
	solar/timestamp 1386744849.91<br />
	solar/pid 22990<br />
	solar/AC_V 250.7<br />
	solar/Out_W 1973.8<br />
	solar/PV_W 2075.1<br />
	solar/PV_V 261.2<br />
	solar/kWh_Total 26.8<br />
	solar/kWh_today 11.6</p>
<p>&nbsp;</p>
<p>To get averaged data I then have a subscriber process on my nas&nbsp;that summarises and publishes</p>
<p>Hope that helps - once I tidy it up and remove some of the DEBUG print stuff I&#39;ll push to github again</p>
<p>&nbsp;</p>
<p>Andrew</p>
<p>(one thing I&#39;m unhappy about is that the old school perl script can pull the inverter temp out and I haven&#39;t found the modbus&nbsp;equvalent&nbsp;register yet)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/1102"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-YbY25mOnMJpN-XHzPzxCertUvmOCSN0zevaOaSWqZtE" value="form-YbY25mOnMJpN-XHzPzxCertUvmOCSN0zevaOaSWqZtE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
