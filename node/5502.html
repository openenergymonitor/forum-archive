<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5502 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:05:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Bare-bones single pulse counting on Pi? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Bare-bones single pulse counting on Pi?</h3>
        <span class="submitted">Submitted by <a href="../user/5862.html" title="View user profile.">Transistor</a> on Sat, 02/08/2014 - 23:18</span>
        <div class="content"><p>I have a rotating disk style electricity meter but I&#39;ve rigged up a photosensor and can get pulses from the meter with (from memory) 375 revolutions per kWh. I have access to a Raspberry Pi to experiment with.</p>
<blockquote><p>&nbsp; Meter -&gt; Sensor -&gt; Pi -&gt; Emoncms (optional)</p>
</blockquote>
<p>Can anyone point me to hardware and software links to configure the Pi to count directly without the emonTx and to serve the data or pass it to emoncms.</p>
<p>(I&#39;ve read <a href="https://learn.openenergymonitor.org/?redirect=introduction-to-pulse-counting" title="http://openenergymonitor.org/emon/buildingblocks/introduction-to-pulse-counting">http://openenergymonitor.org/emon/buildingblocks/introduction-to-pulse-c...</a>.)</p>
<p>Many thanks.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5472.html" class="topic-previous" title="Go to previous forum topic">‹ First setup</a>
              <a href="5504.html" class="topic-next" title="Go to next forum topic">kWh per hour? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22863"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Bare-bones single pulse counting on Pi?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 03/08/2014 - 01:12.</div>
    <div class="content">
     <p>Throwing &quot;pulse counting on Raspberry Pi&quot; at Google shows more than a few results. Although it&#39;s been discussed, I haven&#39;t seen any reports on this site that anyone has tried and succeeded with this approach - the Atmel microprocessor in the emonTx is much better suited for this kind of application, though I appreciate why you would want to avoid having the extra kit if it&#39;s not necessary in your application.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22871"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5862.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Transistor&#039;s picture" title="Transistor&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Bare-bones single pulse counting on Pi?</h3>

    <div class="submitted">Submitted by <a href="../user/5862.html" title="View user profile.">Transistor</a> on Sun, 03/08/2014 - 13:30.</div>
    <div class="content">
     <p>Thanks, Robert. I subsequently found <a href="2017.html" title="http://openenergymonitor.org/emon/node/2017">http://openenergymonitor.org/emon/node/2017</a> and there seem to be some problems using interrupts on the Pi to count the pulses.</p>
<p>For anyone interested, here is my meter pulse reader on an ESB Ireland Siemens RM223 meter.</p>
<p><img alt="Pulse sensing on Siemens RM223 electricity meter." src="../../../i.imgur.com/3zi55Yg.jpg" style="width: 721px; height: 437px;" /></p>
<p>I had a scrapped Wenglor photo-sensor but there were a couple of problems:</p>
<ul>
<li>
		The sensor uses a red light source. The meter has a red mark on a silver background. Far from ideal as both reflect red.</li>
<li>
		The sensor is too long to point at the disk AND close the door of my meter box.</li>
</ul>
<p>I have access to a 3D printer so I made a 45&deg; mirror head, cut a piece of front-surface mirror that I had saved from a scanner I scrapped, superglued it into the bracket and mounted the combination on another 3D printed bracket.</p>
<p>Alignment was critical. I couldn&#39;t get reliable reading looking straight in. I found that looking up at the disk from below gave the best results. Slots in the main bracket proved much easier to fine adjust rather than rotating the mirror head. My meter box is outside and I found it best to set it up after dark as the light spot could easily be seen.</p>
<p>I can&#39;t really recommend this solution. If I hadn&#39;t had the industrial sensor I would have tried using a blue light to maximise contrast between the red mark and the silver edge of the disk.</p>
<p>By the way, many of the posts discuss accuracy of the utility meters and whether something like the emonTx is more accurate. In my case I want to monitor what I&#39;m being charged for so using the utility meter is the most accurate.</p>
<p>So now I&#39;m back to my original problem. Can I interface this directly with the Pi or do I need an Arduino in between? The second option seems a bit silly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22872"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Bare-bones single pulse counting on Pi?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 03/08/2014 - 13:46.</div>
    <div class="content">
     <p><em>&quot;By the way, many of the posts discuss accuracy of the utility meters and whether something like the emonTx is more accurate. In my case I want to monitor what I&#39;m being charged for so using the utility meter is the most accurate.</em>&quot;</p>
<p>The meter is by definition accurate! - unless you can calibrate the emonTx to a better accuracy <strong><em>and</em></strong> keep it within calibration. Calibrating the emonTx with even a very expensive multimeter is not likely to exceed the meter accuracy by much if at all. The kit you&#39;d need to do that would be prohibitively expensive, even to hire.</p>
<p>Don&#39;t put too much emphasis on the problems of counting pulses from switches. If you have a recording oscilloscope, you could use that to look at the output from your optical sensor, but I would be quite surprised if there were any glitches on the edges of the pulses, so you should be able to use the pulse output with little or no processing.</p>
<p>I think I&#39;d be tempted to evaluate the various suggestions and try one or two that look as if they have promise. I know very little about the Pi so I can&#39;t really help you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5502"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-WXYg__EfD0S3VraTxH6Z8uZrrfepJSNSm2yjiUnO4KU" value="form-WXYg__EfD0S3VraTxH6Z8uZrrfepJSNSm2yjiUnO4KU"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
