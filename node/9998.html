<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Setting up emonhub + emoncms on Hard Drive | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/emon/sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/emon/modules/node/node.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/defaults.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system-menus.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/user/user.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/mollom/mollom.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/forum/forum.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/views/css/views.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/comment/comment.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/themes/emon3/style.css?r" />
<style type="text/css" media="all">@import "/emon/sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="/emon/" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="/emon/">Home</a> » <a href="/emon/forum">Forums</a> » <a href="/emon/forum/5">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Setting up emonhub + emoncms on Hard Drive</h3>
        <span class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Mon, 12/01/2015 - 16:50</span>
        <div class="content"><p>Hi</p>
<p>I have set up a new system on an SD card&nbsp;using&nbsp;&nbsp;emonSD-13-08-14.img.zip on a PI with&nbsp;RFM12Pi&nbsp;(RFM69CW).</p>
<p>This was pretty straightforward. It did not work at first but upgrading the software as in this thread</p>
<p><a href="http://openenergymonitor.org/emon/node/6244" title="http://openenergymonitor.org/emon/node/6244">http://openenergymonitor.org/emon/node/6244</a></p>
<p>solved the problem and everything is working fine. In fact I initially used the same network group as my current system which is in another building about 40 metres away with substantial walls between and picked up signal from 2 of the sensors in the other building which I had not expected.</p>
<p>I would now like to move this setup to a hard drive. Do these instructions still apply as they refer to a different image?</p>
<p><a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/hddsetup.md" title="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/hddsetup.md">https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/hddsetup.md</a></p>
<p>Regards</p>
<p>Ian</p>
  <div class="forum-topic-navigation clear-block">
          <a href="/emon/node/5703" class="topic-previous" title="Go to previous forum topic">‹ EmonCMS feed shows no data (&quot;inactive&quot;)</a>
              <a href="/emon/node/9999" class="topic-next" title="Go to next forum topic">alphanumeric input-field in dashboards possible? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-26709"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/4440" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/4440" title="View user profile.">pb66</a> on Mon, 12/01/2015 - 17:38.</div>
    <div class="content">
     <p>Hi Ian.</p>
<p>If running a hdd I would recommend using the full emoncms and raspbian&nbsp;versions. It is possible to use the&nbsp;emonSD-13-08-14.img.zip on a hdd but it will require some changes.&nbsp;</p>
<p>Although there are instructions on how to add a hdd and/or change to a full emoncms&nbsp;from the buffered write, I believe this to be an upgrade &quot;option&quot; and isn&#39;t (IMO) the best way to start out if you know you want full emoncms on a hdd.&nbsp;</p>
<p>The SD image is a cut-down version of emoncms to achieve the low write levels needed to not ruin the SD card, installed to a&nbsp;version of raspbian that has been modified to add to the protection with a read-only file&nbsp;system, since neither of these are required with full emoncms on hdd further&nbsp;adapting the adapted software may lead to unexpected results.</p>
<p>I would recommend installing the latest&nbsp;raspbian&nbsp;image to the hdd as we previously did&nbsp;but instead of using apt-get to install emoncms, use git to install both emonHub and emonCMS.</p>
<p>​You can use this thread&nbsp;<a href="http://openenergymonitor.org/emon/node/5092">http://openenergymonitor.org/emon/node/5092</a>&nbsp;upto the reboot and then install&nbsp;emoncms<span style="line-height: 20.7999992370605px;">&nbsp;using the&nbsp;</span><a href="https://github.com/emoncms/emoncms/blob/master/docs/LinuxInstall.md" style="line-height: 20.7999992370605px;">&quot;to&nbsp;linux&nbsp;from git&quot;&nbsp;</a><span style="line-height: 20.7999992370605px;">instructions.</span></p>
<p>​installing emonHub&nbsp;is straight forward using this one line takes care of everything</p>
<p><strong>git clone <a href="https://github.com/emonhub/dev-emonhub.git" title="https://github.com/emonhub/dev-emonhub.git">https://github.com/emonhub/dev-emonhub.git</a> ~/dev-emonhub &amp;&amp; ~/dev-emonhub/install</strong></p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26710"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Mon, 12/01/2015 - 17:42.</div>
    <div class="content">
     <p>Thanks Paul</p>
<p>I will go that route.</p>
<p>Ian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26715"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/4440" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/4440" title="View user profile.">pb66</a> on Mon, 12/01/2015 - 18:34.</div>
    <div class="content">
     <blockquote><p><em>installing emonHub&nbsp;is straight forward using this one line takes care of everything</em></p>
</blockquote>
<p>Sorry, that&#39;s a bit misleading, you will still need to edit &quot;emonhub.conf&quot; (or keep a copy of the one you have)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26723"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/238" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/238" title="View user profile.">Paul Reed</a> on Mon, 12/01/2015 - 21:34.</div>
    <div class="content">
     <p>I can only echo Paul&#39;s comments above.</p>
<p>I installed the buffered write version from an image probably around August after (yet another) SD card failure, and then went onto transferring it to a <a href="http://openenergymonitor.org/emon/node/5553">USB HDD</a>,&nbsp;updating emoncms to the full &#39;git&#39; version in the process, but... I hit so many problems thereafter, that I ended up deleting the whole lot, and installing it from scratch via Git.</p>
<p>One thing you may wish to consider before you start (maybe for future development), is partitioning your HDD into 2 or more partitions, and use the first for your emoncms installation, and the second, third etc for other purposes.<br />
I have 3 partitions, 1) emoncms, 2) Media server files, 3) Data Backup files and now store very little on my laptop, and can access music, videos, pictures &amp; documents from my phone, tablet, laptop and also stream them to my TV.<br />
The HDD is auto backed up to a free copy.com cloud backup (they have a Raspberry Pi client app).</p>
<p>I try &amp; make the raspberry earn it&#39;s keep!</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26725"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3426" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3426" title="View user profile.">Bill Thomson</a> on Mon, 12/01/2015 - 22:33.</div>
    <div class="content">
     <p>Always a good idea to have your Linux installation spread across two or more partitions.</p>
<p>A sound practice I learned from an IT specialist is to put your /home directory on a separate partition. That way, when you upgrade the OS, your data and apps won&#39;t get overwritten by the upgrade.<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26726"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/4440" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/4440" title="View user profile.">pb66</a> on Mon, 12/01/2015 - 22:51.</div>
    <div class="content">
     <p>It is also a wise idea to keep the partitions small and increase the size as needed, that way it is very easy to create compact images quickly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26729"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/238" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/238" title="View user profile.">Paul Reed</a> on Mon, 12/01/2015 - 23:22.</div>
    <div class="content">
     <p><em>It is also a wise idea to keep the partitions small and increase the size as needed, that way it is very easy to create compact images quickly.</em></p>
<p>I&#39;ve been using <a href="http://www.fsarchiver.org/Main_Page">FSArchive</a>r&nbsp;via a <a href="http://www.sysresccd.org/SystemRescueCd_Homepage">live disk</a> for some time now to create backups, which has proved very reliable and as it only backs up actual data, the resultant archives are small, irrelevant&nbsp;of the partition size, and are quick.</p>
<p>I&#39;ve probably restored 3 or 4 times totally successfully, including&nbsp;different drives/sizes whilst checking out a new OS (Debian Jessie) and new&nbsp;hardware.</p>
<p>&nbsp;</p>
<p>Paul<br />
(going off-topic!!)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26730"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3426" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3426" title="View user profile.">Bill Thomson</a> on Mon, 12/01/2015 - 23:36.</div>
    <div class="content">
     <p>Sometimes off-topic is good. (Well, at least this time!)</p>
<p>Thanks for the link/heads-up about FSArchiver. I hadn&#39;t heard of it till now. Sounds like just what I&#39;ve been looking for in a backup/restore tool.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26742"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Tue, 13/01/2015 - 10:25.</div>
    <div class="content">
     <p>Hi</p>
<p>One thought just struck me. This is a new setup I am working on for deployment in another building and to keep up to date with emoncms&nbsp;developments.</p>
<p>I already have a PI with HDD (no&nbsp;&nbsp;RFM12Pi&nbsp;) acting as a server. This is fully up to date and working perfectly.</p>
<p>Would it be possible to take an image of that&nbsp;SD card and HDD, transfer it to the new set up and then&nbsp;install the RFM12Pi&nbsp;software and the emonhub&nbsp;software?</p>
<p>Regards</p>
<p>Ian</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26743"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/4440" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/4440" title="View user profile.">pb66</a> on Tue, 13/01/2015 - 10:55.</div>
    <div class="content">
     <p>It&#39;s certainly possible, however it may not be the best way forward, what versions are you running on the other Pi?</p>
<p>Working from memory I believe you have a debian&nbsp;&quot;apt-get&quot;&nbsp;installation. If that i the case you won&#39;t be able to update it to the latest emoncms&nbsp;without some &quot;minor&nbsp;butchery&quot; so if you want to tinker with the developments you may be better off with a clean git install.</p>
<p>I would be tempted to leave an established working system as it is, play with a all new set up and once confident with the new setup and there was some value in doing so, swap out the new for the old.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26745"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Tue, 13/01/2015 - 12:30.</div>
    <div class="content">
     <p>Hi Paul</p>
<p>I am up to 8.4.0 on the established server.</p>
<p>I switched to the Git version when I realised&nbsp;the apt-get was falling behind. It is because the established system is so up to date that I thought cloning might be the way to go.</p>
<p>I have now got the emonhub posting to the established Pi server. &nbsp;The only other&nbsp;thing I would like to do on the new Pi with emonhub is to switch to WiFi if that is&nbsp;possible.&nbsp;</p>
<p>Ian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26748"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/4440" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up emonhub + emoncms on Hard Drive</h3>

    <div class="submitted">Submitted by <a href="/emon/user/4440" title="View user profile.">pb66</a> on Tue, 13/01/2015 - 13:20.</div>
    <div class="content">
     <p>If it&#39;s git installed then yeah, there should be no problems cloning that server. What input stage(s) if any are you using? You said you are not using RFM2Pi on the established server so are you just using the emoncms input api?</p>
<p>I see no reason why wi-fi&nbsp;shouldn&#39;t work if you have emonHub installed to&nbsp;a full raspbian OS.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="/emon/node/9998"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-et50EmuWDvIzloOtkojzmAfbCf98h0nSRhd5eQ7XbNM" value="form-et50EmuWDvIzloOtkojzmAfbCf98h0nSRhd5eQ7XbNM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>

</html>
