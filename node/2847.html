<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2847 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:08:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Energy Monitoring Data Logger | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Energy Monitoring Data Logger</h3>
        <span class="submitted">Submitted by Guest on Wed, 18/09/2013 - 12:41</span>
        <div class="content"><p>I am looking to make a safe 3 phase energy monitor to monitor voltage, current,&nbsp;kwh,power factor, &nbsp;real and apparent power preferably. is this something i can do with the technology provided on this website?&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2951.html" class="topic-previous" title="Go to previous forum topic">‹ Emoncms.org down?</a>
              <a href="2981.html" class="topic-next" title="Go to next forum topic">Newbie wants to ask a few questions before starting ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-15239"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Michael.Young87&#039;s picture" title="Michael.Young87&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by Michael.Young87 (not verified) on Wed, 18/09/2013 - 12:41.</div>
    <div class="content">
     <p>i have looked at&nbsp;Home Energy Monitor Kit Bundle 868Mhz i am just wondering if this would facilitate my needs?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15240"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 18/09/2013 - 16:25.</div>
    <div class="content">
     <p>The bundle will provide you with a basic monitoring facility and a live display of voltage, current and power. It won&#39;t give you the ability to log and record the data (except for example a basic daily total). For that you need to add the emoncms database. That can run locally on a Raspberry Pi (with an RF module), or you can use the online emoncms.org and you&#39;ll then need a base station (NanodeRF, OKG or Raspberry Pi with RF module) to connect to the Internet to dispatch the data.</p>
<p>The other concern is how accurately you need to measure your power and energy. The emonTx has only one voltage input, so if the voltages of the other two phases are significantly different to the one being measures, errors will creep in. If that is a concern, it is possible to stack 3 emonTx&#39;s, one dedicated to each phase. This will give you the most accurate results.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15404"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Michael.Young87&#039;s picture" title="Michael.Young87&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by Michael.Young87 (not verified) on Wed, 25/09/2013 - 09:05.</div>
    <div class="content">
     <p>what i am looking todo is using a raspberry pi as a base setup one monitor to monitor the three currents at the incoming mains. and the to monitor the voltage make three other monitors to monitor the voltage as i&#39;m not likely to find three plug sockets next to each other on different phases. so all in all i would be looking at 4 separate modules all talking to raspberry&nbsp;pi logging live data with a time stamp. im hoping this is possible with a Raspberry Pi and 4 emonTx&#39;s&nbsp;with relevant sensors?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15405"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 25/09/2013 - 11:09.</div>
    <div class="content">
     <p>I assume you want accurate measurements of real power? If you are content with only apparent power (VA), then what you suggest should work.</p>
<p>If you do need real power, then what you propose won&#39;t work because you cannot monitor the voltage and current in separate emonTx&#39;s, since there is no mechanism to synchronise the readings (you need to consider how real power is calculated to see why). Even with the stack of 3 emonTx&#39;s communicating on the serial bus, each one still measures both voltage and current on one phase. If you cannot arrange to measure the voltage and current of the three phases at the same place - presumably the incomer - then you must measure one voltage and look at the approximate method in software to synthesize the voltages for the other two phases in order to calculate the real power - with the caveat that the voltage hence the power will not be accurate but it will be the best you can do.</p>
<p>However, there might be a way out to measure the voltages using a capacitive pick-up. This would only require a socket for the power supply. I proposed this as a solution to an enquiry some time ago, then it turned out it wasn&#39;t needed. <a href="1568.html">Here&#39;s a link</a>. You could have three such channels on a small p.c.b external to your emonTx.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15601"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Michael.Young87&#039;s picture" title="Michael.Young87&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by Michael.Young87 (not verified) on Sun, 06/10/2013 - 12:15.</div>
    <div class="content">
     <p>could i not use the rtc to sync the data after the fact use the difference in phase between current and voltage to calculate pf and work backwards to get real power? i am really struggling to get a code to just read voltage any how to be honest as everything seems to wont to calculate the current at the same time</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15603"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 06/10/2013 - 12:56.</div>
    <div class="content">
     <p>Your problem is you need the real power measurement. To get that, you need to know the phase difference between the voltage and current waveforms. In the meter that your energy supplier provides, that&#39;s easy as both are in the same instrument. You seem to need to have them separate, for a reason that&#39;s not entirely clear to me.</p>
<p>However, pursuing your line of thinking, to be able to measure the voltage and the current synchronously, your clocks need to be super accurate. Any error will be reflected in the accuracy of the real power measurement - it&#39;s not so critical where the load is near unity power factor, but when the load power factor deteriorates, it becomes more important.</p>
<p>Let&#39;s say you need the phase error to be within 3.6&deg; (just to make the sums easy). The timing on a 50 Hz system works out at 3.6&deg;&nbsp; / 360 x 20 ms, or 200 &micro;s. So your real time clocks need to stay within 200 &micro;s of each other for ever. Is that realistic? Possibly if the time is received by radio code or GPS, a resounding no otherwise.</p>
<p>If you want to calculate the power after the event, you must transmit every sample, and they come at around 3000 per second, to the central point and then match / interpolate to be able to calculate real power. (I think you&#39;re forgetting that even though the voltage wave might be close to a pure sine wave, the current wave will have significant distortion due to non-linear loads, so power factor = cos(phi) is not true.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15641"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Michael.Young87&#039;s picture" title="Michael.Young87&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by Michael.Young87 (not verified) on Wed, 09/10/2013 - 17:54.</div>
    <div class="content">
     <p>the reason i need to collect them from different locations is the original problem as i can not develop a non invasive way to measure the voltage at the same time from all three phases at the mains and it needs to look respectable as it will be used in different places and in other peoples properties and i cant find anything relating to capacitive pick ups on 230v&nbsp;i apologies for my knowledge downfall but this is why im trying to complete this project and unfortunately my lecturer seems to be none the wiser kind regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15642"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 09/10/2013 - 19:42.</div>
    <div class="content">
     <p>A capacitive &quot;Voltage Transformer&quot; is a common piece of equipment on high voltage transmission, but I&#39;m not at all surprised that you cannot find any information of its use at lower voltages. &quot;Transformer&quot; is the wrong name, it is not a transformer in the usual sense and it does not have windings and an iron core. A conventional wound transformer would be very difficult and expensive to make at the voltages where capacitive v.t&#39;s are normally found.</p>
<p>A voltage divider does not have to be made with resistors. What I suggested in the link a few posts up was a voltage divider made of capacitors rather than resistors. The &quot;bottom&quot; capacitor is a conventional component on a circuit board, the &quot;top&quot; capacitor is manufactured by you <em>in situ </em>by wrapping copper or aluminium foil around an <strong>insulated </strong>mains cable. You do not make a metallic connection to the mains cable.&nbsp; The top capacitor is necessarily of very low value, therefore to make the divider accurate, it needs an amplifier with an extremely high input impedance to buffer the signal into the Arduino. If you have a place where you can clip 3 c.t&#39;s onto the cables, you have the ideal place where you can sense the voltage, provided you have access to a some form of power supply to power the electronics.</p>
<p>You will need to manufacture 3 channels as I proposed earlier, and feed the three voltages into three analogue inputs, and the three currents into another three. Whether you can do this with one processor or whether you need three depends on how often you need to measure the power. If you are content with short samples of say half a second every 5 seconds, then one processor should suffice. If you need continuous measurements, you will almost certainly need 3.</p>
<p>You don&#39;t say what your lecturer&#39;s speciality is - I suggest you talk both to someone with experience in high voltage transmission and to someone with experience in electronics. I&#39;ve never had anything to do with 275 kV stuff and above, the highest I&#39;ve ever dealt with is 11 kV.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15895"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Michael.Young87&#039;s picture" title="Michael.Young87&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by Michael.Young87 (not verified) on Wed, 23/10/2013 - 09:57.</div>
    <div class="content">
     <p>thanks once again yes i will have access to the main tails to clip my ct&#39;s to it i will be manufacturing it on three arduino&nbsp;boards as like your self i didn&#39;t think one would have the processing power to take continuous&nbsp;readings. is there any where where i can find more information on the method you are suggesting so that i can figure out how to design and make one for my purpose? unfortunately my lecturers back ground is in project management and rather camp hand gestures neither of which are of any use to myself in this scenario hence why i am on these forums and i am greatly appreciating your help on the matter sorry i didn&#39;t reply sooner i have been offline for a fortnight &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15906"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Energy Monitoring Data Logger</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 23/10/2013 - 14:30.</div>
    <div class="content">
     <p>I haven&#39;t made one, but <a href="1568.html">here</a> Jack Kelly found the capacitor calculations were correct (and there&#39;s a circuit diagram in that thread too - designed for a 1 V p-p input, so that needs tweaking). The only snag with the design I proposed is it measures the voltage line-earth, not line-neutral, so if you have a significant neutral-earth voltage, you&#39;d need a 4th to measure the neutral voltage and feed the line and neutral into 3 differential amplifiers (more op.amps - 7 in total) to extract the 3 difference voltages between the 3 lines and neutral.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2847"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-iDCkLBIl1ytXirmhRp9rpXfZa6BYheKdQk9lHE_izwQ" value="form-iDCkLBIl1ytXirmhRp9rpXfZa6BYheKdQk9lHE_izwQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
