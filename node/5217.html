<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5217 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:06:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Setting up monitoring system and configuring OEM kit | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Setting up monitoring system and configuring OEM kit</h3>
        <span class="submitted">Submitted by <a href="../user/6384.html" title="View user profile.">joehandford</a> on Mon, 26/05/2014 - 09:58</span>
        <div class="content"><p><strike>See attachment for my questions.</strike></p>
<p>Help would be greatly appreciated.</p>
<p>Cheers, Joe</p>
<p>[Edit: Attachment in-lined for everybody&#39;s convenience. RW]</p>
<p>&nbsp;</p>
<p>Having problems getting my electricity monitoring setup working.<br />
	Initially trying to log readings to emoncms site to check the gear is working, but then will update to access the readings at the base station by modifying the open source code.</p>
<p><strong>EmonTx V3 configuration</strong></p>
<ul>
<li>
		Using pre-built device including firmware;</li>
<li>
		I&rsquo;ve made no configuration changes to the software;</li>
<li>
		Plug current sensors into CT1 and CT2;</li>
<li>
		Clamp current sensors around two mains leads;</li>
<li>
		Plug in AC- AC adaptor;</li>
<li>
		Red light illuminates for a few seconds then flashes for a few seconds then blinks once every 10 seconds or so.</li>
</ul>
<p>Questions: I ordered a 433MHz unit, therefore I believe that the default values of RFM12B network group and frequency in the shipped unit should be 212 (or 210, it&rsquo;s unclear which) and 433; but what about the nodeID? Does the base station need to know the nodeID and group of the EmonTx? Answer is probably yes as instructions state &ldquo;each non-multi-node receiver must be told the nodeID of each sender it must listen for and decode&rdquo;. I understand that if I was using a second EmonTx I would need to set this up with a different nodeID to differentiate it from the first unit. I believe that to set allow the EmonTx and base station to talk I need to go to the Raspberry Pi tab on the emoncms page and set the frequency, group (210?) and nodeID, when setting the nodeID here does this set the node ID of the EmonTx as well, or must this be known? If I must know it then how do I determine this for a pre-built EmonTx?<br />
	However, I&rsquo;m not seeing the Raspberry Pi tab on the emoncms page, when the base station is powered up (after the EmonTx).</p>
<p><strong>Base Station configuration</strong><br />
	Update oemgateway.conf with the correct frequency of the unit (4) and the Read &amp; Write API Key associated with my account from the emoncms site.<br />
	I had to enlarge the SD disk image, set the time-zone and change the password on the pi before I plugged in the RFM12Pi as I couldn&rsquo;t log in to the Pi with the board attached &ndash; is this a problem?<br />
	Then I powered down the pi plugged in the RFM12Pi and powered up again. The green led pulses a couple of times, but never again&hellip;unless I power up and down, when I get the same sequence.<br />
	No values get displayed at the emoncms site, presumably because I&rsquo;m unable to configure the Pi connected to my account.<br />
	Currently my Pi is connected to the internet via an Ethernet cable after having pulled my hair out all day trying to get the pi to talk to my router wirelessly. Has anyone else got this working? Problem appears to be that wlan0 is not available to the pi because the rt2800usb module associated with the wi-pi wireless dongle is not loaded; the module is present but I can&rsquo;t get it to load. Has the wireless capability of the pi been consciously disabled on the base station image to avoid conflicts with the emon radio messages &ndash; can&rsquo;t see why there should be an issue of having them both enabled. I guess I could upgrade/update the pi software but this might break the base station build.<br />
	Please can anyone offer advice:<br />
	Primary concern is just getting the system working;<br />
	Second is to get pi wirelessly talking to router at same time as emon radio comms.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5199.html" class="topic-previous" title="Go to previous forum topic">‹ My installation that does not fit with type1 or type2</a>
              <a href="5211.html" class="topic-next" title="Go to next forum topic">How to store kWh values in emoncms.org ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-21573"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up monitoring system and configuring OEM kit</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 26/05/2014 - 12:25.</div>
    <div class="content">
     <p><em>Red light illuminates for a few seconds then flashes for a few seconds then blinks once every 10 seconds or so.</em> This indicates that the emonTx is working correctly.</p>
<p><em>Does the base station need to know the nodeID and group of the EmonTx?</em> The Group is 210 (where did you get 212 from?) and no, the base forwards the NodeID and does not need it.</p>
<p><em>If I must know it then how do I determine this for a pre-built EmonTx? </em>It is loaded with the default sketch. The emonTx V3 page tells you what that is and you can find it on GitHub.</p>
<p>I&#39;m not an RPi expert so I&#39;ll leave the setup of that to someone who is.&nbsp; This <a href="3887.html#comment-18624" title="http://openenergymonitor.org/emon/node/3887#comment-18624">http://openenergymonitor.org/emon/node/3887#comment-18624</a> and subsequent posts might shed light on your WiFi problem</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21584"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6384.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="joehandford&#039;s picture" title="joehandford&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Setting up monitoring system and configuring OEM kit</h3>

    <div class="submitted">Submitted by <a href="../user/6384.html" title="View user profile.">joehandford</a> on Mon, 26/05/2014 - 17:33.</div>
    <div class="content">
     <p>Thanks for the suggestions Robert. I believe I have a fairly fundamental problem though...</p>
<p>Plugging the&nbsp;RFM12Pi&nbsp;board onto the Pi kills all network connectivity to the Pi. Take the&nbsp;RFM12Pi off and it is addressable again. With a keyboard and monitor attached to the Pi with the&nbsp;RFM12Pi attached it is not possible to logon to the Pi.</p>
<p>Anyone else experienced this?</p>
<p>Cheers, Joe</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5217"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Iye6GdJAwHOMTRqYUlD6CXm2vX151DYn9wgLYyB3l8c" value="form-Iye6GdJAwHOMTRqYUlD6CXm2vX151DYn9wgLYyB3l8c"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
