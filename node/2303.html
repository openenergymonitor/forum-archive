<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2303 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:38:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Strange Behaviour from EmonTX temperature node | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Strange Behaviour from EmonTX temperature node</h3>
        <span class="submitted">Submitted by <a href="../user/3240.html" title="View user profile.">john.b</a> on Fri, 26/04/2013 - 10:02</span>
        <div class="content"><p>I&#39;ve noticed some strange behaviour from one of my EmonTX Low Power Temperature Nodes.&nbsp; All has been working perfectly for a few months, but then one node started sending exactly the same temperature for a period four hours.&nbsp; When seeing this in emoncms I thought this was unlikely to be a true measurement of actual temperature, but as the data then went back to the normal pattern I just dismissed it as a fluke.&nbsp; However a day or so later I noticed large gaps appearing in the data recorded in emoncms.</p>
<p>Gaps in the data could be a problem with reception, but four hours of the same data seems to be a problem with the emontx node.&nbsp; The battery voltage is stable at 2.95v.&nbsp; For now I have just removed and replaced the battery to allow the node to reset and at the moment the data is coming in consistently every minute.</p>
<p>I wondered if anybody else has experienced this issue and what the problem might be.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2308.html" class="topic-previous" title="Go to previous forum topic">‹ dual-range CT circuit</a>
              <a href="2307.html" class="topic-next" title="Go to next forum topic">Led on Digital 9 not working ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-11618"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange Behaviour from EmonTX temperature node</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Fri, 26/04/2013 - 10:31.</div>
    <div class="content">
     <p>This might sound silly, but are you sure it did send the same data all along ?</p>
<p>If the radio link fails (too much noise) and no data is received, this can be displayed as a flat curve in the charts.</p>
<p>Just asking.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11619"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3240.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="john.b&#039;s picture" title="john.b&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange Behaviour from EmonTX temperature node</h3>

    <div class="submitted">Submitted by <a href="../user/3240.html" title="View user profile.">john.b</a> on Fri, 26/04/2013 - 11:17.</div>
    <div class="content">
     <p>Hi J&eacute;r&ocirc;me,</p>
<p>Thanks for responding.</p>
<p>I&#39;m positive its data received, I&#39;ve exported to CSV and checked there is data for every minute during the period and it&#39;s four hours of exactly the same temperature.&nbsp; Also I looked at the battery voltage data for the same node / period and every minute there is data, which is NOT all the same.&nbsp; So I don&#39;t think this issue is to do with the radio link, but perhaps a read error to the temperature sensor?</p>
<p>As for the subsequent gaps in the data; this has never happened before.&nbsp; I have had consistent data every minute for three months with only the very occasional missed data point.</p>
<p>Interestingly and I think / hope unconnected there is someone else (obviously local) who is transmitting data that showed in my inputs.&nbsp; The nodes where different and it disappeared thereafter as I assume they changed their network group.&nbsp; This was a week or so earlier than my problem so I don&#39;t think it is connected, but what&#39;s your view?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11649"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange Behaviour from EmonTX temperature node</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 27/04/2013 - 11:44.</div>
    <div class="content">
     <p><em>&quot;The battery voltage is stable at 2.95v.&quot;</em></p>
<p>There is your problem. The DS18B20 has a minimum supply voltage of 3.0 V, so it is not guaranteed to work at 2.95 V.</p>
<p>(And if your meter is reading high, the true voltage could be less than that).</p>
<p>I suspect what is happening is this: it has an internal scratchpad memory that stores the reading. It&#39;s possible that the scratchpad is supplying a stored reading but not getting updated due to the low supply voltage.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11654"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3240.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="john.b&#039;s picture" title="john.b&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange Behaviour from EmonTX temperature node</h3>

    <div class="submitted">Submitted by <a href="../user/3240.html" title="View user profile.">john.b</a> on Sat, 27/04/2013 - 18:58.</div>
    <div class="content">
     <p>Robert,<br />
	I take your point about the voltage and thanks for the feedback, but I&#39;m now confused about the battery life of the low power temperature node.&nbsp; If 3.0 V is the minimum reliable voltage for the DS18B20 and the data sheet confirms that&rsquo;s the minimum, then how can the batteries last 138 days with data taken every 10 seconds as implied by the sketch.&nbsp; When I started out on this I assumed 2.2 volts was the minimum voltage as that is the low battery level set in the sketch.</p>
<p>I vaguely remember reading something on this site about using the sensor at low voltages (2.7 V if my memory serves) specifically to show the validity of the low power temperature node, however I can&#39;t find that page anymore.</p>
<p>I have now measured the voltage with a meter as 2.95V the same as that reported by the node.&nbsp; For reference the same meter measures 3.17V on brand new batteries with no load.&nbsp; Since I&#39;m only switching the sensor on once a minute and not every 10 seconds I would expect better life than 70 days.</p>
<p>If the voltage is indeed the issue then would it not be better to design the low power temperature node around three AA batteries?&nbsp; And I guess the next question would be, is that as simple as it sounds, can I just power it with three batteries? At least then the voltage would have some margin to drop from 4.5V before hitting the minimum of that required by the sensor.</p>
<p>Incidentally since I pulled the batteries and re-inserted them the node is working perfectly, but I have now modified the sketch so I can detect when the temp variable is not being updated.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11655"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange Behaviour from EmonTX temperature node</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 27/04/2013 - 19:16.</div>
    <div class="content">
     <p><em>&quot;Incidentally since I pulled the batteries and re-inserted them the node is working perfectly,</em>&quot;<br />
	That says to me you had some corrosion on the battery contacts, and you had an excessive drop across the resulting contact resistance when it turned on to measure the temperature and transmit. So in the period it was active, the actual working voltage would have been somewhat less than 2.95 V.</p>
<p>You can&#39;t use 3 cells because of the upper voltage limit of the RFM12B radio module at 3.8 V, so you&#39;re stuck with 2, I&#39;m afraid. I didn&#39;t design the sketch, so I can&#39;t comment specifically, but my guess is it was found to work down to 2.2 V. That doesn&#39;t affect what the data sheet says in any way: it is only guaranteed to work within spec (in all respects) down to 3.0 V. I&#39;ve no idea which aspects of its performance go out of spec as the voltage reduces, it may well be things that are not important in this application.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11664"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3240.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="john.b&#039;s picture" title="john.b&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange Behaviour from EmonTX temperature node</h3>

    <div class="submitted">Submitted by <a href="../user/3240.html" title="View user profile.">john.b</a> on Sun, 28/04/2013 - 09:29.</div>
    <div class="content">
     <p>There is no sign of any corrosion on the contacts and I guess for now I need to monitor the issue and see if it reoccurs.&nbsp; If it does continue to be a problem I will have to rethink what I&rsquo;m doing.&nbsp; I have a Nanode RF running as a web accessible PID temperature controller and it&rsquo;s using the inside, outside and boiler temperatures from battery powered nodes as process variables, so I don&rsquo;t want these failing this early in their battery life.</p>
<p>
	I was toying with the idea of buying an ononGLCD, so one more reliable solution could be to use that to monitor the inside temperature with mains power and re-write my controller so it will still work if either the outside or boiler temperature nodes go down.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11668"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange Behaviour from EmonTX temperature node</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 28/04/2013 - 10:21.</div>
    <div class="content">
     <p>My digital camera has the same problem: no visible corrosion but when the rechargeable NiMH cells aren&#39;t freshly charged, it says &#39;low battery&#39;. Flip the cover open and twiddle the cells a bit and it&#39;s quite happy.</p>
<p>The only thought that might help: take a look at JeeLabs. I think it&#39;s there I&#39;ve seen about using a single cell and a step-up regulator. I can&#39;t tell you any more than that - it was many months ago I saw it.</p>
<p>You could also try a large capacitor across the 3.3 V supply - it might help if it really is contact resistance that is causing the problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11669"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3240.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="john.b&#039;s picture" title="john.b&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange Behaviour from EmonTX temperature node</h3>

    <div class="submitted">Submitted by <a href="../user/3240.html" title="View user profile.">john.b</a> on Sun, 28/04/2013 - 10:29.</div>
    <div class="content">
     <p>Just thought about using 2 Nickel oxyhydroxide batteries such as Duracell Power Pix they&#39;re obviously more expensive than alkaline at &pound;1 each, but with 1.7V nominal they should have a longer life before reaching the minimum voltage for the sensor.&nbsp; Might actually be cheaper than potentially having to ditch alkaline batteries every time the node gets down to 3.0V.</p>
<p>Worth trying if the problem persists.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11671"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3240.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="john.b&#039;s picture" title="john.b&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange Behaviour from EmonTX temperature node</h3>

    <div class="submitted">Submitted by <a href="../user/3240.html" title="View user profile.">john.b</a> on Sun, 28/04/2013 - 10:54.</div>
    <div class="content">
     <p>Sorry Robert,</p>
<p>I didn&#39;t see your last post before I made my comment about alternative chemistry batteries.&nbsp; You make a valid point I&#39;ve had a similar problem with TV remote controls, just twiddle the batteries and it starts working again.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2303"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-peGRtZMg_DUSfapWrIcagk9m59IfyJz2f_F-1Oc_4Ow" value="form-peGRtZMg_DUSfapWrIcagk9m59IfyJz2f_F-1Oc_4Ow"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
