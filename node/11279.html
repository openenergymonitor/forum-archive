<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11279 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:03:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>3 Phase + temp + serial  on  emon tx v3.4 | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">3 Phase + temp + serial  on  emon tx v3.4</h3>
        <span class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Mon, 21/09/2015 - 16:46</span>
        <div class="content"><p>Hi all,&nbsp;</p>
<p>First of all i&acute;m a rookie on the arduino world, so please take your stress pill before try to help me :)</p>
<p>I recently bought the new emonTx v3.4,&nbsp;4 clamps, and the temp sensor.</p>
<p>At home I&nbsp;have a 3 phase instalation&nbsp;that i want to monitor via the emoncms.&nbsp;</p>
<p>I already have a Raspberry pi2 with an openhab running on it and some arduinos&nbsp;that subscribe the different sensors to the openhab via mqtt.&nbsp;</p>
<p>My idea it&acute;s to install the emoncms&nbsp;on the pi, and connect it directly to the emontx via serial. I see on &nbsp;github that there are some sketches, but only one for the 3 phase setup and not for serial, just for RF.</p>
<p>So i&acute;m not sure how to proceed, and it&acute;s far away from my actual knowledge to try to remove the RF part fro the code and to&nbsp;fix therest&nbsp;of the&nbsp;code in order to obtain such setup. So the sketch that i want need to be 3 phase compatible, send the data via serial to the pi and read the value of the temp sensor too.&nbsp;</p>
<p>Do you know if such sketch setup is available?</p>
<p>Thanks in advance.&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11811.html" class="topic-previous" title="Go to previous forum topic">‹ esp8266 test setup</a>
              <a href="11885.html" class="topic-next" title="Go to next forum topic">invalid values  emonTX /emonBase ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-34344"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 21/09/2015 - 20:48.</div>
    <div class="content">
     <p>Sorry, but there's only the one 3-phase sketch. </p>
<p>Removing the r.f. isn't difficult - it is relatively self-contained and in fact, if you don't define which r.f. module you're using, it won't use one. So you're half-way there already.</p>
<p>Details of the serial connection are here: <a href="3872.html">http://openenergymonitor.org/emon/node/3872</a></p>
<p>Then in terms of the sketch, you'll need to remove the existing "Serial.print" lines and substitute the data that you want to send via your serial link. The format is in the sketch that is linked in Trystan's post.</p>
<p>Temperature sensing isn't in the 3-phase sketch at the moment, but that can be added if required.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34354"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Tue, 22/09/2015 - 11:13.</div>
    <div class="content">
     <p>Hi Robert,&nbsp;</p>
<p>Yesterday&nbsp;I load the 3 phase sketch on the emontx v3.4 and setup the emoncms and emonhub. I connect it via serial without problem. Then i setup the emonhub.conf to use my serial connection but i think the emonhub can not parse the values it obtain. I&acute;m not sure if i meda something wrong or if i forget to setup something. Here is the log. The emonhub discard all the data as non numerical content. I see that the sketch for serial connection&nbsp;print on serial console just numbers not the description as the one that have the 3 phase integrated. I&acute;m not sure if that&acute;s the problem or how is the order that the emoncms expect from&nbsp;the input.</p>
<p>On the input tab of the emoncms&nbsp;does not appear eny input. maybe because it does not recognice the values. Don&acute;t know...</p>
<p>Thanks in advance&nbsp;&nbsp;</p>
<p>I&acute;m using emoncms 9 rc2</p>
<p>2015-09-22 12:04:42,041 INFO EmonHub Pre-Release Development Version (rc1.2)<br />
2015-09-22 12:04:42,042 INFO Opening hub...<br />
2015-09-22 12:04:42,043 INFO Logging level set to DEBUG<br />
2015-09-22 12:04:42,045 INFO Creating EmonHubEmoncmsReporter &#39;emonCMS&#39;<br />
2015-09-22 12:04:42,047 INFO Set up reporter &#39;emonCMS&#39; (buffer: memory | size: 1000)<br />
2015-09-22 12:04:42,049 INFO Setting emonCMS url: <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2015-09-22 12:04:42,050 INFO Setting emonCMS apikey: set<br />
2015-09-22 12:04:42,052 INFO Creating EmonHubSerialInterfacer &#39;SerialDirect&#39;<br />
2015-09-22 12:04:42,054 DEBUG Opening serial port: /dev/ttyAMA0 @ 9600 bits/s<br />
2015-09-22 12:04:43,922 DEBUG 1 NEW FRAME : 1442919883.92 Voltage: 1964354432.00<br />
2015-09-22 12:04:43,923 WARNING 1 Discarded RX frame &#39;non-numerical content&#39; : [&#39;Voltage:&#39;, &#39;1964354432.00&#39;]<br />
2015-09-22 12:04:44,143 DEBUG 2 NEW FRAME : 1442919884.14 &nbsp;Phase 1: 0.00 A, 0.00 W, 0.00 VA, PF=187.999<br />
2015-09-22 12:04:44,144 WARNING 2 Discarded RX frame &#39;non-numerical content&#39; : [&#39;Phase&#39;, &#39;1:&#39;, &#39;0.00&#39;, &#39;A,&#39;, &#39;0.00&#39;, &#39;W,&#39;, &#39;0.00&#39;, &#39;VA,&#39;, &#39;PF=187.999&#39;]<br />
2015-09-22 12:04:44,354 DEBUG 3 NEW FRAME : 1442919884.35 &nbsp;Phase 2: nan A, 0.00 W, nan VA, PF=nan<br />
2015-09-22 12:04:44,355 WARNING 3 Discarded RX frame &#39;non-numerical content&#39; : [&#39;Phase&#39;, &#39;2:&#39;, &#39;nan&#39;, &#39;A,&#39;, &#39;0.00&#39;, &#39;W,&#39;, &#39;nan&#39;, &#39;VA,&#39;, &#39;PF=nan&#39;]<br />
2015-09-22 12:04:44,563 DEBUG 4 NEW FRAME : 1442919884.56 &nbsp;Phase 3: nan A, ovf W, nan VA, PF=nan<br />
2015-09-22 12:04:44,564 WARNING 4 Discarded RX frame &#39;non-numerical content&#39; : [&#39;Phase&#39;, &#39;3:&#39;, &#39;nan&#39;, &#39;A,&#39;, &#39;ovf&#39;, &#39;W,&#39;, &#39;nan&#39;, &#39;VA,&#39;, &#39;PF=nan&#39;]<br />
2015-09-22 12:04:44,772 DEBUG 5 NEW FRAME : 1442919884.77 &nbsp;Input 4: nan A, ovf W, nan VA, PF=nan<br />
2015-09-22 12:04:44,773 WARNING 5 Discarded RX frame &#39;non-numerical content&#39; : [&#39;Input&#39;, &#39;4:&#39;, &#39;nan&#39;, &#39;A,&#39;, &#39;ovf&#39;, &#39;W,&#39;, &#39;nan&#39;, &#39;VA,&#39;, &#39;PF=nan&#39;]<br />
2015-09-22 12:04:44,979 WARNING Discarded empty frame</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34356"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 22/09/2015 - 11:23.</div>
    <div class="content">
     <p>Yesterday I wrote <i>"Then in terms of the sketch, you'll need to remove the existing "Serial.print" lines and substitute the data that you want to send via your serial link. The format is in the sketch that is linked in Trystan's post."</i></p>
<p>Your problem is there. You need to remove the "human-friendly" words and only send the numbers in the format that the sketch of Trystan's uses.</p>
<p>So using your error messages, find where those words are in the sketch and comment out those lines.<br />
Then look at the serial sketch on Github - I told you where the link is - and send the variables you need in that format.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34360"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Tue, 22/09/2015 - 11:43.</div>
    <div class="content">
     <p>Sorry my Bad, i&acute;ll do my homeworks and report back.&nbsp;</p>
<p>&nbsp;</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34363"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Tue, 22/09/2015 - 12:25.</div>
    <div class="content">
     <p>OK, i compare both&nbsp;sketchs&nbsp;but i&acute;m not sure the order that the&nbsp;emoncms&nbsp;expect for the input. As the one on&nbsp;trystan&nbsp;page is for one phase and the data it includes are not the same.&nbsp;</p>
<p>&nbsp;</p>
<p>1 phase &nbsp; It print : Real Power ,&nbsp;VRMS&nbsp;for CT1</p>
<p>Serial.print(ct1.realPower); Serial.print(&#39; &#39;);&nbsp;<br />
&nbsp; &nbsp; Serial.print(ct2.realPower); Serial.print(&#39; &#39;);&nbsp;<br />
&nbsp; &nbsp; Serial.print(ct3.realPower); Serial.print(&#39; &#39;);&nbsp;<br />
&nbsp; &nbsp; Serial.print(ct4.realPower); Serial.print(&#39; &#39;);&nbsp;<br />
&nbsp; &nbsp; Serial.println(ct1.Vrms);</p>
<p>3 Phase Sketch Per Phase:&nbsp;LRMS,&nbsp;realpower,apparentpower,powerfactor.</p>
<p>Serial.print(F(&quot;Voltage: &quot;)); &nbsp;Serial.println(Vrms);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; Phase 1: &quot;)); Serial.print(Irms1);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; A, &quot;)); Serial.print(realPower1);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; W, &quot;)); Serial.print(apparentPower1);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; VA, PF=&quot;)); Serial.println(powerFactor1,3);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; Phase 2: &quot;)); Serial.print(Irms2);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; A, &quot;)); Serial.print(realPower2);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; W, &quot;)); Serial.print(apparentPower2);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; VA, PF=&quot;)); Serial.println(powerFactor2,3);</p>
<p>&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; Phase 3: &quot;)); Serial.print(Irms3);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; A, &quot;)); Serial.print(realPower3);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; W, &quot;)); Serial.print(apparentPower3);<br />
&nbsp;&nbsp; &nbsp;Serial.print(F(&quot; VA, PF=&quot;)); Serial.println(powerFactor3,3);</p>
<p>&nbsp;</p>
<p>I need to print all the data in that order per phase? what is the input order that the&nbsp;emoncms&nbsp;input&nbsp;expect&nbsp;for a&nbsp;3 phase system?</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34365"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 22/09/2015 - 14:45.</div>
    <div class="content">
     <p>You need to send the data that <i><b>you</b></i> want. The "Serial" sketch only sends the 4 powers and rms voltage, so if that's all you want, just send those - but I've used different names in the 3-phase sketch, so you'll need to keep the <i>names</i> from there and wrap them inside the Serial.prints taken from the Serial sketch. </p>
<p>Here's what I have now in the 3-ph sketch (untested!)</p>
<pre>	
    Serial.print(realPower1); Serial.print(' '); 
    Serial.print(realPower2); Serial.print(' '); 
    Serial.print(realPower3); Serial.print(' '); 
    Serial.print(realPower4); Serial.print(' '); 
    Serial.print(Vrms);
    if (numSensors)
    {
        for (byte j=0;j&lt;numSensors;j++)
	{
	    Serial.print(emontx.temp[j]);
	    Serial.print(' ');
	} 
    }	
    Serial.print("\n");
</pre><p>
Having decided what you are going to send, you then need to edit the emonhub configuration to receive that data - the default configuration won't necessarily work.</p>
<p>This is what I have at present for the version on soak test (not the version above), note that I'm not sending temperatures:</p>
<pre>
[[10]]
    nodename = emonTx_1
    firmware =3-phase_4-wire_DiscreteSampling
    hardware = emonTx_(NodeID_DIP_Switch1:OFF)
    [[[rx]]]
       names = power1, power2, power3, power4, Vrms
       datacodes = h,h,h,h,h
       scales = 1,1,1,1,1
       units =W,W,W,W,V

</pre><p>
I've also multiplied Vrms by 100 in the sketch, so it now sends the voltage in cV (centivolts), and I'm multiplying by 0.01 in emonCMS to restore the value to 2 decimal places. You might want to do that too.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34377"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Tue, 22/09/2015 - 17:07.</div>
    <div class="content">
     <p>ok, i change on the sketch the serial prints and now it prints only the numbers as expected.&nbsp;</p>
<p>I change the emonhub conf adding the code&nbsp;you paste above.&nbsp;&nbsp;Now in the log it appears to discard all frames.&nbsp;</p>
<p>2015-09-22 17:59:40,291 INFO Setting emonCMS url: <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2015-09-22 17:59:40,292 INFO Setting emonCMS apikey: set<br />
2015-09-22 17:59:40,293 INFO Creating EmonHubSerialInterfacer &#39;SerialDirect&#39;<br />
2015-09-22 17:59:40,295 DEBUG Opening serial port: /dev/ttyAMA0 @ 9600 bits/s<br />
2015-09-22 17:59:41,540 DEBUG 1 NEW FRAME : 1442941181.54 1011.94 1116.81 ovf 0.00 53.50<br />
2015-09-22 17:59:41,541 WARNING 1 Discarded RX frame &#39;non-numerical content&#39; : [&#39;1011.94&#39;, &#39;1116.81&#39;, &#39;ovf&#39;, &#39;0.00&#39;, &#39;53.50&#39;]<br />
2015-09-22 17:59:45,681 DEBUG 2 NEW FRAME : 1442941185.68 230.51 253.57 237.82 0.00 25.06<br />
2015-09-22 17:59:45,682 WARNING 2 Discarded RX frame &#39;node id outside scope&#39; : [&#39;230.51&#39;, &#39;253.57&#39;, &#39;237.82&#39;, &#39;0.00&#39;, &#39;25.06&#39;]<br />
2015-09-22 17:59:49,807 DEBUG 3 NEW FRAME : 1442941189.81 2.18 2.30 2.08 0.00 2.31<br />
2015-09-22 17:59:49,808 WARNING 3 Discarded RX frame &#39;node id outside scope&#39; : [&#39;2.18&#39;, &#39;2.30&#39;, &#39;2.08&#39;, &#39;0.00&#39;, &#39;2.31&#39;]<br />
2015-09-22 17:59:53,939 DEBUG 4 NEW FRAME : 1442941193.94 0.93 1.16 0.97 0.00 1.71<br />
2015-09-22 17:59:53,940 WARNING 4 Discarded RX frame &#39;node id outside scope&#39; : [&#39;0.93&#39;, &#39;1.16&#39;, &#39;0.97&#39;, &#39;0.00&#39;, &#39;1.71&#39;]</p>
<p>##################And after a while it crash with the code:</p>
<p>Traceback (most recent call last):<br />
&nbsp; File &quot;/usr/share/emonhub/emonhub.py&quot;, line 338, in &lt;module&gt;<br />
&nbsp; &nbsp; hub.run()<br />
&nbsp; File &quot;/usr/share/emonhub/emonhub.py&quot;, line 90, in run<br />
&nbsp; &nbsp; values = I.read()<br />
&nbsp; File &quot;/home/pi/emonhub/src/emonhub_interfacer.py&quot;, line 387, in read<br />
&nbsp; &nbsp; return self._process_frame(f, t)<br />
&nbsp; File &quot;/home/pi/emonhub/src/emonhub_interfacer.py&quot;, line 106, in _process_frame<br />
&nbsp; &nbsp; frame = self._decode_frame(ref, validated)<br />
&nbsp; File &quot;/home/pi/emonhub/src/emonhub_interfacer.py&quot;, line 237, in _decode_frame<br />
&nbsp; &nbsp; decoded.insert(0, int(node))<br />
ValueError: invalid literal for int() with base 10: &#39;0.00&#39;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34379"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 22/09/2015 - 19:13.</div>
    <div class="content">
     <p>&nbsp;&quot;<em>Discarded RX frame &#39;non-numerical content&#39; : [&#39;1011.94&#39;, &#39;1116.81&#39;, &#39;ovf&#39;, &#39;0.00&#39;, &#39;53.50&#39;]&quot;</em></p>
<p><span style="line-height: 20.8px;">the 1st packet was&nbsp;</span>discarded because of the &quot;ovf&quot;</p>
<p><em>&quot;Discarded RX frame &#39;node id outside scope&#39; : [&#39;230.51&#39;, &#39;253.57&#39;, &#39;237.82&#39;, &#39;0.00&#39;, &#39;25.06&#39;]&quot;</em></p>
<p>the 2nd (3rd &amp;&nbsp;4th) are discarded because the first value in the frame should identify&nbsp;which node sent it and &nbsp;&quot;230.51&quot; is not within the allowed&nbsp;range of a node id (0 - 31).</p>
<p>You need to add a serial print&nbsp;node id to your sketch in front of the serial printed values to fit the OEM standard&nbsp;<em>nodeid val1&nbsp;val2 val3...&nbsp;</em>format</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34382"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 22/09/2015 - 19:45.</div>
    <div class="content">
     <p>Of course. Trystan's serial sketch predates the requirement for a Node ID. (I'm using radio, so the NodeID is available in that way. I did say the sketch was untested!)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34548"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Sun, 27/09/2015 - 20:35.</div>
    <div class="content">
     <p>OK, finally today i complete the 3 CT install on the 3Phase cables.&nbsp;</p>
<p>On the emonhub log i see that there&acute;s no values on the 3 phases cables, just three&nbsp;0. Then sometimes it appears as negatine values or NAN, and the emonhub start to retry in a loop and never recover. I don&acute;t know what i&acute;m doing wrong. Sorry but i&acute;m a bit lost.&nbsp;</p>
<p>&nbsp;</p>
<p>2015-09-27 21:23:23,160 DEBUG 11 Append to &#39;emonCMS&#39; buffer =&gt; time: 1443385403.15, data: [10, 0.05, 0, 0, 0, 0.02], ref: 11<br />
2015-09-27 21:23:23,262 INFO emonCMS sending: http://localhost/emoncms/input/bulk.json?apikey=E-M-O-N-C-M-S-A-P-I-K-E-Y&amp;data=[[1443385403.15,10,0.05,0,0,0,0.02]]&amp;sentat=1443385403<br />
2015-09-27 21:23:23,413 DEBUG emonCMS acknowledged receipt with &#39;ok&#39; from <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2015-09-27 21:23:27,277 DEBUG 12 NEW FRAME : 1443385407.28 10 0.05 0.00 0.00 -0.00 0.02<br />
2015-09-27 21:23:27,279 DEBUG 12 Timestamp : 1443385407.28<br />
2015-09-27 21:23:27,279 DEBUG 12 &nbsp; &nbsp; &nbsp;Node : 10<br />
2015-09-27 21:23:27,280 DEBUG 12 &nbsp; &nbsp;Values : [0.05, 0, 0, 0, 0.02]</p>
<p>&nbsp;</p>
<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt;emonhub&nbsp;Negative values.</p>
<p>015-09-27 21:24:04,257 WARNING emonCMS send failure: wanted &#39;ok&#39; but got &#39;Error: Format error, json string supplied is not valid<br />
&#39;<br />
2015-09-27 21:24:04,272 DEBUG 21 NEW FRAME : 1443385444.27 10 0.05 0.00 0.00 -0.00 0.02<br />
2015-09-27 21:24:04,273 DEBUG 21 Timestamp : 1443385444.27<br />
2015-09-27 21:24:04,274 DEBUG 21 &nbsp; &nbsp; &nbsp;Node : 10<br />
2015-09-27 21:24:04,274 DEBUG 21 &nbsp; &nbsp;Values : [0.05, 0, 0, 0, 0.02]<br />
2015-09-27 21:24:04,359 INFO emonCMS sending: http://localhost/emoncms/input/bulk.json?apikey=E-M-O-N-C-M-S-A-P-I-K-E-Y&amp;data=[[1443385411.41,10,0.05,0,0,0,NaN],[1443385415.57,10,0.05,0,0,0,0.02],[1443385419.71,10,0.05,0,0,0,0.02],[1443385423.86,10,0.05,0,0,0,0.02],[1443385427.89,10,0.05,0,0,0,0.02],[1443385432.04,10,0.05,0,0,0,0.02],[1443385435.98,10,0.05,0,0,0,NaN],[1443385440.12,10,0.05,0,0,0,0.02]]&amp;sentat=1443385444<br />
2015-09-27 21:24:04,434 WARNING emonCMS send failure: wanted &#39;ok&#39; but got &#39;Error: Format error, json string supplied is not valid</p>
<p>&nbsp;</p>
<p>&gt;&gt;&gt;&gt;&gt;&lt;Emonhub LOOP</p>
<p>#####################</p>
<p>2015-09-27 21:31:58,609 WARNING emonCMS send failure: wanted &#39;ok&#39; but got &#39;Error: Format error, json string supplied is not valid<br />
&#39;<br />
2015-09-27 21:31:58,714 INFO emonCMS sending: http://localhost/emoncms/input/bulk.json?apikey=E-M-O-N-C-M-S-A-P-I-K-E-Y&amp;data=[[1443385411.41,10,0.05,0,0,0,NaN],[1443385415.57,10,0.05,0,0,0,0.02],[1443385419.71,10,0.05,0,0,0,0.02],[1443385423.86,10,0.05,0,0,0,0.02],[1443385427.89,10,0.05,0,0,0,0.02],[1443385432.04,10,0.05,0,0,0,0.02],[1443385435.98,10,0.05,0,0,0,NaN],[1443385440.12,10,0.05,0,0,0,0.02],[1443385444.27,10,0.05,0,0,0,0.02],[1443385448.42,10,0.05,0,0,0,0.02],[1443385452.56,10,0.05,0,0,0,0.02],[1443385456.51,10,0.05,0,0,0,0.01],[1443385460.66,10,0.05,0,0,0,0.02],[1443385464.8,10,0.05,0,0,0,0.01],[1443385468.97,10,0.05,0,0,0,0.02],[1443385472.93,10,0.05,0,0,0,NaN],[1443385477.06,10,0.05,0,0,0,0.02],[1443385481.23,10,0.05,0,0,0,0.02],[1443385485.37,10,0.05,0,0,0,0.02],[1443385489.51,10,0.05,0,0,0,0.02],[1443385493.47,10,0.05,0,0,0,0.02],[1443385497.59,10,0.05,0,0,0,0.01],[1443385501.73,10,0.05,0,0,0,0.02],[1443385505.89,10,0.05,0,0,0,0.02],[1443385510.04,10,0.05,0,0,0,0.01],[1443385513.96,10,0.05,0,0,0,0.01],[1443385518.12,10,0.05,0,0,0,0.02],[1443385522.26,10,0.05,0,0,0,0.02],[1443385526.42,10,0.05,0,0,0,0.02],[1443385530.57,10,0.05,0,0,0,0.02],[1443385534.57,10,0.05,0,0,0,0.02],[1443385538.71,10,0.05,0,0,0,0.02],[1443385542.85,10,0.05,0,0,0,0.02],[1443385546.8,10,0.05,0,0,0,0.02],[1443385550.95,10,0.05,0,0,0,0.02],[1443385555.09,10,0.05,0,0,0,NaN],[1443385559.24,10,0.05,0,0,0,0.02],[1443385563.38,10,0.05,0,0,0,0.02],[1443385567.33,10,0.05,0,0,0,0.02],[1443385571.48,10,0.05,0,0,0,0.02],[1443385575.62,10,0.05,0,0,0,0.01],[1443385579.76,10,0.05,0,0,0,0.02],[1443385583.94,10,0.05,0,0,0,0.02],[1443385587.88,10,0.05,0,0,0,0.02],[1443385592.02,10,0.05,0,0,0,0.02],[1443385596.17,10,0.05,0,0,0,0.02],[1443385600.34,10,0.05,0,0,0,0.02],[1443385604.29,10,0,0,0,0,NaN],[1443385608.43,10,0,0,0,0,0.02],[1443385612.58,10,0,0,0,0,0.02],[1443385616.74,10,0,0,0,0,0.02],[1443385620.69,10,0,0,0,0,0.02],[1443385624.86,10,0,0,0,0,NaN],[1443385629.0,10,0,0,0,0,0.02],[1443385633.15,10,0,0,0,0,0.01],[1443385637.12,10,0,0,0,0,0.02],[1443385641.29,10,0,0,0,0,0.02],[1443385645.44,10,0,0,0,0,0.02],[1443385649.59,10,0,0,0,0,0.02],[1443385653.53,10,0,0,0,0,0.02],[1443385657.7,10,0,0,0,0,NaN],[1443385661.86,10,0,0,0,0,0.02],[1443385666.02,10,0,0,0,0,0.02],[1443385669.97,10,0,0,0,0,0.02],[1443385674.12,10,0,0,0,0,0.02],[1443385678.29,10,0,0,0,0,0.02],[1443385682.28,10,0,0,0,0,0.01],[1443385686.44,10,0,0,0,0,0.02],[1443385690.59,10,0,0,0,0,0.02],[1443385694.72,10,0,0,0,0,0.02],[1443385698.87,10,0,0,0,0,0.02],[1443385702.81,10,0,0,0,0,0.01],[1443385706.95,10,0,0,0,0,0.02],[1443385711.09,10,0,0,0,0,0.02],[1443385715.25,10,0,0,0,0,0.02],[1443385719.38,10,0,0,0,0,0.02],[1443385723.33,10,0,0,0,0,0.01],[1443385727.47,10,0,0,0,0,0.01],[1443385731.62,10,0,0,0,0,NaN],[1443385735.76,10,0,0,0,0,NaN],[1443385739.91,10,0,0,0,0,0.02],[1443385743.84,10,0,0,0,0,0.02],[1443385747.98,10,0,0,0,0,0.02],[1443385752.13,10,0,0,0,0,0.01],[1443385756.27,10,0,0,0,0,0.01],[1443385760.43,10,0,0,0,0,0.02],[1443385764.36,10,0,0,0,0,0.02],[1443385768.53,10,0,0,0,0,0.02],[1443385772.68,10,0,0,0,0,0.02],[1443385776.81,10,0,0,0,0,0.01],[1443385780.76,10,0,0,0,0,0.01],[1443385784.9,10,0,0,0,0,0.01],[1443385789.04,10,0,0,0,0,0.02],[1443385793.2,10,0,0,0,0,0.02],[1443385797.34,10,0,0,0,0,0.01],[1443385801.29,10,0,0,0,0,0.02],[1443385805.46,10,0,0,0,0,0.02],[1443385809.6,10,0,0,0,0,NaN],[1443385813.75,10,0,0,0,0,0.02],[1443385817.9,10,0,0,0,0,0.02]]&amp;sentat=1443385918</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34563"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/09/2015 - 12:03.</div>
    <div class="content">
     <p>"NAN" means Not A Number - the result of the maths is not a valid value, possibly a divide-by-zero error.<br />
We really need to know what values you are trying to send, and how you're trying to receive them.</p>
<p>If you are relying on EmonHub to debug the sketch, you need to get the serial part working first. Comment out your real Serial.print statements and replace them with fixed, valid values that you can recognise. E.g:</p>
<pre>
    Serial.print("1234"); Serial.print(' '); 
    Serial.print("2345"); Serial.print(' '); 
    Serial.print("3456"); Serial.print(' '); 
    Serial.print("4567"); Serial.print(' '); 
    Serial.print("23000"); Serial.print(' '); 
    Serial.print("1920"); Serial.print(' '); 
    Serial.print("2122"); Serial.print(' '); 
    Serial.print("\n");
</pre><p>
Of course you need to have exactly the same number and type of value that you're trying to send for real. The above would give you 7 integers for 4 powers, a voltage and two temperatures; and it would be consistent with:</p>
<pre>
[[10]]
    nodename = emonTx_1
    firmware =3-phase_4-wire_DiscreteSampling
    hardware = emonTx_(NodeID_DIP_Switch1:OFF)
    [[[rx]]]
       names = power1, power2, power3, power4, Vrms, temp1, temp2
       datacodes = h,h,h,h,h,h,h
       scales = 1, 1, 1, 1, 0.01, 0.01, 0.01
       units =W,W,W,W,V,C,C

</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34570"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Mon, 28/09/2015 - 22:32.</div>
    <div class="content">
     <p>Hi Robert,&nbsp; thank you for your support.&nbsp;</p>
<p>I think i need to resolve first my problem with my new&nbsp;emontx v3.4 as it appears to not read correctly the values. No matter what sketch or what CT clamps order i apply it tends to 0. When i restart the emontx it start with values around 200 and after a few serial prints it tends to 0. I don&acute;t know what i&acute;m doing wrong.</p>
<p>It&acute;s like the clamps doesn&acute;t read anything. I tried with the 1 phase sketch and it does not work either, it start reading and&nbsp;after a few reads all value are 0, and sometimes it even show negative values.</p>
<p>Both DIP are on default position, as my country is Spain/Europe and Node 10.&nbsp;</p>
<p>The JP2 it&acute;s disconnected&nbsp;because i&acute;m using the 5v dc power source.&nbsp;</p>
<p>Thanks in advance.&nbsp;</p>
<p>Regards.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34571"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/09/2015 - 22:34.</div>
    <div class="content">
     <p><em>&quot;it start with values around 200 and after a few serial prints it tends to 0&quot; &nbsp;</em></p>
<p>That is the software filter settling. It means that there is no input.&nbsp;<span style="line-height: 20.8px;">Hopefully a silly question: Have you read the FAQ about CTs?</span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34578"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Tue, 29/09/2015 - 13:05.</div>
    <div class="content">
     <p>Obviously all is well connected.&nbsp;I&acute;m not here to waste your time, nor mine, just to make it work and&nbsp;hopfully&nbsp;learn about it.&nbsp;So the Faq was read before comment on the CTS.&nbsp;</p>
<p>My connection is one CT per phase, and no one on the neutral.</p>
<p>L1-CT1, L2-CT2, L3-CT3. Neutral no CT.&nbsp;&nbsp;All the other energy monitors i used before never&nbsp;use the neutral, so i understand that&acute;s the way to go.&nbsp;</p>
<p>As i said before i made the test with the 3 phase sketch and the 1 phase i never obtain a value after a while it tends to 0, and there a resistive heater applied at the same time.&nbsp;</p>
<p>I&acute;m open to make whatever test that would be necessary.</p>
<p>Thanks in adavance.</p>
<p>Regards.&nbsp;&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34581"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 29/09/2015 - 13:58.</div>
    <div class="content">
     <p>You seem to have your CTs in the right places. No CT on the neutral is correct - if your installation is completely balanced, a CT there should read zero anyway. Otherwise, it reads the out-of-balance current.</p>
<p>Are the plugs from the CTs pushed all the way in?</p>
<p>If you replace your 3-phase sketch with the standard "emonTx_CT123_Voltage.ino" sketch,<br />
does it give any readings on the serial monitor? (Not to emonHub/emonCMS).</p>
<p>Do you have the ac adapter connected?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34587"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Tue, 29/09/2015 - 23:16.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>The plugs are pushed all the way in.&nbsp;</p>
<p>I have done the test with the 1 fase&nbsp;&quot;emonTx_CT123_Voltage.ino&quot; and the result it&acute;s the same even on serial monitor.&nbsp;</p>
<p>About the AC adapter i&acute;m not using it as i understand it&acute;s not mandatory, i&acute;m wrong? maybe that&acute;s my error?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34593"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 30/09/2015 - 08:52.</div>
    <div class="content">
     <p>Ah. You absolutely need the ac adapter for 3-phase real power measurements.</p>
<p>Without it, you might just as well use the standard "discrete sampling" sketch as that will read the rms current just as effectively and compute the nominal apparent power (VA) for all 3 phases.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34655"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Fri, 02/10/2015 - 19:51.</div>
    <div class="content">
     <p>Ok, now with the AC adapter that&acute;s the values i obtain on the emonhub. It appears to be working now. I&acute;m not sure about the scales and units. I&acute;m using this template now:</p>
<p>&nbsp;</p>
<p>[10]]<br />
&nbsp; &nbsp; nodename = emonTx_1<br />
&nbsp; &nbsp; firmware =3-phase_4-wire_DiscreteSampling<br />
&nbsp; &nbsp; hardware = emonTx_(NodeID_DIP_Switch1:OFF)<br />
&nbsp; &nbsp; [[[rx]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp;names = power1, power2, power3, power4, Vrms<br />
&nbsp; &nbsp; &nbsp; &nbsp;datacodes = h,h,h,h,h<br />
&nbsp; &nbsp; &nbsp; &nbsp;scales = 1,1,1,1,1<br />
&nbsp; &nbsp; &nbsp; &nbsp;units =W,W,W,W,V</p>
<p>EMONHUB&nbsp;LOG READ:</p>
<p>&nbsp;Append to &#39;emonCMS&#39; buffer =&gt; time: 1443812280.31, data: [10, -155.37, -263.29, 208.78, 0, 232.51], ref: 341</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34658"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 02/10/2015 - 23:34.</div>
    <div class="content">
     <p>You are getting close now. The negative values mean that power is flowing in the opposite direction, or more likely the CT is facing the wrong way. Our convention is imported power is positive.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37630"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8721.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="poteck&#039;s picture" title="poteck&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 Phase + temp + serial  on  emon tx v3.4</h3>

    <div class="submitted">Submitted by <a href="../user/8721.html" title="View user profile.">poteck</a> on Tue, 29/12/2015 - 15:24.</div>
    <div class="content">
     <p>Finally i resolve my issues and make it work as i expected. Thanks Robert and Paul for your support.&nbsp;</p>
<p>I modify the sketch in order to fit my setup.&nbsp;</p>
<p>Maybe others can benefit from my modifications, the code comes from the original Sketch from github.&nbsp;I&nbsp;remove all the code related to&nbsp;the RF modules and include the Onewire&nbsp;temp sensors. &nbsp;&nbsp;</p>
<p>Remember the sketch is for the&nbsp;emonTx:&nbsp;&nbsp;3 Phases + 2/4 temp sensors + Serial communication.</p>
<p>Regards.</p>
<p>Ignacio</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11279"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-k7mHd7XoC8slvo7W-qrvINmoI83EuxP1zeNLr--DBUE" value="form-k7mHd7XoC8slvo7W-qrvINmoI83EuxP1zeNLr--DBUE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/11279 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:03:28 GMT -->
</html>
