<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11991 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:12:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>rmf69 and emonhub install, etc | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">rmf69 and emonhub install, etc</h3>
        <span class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Thu, 14/01/2016 - 22:40</span>
        <div class="content"><p>I am using my existing Raspberry with an attached HDD. I&#39;ve already installed emoncms and can log into the screen. I just received the emontx&nbsp;and rmf69 modules today. Some questions on set up:</p>
<p>1) how do I install the rfm69 on the raspberry? googling didn&#39;t help? do I need an antenna, where to attach, how long and what wire? Which way does the rmf69 install onto the Raspberry?</p>
<p>2) I installed emonhub&nbsp;but something is wrong. I get this when starting emonhub:</p>
<p>&nbsp;service emonhub start<br />
[....] Starting OpenEnergyMonitor emonHub: emonhub has been started okstart-stop-daemon: unable to start /usr/share/emonhub/emonhub.py (Permission denied)<br />
. ok</p>
<p>the emonhub.log file exists but is empty so not much help.</p>
<p>3) for the emonhub.conf, I used the read/write key from the emoncms page. Right? Since I&#39;m running emoncms locally, I assume I need to uncomment the url line, Right?</p>
<p>3a) in the section for rmf2pi, I assume that also works for rmf69? I&#39;m using group=210 and baseid=10 - is that correct for emontx?</p>
<p>4) finally, if I have no CT&#39;s attached to the emontx, is anything transmitted? (I need the 3.5mm plugs to connect the CT&#39;s, just want to get the emontx talking to the raspberry)</p>
<p>Thanks,</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11248.html" class="topic-previous" title="Go to previous forum topic">‹ RFM68Pi can do TX ? [SOLVED]</a>
              <a href="11973.html" class="topic-next" title="Go to next forum topic">new emonpi does not show values after changng ip adress ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-38263"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: rmf69 and emonhub install, etc</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 14/01/2016 - 23:42.</div>
    <div class="content">
     <p>I can answer No.4 - yes, you should get a transmission. If you&#39;re running the sketch that I think you will be (I say that because I believe that the default sketch is changing about now), it will consist of 6 integers: 4 powers, voltage and a temperature. If you&#39;re looking directly at the received data, that of course is 12 bytes. The 4 powers and temperature will be zero, only the voltage will be meaningful. A&nbsp;red LED inside the emonTx&nbsp;just to the right of the ac input socket&nbsp;should flash once every 10 s&nbsp;approximately.</p>
<p>A worrying question about your RFM69 - did you order an RFM69CW&nbsp;or an RFM69Pi? The RFM69CW&nbsp;is the bare radio module, you need the RFM69Pi&nbsp;assembly to plug into the Raspberry Pi. And yes, you do need the correct antenna. A whip 175 mm long for 433 MHz or 87&nbsp;mm long for 868&nbsp;MHz. You needed to look in Resources &gt; Hardware Wiki for information about the RFM69Pi&nbsp;- there&#39;s a picture there showing the assembly plugged into the Pi.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38265"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6548.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="billvolz&#039;s picture" title="billvolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: rmf69 and emonhub install, etc</h3>

    <div class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Fri, 15/01/2016 - 00:22.</div>
    <div class="content">
     <p>Thanks. I did get the CW, I&#39;ll need to order the Pi module. Sigh. The Pi module was not listed on the order page under Wireless Modules so was somewhat misled. I&#39;ll get the correct module.&nbsp;</p>
<p>I assume I can just use any wire for the whip.</p>
<p>Also, what is the correct sketch for emontx v3? There are several sketches listed for that version. What&#39;s the default one loaded on the emontx?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38267"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: rmf69 and emonhub install, etc</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 15/01/2016 - 00:52.</div>
    <div class="content">
     <p>1) Although I&#39;m pretty sure there are some pic&#39;s and info in the wiki to help fit the RFM69Pi, basically it needs to be seated on the main GPIO connector of the Pi, pins 1 to 10. Holding the Pi so the 2 rows of header pins are onn the right, the top is pins 1 &amp;&nbsp;2 and the bottom are 25 &amp; 26 or 39 &amp; 40 depending on model. The RFM board plugs into the top 2x5 pins without overhanging the edge of the Pi. ie the overhang of the RFM board points towards the centre of the Pi, obscuring pins 12 to ~24 also.</p>
<p>It should have a short length of wire hanging from the RFM board, that is the antenna and is already the correct length.&nbsp;</p>
<p>Depending on what guide you have followed you probably do not need to do any further configuring on the Pi. The 2 important things are A) the serial console has been disabled by editing /boot/cmdline.txt (and possibly inittab too if&nbsp;running wheezy) and B) the correct frequency, group and baseid&nbsp;are set in emonhub if not using the defaults of&nbsp;433MHz, group 210 and baseid 15.</p>
<p>2) The only time I have seen this error is when the&nbsp;emonhub&nbsp;repo has been cloned incorrectly using &quot;sudo&quot; which alters the permissions, the fact it seems happy to proceed with the command &quot;service emonhub start&quot; without telling you you need to be a root user suggests you are running as a user with elevated privilege, which will result in the same error. Be wary of running as root&nbsp;without understanding the implications and making adjustments to accommodate that position, most guides and advice will assume you are not a root user. If this is indeed the cause of the permission issue it is or at least it should be easily remedied with</p>
<p>sudo chown&nbsp;-R&nbsp;pi:pi /home/pi/emonhub</p>
<p>​obviously without&nbsp;the &quot;sudo&quot; if you are running as a root user.&nbsp;</p>
<p>3) right.</p>
<p>3a) pretty much, except the emonTx is node 10, the RFM2Pi&nbsp;(rfm69) is a different device and should have it&#39;s own node id, that&#39;s why it&#39;s called baseid in emonhub, it is the attached&nbsp;recievers&nbsp;&quot;node id&quot; that you are setting here&nbsp;not the remote emonTx node id.</p>
<p>I have assumed you have followed&nbsp;the general emoncms install guide for the raspberry pi and the emonhub installer as instructed in that guide, if you have done something different lets us know.</p>
<p>Paul</p>
<p>EDIT - You have posted since I started writing this post so some points are already covered, the emontx v3 is preloaded with the latest discreet sampling sketch, which revision will depend on when the firmware was installed and can be checked in a serial console (eg arduino&nbsp;IDE) if you don&#39;t have a programmer you should order one with the rfm69pi, they are really useful and pretty cheap.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38268"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: rmf69 and emonhub install, etc</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 15/01/2016 - 00:48.</div>
    <div class="content">
     <p>Any wire is OK - 7/0.2 stranded is a good choice, but you can use solid if it&#39;s unlikely to be moved.</p>
<p>The sketch is a good question. The default one used to be the discrete sampling one (again, see the Hardware Wiki) but I understand it will soon be replaced by a&nbsp;&#39;continuous sampling&#39; sketch - one of the two here listed in the Software Wiki here: <a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV3/RFM/emonTxV3.4" title="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV3/RFM/emonTxV3.4">https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV3...</a><br />
and probably&nbsp;based on the &#39;beta&#39; version.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38269"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: rmf69 and emonhub install, etc</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 15/01/2016 - 00:56.</div>
    <div class="content">
     <p>Robert - Is there an intention&nbsp;to&nbsp;default to continuous? I knew there was new firmware on the horizon but will it accommodate battery operation? I guess there is no reason the CM can&#39;t be put to sleep like the discreet code.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38270"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: rmf69 and emonhub install, etc</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 15/01/2016 - 01:18.</div>
    <div class="content">
     <p>I think there is and I believe Trystan&nbsp;has added in a &#39;pause&#39; so that battery operation is possible.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38271"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6548.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="billvolz&#039;s picture" title="billvolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: rmf69 and emonhub install, etc</h3>

    <div class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Fri, 15/01/2016 - 04:22.</div>
    <div class="content">
     <p>Thanks Robert and Paul. I&#39;ve ordered the RFM69PI. I have the UART programming board so should be good to go there. It seems the RFM69PI comes with the antenna installed so nothing to do there. It looks like I just need to install the RFM board and it&#39;ll all work. I&#39;ve dealt with the tty stuff in cmdline.txt and init.d and also set up the emonhub. It appears I installed emoncms prior to when emonhub came out but haven&#39;t gotten around to installing the actual hardware until now, hence my confusion. I did install emonhub as root which was causing the problem - reinstalled at &#39;pi&#39; and it it&#39;s working now. In emonhub.conf, except for uncommenting URL and adding the API code, I&#39;ve left everything else the same. Now to wait until I get the correct RFM board.</p>
<p>Thanks again</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38276"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: rmf69 and emonhub install, etc</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 15/01/2016 - 10:59.</div>
    <div class="content">
     <p><em>&quot;I installed&nbsp;emoncms&nbsp;prior to when&nbsp;emonhub came out&quot;&nbsp;</em></p>
<p>Ok, emonhub&nbsp;has been the only OEM recommended interface on a Pi for well over a year now.</p>
<p><em>&quot;I am using my existing Raspberry with an attached HDD. I&#39;ve already installed emoncms and can log into the screen. I just received the emontx&nbsp;and rmf69 modules today. Some questions on set up:&quot;</em></p>
<p>This sounds very much like you are just starting out with your OEM setup and using a Pi and hdd that you already&nbsp;own rather than&nbsp;you are returning to a previous&nbsp;partial install.</p>
<p>Apologies for any assumption on my part but I&nbsp;try to avoid&nbsp;answering a question with a flood of boring&nbsp;questions like, what version are you running?&nbsp;what guide did you follow?&nbsp;what method did you use? if I can.</p>
<p><span style="line-height: 1.6;">All the answers given assume you are on the latest OS currently the final&nbsp;</span><span style="line-height: 1.6;">wheezy release or the newly </span><span style="line-height: 1.6;">released Jessie. </span>Emoncms<span style="line-height: 1.6;"> is currently at v9.3 and has some big changes since v8.x, whether you can update to v9.3 easily will depend on </span><span style="line-height: 1.6;">what</span><span style="line-height: 1.6;">&nbsp;you have. Which guides you </span><span style="line-height: 1.6;">followed</span><span style="line-height: 1.6;">&nbsp;may alter things significantly too.</span></p>
<p>Unless you have very recently install emoncms v9.x following the latest guides to an up&nbsp;to date Raspbian&nbsp;OS then starting from a fresh format/image is strongly advised if&nbsp;you currently have no data to save.&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11991"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-ABFWO6vb1XN8xDBvJmbFtUXbjkjYr_SVcgw2Lr9sBmo" value="form-ABFWO6vb1XN8xDBvJmbFtUXbjkjYr_SVcgw2Lr9sBmo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/11991 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:12:01 GMT -->
</html>
