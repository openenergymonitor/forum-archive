<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/486 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:33:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>EmonTX as an Arduino Shield | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">EmonTX as an Arduino Shield</h3>
        <span class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Tue, 13/03/2012 - 19:34</span>
        <div class="content"><p>I have been playing with Eagle last couple days and managed to produce an Arduino Shield as EmonTx. The reason for me doing it is because I have two Arduinos + a Nanode v5 &nbsp;hanging around and would like to get some return of investment :)</p>
<p>It is basically a copy/paste from EmonTX and I give all the Credit to Glyn and &nbsp;Trystan. I only need 1 CT, so left the others out for simplicity. The RFM12B select pin can be either Digital 10 or Digital 5 so that the shield can be used either on Arduino with ethernet shield or Nanode v5.</p>
<p>Here is how it looks, I ordered one PCB and it will be ready the next couple days. I will make a picture and let you know how it works.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/18771283/shield_schematic.html" /></p>
<p>&nbsp;</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/18771283/schield_pcb.html" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>This is my first PCB ever, so I hope it works..</p>
<p>&nbsp;</p>
<p><a href="http://harizanov.com/">http://harizanov.com</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="762.html" class="topic-previous" title="Go to previous forum topic">‹ Comprehensive Component List?</a>
              <a href="746.html" class="topic-next" title="Go to next forum topic">NanodeRF not responding after build (soldering) job. (SOLVED = faulty ebay USB UART adapter) ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-3372"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 14/03/2012 - 10:57.</div>
    <div class="content">
     <p>Nice, could you post up the Eagle files so I can have a closer look. &nbsp;</p>
<p>Cheers,&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3374"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 14/03/2012 - 11:28.</div>
    <div class="content">
     <p>Here they are</p>
<p><a href="http://dl.dropbox.com/u/18771283/my shield.zip" title="http://dl.dropbox.com/u/18771283/my%20shield.zip">http://dl.dropbox.com/u/18771283/my%20shield.zip</a></p>
<p>&nbsp;</p>
<p>I am now concerned about the CT resistor values, because I powered the plug from 5V and not 3.3V as the EmonTX. Would you advice what the correct values should be for 5V system?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3376"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/450.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Wed, 14/03/2012 - 12:39.</div>
    <div class="content">
     <p>Where do you get your PCB made up ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3377"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 14/03/2012 - 12:53.</div>
    <div class="content">
     <p>local PCB shop, they can make one piece of PCB like that for 5 euro</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3378"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 14/03/2012 - 12:59.</div>
    <div class="content">
     <p>It will work with those values but it would be highly desirable to use a different value resistor for the burden resistor (currently 18 ohms) since the Arduino ADC will be 0-5V not 0-3.3V. A 33 ohm resistor should do the trick if using the same CT (<span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 17px; text-align: left; ">YHDC&nbsp;SCT-013-000) 100A max)</span>, See here for calculations:&nbsp;<a href="https://learn.openenergymonitor.org/?redirect=ct-sensors-interface">http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface</a>.</p>
<p>Couple of things I noticed on your design:</p>
<ul>
<li>
		The DS18B20 is not connected to VCC, the wire is not quite joined on the schematic.&nbsp;</li>
<li>
		It would be best to make the tracks wider, especially the power and CT lines.&nbsp;</li>
<li>
		RFM12B Ant should be close to the edge of the board and away from other components for best reception&nbsp;</li>
<li>
		You might as well add in the option for three CT&#39;s since cost of PCB is usually <span style="white-space: nowrap;">dictated&nbsp;</span>by size rather than number of holes/components.&nbsp;</li>
<li>
		Please could you add reference/credit to openenergymonitor.org on the schematic and PCB silkscreen layer</li>
</ul>
<p>Please let us know how it goes, I know there are other people on the forum working on similar designs. There could be scope for collaboration and pooling for PCB orders. What fab house are you using?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3379"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 14/03/2012 - 13:09.</div>
    <div class="content">
     <p>just a noe: the Eagle files are produced with Eagle 6.1 and are not compatible with older version. It is free for PCBs up to 10x8 cm</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3380"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 14/03/2012 - 13:12.</div>
    <div class="content">
     <p>Glyn, I will revise the board &nbsp;as per your comments and post new design files; It will probably take few days though as I am busy at work too.</p>
<p>&nbsp;</p>
<p>There is a local fab-house that is really cheap and makes single copies, not sure it will work for you though.&nbsp;electron-pcb.com</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3382"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 14/03/2012 - 19:13.</div>
    <div class="content">
     <p>ok, I made the changes, it was quite easy aftr all :) getting better at Eagle.</p>
<p>&nbsp;</p>
<p>here is the result</p>
<p>&nbsp;</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/18771283/shield_schematic2.html" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/18771283/schield_pcb2.html" /></p>
<p>and the adjusted Eagle files <a href="http://dl.dropbox.com/u/18771283/myshieldv3.zip">here</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3383"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 14/03/2012 - 19:56.</div>
    <div class="content">
     <p>Great, good work fitting the extra CT&#39;s on.</p>
<p>What I meant with the RF was to try and get the Ant as far away from other components as possible while at the same time keeping the Ant connection close to the pad on the RFM12B. Having the RF trace cross the board would cause reductions in RF performance. I&#39;ve made the change I had in mind. See attached:&nbsp;</p>
<p><a href="../sites/default/files/ShieldR3.1.png"><img alt="" src="../sites/default/files/ShieldR3.1.png" style="width: 400px; height: 281px; " /></a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3384"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 14/03/2012 - 19:58.</div>
    <div class="content">
     <p>Also could do with some silkscreen info as to what the solder jumpers do.</p>
<p>The silkcreen labels for the CT, temp and pulse jacks should be outside the 3.5mm socket profile, otherwise when the socket is soldered in you won&#39;t be able to see them!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3392"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Thu, 15/03/2012 - 07:33.</div>
    <div class="content">
     <p>The attached file contains my original designs?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3395"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 15/03/2012 - 09:45.</div>
    <div class="content">
     <p>Ah sorry, I attached the wrong zip! Fixed now, and I&#39;ve added a photo.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3452"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 21/03/2012 - 05:27.</div>
    <div class="content">
     <p>Here is a shot of the first design I posted as PCB. I had the order already in place before I posted my message here. All the comments Glyn made bout track thickness are valid obviously :)&nbsp;</p>
<p>I am not going to solder any components on the PCB, it was just a proof of concept. I will order the newer version when I make some small modifications I have in mind.</p>
<p>One of the issues I noticed is that the audio jack connector (1501_03) footprint didn&#39;t match. I have this one, obviously it is the wrong one:&nbsp;<a href="http://bg.farnell.com/lumberg/1501-03/socket-2-5mm-jack-pcb/dp/1200127">http://bg.farnell.com/lumberg/1501-03/socket-2-5mm-jack-pcb/dp/1200127</a>&nbsp;; Glyn Can you please poit out the correct jack to use with EmonTX and where can I buy several of them.</p>
<p>&nbsp;</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/18771283/2012-03-21%2007.27.01.html" /></p>
<p>&nbsp;</p>
<p>Other than that, the PCB is medium quality, no silkscreen on this alpha version to cut cost.</p>
<p>&nbsp;</p>
<p>I talked to the guy and he can take international orders, though the shipping cost may offset any benefit.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3456"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 21/03/2012 - 12:40.</div>
    <div class="content">
     <p>Nice, the emonTx uses these:&nbsp;<a href="http://www.rapidonline.com/Cables-Connectors/3-5mm-Compact-Stereo-PCB-Socket-20-0144/?sid=f851c655-81e4-4d10-858a-73e5c9be3a69">http://www.rapidonline.com/Cables-Connectors/3-5mm-Compact-Stereo-PCB-Socket-20-0144/?sid=f851c655-81e4-4d10-858a-73e5c9be3a69</a>. Feel free to change it if you want.&nbsp;</p>
<p>This jacks seems to be cheaper an maybe more commonly available:&nbsp;<a href="http://www.rapidonline.com/Cables-Connectors/3-5mm-PCB-jack-sockets-with-chrome-plated-trim-63492">http://www.rapidonline.com/Cables-Connectors/3-5mm-PCB-jack-sockets-with-chrome-plated-trim-63492</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3513"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Sat, 24/03/2012 - 18:00.</div>
    <div class="content">
     <p>Here are my latest designs, I am ordering 10pcs on Monday;&nbsp;</p>
<p>&nbsp;</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/18771283/shield_schematic3.html" /></p>
<p>&nbsp;</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/18771283/schield_pcb3.html" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3522"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 25/03/2012 - 23:36.</div>
    <div class="content">
     <p>Great, it&#39;s fantastic to see it coming along nicely. The only thing I can notice is the RFM12B ant, the trace from the antenna hole to the pad is quite small. I did the same on an early version of the emonTx and it resulted in reduced range. This can easily be fixed when you solder the antenna in place to make sure you blob solder across the gap. On later versions of the emonTx I moved the ant hole a bit closer in so they overlap.&nbsp;</p>
<p><img alt="" src="../sites/default/files/emonTx_ant.html" /></p>
<p>Which 3.5mm jack socket did you go for in the end?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3524"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Mon, 26/03/2012 - 05:24.</div>
    <div class="content">
     <p>thanks, I am sticking to the 2.5 jacks you used in earlier EmonTXs-es for now because I already have a number of them. The supplier you pointed out has high shipping cost to my place, while farnell is quite reasonable (thru a local dealer). I am also not experienced in customizing footprints, so I chose the already available one.</p>
<p>Regarding the antenna, you are right; will revise in newer versions.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3684"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Fri, 06/04/2012 - 14:17.</div>
    <div class="content">
     <p>here is the new version :)</p>
<p>&nbsp;</p>
<p><img alt="" src="../../../harizanov.com/wp-content/uploads/2012/04/2012-04-06-17.02.06-1024x768.html" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3688"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 07/04/2012 - 00:17.</div>
    <div class="content">
     <p>Looks nice! Does it work?&nbsp;</p>
<p>What CT&#39;s do you intend to use with 2.5mm jacks? The burden resistor will probable need to be a different value if the CT you use had a different number of turns. Calibration will also be different. See the building blocks section for info on this.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3693"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Sat, 07/04/2012 - 05:47.</div>
    <div class="content">
     <p>I still use the SCT013-000, just change the 3.5mm jack to 2.5mm. The burden in place is 33Ohm one. I tested the CT and it reads ~4000W on an appliance with 1500W so definitely I need to do calibration. I don&#39;t have the 9V AC/AC transformer yet so I am unable to test the voltage sensing. The RFM12B works just fine, I modified the RFM12B library so it works on pin 5 as chip select because I am testing it on Arduino Ethernet where pin 10 is taken by the Ethernet.</p>
<p>Next tests will be to try to make it work with the Ethernet at the same time, I read the interrupts that the RFM kicks in corrupt Ethernet data. JCW suggests doing a cli() before calling Ethernet code.</p>
<p>I will report how it goes along.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3714"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Mon, 09/04/2012 - 08:22.</div>
    <div class="content">
     <p>Wow, I am quite happy with the results. I have the shield working on a&nbsp;<a href="http://arduino.cc/en/Main/ArduinoBoardEthernet">http://arduino.cc/en/Main/ArduinoBoardEthernet</a>&nbsp;Arduino Ethernet board, so it is quite solid alternative for NanodeRF as a emon Base. The big plus is the Wiznet5100&nbsp;chip and the in-built uSD card.</p>
<p>To change the RFM12b pin from 10 (default, but conflicting with Arduino Ethernet) to digital 5, I made the following adjustment to RF12.cpp file in the JeeLib library:</p>
<p>[code]</p>
<p>// ATmega168, ATmega328, etc.</p>
<div>
	&nbsp;</div>
<div>
	#define RFM_IRQ &nbsp; &nbsp; 2</div>
<div>
	#define SS_DDR &nbsp; &nbsp; &nbsp;DDRD &nbsp;// was originally DDRB</div>
<div>
	#define SS_PORT &nbsp; &nbsp; PORTD // was originally PORTB</div>
<div>
	#define SS_BIT &nbsp; &nbsp; &nbsp;5 &nbsp; &nbsp; // was originally for PORTB: 2 = d.10, 1 = d.9, 0 = d.8</div>
<div>
	&nbsp;</div>
<div>
	#define SPI_SS &nbsp; &nbsp; &nbsp;10 &nbsp; &nbsp;// PB2, pin 16</div>
<div>
	#define SPI_MOSI &nbsp; &nbsp;11 &nbsp; &nbsp;// PB3, pin 17</div>
<div>
	#define SPI_MISO &nbsp; &nbsp;12 &nbsp; &nbsp;// PB4, pin 18</div>
<div>
	#define SPI_SCK &nbsp; &nbsp; 13 &nbsp; &nbsp;// PB5, pin 19</div>
<div>
	&nbsp;</div>
<div>
	#endif</div>
<div>
	[/code]</div>
<div>
	&nbsp;</div>
<div>
	I also changed the ethernet library file W5100.h so that it doesn&#39;t allow RFM12b to interrupt while the SPI bus is busy handling Wiznet5100. I added a cli() and sei() as follows; Suggestion was made by JCW in this thread:&nbsp;<a href="http://forum.jeelabs.net/node/291">http://forum.jeelabs.net/node/291</a></div>
<div>
	&nbsp;</div>
<div>
	[code]</div>
<div>
<div>
		#else</div>
<div>
		&nbsp; inline static void initSS() &nbsp; &nbsp;{ DDRB &nbsp;|= &nbsp;_BV(2); };</div>
<div>
		&nbsp; inline static void setSS() &nbsp; &nbsp; {<span style="background-color:#ffff00;"> </span><span style="background-color:#ffff00;">cli</span><span style="background-color:#ffff00;">(); </span>PORTB &amp;= ~_BV(2); };</div>
<div>
		&nbsp; inline static void resetSS() &nbsp; { PORTB |= &nbsp;_BV(2); <span style="background-color:#ffff00;">sei</span><span style="background-color:#ffff00;">()</span>; };</div>
<div>
		#endif</div>
<div>
		[/code]</div>
</div>
<div>
	&nbsp;</div>
<div>
	I am&nbsp;now running test for over an hour and all seems operational :) :)</div>
<div>
	&nbsp;</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3716"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Mon, 09/04/2012 - 08:28.</div>
    <div class="content">
     <p>Just one more comment, the Arduino Ethernet (the one that has the ethernet on the board, not as a shield) &nbsp;has a bugfix in place that allows all this to be possible without hardware modifications. In order for this to work on a regular arduino with older Ethernet shields, some re-wiring has to be done that makes it harder for the wider public to accomodate. For the reference, here is a link to illustrate the isse:</p>
<p><a href="http://john.crouchley.com/blog/archives/662">http://john.crouchley.com/blog/archives/662</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3720"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 09/04/2012 - 11:29.</div>
    <div class="content">
     <p>Fantastic! Good work getting the RFM12B to work. I tried a while back using an older DS robotics Wiznet Ethernet shield but failed since this shield like the older Arduino Ethernet Shields&nbsp;<span style="font-family: arial, sans-serif; font-size: 13px; background-color: rgba(255, 255, 255, 0.917969); ">does not use an inverter logic gate to control SEN with respect to /SCS as&nbsp;recommended&nbsp;on the&nbsp;</span><span class="il" style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgba(255, 255, 255, 0.917969); font-family: arial, sans-serif; font-size: 13px; ">wiznet</span><span style="font-family: arial, sans-serif; font-size: 13px; background-color: rgba(255, 255, 255, 0.917969); ">&nbsp;blog:&nbsp;</span><a href="http://wiznethk.blogspot.com/2009/09/spi-guide.html" style="color: rgb(17, 85, 204); font-family: arial, sans-serif; font-size: 13px; background-color: rgba(255, 255, 255, 0.917969); " target="_blank">http://wiznethk.<wbr />blogspot.com/2009/09/spi-<wbr />guide.html</a><span style="font-family: arial, sans-serif; font-size: 13px; background-color: rgba(255, 255, 255, 0.917969); ">. The newer Arduino Ethernet&nbsp;has obviously fixed this problem.&nbsp;</span></p>
<p>Why have you changed&nbsp;</p>
<p>&nbsp;</p>
<pre>
#define SPI_SS      10    // PB2, pin 16

#define SPI_MOSI    11    // PB3, pin 17

#define SPI_MISO    12    // PB4, pin 18

#define SPI_SCK     13    // PB5, pin 19</pre><div>
	&nbsp;</div>
<div>
	from&nbsp;</div>
<div>
	&nbsp;</div>
<pre>
#define SPI_SS      1     // PB1, pin 3
#define SPI_MISO    4     // PA6, pin 7
#define SPI_MOSI    5     // PA5, pin 8
#define SPI_SCK     6     // PA4, pin 9</pre><div>
	&nbsp;</div>
<div>
	when the SPI lines are connected to the same pins on your shield as on the emonTx/JeeNode?&nbsp;</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3721"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Mon, 09/04/2012 - 12:42.</div>
    <div class="content">
     <p>The Arduino Ethernet has a&nbsp;74LVC1G14DBV&nbsp;&nbsp;SINGLE SCHMITT-TRIGGER INVERTER to do the job, specs here&nbsp;<a href="http://www.datasheetcatalog.org/datasheet2/9/0opee59d2pr98c65t09o1g2poypy.pdf">http://www.datasheetcatalog.org/datasheet2/9/0opee59d2pr98c65t09o1g2poypy.pdf</a></p>
<p>Check the Arduino Ethernet schematic here (note the 74LVC1G14DBV on SEN)&nbsp;&nbsp;&nbsp;<a href="http://arduino.cc/en/uploads/Main/arduino-ethernet-schematic.pdf">http://arduino.cc/en/uploads/Main/arduino-ethernet-schematic.pdf</a></p>
<p>So, overall it is a perfect candidate for EmonBase replacement in my home projects. The tests are now 5 hours in progress and all OK.</p>
<p>&nbsp;</p>
<p>Regarding the pins, you are most probably looking at the wrong place; the pins you outlined are for AtTiny84; for AtMega I have the correct ones (didn&#39;t change that part at all);</p>
<p>Check ot from line 72 onward:&nbsp;<a href="https://github.com/jcw/jeelib/blob/master/RF12.cpp">https://github.com/jcw/jeelib/blob/master/RF12.cpp</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3722"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 09/04/2012 - 12:51.</div>
    <div class="content">
     <p>Oh yeah, your right I was looking at AtMega. I see SPI&nbsp;pins are the same for Atmega. That makes sense.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4770"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1178.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1178.jpg" alt="alco&#039;s picture" title="alco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/1178.html" title="View user profile.">alco</a> on Mon, 11/06/2012 - 12:12.</div>
    <div class="content">
     <p>Did you get an&nbsp;beter calibration with this&nbsp;burden&nbsp;resistor?&nbsp;Did you modify the&nbsp;emonlib.cpp&nbsp;calibration current?<br />
	default&nbsp;it&#39;s :&nbsp;&nbsp;<em>current constant = (100A / 0.050A) / 18ohm = 111.11</em></p>
<p>but with an&nbsp;33ohm resistor&nbsp;it should&nbsp;be:&nbsp;</p>
<p><em>current constant = (100A / 0.050A) /&nbsp;33 ohm =&nbsp;60.606</em></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4771"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Mon, 11/06/2012 - 13:17.</div>
    <div class="content">
     <p>No, I didn&#39;t modify the library, rather I used this approach as a basis:</p>
<p><a href="https://github.com/openenergymonitor/EmonLib/blob/master/examples/voltage_and_current/voltage_and_current.ino">https://github.com/openenergymonitor/EmonLib/blob/master/examples/voltage_and_current/voltage_and_current.ino</a></p>
<p>It allows you to select the pin and calibration. I seem to have lost my sketch code after some troubles with Google Drive failing to sync some files, I will have to check old backups to see the exact values I used.&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<pre class="line" style="margin: 0px; padding: 0px 0px 0px 6px; border: 0px; ">


<span class="c1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 136); font-style: italic; ">// EmonLibrary examples openenergymonitor.org, Licence GNU GPL V3</span>


<span class="cp" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153); font-weight: bold; ">#include &quot;EmonLib.h&quot; </span><span class="c1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 136); font-style: italic; ">// Include Emon Library</span>

<span class="n" style="margin: 0px; padding: 0px; border: 0px; ">EnergyMonitor</span> <span class="n" style="margin: 0px; padding: 0px; border: 0px; ">emon1</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">;</span> <span class="c1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 136); font-style: italic; ">// Create an instance</span>


<span class="kt" style="margin: 0px; padding: 0px; border: 0px; color: rgb(68, 85, 136); font-weight: bold; ">void</span> <span class="n" style="margin: 0px; padding: 0px; border: 0px; ">setup</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">()</span>

<span class="p" style="margin: 0px; padding: 0px; border: 0px; ">{</span>

  <span class="n" style="margin: 0px; padding: 0px; border: 0px; ">Serial</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">.</span><span class="n" style="margin: 0px; padding: 0px; border: 0px; ">begin</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">(</span><span class="mi" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 153, 153); ">9600</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">);</span>

  

  <span class="n" style="margin: 0px; padding: 0px; border: 0px; ">emon1</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">.</span><span class="n" style="margin: 0px; padding: 0px; border: 0px; ">voltage</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">(</span><span class="mi" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 153, 153); ">2</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">,</span> <span class="mf" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 153, 153); ">234.26</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">,</span> <span class="mf" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 153, 153); ">1.7</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">);</span> <span class="c1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 136); font-style: italic; ">// Voltage: input pin, calibration, phase_shift</span>

  <span class="n" style="margin: 0px; padding: 0px; border: 0px; ">emon1</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">.</span><span class="n" style="margin: 0px; padding: 0px; border: 0px; ">current</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">(</span><span class="mi" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 153, 153); ">1</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">,</span> <span class="mf" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 153, 153); ">111.1</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">);</span> <span class="c1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 136); font-style: italic; ">// Current: input pin, calibration.</span>

<span class="p" style="margin: 0px; padding: 0px; border: 0px; ">}</span>


<span class="kt" style="margin: 0px; padding: 0px; border: 0px; color: rgb(68, 85, 136); font-weight: bold; ">void</span> <span class="n" style="margin: 0px; padding: 0px; border: 0px; ">loop</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">()</span>

<span class="p" style="margin: 0px; padding: 0px; border: 0px; ">{</span>

  <span class="n" style="margin: 0px; padding: 0px; border: 0px; ">emon1</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">.</span><span class="n" style="margin: 0px; padding: 0px; border: 0px; ">calcVI</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">(</span><span class="mi" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 153, 153); ">20</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">,</span><span class="mi" style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 153, 153); ">2000</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">);</span> <span class="c1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 136); font-style: italic; ">// Calculate all. No.of half wavelengths (crossings), time-out</span>

  <span class="n" style="margin: 0px; padding: 0px; border: 0px; ">emon1</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">.</span><span class="n" style="margin: 0px; padding: 0px; border: 0px; ">serialprint</span><span class="p" style="margin: 0px; padding: 0px; border: 0px; ">();</span> <span class="c1" style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 136); font-style: italic; ">// Print out all variables</span>

<span class="p" style="margin: 0px; padding: 0px; border: 0px; ">}</span></pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4773"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1178.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1178.jpg" alt="alco&#039;s picture" title="alco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/1178.html" title="View user profile.">alco</a> on Mon, 11/06/2012 - 19:19.</div>
    <div class="content">
     <p>Thats more handy than alter the hardcoded lines at the emonlib.</p>
<p>But I discovered that an NanodeRF (where I will put your shield on) is running at 3.3V and not like your arduino ethernet that has an 5Volt line. So I&#39;m lucky that I ordered some spare resistors (18,27 and 33 Ohm)&nbsp; today at my localwebshop (conrad.nl). And I will report my tests to this topic when I received and build my nanodeRF and sensingshield!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4977"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1178.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1178.jpg" alt="alco&#039;s picture" title="alco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/1178.html" title="View user profile.">alco</a> on Sat, 23/06/2012 - 21:22.</div>
    <div class="content">
     <p>I got my sensingshield running now! connected to the nanodeRF and I setup an testboard for calibrating the CT-sensor.</p>
<p><img alt="" style="width: 577px; height: 308px;" src="../sites/default/files/test_board2_0.jpg" /></p>
<p>It's an 100W bulb lamp with the AC-AC adapter and multimeter parralel connected to it.<br />
I also made an on/off switch&nbsp;(outside the photo)&nbsp;and some wirebridges for the CT-sensor clamp. I also did 2 small modifcations. 1) I connected an 2.5 female jackplug to the CT-sensor because Martin delivers the 2.5 male printboard headers. and 2) I cut the housing of a mascot 9550 AC-AC adapter because it's an UK switch-plug and&nbsp;I need an EU&nbsp;plug at my home (the netherlands).</p>
<p>Anyway, I can confirm that a 3<u>3 ohm resistor is the right one to use if you have an sensingshield on top of an Arduino UNO or a NanodeRF </u>like me. This because the 0-5 Volt regulation of the analoge ports. (and not the 3.3volts like the emonTX).</p>
<div><em>P.S. I made a lot of photo's during the build of the nanodeRF and sensingshield and I will made a blogpost / building guide soon from it!</em></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4985"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Sun, 24/06/2012 - 05:56.</div>
    <div class="content">
     <p>&nbsp;Thanks Alco,</p>
<p>[edit: I see oyu only changed the plug, I thought you did other changes] <strike>can you also describe what modifications to the AC/AC adapter you made?&nbsp;</strike></p>
<p>Also when you test, I suggest to have an inductive load also (a fan for example) to see how the power factor varies. I have interesting results in my house, depending what appliances are turned on or off.</p>
<p>I recovered my sketch that captures voltage and current and now have it on GitHub, here is a link</p>
<p><a href="https://github.com/mharizanov/SensingShield/tree/master/voltage_and_current">https://github.com/mharizanov/SensingShield/tree/master/voltage_and_current</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4986"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX as an Arduino Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Sun, 24/06/2012 - 06:01.</div>
    <div class="content">
     <p>&nbsp;By the way, these enclosed AC/AC transformers are unreasonably expensive, I find it uneasy to pay 15 Euro for them..</p>
<p>I got myself this one&nbsp;<img src="../../../dl.dropboxusercontent.com/u/18771283/2012-06-24%2008.57.45.html" alt="" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/486"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-dGjRnsojy2z2Doq2Z39A777yXkzkczR76AxhhB85D58" value="form-dGjRnsojy2z2Doq2Z39A777yXkzkczR76AxhhB85D58"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
