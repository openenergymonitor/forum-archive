<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3753 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:21:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Encapsulated DS18B20 temperature sensor + emonTx V3 | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Encapsulated DS18B20 temperature sensor + emonTx V3</h3>
        <span class="submitted">Submitted by <a href="../user/5437.html" title="View user profile.">EmilianoM</a> on Sun, 02/02/2014 - 12:40</span>
        <div class="content"><p>Hi,</p>
<p>I am evaluating to buy emonTx V3&nbsp;(Fully Assembled).</p>
<p>Out of 4 CTs to measure eletrical&nbsp;power I&#39;d like to measure internal and external temperature.</p>
<p>Questions:</p>
<p>1) how long is the cable of DS18B20&nbsp;? My intention is to install it outside and connect it to emonTx inside home</p>
<p>2) can I connect 2 temperature sensors directly to&nbsp;emonTx V3&nbsp;board ?</p>
<p>Thanks !</p>
<p>Emiliano.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3759.html" class="topic-previous" title="Go to previous forum topic">‹ Adjustable gain monitoring</a>
              <a href="3714.html" class="topic-next" title="Go to next forum topic">EmonGLCD...setting time correctly is a chimera. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-18111"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Encapsulated DS18B20 temperature sensor + emonTx V3</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 02/02/2014 - 15:11.</div>
    <div class="content">
     <p>The cable length is specified here: <a href="http://shop.openenergymonitor.com/encapsulated-ds18b20-temperature-sensor/" title="http://shop.openenergymonitor.com/encapsulated-ds18b20-temperature-sensor/">http://shop.openenergymonitor.com/encapsulated-ds18b20-temperature-sensor/</a></p>
<p class="rteindent1"><strong>Technical</strong></p>
<p class="rteindent1">Diameter: 6mm body (approx 6.5mm body + heat-shrink)<br />
	Power supply range: 3.0V to 5.5V<br />
	Accuracy over the range of -10&deg;C to +85&deg;C: &plusmn;0.5&deg;C.<br />
	Storage temperature range:-55&deg;C to +125&deg;C (-67&deg;F to +257&deg;F)<br />
	<u><strong>Cable: 1m 3-core</strong></u></p>
<p>A check I did only yesterday shows that I think there is sufficient spare power available to connect 2 temperature sensors - each terminal is big enough for two wires - but you must change the sketch because although the default sketch will recognise and read more than one sensor, it will only print and send the temperature of the first one.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18115"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5437.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="EmilianoM&#039;s picture" title="EmilianoM&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Encapsulated DS18B20 temperature sensor + emonTx V3</h3>

    <div class="submitted">Submitted by <a href="../user/5437.html" title="View user profile.">EmilianoM</a> on Sun, 02/02/2014 - 16:33.</div>
    <div class="content">
     <p>Thanks again Robert !</p>
<p>Any suggestion for sketch change to manage 2 temperature sensors ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18133"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Encapsulated DS18B20 temperature sensor + emonTx V3</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 03/02/2014 - 02:24.</div>
    <div class="content">
     <p>You need to edit the sketch you have. First in the PayloadTX struct, where you have temp you must make that temp1 &amp; add temp2; then where you have all this</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; float temp=(sensors.getTempC(allAddress[0]));<br />
	&nbsp;&nbsp;&nbsp;&nbsp; digitalWrite(DS18B20_PWR, LOW);<br />
	&nbsp;&nbsp;&nbsp;&nbsp; if ((temp&lt;125.0) &amp;&amp; (temp&gt;-40.0)) emontx.temp=(temp*10);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //if reading is within range for the sensor<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // convert float to int ready to send via RF<br />
	&nbsp;&nbsp;&nbsp;&nbsp; if (debug==1) {Serial.print(&quot;temperature: &quot;); Serial.println(emontx.temp*0.1); delay(20);}</p>
<p>you must convert temp to temp1 and add another temp2 similarly:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; float temp1=(sensors.getTempC(allAddress[0]));<br />
	&nbsp;&nbsp;&nbsp;&nbsp; float temp2=(sensors.getTempC(allAddress[<strong>1</strong>]));<br />
	&nbsp;&nbsp;&nbsp;&nbsp; digitalWrite(DS18B20_PWR, LOW);<br />
	&nbsp;&nbsp;&nbsp;&nbsp; if ((temp1&lt;125.0) &amp;&amp; (temp1&gt;-40.0)) emontx.temp1=(temp*10);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //if reading is within range for the sensor<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // convert float to int ready to send via RF</p>
<p>&nbsp;&nbsp; &nbsp; if ((temp2&lt;125.0) &amp;&amp; (temp2&gt;-40.0)) emontx.temp2=(temp*10);<br />
	&nbsp;&nbsp;&nbsp;&nbsp; if (debug==1)<br />
	&nbsp;&nbsp;&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Serial.print(&quot;temperature 1: &quot;); Serial.print(emontx.temp1*0.1);&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Serial.print(&quot;temperature 2: &quot;); Serial.println(emontx.temp2*0.1);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; delay(20);<br />
	&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>I haven&#39;t tried it, I think it will work. Instead of using &quot;sensors.getTempC(allAddress[0])&quot;, you might want to use the actual sensor addresses encoded in the sensor at manufacture with &quot;sensors.getTempC(address_T1)&quot;. You&#39;ll need to look at the emonTx V2 sketches for that, and merge how it is done there into this sketch. You&#39;ll also need to get and modify the &quot;temperature_search&quot; sketch to read the serial numbers of the sensors to put into &quot;address _T1&quot; etc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18134"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5437.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="EmilianoM&#039;s picture" title="EmilianoM&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Encapsulated DS18B20 temperature sensor + emonTx V3</h3>

    <div class="submitted">Submitted by <a href="../user/5437.html" title="View user profile.">EmilianoM</a> on Mon, 03/02/2014 - 06:52.</div>
    <div class="content">
     <p>Thanks Robert.</p>
<p>Do you think in V3 release code is similar?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18148"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Encapsulated DS18B20 temperature sensor + emonTx V3</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 03/02/2014 - 13:46.</div>
    <div class="content">
     <p>That <strong>IS</strong> the default sketch that comes with the V3 that I&#39;ve edited for you!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18149"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5437.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="EmilianoM&#039;s picture" title="EmilianoM&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Encapsulated DS18B20 temperature sensor + emonTx V3</h3>

    <div class="submitted">Submitted by <a href="../user/5437.html" title="View user profile.">EmilianoM</a> on Mon, 03/02/2014 - 19:10.</div>
    <div class="content">
     <p>Whops, sorry. Really thanks again.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3753"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-8DBRkksNmfr-zpFPW3jDx4R8AX_JpMoWhwOqGFUYFuU" value="form-8DBRkksNmfr-zpFPW3jDx4R8AX_JpMoWhwOqGFUYFuU"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/3753 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:21:16 GMT -->
</html>
