<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3599 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:26:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>[Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive. | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">[Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>
        <span class="submitted">Submitted by <a href="../user/5229.html" title="View user profile.">iridium</a> on Sat, 11/01/2014 - 21:41</span>
        <div class="content"><p>Hi all:</p>
<p>I am following right now the guide to &quot;Setup Emoncms on a RaspberryPI with a Hard drive&quot;</p>
<p><a href="http://emoncms.org/site/docs/raspberrypihdd">http://emoncms.org/site/docs/raspberrypihdd</a></p>
<p>&nbsp;</p>
<p>Could you please help me on the following?</p>
<p>&nbsp;</p>
<p>1. Why using a HDD when after creating the image, just 2.9gB are used from my HDD and others are not visible? (200gB sata disk).</p>
<p>($ sudo dd bs=4M if=pi_hdd_stack.img of=/dev/sdb)</p>
<p>&nbsp;</p>
<p>[solved] 2. Also, when trying to update to latest version , I am getting the following error</p>
<p>pi@raspberrypi ~ $ git pull /var/www/emoncms<br />
	fatal: Not a git repository (or any of the parent directories): .git<br />
	pi@raspberrypi ~ $</p>
<p><strong>pi@raspberrypi ~ $ cd /var/www/emoncms</strong></p>
<p><strong>pi@raspberrypi ~ $ git pull origin master</strong></p>
<p>&nbsp;</p>
<p>Thanks so much in advance,</p>
<p>Iridium.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2293.html" class="topic-previous" title="Go to previous forum topic">‹ Upload to pvoutput.org - WILL PAY FOR CODE </a>
              <a href="3427.html" class="topic-next" title="Go to next forum topic">Calibrating 2 CTs ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-17528"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 11/01/2014 - 22:29.</div>
    <div class="content">
     <p>Iridium</p>
<p>I partitioned my HDD before writing the image, this way you can make use of the remaining HDD capacity without interfering with the emoncms installation.</p>
<p>I would suggest a partition of 5GB should suffice, leaving you 195GB&nbsp;to use as a file or media server, backup, or whatever you want.</p>
<p>You will need to edit the file;</p>
<p>/boot/cmdline.txt &nbsp; &nbsp;(which is on your SD card)</p>
<p>...to let the raspberry pi know where the rootfs is located. My rootfs is installed in /sda2&nbsp; so my cmdline.txt reads;</p>
<p>dwc_otg.lpm_enable=0 console=tty1 root=/dev/sda2 rootfstype=ext4 elevator=deadline rootwait</p>
<p>&nbsp;</p>
<p>PLAN B<br />
	An alternative is to expand your existing 2.9GB rootfs to fill the entire 200GB&nbsp;via this;</p>
<p>$ sudo raspi-config</p>
<p>....but is seems like a waste of 195GB to me...</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17530"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5229.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5229.png" alt="iridium&#039;s picture" title="iridium&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/5229.html" title="View user profile.">iridium</a> on Sat, 11/01/2014 - 23:47.</div>
    <div class="content">
     <p>Thanks Paul.........!!</p>
<p>I have found a 4Gb USB. I think I will use this one as an &quot;Solid state disk&quot; :-)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17531"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 12/01/2014 - 00:22.</div>
    <div class="content">
     <p>The USB SSD&#39;s&nbsp;will only have a limited life, similar to the SD card, it&#39;s the same technology..</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17533"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sun, 12/01/2014 - 04:49.</div>
    <div class="content">
     <p>Paul,</p>
<p>When I used raspi-config to expand my HDD partiton, it gave me an error message about the drive not being an SD card, and aborted the resize. Did it work OK for you?</p>
<p>Regards,</p>
<p>Bill</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17535"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 12/01/2014 - 10:09.</div>
    <div class="content">
     <p>Yes, it fully expanded with no errors. I think that the current <a href="http://www.raspberrypi.org/faqs#sdSize">minimum recommended size</a> for&nbsp;Raspbian&nbsp;is 4GB&nbsp;so leaving it at 2.9GB may cause problems in time.</p>
<p>I don&#39;t know how old the OEM &#39;image&#39; &nbsp;Raspbian&nbsp;version is, but there has been many updates which overcame early problems;</p>
<p>$ sudo apt-get update</p>
<p>Followed by;</p>
<p>$ sudo apt-get upgrade</p>
<p>will bring the OS up to date, if not already done.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17554"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sun, 12/01/2014 - 22:21.</div>
    <div class="content">
     <p>Did the update, then the upgrade. No problems there, but I still get an error message about the drive not being an SD card.</p>
<p>Not a big problem though, as I connected the drive to a Linux box and was able to resize it.</p>
<p>&nbsp;</p>
<p>Bill</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17556"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 12/01/2014 - 23:06.</div>
    <div class="content">
     <p>Bill, presumably you have increased the size of a partition, don&#39;t you still need to expand the rootfs&nbsp;to fill it?</p>
<p>ie. What do you get if you call;</p>
<p>$&nbsp;df -h</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17558"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Mon, 13/01/2014 - 05:48.</div>
    <div class="content">
     <pre>
Paul,

Expanding the rootfs <em><strong>partition</strong></em> is what actually gives the OS more &quot;room,&quot; since
the root filesystem is simply the filesystem on the same partition the root
directory is located.

Here&#39;s a better explanation: <a href="http://www.linfo.org/root_filesystem.html" title="http://www.linfo.org/root_filesystem.html">http://www.linfo.org/root_filesystem.html</a> 

Here&#39;s the results of df -h (10GB HDD with 1GB swap partition)

Filesystem      Size  Used Avail Use% Mounted on
rootfs          8.2G  2.1G  5.7G  27% /
/dev/root       8.2G  2.1G  5.7G  27% /
devtmpfs        212M     0  212M   0% /dev
tmpfs            44M  208K   44M   1% /run
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs           293M     0  293M   0% /run/shm
pi@raspberrypi ~ $</pre><p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17561"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 13/01/2014 - 10:01.</div>
    <div class="content">
     <p>That&#39;s pretty much what I&#39;ve got too, which seems to work well;</p>
<p>Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size &nbsp; &nbsp;Used &nbsp; &nbsp; Avail &nbsp; &nbsp; Use% &nbsp; &nbsp; Mounted on<br />
	rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;20G&nbsp; &nbsp; &nbsp;3.1G &nbsp; &nbsp;&nbsp;16G&nbsp; &nbsp; &nbsp; 17% &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /<br />
	/dev/root &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;20G&nbsp; &nbsp; &nbsp;3.1G &nbsp; &nbsp;&nbsp;16G&nbsp; &nbsp; &nbsp; 17% &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /<br />
	devtmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;235M&nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; &nbsp;235M&nbsp; &nbsp; &nbsp; &nbsp; 0% &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/dev<br />
	tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;49M&nbsp; &nbsp; &nbsp;2.7M &nbsp; &nbsp;&nbsp;46M&nbsp; &nbsp; &nbsp; &nbsp; 6% &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/run<br />
	tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5.0M &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; &nbsp; 5.0M &nbsp; &nbsp; &nbsp; 0% &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /run/lock<br />
	tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;98M&nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;98M&nbsp; &nbsp; &nbsp; &nbsp;0% &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /run/shm<br />
	/dev/mmcblk0p1 &nbsp; &nbsp;120M&nbsp; &nbsp; &nbsp;&nbsp;19M&nbsp; &nbsp; 102M&nbsp; &nbsp; &nbsp;16% &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/boot<br />
	/dev/sda1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 814G&nbsp; &nbsp; &nbsp; &nbsp;35G&nbsp; &nbsp;&nbsp;780G&nbsp; &nbsp; &nbsp; 5% &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /mnt/iomega</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17731"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5229.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5229.png" alt="iridium&#039;s picture" title="iridium&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [Solved] Help: Setup Emoncms on a RaspberryPI with a Hard drive.</h3>

    <div class="submitted">Submitted by <a href="../user/5229.html" title="View user profile.">iridium</a> on Sat, 18/01/2014 - 22:20.</div>
    <div class="content">
     <p>Finally I used &quot;gparted&quot; to expand the filesystem quite easely.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3599"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-46vn40SoA67AhsvkpvihdYNw7zRwnrhnvYQiGNLQUQE" value="form-46vn40SoA67AhsvkpvihdYNw7zRwnrhnvYQiGNLQUQE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/3599 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:26:04 GMT -->
</html>
