<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5425 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:42:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Help (Please excuse me for being stupid) | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Help (Please excuse me for being stupid)</h3>
        <span class="submitted">Submitted by <a href="../user/6497.html" title="View user profile.">Excession76</a> on Fri, 18/07/2014 - 13:52</span>
        <div class="content"><p>Hi,</p>
<p>Would appreacited some help.<br />
	&nbsp;</p>
<p><span style="font-size: 12px;">Have built the </span>emonTx<span style="font-size: 12px;"> V2.2 board, checked the voltage was ok before soldering the </span>RF-module<span style="font-size: 12px;"> on and I have set the </span>IRQ<span style="font-size: 12px;"> port (</span>DIO3<span style="font-size: 12px;">) voltage to </span>3V<span style="font-size: 12px;"> with solder.</span></p>
<p>
	I have chosen to use the Raspberry Pi as the base station with a hard drive.</p>
<p>
	Installed the Arduino IDE and cp2102 driver, and download the sketches into the sketchbook under the parent titles of Libraries and OpenEnergyMonitor; then uploaded the sketch [emonTx CT123 voltage] to the emonTx board and the LED flashes and I can hear the transmission burst on the speakers connected to my laptop so I assume the upload has been successful.</p>
<p>
	My confusion lies in which sketches do I have to upload, in particular the libraries, which specific libraries are required (just those specified in the [emonTx CT123 voltage] sketch header?) and I take it I need to paste them into the main sketch (i.e. [emonTx CT123 voltage]) as each time I upload I will overwrite the sketch loaded previously onto the emonTx board.</p>
<p>
	If I have to add the libraries to the main sketch I would appreciated some advice/instruction or links to where I can find clear easy to follow instructions within the forum or elsewhere.</p>
<p>
	I expect that the solution may be obvious to others, I tend to solve problems myself, but in this instance I need assistance as I fear my Asperger&rsquo;s and dyslexia are getting the better of me and I can&rsquo;t see the answers even though they may well be apparent within the forum.</p>
<p>
	Hoping someone can help me, as up to this point have enjoyed getting back into electronics/programming which I haven&rsquo;t been involved in since college (22 years ago eek!)</p>
<p>
	Thanks.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5422.html" class="topic-previous" title="Go to previous forum topic">‹ lmv321 equivilant</a>
              <a href="2859.html" class="topic-next" title="Go to next forum topic">EmonTX, CT3 issue ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22605"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6676.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ad84&#039;s picture" title="Ad84&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Help (Please excuse me for being stupid)</h3>

    <div class="submitted">Submitted by <a href="../user/6676.html" title="View user profile.">Ad84</a> on Fri, 18/07/2014 - 16:08.</div>
    <div class="content">
     <p>Im pretty&nbsp; new to this all too, but i&#39;ll try to help. Ive also never used an emonTx before but i have made an energy monitor using an arduino, so i reckon i can clear it up a bit for you.</p>
<p>From looking at the firmware you are correct with uploading the emonTx CT123 voltage sketch to the board. This should allow you to view to current/voltage etc from the serial port monitor in the arduino ide ( top right button with magnifying glass on it). The sketch needs two libraries EmonLib.h and JeeLib.h.&nbsp; Make sure you have them available in the ardiuno ide; check Sketch&gt;Import Library and look for EmonLib.h&nbsp; and JeeLib.h if they are not there you haven&#39;t installed the libraries correctly.</p>
<p>To connect to the pi, i believe your gonna have to put it all together yourself. There is another example sketch named g_TransmittingData.ino in the guide folder. This gives an example of how to send data over RF using the JeeLib libary .</p>
<p>The libraries are declared at the start of the sketch (look for #include &quot;EmonLib.h&quot; in the sketch) and are compiled with the sketch when they are uploaded. Think of them as extra instruction sets that make your life easier. For this purpose all you have to do is make sure they are installed correctly and the ardiuno compiler does the rest.&nbsp; &nbsp;</p>
<p>&nbsp;</p>
<p>Hope this helps, also please someone correct me if im wrong!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22608"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Help (Please excuse me for being stupid)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 18/07/2014 - 17:09.</div>
    <div class="content">
     <p>All the instructions for setting up the Arduino IDE under Windows 8 (XP, Vista &amp; 7 are broadly similar) are here: <a href="https://learn.openenergymonitor.org/?redirect=setting-up-the-arduino-environment" title="http://openenergymonitor.org/emon/buildingblocks/setting-up-the-arduino-environment">http://openenergymonitor.org/emon/buildingblocks/setting-up-the-arduino-...</a></p>
<p>You don&#39;t need to move the libraries once they are installed in the proper place - the IDE will find them when you compile the sketch. As you seem to have uploaded the sketch OK, I think you have done all that correctly. If your compile fails, check the list of libraries needed at the top of the sketch, and if one is missing, you&#39;ll need to download it and install alongside the rest. Note: you need to rename some libraries. If you do, it will be clearly stated in the &#39;README&#39;.</p>
<p>If you connect the Serial monitor as Ad64 says, you should see something printed in the window - you might need to set the baud rate to what it set inside the sketch (Serial.begin(<strong>9600</strong>); probably). You don&#39;t need the RPi for this.</p>
<p>I can&#39;t help you with the RPi - you need this: <a href="http://emoncms.org/site/docs/raspberrypihdd" title="http://emoncms.org/site/docs/raspberrypihdd">http://emoncms.org/site/docs/raspberrypihdd</a></p>
<p>Feel free to ask again when something isn&#39;t clear - we have experts in the various areas so help isn&#39;t far away.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22609"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Help (Please excuse me for being stupid)</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 18/07/2014 - 18:14.</div>
    <div class="content">
     <p>Have you shown that a simple sketch (which doesn&#39;t use any libraries) can be uploaded, such as blink.ino?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22612"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Help (Please excuse me for being stupid)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 18/07/2014 - 20:14.</div>
    <div class="content">
     <p>Excession76 says his emonTx_CT123_voltage sketch is working, so he must have compiled and loaded it correctly. (The emonTx V2 does NOT come pre-loaded with a sketch.)</p>
<p>What I maybe should have pointed out a bit more clearly is the standard libraries (emonLib, Jeelib etc) <strong>don&#39;t</strong> have to be copied into the sketch directory, and can&#39;t be separately loaded into the emonTx. The libraries and the sketch are combined by the compiler/linker part of the IDE, and the whole thing uploaded. But (as is the case with emonTx_CT123_voltage) sometimes the sketch is split into two or more files, and these <strong>do</strong> have to be alongside the main sketch in the same directory. However many source files the sketch spans, all are combined with the libraries by the compiler and uploaded as one entity into the emonTx.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22617"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6497.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Excession76&#039;s picture" title="Excession76&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Help (Please excuse me for being stupid)</h3>

    <div class="submitted">Submitted by <a href="../user/6497.html" title="View user profile.">Excession76</a> on Fri, 18/07/2014 - 22:17.</div>
    <div class="content">
     <p>Thank you all for your replies, not feeling so lost now!</p>
<p>Should be able to figure it out now (he says!)</p>
<p>Again thanks.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5425"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-dzrqTeXXrAq_XYfqzTME8dm9vtdXUdjzsmvYTtgl0XE" value="form-dzrqTeXXrAq_XYfqzTME8dm9vtdXUdjzsmvYTtgl0XE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
