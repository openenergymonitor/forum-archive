<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11910 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:43:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>My First Attempt - Please Help [Python HTTP] | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">My First Attempt - Please Help [Python HTTP]</h3>
        <span class="submitted">Submitted by <a href="../user/9200.html" title="View user profile.">FlipSnyman</a> on Thu, 31/12/2015 - 16:53</span>
        <div class="content"><p>Hi guys,</p>
<p>&nbsp;</p>
<p>My first attempt to write random data from RaspberryPi to EmonCMS.</p>
<p>Code runs in RaspberryPi using Python 2.</p>
<p>I would appreciate some assistance, many thanks.</p>
<p>&nbsp;</p>
<p>Happy New Year !!</p>
<p>&nbsp;</p>
<p><img alt="" src="../sites/default/files/Python%202%20Code_0.jpg" style="width:700px" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>The ouput:</p>
<p><img alt="" src="../sites/default/files/Error.jpg" style="width:700px" /></p>
<p>&nbsp;</p>
<p><i>[Image width set. Moderator (RW)]</i></p>
  <div class="forum-topic-navigation clear-block">
          <a href="11775.html" class="topic-previous" title="Go to previous forum topic">‹ MQTT JSON payload format</a>
              <a href="11923.html" class="topic-next" title="Go to next forum topic">Sending data to RFM12 nodes with emonhub/emoncms ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-37723"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: My First Attempt - Please Help [Python HTTP]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 01/01/2016 - 17:44.</div>
    <div class="content">
     <p>Not sure whats going wrong there but we use urllib2 in emonhub, this cut down example of how to use it might help:</p>
<p>import urllib2</p>
<p>request = urllib2.Request(&quot;http://emoncms.org/input/post.json?json={power:200}&amp;apikey=WRITE-APIKEY&quot;)<br />
response = urllib2.urlopen(request, timeout=60)<br />
reply = response.read()</p>
<p>print reply</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37724"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: My First Attempt - Please Help [Python HTTP]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 01/01/2016 - 17:47.</div>
    <div class="content">
     <p>I wouldnt put that directly in a while loop as it will just send out requests continuously!</p>
<p>Perhaps something like:</p>
<p>import time</p>
<p>while True:<br />
&nbsp;&nbsp;&nbsp; # send data here<br />
&nbsp;&nbsp;&nbsp; time.sleep(10.0)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37761"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9200.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="FlipSnyman&#039;s picture" title="FlipSnyman&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: My First Attempt - Please Help [Python HTTP]</h3>

    <div class="submitted">Submitted by <a href="../user/9200.html" title="View user profile.">FlipSnyman</a> on Sat, 02/01/2016 - 16:08.</div>
    <div class="content">
     <p>Made some progress.</p>
<p>Software is working fine when I write to emoncms.org.</p>
<p>The error occurs when I try to write to local wampserver on my laptop.</p>
<p>&nbsp;</p>
<p>Any suggestions where to look as it points to a wampserver issue?</p>
<p>&nbsp;</p>
<p>Thanks Trystan, I have added sleep command.</p>
<p>&nbsp;</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37767"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: My First Attempt - Please Help [Python HTTP]</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 02/01/2016 - 20:05.</div>
    <div class="content">
     <p>Two (hopefully obvious) points to check: Is your Wampserver on-line, and are you using the dotted IP address (not "localhost") that your router, or the name that your DNS, has given it?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37785"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9200.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="FlipSnyman&#039;s picture" title="FlipSnyman&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: My First Attempt - Please Help [Python HTTP]</h3>

    <div class="submitted">Submitted by <a href="../user/9200.html" title="View user profile.">FlipSnyman</a> on Sun, 03/01/2016 - 09:26.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>&nbsp;</p>
<p>Thank you for the assistance.</p>
<p>I was sure your suggestion will work, but it did not.</p>
<p>Wampserver is on-line.</p>
<p>I log into EMONCMS with <a href="http://mylaptop/">http://mylaptop</a> IP/emoncms</p>
<p>I get the login screen and login is sucessfull, so all looks good on wampserver.</p>
<p>The error 111 says connection refused.</p>
<p>Any other suggestions?</p>
<p>Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37792"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8839.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="joyrider3774&#039;s picture" title="joyrider3774&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: My First Attempt - Please Help [Python HTTP]</h3>

    <div class="submitted">Submitted by <a href="../user/8839.html" title="View user profile.">joyrider3774</a> on Sun, 03/01/2016 - 12:39.</div>
    <div class="content">
     <p abp="719">i&#39;m also using wamp although i changed the port it was working on. i also have node red with the emoncms nodes and i sometimes see the same error in the node red logs when connecting to emoncms on the wamp server. It might have something to do with too many connections in a short amount of time that had been made to the wamp server.</p>
<p abp="720">i also once had the problem that it could not post any data to emoncms on my wampserver but then i could not get the login screen to work either. I&#39;m sure you already tried it but what i did then was just choose restart all services on the wamp control and posting to emoncms worked again as was going to the site.</p>
<p abp="721">also have you tried writing the (internal) ip adres of your laptop directly in httpconnection instead of looking it up first? like writing httplib.httpconnection(&quot;192.168.0.101&quot;, 80) for example (change ip to ip of laptop)&nbsp;? just to be sure you are getting the correct ip adress.</p>
<p abp="721">also just noticed 127.0.1.1 being outputted isn&#39;t that kind of a weird ip adres ? i&#39;m not certain but if you want to post to localhost shouldn&#39;t it&nbsp;be 127.0.0.1. Try my suggestion above also by writing the ip adress your router&#39;s dhcp gave to your laptop</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37794"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: My First Attempt - Please Help [Python HTTP]</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 03/01/2016 - 12:40.</div>
    <div class="content">
     <p>So taking Trystan's example, does your Python line look like:</p>
<p>request = urllib2.Request("http://mylaptop IP/emoncms/input/post.json?json={power:200}&amp;apikey=WRITE-APIKEY")</p>
<p>"emoncms" of course being the directory as WAMP presents it to the outside world. I put it that way because when you're using WAMP, you need to have two views of your laptop. One is the laptop's own that you're accustomed to, the other is the one relative to the directory that WAMP calls its "www" directory, which WAMP presents as the root directory where web pages are concerned. (What I'm trying to say is, is emoncms in [www]\emoncms ?  It looks like that from what you've written.)</p>
<p>I know I've had a NanodeRF working to WampServer running under Windows XP, but I can't find the appropriate sketch (though it might not have been useful anyway). </p>
<p>It will probably help to give everything static IP addresses - a setting in your router - especially while you're getting it to work. </p>
<p>Checking Google, there's a thread on the WampServer forum about Port Forwarding that might be relevant. I didn't need to do that though.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11910"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-d7Ohv9uVlERuX9MxtlwYpjZWPTj9dpIFZpGARYPNOfg" value="form-d7Ohv9uVlERuX9MxtlwYpjZWPTj9dpIFZpGARYPNOfg"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/11910 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:43:45 GMT -->
</html>
