<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10176 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:00:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonhub modules &quot;sandbox&quot; | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonhub modules &quot;sandbox&quot;</h3>
        <span class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 15/02/2015 - 20:27</span>
        <div class="content"><p>Following &nbsp;a couple of&nbsp;discussions about interfacing &quot;hive&quot; and &quot;nest&quot; to emonHub&nbsp;and a couple more about fetching feed data from emoncms for glcd&nbsp;etc&nbsp;plus&nbsp;the fact I have several of my own custom scripts like a weather retrieval script and a PC /Pi performance monitor and more recently a request for a data generating test script, I wonder if it was easier to interface and experiment with emonHub without interfering with it&#39;s normal running more users would be tempted to construct custom scripts.</p>
<p>Does anyone have any thoughts on this?</p>
<p>I&#39;m currently thinking along the lines of a folder that emonhub will check for files and launch each one without prior knowledge of what is in there. A custom script would need to conform to a&nbsp;loose template but would be helped by a single import eg &quot;from emonhub import modules&quot; this would include as much as could be pre determined so that a script could just provide data somehow, either contacting a website&nbsp;or doing some calculations or reading a file or just generating random numbers as long as it ends with a &quot;nodeid&nbsp;val1 val2 etc&quot; emonhub could pick it up and process it,</p>
<p>If the script runs slow or fails etc emonhub will carry on regardless (maybe notify or log something) but the main thing being it is protected from being crashed by a experimental script and it allows a communication or process to be developed alongside emonHub maybe becoming a permanent or optional &quot;official&quot;&nbsp;interfacer down the line.</p>
<p>An excellent candidate for the is packetgen, not yet implemented (although it will be at some point) but in the mean time if you could just &quot;drop&quot; a packetgen.py script into the modules folder and it works, that must be easier way to share, easier to implement and wouldn&#39;t be effected by future updates to emonhub as it would all be done via a fairly standard socketinterfacer which will continue to work regardless of any changes to emonHub structure.&nbsp;</p>
<p>worth pursueing?</p>
<p>Paul</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10148.html" class="topic-previous" title="Go to previous forum topic">‹ &#039;works with nest&#039; functionality feasible?</a>
              <a href="3789.html" class="topic-next" title="Go to next forum topic">Node-RED and Emoncms ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-27753"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub modules "sandbox"</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 15/02/2015 - 22:57.</div>
    <div class="content">
     <p>The elephant in the room seems to be the lack of MQTT&nbsp;support from emoncms.</p>
<p>3 months ago, <a href="5943.html">Trystan had a working model</a> which appeared to work well, albeit there was no automatic daemon for it to function independently.</p>
<p>If MQTT&nbsp;was implemented, it would open the door for much greater integration with other data sources as it is a commonly accepted standard, and would help focus emoncms on it&#39;s core functionality, instead of being all things to all people.</p>
<p>My personal opinion is that if Trystan&nbsp;&amp; Glyn&nbsp;could&nbsp;clearly define&nbsp;what emoncms&nbsp;&#39;is&#39; and &#39;isn&#39;t&#39;, then development could concentrate in key areas, to make it a clearly&nbsp;defined, rock solid solution.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27763"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub modules "sandbox"</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/02/2015 - 01:41.</div>
    <div class="content">
     <p>Hi Paul, I can&#39;t really disagree with anything you&#39;ve&nbsp;said, although I do think the lack of MQTT is holding things back a bit it&#39;s not the whole picture, ideally emonhub and emoncms would use a similar standard and the bigger elephant is control, to which MQTT&nbsp;will play a large part. certainly emonhub&nbsp;needs considerable&nbsp;reworking to implement control properly&nbsp;(and maybe&nbsp;the same for emoncms).</p>
<p>​The reason I&#39;m finding it difficult to get the control side going on emonHub is because it was built to collect data full stop. now I find myself trying to adapt it, the same could be said for other elements of the project&nbsp;so&nbsp;rather than implement MQTT&nbsp;optimised for collecting data and then try and bend it to fit control I would like to get a good grasp of what we need for control first.&nbsp;</p>
<p>What is clear is the detail needs to be discussed openly with several perspectives&nbsp;so that time and effort isn&#39;t wasted on parallel&nbsp;and overlapping but incompatible ideas.</p>
<p>This is important but not directly linked to the point I was raising here though. the idea behind this is to provide a simple drop in facility that does away with thinking about MQTT, file structures and protocols ( as best we can) so that if someone has an idea or some weird sensor or website data&nbsp;etc they can take a blank file add a import statement&nbsp;to make it &quot;emonhub compatible&quot; and write anything that results in a string of values, no complexity, no conforming, no configuration files just get the idea to work,&nbsp;any sensor connected to the gpio or any website, cron,&nbsp;internal files, weird and wonderful calculations, the end result is passed to emonhub&nbsp;as a simple string of values via a socket&nbsp;and processed, which yes could mean publishing it to MQTT&nbsp;(in time),&nbsp;</p>
<p>I was hoping this could speed up development of more exotic interfaces as users could create scripts without needing a knowledge of emonhub and the scripts (or modules) would be single files that can be passed around the forum like sketches until perfected and then&nbsp;maybe become a in-built&nbsp;emonhub_interfacer by adjusting it to fit.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27793"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub modules "sandbox"</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 16/02/2015 - 21:25.</div>
    <div class="content">
     <p><u>Paul (pb66) has asked for members thoughts on this suggestion.</u></p>
<p>Out of courtesy to Paul, can we have a little feedback please? otherwise he may take the view that nobody wants it and therefore not worth his time developing...</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27795"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7706.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="coldpenguin&#039;s picture" title="coldpenguin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub modules "sandbox"</h3>

    <div class="submitted">Submitted by <a href="../user/7706.html" title="View user profile.">coldpenguin</a> on Mon, 16/02/2015 - 22:17.</div>
    <div class="content">
     <p>Quote: "This is important but not directly linked to the point I was raising here though. the idea behind this is to provide a simple drop in facility that does away with thinking about MQTT, file structures and protocols ( as best we can) so that if someone has an idea or some weird sensor or website data etc they can take a blank file add a import statement to make it "emonhub compatible" and write anything that results in a string of values, no complexity, no conforming, no configuration files just get the idea to work, any sensor connected to the gpio or any website, cron, internal files, weird and wonderful calculations, the end result is passed to emonhub as a simple string of values via a socket and processed, which yes could mean publishing it to MQTT (in time), "</p>
<p>The way I would consider (I have not as yet had a look at the code, I have been lurking only for a while), would be similar to what you describe, but I would not have it write to a socket, there is a risk that a process might kill/hang the emoncms daemon.<br />
What I have seen in the past, would be a daemon running the main emon get process. A second daemon would run, periodically spawning scripts from the 'plugin' dirt. These would import the main module, and then 'register' a name, and their outputs, descriptions and types. This would back off to a database store. The user would then do their stuff, and have two main functions, a get("module",item/all) which would retrieve an item (latest) from the db, where "module" is emoncms or plugin.name, and item is the variable.<br />
Conversely, a put function, which DOESN'T take the module name, just the variable and data.<br />
To display, a template could be stored in the plugin/html directory that the webserver parses and inserts the variables.<br />
It is possible that this could also be powerful enough to publish variables across the network.<br />
Personally, I would have a third daemon which is almost identical, but performs control functions. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27797"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub modules "sandbox"</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 16/02/2015 - 23:19.</div>
    <div class="content">
     <p>Thanks Paul for asking about this! Paul Reed what do you think is the ambiguity about what emoncms is and isnt (before I try and second guess) I need to do some more work on communicating my recent developments and ideas. Been doing a lot, <a href="https://github.com/emonhub/emonhub/issues/134" title="https://github.com/emonhub/emonhub/issues/134">https://github.com/emonhub/emonhub/issues/134</a> but need to write more about it</p>
<p>(this is probably a bit off-topic for the discussion topic of modules sandbox though)</p>
<p>I like the idea of making it possible to add/remove modules</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27800"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub modules "sandbox"</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 17/02/2015 - 00:43.</div>
    <div class="content">
     <p><a href="../sustainable-energy.html">Creating a sustainable world</a> is a aspiration, and which oem admirably contributes to, but not something which can be achieved&nbsp;by oem alone.</p>
<p>But it&#39;s unclear where the boundaries are (as pb66&nbsp;has mentioned above), because emoncms&nbsp;started as&nbsp;data logging/display software, yet it has evolved into a multi-faceted system which is becoming ever-increasingly hard to develop,&nbsp;to maintain, and not reaching full potential in many&nbsp;areas.</p>
<p>I hoped (being the 10th initial member of this forum)&nbsp;that emoncms would eventually become a fully fledged graphical interface to energy data, and thereby educate users how to reduce wasted energy, but the focus appears to have shifted to energy models, add-ons, etc. which to the majority of users are disregarded.</p>
<p>Many of the additional functions&nbsp;could have been more admirably be performed&nbsp;by other software which is&nbsp;being developed within their own confines &amp; expertise, but they need the conduit to communicate -&nbsp;hence my drive towards a common standard -&nbsp;MQTT.</p>
<p>​Paul</p>
<p>​</p>
<p>﻿</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27802"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub modules "sandbox"</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 17/02/2015 - 00:47.</div>
    <div class="content">
     <p>Thanks for the &quot;bump&quot; Paul.</p>
<p>@Trystan&nbsp;- Its always been a goal to&nbsp;add/remove modules one day, as in properly coded interfacers. The emphasis here is on the sandbox&nbsp; idea. to try and make a simple way of trying stuff with hardcoded&nbsp;variables rather than a config file etc.</p>
<p>@coldpenguin - thanks for your input, this is targeting emonhub rather than emoncms, the use of sockets was to keep it simple as in a &quot;testmodule&quot; type interfacer&nbsp;could be used,&nbsp;so quite literally a test script would consist of an &quot;from&nbsp;emonhub import modules&quot; for example at the top and a &quot;send_to_emonhub(string_of_values)&quot; at the bottom what happens in the middle can be anything, as long as it doesn&#39;t crash the host machine it shouldn&#39;t effect emonhub or emoncms because of the strict(ish) conditioning/filtering/sanitation done by the &quot;send_to_emonhub()&quot; before dispatching the string to emonhub&nbsp;&quot;modules&quot;&nbsp;port (ModulesInterfacer).</p>
<p>If that&#39;s any clearer? probally not :-)</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27807"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub modules "sandbox"</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 17/02/2015 - 01:33.</div>
    <div class="content">
     <p><a href="10162.html">Feeding Hive data to emoncms</a></p>
<p><a href="10148.html">​&#39;works with nest&#39; functionality feasible?</a></p>
<p><a href="10159.html">How to simulate data sent from EmonTx to EmonHub in order to debug a reporter?</a></p>
<p>3 current examples that could use something like this, even if just during&nbsp;development until a working solution is found but one of scripts can remain in a prototype form perhaps.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27816"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub modules "sandbox"</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 17/02/2015 - 11:57.</div>
    <div class="content">
     <p>Thanks @PaulReed, Il start another forum topic with my ideas for what I would like to include within emoncms. Where I see it going. I think its definitely going to get a lot better and yes making it more maintainable is crucial :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10176"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-PYjQs9Q31JU_gfKLv9bKSQsrHNRJnTuwYkcI4PQa-OA" value="form-PYjQs9Q31JU_gfKLv9bKSQsrHNRJnTuwYkcI4PQa-OA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
