<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10250 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:11:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>newbie question..3 phase challenge. | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">newbie question..3 phase challenge.</h3>
        <span class="submitted">Submitted by <a href="../user/7497.html" title="View user profile.">eugen66</a> on Tue, 03/03/2015 - 09:56</span>
        <div class="content"><p>I live in Norway and have a TN-C-S 400v-230v electrical distribution system in my house and my plan was to use one EmonTX for 4&nbsp;singelphase&#39;s&nbsp;(230v)&nbsp;and one EmonTX for a 3 phase (400v). But when I&nbsp;look at the distribution &nbsp;panel the 3 phase is distributed evenly so it will measure current on different phases, se picture. The one 3 phase is power to a SPA which I know has only 230 v pumps so the load will not be a &quot;real&quot; 3 phase load.</p>
<p>I would also like to use the &nbsp;pulse (reed) output from the meter and multiple temperatures.</p>
<p>What will be the best way of doing this, if its possible?</p>
<p>Can I use three EmonTX, one for each phase?</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10274.html" class="topic-previous" title="Go to previous forum topic">‹ Importing old data from MySQL into phptimeseries</a>
              <a href="10262.html" class="topic-next" title="Go to next forum topic">Some EmonGLCD sketches not compiling after udate to Arduino 1.6.0 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-28357"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: newbie question..3 phase challenge.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 03/03/2015 - 12:53.</div>
    <div class="content">
     <p>You can indeed use 3 x emonTx, one for each phase, and that might well be the best way as you intend to have the pulse and multiple temperature measurements also. The readings will not be synchronous, but as all the loads are single-phase, that will not matter. You will then have 4 current inputs per phase, if you need to uprate the 4th input, then it is possible to add a parallel resistor to the on-board burden, and that is quite easy.</p>
<p>It does not matter whether your 3-phase load is connected in star or in delta, you still measure the power in the same way (as long as you have a neutral to measure the voltage from, which you clearly do have).</p>
<p>You will need 3 ac-ac adapters and emonTx's, a maximum of 12 ct's, and your temperature sensors. Read about multiple temperature sensors before you buy, because there are constraints if you have many and the distances are significant. Depending on how many temperature sensors you have, you might need an additional 5 V USB power supply for the emonTx that has the sensors, as the current you can draw from the ac adapter is strictly limited so that it does not damage the shape of the voltage wave that is being measured. You will also need an emonBase and/or a GLCD to see the output. You will need a programmer as it will be necessary to modify and load sketches.</p>
<p>And of course, you will need socket outlets for the ac adapters and for the USB supply if you need one.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28359"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7497.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="eugen66&#039;s picture" title="eugen66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: newbie question..3 phase challenge.</h3>

    <div class="submitted">Submitted by <a href="../user/7497.html" title="View user profile.">eugen66</a> on Tue, 03/03/2015 - 14:19.</div>
    <div class="content">
     <p>Thank you very much for your quick reply;)</p>
<p>I already bought&nbsp;2 EmonTX and 8 cts, 8 pc&nbsp;DS18B20, 2 ac-ac power,&nbsp;EmonGLCD, 3 EmonTH, EmonBasePI, breakout for the temp and the programmer.&nbsp;</p>
<p>I have a PI running Emoncms with HD and it receives&nbsp;data ok. I wish I could &quot;export&quot; this values to openHAB (asked in another tread, no answer) as well.</p>
<p>I have installed one EmonTX with the &quot;default&quot; sketch and it does measure something but of course wrong values. So what I need is one&nbsp;sketch that can do ct&#39;s and the pulse and the other can do ct&#39;s&nbsp;and&nbsp;multiple temperatures?</p>
<p>The EmonGLCD&nbsp;came unassembled so I need to have som spare&nbsp;time with that ;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28368"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: newbie question..3 phase challenge.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 03/03/2015 - 22:42.</div>
    <div class="content">
     <p>Are you asking about 3-phase sketches?  As far as I know, those do not exist on Github. There are sketches for 3-phase power, there are sketches for single-phase pulse and sketches for single-phase temperature (4 but easily extended). I think you might have to do a little work to add these things to the 3-phase sketches.<br />
You could also look at Dan Woodie's 60 Hz version of MartinR's energy diverter (linked from <a href="https://learn.openenergymonitor.org?redirect=pll/derivatives" title="http://openenergymonitor.org/emon/pvdiversion/pll/derivatives">http://openenergymonitor.org/emon/pvdiversion/pll/derivatives</a>) and convert that back to 50 Hz as per Martin's original, keeping the temperature measurement.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28375"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7497.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="eugen66&#039;s picture" title="eugen66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: newbie question..3 phase challenge.</h3>

    <div class="submitted">Submitted by <a href="../user/7497.html" title="View user profile.">eugen66</a> on Wed, 04/03/2015 - 07:14.</div>
    <div class="content">
     <p>Thank you and sorry for my confusing text..I only need single-phase as I will use one EmonTX on each phase, but need&nbsp;one sketch that includes&nbsp;pulse and the other with multiple temp and 4 is ok. But I&#39;m a bit confused regarding the librarys needed for the newest EmonTX, do I have to change something for the temperature?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28385"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: newbie question..3 phase challenge.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 04/03/2015 - 16:45.</div>
    <div class="content">
     <p><a href="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3/RFM12B/emonTxV3_4_RFM12B_DiscreteSampling/emonTxV3_4_RFM12B_DiscreteSampling.ino" title="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3/RFM12B/emonTxV3_4_RFM12B_DiscreteSampling/emonTxV3_4_RFM12B_DiscreteSampling.ino">https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3...</a> looks to me to be good for the emonTx V3.4, but as it stands, it will only read one temperature. If you look at the older emonTx V2 sketch for temperature: <a href="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV2/emonTx_CT123_Voltage_Temp/emonTx_CT123_Voltage_Temp.ino" title="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV2/emonTx_CT123_Voltage_Temp/emonTx_CT123_Voltage_Temp.ino">https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV2...</a> and lift out of that <u>only</u> the parts concerned with reading multiple temperatures, I think that will work for you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28397"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7497.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="eugen66&#039;s picture" title="eugen66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: newbie question..3 phase challenge.</h3>

    <div class="submitted">Submitted by <a href="../user/7497.html" title="View user profile.">eugen66</a> on Wed, 04/03/2015 - 21:55.</div>
    <div class="content">
     <p>Thank you again for your patience, but I still dont understand. Cant find any pulse counting in that sketch.Would be really Nice if someone could put together a sketch with 4 ct, pulse and multiple temp. for the 3.4. And made it kind of &quot;configurable&quot; just using remarks?&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28399"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: newbie question..3 phase challenge.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 04/03/2015 - 22:52.</div>
    <div class="content">
     <p>Ah, I misunderstood you. My apologies. I thought you wanted Power &amp; Temperature in one sketch, Power &amp; Pulse in another.<br />
There's a Pulse-only sketch for an emonTx V3.2 here: <a href="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3/RFM12B/Examples/emonTx_V3_Pulse/emonTx_V3_Pulse.ino" title="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3/RFM12B/Examples/emonTx_V3_Pulse/emonTx_V3_Pulse.ino">https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3...</a><br />
Again, you will need to include <u>only</u> the pulse parts (and importantly NOT RFu_JeeLib.h), but you will also need to be sure you use the correct interrupt for the pulse input.</p>
<p>That sketch is suited to an optical pulse detector, if you have a reed switch (which can have contact bounce), then you might find this one <a href="../sites/default/files/emonTxV3_RFM12B_DiscreteSampling_with_pulse_0.html" title="http://openenergymonitor.org/emon/sites/default/files/emonTxV3_RFM12B_DiscreteSampling_with_pulse_0.ino">http://openenergymonitor.org/emon/sites/default/files/emonTxV3_RFM12B_Di...</a> a better place to start. However, it was written for the emonTx V3.2, so it needs some changes to the libraries (JeeLib, not RFu_Jeelib), for the RFM69CW if you have one, and to the pulse input pin (I think that's all!)</p>
<p>I understand your problem with 'multi-function' sketches. Unfortunately, there are so many permutations that the sketch could become very big and confusing. Given enough time, one day I might just try to do something like that...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28402"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7497.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="eugen66&#039;s picture" title="eugen66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: newbie question..3 phase challenge.</h3>

    <div class="submitted">Submitted by <a href="../user/7497.html" title="View user profile.">eugen66</a> on Thu, 05/03/2015 - 06:38.</div>
    <div class="content">
     <p>Thanks again, you don&#39;t misunderstood, I want one sketch with Power and multiple temp and another for Power and Pulse ;) ,since the &quot;multi-function&quot; doesn&#39;t exist...</p>
<p>But as I try to understand the sketch you linked to: <a href="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3/RFM12B/emonTxV3_4_RFM12B_DiscreteSampling/emonTxV3_4_RFM12B_DiscreteSampling.ino">https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3/RFM12B/emonTxV3_4_RFM12B_DiscreteSampling/emonTxV3_4_RFM12B_DiscreteSampling.ino</a>&nbsp;I cant find the pulse part but the temp is there and I&#39;ll try to modify it to multiple temp. The problem is to put the pulse part into that sketch...?</p>
<p>I still think the &quot;multi-function&quot; sketch would be the best for all us newbies and that such a firmware should be the default when selling the EmonTX.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10250"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-UN0KguP3bMIdd85-MFqZ4qeQ9LgE2MSI-OVGizM0og8" value="form-UN0KguP3bMIdd85-MFqZ4qeQ9LgE2MSI-OVGizM0og8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/10250 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:11:01 GMT -->
</html>
