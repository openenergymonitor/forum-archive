<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11734 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:49:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Cannot get Wh Accumulator to work | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Cannot get Wh Accumulator to work</h3>
        <span class="submitted">Submitted by <a href="../user/4638.html" title="View user profile.">borpin123</a> on Wed, 02/12/2015 - 21:07</span>
        <div class="content"><p>Installation is a latest &#39;pull&#39; from the repo for both emoncms and app.</p>
<p>I cannot get the Wh Accumulator to work.&nbsp; The Feed just says &#39;N/A&#39;.&nbsp; The log to feed and power to kWh both work.</p>
<p>I followed this instruction;</p>
<p>&quot;Click on the wrench icon for CT1 Wh: Select Wh accumulator. Enter a name for the feed or use suggested, select the Fixed Interval No Averaging (PHPFina) feed engine and select the 10s feed interval.&quot;</p>
<p>Any suggestions?&nbsp; This is a new installation.</p>
<p>Brian</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11571.html" class="topic-previous" title="Go to previous forum topic">‹ uno + emontx shield + esp8266</a>
              <a href="11743.html" class="topic-next" title="Go to next forum topic">how is the kwh to kwh/d processor calculating? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-36599"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cannot get Wh Accumulator to work</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 02/12/2015 - 21:32.</div>
    <div class="content">
     <p>Did you read what it said about the Wh Accumulator in the process list setup page.</p>
<p><em>To be used in conjunction with an emontx sending total watt hours elapsed to emoncms. This processor ensures that when the emontx is reset the watt hour count in emoncms does not reset, it also checks filter&#39;s out spikes in energy use that are larger than a max power threshold set in the processor, assuming these are error&#39;s, the max power threshold is set to 25kW.<br />
Requires redis installed to work</em></p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36615"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8919.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Patrik Arlos&#039;s picture" title="Patrik Arlos&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cannot get Wh Accumulator to work</h3>

    <div class="submitted">Submitted by <a href="../user/8919.html" title="View user profile.">Patrik Arlos</a> on Thu, 03/12/2015 - 10:39.</div>
    <div class="content">
     <p>So, unless you update the emontx/pi&nbsp;to a firmware that does this, like&nbsp;emonTxV3_4_Continuous_Beta or emonPi_RFM69CW_RF12Demo_ContinuousSampling (removing the comments for getWattHour), the &quot;Wh Accumulator&quot; should not be used, as it expects/requires a continuously increasing value.&nbsp;&nbsp;</p>
<p>I&#39;ve tried to some documentation about the &quot;power to kWh&quot;, as it seems to be equivalent, but running locally on the EmonCMS/hub/pi (where?).&nbsp;</p>
<p>The challenge that I have is that I need to obtain the energy used during a random time interval. My approach was to log&nbsp;the&nbsp;node CT input using the &quot;Power to kWh&quot; to a feed. &nbsp;</p>
<p>During an experiment,&nbsp;I requested the feed value at&nbsp;the start of the time interval (/emoncms/feed/value.json?...), lets say I got X. Then at the end of the interval, I did the request again and got Y. Now the energy used would be Y-X kWh. Does this seem reasonable? Or should I take the plunge, and update all firmwares to continous_sampling_with_kWh</p>
<p>Some initial tests looked fine. However,as I was unclear about the update rate of the feed I did an experiment where I requested the feed value once per second. I&#39;ve done two observations. The feed value changes approximately every 140s, and then the change is really small 0.01 (however representing the load on the system for a 140s).</p>
<p>Now, as far as i read on various pages/codes, the emonTx (source in this case), reports the values to the base every 10s. Now, in a bad wireless environment some of these packets could be lost, but to always loose 13 packets and only one making it across? Possible, but unlikely, and more probable some variations in the update rate should be present.. (any way to check this on the receiver, ie. how noisy the environment is?)</p>
<p>When comparing to the &quot;log to feed&quot; of the same input, the samples are really bad, lots of null values, but there is data more frequently than 140s and sadly also bigger than 140s gaps between non-null samples.&nbsp;</p>
<p>So, questions...</p>
<p>1) where can I find the documentation for &quot;Power to kWh&quot;<br />
2) does my &quot;used energy&quot; approach work (in teory) based on a &quot;Power to kWh&quot; feed?<br />
3) Where are the 140s&nbsp;coming from?&nbsp;</p>
<p>BR/patrik</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36634"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="borpin123&#039;s picture" title="borpin123&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cannot get Wh Accumulator to work</h3>

    <div class="submitted">Submitted by <a href="../user/4638.html" title="View user profile.">borpin123</a> on Thu, 03/12/2015 - 17:06.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>I&#39;d have loved to read that.&nbsp; Where did I not find it :).&nbsp; I googled the first sentence and it did not come up in the results (just this and one other post).&nbsp; I was doing what Trystan said and followed the EmonPi documentation.&nbsp; Obviously that was not the right thing to do :(</p>
<p>Cheers.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36635"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cannot get Wh Accumulator to work</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 03/12/2015 - 17:15.</div>
    <div class="content">
     <p>No googling necessary, the information is&nbsp;right there in your emoncms installation.</p>
<p>In emoncms, go to &#39;inputs&#39; and select a &#39;spanner&#39; to add a process, select the Wh Accumulator from the &#39;Add process&#39; box, and you will see the description of the process appear in the blue box below. (as I&#39;ve pasted above).</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36642"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="borpin123&#039;s picture" title="borpin123&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cannot get Wh Accumulator to work</h3>

    <div class="submitted">Submitted by <a href="../user/4638.html" title="View user profile.">borpin123</a> on Thu, 03/12/2015 - 19:14.</div>
    <div class="content">
     <p>Ah Ok.&nbsp; I did read that but it did not tell me (and I had no other of way of knowing) that this was telling me that this input was not compatible with my EmonTX (which is a couple of years old).&nbsp; It would make sense to someone who knows the background, but to someone just coming in fresh, the text means nothing.</p>
<p>So back to my earlier question, what feeds should I be creating to use the My Electric module.&nbsp; Even there, you really need to know what it is telling you to create the right feed.</p>
<p>The documentation really does need a freshen up (and I&#39;d be happy to contribute) as I&#39;ve been at this for a while now and I am sure I am not alone in this struggle.</p>
<p>Cheers, Brian.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36646"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cannot get Wh Accumulator to work</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 03/12/2015 - 19:37.</div>
    <div class="content">
     <p>You just need a realtime&nbsp;feed which logs your consumption, then add a process &#39;power_to_kWh/d&#39;, and there are&nbsp;your two feeds.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36649"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="borpin123&#039;s picture" title="borpin123&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cannot get Wh Accumulator to work</h3>

    <div class="submitted">Submitted by <a href="../user/4638.html" title="View user profile.">borpin123</a> on Thu, 03/12/2015 - 20:19.</div>
    <div class="content">
     <p>OK Great - thanks.</p>
<p>I suppose the next question is whether the V3 can do the accumulator with a firmware upgrade or if it is only available in the later HW.</p>
<p>Brian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36686"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8919.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Patrik Arlos&#039;s picture" title="Patrik Arlos&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cannot get Wh Accumulator to work</h3>

    <div class="submitted">Submitted by <a href="../user/8919.html" title="View user profile.">Patrik Arlos</a> on Fri, 04/12/2015 - 07:46.</div>
    <div class="content">
     <p>What version of EmonCMS has this? My version is low-write-v8.5 (as delivered on the EmonPi, Sept~Oct&nbsp;2015), and there its Nodes, where the &#39;spanner&#39; is found.&nbsp;</p>
<p>Will try a git pull/update to see if it appears in the new version.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11734"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-_1rnnkH1WknLXsFg1jvGm_tLy8wMcncVcBY7dVrH-M8" value="form-_1rnnkH1WknLXsFg1jvGm_tLy8wMcncVcBY7dVrH-M8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/11734 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:49:50 GMT -->
</html>
