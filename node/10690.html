<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10690 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:59:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Disappointing Results with emonTx Arduino Shield and Arduino Ethernet | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Disappointing Results with emonTx Arduino Shield and Arduino Ethernet</h3>
        <span class="submitted">Submitted by <a href="../user/8081.html" title="View user profile.">RogerMunford</a> on Mon, 11/05/2015 - 22:24</span>
        <div class="content"><p>I have assembled this system in order to monitor PV generation on my garage roof and I am starting off with the &quot;Shield_CT1234_Voltage_SerialOnly.ino&quot; sketch.</p>
<p>The Arduino Ethernet is 3-4 years old but I cannot identify any markings which would be helpful. The shield is a couple of weeks old.</p>
<p>I have calibrated it using a two bar electric heater using two different multimeters which give the same results for voltage and current measurements.</p>
<p>However when I switched the CT to the PV supply the measured current was about 25% higher than the inverter which also reads current. The inverter voltage and arduino voltage were very close.</p>
<p>The power factor was .85 on the inverter circuit and .88 on the heater circuit. I believe that the power factor should be very close to one. I have a PC running here in the garage and the house has a couple of PCs running with CFL /LED lamps.</p>
<p>I have the same results with all 4 CT channels.</p>
<p>I would be grateful for any suggestions.</p>
<p>Thanks,</p>
<p>&nbsp;</p>
<p>Roger</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10700.html" class="topic-previous" title="Go to previous forum topic">‹ Documentation update for com_baud = 57600 ?</a>
              <a href="10693.html" class="topic-next" title="Go to next forum topic">Ethernet for emonPI? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-30271"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Disappointing Results with emonTx Arduino Shield and Arduino Ethernet</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 11/05/2015 - 22:45.</div>
    <div class="content">
     <p>Could we have some numbers? As you appear to be in the UK, are you on a nominal 240 V supply?  Which CT are you using? Is your shield built to the standard design with the recommended burden resistor values? What current did you calibrate at? What is the inverter current? Did you adjust the phase/timing calibration (PHASECAL)? Did you keep the CT+channel pairing after you'd calibrated?<br />
Do your multimeters respond to true rms?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30275"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8081.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RogerMunford&#039;s picture" title="RogerMunford&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Disappointing Results with emonTx Arduino Shield and Arduino Ethernet</h3>

    <div class="submitted">Submitted by <a href="../user/8081.html" title="View user profile.">RogerMunford</a> on Tue, 12/05/2015 - 09:31.</div>
    <div class="content">
     <p>Robert,</p>
<p>Thanks for your reply.</p>
<p>I am in the UK and the nominal supply is 240</p>
<p>The CT is SCT-013-000</p>
<p>The shield was purchased a couple of weeks ago from the shop</p>
<p>Calibration Voltage 241, using a 2 bar heater</p>
<p>Current with 1 bar 1.65 Amps Real Power 360 Watts Phase 0.88</p>
<p>Current with 2 bars 3.37 Amps Real Power 730 Watts&nbsp; Phase 0.88</p>
<p>I initially posted after measuring on a dull afternoon where the current was about 1 amp but relatively steady. Now the sunlight is pulsing and I am getting 4 - 8A swings. The inverter only samples every 2&nbsp; mins so it is impossible to correlate anything. However the power factor is about 0.92.</p>
<p>I have left PHASECAL at 1.7 default.</p>
<p>I am not quite sure of the CT+channel pairing means.&nbsp; I am doing everything with CT1 but was concerned about the power factor so tested with other channels to see if something was unique to CT1.</p>
<p>The Multimeters are from Fluke &gt; 20 years old, and the other Screwfix 1 year old. They both agree but whether they respond to true rms I am not sure.</p>
<p>Thanks again</p>
<p>&nbsp;</p>
<p>Roger</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30276"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Disappointing Results with emonTx Arduino Shield and Arduino Ethernet</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 12/05/2015 - 11:04.</div>
    <div class="content">
     <p>My first comment is that at 1A or so you're working in the area where inaccuracies are building rapidly. The system as it is designed is set up for 100 A full scale, so you are actually working outside the specified range of the CT itself. It's down there that phase error rapidly becomes large, which probably accounts for the poor power factor that's reported. That of course is consistent with the much better power factor you're seeing at higher currents.</p>
<p>Calibration corrects the combined scaling errors of the CT and the burden resistor on a per-channel basis, also for the ADC scale factor for all channels (as there's only one ADC). So if you swap the CT and channel pairing around, it will probably be wrong (the burden resistor is &plusmn;1% and the CT is 3% from 10% to 120% of rated current). There's a full analysis of the possible errors in Building Blocks.</p>
<p>So what to do about it? I presume you cannot form the wire you're measuring into a multi-turn coil and multiply the current that way? And you cannot disconnect to install a ring CT? If you're always going to be measuring very small currents, the next thing is to increase the value of the burden resistor. That will give you more voltage but at the expense of worse phase errors. It's the resistor immediately behind the socket. There are holes for a wire-ended component, so it's a matter of unsoldering the SMT resistor and fitting a higher value: say 330 &Omega; will give you 10 A maximum current. But a caveat: I've not tested the CT with a burden that big, whether the other aspects of its performance will be satisfactory I cannot say.  </p>
<p>You should certainly do the full calibration, including phasecal.</p>
<p>The reason for asking about your meters is the Arduino sketch calculates the true rms value of current, or the true average power, more or less irrespective of the shape of the wave. Unless your multimeter ways it is "True rms", it will most probably be measuring the rectified average and scaling it to display the rms assuming the wave is close to a pure sinusoid. And that might not be the case for the inverter output, though I would suspect that the inverter itself gets it right.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30280"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8081.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RogerMunford&#039;s picture" title="RogerMunford&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Disappointing Results with emonTx Arduino Shield and Arduino Ethernet</h3>

    <div class="submitted">Submitted by <a href="../user/8081.html" title="View user profile.">RogerMunford</a> on Tue, 12/05/2015 - 15:32.</div>
    <div class="content">
     <p>Robert,</p>
<p>Thank you very much again for your help.</p>
<p>The background to my project is to monitor 3 PV circuits with an eventual view to&nbsp; diverting power and building a simple battery storage system.</p>
<p>PV 1 is a 2.5 Kwp system and so will be limited to about 11 A max</p>
<p>PV2 is a 1 Kwp system - 5 A</p>
<p>PV3 is 0.5 Kwp system - 2.5A max</p>
<p>(2 and 3 use Enecsys microinverters From Enecsys who are now bankrupt and there is now no way of monitoring them except externally)</p>
<p>The house supply is probably a lot less than 100A.</p>
<p>I thought that I would find my feet with a standard install before tinkering to try and optimise the system.</p>
<p>I have no problem disconnecting the PV circuits and installing a ring CT and I would very much welcome any suggestions for a suitable ring CT. I am finding it difficult to assess the products on the RS site. There seems to be a lot for different applications.</p>
<p>I can experiment with a larger burden resistor but do not understand why it would lead to worse phase errors.</p>
<p>Thanks for pointing mw in the right direction.</p>
<p>&nbsp;</p>
<p>Roger</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30284"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Disappointing Results with emonTx Arduino Shield and Arduino Ethernet</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 12/05/2015 - 19:29.</div>
    <div class="content">
     <p>I can't see anything suitable in the RS catalogue, the 1 A &amp; 5 A ones will require a high power off-board burden resistor, and that's not very practical (and it'll waste as much power as it takes to run the Arduino!). I believe Robin Emley uses either the 20 A version here: <a href="http://www.yhdc.com/en/product/425/" title="http://www.yhdc.com/en/product/425/">http://www.yhdc.com/en/product/425/</a> or this 20A:10mA one <a href="http://eppep.com/?action-viewnews-itemid-140364" title="http://eppep.com/?action-viewnews-itemid-140364">http://eppep.com/?action-viewnews-itemid-140364</a> from <a href="http://www.ebay.co.uk/itm/281436762683?_trksid=p2059210.m2749.l2649&amp;ssPageName=STRK%3AMEBIDX%3AIT">here</a>.</p>
<p>The problem with the larger burden resistor is nothing to do with the burden resistor, it's simply that the secondary current remains small, and the magnetising current cannot be ignored, and it's that which skews the phase. If you increase the flux (with multiple primary turns), you work the CT harder and the errors get proportionately smaller. (Read up on transformer theory if you're a glutton for punishment!)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30292"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8081.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RogerMunford&#039;s picture" title="RogerMunford&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Disappointing Results with emonTx Arduino Shield and Arduino Ethernet</h3>

    <div class="submitted">Submitted by <a href="../user/8081.html" title="View user profile.">RogerMunford</a> on Tue, 12/05/2015 - 20:12.</div>
    <div class="content">
     <p>Robert,</p>
<p>Thanks again for your information and the effort. I am off for a couple of days and will have to put this to the side until the weekend.</p>
<p>Thanks again</p>
<p>Roger</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10690"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-12PqFGpoNfsF5u-O9110_V5BCwFrs4R6uJ6HB5Mmyk0" value="form-12PqFGpoNfsF5u-O9110_V5BCwFrs4R6uJ6HB5Mmyk0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
