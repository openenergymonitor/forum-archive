<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/6409 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:47:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Convert from timestore | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Convert from timestore</h3>
        <span class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Fri, 02/01/2015 - 11:12</span>
        <div class="content"><p>I have been running emoncms for almost two years now.&nbsp; My feeds were converted to a TIMESTORE feed many months ago, but I now want to convert to the recommended PHPFina feeds.</p>
<p>In the usefulscripts there is a script to convert from PHPTimestore to PHPFina - but how do I get from TIMESTORE to PHPTimestore please?&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10028.html" class="topic-previous" title="Go to previous forum topic">‹ How to register counters gas, water or electricity manually?</a>
              <a href="10013.html" class="topic-next" title="Go to next forum topic">Cannot delete inputs. Where are they stored? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-26834"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Convert from timestore</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Sun, 18/01/2015 - 08:04.</div>
    <div class="content">
     <p>I know this must be possible, because my feeds in emoncms.org were originally TIMESTORE, and now they are PHPTimestore.&nbsp; Can someone help please?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26836"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Convert from timestore</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 18/01/2015 - 12:09.</div>
    <div class="content">
     <p>From what I understand, the PHPTimestore&nbsp;is a PHP&nbsp;port of the SQL TIMESTORE engine and the resulting data would be the same, Maybe you could make a backup copy and try the PHPTimestore to PHPFina on the TIMESTORE data.</p>
<p>See&nbsp;<a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/history.md#emoncms-time-series-engine-history">Emoncms Time Series engine history</a>&nbsp;for in-depth info.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26839"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Convert from timestore</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sun, 18/01/2015 - 14:42.</div>
    <div class="content">
     <p>Isn&#39;t TIMESTORE a program written in C, by Mike Stirling, (later ported to PHP by Trystan) and PHPTime<strong>series</strong> the SQL compatible storage engine?</p>
<p><a href="http://www.mike-stirling.com/redmine/projects/timestore">www.mike-stirling.com/redmine/projects/timestore</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26840"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Convert from timestore</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 18/01/2015 - 16:36.</div>
    <div class="content">
     <p>That&#39;s where I&#39;m a little hazy,&nbsp;because&nbsp;I thought (rightly or wrongly)&nbsp;TIME<strong>STORE</strong>&nbsp;by mike-sterling WAS the&nbsp;time<strong>series</strong><strong> </strong>engine that Trystan&nbsp;then ported to PHP as PHPTime<strong>series</strong><strong>.</strong></p>
<p>The&nbsp;blog is titled <a href="http://openenergymonitor.blogspot.co.uk/2013/06/timestore-timeseries-database.html">&quot;Timestore&nbsp;TimeSeries Database&quot;</a>&nbsp;&nbsp;says&nbsp;&quot;It uses a NoSQL approach&quot;</p>
<p>The <a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/variableinterval.md#variable-interval">&quot;variable interval&quot; documentation</a> states</p>
<blockquote><p><em>&quot;Note:&nbsp;The 9 byte datapoint structure used in PHPTimeSeries is the same as the structure used by MYSQLTimeSeries engine, PHPTimeSeries was designed to be able to read the mysql time series data files directly. PHPTimeSeries does not yet implement the use of the deleted datapoint flag byte. If I where writing a new variable interval feed engine I would be tempted to drop the use of the deleted datapoint flag, An erronous datapoint could be corrected rather than deleted.&quot;</em></p>
</blockquote>
<p>and <a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/history.md#emoncms-time-series-engine-history">Trystan&nbsp;also says</a>&nbsp;</p>
<blockquote><p><em>&quot;I poured through the timestore code (thanks to Mike for making timestore open source) and started to understand how timestore worked, Im not a good c programmer so to try and check if I understood it I started writing a port in php. &quot;</em></p>
</blockquote>
<p>And in <a href="3868.html">this&nbsp;forum&nbsp;post</a> he refers to PHPFina, PHPFiwa&nbsp;and PHPTime<strong>store</strong><strong> </strong>as the &quot;the new engines&quot;, a link to which appears as the first line of this excerpt from&nbsp;the&nbsp;<a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/history.md#emoncms-time-series-engine-history">Emoncms Time Series engine history</a></p>
<blockquote><p>&quot;<a href="3868.html">18th Feb 2014: Emoncms v8, New feed engines, PHPFiwa, PHPFina</a><br />
<a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/variableinterval.md">Documentation: Variable interval time series</a><br />
<a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/fixedinterval.md">Documentation: Fixed interval time series</a><br />
<a href="https://github.com/openenergymonitor/documentation/blob/master/BuildingBlocks/TimeSeries/fixedintervalaveraging.md">Documentation: Fixed interval with averaging time series</a></p>
<p>This brings us to the present day with the 3 main emoncms feed engines:</p>
<p>PHPFiwa which is based on timestore with a few changes.<br />
PHPFina which takes the same fixed interval approach but without the averaging feature.<br />
PHPTimeSeries a variable interval engine.</p>
<p>These 3 engines provide between them an implementation that can fit most applications.</p>
<p>PHPFiwa is great for power and temperature data. Averaging is useful in these cases and the data is highly regular without time shifts.<br />
PHPFina is great for accumulating data where averaging provides no benefit.<br />
PHPTimeSeries is great for irregular data such as state changes, but its also good for daily data while regular for most of the year may need to have an hour time shift due to daylight saving time.&quot;</p>
</blockquote>
<p>So whilst I can find no hard evidence I had assumed&nbsp;PHPTime<strong>store</strong>&nbsp;and&nbsp;PHPTime<strong>series</strong>&nbsp;were the same and never really questioned it to be honest. This is my own conclusion so any clarification is welcome.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26847"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Convert from timestore</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sun, 18/01/2015 - 18:00.</div>
    <div class="content">
     <p>Hi Paul,<em> </em></p>
<p><em>&nbsp;&nbsp;&nbsp; That&#39;s where I&#39;m a little hazy,&nbsp;because&nbsp;I thought (rightly or wrongly)&nbsp;TIMESTORE&nbsp;by mike-sterling WAS the&nbsp;timeseries engine that Trystan&nbsp;then ported to PHP as PHPTimeseries.</em></p>
<p>It looks as if Trystan called his PHP port of TIMESTORE, PHPTimestore. It&#39;s referenced in the default.settings.php file that&#39;s in emoncms. Here&#39;s an excerpt from v8.4.0:</p>
<pre>
        &#39;phpfiwa&#39;=&gt;array(
            &#39;datadir&#39;=&gt;&#39;/var/lib/phpfiwa/&#39;
        ),
        &#39;phpfina&#39;=&gt;array(
            &#39;datadir&#39;=&gt;&#39;/var/lib/phpfina/&#39;
        ),
        &#39;phptimeseries&#39;=&gt;array(
            &#39;datadir&#39;=&gt;&#39;/var/lib/phptimeseries/&#39;
        ),
        &#39;phptimestore&#39;=&gt;array(
            &#39;datadir&#39;=&gt;&#39;/var/lib/phptimestore/&#39;
        )

</pre><p>As can be seen, both PHPTimeseries and PHPTimestore are referenced there.</p>
<p>If memory serves, I recall reading an article that said something to the effect of &quot;Although PHPTimeseries is faster than MySQL, it isn&#39;t as fast as Timestore, <em><strong>but</strong></em>, PHPTimeseries data is compatible with, and can be read by, MySQL.&quot;</p>
<p>Trystan mentions both Mike&#39;s program, and his port, in this post: <a href="3868.html">http://openenergymonitor.org/emon/node/3868</a> (here&#39;s a clip of some of it)</p>
<p><strong>PHPTimestore</strong></p>
<p>Posting 30000 takes 6.5s ~ 0.000217 seconds per post (4615 posts/s)<br />
Posting 25000 takes 5.1 ~ 0.000204 seconds per post(4902 posts/s)</p>
<p><strong>Timestore</strong></p>
<p>Although a single post can take 0.000275 seconds (3636 posts/s), testing again today I could not get it to run continuously at a stable post rate at anything much faster than 310 posts per second 0.00323 seconds per post. The emoncms.org server has also reached a similar post rate and its seeing the same unstable slow down effect.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Looks like some of the docs need updating<strong> </strong>;-)</p>
<p>Regards,</p>
<p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26848"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Convert from timestore</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 18/01/2015 - 19:15.</div>
    <div class="content">
     <p>You could well be right, although I was awarwe of the different locations I assumed one just proceded the other and was retained for compatibility, although I&#39;m sure that&#39;s still the reason PHPtimestore was still in the settings I am no&nbsp;longer sure (if I ever was) &nbsp;which engine(s) are which.&nbsp;</p>
<p>The thread you link to mentions PHPtimeseries twice, the second mention states</p>
<blockquote><p><em>&quot;If a particular use case required a longer post interval the phptimeseries engine could be used which is a variable interval engine in that you can post at any interval. A variable interval engine is also useful for when the application only requires an entry sporadically i.e in response to a state change such as counting the number of times the internet goes offline on a basestation.&quot;&nbsp;</em></p>
</blockquote>
<p>while discussing the&nbsp;fixed intervals of the &quot;php port of timestore&quot;. still not absolute however, and&nbsp;<a href="4334.html">http://openenergymonitor.org/emon/node/4334</a>&nbsp;states</p>
<blockquote><p><em>Timestore is one of many optional feed engines, however timestore started to give some problems see here: <a href="3868.html" title="http://openenergymonitor.org/emon/node/3868">http://openenergymonitor.org/emon/node/3868</a> and so we are now moving over to two new native php feed engines which have better performance: phpfiwa and phpfina.</em></p>
</blockquote>
<p>which also links timestore to phpfina&nbsp;and phpfiwa, so maybe PHPTimeseries is just a variable interval cousin of timestore ???</p>
<p>Anyway, having totally hijacked the thread, I have also noticed&nbsp;engeeaitch&#39;s original question was &quot;how do I get from TIMESTORE to PHPTimestore&quot;, which I believe we are agreed PHPTimestore&nbsp;is a PHP port of TIMESTORE&nbsp;whatever it is, regardless of what PHPtimeseries maybe too.&nbsp;</p>
<p>So&nbsp;engeeaitch,&nbsp;I think it would be worth running the &quot;PHPTimestore to PHPFina&quot; script <u>on a copy of</u>&nbsp;the TIMESTORE&nbsp;data, what do you think Bill?</p>
<p>One thing we can&nbsp;absolutely agree&nbsp;on is the need for clarification :-)</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26849"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Convert from timestore</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 18/01/2015 - 19:19.</div>
    <div class="content">
     <p>Ahha! just saw <a href="2651.html#comment-15093">this post by Trystan</a></p>
<blockquote><p><em>&quot;I have also added another feed engine called phptimeseries&nbsp;which is much faster than mysql&nbsp;but slower than timestore and without averaging, it also uses the same datafile format as mysql so its just a matter of copying the mysql datafiles. To use phptimeseries&nbsp;you need&nbsp;privileges to create a folder and assign www-data access to it.&quot;</em></p>
</blockquote>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26850"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Convert from timestore</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sun, 18/01/2015 - 19:29.</div>
    <div class="content">
     <p><em>Ahha! just saw this post by Trystan</em></p>
<p><em>&quot;I have also added another feed engine called phptimeseries&nbsp;which is much faster than mysql&nbsp;but slower than timestore and without averaging, it also uses the same datafile format as mysql so its just a matter of copying the mysql datafiles.</em></p>
<p>Looks like the ol&#39; memory cells are still workin&#39; after all! (at least somewhat) I just couldn&#39;t remember WHERE I&#39;d read it.</p>
<p>Your suggestion of running the &quot;PHPTimestore to PHPFina&quot; script on a copy of&nbsp;the TIMESTORE&nbsp;data sounds like it should do the job.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26871"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Convert from timestore</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Mon, 19/01/2015 - 21:41.</div>
    <div class="content">
     <p>Thanks for the suggestions - I&#39;ll give this a go when I have a bit of time.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/6409"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-5g1dAayBh0iDCAy9OMWISOiUQnWgd7hywatYOg-B3Zg" value="form-5g1dAayBh0iDCAy9OMWISOiUQnWgd7hywatYOg-B3Zg"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
