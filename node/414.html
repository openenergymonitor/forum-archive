<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/414 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:26:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Wireless link not working | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Wireless link not working</h3>
        <span class="submitted">Submitted by Guest on Wed, 15/02/2012 - 22:57</span>
        <div class="content"><p>It's a standard EmonTX running the Emontx_single_CT_example_watchdog sketch, and a Emonbase (Nanode RF) running the NanodeRF_singleCT code. The CT is the blue seedstudio, and all the settings in the sketch are the defaults.</p>
<p>The EmonTX has a single CT plugged into the CT2 socket, and a figure is produced on the serial monitor every few seconds which matches the current usage in watts (+- 1W anyway) to a British Gas alertme monitor, so that seems to be as expected. I have now removed the Alertme transmitter (&amp; removed the batt) in case it was causing interference.</p>
<p>When the Emonbase is connected , it picks up an IP correctly from the DHCP server, and is posting to my emonCMS server.</p>
<p>I am getting rf-fail:1 displayed every 30 seconds or so, and a steady RED led lit.</p>
<p>I have transferred Ian Chilton's test_rx script to the Emonbase, and the serial Monitor displays a number every few seconds, which is in perfect sync with the flash of the green LED on the EmonTX, which leads me to believe that the wireless is working. The payload which is being displayed is in the format:</p>
<p>Received: 213910407 <br />
Received: 213910410 <br />
Received: 213910409 <br />
Received: 213910413 <br />
Received: 213910405&nbsp;</p>
<p>I have uploaded both test_TX to the emonTX and the 2 devices count up in sync.</p>
<p>I was using a Philips external battery pack with USB supply  out - Switching to a Kindle USB adaptor cured it for about 5 hours  before the signal was lost again.&nbsp; I have since swapped the USB power on the EmonTX for 2 AA batteries, but that has not made any difference.</p>
<p>Has anyone got any more ideas?</p>
<p></p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="446.html" class="topic-previous" title="Go to previous forum topic">‹ emonTX CT labels on PCB v2.2 correct, drawings incorrect?</a>
              <a href="432.html" class="topic-next" title="Go to next forum topic">Efergy CT sensor connections ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-3252"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Wireless link not working</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 23/02/2012 - 22:24.</div>
    <div class="content">
     <p>Is the Nanode receiving any data? Have you checked that the emonTx is on the correct network group, correct payload and correct frequecy for the module.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3253"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gazza_d&#039;s picture" title="gazza_d&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Wireless link not working</h3>

    <div class="submitted">Submitted by gazza_d (not verified) on Thu, 23/02/2012 - 22:40.</div>
    <div class="content">
     <p>Both EmonTX and NanodeRF are configured for RF_433Mhz, Group 210. The Nanode is node 35 and the emonTX is node 10.</p>
<p>If I use the test_rx sketch from Ian Chilton's nanode site, I recieve payloads similar to the following everytime the LED on the EmonTX flashes:</p>
<p>Received: 213910410 <br />
Received: 213910409 <br />
Received: 213910413 <br />
Received: 213910405&nbsp; </p>
<p>And these continue on and on if I leave them</p>
<p>With the Emonbase_singleCT sketch loaded, I pick up a DHCP address Ok, and then just rf_fail:1 similar to below</p>
<p>[webClient]<br />
<br />
DHCP status: 1<br />
<br />
IP:&nbsp; 10.10.10.122<br />
<br />
GW:&nbsp; 10.10.10.1<br />
<br />
{rf_fail:1}<br />
<br />
0<br />
<br />
Date: Thu, 23 Feb 2012 21:46:17 GMT&nbsp;<br />
<br />
ok recieved<br />
<br />
{rf_fail:1}
</p>
<p>the NanodeRF is uploading OK to my emonCMS site as I can see the RF_fail input update every 30 seconds or so.</p>
<p>As I said, this all worked for about 4-5 hours on Sunday, before stopping again, and I got all excited!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3254"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Wireless link not working</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 23/02/2012 - 23:21.</div>
    <div class="content">
     <p>&nbsp;Mm that's strange. The RF is obviously working and so is the Etherent! How far are the units appart?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3255"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gazza_d&#039;s picture" title="gazza_d&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Wireless link not working</h3>

    <div class="submitted">Submitted by gazza_d (not verified) on Fri, 24/02/2012 - 07:00.</div>
    <div class="content">
     <p>normally about 2 metres apart seperated by a brick wall, but I have had them on the bench next to each other.</p>
<p>The odd thing is I got it all to work last w/e when I powered the emonTX with a Kindle usb adaptor, and it lasted for about 5 hours before failing again. Thought that the Kindle supply may have been more stable but not stable enough so am now powering from a 2 AA battery holder from Maplin and fresh duracells. </p>
<p>I have tried powering the Nanode from a laptop USB port, via the FTDI cable from the same laptop, even with the emonTX USB&nbsp;powered from the same laptop</p>
<p>EmonTX is using the EmonTX single CT watchdog example  sketch, and the NanodeRF is using the NanodeRF singleCT example.the  EmonTX sketch is unmodified apart from to ensure the wireless settings  are correct, and the nanodeRF the same&nbsp; + my web server details.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3257"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gazza_d&#039;s picture" title="gazza_d&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Wireless link not working</h3>

    <div class="submitted">Submitted by gazza_d (not verified) on Sat, 25/02/2012 - 00:00.</div>
    <div class="content">
     <p>I think/hope I may have sussed this and it appears to have been one or both of two things.</p>
<p>after testing again with the test_rx sketch on the Nanode, I decided to flick though the other sketchs, and loaded up the emonBase_singleCT_RTCrelay_GLCDtemp sketch, and after a minute or so settling down, the Nanode started displayiing data correctly on the serial monitor</p>
<p>Checked my emonCMS , only to discover that it was trying to upload to the openenergyMon demo site - as soon as I put in the internal Ip address for my web server, it bombed, but if I put in the FQDN, then it uploads.</p>
<p>That seems kinda weird to me as it will quite happily upload rf_fail=1 to the website via the IP, but the decode seems to fail&nbsp; - very odd, but it has been workign now for a couple of hours, so fingers crossed!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3258"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/450.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Wireless link not working</h3>

    <div class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Sat, 25/02/2012 - 10:18.</div>
    <div class="content">
     <p>Is the code trying to do a DNS&nbsp;lookup against an IP&nbsp;address?&nbsp; This is likely to fail.</p>
<p>Can you put the NAME&nbsp;of your local server in the code instead?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/414"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-7oUw-Jft-MzIyYQ8464tu8oAxfmvWAr1Wd2NXExt12g" value="form-7oUw-Jft-MzIyYQ8464tu8oAxfmvWAr1Wd2NXExt12g"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
