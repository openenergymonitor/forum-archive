<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11025 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:56:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>EmonPi - Sending packets to emonGLCD | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">EmonPi - Sending packets to emonGLCD</h3>
        <span class="submitted">Submitted by <a href="../user/3947.html" title="View user profile.">bdhughes</a> on Thu, 23/07/2015 - 17:00</span>
        <div class="content"><p>Hi</p>
<p>I&#39;m trying to send data from my emonPi to an emonGLCD.</p>
<p>The documentation says&nbsp;&quot;To send a packet a HTTP POST request needs to be sent to the nodes API of the form:&nbsp;request method: POST request url: /nodes/1/tx/values request body: 18.5,0.5&quot;</p>
<p>Using the API Documentation link on the emoncms page &quot;/nodes/1/tx/values&quot;&nbsp;I can post values to the emonGLCD and it works beautifully. I&#39;ve modified the sketch on the emonGLCD for my purposes. I assumed it would be easy to automate this in code.</p>
<p>However I tried to do the same thing within Python and while I get a response of &quot;200 OK&quot; my data doesn&#39;t get sent.</p>
<p>Here&#39;s my cut down code for testing:</p>
<p>import httplib, urllib<br />
newdata = &quot;17,58, 5,1569, 0, 3000, 236&quot;<br />
headers = {&quot;Content-type: &quot;text/plain&quot;}<br />
conn = httplib.HTTPConnection(&quot;192.168.50.88&quot;)<br />
conn.request(&quot;POST&quot;, &quot;/emoncms/nodes/1/tx/values&quot;, newdata)<br />
response = conn.getresponse()<br />
print response.status, response.reason<br />
conn.close()</p>
<p>I get &quot;200 OK&quot; printed so the basic POST is working. I suspect I&#39;m not putting the data in the right format.</p>
<p>Looking at the web page for the API I can see it&#39;s done with ajax:</p>
<p>$.ajax({<br />
type: &quot;POST&quot;,<br />
contentType: contentType,<br />
url: path + apiurl,<br />
data: apivalue<br />
});</p>
<p>Can somebody help me with Python?</p>
<p>Thanks</p>
<p>Brian</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11196.html" class="topic-previous" title="Go to previous forum topic">‹ Port not open?</a>
              <a href="11116.html" class="topic-next" title="Go to next forum topic">Ready-To-Go SD card MYSQL problem ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-32587"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3947.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bdhughes&#039;s picture" title="bdhughes&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi - Sending packets to emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/3947.html" title="View user profile.">bdhughes</a> on Fri, 24/07/2015 - 17:37.</div>
    <div class="content">
     <p>I managed to solve this. The test webpage must send a cookie with authorisation. So we need to explicitly send the appropriate apikey. When I do that all works. I&#39;ve got my emonGLCDs&nbsp;working again with EmonPis.</p>
<p>In the course of this I found a more consise&nbsp;way of sending POSTs so the new Python code is below:</p>
<p>import requests</p>
<p>newdata = &quot;17,58, 5,1569, 0, 3000, 236&quot;</p>
<p>r=requests.post(&#39;http://192.168.50.88/emoncms/nodes/1/tx/values?apikey=xxxxxxxx&#39;,data=newdata,headers={&#39;content-type&#39;: &#39;text/plain&#39;})</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33719"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi - Sending packets to emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 31/08/2015 - 00:52.</div>
    <div class="content">
     <p>Brian -&nbsp;I just finished building the emonglcd. &nbsp;So my next step is to try and send&nbsp;data from the emonPi to the emonglcd.</p>
<p>With your example above, I am guessing&nbsp;your emonPi is IP addr&nbsp;192.168.50.88? &nbsp;And is&nbsp;node 1 is the emonglcd? &nbsp;What is the newdata of&nbsp;&quot;17,58, 5,1569, 0, 3000, 236&quot; represent? &nbsp;Would you be willing to share more of your code?</p>
<p>Tnx! &nbsp;Jon</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33741"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3947.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bdhughes&#039;s picture" title="bdhughes&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi - Sending packets to emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/3947.html" title="View user profile.">bdhughes</a> on Tue, 01/09/2015 - 14:31.</div>
    <div class="content">
     <p>Hi Jon</p>
<p>No problem. Yes the ip of my emonPi is 192.168.50.88 &amp; is node 5. The EmonGLCD&nbsp;is actually on&nbsp;node 20. Node 1 is just what the instructions told me to use. The arduino code in the emonGLCD&nbsp;needs to look out for node 5.</p>
<p>newdata&nbsp;is my set of values I&#39;m sending. In this case the first 2 values are the hour &amp; minutes of the time ie 17:58. The next values are my electric car kW,&nbsp;solar PV kW, immersion heater kW, House kW and then the voltage of the mains.</p>
<p>I actually have 2 emonPis. One is&nbsp;out of range of the emonGLCD,&nbsp;in my garage,&nbsp;but is on the ethernet network. So I use sockets to send its data (electric car charging and solar PV)&nbsp;between the 2 emonPis.</p>
<p>The code for the emonPi in the carage is in senddata.py. This is run every 5&nbsp;seconds with the following entries in crontab:</p>
<p>&nbsp;*/1 * * * * /home/pi/senddata.py<br />
&nbsp;*/1 * * * * (sleep 5 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 10 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 15 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 20 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 25 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 30 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 35 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 40 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 45 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 50 ; /home/pi/senddata.py)<br />
&nbsp;*/1 * * * * (sleep 55 ; /home/pi/senddata.py)</p>
<p>A couple of points about this program. I get the data form this file&nbsp;/var/log/emonhub/emonhub.log&nbsp;There may be a&nbsp;better way of getting the data, if you find it let me know.&nbsp;Also if the communication with the other emonPi fails it performs a reboot.</p>
<p>The program on the other emonPi which is in my house (ip 192.168.50.88) collects the data from the garage emonPi, adds its own readings (immersion &amp; house power) and sends everything to the emonGLCD. This is sockserver.py</p>
<p>I&#39;ve also included my code for the emonGLCD which displays all this info.</p>
<p>Brian</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33753"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi - Sending packets to emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Tue, 01/09/2015 - 03:20.</div>
    <div class="content">
     <p>Hi Brian,</p>
<p>Like you, I ran into the need to run a python script every 5 seconds. I used the cron sleep trick for a few weeks, but kept thinking &quot;I&#39;m already running Python, there&#39;s got to be a way to run the job every 5 secs from Python&quot; Searching turned up Advanced Python Scheduler. It uses a syntax similar to cron, and has resolution down to one second.</p>
<p>Here&#39;s all it takes to make it work:</p>
<address>----------------------------------------------------------------<br />
from apscheduler.scheduler import Scheduler</address>
<address>from time import sleep</address>
<address>&nbsp;</address>
<address># Start the scheduler<br />
sched = Scheduler()<br />
sched.start()</address>
<address>&nbsp;</address>
<address>def read_meter():<br />
&nbsp;&nbsp;&nbsp; #meter reading code</address>
<address>&nbsp;</address>
<address>def send_to_pvo():<br />
&nbsp;&nbsp;&nbsp; #send to pvo code</address>
<address>&nbsp;</address>
<address>def wrt_data_daily():<br />
&nbsp;&nbsp;&nbsp; #daily code</address>
<address>&nbsp;</address>
<address>def wrt_monthly_separator():<br />
&nbsp;&nbsp;&nbsp; #monthly code</address>
<address>&nbsp;</address>
<address>def main():</address>
<address>&nbsp; job1 = sched.add_cron_job(read_meter, second=&#39;*/5&#39;)<br />
&nbsp; job2 = sched.add_cron_job(send_to_pvo, minute=&#39;*/5&#39;, second=&#39;2&#39;)<br />
&nbsp; job3 = sched.add_cron_job(wrt_data_daily, hour=&#39;23&#39;, minute=&#39;59&#39;, second=&#39;52&#39;)<br />
&nbsp; job4 = sched.add_cron_job(wrt_monthly_separator, day=&#39;1&#39;, hour=&#39;0&#39;, minute=&#39;0&#39;, second=&#39;1&#39;)</address>
<address>&nbsp;</address>
<address># At the end of your python script you run a loop, like this:</address>
<address>&nbsp; while True:<br />
&nbsp;&nbsp;&nbsp; sleep(2)</address>
<address>if __name__ == &quot;__main__&quot;:<br />
&nbsp; main()<br />
-----------------------------------------------------------------</address>
<p>The &quot;job stack&quot; is an excerpt from my script:<br />
Job 1 reads my modbus meter every 5 seconds.<br />
Job 2 sends the data to PVOutput.org every 5 minutes (plus 2 secs to avoid collision w/Job 1)<br />
Job 3 writes data to a log daily at 23:59:52<br />
Job 4 writes text to the daily log file on the 1st of every month</p>
<p>&nbsp;</p>
<p>This page details the cron-style scheduling syntax:<br />
<a href="http://apscheduler.readthedocs.org/en/v2.1.2/cronschedule.html">http://apscheduler.readthedocs.org/en/v2.1.2/cronschedule.html </a></p>
<p>I&#39;ve attached v2.1.2 for your perusal.</p>
<p>Version 3 is available, but I stayed with v2 as v3 is quite a bit more complicated, and I wanted as simple a solution as I could get. I installed it via pip, but the docs say easy-install should work too.</p>
<p>Regards,</p>
<p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33769"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3947.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bdhughes&#039;s picture" title="bdhughes&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi - Sending packets to emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/3947.html" title="View user profile.">bdhughes</a> on Tue, 01/09/2015 - 14:41.</div>
    <div class="content">
     <p>I tried to edit my post to delete that image I had as it was appearing upside down. The whole post has disappeared but perhaps it&#39;s gone for moderation. In any case here&#39;s the corrected photo.</p>
<p><img alt="" src="../sites/default/files/emonglcd.png" /></p>
<p><em>Edit - corrected inverted photo - BT</em></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33790"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi - Sending packets to emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 02/09/2015 - 00:53.</div>
    <div class="content">
     <p>Brian - Thank you for the info, the image and the code. &nbsp;I&rsquo;ve been reading through the code and it definitely answered some of my questions. &nbsp;And it generated a few more questions!</p>
<p>It looks like:<br />
- &nbsp;SolarPVBHCar.ino runs on the emonGLCD (with icons.ino &amp; templates.ino)<br />
- &nbsp;senddata.py runs on the garage emonPi (as in your note)<br />
- &nbsp;sockserver.py is responsible for sending data to the emonglcd via the line:&nbsp;<br />
&nbsp;&nbsp; &nbsp;requests.post(&#39;http://192.168.50.88/emoncms/nodes/1/tx/values?apikey=xxxxxxxxxxxxx&#39;,data=newdata,headers={&quot;content-type&quot;: &quot;text/plain&rdquo;})&nbsp;</p>
<p>
Does sockserver.py run on the garage emonPi? &nbsp;Or the other emonPi? &nbsp;I&rsquo;m not familiar with sockets or how this .PY works, but I will figure it out.</p>
<p>As far as a location to trade data, you could always create your own file (log file?) in the /var/log directory. &nbsp;Just remember that new trade file will be disappear if/when the emonPi resets (senddata.py line 23). &nbsp;There is probably a better way that someone else could suggest.</p>
<p>Jon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33795"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi - Sending packets to emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 02/09/2015 - 03:26.</div>
    <div class="content">
     <p>Brian - In the emonhub.conf&nbsp;area of the emonPi,&nbsp;does the emonGLCD need to be configured as your Node 20? &nbsp;Like something similar to this??</p>
<blockquote><p>##########################################################<br />
####################### &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Nodes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#######################<br />
##########################################################</p>
<p>[nodes]</p>
<p>[[20]]<br />
&nbsp; &nbsp; nodename = emonGLCD<br />
&nbsp; &nbsp; firmware = ....</p>
</blockquote>
<p>Jon</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33804"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3947.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bdhughes&#039;s picture" title="bdhughes&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi - Sending packets to emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/3947.html" title="View user profile.">bdhughes</a> on Wed, 02/09/2015 - 10:47.</div>
    <div class="content">
     <p>Jon</p>
<p>sockserver.py runs on the emonPi in the house. It&#39;s receiving the solar &amp; car charging info and then broadcasting it to the emonGLCD.</p>
<p>Brian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33805"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3947.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bdhughes&#039;s picture" title="bdhughes&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi - Sending packets to emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/3947.html" title="View user profile.">bdhughes</a> on Wed, 02/09/2015 - 11:01.</div>
    <div class="content">
     <p>Jon</p>
<p>I didn&#39;t need to configure the emonGLCDs&nbsp;(I actually have 2 of them Node 20 &amp; Node 21)&nbsp;in EmonHub. When I did I wasn&#39;t able to collect the temperature data they send out. I found that if I just commented them out they popped up in the nodes anyway with their temperature readings (needing to be divided by 100).</p>
<p>Brian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11025"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-26bkpJ0MFGSBdI8SdXPxnn6MzArtHrZefBpFQA3aIbk" value="form-26bkpJ0MFGSBdI8SdXPxnn6MzArtHrZefBpFQA3aIbk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
