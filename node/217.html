<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/217 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:02:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Solar Power Manager | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
          <span class="submitted"></span>
      <div class="taxonomy"></div>
      <div class="content"><p>&nbsp;I have used the 2 channel non invasive sketch, to build a device which monitors how much power is being used in the home, and how much &nbsp;power is being generated by the solar panels. If I am generating more than I am currently using, then the excess power is diverted to an immersion heater - to heat domestic hot water. This is a better option than it flowing back to the grid for which I don't get paid (solar renta roof).</p>
<p>This was a steep learning curve as I have never worked with a microprocessor before, but great fun and a great sense of acheivement when it actually works!</p>
<p><img alt="PCB" width="600" height="401" src="http://error404.000webhost.com/?" /></p>
<p>The first version was built on a Arduino Uno board, with the input components mounted on veroboard, but then I decided to build it as a standalone, with everything on one board.<br />
The LCD is reclaimed from an old alarm keypad, and I had a USB panel socket laying about so I used that for the 4 CT input connections. (did I mention that I am a Yorkshireman...)</p>
<p>As the peak solar &nbsp;power generation is 3.5kw, I used a shunt resistor to range up to 5kw, but fitted clamping &nbsp;diodes (Glyn's idea - see forum) to ensure that the mains usage did not exceed 5kw and damage the Atmega chip.</p>
<p><img alt="fitted in box" width="600" height="439" src="http://error404.000webhost.com/?" /><br />
&nbsp;</p>
<p>With a bit of sawing and hacking, managed to fit the PCB into a Maplins project box.</p>
<p><img alt="power readings" width="600" height="386" src="http://error404.000webhost.com/?" /></p>
<p>Here you can see the power results, which if less than 1kw displays in watts, otherwise kw's.</p>
<p>The tiny LED is multi function and indicates;</p>
<p>1) flashing every 4 seconds - indicates that the unit is functioning, but not enough solar power to activate either relay.<br />
2) steady but lit 25% - indicates that 500w is being unused, and activates relay 1, with a diode in series to limit the load to 500w (yes it does work, I've done the sums on the leccy meter!)<br />
3) steady but lit brightly - indicates that in excess of 1kw is being unused, switches off relay 1 and activates relay 2 which delivers a full kw (which is the rating of the immersion heater).</p>
<p>The button is a menu navigator, and switches between displays (copied from another project).</p>
<p><img alt="kwh" width="600" height="399" src="http://error404.000webhost.com/?" /><br />
&nbsp;</p>
<p>This display shows how much power is generated within a 24hr period, before resetting back to zero at midnight. There is no external timing here, just a simple millis() counter which resets every 24hrs. On startup, the counter resets after 12hrs for one occassion ( so if it's powered up at midday, it will &nbsp;reset at midnight and every midnight thereafter.</p>
<p><img width="600" height="399" alt="" src="http://error404.000webhost.com/?" /></p>
<p>This display shows voltage and power factor, which of course is needed for calibration purposes.<br />
To calibrate it, I took the readings from the LCD, removed the chip and wrote the new sketch via a Arduino Uno board, before replacing it in the standalone.</p>
<p>The sketch is posted <a href="http://bit.ly/p0QhTE">here</a>&nbsp;, please feel free to make any suggestions or create a new version of the paste in pastebin., and although a new guy to Arduino's/programming, if I can help, please email me at (the last word in bold in this post) <strong>@gmail.com</strong></p>
<p>Sketch has also been uploaded to OpenEnergyMonitor. Download it <a href="../sites/default/files/SolarEnergyMonitor.html">here</a></p>
<h2>...UPDATE 7th Sept</h2>
<p>Following Glyn's advice (in comments below) I have built a Nanode, and have connected both units via their Rx/Tx serial bus, and use a simple Serial.print statement in the above device, to be decoded in the Nanode by the CmdMessenger library.</p>
<p>Data is then <a href="http://bit.ly/nADmAo">uploaded to Pachube</a> every 20seconds by the Nanode, provided that the data values have changed.</p>
<p>&nbsp;</p>
<p>Many thanks to Trystan &amp; Glyn</p>
<p><strong>yorkshirepudn</strong></p>
<p>Please post any comments and questions about the Solar PV Manager system to the <a href="../forum.html">forums</a></p>
<p>&nbsp;</p>
</div>
    
    
      </div>
<div id="comments">
  <a id="comment-3083"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="weener50&#039;s picture" title="weener50&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by weener50 (not verified) on Thu, 09/02/2012 - 16:27.</div>
    <div class="content">
     <p>&nbsp;HI</p>
<p>&nbsp;</p>
<p>Am new here so please go gentle.</p>
<p>&nbsp;</p>
<p>Im know basics about electronics and have also recently had pv solar installed. After spending hours now reading up on the interenet have come across this idea which is &quot;exactly&quot; what i would love to build.</p>
<p>I have some experiance with picaxe, but not sure about arduino boards etc.</p>
<p>&nbsp;</p>
<p>Is there a board layout with step/step instructions on how to build as I could assemble this in college this week.</p>
<p>&nbsp;</p>
<p>Im lost reading through the comments above, is there a way to attach as ct sensor (voltage) to the solar feed in lead, then attach this to a arduino board or build a scimilar board with a Picaxe chip then use the relevant programmed information to activate a switch (ie relay/contactor) to turn on the immersion?</p>
<p>Again, not sure how this would work as obviously the immersion requires 240v etc so would guess the switching device would need to be something which would handle high current with a low voltage trigger?</p>
<p>As I say, the above is ideal and it looks like some people have managed to build it.....HOW?</p>
<p>&nbsp;</p>
<p>Thanks in advance and excuse the spelling mistakes, type to fast sometimes..</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-3087"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 09/02/2012 - 19:59.</div>
    <div class="content">
     <p>&nbsp;I think that you probably need to familiarize yourself with the Arduino board itself first, and then spend some time reading the openenergymonitor project pages (rather than the forum). Once you have a good understanding of both, I am sure that it will become clearer.</p>
<p>This was my first arduino project too, and I had no programming experience whatsoever, but I found that investing time in reading this site, and learning from Trystan &amp; Glyn's experience, was time well spent.</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
</div><a id="comment-2440"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="eof&#039;s picture" title="eof&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by eof (not verified) on Fri, 09/12/2011 - 15:03.</div>
    <div class="content">
     <p>This bulletin board is hopeless - if you try to reply to a thread it gives you a blank subject line, which should be left blank or you will start a new thread!&nbsp; And you can't delete posts, only edit them!!</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-2443"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Mr. Sharkey&#039;s picture" title="Mr. Sharkey&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by Mr. Sharkey (not verified) on Fri, 09/12/2011 - 16:08.</div>
    <div class="content">
     <p>The forum module in Drupal is a poor excuse for real, threaded forum software, and is an unfortunate choice for an active, growing community such as this. Since it's what the administrators have settled on, we'll just have to deal with it.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
</div><a id="comment-2438"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="HK&#039;s picture" title="HK&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by HK (not verified) on Fri, 09/12/2011 - 14:48.</div>
    <div class="content">
     <p>What actual meter do you have?</p>
<p>Is it a modern digital meter? - My understanding is that it would take account of the maximum current drawn. So at the peak of the 1/2 cycle the meter would measure a load of 1 kW even with the diode in place. Thus is if you were generating 1/2 kW more than you were using, the meter would acutally register a complete 1/2 cycle of 1/2 kW from the grid even with the diode in place. </p>
<p>Thanks</p>
<p>Henry</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-2441"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="eof&#039;s picture" title="eof&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by eof (not verified) on Fri, 09/12/2011 - 15:00.</div>
    <div class="content">
     <p>Both rotating disc domestic meters and their electronic replacements  (which are designed to ape them)&nbsp;measure true RMS watts, so however you  distort the current waveform they will still accurately record the power  consumed.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-2442"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="HK&#039;s picture" title="HK&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by HK (not verified) on Fri, 09/12/2011 - 15:50.</div>
    <div class="content">
     <p>Using a rectified feed to the immersion heater means it will draw a peak current of roughly 4 Amps compared to the peak current of 2 Amps being generated by the PV excess energy.</p>
<p>However this means that at the peak, 2 Amps is being drawn from the grid and hence will be charged for by a modern digital meter which calculates instantaneous power compared to an old mechanical meter which averaged the consumption.</p>
<p>If I am right, this will mean that when the unit is showing a saving of 500W, you will actually be charged the same amount by the grid supplier if you are on a modern digital meter!</p>
<p>Can you convince me that I&nbsp;am wrong?</p>
<p>Thanks</p>
<p>Henry</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-2444"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="eof&#039;s picture" title="eof&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by eof (not verified) on Fri, 09/12/2011 - 16:22.</div>
    <div class="content">
     <p>Analogue meters also measure instantaneous power; they just don't usually have a back-stop to prevent them counting down if the net power flow is into the grid.&nbsp; Provided that the net power flow is out of the grid, analogue and digital meters should give the same result.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-2446"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Mr. Sharkey&#039;s picture" title="Mr. Sharkey&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by Mr. Sharkey (not verified) on Fri, 09/12/2011 - 17:17.</div>
    <div class="content">
     <p>Something to remember about electronic utility watthour meters is that most, <i>unless programmed otherwise</i>, will continue to increment the consumption reading when PV production power is fed back to the grid. Although the meter can tell which direction the current is flowing, it happily considers both to be consumption. This effectively increases your bill from the utility by the amount fed back to the grid. Beware!</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-2447"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Solar Power Manager</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 09/12/2011 - 20:40.</div>
    <div class="content">
     <p>&nbsp;Henry, heres my last post on the subject of diodes.... &nbsp; three points to consider,</p>
<p>1) Modern digital meters take instantaneous samples hundreds of times per mains cycle, the results are filtered to prevent spurious readings and then the 'real' power is calculated in the onboard microprocessor, which averages the readings over at least one full mains cycle, and in many cases over many cycles, depending how the firmware has been programmed (different suppliers). This is necessary to accomodate reactive loads and give a fairer representation of the 'overall' power consumption. DYOR - check the technical sheets for the meters for more info.</p>
<p>2) During the commissioning of my system, I rigorously checked how the reading compared with the calibrated generation &amp; usage meters, and my 1kW immersion heater recorded exactly half load on the house mains meter for 1 hours' usage (with the diode in series). This was calculated using a opto reader on the meter flashing LED. 1 flash = 1Wh. So the theory is backed up by practice.</p>
<p>3) The diode cost me 79 pence from Maplins. Do you really think that a Yorkshireman would spend this amount of money without a 100% guarantee that it would work??</p>
<p>&nbsp;</p>
<p>Mr Sharkey, good point, Siemens S2AS-100/200 meters are notorious for this. I had to get mine changed, but got generously reimbursed by EDF.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
</div></div></div></div></div><div class="item-list"><ul class="pager"><li class="pager-current first">1</li>
<li class="pager-item"><a href="2172679.html?page=1" title="Go to page 2" class="active">2</a></li>
<li class="pager-item"><a href="2174658.html?page=2" title="Go to page 3" class="active">3</a></li>
<li class="pager-item"><a href="2179ba9.html?page=3" title="Go to page 4" class="active">4</a></li>
<li class="pager-next"><a href="2172679.html?page=1" title="Go to next page" class="active">next ›</a></li>
<li class="pager-last last"><a href="2179ba9.html?page=3" title="Go to last page" class="active">last »</a></li>
</ul></div></div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/217 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:02:57 GMT -->
</html>
