<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12498 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:16:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Settings exposed on &quot;MyElectric&quot; when using the read apikey | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Settings exposed on &quot;MyElectric&quot; when using the read apikey</h3>
        <span class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 11/04/2016 - 17:28</span>
        <div class="content"><p>Is it possible to add some sort of &quot;only if write&nbsp;api used&quot; condition to the MyElectric&nbsp;settings button?</p>
<p>I have started sending out links to MyElectric&nbsp;to interested parties that require view only access to basic data but I have noticed the settings are accessible despite not using the write apikey. &nbsp;other feeds can be selected and whilst the new settings are not saved so cannot do any lasting damage they are raising many questions and personally&nbsp;I think they should be inaccessible unless logged in as it basically means if you have read access to MyElectric&nbsp;a&nbsp;user&nbsp;can&nbsp;access pretty much&nbsp;any feed data.</p>
<p>Paul</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12523.html" class="topic-previous" title="Go to previous forum topic">‹ Can the emon website send data to an arduino or control it?</a>
              <a href="12503.html" class="topic-next" title="Go to next forum topic">EmonTH w/Multiple external DS18B20 AND DS18B20 in DHT22 socket Sketch ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-41081"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Settings exposed on "MyElectric" when using the read apikey</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 11/04/2016 - 20:35.</div>
    <div class="content">
     <p>Hello Paul, on emoncms.org the read apikey is used for the app access, but yes once you share your readkey the user has read access to all the other read accessible api&#39;s such as</p>
<p><a href="https://emoncms.org/feed/list.json?apikey=" title="https://emoncms.org/feed/list.json?apikey=">https://emoncms.org/feed/list.json?apikey=</a></p>
<p>The use of the read key for the app module wasnt really designed for dashboard sharing, more to provide easy personal access to the apps from a browser bookmark.</p>
<p>A solution might be to use the public/private feed designation in a similar way to how its done in the dashboards but doing this would need quite a bit of development I think. Perhaps a good thing to look at as the app module develops.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41082"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Settings exposed on "MyElectric" when using the read apikey</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 11/04/2016 - 20:48.</div>
    <div class="content">
     <p>Hi Trystan, I hear what you&#39;re saying and agree. The read key is not intended to be a security feature, but as it is, with an account with no public feeds and no published dashboards, i.e. no exposed data even to those holding a read key. any and almost all feeds are accessible&nbsp;by clicking the myelectric settings button and picking any non-public feed to view. I consider this a huge hole in the security. Since I have nothing to hide, this isn&#39;t my concern. More that the ability to select feeds is available, causing confusion and then not being able to save those settings, is causing further confusion. It makes the web app look like it is faulty or unfinished.</p>
<p>If the button didn&#39;t work unless logged in, the issue would be resolved.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41084"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Settings exposed on "MyElectric" when using the read apikey</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 11/04/2016 - 21:48.</div>
    <div class="content">
     <p>I see what your saying, i will hide the ability to change the settings.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41104"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Settings exposed on "MyElectric" when using the read apikey</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 12/04/2016 - 16:19.</div>
    <div class="content">
     <p>I&#39;ve sorted this in the new version of the app module, the configuration icon is hidden if the session is not a write session: <a href="12502.html" title="https://openenergymonitor.org/emon/node/12502">https://openenergymonitor.org/emon/node/12502</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41226"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Settings exposed on "MyElectric" when using the read apikey</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 18/04/2016 - 10:38.</div>
    <div class="content">
     <p>Thanks Trystan, the &quot;readkey&quot; now functions as I would expect for viewing the MyElectric app only.</p>
<p>However using the read only apikey&nbsp;has some unexpected behavior. It exposes the dashboards&nbsp;menu but not the apps menu, it also shows the link bar as populated with the published dashboards, but any navigation just results in reaching the log-in screen.</p>
<p>Personally I would expect either all of the links to be hidden as per the readkey or for a better&nbsp;&quot;readonly&quot; session&nbsp;only the published links on the navbar to be seen without exposing the dashboard menu that in turn shows unpublished dasboard&nbsp;links and for all shown links&nbsp;to function &quot;read-only&quot;&nbsp;without logging in, I would also expect to see the apps menu to be able to switch between the apps without typing or using bookmarks.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41232"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Settings exposed on "MyElectric" when using the read apikey</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 18/04/2016 - 14:35.</div>
    <div class="content">
     <p>I see what your saying, there&#39;s a problem here that if you use either the read or write apikey in the URL in this way any links that go off the page that then do not also contain the apikey&#39;s will not work - they will just return you to the login page.</p>
<p>But there is no current way within emoncms modules to distinguish between apikey authentication and session authentication as its abstracted earlier in the chain.</p>
<p>I could restrict the read apikey case so that at least in that instance the menu wouldn&#39;t show, but cant restrict the write authentication case as then the menu would not show if logged in normally - that is without introducing a session type property to the session object in emoncms..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41235"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Settings exposed on "MyElectric" when using the read apikey</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 18/04/2016 - 14:56.</div>
    <div class="content">
     <p>Okay, I see how that works now.</p>
<p>IMO it would be better if non-functional stuff isn&#39;t shown in read-only mode, it&#39;s tidier and raises fewer questions from users who have a link to a single page. I can&#39;t think of any other time the read apikey is used for navigating other than within the url&#39;s of specific pages, if they cannot navigate to other read-only pages then there would seem no point showing the links.</p>
<p>If we want to make other pages available in read-only mode from the same url it is easily done by adding some&nbsp;hyperlinks containing the read apikey to navigate, it would be clearer to the user if there were no tempting but non-functional menu or navbar links to draw their attention. The hyperlinks read apikeys would then be naturally overridden&nbsp;during a&nbsp;logged in session.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12498"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-fCdPb9UMi1GOT5lekTLhdt3O_yZth1WBNQNRG1x2kzA" value="form-fCdPb9UMi1GOT5lekTLhdt3O_yZth1WBNQNRG1x2kzA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
