<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12004 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:15:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Feeds stop updating | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Feeds stop updating</h3>
        <span class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 15/01/2016 - 21:27</span>
        <div class="content"><p>My emoncms&nbsp;feeds&nbsp;stopped again at 04:28:20 this morning, and the only feeds continuing to update since, are 33 &amp; 34 which are fed to emoncms via MQTT&nbsp;on node 30.</p>
<p>I&#39;ve attached a shortened emoncms.txt, and also emonhub.txt (both logfiles), but I can&#39;t see anything obvious.<br />
Wondering if this is a hardware issue...</p>
<p><img alt="" src="../sites/default/files/lastupdate_0.png" style="width: 400px; height: 371px;" /></p>
<p>It&#39;s a 868mHz&nbsp;RFM69Pi&nbsp;board that&#39;s fitted (purchased Aug 2015), and by changing emonhub to log in DEBUG, and a emonhub restart, I can see that it is starting OK at the correct 38400 baud rate, and no errors, despite the feeds still not updating &amp; no other activity shown in the log.<br />
There are 3 separate RF modules feeding the RFM12Pi, two of them are within 4mtrs&nbsp;of the pi with good signal strength.</p>
<p>2016-01-15 09:58:38,418 INFO Opening hub...<br />
2016-01-15 09:58:38,419 INFO Logging level set to DEBUG<br />
2016-01-15 09:58:38,419 INFO Creating EmonHubEmoncmsReporter &#39;emonCMS&#39;<br />
2016-01-15 09:58:38,421 INFO Set up reporter &#39;emonCMS&#39; (buffer: memory | size: 1000)<br />
2016-01-15 09:58:38,422 INFO Setting emonCMS url:&nbsp;http://localhost/emoncms<br />
2016-01-15 09:58:38,423 INFO Setting emonCMS apikey: set<br />
2016-01-15 09:58:38,423 INFO Creating EmonHubJeeInterfacer &#39;RFM2Pi&#39;<br />
2016-01-15 09:58:38,425 DEBUG Opening serial port: /dev/ttyAMA0 @ 38400 bits/s<br />
2016-01-15 09:58:42,433 INFO RFM2Pi device firmware version: [RF12demo.12]<br />
2016-01-15 09:58:42,435 INFO RFM2Pi device current settings: &nbsp;O i15 g210 @ 868 MHz q1</p>
<p>I can only get the feeds back working again by a reboot, and despite a few early warning messages in the &#39;emonhub log after reboot.txt&#39; it soon settles down and everything&#39;s&nbsp;fine.</p>
<p>I&#39;ve just stripped down the pi, and checked for any obvious soldering issues on the RFM69Pi board, and re-attached it.</p>
<p>Paul</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12572.html" class="topic-previous" title="Go to previous forum topic">‹ Daily kWh/d not resetting (Power to kWh/d)</a>
              <a href="1535.html" class="topic-next" title="Go to next forum topic">Solar PV power diversion with emonTx, emonGLCD and temperature measurement ›</a>
      </div>
</div>
      </div>
    
      </div>
<div id="comments">
  <a id="comment-38313"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 15/01/2016 - 22:42.</div>
    <div class="content">
     <p>You are right there isn&#39;t really anything in the logs to highlight an issue. Leaving emonhub&nbsp;loglevel at DEBUG rather than WARNING&nbsp;will give you the best insight into what happened, since there are no warnings in emonhub.log I suspect the data stopped coming in from the serial port, whether that is a hardware, firmware or serial port issue in Jessie I wouldn&#39;t like to say. It&#39;s unlikely (but not impossible) to be emonhub as there should be a warning logged if it couldn&#39;t read the serial&nbsp;port.</p>
<p>Am I right in thinking all but node 30 are remote &quot;RFM&quot; modules and all but node 30 stopped updating?</p>
<p>When you say reboot do you mean a soft restart (sudo reboot or sudo&nbsp;shutdown -r now)&nbsp;or a full power cycle?</p>
<p>Dit you notice any led flashing on the rfm2pi when no data was being received?</p>
<p>See the (rather long) <a href="5549.html">&quot;RFM12PI receiver goes hard down sometimes&quot;</a>&nbsp;thread, it is predominantly about the rfm2pi &quot;locking up&quot; where it stops passing data and only a reboot&nbsp;will &quot;restart it&quot;, The reason there is the power cycle resets the rfm2pi. Towards the end there are some posts that suggest the board is actually still working but it has forgotten it&#39;s group and so the data isn&#39;t considered valid and discarded, the reset, in this instance would revert things back to default and kick start things off again for most users.&nbsp;</p>
<p>There is a reset script I attached there too which can prove a point whether the data is &quot;kick&nbsp;started&quot; by the reset or the reboot.</p>
<p>I recommend installing the reset script and testing it works while you know everything is good and you can see the expected effect. if you tail emonhub.log in another ssh window you can see the rfm2pi start up text etc, there is no need to stop emonhub for resetting the rfm2pi.</p>
<p>If/when this reoccurs, first check the led then try setting another group in emonhub.conf, save, set it back to 210 again and save, observing this in the log&nbsp;this will prove that emonhub is&nbsp;still running correctly (responsive) and the serial port comms are still open. If reseting the frequency, group and baseid&nbsp;(if you change any one all of them will be checked and corrected automatically) doesn&#39;t get things going, use the reset script and see&nbsp;where that leaves you.</p>
<p>The rfm2pi firmware has been recompiled with the latest JeeLib&nbsp;revisions, it is in the repo prefixed with v13 (thats&nbsp;just an id it is v12+ really) but if you just proceed&nbsp;straight to a new firmware you will not know if it was definitely &nbsp;that and then whether it&#39;s fixed or not. the tests above should help locate the source of the issue and then if it is the rfm2pi at fault the firmware update&nbsp;can be done and monitored again.</p>
<p>It&#39;s a shame&nbsp;the events module isn&#39;t available!! can you set up a node-red event to notify you if no data arrives from the RFM nodes for a set time?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38316"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 15/01/2016 - 23:45.</div>
    <div class="content">
     <p><em>Am I right in thinking all but node 30 are remote &quot;RFM&quot; modules and all but node 30 stopped updating?</em><br />
Yes that&#39;s correct.</p>
<p><em>When you say reboot do you mean a soft restart (sudo reboot or sudo&nbsp;shutdown -r now)&nbsp;or a full power cycle?</em><br />
​sudo reboot - soft restart</p>
<p><em>Dit you notice any led flashing on the rfm2pi when no data was being received?</em><br />
I&#39;ll check next time!</p>
<p><em>can you set up a node-red event to notify you if no data arrives from the RFM nodes for a set time?</em><br />
Yes, I have that already, but at 04:28 it&#39;s well down my agenda!!</p>
<p>Thanks for the comprehensive&nbsp;&amp; helpful reply, I&#39;ll install the reset script tomorrow and see where that takes me.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38321"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 16/01/2016 - 20:23.</div>
    <div class="content">
     <p>Well the &quot;soft restart&quot; makes me a little less confident about the similarities to previous instances, however despite that&nbsp;I still think this is the most likely cause &nbsp;at this point and definitely still the best way to gather more intel on what&#39;s what.</p>
<p>The restarting of the Pi and therefore&nbsp;emonhub, without a power cycle&nbsp;reseting the rfm2pi&nbsp;would still correct any setting&#39;s anomalies as emonhub initially checks the returned &quot;current configuration&quot; from the rfm2pi and makes any changes if required.&nbsp;</p>
<p>Plus, everything discussed here and the other thread relates to Raspbian&nbsp;Wheezy&nbsp;so there may be subtle differences with&nbsp;Jessie. So if you could note whether you get a single&nbsp;longer LED flash on the rfm2pi at power-up, soft reboot of the Pi or&nbsp;restarting emonhub as well as when using the reset script that could help too if it&#39;s rfm2pi related.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38332"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 16/01/2016 - 20:54.</div>
    <div class="content">
     <p>Thanks Paul, as I have 2 Pi&#39;s running emoncms, I&#39;ve switched the RFM2Pi boards, as well as installing the reset&nbsp;script on both Pi&#39;s.</p>
<p>Both Pi&#39;s have run impeccably for the past 8hrs, but&nbsp;a watchdog will let me know if either pi stops updating it&#39;s feeds.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38336"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 16/01/2016 - 21:06.</div>
    <div class="content">
     <p>I&#39;m guessing you have switched the rfm2pi&#39;s over to see if the issue stays with the Pi or moves with the RFM2Pi.&nbsp;If the fault doesn&#39;t occur it maybe just a &quot;difference&quot; rather than a resolution, the rfm2pi&#39;s may have slightly different firmwares or the Pi&#39;s configured slightly different, are they both running Jessie? both fully updated? both the same model pi?&nbsp; As a&nbsp;faster processor or more ram may affect timings, as may a different software stack, etc.</p>
<p>Personally, I would&#39;ve been tempted to leave it as it was until I had more info, but I guess you can just as easily switch back if it resolves and you still wish to get to the bottom of it.&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38617"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 22/01/2016 - 13:13.</div>
    <div class="content">
     <p>Well it seems that the problem has moved with the RFM2Pi.<br />
The original Pi has continued to run OK with no interruptions, whilst the Pi fitted with the suspect RFM2Pi&nbsp;module has&nbsp;stopped twice since swapping it.</p>
<p>On each occasion&nbsp;there is no activity taking place in the emonhub log, and the RFM2Pi LED stops flashing.<br />
If I run the reset script, I get a longer LED flash initially, followed by the normal regular short flashes, and then the RFM2Pi module works normally.</p>
<p>The module was purchased Aug 2015, so I assume that the firmware would be reasonably up to date, but maybe it&#39;s worth trying upgrading the firmware first, but if it still persists I assume it has an intermittent hardware fault, and maybe needs replacing. (I&#39;ve checked for dry joints etc, and can&#39;t see anything obvious).</p>
<p>Paul</p>
<p>Edit - Firmware now updated</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38622"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 22/01/2016 - 14:03.</div>
    <div class="content">
     <p>Darn&#39;it! I wish I had seen your post before you updated, I would really liked to have known the &quot;current configuration&quot; to try and determine if that is the root cause.</p>
<p>I hope it is fixed with the update, please keep us informed. The other thread just went cold without any indication if updating the firmware cured it or users just gave up trying to fix it!!</p>
<p>Did you use the &quot;V13_....&quot; version?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38623"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 22/01/2016 - 14:07.</div>
    <div class="content">
     <p>I <a href="http://wiki.openenergymonitor.org/index.php/RFM69Pi_V3">used this guide</a> to update.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38624"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 22/01/2016 - 14:31.</div>
    <div class="content">
     <p>Well as far as I can tell that hex file was created 12months ago</p>
<p>The V13 i refer to was compiled 8mths ago using the &quot;updated jeelib&nbsp;libraries&quot; as Glyn&nbsp;had noticed an issue and that JeeLib had been updated so he recompiled for test.</p>
<p>However in july 15 (6 mths ago) I submitted a fix for a issue that caused the config to fail and inturn the rfm2pi to appear to fail. this doesn&#39;t appear to have been compiled, as far as I can tell.</p>
<p>There do seem to also be a &quot;pulse&quot; version (3mths ago)&nbsp;which does have the fix I submitted and also a &quot;DS18b20_pulse&quot; version (2mths old) which also has the fix.</p>
<p>So I guess the one that was valid when that wiki guide was written has not been kept upto date.</p>
<p>The V13 is technically the latest compiled version of V12.&nbsp;</p>
<p>The version you really want is not there (compiled)</p>
<p>you could try either of the later sketches, both should work but as they are development versions I cannot be sure.</p>
<p>I would probally&nbsp;(well in fact I usually do) compile my own but you could just use the command</p>
<p>
$ avrdude -v -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 38400 -U flash:w:<strong>V13_</strong>RFM69CW_RF12_Demo_ATmega328.cpp.hex</p>
<p>from the same folder, IF&nbsp;the other users saw a change you should too, else you should try a later version.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38638"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 22/01/2016 - 20:24.</div>
    <div class="content">
     <p>Thanks Paul, - V13 version now installed successfully, so lets see if it keeps running.....</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38907"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 30/01/2016 - 12:37.</div>
    <div class="content">
     <p>Erm.. no it doesn&#39;t!</p>
<p>It stopped a couple of days later and wouldn&#39;t restart with a reset or reboot this time, so I tried resoldering&nbsp;the joints on the RFM69&nbsp;&amp; the connector strip, refitted it, and it started working again.<br />
I then froze it with some freezer spray, and tapped it with a screwdriver and it continued to function OK.</p>
<p>...but since then it has stopped a further twice.</p>
<p>Unless anyone has any further suggestions, I&#39;ll assume it&#39;s a board fault and&nbsp;it&#39;s time to replace it.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38927"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 31/01/2016 - 12:22.</div>
    <div class="content">
     <p>I&#39;m guessing &quot;reset or reboot&quot; is trying the reset script and then a soft/warm reboot, but&nbsp;not a power cycle?</p>
<p>Removing the board for resoldering&nbsp;and refitting it is a very&nbsp;definite power cycle and it was most probably that action that got it moving rather than the resoldering as it has faulted again twice.</p>
<p>Each time I have tried the reset script it has worked no matter what, but there were some reports of the reset script not &quot;reseting&quot; in the other thread but there was not enough information to establish if the&nbsp;script needed tweaking or the device truly couldn&#39;t be reset or even if it was definitely &quot;not reseting&quot; as there was a question over expected led activity.</p>
<p>We also now have a change in symptoms since updating the firmware, previously the reset script worked and since the update it doesn&#39;t, perhaps a longer pulse may help but I&#39;m not sure of the link since the bootloader&nbsp;or physical components&nbsp;aren&#39;t changed. but a change is good as that may signify it&#39;s less likely to be hardware.</p>
<p>What I am trying to determine is <em>exactly</em> what is reviving the RFM2Pi&nbsp;and we are currently somewhere between a soft reset via the script and totally dismantling from the Pi. Next time it occurs could you try</p>
<p>1) try reset script</p>
<p>2) try soft reboot</p>
<p>3) physical reset of the RFM2Pi - unfortunately there is no reset button nor is there an exposed programming header to attach a couple of wires to, so unless you tack a couple of short tails to the topside of the 10 way&nbsp;gpio&nbsp;connector beforehand, you will need to resort to a paper clip or short piece of wire to ground the reset line (GPIO4) pin 7 of the Pi&#39;s connector, with the board still connected and the Pi powered to just give it a reset but not a power-cycle.</p>
<p>4) If it still non-responsive then remove and refit the RFM2Pi while the Pi is live - This will power cycle the RFM2Pi without powercycling the Pi at the same time. This is safe to do as long as you are careful about realigning the pins, only if the board goes back on the wrong pins is it likely to&nbsp;cause problems.</p>
<p>Obviously only try these steps if you are comfortable doing so, I have done these tests myself in the past whilst trying to diagnose or simulate various issues and have never had any problems.</p>
<p>Since the symptoms changed with the update&nbsp;I am <em>fairly</em> confident that we maybe able to resolve the issue, either by recompiling a new firmware with the later fix as I previously mentioned, by adding a watchdog perhaps and/or tuning the reset script so that even if the issue is a little deeper rooted in the firmware or even an occasional hardware glitch a watchdog&nbsp;in emonhub&nbsp;can reset the board.</p>
<p>Paul</p>
<p>Edit - I have just looked at the repo and discovered that V13 was compiled on 11th&nbsp;june and on the 13th&nbsp;of june&nbsp;there was a commit to <em><a href="https://github.com/openenergymonitor/RFM2Pi/commit/6f7654d583303e90b25d3b0b8b4d8b611167b959">&quot;add &#39;OK&#39; back in, add LED startup indicator with delay and invert LED function&quot;</a>&nbsp;</em>so there is a strong possibility that the V13 firmware does not provide a start up flash after a reset. How are you confirming it hasn&#39;t reset? just by the lack of a longer&nbsp;led flash or by other means too ?</p>
<p>I think will look at recompiling&nbsp;the firmware to a known standard so that we know where we are when I get a chance. In the mean time if you do get any more occurrences&nbsp;the confirmation steps above would be helpful but you will need to keep the emonhub log open rather than watch the led.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38970"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 02/02/2016 - 13:16.</div>
    <div class="content">
     <p>I have recompiled the existing (latest) rfm2pi sketch with the latest JeeLib and Arduino libs for you to try.</p>
<p>I have not made any major changes other than change the initial 1s LED flash to 5 rapid flashes lasting 1s (easier to spot a flashing led) and changed the default behaviour of the help text so that using &quot;h&quot; or &quot;?&quot; will give you the fll help text but any &quot;unknown&quot; commands will only result in a &quot;Invalid input - use &#39;h&#39;&nbsp;or &#39;?&#39;&nbsp;for help&quot; message which emonhub&nbsp;will (currently) discard behind the scenes as was originally intended.</p>
<p>The full help text is no longer printed at start up either.</p>
<p>I have loaded and briefly checked it works but since it is predominantly the same code, I don&#39;t expect any new issues and if it doesn&#39;t fix the one you have, then we can try adding some changes or a watchdog etc.</p>
<p>you can load it the same way as you used above just change the end of the avrdude command to point to this downloaded hex.</p>
<p>Please try the reset script again to be sure it works ok with this sketch, I see no reason it shouldn&#39;t but it&#39;s best to be sure before you try and use it in a fault condition.</p>
<p>Paul</p>
<p>PS For info - It&#39;s baud is 38400,&nbsp;it has RF69_COMPAT&nbsp;1 set for the rfm69 and&nbsp;it&#39;s defaults are baseid&nbsp;15, group 210 and freq 433 but emonhub should change it to 868 on start-up if set in emonhub.conf.&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38980"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 01/02/2016 - 20:29.</div>
    <div class="content">
     <p>Thanks Paul, I think that the update failed (see attached&nbsp;txt) - possibly due to your file&nbsp;being corrupted by being handled by Windows. (I just get a 1 second flash still after a reset).</p>
<p>Any chance of dropping it in your git account?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38996"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 13/02/2016 - 00:32.</div>
    <div class="content">
     <p>Oops try that!&nbsp;&nbsp;works for me using</p>
<address>wget&nbsp;http://openenergymonitor.org/emon/sites/default/files/rfm2pi.ino_.standard.hex_.txt&nbsp;-O rfm2pi.ino.standard.hex</address>
<p>avrdude -v -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 38400 -U flash:w:rfm2pi.ino.standard.hex</p>
<p>(stray underscores added by uploading to OEM and &quot;.txt&quot; removed by wget)</p>
<p>Paul</p>
<p>Grrrrrr! now the site is automatically cropping the full url to a shortened link​</p>
<p>I can&#39;t seem to get the full url to display in the post. I have updated the original file with non-windows line endings and to avoid them being added at the other end i use &nbsp; &nbsp;wget&nbsp;[oem url for the hex file]&nbsp;-O [original&nbsp;filename].</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-38997"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 01/02/2016 - 22:22.</div>
    <div class="content">
     <p>I still cannot get&nbsp;it to update - txt attached.</p>
<p>I get the same if I run as sudo.</p>
<p>Just tried a reset again, again got a 1 second LED blink.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39001"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 01/02/2016 - 22:42.</div>
    <div class="content">
     <p>How old is the &quot;autoreset&quot; script used by avrdude on your setup? the reset timing for avrdude&nbsp;v6.1 is now 0.3s where as the older v5.11 avrdude required a 0.12s reset timing.</p>
<p>see <a href="11747.html">&quot;Solved: avrdude-original: Using autoreset DTR on GPIO Pin 7&quot;</a></p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39019"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 02/02/2016 - 10:37.</div>
    <div class="content">
     <p>Paul,&nbsp;changing the autoreset script to v5.11 avrdude&nbsp;did the trick and the firmware update went ok without error.</p>
<p>However, the RFM2PI&nbsp;module started with 5 rapid flashes (as predicted) followed by a blink every 5 seconds or so which looked healthy, but am now getting a communication error;</p>
<p>pi@raspberrypi ~ $ tail -f /var/log/emonhub/emonhub.log<br />
2016-02-02 10:27:20,713 INFO Set up reporter &#39;emonCMS&#39; (buffer: memory | size: 1000)<br />
2016-02-02 10:27:20,720 INFO Setting emonCMS url: <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2016-02-02 10:27:20,722 INFO Setting emonCMS apikey: set<br />
2016-02-02 10:27:20,723 INFO Creating EmonHubJeeInterfacer &#39;RFM2Pi&#39;<br />
2016-02-02 10:27:20,725 DEBUG Opening serial port: /dev/ttyAMA0 @ 38400 bits/s<br />
2016-02-02 10:27:22,730 WARNING Device communication error - check settings<br />
2016-02-02 10:27:22,731 INFO Setting RFM2Pi frequency: 868 (8b)<br />
2016-02-02 10:28:02,836 INFO Setting RFM2Pi group: 210 (210g)<br />
2016-02-02 10:28:03,838 INFO Setting RFM2Pi quiet: 1 (1q)<br />
2016-02-02 10:28:04,841 INFO Setting RFM2Pi baseid: 15 (15i)</p>
<p>My settings in emonhub.conf are;</p>
<p># This interfacer manages the RFM2Pi module<br />
[[RFM2Pi]]<br />
&nbsp; &nbsp; Type = EmonHubJeeInterfacer<br />
&nbsp; &nbsp; [[[init_settings]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp; com_port = /dev/ttyAMA0<br />
&nbsp; &nbsp; &nbsp; &nbsp; com_baud = 38400<br />
&nbsp; &nbsp; [[[runtimesettings]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp; group = 210<br />
&nbsp; &nbsp; &nbsp; &nbsp; frequency = 868<br />
&nbsp; &nbsp; &nbsp; &nbsp; baseid = 15</p>
<p>&nbsp;</p>
<p>The RFM2Pi module is 868mhz&nbsp;and group/baseid look ok. Tried a &#39;reset&#39;, soft &amp; hard boot.</p>
<p>Paul</p>
<p>EDIT - &nbsp;Reverted back to stock firmware for now - and I&#39;m back working again</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39026"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 02/02/2016 - 13:40.</div>
    <div class="content">
     <p>I have just changed that file again (3rd time lucky???) turns out I had compiled&nbsp;it for a 16MHz&nbsp;board not a 8MHz&nbsp;board, it&#39;s my own&nbsp;fault as when I changed PC&#39;s last year&nbsp;and setup the new dev env with&nbsp;the new &gt;1.6.4&nbsp;Arduino&nbsp;IDE I didn&#39;t set up the odd-ball board that is the rfm2pi, instead I have just been using a 16MHz device to dev on. This has never presented an issue before as I do not normally deal with hex files as I compile each time. anyway enough excuses !!!</p>
<p>I have fully tested loading this to a standard 8MHz&nbsp;RFM2Pi&nbsp;via avrdude&nbsp;on a Pi&nbsp;(although I use v6.1 the link I gave results in a timing change and the use of v6.1 despite the original &quot;fix&quot; being to downgrade to v5.11), it works as originally intended, apologies&nbsp;for the hiccups!! I just hope it achieves something&nbsp;after all this !!! Something besides forcing me to do what I should of done sometime&nbsp;ago that is :-)</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39033"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 02/02/2016 - 14:46.</div>
    <div class="content">
     <p>Paul, Yes back working with your new compiled version, no errors in emonhub log&nbsp;and it flashes 5 times on a reset.</p>
<p>The first time I tried to install the revised file, I got errors again, but think that I had somehow downloaded the file which I tried before (server delay??) after a few minutes, I repeated the process and got your updated file.</p>
<p>All good now, I&#39;ll keep you updated how it goes.</p>
<p>Thanks</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39198"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8722.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="thejaq&#039;s picture" title="thejaq&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8722.html" title="View user profile.">thejaq</a> on Sun, 07/02/2016 - 18:01.</div>
    <div class="content">
     <p>I have very similar&nbsp;issue (noticed first in October) that began this thread:</p>
<ul>
<li>RFM69pi&nbsp;from Aug 2015 (433mhz)</li>
<li>Lose feed (with increasing regularity, from weeks of stability down to 6&nbsp;-&nbsp;20hr&nbsp;now)</li>
<li>RFM69pi&nbsp;goes dark (LED stops when feed stops)</li>
<li>Soft reset gets it going again&nbsp;(sudo&nbsp;reboot)</li>
</ul>
<p>I found the hard reset thread a few months back, but haven&#39;t done anything yet including try the reset script.&nbsp;I enabled debug mode and restarted the pi this morning.&nbsp;I will update with that log when the feed goes dark.</p>
<p>I have made no firmware or software updates to the system since configuring it&nbsp;(Sep 2015) so I am open to help find the root cause if that is still of interest.&nbsp;Otherwise, it looks like Paul may have had luck with this firmware update and I should update to that?</p>
<p>Thanks</p>
<p>Josh</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39199"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 07/02/2016 - 18:05.</div>
    <div class="content">
     <p>Mines still running fine with pb66&#39;s new firmware (5 days now) but probably too early to be conclusive... Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39216"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 08/02/2016 - 14:31.</div>
    <div class="content">
     <p>Way too early to be conclusive I feel :-)</p>
<p>Having said that I am quietly confident or maybe it&#39;s just hopeful optimism, who knows?</p>
<p>@Paul - thanks for trying this and for keeping us posted. I have suggested&nbsp;Simon (Bramco) tries&nbsp;it as he is <a href="12108.html">possibly having related troubles</a> but he isn&#39;t so keen, perhaps if your system continues without fault he will, so please keep us up to date, I have my fingers crossed as this issue has been around a while.</p>
<p>@Josh - if you are willing to try it then great, however there are no major changes to the firmware, just re-complied with the latest JeeLib and inclusion of a previous&nbsp;&quot;0i&quot;&nbsp;bugfix. I have tidied the help text prints to be more &quot;serial stream&nbsp;friendly&quot;&nbsp;but the intention here was more to ensure we are on a known version so that we can move forward with debugging&nbsp;any outstanding issues rather than suggest this will definitely fix anything directly,&nbsp;</p>
<p>As I see it there is nothing to lose as it is basically the same firmware so there are no major changes to break anything, but potentially it could give&nbsp;us a fix or at the very least a known status from which&nbsp;to achieve that.</p>
<p>let us know how you get on if you do.</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39229"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 08/02/2016 - 18:19.</div>
    <div class="content">
     <p>I thought it may be wise to point out in case anyone wishes to try this&nbsp;later firmware, that the hex file previously attached to this thread is <strong>for rfm2pi&#39;s&nbsp;&amp;&nbsp;rfm69pi&#39;s&nbsp;with&nbsp;RFM69&nbsp;modules fitted only!!</strong> although it may well upload to a RFM12b&nbsp;type device it will not run due to being compiled with &quot; #define&nbsp;RF69_compat&nbsp;1 &quot;&nbsp;set.&nbsp;</p>
<p>It is also compiled for 8MHz&nbsp;(internal clock) NOT for 16MHz&nbsp;(external xtal&nbsp;and caps) so it will not work on JeeLinks or the emonPi&nbsp;etc.&nbsp;If this bears any fruit we can look at updating the main repo and/or compiling for other devices.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39252"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Tue, 09/02/2016 - 04:14.</div>
    <div class="content">
     <p>Paul R -&nbsp;Would you be so kind to share your node-red event for monitoring RFM nodes?</p>
<blockquote><p><em>can you set up a node-red event to notify you if no data arrives from the RFM nodes for a set time?</em><br />
Yes, I have that already, but at 04:28 it&#39;s well down my agenda!!</p>
</blockquote>
<p>Details: Once every two or three weeks my two emonTHs&nbsp;drop out at the same time - no more data comes into the emonPi (those are the only two RFM devices I have). &nbsp;The LEDs on the&nbsp;emonTHs&nbsp;blink every minute. &nbsp;A&nbsp;JeeLink v3 receives data from the emonTHs. &nbsp;But the logs disappear/rotate before I notice there is a problem. The&nbsp;reset_rfm2pi&nbsp;script will make things work again. &nbsp;</p>
<p>I&#39;m hoping a node-red notification will help. &nbsp; &nbsp;</p>
<p>Jon</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39261"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 09/02/2016 - 09:23.</div>
    <div class="content">
     <p>Jon, flow attached in a txt file.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39281"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 09/02/2016 - 20:12.</div>
    <div class="content">
     <p>Bad news I&#39;m afraid Paul!</p>
<p>It stopped again a few minutes ago, inputs stopped updating and&nbsp;no LED activity.<br />
I ran the reset script, got 5 flashes and then everything returned to normal again, and continues running.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39283"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 09/02/2016 - 20:39.</div>
    <div class="content">
     <p>That&#39;s a shame!&nbsp;Anything in emonhub.log to help decide what to try next?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39285"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 09/02/2016 - 21:01.</div>
    <div class="content">
     <p>No nothing, I&#39;ve attached an extract, but just like before it gives very little away as to what the issue is.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39292"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 09/02/2016 - 23:12.</div>
    <div class="content">
     <p>I have just knocked up another little tool, it just uses the &quot;v&quot; command and prints the output so that the current configuration can be checked prior to resetting just to check if something is altering the group or freq&nbsp;so packets are no longer seen as valid.</p>
<p>It can be downloaded and made executable using</p>
<p>&nbsp; &nbsp;&nbsp;sudo wget <a href="../sites/default/files/rfm2pi_status.txt" title="http://openenergymonitor.org/emon/sites/default/files/rfm2pi_status.txt">http://openenergymonitor.org/emon/sites/default/files/rfm2pi_status.txt</a> -O /usr/bin/rfm2pi_status</p>
<address>&nbsp; &nbsp;&nbsp;sudo chmod&nbsp;+x&nbsp;/usr/bin/rfm2pi_status</address>
<p>after which it can be run with just &quot; rfm2pi_status &quot; and stopped with CTRL-C.</p>
<p>It is configured for the /dev/ttyAMA0 port and baud&nbsp;38400, (but both settings can be altered with a text editor eg nano). I have tested numerous times with emonhub&nbsp;running and it seems to be ok, it just blocks data going to emonhub whilst it is running and emonhub (v1.2) seems to carry on happily afterwards. Just be prepared to check and restart emonhub if needed, as the serial port isn&#39;t designed for multiple connections, but I&#39;m trying to &quot;butt in&quot; on the connection without resetting anything.</p>
<p>If you wouldn&#39;t mind running this before the reset_rfm2pi script it would be good, the response should tell us the current configuration unless it is locked up completely.</p>
<p>@Jon - You should try this on your emonPi too next time, although I haven&#39;t tested it on an emonPi&nbsp;myself yet, you will need to alter the com_baud to 115200 first though.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39296"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 10/02/2016 - 03:46.</div>
    <div class="content">
     <p>Paul B - I get the error below when running&nbsp;<strong>rfm2pi_status</strong> with&nbsp;com_port=&#39;/dev/ttyAMA0&#39; and&nbsp;com_baud=115200 on the emonPi. &nbsp;I don&#39;t know if the&nbsp;com_port of&nbsp;/dev/ttyAMA0&nbsp;is correct.</p>
<blockquote><p>pi@emonpi:/usr/bin$ rfm2pi_status<br />
Unable to access serial port - Exiting<br />
Traceback (most recent call last):<br />
&nbsp; File &quot;/usr/bin/rfm2pi_status&quot;, line 29, in &lt;module&gt;<br />
&nbsp; &nbsp; serial_line = ser.readline()<br />
NameError: name &#39;ser&#39; is not defined<br />
pi@emonpi:/usr/bin$&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<p><strong>EDIT: </strong>&nbsp;I think I got it. &nbsp;Baud is 38400 and script must be run with sudo&nbsp;to access the the serial port.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39307"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 10/02/2016 - 16:57.</div>
    <div class="content">
     <p>Sorry, yes you are right it is 38400 not 115200, I must&#39;ve been thinking of the&nbsp;upload baud when I wrote that, as I was&nbsp;working on an&nbsp;automated update program earlier this week.</p>
<p>The use of sudo isn&#39;t a bad idea, I tested the script installed to /home/pi by pi and then moved it&#39;s install location to /usr/bin to remove the&nbsp;need for a path, which required elevating&nbsp;wget&nbsp;with sudo so the owner becomes root. I&#39;m ok with that, but if you prefer you&nbsp;could use&nbsp;&quot;sudo chown&nbsp;pi:pi /usr/bin/rfm2pi_status&quot; to remove the need for &quot;sudo&quot;.</p>
<p>This is just a temporary tool to hopefully&nbsp;find some answers. I intend to include this functionality in emonhub&nbsp;as a watchdog, so that if no data is seen from the rfm2pi (emonPi?)&nbsp;for a defined period it will send a &quot;v&quot; if there is no valid response then pulse the reset&nbsp;line. If there is a valid response, then it should include the current configuration which can be checked against&nbsp;emonhub.conf for discrepancies and corrected if required.</p>
<p>Thanks for trying the script (and for highlighting the baud &amp;&nbsp;sudo&nbsp;errors), I hope it sheds some light on your issue.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39314"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 10/02/2016 - 20:35.</div>
    <div class="content">
     <p>Paul B - Same error after applying &quot;sudo chown&nbsp;pi:pi /usr/bin/rfm2pi_status&quot;. &nbsp;It&nbsp;runs fine&nbsp;with&nbsp;&quot;sudo&nbsp;rfm2pi_status&quot;.</p>
<blockquote><pre>
pi@emonpi:~$ rfm2pi_status
Unable to access serial port - Exiting
Traceback (most recent call last):
  File &quot;/usr/bin/rfm2pi_status1&quot;, line 29, in &lt;module&gt;
    serial_line = ser.readline()
NameError: name &#39;ser&#39; is not defined
pi@emonpi:~$ </pre></blockquote>
<p>Could it be the permissions or ownership for&nbsp;&quot;/dev/ttyAMA0&quot;??</p>
<blockquote><pre>
pi@emonpi:~$ ls -al /dev/tty*
crw--w---- 1 root tty       4,  8 Feb  9 12:21 /dev/tty8
crw--w---- 1 root tty       4,  9 Feb  9 12:21 /dev/tty9
crw-rw---- 1 root dialout 204, 64 Feb 10 00:05 /dev/ttyAMA0
crw------- 1 root root      5,  3 Feb  9 12:21 /dev/ttyprintk
pi@emonpi:~$ 
</pre></blockquote>
<p>sorry for dragging this thread in a different direction...</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39316"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 10/02/2016 - 21:12.</div>
    <div class="content">
     <p>Hi Jon - It could well be that user &quot;pi&quot; is already a member of the &quot;dialout&quot; group on the pi I was using. If it works with &quot;sudo&quot; then that&#39;s fine, lets stick with that&nbsp;it&#39;s only a temporary thing, long term the &quot;emonhub&quot; user is already in the &quot;dialout&quot;&nbsp;group, I was just looking for quick and easy here, and that appears to be using &quot;sudo&quot; rather than&nbsp;changing&nbsp;owners and group membership etc.</p>
<p>At this point&nbsp;we&nbsp;just to assess if the information it collects is useful, if so I can improve it then as&nbsp;it is quite rough.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39342"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Fri, 12/02/2016 - 11:32.</div>
    <div class="content">
     <p>Paul, there&#39;s a typo in your reply above from 01/02 where you give the wget command for fetching the latest file.</p>
<p>You have standa<em><strong>n</strong></em>d not standard in the url+file.</p>
<p>I&#39;m assuming this is still the correct method for getting and installing the new file as I can&#39;t see any other instructions further down the thread.</p>
<p>Simon</p>
<p>PS Putting the 69 onto the PiB seemed to work at first.... &nbsp;Then after a few days emonhub stopped receiving. Nothing in the log it just stopped dead. &nbsp;rfm69&nbsp;still flashing. I&#39;ll reflash the rfm69 and continue from there.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39362"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 13/02/2016 - 00:47.</div>
    <div class="content">
     <p>Thanks I&#39;ve corrected the typo,&nbsp;</p>
<p>Paul has had a fault occur so I&#39;m not convinced this firmware will be the final fix but it removes many unknowns and should be a step towards a fix.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39372"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Sat, 13/02/2016 - 09:08.</div>
    <div class="content">
     <p>Hi Paul, another quickie (I hope). What exactly has been changed in this version of the firmware?</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39517"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 18/02/2016 - 09:43.</div>
    <div class="content">
     <p>It stopped updating again at 5am this morning, no LED activity as before.</p>
<p>Ran the&nbsp;rfm2pi_status script&nbsp;and got;</p>
<pre>
pi@raspberrypi ~ $ sudo rfm2pi_status
Use CRTL-C to exit
&gt; 0v
[RFM2Pi v1.0 (rfm69)] O i15 g210 @ 868 MHz q1</pre><p>Nothing else appeared, no input data&nbsp;followed.<br />
After running the reset script, the LED began flashing, and running the rfm2pi_status script again resulted in;</p>
<pre>
pi@raspberrypi ~ $ sudo rfm2pi_status
Use CRTL-C to exit
&gt; 0v
[RFM2Pi v1.0 (rfm69)] O i15 g210 @ 868 MHz q1
OK 10 30 0 136 2 195 1 131 95 151 6 (-67)
OK 10 62 255 138 2 200 0 132 95 145 6 (-69)
OK 10 214 0 140 2 140 2 101 95 145 6 (-68)
OK 10 166 255 139 2 65 1 120 95 145 6 (-68)
etc, etc</pre><p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39570"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8722.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="thejaq&#039;s picture" title="thejaq&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8722.html" title="View user profile.">thejaq</a> on Sat, 20/02/2016 - 18:28.</div>
    <div class="content">
     <p>My rfm2pi finally died too last night (great run, ~12 days!)</p>
<p>1. emonhub.log just shows the last acknowledgement receipt&nbsp;</p>
<pre>
2016-02-19 21:35:31,479 DEBUG emonCMS acknowledged receipt with &#39;ok&#39; from http://emoncms.org</pre><p>2. rfm2pi_status output:</p>
<pre>
pi@raspberrypi ~ $ sudo rfm2pi_status
Use CRTL-C to exit
&gt; 0v
[RF12demo.12] O i15 g210 @ 433 MHz q1</pre><p>3. Confirmed the reset&nbsp;script works</p>
<p>4. rfm2pi_status (on working system):</p>
<pre>
pi@raspberrypi ~ $ sudo rfm2pi_status
Use CRTL-C to exit
&gt; 0v
[RF12demo.12] O i15 g210 @ 433 MHz q1
OK 10 181 6 0 0 0 0 5 0 200 46 182 0 172 0 195 0 93 0 0 0 0 0 0 0 0 0 144 2 (-38)</pre><p>5. Updated firmware to&nbsp;rfm2pi.ino.standard.hex</p>
<p>6. rfm2pi_status output&nbsp;(on updated working system):</p>
<pre>
pi@raspberrypi ~ $ rfm2pi_status
Use CRTL-C to exit
&gt; 0v
[RFM2Pi v1.0 (rfm69)] O i15 g210 @ 433 MHz q1
OK 10 55 7 0 0 0 0 126 0 74 47 177 0 173 0 190 0 101 0 0 0 0 0 0 0 0 0 145 2 (-37)</pre><p>Josh</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39592"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 21/02/2016 - 12:53.</div>
    <div class="content">
     <p>Sorry I haven&#39;t been around to comment this week,&nbsp;</p>
<p>Simon - The changes I have made are outlined in this thread, very little was changed at all and nothing that should effect the&nbsp;normal operation of the rfm2pi. As to what the potential differences are with existing firmware is anyones guess and the reason for recompiling to a known version.</p>
<p>Paul - always the trouble maker&nbsp;;-). Next time you use the &quot;rfm2pi_status&quot; script and it returns all ok, would you please try editing the command it used from a &quot;v&quot; to one of &quot;15i&quot;, &quot;210g&quot; or&nbsp;&quot;8b&quot; and run it again to see it anything gets &quot;jogged&quot;, my thinking hear is to confirm the RFM69&nbsp;module is still configured as the RFM2Pi is reporting, the RFM2Pi sketch isn&#39;t geared up to read the RFM69 module registers directly but if re-configuring the module to &quot;the same&quot; jogs it on then we may&nbsp;get somewhere, I believe any and all the node,group&nbsp;and freq&nbsp;config is done in one go so it shouldn&#39;t matter which you try but if you are feeling thorough you could try all three in turn.</p>
<p>Can you confirm if you are using a RFM2Pi v2 (aka RFM12Pi with rfm69)&nbsp;or v3 (aka RFM69Pi) (ie with or without the gpio&nbsp;breakout).</p>
<p>I had a quick look at the rfm69&nbsp;datasheet and the rfm&quot;pi schematics and it &quot;appears&quot; the v3, but not the v2 has the &quot;RESET&quot; of the rfm69 module connected to D2 of the AVR so it might&nbsp;be possible to write in a &quot;reset rfm module&quot; watchdog or command to the rfm2pi firmware, I will need to do a bit more research on this&nbsp;first, but if the resetting of the rfm69 is a valid test but it&#39;s not connected are you willing to use something like a 1k res to short a couple of&nbsp;rfm69 pins to momentarily pull-up the reset line, 100ms&nbsp;is the target which is just a &quot;touch&quot; give or take a few ms.</p>
<p>Since the rfm is quite voltage sensitive is there anything you can do to reduce the other consumption for a test period? eg swap supplies, run on a sdcard rather than hdd,&nbsp;remove a wifi dongle and plug in an Ethernet cable&nbsp;etc etc. both the Pi and the AVR are more robust to low voltage than the rfm module so a low voltage could result in a stuck rfm69&nbsp;whilst all else soldiers on.</p>
<p>Josh - glad you are using the firmware and tools, the more info we can collate on this the closer we might be to finding the root cause or a solution. 12 days is a long time to wait to see if something fails and even then you cannot be sure it will last much longer, that is what makes this issue so frustrating and imperative to resolve. Some users have gone for months without issues and then it hits again, whilst others never have an issue.</p>
<p>Looks like Simon may have reached 9 days <a href="12108.html">&quot;Emonpi image, RFM69PI images froze, rest of Emonhub MQTT inputs still ok&quot;</a>&nbsp;which compared to Paul&#39;s&nbsp;experience&nbsp;and Simons original issue sounds like progress but I am yet to be convinced :-)</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39617"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 21/02/2016 - 20:20.</div>
    <div class="content">
     <p><em>Can you confirm if you are using a RFM2Pi v2</em><br />
It&#39;s a V3&nbsp;RFM69Pi 868Mhz</p>
<p><em>​..are you willing to use something like a 1k res to short a couple of&nbsp;rfm69 pins</em><br />
Yes, no problem</p>
<p><em>...is there anything you can do to reduce the other consumption</em><br />
Well it&#39;s powered from a <a href="http://www.modmypi.com/raspberry-pi/accessories/usb-hubs/pihub-official-4-port-raspberry-pi-usb-hub-uk-plug-5v-3a">Pimoroni PiHub</a>&nbsp;which has a dedicated 1.1A output solely for the Pi. The power supply is rated at 3A and the only other hardware is a USB Drive. However, I can reconfig&nbsp;so that the Pi is powered from a standalone 2A power supply, leaving the PiHub&nbsp;just&nbsp;to supply the USB HDD.</p>
<p><em>...try editing the command it used</em><br />
Do you mean editing the rfm2pi_status script, for example;</p>
<pre>
ser.write(&#39;15i&#39;)</pre><p>...and running the script whilst the RFM2Pi is <strong>not </strong>in a fault condition.</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39620"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 21/02/2016 - 21:48.</div>
    <div class="content">
     <p>Sounds like the power side is covered, besides rereading the comments above, the issue switched from one setup to the other with the rfm2pi&nbsp;swap so that rules out the unswapped power power supply I guess.</p>
<p><em>&quot;ser.write(&#39;15i&#39;)&quot;</em></p>
<p>yes, that&#39;s it, a bit of a fiddle but the script wasn&#39;t written with this additional test in mind but it may prove helpful.</p>
<p><em>&quot;...and running the script whilst the RFM2Pi is&nbsp;not&nbsp;in a fault condition.&quot;</em></p>
<p>No, I actually meant whilst it was in a fault condition, BUT, since&nbsp;I haven&#39;t tested this use&nbsp;it maybe wise to test it with an actual change to test the theory is sound eg &quot;16i&quot; then back to &quot;15i&quot;. only to confirm the tool works whilst not in the fault condition&nbsp;first, and then&nbsp;when actually trying to &quot;jog&quot; the settings in a fault&nbsp;condition we want to just use the existing settings at this point.</p>
<p>Unfortunately the v3 requires a bit more homework before attempting a manual reset of the rfm as it&#39;s connected to the AVR&#39;s&nbsp;D2 and I do not know off hand what it&#39;s status is, so shoving 3v down it may not be wise. That being said it may be possible to add a &quot;rfm reset&quot; command option to the rfm2pi&nbsp;firmware for testing, I will look into this&nbsp;when I can, I had hoped to try a manual reset before changing the sketch, So if anyone is able to confirm if this could, should or would work on a RFM69Pi that would be a real help.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39784"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 25/02/2016 - 13:01.</div>
    <div class="content">
     <p>&nbsp;</p>
<p>I have just found one of my Pi&#39;s has stopped reporting and it is due&nbsp;to the rfm2pi&nbsp;&quot;stopped&quot;, although this rfm2pi (rfm69) is running the stock firmware as supplied&nbsp;I tried the rfm2pi_status checks as I suggested above, first without any changes (&quot;v&quot; command)</p>
<div>pi@mediaPi ~ $ sudo rfm2pi_status<br />
Use CRTL-C to exit<br />
&gt; 0v<br />
[RF12demo.12] O i15 g210 @ 433 MHz q1<br />
^C</div>
<div>&nbsp;</div>
<div>The rfm2pi&nbsp;responded with the correct configuration but no data followed, this tells us the rfm2pi is responsive but not processing any packets. I edited the script and changed the command to &quot;15i&quot; and rerun to force a re-configuration of the rfm module</div>
<div>&nbsp;</div>
<div>pi@mediaPi ~ $ sudo nano /usr/bin/rfm2pi_status<br />
pi@mediaPi ~ $ sudo rfm2pi_status<br />
Use CRTL-C to exit<br />
&gt; 15i<br />
O i15 g210 @ 433 MHz q1<br />
^C</div>
<div>&nbsp;</div>
<div>Only the configuration was returned (not the version) this means the command has responded differently although there was no change to the displayed configuration or to the lack of data.</div>
<div>&nbsp;</div>
<div>Now the interesting bit, I tried this again with the command edited to&nbsp;&quot;210g&quot;&nbsp;</div>
<div>&nbsp;</div>
<div>pi@mediaPi ~ $ sudo nano /usr/bin/rfm2pi_status<br />
pi@mediaPi ~ $ sudo rfm2pi_status<br />
Use CRTL-C to exit<br />
&gt; 210g<br />
O i15 g210 @ 433 MHz q1<br />
OK 10 102 93 183 244 123 12 0 0 119 2 (-60)<br />
OK 10 112 93 196 244 109 12 0 0 119 2 (-57)<br />
OK 10 112 93 173 244 132 12 0 0 119 2 (-56)<br />
OK 10 6 93 209 0 74 12 0 0 119 2 (-57)<br />
OK 10 36 93 83 255 159 9 0 0 119 2 (-67)<br />
OK 10 47 93 154 255 6 8 0 0 125 2 (-57)<br />
OK 10 42 93 189 0 172 4 0 0 125 2 (-57)<br />
OK 19 172 0 0 0 90 1 27 0 (-44)<br />
OK 10 53 93 21 0 48 3 0 0 119 2 (-56)<br />
OK 10 38 93 176 0 253 3 0 0 119 2 (-56)<br />
OK 20 211 0 0 0 85 1 26 0 (-56)<br />
OK 10 25 93 166 255 89 3 0 0 119 2 (-56)<br />
^C</div>
<div>
I was expecting the same result BUT although the configuration appears to not have been changed, the data did start to flow. Since both the &quot;15i&quot; and the &quot;210g&quot; will cause a reconfiguration of the rfm (whether the settings are the same or not) I suspect this action isn&#39;t the reason resetting the group did work, perhaps it is related to the crc checking as the group is used where as&nbsp;the node isn&#39;t ????</p>
<p>Unfortunately, this device didn&#39;t have the &quot;test&quot; firmware installed so the results may need to be taken with a pinch of salt&nbsp;until confirmed as the same as your updated devices, and I now question in hind sight whether I definitely&nbsp;left enough time for the &quot;15i&quot; test to see activity or not.</div>
<div>&nbsp;</div>
<div>I have posted this anyway to show the additional tests and why/how they will help narrow the field and shall update this device to the new firmware too.</div>
<div>&nbsp;</div>
<div>So please try the checks and report your findings if you get &nbsp;chance when the fault occurs.</div>
<p>Paul&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39793"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Thu, 25/02/2016 - 13:48.</div>
    <div class="content">
     <p>Back at the beginning of January I setup my rpi / rfm2piv2/ rfm12 afresh (several times) using the guide Paul Reed had just created and I think?? I ran into the same problems you guys are seeing. Mine seemed to lose access to&nbsp;/dev/ttyAMA0 according to the logs&nbsp;and at the time googling suggested it was something to do with disabling the serial getty&nbsp;during setup of the rpi&nbsp;image that was peculiar to Jessie. Only a hard reboot would restart mine as any form of soft reboot wouldn&#39;t bring&nbsp;/dev/ttyAMA0 back up.</p>
<p>I gave up trying to sort it in the end and built another image based on Minibian from Glynns&nbsp;guide and it&#39;s ran fault free ever since. &nbsp;</p>
<p>Just mentioning this&nbsp;in case it is the same issue you guys are having???</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39796"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 25/02/2016 - 13:55.</div>
    <div class="content">
     <p>Thanks for the input, in this instance however it is unlikely to be the serial port access as one of the tests performed along the way was to include a &quot; send time to emonGLCD &quot; command which continued to be acknowledged by the rfm2pi in a fault condition and the test results&nbsp;that I have just posted definitely did&nbsp;not show any data packets following the first, version and&nbsp;configuration check which verified the serial port was open and passing data but not the &quot;data packets&quot; that should be arriving from remote nodes.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-39799"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Thu, 25/02/2016 - 14:34.</div>
    <div class="content">
     <p>What I had was data from the pi itself like cpu and gpu temps etc getting through but nothing was getting through via the rfm2pi from external sensors.</p>
<p>Hope you find the solution soon.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40024"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8722.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="thejaq&#039;s picture" title="thejaq&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8722.html" title="View user profile.">thejaq</a> on Tue, 01/03/2016 - 22:48.</div>
    <div class="content">
     <p>Paul, following your last suggestion, here are the results:&nbsp;</p>
<p>On unresponsive rfm2pi:</p>
<pre>
pi@raspberrypi ~ $ sudo rfm2pi_status
Use CRTL-C to exit
&gt; 0v
[RFM2Pi v1.0 (rfm69)] O i15 g210 @ 433 MHz q1</pre><p>with command &quot;15i&quot;</p>
<pre>
pi@raspberrypi ~ $ sudo rfm2pi_status
Use CRTL-C to exit
&gt; 15i
 O i15 g210 @ 433 MHz q1
OK 10 97 6 0 0 0 0 238 1 150 45 200 0 188 0 206 0 20 0 0 0 0 0 0 0 0 0 116 4 (-4            1)

</pre><p>Responsive and sending data again. I can get to the next command on the next hang.</p>
<p>Josh</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40170"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 08/03/2016 - 16:07.</div>
    <div class="content">
     <p>Hi Josh, sorry for the delayed response I have been extremely busy recently.</p>
<p>Your test results suggest I may have&nbsp;been a bit hasty with moving on to the &quot;g&quot; test and not given the &quot;i&quot; test time to work as&nbsp;It seems more likely to me&nbsp;that any of the settings that cause the rfm module&nbsp;configuration&nbsp;to be refreshed would nudge things back into action.</p>
<p>As far as I recall the rfm module itself&nbsp;doesn&#39;t&nbsp;retain the settings so if there was a condition where the less robust rfm module reset eg due to a brownout that didn&#39;t effect the AVR then the RFM2Pi wouldn&#39;t know to resend the configuration as it does on power up or a change of settings.</p>
<p>It may be a bit early to act on this info alone, but if we see more occurrences and can confirm this is what is happening then perhaps we can add a watchdog within the sketch itself to resend the settings if nn secs has passed since the last valid&nbsp;receipt or &quot;nudge&quot;.</p>
<p>Paul&nbsp;&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40292"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sun, 13/03/2016 - 04:03.</div>
    <div class="content">
     <p>Got a RFM failure early this morning. &nbsp;I see the LEDs blinking on the emonTHs during both runs of&nbsp;<br />
rfm2pi_status.</p>
<pre>
pi@emonpi:~ $ sudo ~/data/myApps/rfm2pi_status.py
Use CRTL-C to exit
[emonPi.2.40] E i5 g210 @ 433 MHz USA 1 
OK 5 241 2 175 0 160 3 126 47 190 0 0 0 0 0 0 0 0 0 0 0 70 87 0 0 (-0)
OK 5 212 2 195 0 151 3 132 48 190 0 0 0 0 0 0 0 0 0 0 0 71 87 0 0 (-0)
OK 5 209 2 181 0 134 3 74 48 190 0 0 0 0 0 0 0 0 0 0 0 72 87 0 0 (-0)
OK 5 221 2 184 0 149 3 141 48 190 0 0 0 0 0 0 0 0 0 0 0 74 87 0 0 (-0)
OK524 2 177 0 145 3 105 47 190 0 0 0 0 0 0 0 0 0 0 0 75 87 0 0 (-0)
OK 5 243 2 188 0 175 3 131 48 190 0 0 0 0 0 0 0 0 0 0 0 76 87 0 0 (-0)
OK 5 227 2 178 0 149 3 122 48 190 0 0 0 0 0 0 0 0 0 0 0 78 87 0 0 (-0)
OK 5 2 2 180 0 182 2 246 47 190 0 0 0 0 0 0 0 0 0 0 0 79 87 0 0 (-0)
OK 5 240 1 189 0 173 2 132 48 190 0 0 0 0 0 0 0 0 0 0 0 80 87 0 0 (-0)
OK 5 251 1 180 0 175 2 227 47 190 0 0 0 0 0 0 0 0 0 0 0 81 87 0 0 (-0)
OK 5 242 1 187 0 173 2 156 48 190 0 0 0 0 0 0 0 0 0 0 0 82 87 0 0 (-0)
OK 5 232 1 181 0 157 2 155 48 190 0 0 0 0 0 0 0 0 0 0 0 83 87 0 0 (-0)
OK 5 244 1 182 0 170 2 224 47 190 0 0 0 0 0 0 0 0 0 0 0 83 87 0 0 (-0)
OK 5 243 1 178 0 165 2 71 48 190 0 0 0 0 0 0 0 0 0 0 0 84 87 0 0 (-0)
^C
...
pi@emonpi:~/data/myApps $ sudo ./rfm2pi_status_15i.py
Use CRTL-C to exit
 O i15 g210 @ 433 MHz USA 1 
OK 15 242 1 173 0 159 2 95 47 190 0 0 0 0 0 0 0 0 0 0 0 148 87 0 0 (-0)
OK 15 241 1 173 0 158 2 123 48 190 0 0 0 0 0 0 0 0 0 0 0 149 87 0 0 (-0)
OK 15 229 1 176 0 149 2 200 48 190 0 0 0 0 0 0 0 0 0 0 0 150 87 0 0 (-0)
OK 15 239 1 180 0 163 2 138 48 190 0 0 0 0 0 0 0 0 0 0 0 151 87 0 0 (-0)
OK 15 247 1 187 0 178 2 124 48 190 0 0 0 0 0 0 0 0 0 0 0 151 87 0 0 (-0)
<strong>OK 23 205 0 0 0 193 1 25 0 1 0 0 0 (-46)
</strong>OK 15 238 1 172 0 154 2 107 47 190 0 0 0 0 0 0 0 0 0 0 0 152 87 0 0 (-0)
OK 15 238 1 177 0 159 2 146 48 190 0 0 0 0 0 0 0 0 0 0 0 153 87 0 0 (-0)
OK 15 252 1 181 0 177 2 73 48 190 0 0 0 0 0 0 0 0 0 0 0 154 87 0 0 (-0)
OK 15 242 1 177 0 163 2 157 48 190 0 0 0 0 0 0 0 0 0 0 0 155 87 0 0 (-0)
OK 15 0 2 177 0 177 2 77 48 190 0 0 0 0 0 0 0 0 0 0 0 156 87 0 0 (-0)
OK 15 244 1 178 0 166 2 117 47 190 0 0 0 0 0 0 0 0 0 0 0 157 87 0 0 (-0)
OK 15 237 1 189 0 170 2 220 47 190 0 0 0 0 0 0 0 0 0 0 0 158 87 0 0 (-0)
OK 15 242 1 170 0 156 2 98 47 190 0 0 0 0 0 0 0 0 0 0 0 159 87 0 0 (-0)
OK 15 231 1 179 0 154 2 114 47 190 0 0 0 0 0 0 0 0 0 0 0 160 87 0 0 (-0)
OK 15 238 1 184 0 166 2 85 48 190 0 0 0 0 0 0 0 0 0 0 0 161 87 0 0 (-0)
OK 15 239 1 179 0 162 2 133 47 190 0 0 0 0 0 0 0 0 0 0 0 162 87 0 0 (-0)
OK 15 248 1 178 0 170 2 209 47 190 0 0 0 0 0 0 0 0 0 0 0 163 87 0 0 (-0)
<strong>OK 23 205 0 0 0 194 1 25 0 1 0 0 0 (-45)
</strong>OK 15 236 1 183 0 163 2 144 48 190 0 0 0 0 0 0 0 0 0 0 0 164 87 0 0 (-0)
OK 15 0 2 178 0 178 2 151 48 190 0 0 0 0 0 0 0 0 0 0 0 165 87 0 0 (-0)
<strong>OK 20 209 0 0 0 184 1 24 0 (-33)
</strong>OK 15 237 1 173 0 154 2 145 47 190 0 0 0 0 0 0 0 0 0 0 0 166 87 0 0 (-0)
^C
...
pi@emonpi:~/data/myApps $ ./reset_rfm2pi.py
pi@emonpi:~/data/myApps $ 
</pre><p>It has been 4.5 weeks since the last RFM dropout for me.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40297"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 13/03/2016 - 19:11.</div>
    <div class="content">
     <p>Great feedback, thanks Jon.&nbsp;Could you also try the &quot;201g&quot; and &quot;4b&quot; settings, the &quot;15i&quot; command has definitely worked in this instance and some further confirmation would be good (also from rfm2pi users) to try and establish if it is any particular&nbsp;setting that is being forgotten. e.g. in this instance if the node id had been lost/altered by the firmware and then&nbsp;incorrectly&nbsp;set, the rfm module then resending the node id could mask that issue, resending the group for example, may not be successful&nbsp;if&nbsp;the wrong node id is held in ram by the firmware.</p>
<p>I don&#39;t think you need to run&nbsp;the ./reset_rfm2pi.py script though, since&nbsp;nudging the settings works fine.</p>
<p>If any/all of the individual settings are always&nbsp;successful&nbsp;at jump starting the emonPi, then it would confirm the rfm module itself is forgetting, stalling or getting corrupted etc. rather than the firmware mis-configuring it. This is easier to establish on the emonPi&nbsp;since the rfm2pi uses an eeprom&nbsp;so it adds another layer of uncertainty to the debugging as it may have the value in RAM but get overruled by the eeprom&nbsp;values when the &quot;rfm_config&quot; is called. The emonPi&nbsp;apparently&nbsp;does not use the eeprom. The settings are maintained only in ram.</p>
<p>The emonPi also makes the use of a watchdog in emonhub. A little trickier, as it doesn&#39;t stop passing data, it just stops passing RF data which is only distinguished by the node ID because of the decorative &quot;(-0)&quot; giving it the appearance of an RF packet, which it isn&#39;t.</p>
<p>It would be good to get to the root of this as any watchdog solution can result in lost packets, either because the &quot;if no packets recieved&nbsp;interval&quot; is set too long and it takes awhile to figure out there are packets missing or it&#39;s set too short and the repeated reconfiguration of the rfm module makes it miss valid packets.</p>
<p>I&#39;m a little&nbsp;out of my depth with the circuitry and wouldn&#39;t know exactly where or what value/type cap to add to stiffen the power rail to the rfm module. That is assuming it&#39;s power related. I wonder if it&#39;s possible that certain RF transmissions or interference can cause the rfm to lock out,&nbsp;forget its settings or get false settings set OTA?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40298"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 13/03/2016 - 20:06.</div>
    <div class="content">
     <p>Hi Paul</p>
<p>Just a quick update from me.<br />
Unfortunately due to being away from home quite a lot over the past month, I&#39;ve had to swap the rfm69pi&nbsp;for an older version&nbsp;as I&#39;m not always at home to reset it, and I was losing too much data.<br />
Hopefully soon, I can swap it back.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40302"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 13/03/2016 - 22:53.</div>
    <div class="content">
     <p>Hi Paul, no worries, I&#39;m really busy right now and won&#39;t be able to spend time on it for a while, But if we can keep up with the tests (when&nbsp;we can) it should narrow the field for&nbsp;debugging&nbsp;down the line.</p>
<p>Paul &nbsp;&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40306"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7218.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="emjay&#039;s picture" title="emjay&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/7218.html" title="View user profile.">emjay</a> on Mon, 14/03/2016 - 06:30.</div>
    <div class="content">
     <p>@jon,</p>
<p>Are the dropped characters on several lines just an artifact of the trace mechanism?</p>
<p>e.g.</p>
<blockquote><p>OK524 2 177 0 145 3 105 47 190 0 0 0 0 0 0 0 0 0 0 0 75 87 0 0 (-0)</p>
</blockquote>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40307"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 14/03/2016 - 10:01.</div>
    <div class="content">
     <p>@Jon - I meant to comment on the node id you&#39;re using too, try changing your &quot;rfm2pi_status_15i.py&quot; script to a&nbsp;<br />
&quot;rfm2pi_status_5i.py&quot; so you are resending the existing node id (baseid) which is 5 on a stock&nbsp;emonPi, likewise with the group(210g) or frequency(4b) settings. In other threads I have mentioned configuring to another setting and then setting back again via emonhub, this was to get around emonhub&nbsp;needing to see a difference to send the command, this test script is oblivious to the existing setting and just sends the command.</p>
<p>@emjay - I had seen the error you refer to but as I have never seen this before in any previous serial prints&nbsp;I guessed it might be typo,&nbsp;cut&#39;n&#39;paste error or my rough and ready script at fault, since they are not RF packets.</p>
<p>Paul<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40314"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 14/03/2016 - 14:54.</div>
    <div class="content">
     <p>Paul - the &quot;5i&quot; hint helps! &nbsp;I did the&nbsp;reset_rfm2pi.py because I wasn&#39;t quite sure how to get things&nbsp;back to normal. &nbsp;On the next test I&#39;ll do the&nbsp;&quot;201g&quot; and &quot;4b&quot; settings.</p>
<p>I looked at the Terminal log at the &quot;OK524 2 177...&quot; line and it is the same in the log. &nbsp;So not a typo or cut &amp; paste error. &nbsp;I cannot rule out the other items.</p>
<p>Happy Pi Day!</p>
<p>Jon</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40317"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 14/03/2016 - 15:20.</div>
    <div class="content">
     <p>It&#39;s not Pi day in the UK - we need a 31st April for that!</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40354"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Tue, 15/03/2016 - 17:38.</div>
    <div class="content">
     <p>Ha! &nbsp;That means no Pi for you! &nbsp; ;-)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40365"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 16/03/2016 - 01:37.</div>
    <div class="content">
     <p>Hi Paul,&nbsp;</p>
<p>Sorry, I&#39;ve lost track of this thread. Have you made any discoveries? There does seem to be an underlaying bug with the RMF69CW that we have yet to track down. I have had my emonPi&nbsp;stop receiving data from emonTH&nbsp;occationally. A nudge changing setting bring it back again. This will execute&nbsp;rf12_initialize(nodeID, RF_freq, networkGroup); at firmware level</p>
<p>I&#39;m tempted to implement&nbsp;a hack-fix where in firmware a hardware watchdog executes&nbsp;rf12_initialize(nodeID, RF_freq, networkGroup); every 60s to keep the RFM alive.&nbsp;</p>
<p>I have been reluctant to do this so far since this is really just hiding the problem rather than solving it, but like you and I&#39;m sure many others users there is nothing worse than loosing a few days of data :-/&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40366"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 16/03/2016 - 03:05.</div>
    <div class="content">
     <p>Glyn - if it comes to a hack-fix could it be a smart hack-fix? (sorry for the&nbsp;oxymoron.)&nbsp;&nbsp;If the RFM stops receiving data for X amount of time, then it does the&nbsp;rf12_initialize. &nbsp;</p>
<p>I&#39;m currently monitoring my emonTH nodes with Node-RED and I sent an&nbsp;alert when no data is received. &nbsp;I don&#39;t know how to send a&nbsp;rf12_initialize via Node-RED.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41093"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 12/04/2016 - 09:38.</div>
    <div class="content">
     <p>I spent a day &amp; night away from home yesterday, but within an hour of leaving home, the RFM2PI stopped, and all logging ceased.</p>
<p>I could hardly return home just to reset the RFM2PI, so I&#39;ve lost 24hrs&nbsp;worth of data - Grrrr!!</p>
<p>This morning I&#39;ve added an exec node to a watchdog which will run the RFM2PI reset script if feeds fail to update within 30 seconds, so the reset will be done automatically by node-red.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41099"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 12/04/2016 - 13:42.</div>
    <div class="content">
     <p>Hi Paul, I think that&#39;s &quot;Sod&#39;s law&quot;, as soon as you turn your back that is almost definitely when it will happen.</p>
<p>Sorry to split hairs, but for the benefit of users reading this at a later date to remedy an issue, it&#39;s not emonhub that is stopping, emonhub would continue to forward any&nbsp;data presented to it, but the RFM2Pi&nbsp;has stopped passing data so there is nothing for emonhub to forward.&nbsp;Reseting emonhub would not have fixed the issue and there is no emonhub&nbsp;reset script. The rfm2pi_reset&nbsp;script resets the RFM2Pi.</p>
<p>And before anyone says it, I am not being over defensive of emonhub, I&#39;m just being accurate to avoid slipping backwards. We know that forcing a rf12_initialise() kickstarts things again which conclusively points to the RFM2Pi and/or it&#39;s firmware/lib.</p>
<p>I prefer your node-red method to adding a &quot;&nbsp;rf12_initialise() every 60s &quot; hack to the firmware because, A) it only operates when there is a problem, B) it can notify and/or&nbsp;log the occurrences&nbsp;and C) it can easily be turned off or changed to permit the testing of a solution. The firmware hack will hide the issue and prevent any progress being made so the issue will never get properly addressed, if the temporary hack is implemented it then becomes the permanent fix.&nbsp;Any users that have node-red should consider this approach over and above the firmware hack, perhaps you could share your code, perhaps even add a notify/log if you haven&#39;t already.</p>
<p>I think I will have to write something into emonhub to counter the urge to use the firmware hack as the occurrences&nbsp;are few and far between and the users willing to help are even scarcer, I do understand data loss is unacceptable and users will go for the quick fix to save losing&nbsp;their own data though.</p>
<p>There is now <a href="https://github.com/jcw/jeelib/issues/92">a issue thread open on the JeeLib&nbsp;repo</a>&nbsp;but I think they maybe going astray in thinking this is a rfm69&nbsp;issue, there is no evidence to support or deny that other than most current users are using a rfm69 so the fault is CURRENTLY predominantly seen on rfm69&#39;s, however there has been an identical &quot;locking up&quot; issue reported on this forum many times prior to the rfm69 being adopted so I believe there is a strong possibility this predates RFM69 and the notion that this is a rfm69 issue may focus attention on the rfm69 differences which may turn out to be&nbsp;the last place this issue may be found. I have no proof it is not &quot;just rfm69&#39;s&quot; but to assume it is the case&nbsp;will hamper any progress too. So I will probally dig out my old rfm12&nbsp;and recompile the firmware you are using on the rfm69&#39;s for a 12 and see if I can reproduce the issue, however this may not be fruitful as it may take months if it ever happens.</p>
<p>I really wish we could absolutely rule out brownout of the rfm module, I do not have an affected device to play&nbsp;with, nor do I have the electronics knowledge to advise someone else what to try with any confidence, but if I had a affected device I would try stiffening the power supply to the rfm module, using a cap or rerouting the power to a separate supply or batteries, to test and eliminate that a possibility.</p>
<p>I very rarely see this issue, but the only device I have ever seen it occur on is the only Pi that is not running on my favorite (3a) type of power supply, it is running on a 1amp&nbsp;generic supply of unknown origin, but that&nbsp;Pi is only used for OEM data&nbsp;forwarding and it is a Pi B (not even a B+) and it has no usb devices, it is Ethernet&nbsp;connected.</p>
<p>The shop psu&#39;s are 1.1a and the raspi hub I think you are using Paul has a split supply that provides 1.1a to the Pi. this may be adequate&nbsp;for the Pi and even the avr of the RFM2Pi or emonPi, but is it enough to ensure the voltage stays permanently high enough for the rfm module to retain it&#39;s settings?</p>
<p>From&nbsp;<a href="https://www.raspberrypi.org/help/faqs/">https://www.raspberrypi.org/help/faqs/</a></p>
<table border="1" cellpadding="1" cellspacing="1" style="width: 500px;">
<tbody>
<tr>
<td>
<p>Product&nbsp;</p>
</td>
<td>Recommended PSU&nbsp;current capacity</td>
<td>Maximum total USB peripheral current draw</td>
<td>Typical bare-board active current consumption</td>
</tr>
<tr>
<td>Raspberry Pi Model A</td>
<td>700mA</td>
<td>500mA</td>
<td>200mA</td>
</tr>
<tr>
<td>Raspberry Pi Model B</td>
<td>1.2A</td>
<td>500mA</td>
<td>500mA</td>
</tr>
<tr>
<td>Raspberry Pi Model A+</td>
<td>700mA</td>
<td>500mA</td>
<td>180mA</td>
</tr>
<tr>
<td>Raspberry Pi Model B+</td>
<td>1.8A</td>
<td>600mA/1.2A (switchable)</td>
<td>330mA</td>
</tr>
<tr>
<td>Raspberry Pi&nbsp;2&nbsp;Model B</td>
<td>1.8A</td>
<td>600mA/1.2A (switchable)</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The emonTx&#39;s seem ok as do the emonTH&#39;s, there does not seem to be a vast number of complaints on other sites (but we do use a large number) and even JCW author of JeeLib and developer of the JeeNode and JeeLink etc states &quot;I&#39;ve&nbsp;never&nbsp;seen this before...&quot; in the thread&nbsp;linked, I suggest it may be the Pi that is the common link and despite the recommended power supplies being up&nbsp;to&nbsp;supplying the Pi and it&#39;s attachments with adequate power, they&nbsp;may not do so&nbsp;within the narrow band of acceptable voltage the rfm requires, it may not be the case but based on the cases I&#39;ve seen and the information at hand it is in my mind the most likely cause at this point in time, either way it would be good to prove it or simply eliminate it from the possibilities.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41101"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 12/04/2016 - 15:41.</div>
    <div class="content">
     <p>Yes, you are quite correct Paul, I've amended my post. I tend to make such mistakes when the red haze descends!<br />
I'll add my nodered flow later when I get home.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41111"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 12/04/2016 - 20:19.</div>
    <div class="content">
     <p>I&#39;ve attached a node-red flow which works as follows;</p>
<p>The MQTT&nbsp;&#39;Watchdog&#39; node receives feed data from one of my emoncms feeds which should update every 10 seconds</p>
<p>If no data is received for 30 seconds, the flow runs the &#39;reset_RFM2pi&#39;&nbsp;script which is installed as per pb66&#39;s&nbsp;instructions on my pi. It also creates a logfile&nbsp;saved at /home/pi/watchdog.txt and logs each time the script is run.</p>
<p>I&#39;ve added a &#39;Limit Messages&#39; node in the flow, as I also &#39;push&#39; the message to my phone (and don&#39;t want one every 30 seconds!</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41123"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 13/04/2016 - 16:24.</div>
    <div class="content">
     <p>I didn&#39;t have to wait long!&nbsp;</p>
<p>I got a push message at lunch time&nbsp;today saying that the reset script had been called, and now I&#39;ve arrived home and checked the &#39;watchdog.txt&#39; log file, I can see that it was run at 12:49:00&nbsp;</p>
<p><img alt="" src="../sites/default/files/rsz_570e646f697a3.png" style="width: 671px; height: 432px;" /></p>
<p>...and zooming in to&nbsp;12:49:00 on one of my 10 second update feeds, I can see the last data posted was 12:48:30, and nothing more until the RFM2Pi&nbsp;reset script was run at 12:49:00.<br />
There could of course been some RF interference which stopped 2 consecutive data points being posted, especially as the 12:49:00 data point coincides with the script being reset?&nbsp;<br />
Maybe it would be clearer if the log timestamp included milliseconds?</p>
<p><img alt="" src="../sites/default/files/rfm2pi.png" style="width: 700px; height: 352px;" /></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41126"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 13/04/2016 - 22:18.</div>
    <div class="content">
     <p>Hi Paul, unless there is a time difference of several seconds between machines it&#39;s more likely this was indeed just a couple of missing packets.</p>
<p>The datapoint&nbsp;recorded at 12:49:00 will have arrived at emoncms&nbsp;at some point during the preceding 10 secs, not necessarily at the timestamped time. And the chances of&nbsp;the reset_script being triggered and actioned, the RFM2Pi&nbsp;restarting and a packet arriving immediately at that exact moment to have any hope of being output to emonhub, parsed and forwarded to emoncms in time to catch that&nbsp;same timestamp is a long shot, especially as there is a short (1sec&nbsp;from&nbsp;memory) delay in the RFM2Pi setup. It&#39;s not impossible (with time differences) but highly unlikely. I think most probably the packet was already in transit from the RFM2Pi when the reset was triggered.</p>
<p>You may&nbsp;be able to determine the order of events&nbsp;from the emonhub.log.</p>
<p>Paul</p>
<p>&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41134"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7218.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="emjay&#039;s picture" title="emjay&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/7218.html" title="View user profile.">emjay</a> on Thu, 14/04/2016 - 11:25.</div>
    <div class="content">
     <p><em>@Paul,</em></p>
<p>The &quot;RF69 only&quot; focus is an certainly an issue, the recent JeeLib debugging session was on the RFM69 compatibility driver. Getting a clear RFM12 failure example would be a great help.</p>
<p>Meanwhile, since I gather most of the current field experience is RFM69 based, I was thinking through the options of eliminating the &#39;power dip&#39; possibility for this case. Unlike the RFM12, there is no accessible brown-out detector, the module keeps operating typically a shade below the minimum supply spec of 2.4V. If the supply collapses and subsequently recovers, then the module will go through a POR cycle and be available for SPI transactions after a short delay.</p>
<p>Since POR jams known defaults into various control registers, we could detect an occurrence with some additional logic in the rf12_initialise() code. Something along the lines of a temporary library change to compare a&nbsp; register non-default value present versus the expected POR value (assuming the power dip wasn&#39;t long/deep enough to scramble the module internal RAM completely).&nbsp; The problem is reporting that back without changing the sketch logic. The evidence points to the periodic re-init &quot;curing&quot; the symptoms, so data logging recovers.</p>
<p>Any thoughts on a reporting mechanism to make the possible POR cycle visible?&nbsp; The modified rf12_initialise() code could set a base code accessible flag, change the return value of rf12_initialise() etc</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41141"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 14/04/2016 - 11:27.</div>
    <div class="content">
     <p>@emjay&nbsp;- We could try something like you suggest, if adding the rf12_initialise&nbsp;hack to a firmware just for these tests the reporting of a POR doesn&#39;t need to be pretty, in fact I would prefer it wasn&#39;t to make any&nbsp;permanent adoption less appealing. I think maybe adding a simple &quot;if(!flaggedPOR) to the rssi&nbsp;Serial.print code would work.</p>
<p>The absence of an RSSI&nbsp;value would then signify a POR occurred and was reset by&nbsp;rf12_initialise() without&nbsp;any external modification to emonhub and&nbsp;<span style="line-height: 20.8px;">that can be seen in</span><span style="line-height: 20.8px;">&nbsp;</span>emoncms<span style="line-height: 1.6;"> without impacting the main data</span><span style="line-height: 1.6;">.&nbsp;</span><span style="line-height: 1.6;">this POR </span><span style="line-height: 1.6;">flag could then be easily reset by the user if a corresponding addition was made to the sketch so that setting group,node or </span>freq<span style="line-height: 1.6;">&nbsp;via the normal methods would&nbsp;</span><span style="line-height: 1.6;">also reset the POR flag.&nbsp;</span></p>
<p>This would mean that Paul&#39;s node-red alert would still function if the rssi&nbsp;feed&nbsp;was used&nbsp;as the trigger from emoncms, other users can reset the flag by forcing emonhub&nbsp;to resend the&nbsp;settings or using one of the above&nbsp;rfm2pi scripts.</p>
<p>I think this issue may be masked somewhat on the rf12&nbsp;modules by the fact that rebooting or restarting emonhub will most likely restart a rf12 since the rf12 version of the RFM2Pi&nbsp; firmware doesn&#39;t return the current configuration so emonhub&nbsp;is set to just blindly resend the settings at every startup, where as emonhub&nbsp;will will only make the settings changes required to a rfm69 version by checking against the current configuration returned by the firmware..</p>
<p>We haven&#39;t seen much pattern to when this can occur so I sort of suspect it&#39;s a combination of factors all coinciding once&nbsp;in while eg the Pi sending via wifi at the exact same time as the avr printing to serial and&nbsp;a packet arrives whilst&nbsp;there is a north easterly wind blowing, I see that some schematics show a 100nF&nbsp;cap on the rfm supply and wonder if there should be a ~10uF decoupling cap too. I noticed even JCW initially incorporated one in his <a href="http://jeelabs.org/2015/05/20/rfm69-on-raspberry-pi/">Pi &lt;spi&gt; rfm board</a> and later commented it may not be needed, so it&#39;s not an entirely new&nbsp;concept.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41197"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sat, 16/04/2016 - 21:59.</div>
    <div class="content">
     <p>Is there a way to disable the&nbsp;&quot;rf12_initialise() every 60s&quot; hack-fix? &nbsp;I added Paul R&#39;s watchdog above but then it dawned on me that it will never fire do to the hack-fix.</p>
<p><strong>EDIT: </strong>&nbsp;Never mind -&nbsp;I think I found it in the&nbsp;<strong>emonPi_RFM69CW_RF12Demo_DiscreteSampling.ino</strong> code. &nbsp;I&#39;m not sure I am skilled enough (brave enough) to change, compile and upload new code to the emonPi. &nbsp;@Glyn - can I beg for an on/off switch?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41258"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 19/04/2016 - 12:00.</div>
    <div class="content">
     <p>@Jon - I just noticed Glyn posted on the <a href="https://github.com/jcw/jeelib/issues/92#issuecomment-211595085">JeeLib issue</a> tracker yesterday, that he is testing a firmware recompiled with a tweaked&nbsp;JeeLib. For those tests he&#39;s using the <a href="https://github.com/openenergymonitor/emonpi/commit/e96cb04ba8d4999a8381dd8cf620ff18fbd66afe">&quot;rf-test&quot;&nbsp;branch of the&nbsp;emonpi repo that has the &quot;hack&quot; removed</a>. If you do not want to switch branches you could just grab the latest.hex and upload that to the emonpi board,</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41300"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Thu, 21/04/2016 - 02:43.</div>
    <div class="content">
     <p>Paul - How do I go about switching branches? &nbsp;And after experimenting, how do I switch branches back?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41301"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 21/04/2016 - 03:09.</div>
    <div class="content">
     <p>Switching branches is probally the easy bit, cd&nbsp;to the repo folder and &quot;git checkout&quot;&nbsp;branchname if you have recently updated so the other branch is known, whether that change will persist a emonpi update routine without further changes, I have no idea and just switching branches alone won&#39;t be enough as the firmware hex in that branch must then be uploaded to the emonpi board, which is&nbsp;normally done by the update routine.</p>
<p>That is why I mentioned a manual upload as the above may not work,&nbsp;either swapping out&nbsp;just the hex file (or doing a git checkout etc) and then run &quot;sudo&nbsp;~/emonpi/emonpiupdate&quot; to run just the <a href="https://github.com/openenergymonitor/emonpi/blob/rf-test/emonpiupdate">emonpi&nbsp;upload script</a>&nbsp;should do it and reverting&nbsp;should be easy enough to undo the changes and run update again.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41310"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 21/04/2016 - 14:38.</div>
    <div class="content">
     <p>I have recompiled&nbsp;our&nbsp;existing rfm2pi&nbsp;test&nbsp;firmware to version 1.1 just to test the changes made to jeelib. I have made no other changes to it at this point. I had to recompile for a rfm12 version and just re-did the rfm69&nbsp;too.</p>
<p>I can make some changes to work with a temporary brown-out notification and watchdog if the changes are made to jeelib but for now I thought I would work from the level playing field by compiling a revised rfm69&nbsp;FW for Paul to try (if willing) and I will swap out my rfm69 for my old rfm12&nbsp;running the exact same FW to try and confirm&nbsp;the rfm12&#39;s are able to be nudged on in the same way and/or if the way the settings are managed by emonHub&nbsp;with&nbsp;later FW&#39;s&nbsp;has any effect.&nbsp;</p>
<p>The attached files are both for rfm2pi&nbsp;(8MHz)&nbsp;boards, the deciding difference is the RF module fitted not the model of board, ie a rfm2pi v2 with an rfm69&nbsp;module fitted needs the rfm69 version despite not being a&nbsp;rfm2pi v3 (aka rfm69pi). I can also compile for a JeeLib&nbsp;with a 16MHz clock and reversed LED operation, with rfm12 or rfm69&nbsp;etc on demand but didn&#39;t want to publish too many versions. &nbsp;</p>
<p>Paul</p>
<p>PS I have standardized&nbsp;on a baud of 38400 across the board so if upgrading a rfm12 device you will probally need to update some settings somewhere eg emonhub.conf.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41318"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 21/04/2016 - 16:53.</div>
    <div class="content">
     <p>Ok, so I am going to have to rethink this and maybe&nbsp;set up a test rig for the rfm12&nbsp;as it was dropping too many packets to be trusted with my&nbsp;live data and I&#39;ve reverted to the rfm69 again.</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41319"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 21/04/2016 - 16:57.</div>
    <div class="content">
     <p>Just to confirm, do you&nbsp;want me to upload the RFM69&nbsp;revised firmware at this time.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41428"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Wed, 27/04/2016 - 07:06.</div>
    <div class="content">
     <p>Paul,</p>
<p>In your reply above you state &#39;Sorry to split hairs, but for the benefit of users reading this at a later date to remedy an issue, it&#39;s not emonhub that is stopping, emonhub would continue to forward any&nbsp;data presented to it.&#39;</p>
<p>But I&#39;m not sure....</p>
<p>I did PM you on this a couple of weeks ago but I guess you were too busy to reply.</p>
<p>But here&#39;s my situation. I have 9.31 installed via the raspi installation guide on Jessie Lite. This receives packets from 2 sources;</p>
<p>Node 10: an attached rfm which is receiving data from my emonTX which is doing PV monitoring and diversion.</p>
<p>Node 11: an esp based system that sends temperature readings via wifi monitoring my heat bank.</p>
<p>Data is sent to a local instance of emoncms and to emoncms.org.</p>
<p>I can see that data stopped being received by emoncms at 00:28:01 - this is the last datapoint on my dashboard. The Inputs page shows both nodes stopped at the same time.&nbsp;</p>
<p>I also have a node (20) receiving data from nodered - the outside temperature&nbsp;from wunderground using the emoncms node, so not using emonhub. The input page shows this is still being updated.</p>
<p>When I look at the emonhub log it suddenly stops at&nbsp;00:29:49.&nbsp;I&#39;ve copied the last entry for node 10 below but the last receipt from node 11 was also acked fine by both the local emoncms and emoncms.org.</p>
<p>So it looks as though emonhub has stopped, or at least has stopped sending data to emoncms and also stopped logging. I&#39;m not pointing fingers just drawing conclusions &nbsp;:-)</p>
<p>I&#39;ve left everything running, so can run any checks you might want me to make. I&#39;d rather you specced&nbsp;what to run&nbsp;rather than me doing things maybe in the wrong order.</p>
<p>Hope you have time to get back to me on this. Would love to get to the bottom of it.</p>
<p>Simon</p>
<p>PS This is a disk based system and I can hear the disk ticking every 5 seconds or so which I always took to be the receipt of packets from the rfm module being saved. But of course it could be something else.</p>
<p>PPS The rfm led is still flashing.</p>
<p>Last log entry:</p>
<p>2016-04-27 00:29:49,617 DEBUG 10564 NEW FRAME : 1461713389.62 OK 10 98 0 0 0 0 0 0 0 69 95 137 0 0 0 0 0 0 0 0 0 (-42)&nbsp;<br />
2016-04-27 00:29:49,621 DEBUG 10564 Timestamp : 1461713389.62<br />
2016-04-27 00:29:49,623 DEBUG 10564 &nbsp; &nbsp; &nbsp;Node : 10<br />
2016-04-27 00:29:49,624 DEBUG 10564 &nbsp; &nbsp;Values : [98, 0, 0, 0, 24389, 137, 0, 0, 0, 0]<br />
2016-04-27 00:29:49,626 DEBUG 10564 &nbsp; &nbsp; &nbsp;RSSI : -42<br />
2016-04-27 00:29:49,637 DEBUG 10564 Append to &#39;emonCMS&#39; buffer =&gt; time: 1461713389.62, data: [10, 98, 0, 0, 0, 24389, 137, 0, 0, 0, 0, -42], ref: 10564<br />
2016-04-27 00:29:49,710 DEBUG 10564 Append to &#39;emonCMSlocal&#39; buffer =&gt; time: 1461713389.62, data: [10, 98, 0, 0, 0, 24389, 137, 0, 0, 0, 0, -42], ref: 10564<br />
2016-04-27 00:29:49,740 INFO emonCMS sending: http://emoncms.org/input/bulk.json?apikey=E-M-O-N-C-M-S-A-P-I-K-E-Y&amp;data=[[1461713389.62,10,98,0,0,0,24389,137,0,0,0,0,-42]]&amp;sentat=1461713389<br />
2016-04-27 00:29:49,813 INFO emonCMSlocal sending: http://localhost/emoncms/input/bulk.json?apikey=E-M-O-N-C-M-S-A-P-I-K-E-Y&amp;data=[[1461713389.62,10,98,0,0,0,24389,137,0,0,0,0,-42]]&amp;sentat=1461713389<br />
2016-04-27 00:29:49,926 DEBUG emonCMSlocal acknowledged receipt with &#39;ok&#39; from <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2016-04-27 00:29:49,964 DEBUG emonCMS acknowledged receipt with &#39;ok&#39; from <a href="http://emoncms.org/" title="http://emoncms.org">http://emoncms.org</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41437"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 27/04/2016 - 10:29.</div>
    <div class="content">
     <p>Sorry Paul, I missed your post, If you are ok with trying the newer firmware it would be helpful, I do not know if the changes made to JeeLib&nbsp;will make a difference since I do not know the details, but the issue thread on JeeLib has gone quiet so &quot;no news is good news&quot; maybe? I believe Glyn&nbsp;had moved from the hacked emonpi&nbsp;firmware to the revised JeeLib&nbsp;(emonpi)&nbsp;firmware&nbsp;so it is definitely worth a run. I&#39;m using it too but the occurrences here are too few to be meaningful&nbsp;until it happens.</p>
<p>Thanks for bumping the thread Simon, I did see your PM, I was very busy at the time and it signed off saying &quot;just thought you might like to know&quot; and suggested you were going to post the details. I had planned to come back to it when you posted but it slipped my mind and I&nbsp;didn&#39;t notice when you didn&#39;t post. I have to say though I didn&#39;t think you meant this &quot;long running thread&quot;, I thought you meant the original&nbsp;<a href="12108.html">&quot;Re: Emonpi image, RFM69PI images froze, rest of Emonhub MQTT inputs still ok&quot;</a>&nbsp;since the&nbsp;symptoms&nbsp;were not in keeping with the issue being tackled here.</p>
<p>The reason I said &quot;sorry to split hairs&quot; was because I didn&#39;t want to appear defensive over emonhub&nbsp;when I stated, what I thought was obvious to those involved but may confuse new readers starting halfway through the thread. So for clarity I was confirming that the issue being tackled in this thread does not involve the restarting of emonhub etc etc, I believed we all knew what Paul was implying whilst engulfed in the &quot;red haze&quot; as he put it.</p>
<p>The main symptoms of this issue are that only the RF packets arriving via an attached RFM based board stop. All other data continues. Emonhub continues to function, the RFM devices&nbsp;LED stops flashing and that the data flow can be restarted by &quot;nudging&quot; the RFM settings to force a rf12_initialise().</p>
<p>If the&nbsp;symptoms<span style="line-height: 20.8px;">&nbsp;are different</span><span style="line-height: 1.6;">, it&#39;s most likely a different issue.&nbsp;</span></p>
<p><span style="line-height: 1.6;">Since your wifi&nbsp;connected esp8266&nbsp;is stopping, the led on the rfm2pi continues to flash and there is some doubt over whether emonhub is still functioning&nbsp;I think you should start a new thread to discuss the problem(s) with your setup&nbsp;in detail.&nbsp;Whilst we&#39;re&nbsp;not able to confirm you are not ever affected by this same issue, we&nbsp;can rule out all your problems being caused by this issue alone.</span></p>
<p><span style="line-height: 1.6;">I will try to help you where I can, I really wish I had more time available as I enjoy doing this but I must focus on other things right now, bills to pay and mouths to feed etc. etc.</span></p>
<p><span style="line-height: 1.6;">Paul</span></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41445"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Wed, 27/04/2016 - 13:09.</div>
    <div class="content">
     <p>Thanks Paul, I&#39;ll start a new thread and restart my system. Fully understand the need to pay the bills....</p>
<p>Would be good if you have a moment some time in the future if you could think of what commands I&#39;d need to use in which order to try to track down what&#39;s causing this issue, then next time it occurs (assuming it does of course) I&#39;ll be equipped to move the analysis along.</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41446"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 27/04/2016 - 13:22.</div>
    <div class="content">
     <p>Paul, not sure where we are with this;</p>
<p>&nbsp; &nbsp; &quot;Ok, so I am going to have to rethink this and maybe&nbsp;set up a test rig for the rfm12&nbsp;as it was dropping too many packets to be trusted with my&nbsp;live data and I&#39;ve reverted to the rfm69 again.&quot;</p>
<p>Do you want me to try the rfm69&nbsp;revised firmware, or hold off until you get some time to rethink things.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41447"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 27/04/2016 - 13:50.</div>
    <div class="content">
     <p>Simon - I will happily give you some pointers, I just didn&#39;t want to go into it in any depth on this thread as it will distract from the topic in hand here.</p>
<p>Sorry Paul - If you could try the newer rfm69 firmware that would be great.</p>
<p>I am also running that (69) firmware since my attempts to go back to using the rfm12&nbsp;were hampered by poor reception. I was hoping to confirm if the rfm12 was having the same issue. I am pretty sure it is but we have not had an occurrence on a rfm12&nbsp;since focusing in on the rf12_initialise(). Since we are all using rfm69&#39;s it could easily be assumed to be a rfm69 ONLY issue which would then suggest the issue is in the difference between a rfm12 and rfm69&nbsp;which I&#39;m not convinced of. If I get a chance I will try and set up a test rig for the rfm12 to see if it faults. The lack of rfm12 users with issues and the lack of time has allowed this to slip down the priority list.&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41452"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 27/04/2016 - 18:40.</div>
    <div class="content">
     <p>OK, just installed the revised firmware, and reset my Watchdog to detect 2 minutes of &#39;no updates&#39;, to ensure that it&#39;s truly stopped and not RF interference.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41453"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Wed, 27/04/2016 - 19:17.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>I&#39;ve made a new topic. If you have time then drop any thoughts in there and I&#39;ll follow things through if I get the same issue.</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41491"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 29/04/2016 - 11:12.</div>
    <div class="content">
     <p>Hi Paul, relaxing the watchdog was a good idea. I have just set up &nbsp;test pi for the rfm12&nbsp;and noticed a flaw in the firmwares, it won&#39;t have effected any of the tests we are doing here but now I&#39;m aware I have had to make a change in the firmwares.</p>
<p>Basically the version and current config&nbsp;was being returned as &quot;[RFM2Pi&nbsp;v1.1&nbsp;(rfm12)] O i15 g210 @ 433 MHz q1&quot; which would not parse correctly in emonub&nbsp;as it splits the string on the spaces and takes the 1st part as the version string and the rest as the current settings. For now I have just added underscores so the version string doesn&#39;t get split, ie &quot;[RFM2Pi<strong>_</strong>v1.2<strong>_</strong>(rfm12)] O i15 g210 @ 433 MHz q1&quot;, (with a version bump too)</p>
<p>It&#39;s not essential you change again but I had to correct my error, new firmwares attached.</p>
<p>It looks like Glyn is happy with the JeeLib fix for emonpi, he has <a href="https://github.com/openenergymonitor/emonpi/commit/1d4306e045e604098919455484fd25dba5a53d50">merged the &quot;rf-test&quot; branch</a> into the released branch and confirmed he hasn&#39;t seen any issues over&nbsp;on the <a href="https://github.com/jcw/jeelib/issues/92">JeeLib issue tracker</a>. That change reverses the previous hack and uses the recently revised JeeLib we are trying here so fingers crossed!!!</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41499"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 29/04/2016 - 21:46.</div>
    <div class="content">
     <p>Thanks Paul, I&#39;ve updated the firmware again this evening.</p>
<p>For information, I&#39;ve had two alerts within the past 2 days since updating the firmware on 27th&nbsp;April, both of which I&#39;ve confirmed via emonhub logs that updating had stopped for 2 minutes before the reset&nbsp;script was called.<br />
This is far more frequent than I had with the original firmware, but not conclusive.</p>
<p>My watchdog log shows;</p>
<pre>
Revised firmware installed 19:30 27_04_16
RFM2Pi Reset script called - Thu Apr 28 2016 03:17:16 GMT+0100 (BST)
RFM2Pi Reset script called - Thu Apr 28 2016 20:04:00 GMT+0100 (BST)
Revised firmware installed 22:30 29_04_16</pre><p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41501"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7218.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="emjay&#039;s picture" title="emjay&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/7218.html" title="View user profile.">emjay</a> on Sat, 30/04/2016 - 08:01.</div>
    <div class="content">
     <p>Just to confirm - these results are with the latest &#39;rf-test&#39; branch of the driver?&nbsp;&nbsp; The changes were mostly around keeping the Rx section available for packet reception despite a relatively noisy RF background that statistically can trigger the start of a (false) packet decode. There may be evidence now of a much reduced &quot;lost packet&quot; rate.</p>
<p>So, peeling back the onion skins - what state can the restart script gather before the forensic stuff is trodden on by the RF chip re-initialise?&nbsp;&nbsp; We know that the chip/SPI bus interaction is still in good shape, else the re-initialise would fail, so some key module control settings could be probed.</p>
<p>Is there are reasonable way to extend the restart script so that a bunch of TBD hex can be logged without disturbing the normal flow?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41502"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 30/04/2016 - 08:06.</div>
    <div class="content">
     <p><em>Just to confirm - these results are with the latest &#39;rf-test&#39; branch of the driver?</em></p>
<p>No they are using <a href="12004.html#comment-41310">Paul&#39;s firmware listed below</a>.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41504"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 30/04/2016 - 09:40.</div>
    <div class="content">
     <p>Hi Paul - Thanks for updating again, the changes to the last FW are just the 2 underscores so the results will not be effected. Interesting that you noticed an increase in resets with the last revision, the change that time was just ti include the <a href="https://github.com/jcw/jeelib/compare/64bdc605dc9ff6cebd3bfec837d61992daa1bbfd...master">very latest changes in JeeLib</a>&nbsp;by pulling in the changes to my local JeeLib.&nbsp;</p>
<p>We can go back if required but I think it would be a bit hasty to assume a perceived 2 min outage as a terminal failure. The reason I say perceived&nbsp;2min is because the use of fixed interval feeds give a rounding effect equal to their interval at both ends so the lack of updates for 2 mins&nbsp;at any feed could be just a 1min40sec outage, combined with the devices interval and sync, traffic on the rf network causing resend delays, any network bottle necks etc not to mention any of the many reasons&nbsp;a rf packet may actually fail to make the journey, all add significant room for misinterpretation. I understand we need to keep data loss to a minimum as you are testing on a live setup so I am not suggesting we remove the reset but I think it may be wise to extend it further before any firm decision to backtrack is made.</p>
<p>I think it may help to&nbsp;turn off the quiet mode so that any rf activity at all can be seen during those 2 minutes in the log.</p>
<p>Hi emjay - The reset method Paul is using is the original &quot;pulse the reset line&quot; full reset of the AVR so extracting any pre-reset data wouldn&#39;t be possible. The reason he is using that is because it is a non-serial method, it doesn&#39;t break in or take focus of the serial port. Plus the reset is triggered from node-red which allows an event to be recorded and alerted to, other wise the resets would go unnoticed as in the &quot;60s rf12_initialise() hack&quot; to the emonpi&nbsp;FW.</p>
<p>The use of an external SW to alert us there has been a reset is an essential part as unfortunately the FW or&nbsp;emonhub have no way of communicating to the user, this is why I previously suggested removing the rssi in a fault condition as emoncms or node red could be set-up to monitor the rssi&nbsp;without impacting the more valuable data.</p>
<p>The alert also gives us a timestamp to help trawl though the logs for clues which means we could have quite mode&nbsp;turned off for a better view and also dump almost any thing we need out of the FW for emonhub to log as a failed packet, unparsable&nbsp;frame or even a command confirmation would be retained in emonhub.log.</p>
<p>So we can either write something into emonhub or I think the better option at the point is keep it all in the FW, to time from the last reception and trigger a &quot;status dump and rf12_initialise()&quot;. we then just need away of telling the user it has happened, for which we can either remove the rssi for a manual reset by the user or perhaps use a set node id to report a reset has occurred eg node 31 as a reset counter or depending on how many hex values you have in mind we could even send the key values to be seen in emoncms.</p>
<p>Paul&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41505"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 30/04/2016 - 10:11.</div>
    <div class="content">
     <p>OK, watchdog extended to 5 minutes, and also &#39;quiet =&nbsp;false&#39; added to RFM2PI&nbsp;runtime settings in emonhub config.<br />
Lets see what difference that makes.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41506"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 30/04/2016 - 10:37.</div>
    <div class="content">
     <p>Thanks Paul, I wasn&#39;t actually asking for you to extend it at this time but as you have that will be a great help. I was just saying we should consider the actual interval duration before assuming it be be a good representation of a terminal fail and write off the recent changes.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41536"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 02/05/2016 - 09:11.</div>
    <div class="content">
     <p>It stopped again at 7.03am this morning, and was reset OK 5 minutes later. I&#39;ve pasted the emonhub log section below for info.</p>
<p>Paul</p>
<p>2016-05-02 07:03:59,562 DEBUG 34004 &nbsp; &nbsp;Values : [1, 150, 0, 24667, 1537]<br />
2016-05-02 07:03:59,563 DEBUG 34004 &nbsp; &nbsp; &nbsp;RSSI : -66<br />
2016-05-02 07:03:59,596 DEBUG 34004 Append to &#39;emonCMS&#39; buffer =&gt; time: 1462169039.56, data: [10, 1, 150, 0, 24667, 1537, -66], ref: 34004<br />
2016-05-02 07:03:59,698 INFO emonCMS sending: http://localhost/emoncms/input/bulk.json?apikey=E-M-O-N-C-M-S-A-P-I-K-E-Y&amp;data=[[1462169039.56,10,1,150,0,24667,1537,-66]]&amp;sentat=1462169039<br />
<strong>2016-05-02 07:03:59,816 DEBUG emonCMS acknowledged receipt with &#39;ok&#39; from <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2016-05-02 07:09:01,960 DEBUG RFM2Pi device settings updated: [RFM2Pi_v1.2_(rfm69)] O i15 g210 @ 868 MHz</strong><br />
2016-05-02 07:09:04,625 DEBUG 34005 NEW FRAME : 1462169344.63 OK 10 232 255 178 0 0 0 96 96 251 5 (-66)&nbsp;<br />
2016-05-02 07:09:04,627 DEBUG 34005 Timestamp : 1462169344.63<br />
2016-05-02 07:09:04,627 DEBUG 34005 &nbsp; &nbsp; &nbsp;Node : 10<br />
2016-05-02 07:09:04,628 DEBUG 34005 &nbsp; &nbsp;Values : [-24, 178, 0, 24672, 1531]<br />
2016-05-02 07:09:04,628 DEBUG 34005 &nbsp; &nbsp; &nbsp;RSSI : -66</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41537"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 02/05/2016 - 11:33.</div>
    <div class="content">
     <p>How many packets (valid and discarded)&nbsp;do you estimate are missing for that 5mins? what is your normal &quot;turnover&quot; ?</p>
<p>Is node 10 the only node on this network? is node 10 received anywhere else by any chance? 2nd emonBase or emonGLCD&nbsp;etc.</p>
<p>It appears exactly as we would have expected prior to the JeeLib&nbsp;update, I don&#39;t really know what to&nbsp;expect of those&nbsp;changes and&nbsp;have only been led by Glyn&#39;s comments and the merge of this &quot;fix&quot; into the emonpi&nbsp;firmware.</p>
<p>I&#39;m unsure if we can draw conclusions from a 5min&nbsp;outage on one system (one node?)&nbsp;when we were previously looking at terminal outages, would we definitely have noticed a 5min&nbsp;or even a 20min outage if the data resumed?</p>
<p>I have installed 3 emonTx&#39;s for someone and I recall seeing single nodes&nbsp;regularly disappear for 20-25min&nbsp;due to RF clashing but even though I know they are there I now cannot find any example of that to show you, that particular system has been running ~7mths now without any terminal outages. (see my posts on the &quot;<a href="11390.html#comment-36928">RF69 reliability, timing, temp sensors, mqtt &amp; lowpowerlabs</a>&quot; discussion for more on this).</p>
<p>I will recheck (although I already have more than once) that the correct JeeLib was used when I compiled last time, my primary concern here is you notice a fall in performance rather than just no improvement.</p>
<p>Both my live rfm69 and my test rfm12 are both still going strong but it was so rare I saw this issue it would be <u>at least</u> a year before I could say things had possibly improved, only a fault occurrence&nbsp;has any value, the absence of a fault is pretty&nbsp;meaningless.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41542"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7218.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="emjay&#039;s picture" title="emjay&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/7218.html" title="View user profile.">emjay</a> on Mon, 02/05/2016 - 16:33.</div>
    <div class="content">
     <p>The changes in the latest &#39;rf-test&#39; branch of the driver were mostly around keeping the Rx section available for packet reception despite a relatively noisy RF background that statistically can trigger the start of a (false) packet decode.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41544"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 02/05/2016 - 16:57.</div>
    <div class="content">
     <p>Hi emjay - just to confirm, when you say &quot;the latest &#39;rf-test&#39; branch&quot; are you referring to the changes that were made in the now deleted &quot;rf-test&quot; branch of the emonpi repo or is there a particular branch of the JeeLib repo we should be using?&nbsp;</p>
<p>We are compiling a version of the &quot;RFM2Pi&quot; firmware using the latest &quot;master&quot; branch of JeeLib, the emonpi FW isn&#39;t used.</p>
<p>From the description you give it&#39;s seems unlikely to resolve the issue we have here since we have already established the &quot;rf12_initialise() nudge&quot; works, unless it&#39;s likely the rfm module is being kept occupied indefinitely with noise and the rf12_initialise() is somehow resetting that status, bearing in mind the &quot;discarded packets&quot; also stop when the rfm&nbsp;&quot;stops&quot;.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41545"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 02/05/2016 - 16:57.</div>
    <div class="content">
     <p><em>How many packets (valid and discarded)&nbsp;do you estimate are missing for that 5mins? what is your normal &quot;turnover&quot; ?</em></p>
<p>61 contiguous packets missing up to the point where the reset script was run.<br />
The emonTX&nbsp;which provides the data updates every 5 seconds, whilst the dependent feed has a 10 second interval.<br />
I chose this particular data source because&nbsp;the emonTX is mains powered, sited about 3 mts away from the pi in the same room (hence strong signal -66db) and has a record of a good quality feed. It&#39;s generally &gt;99% and even then it&#39;s usually 1 or 2 packets that fail.</p>
<p><em>Is node 10 the only node on this network? is node 10 received anywhere else by any chance? 2nd emonBase or emonGLCD&nbsp;etc.</em></p>
<p>No, there are 6 nodes in total, 3 of which are RF nodes (as expected all three do stop). Unfortunately, I don&#39;t currently have any other 868mHz&nbsp;RFM2Pi&nbsp;board&nbsp;to run in parallel</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41546"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 02/05/2016 - 17:30.</div>
    <div class="content">
     <p>61 missing packets is quite significant, across&nbsp;multiple&nbsp;nodes too, pretty much&nbsp;rules out any issue the other end of any single device, but not interference or noise, do you see many discarded packets now you have quiet disabled?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41547"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 02/05/2016 - 18:11.</div>
    <div class="content">
     <p>I&#39;ve just run a search&nbsp;through almost 2 days worth of emonhub logs for the word &#39;Discarded&#39; and couldn&#39;t find any occurrence at all. (presumable they would be logged?)</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41548"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7218.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="emjay&#039;s picture" title="emjay&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/7218.html" title="View user profile.">emjay</a> on Mon, 02/05/2016 - 18:13.</div>
    <div class="content">
     <p>The changes I&#39;m referring to were committed to the main branch on April 6th.&nbsp; There was some evidence of Rx lockup when this (rare) noise trigger happens, but there wasn&#39;t a definitive test case available to be sure.</p>
<p>A cold start of the module resets the RF module to POR values, which then get updated by the driver. Critical state in the driver is also reset, so we still lack the ability to distinguish a hung RF module from a confused driver.</p>
<p>Good in a way that the error frequency has gone up - a better chance of nailing this gremlin.</p>
<p>Excuse my ignorance, but when the code is reporting stuff down the asynch link, is character echo active?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41549"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 02/05/2016 - 18:36.</div>
    <div class="content">
     <p>Paul - I just turned quite off on my RFM2Pi&#39;s&nbsp;to check the exact wording as I couldn&#39;t recall if &quot;Discarded&quot; was in the log message or not and I have no &quot;noise&quot; either, normally I&#39;m swimming in it so I&#39;m not sure if &quot;quiet&quot; is making a difference with more packets being suppressed.</p>
<p>Try searching for &quot;<strong>Discard</strong> RX frame &#39;unreliable content&#39;&quot; (checked the repo) theres no &quot;ed&quot;</p>
<p>emjay - Can you expand ? I assume you are referring to the serial comms&nbsp;with &quot;asynch link&quot; but I&#39;m a&nbsp;bit vague&nbsp;on what you are asking, so please excuse my ignorance too.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41550"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7218.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="emjay&#039;s picture" title="emjay&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/7218.html" title="View user profile.">emjay</a> on Mon, 02/05/2016 - 18:47.</div>
    <div class="content">
     <p>I gather that the serial comms path is two way - a&nbsp; command stream for changing various parameters (infrequent) and received packet chat (frequent) streaming back.&nbsp; A command gets a response, I can see that in the logs. My question was for the packet stream - does that get echoed back?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41551"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 02/05/2016 - 18:56.</div>
    <div class="content">
     <p>Yes it is &#39;Discard&#39;, and in the last 24hrs it is mentioned in the log 208 times. The log section is 9hrs long and is 54,000 lines in size. A typical entry is;</p>
<p>2016-05-01 21:16:10,544 DEBUG emonCMS acknowledged receipt with &#39;ok&#39; from <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2016-05-01 21:16:15,259 DEBUG 26365 NEW FRAME : 1462133775.26 &nbsp;? 10 147 0 0 0 0 0 120 95 245 7 (-68)&nbsp;<br />
<strong>2016-05-01 21:16:15,260 INFO 26365 Discard RX frame &#39;unreliable content&#39; : RSSI (-68)</strong><br />
2016-05-01 21:16:20,230 DEBUG 26366 NEW FRAME : 1462133780.23 &nbsp;? 10 147 0 0 0 0 0 77 95 251 5 (-65)&nbsp;<br />
<strong>2016-05-01 21:16:20,231 INFO 26366 Discard RX frame &#39;unreliable content&#39; : RSSI (-65)</strong><br />
2016-05-01 21:16:25,407 DEBUG 26367 NEW FRAME : 1462133785.41 OK 10 147 0 0 0 0 0 96 95 245 5 (-68)&nbsp;<br />
2016-05-01 21:16:25,409 DEBUG 26367 Timestamp : 1462133785.41<br />
2016-05-01 21:16:25,410 DEBUG 26367 &nbsp; &nbsp; &nbsp;Node : 10<br />
2016-05-01 21:16:25,411 DEBUG 26367 &nbsp; &nbsp;Values : [147, 0, 0, 24416, 1525]<br />
2016-05-01 21:16:25,412 DEBUG 26367 &nbsp; &nbsp; &nbsp;RSSI : -68</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41552"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feeds stop updating</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 02/05/2016 - 19:13.</div>
    <div class="content">
     <p>This thread now moved to the new forum....</p>
<p><a href="https://community.openenergymonitor.org/t/rfm69pi-stops-updating-freezes/137">https://community.openenergymonitor.org/t/rfm69pi-stops-updating-freezes/137</a></p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12004"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-tEbx6Bq1x-ucTsRlHtKURh9cCY2ATg0zjRAzM4khoCQ" value="form-tEbx6Bq1x-ucTsRlHtKURh9cCY2ATg0zjRAzM4khoCQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/12004 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:15:56 GMT -->
</html>
