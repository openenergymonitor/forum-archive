<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11713 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:11:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>ESP8266, emonlib and thingspeak | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">ESP8266, emonlib and thingspeak</h3>
        <span class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Mon, 30/11/2015 - 19:17</span>
        <div class="content"><p>I want to monitor the heating system of one school, that is... i want to know when it turned on and when turned off. My system have one sct013 (30A 1V)... so no needing of burden resistor..., on the other hand, output voltage of esp8266 is only 3.3v, and max resolution of adc input is 1v... (that is, you can input 3 v, but beyond 1v you obtain max value: 1024 (10 bit ADC). So questions:</p>
<p>What must be values of resistence for dc biasing???</p>
<p>Is there any recomended values for capacitor??</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Second question... i want to use emonlib library to calculate the power consumption every 2 minutes (total of watts consumed in this two minutes), and upload this data to thingspeak... i know how to obtain &quot;instant watts&quot;, but doesnt know how to calculate &quot;total watts in a time frame&quot;.</p>
<p>Thanks...</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2677.html" class="topic-previous" title="Go to previous forum topic">‹ emonTx RF issue - question moved from comments</a>
              <a href="11824.html" class="topic-next" title="Go to next forum topic">Emon not processing all frames from node ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-36492"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 01/12/2015 - 00:21.</div>
    <div class="content">
     <p>I cannot attempt to answer the first part of your question because I can find no useful information about an ESP8266 - especially I cannot find a mention of an analogue to digital converter.</p>
<p>On the second question, you seem to be confusing energy and power. Power is the rate at which energy is moved about. Energy is measured in Joules, 1 J = 1 Ws (Watt.second). Power is measured in Watts. 1 W = J/s (Joule per second). So "total watts in a time frame" is a meaningless concept. I think you mean Joules or a derivative or equivalent unit (kJ, MJ, Wh, kWh).</p>
<p>Do you really mean you want to calculate power every 2 minutes, or do you mean you want to calculate to total energy over the last 2 minutes and report that? If it is the second one, how accurate do you want to be? The original emonLib routines actually report the average power over (typically) 200 ms every 10 s, emonCMS then calculated the energy by assuming a linear interpolation between the power 10s ago and the power now. That gives a reasonably accurate result provided that the power does not fluctuate often. If power fluctuates a large amount and often, you need to look at the 'continuous' emonTx sketches. These calculate the energy per cycle and every 10s divide the energy accumulated by time to give the average power. I think your most accurate solution would be to follow that approach and calculate the energy over 2 minutes (but you would need to check carefully that the variables you used could handle the maximum numbers you expect).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36499"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Tue, 01/12/2015 - 07:55.</div>
    <div class="content">
     <p>Also I heard the internal ADC isn&#39;t very accurate. Don&#39;t know if this is true or false.</p>
<p>Maybe an I2C ADC could solve this?</p>
<p>ADS1115 16-Bit ADC - 4 Channel with Programmable Gain Amplifier or an ADS1015 12-Bit ADC - 4 Channel with Programmable Gain Amplifier.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36503"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Tue, 01/12/2015 - 09:05.</div>
    <div class="content">
     <p>Really not all versions of esp8266 have analog in, but esp12, esp7 and others yes.</p>
<p>Internal adc... is 10 bit resolution, not very accurate... especially because their voltage range is very short (from 0-1 V)... then &iquest;why i want to use this hardware?... To simplify installation, i don&#39;t need accurate, only need to know if heater is on or off (better: to know if heater pump is on or off), and send this data to thingspeak</p>
<p>Regarding the question of energy and power, yes my question was wrong.</p>
<p>What i want is to calculate the total energy over the last two minutes and report that, regarding accurate: really is a secondary question with little importance.<br />
.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36540"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 01/12/2015 - 17:05.</div>
    <div class="content">
     <p>OK, now that I think I understand the real problem...</p>
<p>If the ADC input is 0-1 V scaled 0-1023, then if you're using a CT after the fashion of the emonTx, you need to bias the CT to a 'centre' voltage of 0.5 V, which will give you a maximum of 0.35 V rms.  In terms of bias resistors, any pair with a ratio 5:1 will be OK. Without knowing how much current you can afford, 10 k&Omega; and 51 k&Omega; will give you 0.492 V which is close enough. And stay with the 10 &mu;F capacitor.<br />
Using your 30 A CT, the maximum you can measure will be 10 A, and the reliable minimum about 100 mA.</p>
<p>Then in the sketch, if you use emonLib and check every 10 s, you can decide whether the load is off (below the threshold) or on (above) and send that, or you can be clever and at the end of your 2 minutes, send an 'on' or 'off' based on the majority proportion of the time it was in whichever state.     </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36544"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Tue, 01/12/2015 - 17:32.</div>
    <div class="content">
     <p>Thanks!!!! First part of&nbsp; the question is fully solved :-))</p>
<p>&nbsp;</p>
<p>Second part partially :-)) ... because i prefer to send not &quot;on&quot; or &quot;off&quot;, with total watts i can deduct if only fuel pump is on, or fuel + water pump or only water pump (each one have different&nbsp; power), so i need to know the &quot;sum&quot; or<br />
more correctly , the average of data to send each 2 minutes.<br />
&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36548"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Wed, 02/12/2015 - 08:04.</div>
    <div class="content">
     <p>It seems to work<br />
Sorry about the mess :-))<br />
&nbsp;</p>
<p><img alt="" src="../sites/default/files/IMG_20151201_205933.jpg" style="width: 700px; height: 394px;" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36556"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 01/12/2015 - 23:31.</div>
    <div class="content">
     <p>Please read "Adding a picture to a post". I assume there is a picture of some sort above, but I cannot see it. It is on a 3rd party site and it will be not at all helpful when at some future date it disappears from there. Attaching it here means that it will remain available.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36566"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Wed, 02/12/2015 - 08:05.</div>
    <div class="content">
     <p>Changed...now picture is in forum&acute;s server<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36641"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9006.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9006.png" alt="alexg&#039;s picture" title="alexg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9006.html" title="View user profile.">alexg</a> on Thu, 03/12/2015 - 19:02.</div>
    <div class="content">
     <p>hi, do you you have the schematic and sketch for this anywhere? much appreciated :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36745"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Sat, 05/12/2015 - 11:39.</div>
    <div class="content">
     <p>connections to ct: <a href="https://learn.openenergymonitor.org/?redirect=ct-sensors-interface" title="http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface">http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface</a></p>
<p><strike>R1:</strike> R2: 10K</p>
<p><strike>R2:</strike> R1: 50K (47K)</p>
<p><i>[Edited to correct mistake - RW]</i></p>
<p>C1: 10UF</p>
<p>&nbsp;</p>
<p>I2C LCD: CONNECTED TO 5V (USB OUT PIN ON LOLIN) GRUND, D1 AND D2 (SDA AND SDCLK)</p>
<p>&nbsp;</p>
<p>Sketch:</p>
<p>&nbsp;</p>
<blockquote><p>#include &quot;EmonLib.h&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Include Emon Library<br />
#include &lt;Wire.h&gt;<br />
#include &lt;LiquidCrystal_I2C.h&gt;<br />
//LiquidCrystal_I2C lcd(0x3F, 16, 2);<br />
LiquidCrystal_I2C lcd(0x27, 16, 2);<br />
EnergyMonitor emon1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Create an instance</p>
<p>void setup()<br />
{ &nbsp;<br />
&nbsp; Serial.begin(9600);<br />
&nbsp;&nbsp;&nbsp; lcd.begin();<br />
&nbsp; lcd.backlight();</p>
<p>&nbsp;<br />
&nbsp; emon1.current(A0, 30);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Current: input pin, calibration.<br />
}</p>
<p>void loop()<br />
{<br />
&nbsp; double Irms = emon1.calcIrms(1480);&nbsp; // Calculate Irms only<br />
&nbsp;<br />
&nbsp; Serial.print(Irms*230.0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Apparent power<br />
&nbsp; lcd.print(&quot;L1: &quot;);<br />
&nbsp; lcd.print(Irms*230.0);<br />
&nbsp; lcd.println(&quot;WATT&nbsp;&nbsp; &quot;);<br />
&nbsp; lcd.setCursor(0,1);<br />
&nbsp; lcd.print(&quot;L1: &quot;);<br />
&nbsp; lcd.print(Irms);<br />
&nbsp; lcd.print(&quot;A&quot;);<br />
&nbsp; Serial.print(&quot; &quot;);<br />
&nbsp; Serial.println(Irms);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Irms<br />
&nbsp; lcd.home();<br />
&nbsp; delay(2000);<br />
}</p>
</blockquote>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36844"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9006.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9006.png" alt="alexg&#039;s picture" title="alexg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9006.html" title="View user profile.">alexg</a> on Tue, 08/12/2015 - 17:29.</div>
    <div class="content">
     <p>thank you very much for that.</p>
<p>it seems i have a 100A CT, so as far as i can tell that means adding a burden resistor, and this all thing did my head in.</p>
<p>do i power the ct from 3.3 or from 1v? do the voltage divider resitor values&nbsp; you chose mean that you are powering your ct from 1v dropped from 5v through the divider?</p>
<p>sorry for all the noobie questions</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36849"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 08/12/2015 - 22:27.</div>
    <div class="content">
     <p>Assuming you have the same hardware as Helianto...</p>
<p>If you have a YHDC SCT-013-000, then you do need a burden resistor. The value depends on the maximum primary current you want to measure, and the maximum alternating voltage that your input can handle. If it is a 0 - 1 V dc input, that means approx. 0.333 V rms (giving you a margin of about 10% - and component tolerances will eat into that), and your CT provides 50 mA per 100 A of primary current. So choosing a silly number, if you want to measure 38 A rms maximum, your burden resistor (Ohm's Law) is 0.333 V / (38/100 * 50 mA) = 17.52 &Omega;. Always choose the next LOWER standard value, unless you want to reduce the maximum current that you can measure. </p>
<p>The standing direct voltage on the CT must be as close to 0.5 V as possible - see my post of Tue, 01/12/2015 - 17:05. If you have equal bias resistors, you need to feed the 'top' one from 1 V. If you have unequal ones, you choose the values to give you 0.5 V at their junction.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36856"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9006.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9006.png" alt="alexg&#039;s picture" title="alexg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9006.html" title="View user profile.">alexg</a> on Wed, 09/12/2015 - 05:46.</div>
    <div class="content">
     <p>Thank you Robert. You explained it so well, it might have actually entered my thick skull.</p>
<p>Just to confirm, would this be ok for measuring ~38A using 3.3v power source and an analog pin limited to 1V?</p>
<p><img alt="" src="../sites/default/files/Screenshot%202015-12-09%2007.39.18.png" style="width: 600px; height: 323px;" /></p>
<p>&nbsp;</p>
<p>Also, in heliantos sample, are the resistor values not reversed? Or am i missing something else...</p>
<p>Thank you very much</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36867"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 09/12/2015 - 12:39.</div>
    <div class="content">
     <p>That looks OK, except that the CT plug is wired tip and sleeve, not ring and sleeve as you've drawn it.<br />
The bias voltage is a bit high at 0.564 V, 680 &Omega; and 3.9 k&Omega; would be much closer at 0.49 V. </p>
<p>Of course, you've got to calculate your burden value to suit the current you have.</p>
<p>And you're right, Helianto has got his resistors the wrong way round. It's so obvious - to me (!) - which way round they should be that I didn't check to see what he'd written was correct (and it isn't).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36869"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Wed, 09/12/2015 - 12:41.</div>
    <div class="content">
     <blockquote><p>Also, in heliantos sample, are the resistor values not reversed? Or am i missing something else...</p>
</blockquote>
<p>&nbsp;I think that what is important is the relation between both values, not the position of each resistor ...perhaps i am wrong...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36870"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 09/12/2015 - 12:42.</div>
    <div class="content">
     <p>I've just edited my post above.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36871"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9006.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9006.png" alt="alexg&#039;s picture" title="alexg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9006.html" title="View user profile.">alexg</a> on Wed, 09/12/2015 - 12:49.</div>
    <div class="content">
     <p>THank you very much Robert and helianto, I now understand all this a lot better.&nbsp;</p>
<p>Now to apply it and report back once i do :)</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36873"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Wed, 09/12/2015 - 13:03.</div>
    <div class="content">
     <p>And i have to review my system (perhaps resistors is placed wrong...)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36879"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9006.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9006.png" alt="alexg&#039;s picture" title="alexg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9006.html" title="View user profile.">alexg</a> on Wed, 09/12/2015 - 16:16.</div>
    <div class="content">
     <p>Hi guys,</p>
<p>Thank you, I made it work on a&nbsp;NodeMCU. This board already has a voltage divider on the analog pin so it actually takes&nbsp;0-3v3&nbsp;and drops it to&nbsp;0-1v. I guess that doubles any errors i might be seeing as well.</p>
<p>This is very very nice because we can build really really cheap internet connected current sensors.</p>
<p>I have an&nbsp;emonTx&nbsp;on the network as well, so i could use that to send voltage updates&nbsp;accross&nbsp;the network to the little sensors for more accuracy. Not perfect but it should be pretty good.</p>
<p>Now if i could only calibrate them all as i should... &nbsp;The three phase voltage reading is&nbsp;killing me.</p>
<p>When current is 0, what false current is expected to be seen by this? Currently seeing 0.7-0.10A with no load...</p>
<p><img alt="" src="../sites/default/files/2015-12-09%2018.09.56.jpg" style="width: 600px; height: 800px;" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36881"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Wed, 09/12/2015 - 17:36.</div>
    <div class="content">
     <p>As far as i now nodemcu doesnt have analog divider on analog pin... another other question is accuracy... really is not usable for this use, 10 bits resolution, 1 v , and if you use a ct of 100A (i have three of them too), forget accuracy.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36882"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 09/12/2015 - 17:52.</div>
    <div class="content">
     <p>That is not good. We expect to see maybe 100 mA with the emonTx (scaled for 100 A input), but it is essentially random noise and translates to only a few watts of real power. A lot of trouble was taken with the design of the emonTx to reduce analogue noise, to minimise the interference from the digital circuits and to screen the analogue wiring.</p>
<p>My guess, and it is only a guess, is that it is digital noise from the digital circuits leaking into the analogue side. You could try decoupling the 3.3 V rail, and redesign your analogue input to give 3.3 V swing centred at 1.65 V, or maybe better still, remove the voltage divider if you've designed for 1 V centred on 0.5 V. That will not affect the noise, but it will increase the signal by 3.3 times, so effectively reduce the noise by that much.  </p>
<p>Also, make sure you have a good solid GND connection on the analogue side.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36883"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 09/12/2015 - 17:58.</div>
    <div class="content">
     <p>helianto, don't make wild statements without justifying them. If you are measuring between 10 A and 100 A with a 100 A CT, you can expect the accuracy that the data sheet claims. If you are trying to measure below the specified minimum current of 10 A, in other words you are using the wrong tools for the job in hand, what do you expect? </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36884"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Wed, 09/12/2015 - 18:12.</div>
    <div class="content">
     <p>Robert:<br />
I have not explained well<br />
&nbsp;</p>
<p>With 100A CT can you obtain accuracy?... yes</p>
<p>With esp8266 can you obtain accuracy?... really not much... but enough for small Amps (i think)</p>
<p>With a 100ACT AND ESP8266 CAN YOU OBTAIN ACCURACY?... really not, there are too many factors against</p>
<p>
Although I have achieved in my case acceptable reliability for low consumption (with 30A CT)<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36886"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 09/12/2015 - 19:14.</div>
    <div class="content">
     <p>From what you have written, and from the questions that you have asked in this thread, I think I am right in saying that you have little or no understanding of electrical engineering.</p>
<p>What you are still saying: <i>"With a 100ACT AND ESP8266 CAN YOU OBTAIN ACCURACY?... really not, there are too many factors against."</i> is still a ridiculous claim because you do not say over what range of values you are trying to measure. If you check carefully, you should find plenty of discussion and hard facts about the levels of noise and accuracy that you can expect, both in theory and in practice.</p>
<p>A current transformer is inherently inaccurate at small currents, a certain amount of current is required to magnetise the core and that becomes a significant proportion of the total current when the primary current is small. Any standard electrical engineering textbook should cover CT theory. The answer to that is to choose a CT that is suitable for the range over which you want to measure.</p>
<p>Working over a sensible operating range, a 10-bit ADC can deliver good accuracy, but when the input amplitude falls to a few counts, it is hardly surprising that errors can increase dramatically. The answer to that is to operate the ADC over the range for which it is intended.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36892"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Thu, 10/12/2015 - 07:50.</div>
    <div class="content">
     <blockquote><p>From what you have written, and from the questions that you have asked in this thread, I think I am right in saying that you have little or no understanding of electrical engineering.</p>
</blockquote>
<p>Little, for this reason i am here... to learn a little more :-))</p>
<p>What i am saying is: esp8266, 10 bits dac (really is not a big trouble), but their range really is a trouble because although it supports 3v... all values bigger than 1 v gives maximum result: so, for example:</p>
<p>0.5v....500</p>
<p>0.7v....700</p>
<p>1v...1024</p>
<p>1.5v..1024</p>
<p>3v....1024</p>
<p>If we add that we must convert the AC to DC signal ... seeking an average &quot;0&quot; value, and we only have a range of work of 1V, furthermore, the margin of error of a CT 100A in low workloads is greater than a CT of 20 or 30A...</p>
<p>In short , what I wanted to say is that esp8266 and CT 100A are not a good dance partner (usually, but in my case is enough for my needs).<br />
&nbsp;</p>
<p>
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36909"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9006.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9006.png" alt="alexg&#039;s picture" title="alexg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9006.html" title="View user profile.">alexg</a> on Fri, 11/12/2015 - 06:52.</div>
    <div class="content">
     <p>Hi guys,</p>
<p>Let me start by saying I really know nothing about electrical engineering. I m just playing with this stuff and looking up to experts like you to gaing some additional understanding. Thank you.</p>
<p>In the meantime I have also ordered a 30A CT :)</p>
<p>Helianto: NodeMcu board does have a voltage divider on the analog pin&nbsp;https://raw.githubusercontent.com/nodemcu/nodemcu-devkit/master/Documents/NODEMCU_DEVKIT_SCH.png</p>
<p>Robert, i really did this as a working proof expermient, i need to calibrate it a lot more, after i understand it a lot better. Currently, as it is, i m passing through another voltage divider that on the board, before the analog port, which i am sure affects readings and noise quite a bit.</p>
<p>I have also realized i probably used the wrong burden, 33 instead of 23ohms</p>
<p>Whenever you can spare a moment, i ve got some more questions:</p>
<p>- in the test i ve done i went with 2 same value resistors and power from 3v3. The measured voltage at the intersection was not exactly 1.65, it was withing 0.02 volts i think, would this affect the emonlib calculations? Do i need to make sure the voltage is perfectly half? or in the case of 1v ref exactly 0.5v?</p>
<p>- if i understood correctly your posts above, in reality to measure 100A, at 1v, 10 bits, i really have got only 333 real values that i can read on the ADC port. That would mean a resolution of 0.3A per unit. &nbsp;Can I play with the burden resistor to measure 25A for instance, something like 7ohm&nbsp;@1v vref? Would this not increase the accuracy? You woudl then have 0.075A per value...</p>
<p>- if it is even possible, woud the above also increase noise significantly?</p>
<p>I am approacing this with baby steps... for obvious reasons :P</p>
<p>Cheers guys</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36911"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Fri, 11/12/2015 - 08:13.</div>
    <div class="content">
     <blockquote><p>Helianto: NodeMcu board does have a voltage divider on the analog pin&nbsp;https://raw.githubusercontent.com/nodemcu/nodemcu-devkit/master/Documents/NODEMCU_DEVKIT_SCH.png</p>
</blockquote>
<p>Your are right... thanks (i am using lolin, and have seen there is a resistor divider too... 200k and 100k).</p>
<p>&nbsp;</p>
<p>One option, if you want to use esp8266 with 100A CT is to add one MCP3421 (18 bits resolution, much bigger voltage range...)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36912"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9006.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9006.png" alt="alexg&#039;s picture" title="alexg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9006.html" title="View user profile.">alexg</a> on Fri, 11/12/2015 - 08:32.</div>
    <div class="content">
     <p>not set on using 100A CT, that s just what i had around.</p>
<p>currently i m just trying on different things, trying to get to the most convenient solution. the adc you sent or any other external iic adc chip&nbsp;might just be it as it would work with an esp-01 :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36923"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 11/12/2015 - 13:02.</div>
    <div class="content">
     <p>alexg:<br />
<i>"- in the test i ve done i went with 2 same value resistors and power from 3v3. The measured voltage at the intersection was not exactly 1.65, it was withing 0.02 volts i think,"</i></p>
<p>That is to be expected. Checking the colour code on the resistor will tell you, but my guess is they will be at best 1% tolerance. So the worst case is one is 1% high, and the other 1% low. If you do the maths, you'll see that the midpoint can be 2% wrong. You are closer than that.</p>
<p><i>" would this affect the emonlib calculations?"</i></p>
<p>Yes, you allow for it by reducing the voltage swing that your input sees. Taking silly numbers for the sake of making it clear, if your input range is 0 - 1 V and the midpoint is at 0.4 V, then the input can only swing 0.4 V in the negative direction, so the <b>peak to peak</b> swing is reduced from 1 V to 0.8 V.</p>
<p><i>"Do i need to make sure the voltage is perfectly half? or in the case of 1v ref exactly 0.5v?"</i></p>
<p>Ideally, yes. In practice, you cannot. Just get as close as you can, realistically.</p>
<p><i>"if i understood correctly your posts above, in reality to measure 100A, at 1v, 10 bits, i really have got only 333 real values that i can read on the ADC port. That would mean a resolution of 0.3A per unit.  Can I play with the burden resistor to measure 25A for instance, something like 7ohm @1v vref? Would this not increase the accuracy? You woudl then have 0.075A per value..."</i></p>
<p>I don't understand what you are trying to say there. There are 4 factors that interact.<br />
1. The current transformer ratio,<br />
2. The burden resistor,<br />
3. The ADC input range,<br />
4. What happens in the software.</p>
<p>The first 3 are simple, no.4 is very complicated.</p>
<p>If you have a 1 V ADC input range, you have a maximum possible input swing of 1 V peak-peak. If your input is a sine wave, that equates to 0.3536 V rms. Subtract from that a few percent for the bias resistor, burden resistor and CT tolerances and a working number is 0.333 V rms.</p>
<p>Next, choose a CT that will handle a close as possible but more than the maximum current you need.<br />
If it's a "voltage output" type, Choose one with 0.333 V output. If it's a true current output, choose your burden resistor to give you 0.333 V or less (but as close as possible) at the maximum current you want to measure (NOT at the CT's maximum current). </p>
<p><i>"if it is even possible, woud the above also increase noise significantly?"</i></p>
<p>I believe most of the noise, in the Atmel 328P at least, gets into the ADC via the analogue reference, so when you have minimised the noise itself through filtering and careful pcb layout, the only way to minimise the effect of the noise is to ensure that your input signal is as large as possible. The steps above should do that and you should have the best noise performance.</p>
<p>The ADC resolution doesn't really affect matters much until the amplitude of the input gets very small. This is because you are digitising a sine wave and averaging over many cycles, and you don't sample each cycle at exactly the same places, so the result is a bit like oversampling and you can actually measure small inputs more accurately than you would at first expect.</p>
<p>But unfortunately, you have only the single ADC input, so your noise is automatically rectified and added to the wanted input signal. The best you can do is subtract a 'best guess' in software to correct as near as you can the value you read.</p>
<p>As far as I'm aware, the YHDC SCT-013-030 is exactly the same as the SCT-013-000 except that it has an internal burden resistor.</p>
<p>Looking at that circuit diagram, if I read it correctly, the ADC input is available on a pin (14). I think if you are using low value resistors (680 &Omega; &amp;3.9 k&Omega;?) for the bias chain, 100 k&Omega; in parallel won't make a measurable difference and you can forget it and connect the "Building Blocks" circuit (with the bias adjusted to 0.5 V) to pin 14.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36925"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9006.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9006.png" alt="alexg&#039;s picture" title="alexg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9006.html" title="View user profile.">alexg</a> on Fri, 11/12/2015 - 13:25.</div>
    <div class="content">
     <p>Hi Robert, thanks for taking the time.&nbsp;</p>
<p>I think what i was asking was if i could make the 100A&nbsp;CT i have a 25A CT by adjusting the burden resistor...</p>
<p>This would also make it more accurate as for the same 0.333v measured, i would have a higher resolution.&nbsp;</p>
<p>I am not good at explaining this right, you can safely ignore and not bother with everything i said after adjusting the burden resistor :P</p>
<p>thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36967"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Sun, 13/12/2015 - 22:51.</div>
    <div class="content">
     <p><a href="http://www.seeedstudio.com/recipe/377-esp8266-iot-energy-monitor.html" title="http://www.seeedstudio.com/recipe/377-esp8266-iot-energy-monitor.html">http://www.seeedstudio.com/recipe/377-esp8266-iot-energy-monitor.html</a></p>
<p>Here they use a separate ADC unit to measure power. They also use emonlib.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36969"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 13/12/2015 - 23:38.</div>
    <div class="content">
     <p>I explained how to calculate the burden resistor for ANY maximum current in my post of Tue, 08/12/2015 - 22:27.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36984"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9006.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9006.png" alt="alexg&#039;s picture" title="alexg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9006.html" title="View user profile.">alexg</a> on Mon, 14/12/2015 - 12:35.</div>
    <div class="content">
     <p>thanks Robert, very much appreciated</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38969"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9414.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="litris&#039;s picture" title="litris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266, emonlib and thingspeak</h3>

    <div class="submitted">Submitted by <a href="../user/9414.html" title="View user profile.">litris</a> on Mon, 01/02/2016 - 13:49.</div>
    <div class="content">
     <p>Hello, what values you used for the ESP in the end it is not clear which values were used;-)</p>
<p>Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11713"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-BORm5YVI0btZFtWn4locuMDCgWtMvObFSx03yRbxxDQ" value="form-BORm5YVI0btZFtWn4locuMDCgWtMvObFSx03yRbxxDQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
