<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/6067 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emoncms Temperature and setpoint graph | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emoncms Temperature and setpoint graph</h3>
        <span class="submitted">Submitted by <a href="../user/7019.html" title="View user profile.">naguirre</a> on Wed, 05/11/2014 - 20:38</span>
        <div class="content"><p>Hi,</p>
<p>I&#39;m using emoncms to log all the physical values of my home automation installation, mainly the temperature of my living room and the global power.</p>
<p>I host my own emoncms server, and i&#39;m using the stable tag v8.3.6.</p>
<p>About the temperature, i have a regulated thermostat, and log the temperature and the setpoint value. I display both value on a multigraph, the result is here :</p>
<p><a href="http://emoncms.enna.me/nico" title="http://emoncms.enna.me/nico">http://emoncms.enna.me/nico</a></p>
<p>I&#39;m quite happy with the temperature graph, but i would like that the setpoint graph doesn&#39;t display slope lines. Is that possible with emoncms ?</p>
<p>I may also log the heating information, if I do that would it be possible to create such graphs with emoncms: <a href="../../../anders.com/projects/thermostat-graph/images/n10e-daily.png" title="http://anders.com/projects/thermostat-graph/images/n10e-daily.png">http://anders.com/projects/thermostat-graph/images/n10e-daily.png</a></p>
<p>Best regards,</p>
<p>Nicolas</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5528.html" class="topic-previous" title="Go to previous forum topic">‹ Notify Module</a>
              <a href="1966.html" class="topic-next" title="Go to next forum topic">showing 40 feeds to multiple users ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-24992"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms Temperature and setpoint graph</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 05/11/2014 - 21:15.</div>
    <div class="content">
     <p>Hi Nicolas, how are you obtaining the setpoint value? I think the problem is that you only get an input update whenever the value changes, which can result in an incomplete graph being displayed due to lack of datapoints&nbsp;within the selected timeframe. Is there anyway that you can get the setpoint&nbsp;value repeated/updated more regularly&nbsp;similar to the temperature feed?</p>
<p>As regards your second question, although I&nbsp;haven&#39;t&nbsp;tried it, you may be able to manipulate the inputs via the various processes to create the graph. This would need some experimenting and a lot of ingenuity though, depending upon your data sources.<br />
Example, if you have an input from your heating appliance such as &#39;off = 0&#39; and &#39;on = 1&#39;, then in your temperature input config add the function;</p>
<pre>
x input (your heating appliance input)</pre><p>So if your heater was switched off, the result would always be zero, whilst if switched on, the resultant value would be the current temperature. This would then display as per your example.</p>
<p>My preferred&nbsp;option is that&nbsp;this could quite easily be created if you used emoncms to obtain the data, pass it to node-red via mqtt where you can manipulate and filter the data, before passing it back to emoncms&nbsp;again via mqtt&nbsp;to record as feeds and subsequent graphs.The same process could deal with your other issue too.<br />
I had this sort of graph in mind for my system, and this is how I&#39;m going to achieve it.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24994"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7019.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="naguirre&#039;s picture" title="naguirre&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms Temperature and setpoint graph</h3>

    <div class="submitted">Submitted by <a href="../user/7019.html" title="View user profile.">naguirre</a> on Wed, 05/11/2014 - 23:15.</div>
    <div class="content">
     <p>Paul, thanks for your answers.</p>
<p>Indeed i was pushing&nbsp; the new value only when the setpoint was updated, I had in mind&nbsp; to save a bit of bandwidth :). Now i&#39;m updating all the values on the same batch. it seems better now.</p>
<p>As for heat values, I followed your advice and did the value transformations in my home automation application. Now it logged not only the living room temperature but also another value, product of heater state by the temperature. It should be ok, let&#39;s wait a few days to see the behaviour of the system</p>
<p>&nbsp;</p>
<p><i>[2 further copies of this post deleted by moderator - (RW) ]</i></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/6067"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-9cASR0qUbqgREVXkuQUhqFwMamTK6MujGHYjr_ZUukE" value="form-9cASR0qUbqgREVXkuQUhqFwMamTK6MujGHYjr_ZUukE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
