<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3792 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:08:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Induction cooker = resistive load ? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Induction cooker = resistive load ?</h3>
        <span class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Thu, 06/02/2014 - 18:05</span>
        <div class="content"><p>Hi,</p>
<p>1. I need a high resistive load to calibrate the current sensors of my EmonTX V3 but I have no electric heater or electric hot boiler at home. May I use my induction cooker ? Is it a pure resistive load ?</p>
<p>2. I am not sure to understand how to calibrate the current sensors. EmonTx send me an electrical power (P) and a voltage (V that I have already calibrated). But, my multimeter in series give me the current (I) and not the power. May I simply assume that P = U x I to calibrate my current sensors ?</p>
<p>Eric</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3927.html" class="topic-previous" title="Go to previous forum topic">‹ OEM in big building: RF reach? long-term maintainability? etc.</a>
              <a href="3911.html" class="topic-next" title="Go to next forum topic">Open source awards Edinburgh 26th Feb (Wed)  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-18231"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 06/02/2014 - 22:21.</div>
    <div class="content">
     <p>Firstly, the calibration instructions were all written for the emonTx V2.</p>
<p>Your induction cooker is most likely NOT a purely resistive load. There will be some serious electronics and control circuits inside that both generate the high frequency at which the induction hob operates and regulate the power; and while the designers will attempt to make the load look as nearly as possible resistive, and the current a relatively pure sine wave with the use of filters, I can be reasonably certain that it will not be purely resistive.</p>
<p>Normally, a current transformer is used with a single turn primary winding, but this does not have to be the case. You can pass multiple turns through the core, and that in fact is the way I test the c.t. If you have an electric kettle, that will be a resistive load of maybe 2 kW, the current will be about 8 A and if you pass that through the core 5 times, you will read a current of a little more than 40 A.</p>
<p>When you say your emonTx sends power, I think you mean the pre-loaded sketch in the emonTx V3? You can either calculate P = V x I and compare that with the power measured by the emonTx, or you can work backwards and calculate the current that the emonTx has measured knowing the power and the voltage, or you can modify the sketch to print the current (ct1.Irms, etc) to the serial monitor and read it directly. Of course, P = V x I is only true if you have a resistive load.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18235"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Thu, 06/02/2014 - 23:01.</div>
    <div class="content">
     <p>My Mk2i sketches have a calibration mode which allows accurate measurements to be taken with vary small loads.&nbsp; When run in &quot;Tallymode&quot;, the power content of every mains cycle is categorised or &#39;tallied&#39; within a pre-set range.&nbsp; If you have a 40W bulb, you might choose to set your range from 0W to 100W, for a resoultion of 1W per tally.&nbsp; Or you could set it to run from 30W to 50W and really focus in on the peak of the distribution. &nbsp;</p>
<p>On all Mk2 PV Router builds, calibration of real power is done using a single variable, powerCal.&nbsp; When Tallymode is giving you the answers that you expect, that means your calibration must be right.&nbsp; Having found the optimal cal value for a 40W resistive load, it should also be right for much larger ones too.&nbsp; If it&#39;s not, then something must be non-linear in your measurement system.</p>
<p>A common source source of non-linearity is if the input sensors run out of range.&nbsp; By running the first few sketches on my <a href="1757.html">Summary Page</a>, you should be able to check how much of the ADC&#39;s input range is being used, and ensure that it&#39;s never hitting the end-stops.&nbsp; Getting your input sensors properly scaled is a pre-requisite for whatever sketches you then wish to run.</p>
<p>The latest &quot;Tallymode&quot; sketch, Mk2_PV_Router_rev5c.ino, is also linked from the above summary page.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18466"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Sat, 15/02/2014 - 18:12.</div>
    <div class="content">
     <p>Hi all,</p>
<p>I calibrated my CT using a small boiler (400W) that someone gave me and I made multiple turns through the core to increase the precision.&nbsp; I like that tricks. KIS !</p>
<p>Now, I get some strange results when monitoring the power of my induction cooker. I would like you to help me understand what is going on because I &#39;m lost.</p>
<p>Here is what I&#39;m monitoring with the main EmonTx V3 Firmware :<br />
	&nbsp;&nbsp; - one CT is dedicated to the cooking power (&quot;cuisson&quot; in french, purple line on the attached graph). I have one pure electric oven and the induction cooker. In the fuse box, I put the two phases in the same CT)<br />
	&nbsp;&nbsp; - one CT is dedicated to the ventilation system power (&quot;VMC&quot; in french, blue line on the attached graph)<br />
	&nbsp;&nbsp; - one CT is dedicated to the electric sockets power (&quot;Prises elec&quot; in french, red line on the attached graph)<br />
	&nbsp;&nbsp; - one CT is dedicated to the total power (&quot;Global&quot; in french, beige line on the attached graph) The CT is around the main cable coming from my electricity supplier meter. Between the fuse box and the utility meter.<br />
	&nbsp;&nbsp; - one CT (on another EmonTx) is dedicated to the electrical power of my gas boiler .(&quot;Chaudiere&quot; in french, yellow line on the attached graph)</p>
<p>Then, I calculate the remaining power in EmonCMS (&quot;autres&quot; in french, green line on the attached graph) using the input processing. Remaining power = total_power - cooking_power - ventilation_system_power - socket_power - boiler_power.</p>
<p>
	1. First observation :<br />
	When my induction cooker is off, the CT reports a negative power (-15W). The CT is well set as I get a positive power when the induction cooker is on. When disconnecting the induction cooker from my fuse box, the CT indicate a null power and the remaining power lost 15 W. The total power is not affected. So I guess that the CT on the induction cooker is wrong but not the one on the main circuit.<br />
	(note that this behavior is unchanged if I disconnect or not the oven).</p>
<p>2. Second observation :<br />
	When the induction cooker operates, it works intermittently. It operates for some time (let&#39;s say one second) and then there is rest period (let&#39;s say half second). The rate depends on the heating demand. My first feeling was that it would be possible to monitor the electricity demand of my induction cooker with the EmonTx main sketch that use a discrete sampling method. On a long time period, the average value should have been right. Few time later, I realized that is not the case. Moreover, I got some negative values for the &quot;remaining power&quot; when the cooker power is high and the total power is low. I know my english is bad so please have a look on the attached graph (discrete).</p>
<p>3. So I move to the continous sampling sketch (without calibration). With that code (great work, I love the comments !), I get the same behaviour when the cooker if off (-15W). When it operates, the global electricity demand seems to be measured in a better way but I have still a problem with the CT on the cooker. When the cooker operates, the total power increases by 1500 W but the cooking power increases only by 1300 W. As a result the remaining power increases artificially by 200W. Have a look on the second attached graph (continuous). It&#39;s clearer than a long explanation. Again, the CT on the induction cooker seems to underestimate the real power but not the one on the main circuit.</p>
<p>Now, all I know for certain is that :<br />
	- I should calculate the remaining power is the sketch itself to avoid shift time<br />
	- I will never buy again an induction cooker. It drives me crazy !</p>
<p>	What is the source of this misbehaviour ?<br />
	Is there a workaround using another sketch ?</p>
<p>Regards,</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18467"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 15/02/2014 - 21:47.</div>
    <div class="content">
     <p>Certainly, with a cooker that switches very frequently, you cannot use the discrete sampling sketch and you must use the continuous one. The discrete sample sketch was originally intended for battery operation as a way to extend battery life.</p>
<p>This &quot;I put the two phases in the same CT&quot; has me confused, because you also say &quot;The CT is around <strong>the</strong> main cable&quot;&nbsp; - &quot;the&quot; meaning there is only one main cable (brown) and of course one neutral (blue). Do you have a single phase supply as we do in the UK, or do you have a three-phase supply? If you really put two wires from different phases through the c.t., then the c.t. will measure the <strong>vector</strong> sum of the two currents, which will be wrong. And that could be your problem. Can you clarify this before we go further?</p>
<p>(Most of our sketches are for a single phase. Using a 1-phase sketch on a 3-phase supply, if a c.t. is on a different phase to the voltage adapter, you will not read the real power correctly, it will be wrong by a factor of cos(120&deg;) = -0.5)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18469"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sat, 15/02/2014 - 22:27.</div>
    <div class="content">
     <p>As Robert says, &nbsp;it only makes sense to co-clamp 2 circuits that are on the same phase. &nbsp;But assuming for a minute that was just a language issue, and what you really meant to say was:</p>
<p>&quot;I put the two circuits in the same CT&quot;</p>
<p>and your entire house is a single-phase house... then....</p>
<p>&nbsp;</p>
<p>I suspect what you&#39;re seeing is small phase error in the CT that is clamped around the cooker circuits. &nbsp;Are you able to display the RMS current on the induction cooker while it&#39;s in standby? &nbsp;I bet it&#39;s relatively high, maybe 0.3 amps or so (for a standby apparent power load of about 80VA). &nbsp; When you&#39;re measuring something that&#39;s almost purely reactive, that power vector is very close to vertical, so just a few degrees of phase error in your CT makes a &nbsp;huge difference to the real power. &nbsp;And if the error is in the right direction, it&#39;ll &nbsp;push the vector into the next quadrant, which will give you a negative real power reading.</p>
<p>Unfortunately, unless you spend up big on CTs, phase error Vs current is far from a flat line... it varies with current signicantly. There&#39;s an analysis of that in the building blocks section. &nbsp; So trying to find a calibration adjustment that will work well when your induction cooker and oven are running flat out, and also work well when it&#39;s only drawing 0.3 amps is difficult.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18471"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 15/02/2014 - 22:21.</div>
    <div class="content">
     <p>dBC - I was trying to keep it simple until we know the system!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18476"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Sun, 16/02/2014 - 08:48.</div>
    <div class="content">
     <p>Hi,</p>
<p>My home is a single-phase house.&nbsp;</p>
<p>I said &quot;I put two phases in the same CT&quot; but you must read &quot;two circuits in the same CT&quot;. I put together in the CT the brawn cable coming from my induction cooker and the one coming from my oven. If needed, I can disconnect on of those two circuits as each of them has got a specific circuit breaker.</p>
<p>As it is now, it&#39;s uneasy to measure the current on my induction cooker when it is in standby with a multimeter. Firstly, I would like to avoid modifying my electrical installation. The documentation of my induction cooker says that the power in standby is 1-2W.</p>
<p>Eric</p>
<p>&nbsp;</p>
<p>EDIT : if it may help, note that the EmonTx reports -15 W when the induction cooker is in standby and when the total power is low. When the total power is increasing (because another device is operating), the cooker power in standby is about -25W. You can have a look on the attached graph. It is during night time. The total power is low. When the fridge (red line) is starting a new cycle, the induction cooker is decreasing (purple line) and the remaining power (gren)&nbsp; is increasing.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18480"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 16/02/2014 - 09:18.</div>
    <div class="content">
     <p>Actually, I meant use the CT (not your multimeter) &nbsp;with an appropriate sketch, to measure the standby current to the induction cooker. &nbsp;You&#39;ll probably find it&#39;s quite a bit higher than 9mA &nbsp;(9mA is what you&#39;d expect if it were purely resistive and a 2W load). &nbsp; It&#39;s that extra current (and reactive power), that can show up as negative real power if the phase error is out a bit.</p>
<p>But given it seems related to your other loads, I may be barking up the wrong tree.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18484"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 16/02/2014 - 14:35.</div>
    <div class="content">
     <p><em>&quot;My home is a single-phase house.&quot; </em>Good, that makes everything simpler and removes a lot of confusing possibilities.</p>
<p><em>&quot;two circuits in the same CT&quot;&nbsp; </em>That is fine, so long as they both go through in the same direction. The currents will add, and that is what you want. (If they go through in opposite directions, the currents will subtract.)</p>
<p>dBC:<em> &quot;But given it seems related to your other loads, I may be barking up the wrong tree.</em>&quot; That is confusing me too. If the two c.t&#39;s on different feeds are very close, you might just get some leakage flux from one into the other. 15 or 20 W&nbsp; is 65 mA = 0.065 % of maximum reading, so it is in reality below the level we can accurately measure with a 10-bit ADC. (Much better if it is CT4 though.)&nbsp; Or it could just be voltage pickup into the current input. I&#39;ve never tried to measure that, but Martin Roberts reported it with a V2 emonTx.</p>
<p>Eric:<br />
	Did you check the PHASECAL for each of your inputs? Can you do it for the cooker c.t. at both a high load and a low load - and using a pure resistance of course? You&#39;ll need to take the c.t. off the cooker feed and put it on another - temporarily - to do this. I expect you find you need two different values of phasecal. (Look at the report on the c.t&#39;s to see how the phase error changes with current.)</p>
<p>You can find out if dBC was correct about your cooker having a very low power factor on standby, meaning it has a low power but high VA. I think there is a very good chance that he was right. EmonLib calculates all the numbers but the V3 sketch does not print them by default.&nbsp; After the line &quot;ctx.calcVI(no_of_half_wavelengths,timeout);&quot; where you replace &quot;ctx&quot; with the ct that your cooker circuit is using, you need to add:</p>
<p>Serial.print(&quot;V&nbsp; = &quot;); Serial.print(ctx.Vrms);<br />
	Serial.print(&quot;&nbsp;&nbsp; Irms= &quot;); Serial.print(ctx.Irms);<br />
	Serial.print(&quot;&nbsp;&nbsp; P&nbsp;&nbsp;&nbsp; = &quot;); Serial.print(ctx.realPower);<br />
	Serial.print(&quot;&nbsp;&nbsp; VA&nbsp; = &quot;); Serial.print(ctx.apparentPower);<br />
	Serial.print(&quot;&nbsp;&nbsp; pf &nbsp; = &quot;); Serial.println(ctx.powerFactor);</p>
<p>If you can get the values for the cooker on standby and at a number of heat settings, that might tell us what is happening inside the cooker.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18543"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Wed, 19/02/2014 - 14:15.</div>
    <div class="content">
     <p>hI,</p>
<p>Thank you both for helping me to solve this issue.</p>
<p>I didn&#39;t checked the PHASECAL for each of my inputs. How to do that ? I mean using which sketch.</p>
<p>As Robert suggested, I modified the discrete sampling sketch to display further details (Irms, Vrms, AP, RP, and PF). I did it with the 4 CT set like explained above but I disconnect every circuits except :</p>
<p>&nbsp;&nbsp; - the induction cooker on the CT1</p>
<p>&nbsp;&nbsp; - my PC, my internet box, an my emonbase on the CT2</p>
<p>&nbsp;&nbsp; - the main current is coming through the CT3</p>
<p>&nbsp;&nbsp; - my ventilation system on the CT4</p>
<p>&nbsp;</p>
<p>Firstly, the cooker is in standby, then set to 3 on 9,&nbsp; then set to 6 on 9, the set at the maximum power (9/9).</p>
<p>Sometimes the power is low as my cooker is switching continuously (except at the maximum power)</p>
<p>Endly, I set it in standby but a fan is operating to cool the cooker. Attached are the traces on the serial.</p>
<p>I also perform that test sequence with the continuous sketch. See attached.</p>
<p>&nbsp;</p>
<p>Regards,</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18550"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 19/02/2014 - 17:53.</div>
    <div class="content">
     <p>That (the discrete sampling sketch) is very helpful. This is what I think the numbers mean:</p>
<p>The negative real power at 8.4 A (e.g. V1&nbsp; = 227.86&nbsp;&nbsp; Irms= 8.42&nbsp;&nbsp; P&nbsp;&nbsp;&nbsp; = -1882.22&nbsp;&nbsp; VA&nbsp; = 1919.33&nbsp;&nbsp; pf&nbsp;&nbsp; = -0.98) and the negative power factor mean that c.t is the wrong way round on the cable. By convention, I call imported and consumed power positive, and generated and exported power negative. [You can do the opposite if you wish, as Robin does with his energy diverter.] But whichever way you do it, CT1 &amp; CT3 are opposite to CT2 and CT4. Therefore, for consistent readings, you need to reverse one pair of c.t&#39;s on their respective cables.</p>
<p>The very poor power factor when only the fan is operating (0.14 - 0.16) means that accurate adjustment of phasecal is essential. The power should still be same sign as when it is at full power. The phase error is far enough out to reverse the apparent direction of the power flow. You should use the same sketch to adjust phasecal that you intend to use permanently (probably the continuous one?) but unfortunately Robin does not calculate the RMS voltage and current, so I&#39;ll ask him what he suggests - normally he says phase calibration is unimportant and that&#39;s true where the load is very nearly pure resistance, but for you that&#39;s not the case.</p>
<p>Let us see what Robin says before you do any adjustments or more tests.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18551"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Wed, 19/02/2014 - 18:44.</div>
    <div class="content">
     <p>No pressure eh ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18562"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Wed, 19/02/2014 - 21:18.</div>
    <div class="content">
     <p>I was aware that the CT 1 and 3 are in the &quot;wrong&quot; way round on the cable. So I added a calibration (&quot;x -1&quot;) in EmonCMS to that particular inputs to get a positive value. I understand it can be confusing for you but it&#39;s quite uneasy for me to reverse them (few space in my fuse box). If it is not mandatory to have all CT in the same way to make the system work, I would prefer not to re-open my fuse box</p>
<p>My intention is to use a continuous sampling sketch as a discrete one can&#39;t works fine with my induction cooker that switches very frequently. If I understand you well, the problem comes from this particular load which is not purely resistive. Anyway I do not understand why I do not see the same power on the CT cooker and on the CT round on the main cable.</p>
<p>Regards,</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18563"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Wed, 19/02/2014 - 21:40.</div>
    <div class="content">
     <p>Robin, I just see you reply. Take it easy, I am not in hurry !</p>
<p>But for sure, I would really appreciate to understand what is going wrong</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18564"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 19/02/2014 - 22:23.</div>
    <div class="content">
     <p>I understand now why the c.t&#39;s are &#39;wrong&#39; - no problem.</p>
<p>The problem with the values not adding up correctly must be calibration. I&#39;ve copied your &quot;continuous&quot; values into a spreadsheet so that I can manipulate the numbers. If I make a column = (-CT1* 1.01) + CT2 + CT4&nbsp; and a second column = (-C3*0.921), then except for the time when the cooker was in standby with cooling fan off, and a few scattered values elsewhere, the two columns agree to within about &plusmn;4 W.&nbsp; The error when the cooker was in standby with cooling fan was off was larger, about 10 W, and I think that is because when the power factor is so low, the phase error makes the relative error in the power very large. I think if you carefully calibrate all four channels including the phase calibration, then the numbers will agree much more closely.</p>
<p>Robin won&#39;t have time to do anything due to his business venture developing and making the energy diverter taking up all of his time.&nbsp; I think I know how to measure the phase angle to allow you to set the phase angle correction, but it needs a new sketch writing that will sample the channels with the same timing differences as the &quot;continuous&quot; sketch and then analyse the phase error. Unfortunately, the timing inside the &#39;discrete&#39; sketch is different and therefore it is not possible to use the values from that in the &#39;continuous&#39; sketch.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18589"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 20/02/2014 - 14:03.</div>
    <div class="content">
     <p>Eric:</p>
<p>If you have access to a suitable capacitor (both the voltage rating <u><strong>and</strong></u> the current rating must be suitable), you could use that to set phasecal in your continuous sketch. If your load is only the capacitor, real power should be zero as the current wave is in exact quadrature with the voltage wave. You adjust phasecal by trial and error to get zero real power.</p>
<p>Note: there&#39;s an editing slip-up in the code that needs correcting.</p>
<p>&nbsp; phaseCal_int_CT1 = phaseCal_CT3 * 256; // for integer maths<br />
	&nbsp; phaseCal_int_CT2 = phaseCal_CT3 * 256; // for integer maths<br />
	&nbsp; phaseCal_int_CT3 = phaseCal_CT3 * 256; // for integer maths<br />
	&nbsp; phaseCal_int_CT4 = phaseCal_CT3 * 256; // for integer maths</p>
<p>It means all four c.t&#39;s get the phasecal for CT3, and that&#39;s not what is intended. The correction is obvious.</p>
<p>I am using the sketch as a starting point for a dedicated phasecal sketch, and spotted the error.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18683"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 23/02/2014 - 16:30.</div>
    <div class="content">
     <p>I have just run some tests using the emonTx V3 and the &quot;emonTxV3_continuous.ino&quot; sketch. My test load was 3 &micro;F of capacitance with three primary turns through the c.t. - a black-lead YHDC SCT-013-000, and an Ideal/TDC adapter run at 230 V, 50 Hz. The test current was measured at 3 x 0.24 A = 0.72 A. The values of phasecal I got to give zero real power were:</p>
<table border="1" cellpadding="1" cellspacing="1" height="98" width="381">
<thead>
<tr>
<th scope="col">
				Input</th>
<th scope="col">
				Phasecal</th>
</tr>
</thead>
<tbody>
<tr>
<td class="rtecenter">
				CT1</td>
<td class="rtecenter">
				0.22</td>
</tr>
<tr>
<td class="rtecenter">
				CT2</td>
<td class="rtecenter">
				0.41</td>
</tr>
<tr>
<td class="rtecenter">
				CT3</td>
<td class="rtecenter">
				0.60</td>
</tr>
<tr>
<td class="rtecenter">
				CT4</td>
<td class="rtecenter">
				1.28</td>
</tr>
</tbody>
</table>
<p>Bear in mind those are the values for one particular c.t. and one particular adapter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18684"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 23/02/2014 - 17:37.</div>
    <div class="content">
     <p>Those values look very encouraging, Robert.&nbsp;</p>
<p>With five analogue measurements per loop, the time period between consecutive Vsamples is partitioned into five.&nbsp; CT1 is sampled at the 20% point, CT2 at the 40% point, and so on.&nbsp; Given that the sensors at CT1 - CT3 are physically similar, the only difference between them should arise from their different sampling point within the measurement period.&nbsp; I would therefore expect their optimum phaseCal values to increase by 0.2 each time, which they very nearly do.&nbsp;</p>
<p>CT4 has a different value of burden resistor so this could explain why its optimal phaseCal value does not follow the same sequence.&nbsp; It might be interesting to check CT4 again when using the same value of burden (18R?) as the other three.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18686"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 23/02/2014 - 17:53.</div>
    <div class="content">
     <p>And then it might not, as I&#39;ve taken the test rig apart now! ! !&nbsp; We know both from theory and practice that the value of the burden has a big effect on the phase error, so I didn&#39;t bother any more. These values are only indicative of the values somebody else might see - they are probably good as a starting point, and that&#39;s all you can say. The values were jittering by one digit about zero, I adjusted the value so that I got predominantly &#39;0&#39; with a roughly equal scatter of &#39;-1&#39; and &#39;1&#39;. I couldn&#39;t reliably get a third figure for phasecal as the system voltage bouncing around changed the power by more than a change of 0.005 to the value of phasecal did.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18811"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Wed, 26/02/2014 - 21:00.</div>
    <div class="content">
     <p>Hi,</p>
<p>I&#39;m still following that discussion with a lot of interest. Thank you both for helping me. I am very surprised that nobody else faced this issue before me. I guess it&#39;s because I put a CT on a particular load that is mainly not resistive.&nbsp; Whatever it may be, it would be worth rewriting the calibration guide for the emontxV3.</p>
<p>Unfortunately, I have no time to perform the phasecal adjustments now with my adapter and my CTs. Moreover, I have no capacitor and no good multimeter... So, I will first set the value of phasecal_CT1 to get 1W (real power) sent by the continuous sketch. This is the power claimed by the worksheet of my induction cooker when it is in standby. Then I will add 0.2 for each others phasecal values.</p>
<p>Regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18819"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Induction cooker = resistive load ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 26/02/2014 - 23:42.</div>
    <div class="content">
     <p>As you say, you seem to have a load with a very poor power factor, and it is there that errors in the phase measurement show up.</p>
<p>Most people can be expected to have a purely resistive load (i.e. an electric heater - kettle, convector etc) but few can be expected to have, or go out and purchase, a large mains rated capacitor. It was purely by chance that I happened to have 2 very old ones - a 1 &micro;F and a 2 &micro;F (not even a 2.2 &micro;F! ! !) that were suitable. So I am not sure that adding this to the calibration instructions would be very helpful. However, the default values in the sketch have been changed.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3792"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-rBdCp5zCIT7Gi8eNodEcN5wv0jQuSWuNa5fV7WBYd1Q" value="form-rBdCp5zCIT7Gi8eNodEcN5wv0jQuSWuNa5fV7WBYd1Q"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/3792 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:08:19 GMT -->
</html>
