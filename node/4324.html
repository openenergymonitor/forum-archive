<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/4324 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:24:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Is there any way to create and input from a feed &quot;Log to Feed&quot; | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Is there any way to create and input from a feed &quot;Log to Feed&quot;</h3>
        <span class="submitted">Submitted by <a href="../user/5619.html" title="View user profile.">knicely</a> on Sun, 23/03/2014 - 20:50</span>
        <div class="content"><p>I have spent much of the day setting up my system and I am finding the on several occasions I need the ability to take the output from one &quot;log to feed&quot; to a new input, but it does not appear that I can do that. &nbsp;</p>
<p>As an example, I have a solar generation output that I have applied a &quot;+&quot; and &quot;x&quot; calibration to. &nbsp;I also had a power consumption input that I had applied a &quot;+&quot; and &quot;x&quot; calibration to. &nbsp;Now I want to do NET Power by subtracting the Solar from the Consumption. &nbsp;To do that I subtract the Solar from the consumption, but that is the Solar input, not the calibrated Solar. &nbsp;I can reapply the &quot;+&quot; calibration but I cannot reapply the &quot;x&quot; calibration. &nbsp;</p>
<p>I solved that for now by applying the calibration in the sketch, but it would be quite handy if I could just use the feed that is already calibrated as a new input.</p>
<p>Any suggestions. &nbsp;Am I missing something?</p>
<p>Ken Nicely</p>
<p><a href="http://www.nicelyweb.com/" title="www.nicelyweb.com">www.nicelyweb.com</a></p>
<p><a href="http://www.ke3c.com/" title="www.ke3c.com">www.ke3c.com</a></p>
  <div class="forum-topic-navigation clear-block">
          <a href="3456.html" class="topic-previous" title="Go to previous forum topic">‹ I can not download the file for Raspberry Pi + Harddrive + Emoncms</a>
              <a href="4386.html" class="topic-next" title="Go to next forum topic">Can&#039;t visualise v7 feeds in v8.0.3 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-19694"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 23/03/2014 - 21:00.</div>
    <div class="content">
     <p>I&#39;ve often thought that it would be useful to have a &#39;clear&#39; process function, which would stop the previous values from being carried forward in the process chain. If we did we could insert a &#39;clear&#39; after the &#39;+&#39;, &#39;x&#39; etc &#39;log &nbsp;to feed&#39;, and then add &#39;+ input&#39; to further process the same input and subsequently log it to a different feed.</p>
<p>Does that make sense?</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19697"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5619.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5619.jpg" alt="knicely&#039;s picture" title="knicely&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/5619.html" title="View user profile.">knicely</a> on Sun, 23/03/2014 - 21:15.</div>
    <div class="content">
     <p>Yes, that would be similar and also helpful. &nbsp;I might just have to learn PHP better.&nbsp;</p>
<p>Ken</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19699"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 23/03/2014 - 21:30.</div>
    <div class="content">
     <p>Ken - Only yesterday I posted a feature request &nbsp;to use feeds in calcs <a href="4299.html">http://openenergymonitor.org/emon/node/4299</a>&nbsp;It would make emoncms&nbsp;far more versatile. nice to know I&#39;m not the only one thinking along these lines.</p>
<p><span style="font-size: 12px;">Paul - You can reset a feed using allow positive followed by allow negative (basically allow nothing) then add input to start afresh, Schism took this idea and created a reset process for </span>emoncms<span style="font-size: 12px;"> see&nbsp;</span><a href="3915.html" style="font-size: 12px;">http://openenergymonitor.org/emon/node/3915</a><span style="font-size: 12px;">. </span></p>
<p><span style="font-size: 12px;">I am using emoncms.org currently so cannot use it but if you see attached, I reuse inputs several times. the grey areas mark the resets.</span></p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19700"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 23/03/2014 - 21:35.</div>
    <div class="content">
     <p>Good thinking Paul!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19707"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 23/03/2014 - 22:22.</div>
    <div class="content">
     <p>I think there is a strong argument for using feeds in input processing, if you agree please post a comment <a href="4299.html">here</a>&nbsp;as I&#39;m sure it&#39;s not an easy task but if there is enough support then who knows?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19816"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5624.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5624.jpg" alt="KlausA&#039;s picture" title="KlausA&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/5624.html" title="View user profile.">KlausA</a> on Tue, 25/03/2014 - 21:35.</div>
    <div class="content">
     <p>For using a +feed or -feed&nbsp; I modified in module Input the file process_modell.php</p>
<p>The Function get_process_list()</p>
<p>I added two lines</p>
<p>$list[29] = array(_(&quot; + feed&quot;),ProcessArg::FEEDID,&quot;add_feed&quot;,0,DataType::UNDEFINED,&quot;Input&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Klaus 24.2.2014<br />
	$list[30] = array(_(&quot; - feed&quot;),ProcessArg::FEEDID,&quot;sub_feed&quot;,0,DataType::UNDEFINED,&quot;Input&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Klaus 24.2.</p>
<p>you also have to define this two functios</p>
<p>public function add_feed($feedid, $time, $value)<br />
	&nbsp;&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $last = $this-&gt;feed-&gt;get_timevalue($feedid);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $value = $last[&#39;value&#39;] + $value;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $value;<br />
	&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp; public function sub_feed($feedid, $time, $value)<br />
	&nbsp;&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $last&nbsp; = $this-&gt;feed-&gt;get_timevalue($feedid);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $myvar = $last[&#39;value&#39;] *1;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $value - $myvar;<br />
	&nbsp;&nbsp;&nbsp; }</p>
<p>thats it . After that you can add or substract a feed ID</p>
<p>Sorry but I am not php programmer. I program since 35 years in assembler&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19819"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 25/03/2014 - 22:09.</div>
    <div class="content">
     <p>perfect, I&#39;ve added your code in, and added divide by and multiply by feed.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19820"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5624.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5624.jpg" alt="KlausA&#039;s picture" title="KlausA&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/5624.html" title="View user profile.">KlausA</a> on Tue, 25/03/2014 - 22:15.</div>
    <div class="content">
     <p>thanks Trystan,</p>
<p>sorry but how do I get or where do I get this modified version?</p>
<p>In git development ? Do you have a link.</p>
<p>Up to now I do not really understand this git and how it works but I try!</p>
<p>Klaus</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19849"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 26/03/2014 - 17:53.</div>
    <div class="content">
     <p>Thanks guys the new functions are just what we needed !</p>
<p>I have just edited my local copy with the changes for now, when will they reach a released version? and will they be available on emoncms.org?</p>
<p>If possible would you include one more line</p>
<p class="rteindent1"><strong>$list[33] = array(_(&quot;Reset to ZERO&quot;),ProcessArg::NONE,&quot;reset2zero&quot;,0,DataType::UNDEFINED,&quot;Misc&quot;);</strong></p>
<p>with the function</p>
<p><strong>public function reset2zero($arg, $time, $value)<br />
	&nbsp;&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $value = 0;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $value;<br />
	&nbsp;&nbsp;&nbsp; }</strong></p>
<p>This would eliminate having to use allow positive and allow negative together to reset a processing chain. its a small difference but combined with the new feed functions it makes the process chains very easy to read. (see attached)</p>
<p>Along with the new button links to the individual feed visualizations and on-screen feed values this really is so informative and has become a pleasure to use.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19956"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5619.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5619.jpg" alt="knicely&#039;s picture" title="knicely&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Is there any way to create and input from a feed "Log to Feed"</h3>

    <div class="submitted">Submitted by <a href="../user/5619.html" title="View user profile.">knicely</a> on Fri, 28/03/2014 - 01:40.</div>
    <div class="content">
     <p>I just want to say thanks for the quick response on this. &nbsp;I implemented the +/- feed this evening and it works great. &nbsp;It is amazing how little code had to be added to make this happen. &nbsp;</p>
<p>A big thumbs up to KlausA!</p>
<p>Ken</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/4324"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-2-49JYkjPDfVlIsm6XXLD1v4dG-8Ka5iP9IuL7qQCvg" value="form-2-49JYkjPDfVlIsm6XXLD1v4dG-8Ka5iP9IuL7qQCvg"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/4324 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:24:44 GMT -->
</html>
