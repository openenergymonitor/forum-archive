<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10327 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:49:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Syncing between emonCMS installations | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Syncing between emonCMS installations</h3>
        <span class="submitted">Submitted by <a href="../user/7780.html" title="View user profile.">mpruessmeier</a> on Mon, 16/03/2015 - 01:50</span>
        <div class="content"><p>Hi,</p>
<p>i have some raspberry pi&nbsp;with emonCMS&nbsp;and now the first of them only with emonView&nbsp;running at different locations in place of our customers, where we a doing consulting&nbsp;in energy efficiency. Mostly the are connected via UMTS&nbsp;routers with prepaid cards and flat rate, which are running over the edge.</p>
<p>I now&nbsp;need to clone or sync the Inputs and feeds of this systems to a main server in one derection. I like to have a enonCMS&nbsp;installation at the customer to.&nbsp;I tried to handle this situation with &quot;Backup&quot; from usefullscripts, but that is&nbsp;not the Goldeneye, cause it does not work for multiple backups from multiple emonCMS installations, cause of Feed Numbers are not unique&nbsp;in this case.</p>
<p>I&nbsp;now tried to to use&nbsp;The emonView installation with pushing the inputs on multiple enonCms installations&nbsp;by the&nbsp;emonhub service. This&nbsp;works fine, but when there is a break in&nbsp;communication, we have missing data and no normal way to pull or push them a second time to the emonCMS installations.</p>
<p>1. I think it could be&nbsp;useful to have feed numbers starting by 1 for each user in emonCMS, so they are&nbsp;unique&nbsp;by userid and feednumber as primary key. I think this is not a so big change in code and could be very useful. same on all other keys, that are unique by itself, but not in this case.</p>
<p>2. it would be great by having userid&nbsp;as a generated&nbsp;unique key like apikey&nbsp;instead of the usernr. So&nbsp;it would be possible to&nbsp;identify identicle&nbsp;Users over multiple installations. A work around ist to copy and change the api keys by hand and use them as unique.&nbsp;</p>
<p>3. it would be nice to use property or installation instead of user in naming in this case. our work around for that is to use user as property.</p>
<p>Maybe, i hope I am starting&nbsp;here an interesting discussion about that.</p>
<p>PS. Tomorrow i have to change this Text by pc. Its not so easy to Write in Englisch&nbsp;with a ipad&nbsp;with German Language installed. Apple becomes more like microsoft&nbsp;;-( in The UX. &nbsp;(done that ;-)</p>
<p>greetings from good old Germany, Marc</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2820.html" class="topic-previous" title="Go to previous forum topic">‹ British Gas Smart Meters - Part 1</a>
              <a href="10368.html" class="topic-next" title="Go to next forum topic">Real Power ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-28889"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7780.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7780.jpg" alt="mpruessmeier&#039;s picture" title="mpruessmeier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Syncing between emonCMS installations</h3>

    <div class="submitted">Submitted by <a href="../user/7780.html" title="View user profile.">mpruessmeier</a> on Sat, 21/03/2015 - 20:43.</div>
    <div class="content">
     <p>Hmm, it looks like syncing is not interesting the community.</p>
<p>has nobody more the 1 emoncms servers running ???</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28894"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Syncing between emonCMS installations</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 21/03/2015 - 23:10.</div>
    <div class="content">
     <blockquote><p><em>&quot;I&nbsp;now tried to to use&nbsp;The emonView installation with pushing the inputs on multiple enonCms installations&nbsp;by the&nbsp;emonhub service. This&nbsp;works fine, but when there is a break in&nbsp;communication, we have missing data and no normal way to pull or push them a second time to the emonCMS installations.&quot;</em></p>
</blockquote>
<p>Depending on how long the network is down, how much data you are pushing you should be able to post to 2 emoncms&nbsp;servers local and remote without any data loss, emonHub has a default buffer size of 1000 frames but this can be set in the conf. I currently run with a buffer&nbsp;size of 20-30K frames on a read-only raspian&nbsp;(ie no caching) and&nbsp;can go over 48hrs without a network connection.</p>
<p>I have not tried to extend this further so I don&#39;t know the limits but considering that is a Pi B+&nbsp;with 512MB&nbsp;RAM if you were using a new Pi 2 B and had another half a gig available you could probably run for many weeks without a network connection and the data would be uploaded as soon as the network came up.</p>
<p>Beware this isn&#39;t intended as a back-up solution and in&nbsp;fact the data is volatile, if the Pi powers down before the network comes up the data is lost. The back up ultimately would be the remote server but this buffer should prevent any data loss due to network issues.&nbsp;&nbsp;try setting &quot;buffer_size = 100000&quot; for example in the remote servers [[[init_settings]]] in emonhub.conf.</p>
<p>Also if you want to have more control over apikeys&nbsp;you can. The users apikeys are randomly generated when a user is created via the &quot;register&quot; form. You could create a user using mySQL instead and insert your own user name password and apikeys. I am working on a install script for emoncms and that creates the first user (admin) based on the details supplied&nbsp;when the installer is started.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10327"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-AfL2ncJ3Kjcr4V-gThp7grNPkaVCwpzG8YpK-E_FCuQ" value="form-AfL2ncJ3Kjcr4V-gThp7grNPkaVCwpzG8YpK-E_FCuQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/10327 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:49:14 GMT -->
</html>
