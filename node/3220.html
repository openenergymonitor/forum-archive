<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3220 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:30:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Add data from csv file to emoncms | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Add data from csv file to emoncms</h3>
        <span class="submitted">Submitted by Guest on Sun, 24/11/2013 - 09:46</span>
        <div class="content"><p>Hi</p>
<p>I have got data logged on cvs file I would like to read it and use in emoncms .</p>
<p>Any ideas?</p>
<p>Max</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3244.html" class="topic-previous" title="Go to previous forum topic">‹ The Blackbox Project</a>
              <a href="3232.html" class="topic-next" title="Go to next forum topic">V3 pre assembled shop query ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-16427"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 25/11/2013 - 08:26.</div>
    <div class="content">
     <p>I don&#39;t think emoncms has this kind of import feature.</p>
<p>However, you could write a script that would read the .csv file and generate URLs according to the input API. That would be a nice and not so difficult way to learn the insides of the project.</p>
<p>There&#39;s an API help once you&#39;re logged in emoncms. In the input tab, if I remember well.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16429"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bumax&#039;s picture" title="bumax&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by bumax (not verified) on Mon, 25/11/2013 - 08:55.</div>
    <div class="content">
     <p>yes</p>
<p>it works now I am able to insert data from my weather station :-) with my pi</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16430"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 25/11/2013 - 09:54.</div>
    <div class="content">
     <p>Great.</p>
<p>Maybe you can post your script here in case it would be useful to anyone.</p>
<p>What kind of weather station is it ? Is it common ?</p>
<p>If the csv format is mainly used, other people may be interested.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16431"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Rickenbacker&#039;s picture" title="Rickenbacker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by Rickenbacker (not verified) on Mon, 25/11/2013 - 10:54.</div>
    <div class="content">
     <p>I for one would be interested.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16433"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bumax&#039;s picture" title="bumax&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by bumax (not verified) on Mon, 25/11/2013 - 13:21.</div>
    <div class="content">
     <p>The weater station is TFA Dotsmann DV928.</p>
<p>I don &#39;t know if it s common but I found some idea on web.&nbsp; I connect it to my Rpi with usb.&nbsp; Using lusblib and TE923 tools.</p>
<p>I made a litle script that read data from usb with TE923 and generate urls.&nbsp; And cron every 5 minutes.&nbsp; I am able to use T&deg; inside outside, humidy inside ouside, windspeed, pressure, rain gauge, and some other informations (wind direction,...).</p>
<p>All run on Rpi, EmonCms too.&nbsp; I put db on usb harddrive.&nbsp; Hope for along live :-)</p>
<p>I would like to make a diff&eacute;rent widget for them like raingauge, or wind direction.&nbsp; I have to read documentation ;-)</p>
<p>Hope it could help someone.</p>
<p>Max</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16434"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 25/11/2013 - 13:51.</div>
    <div class="content">
     <p>It may be interesting to integrate this feature in the gateway of the emonBase.</p>
<p>I can&#39;t do that myself without the test setup, but if anyone is interested, I can help. In this case, your script and maybe example files would help.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16438"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bumax&#039;s picture" title="bumax&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by bumax (not verified) on Mon, 25/11/2013 - 17:14.</div>
    <div class="content">
     <p>Here is my script.&nbsp;</p>
<p>Be indulgent I don&#39;t dev on linux ;-) normally.</p>
<p>te923con return value from weather station</p>
<p>here is the result</p>
<p>1385397125:17.90:46:3.50:80:i:i:i:i:i:i:i:i:1007.1:i:5:0:1:0.2:0.5:3.1:1069</p>
<p>Unixtime:T0:H0:T1:H1:T2:H2:T3:H3:T4:H4:T5:H5:PRESS:UV:FC:STORM:WD:WS:WG:WC:RC</p>
<p>-&nbsp; Unixtime - Current date / time in a unixtime stamp format.<br />
	-&nbsp; T0&nbsp;&nbsp;&nbsp; - temperature from internal sensor in &deg;C<br />
	-&nbsp; H0&nbsp;&nbsp;&nbsp; - humidity from internal sensor in % rel<br />
	-&nbsp; T1..5 - temperature from external sensor 1..4 in &deg;C<br />
	-&nbsp; H1..5 - humidity from external sensor 1...4 in % rel<br />
	-&nbsp; PRESS - air pressure in mBar<br />
	-&nbsp; UV&nbsp;&nbsp;&nbsp; - UV index from UV sensor<br />
	-&nbsp; FC&nbsp;&nbsp;&nbsp; - station forecast, see below for more details<br />
	-&nbsp; STORM - stormwarning; 0 - no warning, 1 - fix your dog<br />
	-&nbsp; WD&nbsp;&nbsp;&nbsp; - wind direction in n x 22.5&deg;; 0 -&gt; north<br />
	-&nbsp; WS&nbsp;&nbsp;&nbsp; - wind speed in m/s<br />
	-&nbsp; WG&nbsp;&nbsp;&nbsp; - wind gust speed in m/s<br />
	-&nbsp; WC&nbsp;&nbsp;&nbsp; - windchill temperature in &deg;C<br />
	-&nbsp; RC&nbsp;&nbsp;&nbsp; - rain counter (maybe since station starts measurement) as value</p>
<p>&nbsp;&nbsp; weather forecast means (as precisely as possible)<br />
	&nbsp;&nbsp;&nbsp;&nbsp; 0 - heavy snow<br />
	&nbsp;&nbsp;&nbsp;&nbsp; 1 - little snow<br />
	&nbsp;&nbsp;&nbsp;&nbsp; 2 - heavy rain<br />
	&nbsp;&nbsp;&nbsp;&nbsp; 3 - little rain<br />
	&nbsp;&nbsp;&nbsp;&nbsp; 4 - cloudy<br />
	&nbsp;&nbsp;&nbsp;&nbsp; 5 - some clouds<br />
	&nbsp;&nbsp;&nbsp;&nbsp; 6 - sunny</p>
<p>from: <a href="http://www.redeo.nl/2012/03/connecting-your-weather-station-to-your-nas-server/" title="http://www.redeo.nl/2012/03/connecting-your-weather-station-to-your-nas-server/">http://www.redeo.nl/2012/03/connecting-your-weather-station-to-your-nas-...</a></p>
<p>He does the same thing but without emoncms :-(</p>
<p>#!/bin/bash</p>
<p>OIFS=$IFS;<br />
	IFS=&quot;:&quot;;</p>
<p>var=$(/data/te923tool-0.5/te923con);<br />
	varArray=($var);</p>
<p>IFS=$OIFS;</p>
<p>curl &quot;http://xxx/emoncms/input/post?apikey=xxx&amp;json={TFATempInt:${varArray[1]}}&quot;<br />
	curl &quot;http://xxx/emoncms/input/post?apikey=xxx&amp;json={TFAHumiInt:${varArray[2]}}&quot;<br />
	curl &quot;http://xxx/emoncms/input/post?apikey=xxx&amp;json={TFATempExt:${varArray[3]}}&quot;<br />
	curl &quot;http://xxx/emoncms/input/post?apikey=xxx&amp;json={TFAHumiExt:${varArray[4]}}&quot;<br />
	curl &quot;http://xxx/emoncms/input/post?apikey=xxx&amp;json={TFAPressur:${varArray[13]}}&quot;<br />
	curl &quot;http://xxx/emoncms/input/post?apikey=xxx&amp;json={TFAWindSpe:${varArray[18]}}&quot;<br />
	curl &quot;http://xxx/emoncms/input/post?apikey=xxx&amp;json={TFARainGau:${varArray[21]}}&quot;</p>
<p>First time curl post 2 values, first one correct value and second time only 0.&nbsp; So graphic was so ugly.&nbsp; But now it&#39;s ok.&nbsp; At the moment I don&#39;t know why it send that in the same time.</p>
<p>It works since yeasterday.&nbsp; For the moment without problem just with cron and email...&nbsp; I would like to sens a daily repport by mail.&nbsp; But I solved that too.</p>
<p>I am interesting by new widget ;-)</p>
<p>Max</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16439"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 25/11/2013 - 16:50.</div>
    <div class="content">
     <p>Thanks.</p>
<p>I think I get the idea. It should be possible to add a listener type to the gateway, to enable this in a few clicks.</p>
<p>(Be careful, it seems you just pasted your apikey publicly. You may want to replace it by xxxxxxx or anything to hide it.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16440"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bumax&#039;s picture" title="bumax&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by bumax (not verified) on Mon, 25/11/2013 - 17:51.</div>
    <div class="content">
     <p>You are right,</p>
<p>Now it&#39;s ok thank for advise</p>
<p>Max</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16524"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4037.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rsegoly&#039;s picture" title="rsegoly&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Add data from csv file to emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/4037.html" title="View user profile.">rsegoly</a> on Sun, 01/12/2013 - 07:42.</div>
    <div class="content">
     <p>I use Arduino for measurement&nbsp;.</p>
<p>Data sent in CSV format via Serial to PC and logged PC.</p>
<p>PC logs to file and also send to Emoncms to be presented.</p>
<p>I use Python &nbsp;so it straight forward&nbsp;</p>
<p>In same manner data will be stored on local database maybe as hosted&nbsp;Econcms&nbsp;or as&nbsp;</p>
<p><a href="https://www.dropbox.com/s/3tkzhpltqxjtxy4/logger.py">Python script</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3220"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-rFXtbZolaxK7xKB02wfnTgMdbenmhQtnB2_VIQ1v9qA" value="form-rFXtbZolaxK7xKB02wfnTgMdbenmhQtnB2_VIQ1v9qA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
