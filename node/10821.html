<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10821 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:04:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>de-stratification setup installed, help / advice required | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">de-stratification setup installed, help / advice required</h3>
        <span class="submitted">Submitted by <a href="../user/8209.html" title="View user profile.">DaveTaylor</a> on Mon, 08/06/2015 - 21:09</span>
        <div class="content"><p>Hi</p>
<p>I have built one of Robins Mk2 which is working very well, I have now added a de-stratification pump to my DHW tank. When its working it works very well but the pump seems to get full of air or maybe forms a vacuum and no longer moves water, I have fitted a speed controller so that I can run the pump as slow as possible but it still fails. See below my setup, the pump I have used is from Ebay.</p>
<p><a href="http://www.ebay.co.uk/itm/5M-16-4FT-Head-24V-100-C-Hot-Water-Solar-Circulation-Pump-Food-Grade-Silent-TE92-/171552161740?pt=LH_DefaultDomain_3&amp;hash=item27f14e3fcc" target="_blank">http://www.ebay.co.uk/itm/5M-16-4FT-Head-24V-100-C-Hot-Water-Solar-Circulation-Pump-Food-Grade-Silent-TE92-/171552161740?pt=LH_DefaultDomain_3&amp;hash=item27f14e3fcc</a></p>
<p>Any thoughts from those who have already fitted successful systems, will an self venting air bleed valve do anything?</p>
<p><img alt="System setup image" src="../../../www.flackwellheath.net/jpgs/de-strat-system.png" style="border-width: 1px; border-style: solid; width: 600px; height: 506px;" /></p>
<p>After hours of draining &amp; plumbing, So close!</p>
<p>Kind regards, Dave</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12267.html" class="topic-previous" title="Go to previous forum topic">‹ New Raspberry Pi 3 B launched</a>
              <a href="12014.html" class="topic-next" title="Go to next forum topic">Arduino Mega OEM System - up to 48 CTs ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-31082"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 08/06/2015 - 22:32.</div>
    <div class="content">
     <p>Hi Dave</p>
<p>Just wondered what you&#39;re rationale was in pumping from top to bottom.<br />
I&#39;d always thought about pumping cold water up from the bottom of the tank to avoid the pump having to deal with water potentially close to boiling point.&nbsp;<br />
(I haven&#39;t got around to installing my pump yet!)&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31084"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Mon, 08/06/2015 - 23:00.</div>
    <div class="content">
     <p>Hello Dave,</p>
<p>Sounds like your pump is cavitating. (think water boiling at a lower temperature at altitude)</p>
<p>Since the water at your pump inlet is hot, the negative pressure created by the pump makes the water want to &quot;boil,&quot; resulting in cavitation, and loss of water circulation.</p>
<p>Ref: <a href="http://www.micropump.com/support_cavitation.aspx">http://www.micropump.com/support_cavitation.aspx</a></p>
<p>Reversing the pump direction and pushing cooler water from the bottom of the tank to the top should resolve your issue. Locating your pump inlet as close to the bottom of the tank will help by ensuring sufficient pressure at the pump inlet.</p>
<p>Regards,</p>
<p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31085"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8209.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="DaveTaylor&#039;s picture" title="DaveTaylor&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/8209.html" title="View user profile.">DaveTaylor</a> on Mon, 08/06/2015 - 23:15.</div>
    <div class="content">
     <p>Thanks for your responses, I have seen posts of other pumping from bottom to the&nbsp;top but if you do that then what stops the feed to the shower pulling cold water from the bottom of the tank?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31087"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Mon, 08/06/2015 - 23:28.</div>
    <div class="content">
     <p><em>what stops the feed to the shower pulling cold water from the bottom of the tank?</em></p>
<p>That&#39;s a &quot;gotcha.&quot;&nbsp; In that case, you&#39;ll definitely want to locate the pump inlet as near to the bottom of the tank as possible. (present pump flow direction unchanged)</p>
<p>However, once the tank is destratified, the difference between top and bottom temps might be small enough that the &quot;colder&quot; water getting pulled from the bottom of the tank wouldn&#39;t be an issue.</p>
<p>I ran one of Robin&#39;s Mk2 routers (good stuff!) and used a pond pump to de-strat a 55 Gallon drum of water used as a dump load. The pump sat on the bottom of the barrel. On one particular sunny day, the water temp at the bottom rose to the point it deformed the plastic pump housing rendering the pump useless. Measured with an IR &quot;laser spot&quot; type thermometer, the drum exterior temp near the bottom was ~90C.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31125"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8209.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="DaveTaylor&#039;s picture" title="DaveTaylor&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/8209.html" title="View user profile.">DaveTaylor</a> on Tue, 09/06/2015 - 18:51.</div>
    <div class="content">
     <p>Hi, have changed the pump around and it sounds and moves water a lot lot better, will try tomorrow if we have sun.</p>
<p>Does this mean that as the water temperature at the&nbsp;bottom of the tank rises then cavitation may re occur?</p>
<p>or</p>
<p>is it that pressure is better now the&nbsp;pump is that way around?&nbsp;</p>
<p>BTW I&nbsp;ran the shower and no water was draw up through the de-strat pump, I believe its because new cold water is being fed into the bottom of the tank to replace the water being used by the shower, on the grounds that &quot;water out&quot; must&nbsp;equal&nbsp;&quot;water in&quot; then there is no reason it should take water thorough the smaller pipe.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31127"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 09/06/2015 - 19:09.</div>
    <div class="content">
     <p>The hotter the water gets, flowing through the pump, the greater chance of cavitation.<br />
I would expect though that by fitting a restricter valve&nbsp;in the pump output pipe would lessen the pressure difference&nbsp;between the pump input and output (because system water pressure&nbsp;will have greater chance of replacing&nbsp;the water drawn into the pump), thereby reducing cavitation - is this your understanding Bill?</p>
<p>Are you intending to run the pump continuously, or do you have some sort of control system to actuate the pump when a certain criteria is met? I&#39;m sure that you will have considered the consequences of destratification&nbsp;on&nbsp;&nbsp;a cloudy day (luke warm showers!)</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31129"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8209.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="DaveTaylor&#039;s picture" title="DaveTaylor&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/8209.html" title="View user profile.">DaveTaylor</a> on Tue, 09/06/2015 - 19:49.</div>
    <div class="content">
     <p>Hi Paul</p>
<p>Yes I will build a controller to only run the pump when the immersion has reached temperature, probably just use a timer or read a temp sensor to start with and progress from there.</p>
<p>Looking a the small test I ran this evening the shower exit point dropped from 44 deg C to 34 Deg C in just 6 mins, so my thoughts are that the immersion should soon switch back on (weather permitting).</p>
<p>Thanks&nbsp;guys for your input.</p>
<p>Re Dave</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31130"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 09/06/2015 - 20:21.</div>
    <div class="content">
     <p>Dave, I see that your using a&nbsp;DC brushless motor driven pump (of which I know little&nbsp;about!). But I thought that you would need a driver board for the motor, which would also enable motor speed reduction, or is it built into the pump itself? What was the speed controller you fitted, or was it just a variable voltage power supply?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31137"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Wed, 10/06/2015 - 00:09.</div>
    <div class="content">
     <p>Hello Dave,</p>
<p><em>Does this mean that as the water temperature at the&nbsp;bottom of the tank rises then cavitation may re occur?</em></p>
<p>The hotter the water is, the easier it will be for cavitation to occur. It didn&#39;t help that my dump load was a 5500W immersion element.</p>
<p><em>is it that pressure is better now the&nbsp;pump is that way around?</em>&nbsp; Short answer, yes.</p>
<p>Hi Paul,</p>
<p><em>I would expect though that by fitting a restricter valve&nbsp;in the pump output pipe would lessen the pressure difference&nbsp;between the pump input and output (because system water pressure&nbsp;will have greater chance of replacing&nbsp;the water drawn into the pump), thereby reducing cavitation - is this your understanding Bill?</em><br />
It will reduce the <em>flow</em> but the outlet pressure will increase. e.g. your thumb partially blocking the end of a garden hose.</p>
<p>However, the lower his pump inlet is, compared to the water level in the tank, the greater the pressure at the pump inlet will be. The higher the inlet pressure, the less the likelihood of cavitation. And, he can fit the restrictor, if needed.</p>
<p><em>I&nbsp;ran the shower and no water was draw up through the de-strat pump, I believe its because new cold water is being fed into the bottom of the tank to replace the water being used by the shower, on the grounds that &quot;water out&quot; must&nbsp;equal&nbsp;&quot;water in&quot;</em> <em>then there is no reason it should take water thorough the smaller pipe.</em></p>
<p>That - and a behavior often attributed to electrical/electronic circuits - the path of least resistance.</p>
<p>Sounds like you&#39;ve got it solved, Dave.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31171"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8209.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="DaveTaylor&#039;s picture" title="DaveTaylor&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/8209.html" title="View user profile.">DaveTaylor</a> on Wed, 10/06/2015 - 18:51.</div>
    <div class="content">
     <p>Hi Paul</p>
<p>At present I am just running it from a variable power supply&nbsp;until I get the speed right.</p>
<p>FYI&nbsp;had a very successful day today, left the wife in charge of the pump manual on / off control. I place a lamp on either side on the immersion thermostat switch, instructed her that when the stat opens (lamp goes out) turn the pump on until the lamp comes back on. Running the pump at 9V it only took 4 min to drop the top of the tank temperature enough for the stat to re-close, as the day went on the pump had to run slightly longer as the bottom of the tank water was getting warmer and therefor having less effect on the top temperature. At the end of the day I have a full tank.</p>
<p>I am now starting to build the controller, I let you know what I end up doing regarding pump speed control.</p>
<p>Re Dave</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31172"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8209.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="DaveTaylor&#039;s picture" title="DaveTaylor&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/8209.html" title="View user profile.">DaveTaylor</a> on Wed, 10/06/2015 - 19:00.</div>
    <div class="content">
     <p><em>Sounds like you&#39;ve got it solved, Dave.</em></p>
<p>Yes Bill looks like its now ok, many thanks for your time in responding.</p>
<p>I am in electronics, hardware &amp; software I am good at plumbing but don&#39;t know much about the theory of water &amp; pumps etc. so&nbsp;its always nice when you have a project like this to lean new things.</p>
<p>Re Dave</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31174"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Wed, 10/06/2015 - 19:59.</div>
    <div class="content">
     <p><em>I am in electronics, hardware &amp; software I am good at plumbing but don&#39;t know much about the theory of water &amp; pumps etc.</em></p>
<p>Hey, don&#39;t feel bad about <strong><em>that</em></strong>. I&#39;m an Electronics Tech myself. i.e software isn&#39;t my bailiwick, but I manage to get by. Now give me a Doppler Weather Radar, or an Airport Surveillance Radar to repair, and I&#39;m right at home!</p>
<p>Good to hear it&#39;s workin&#39; for ya.</p>
<p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40469"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3885.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterC&#039;s picture" title="PeterC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/3885.html" title="View user profile.">PeterC</a> on Sun, 20/03/2016 - 21:30.</div>
    <div class="content">
     <p>Chaps,</p>
<p>Comments on the above thread</p>
<p>1 &nbsp;There is not enough energy in the pump to cause&nbsp;cavitation&nbsp;of water. All water contains air in solution which comes out with heating. That is why all water systems have a vent somewhere.</p>
<p>2 &nbsp;In pump cold to hot to save thermal stresses on the little 12V pump. I&nbsp;pump cold&nbsp;into the very top of the HW tank with a tee joint on the HW take off pipe. The horizontal one in Dave&#39;s diagram above</p>
<p>3 &nbsp;I have ntroduced a slight upward gradient on the pipe. The the air goes up into the vertical vent pipe (the red one on the diag above) I can here it gurgling every now and again.</p>
<p>4 &nbsp;Clealry I&#39;m going to get cold water in the hot line, so&nbsp;I inhibit destratification whenever hot water is drawn off. I have a small axial flow turbine in the pipe with a Hall Effect (magnetic) sensor. This&nbsp;is the only way I could get a reliable inhibitor signal. I did look at reed switches in power shower pumps but these need to me mounted vertically. My turbine meant a bit&nbsp;more plumbing but it works well and has an effective range of 160 revs/sec when a bath tap is opened. This is a good range to work with if you want to integrate the pulse and calculate volume used. I will be billing my daughter for her water usage.&nbsp;</p>
<p>5 &nbsp;To save destratifying&nbsp;on dull days (or as the sun goes down) I only destrat if PV is &gt; 0.5 kW</p>
<p>6 &nbsp;I calculate the energy stored in the tank to be about 9kWh. If I get to this level I stop destratifying&nbsp;</p>
<p>7 &nbsp;My TTop (tank top) temp is 60C anf the immersion heater element is set at 63C (Note the latest Regs call for twin contact thermostats now)</p>
<p>Here is the salient sections of my code so you can see what variables I have settled on and the control logic</p>
<p>#define revspersecSet 5 //turbine rps threshold for destratification inhibition<br />
#define inhibittimeSet&nbsp;600&nbsp;//seconds delay between each destrat. Do not have too many successive destrats<br />
#define tempTopSet 60 //60 Destrat&nbsp;start temp.&nbsp;Note tank thermostat set at 63C on 15 Feb 2016<br />
#define tempTopmin 49 //49 destrat if temp top falls below this value, the minimum for a shower, note 3 deg overshoot<br />
#define tDiffSetHi 15 //15 required for destrat to START<br />
#define tDiffSetLo 10 //10 required to destrat to STOP<br />
#define kWgenSet 0.5 //kW before destrat starts<br />
#define pumpPWM 150 // 0 - 255 PWM factor to control speed of pump this is based on 12V DC<br />
#define energyMax 9.0 //TTop of 63 &amp; TBot 58 = 8.89 (16 Feb 2016) after forced destratification<br />
&nbsp;</p>
<p>Here is the control logic. Schoolboy programming I know, but it works and I can understanding 6 months later!</p>
<p>if ((inhibittime&gt;inhibittimeSet)&amp;&amp;(kWgen&gt;kWgenSet)&amp;&amp;(Energy&lt;energyMax)&amp;&amp;(tempTop&gt;=tempTopSet)&amp;&amp;(tDiff&gt;tDiffSetHi)){PumpLatch=HIGH;} // if conditions met,set the latch</p>
<p>if (PumpLatch==HIGH){analogWrite(Pump,pumpPWM);} else {analogWrite(Pump,0);} &nbsp;//Pump PWM = N / 255</p>
<p>&nbsp;if ((tDiff&lt;tDiffSetLo)||(tempTop&lt;tempTopmin)||(revspersec&gt;revspersecSet)){PumpLatch = LOW;} // drop the latch&nbsp;</p>
<p>if (PumpLatch==LOW){analogWrite(Pump,0);} // If the latch is dropped, turn the pump off</p>
<p>I still intend to write all this up one day. In the meantime ask if you want help.</p>
<p>PeterC</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40474"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Mon, 21/03/2016 - 00:23.</div>
    <div class="content">
     <p><em>Comments on the above thread</em></p>
<p><em>1 &nbsp;There is not enough energy in the pump to cause&nbsp;cavitation&nbsp;of water. All water contains air in solution which comes out with heating. That is why all water systems have a vent somewhere.</em></p>
<p>According to <a href="http://www.engineeringtoolbox.com/cavitation-d_407.html"><em><strong>this</strong></em></a>, possible evaporation - and cavitation - increases dramatically with water temperature.<br />
That being the case, even a small pump can cause heated water to &quot;boil&quot; hence, causing cavitation.</p>
<p>Also on the same page: Cavitation can be avoided by locating components to the coldest part of systems. Example - it is common to locate pumps and modulating valves in heating systems in the &quot;cold&quot; return lines before heaters and heat exchangers.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40477"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3885.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterC&#039;s picture" title="PeterC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: de-stratification setup installed, help / advice required</h3>

    <div class="submitted">Submitted by <a href="../user/3885.html" title="View user profile.">PeterC</a> on Mon, 21/03/2016 - 08:19.</div>
    <div class="content">
     <p>Chaps</p>
<p>The original post said he had air in the pump. He needs to prove to himself that his design allows for the venting of the inevitable&nbsp;air&nbsp;that has come out of solution when water is heated.&nbsp;I believe cavitation is unlikely and the symptoms he describes can be explained, initially,&nbsp;by trapped air that has come out of solution. &nbsp;On a good day as my tank destratifies&nbsp;down to a temp difference of &lt; 20 C top to bottom, I always get a small gurgle when the pump starts. Sometimes I can hear&nbsp;the air bubbles passing up the vent pipe. &nbsp;Destratification is going to drive even more air out of solution than if left static.</p>
<p>That is why a slight upward gradient is essential on the top draw-off pipe if you want to use the original vent system</p>
<p>Dave&#39;s tapping off below the top of the tank misses the hottest water at the top of the tank&nbsp;. This lower tapping is often there to give a secondary simultaneous&nbsp;HW feed to upstairs bathrooms.&nbsp;He would be better going into the very top&nbsp;pipe. He may have done so by now.&nbsp;</p>
<p>You will find that gravity fed open vented hot water systems although all the same in principle sometimes have variances based on the preferences of the designer (or indeed the plumber depending on what was in his&nbsp;bag that&nbsp;Friday afternoon) It is difficult to give general advice on a forum like this. It is more a case of understanding and agreeing the principles and sharing experiences.&nbsp;</p>
<p>Depending on your particular&nbsp;installation&nbsp;also incorporate a Surrey Flange into the design to encourage the venting of air.&nbsp;This is useful for those that insist on pumping from the hot. However there are many reasons why&nbsp;pumping from cold to hot is much preferred.</p>
<p>Also, insulation is really important and has a marked effect on storage. I have packed&nbsp;my tank with multiple layers of loft insulation and only get a 6C Ttop loss overnight. My&nbsp;loft insulation has&nbsp;tended to break down&nbsp;over many heating cycles so always wear a face mask. I have found that old pillows are good to cover the areas where you need frequent access for maintenance.&nbsp;</p>
<p>SAFETY. Remember we are skiiing off piste here and doing things that the original design can cope with, but did not anticipate. Please make sure you have inspected your venting system, fitted the&nbsp;latest&nbsp;immersion&nbsp;thermostats&nbsp;(with twin contacts) Got some thermostatic mixers on showers and maybe warning signs on HW taps. Keep an eye on any power shower pumps as these don&#39;t like &gt; 60C.&nbsp;Its great fun to try and capture all that free energy, but me and my pals have actually REDUCED our top settings to protect people and equipment</p>
<p>Finally. I use the 3 Dallas (Maxim) 18B20&nbsp;one wire temp sensors at top , middle and bottom of tank. Although more costly I like having a digital output and not having to smooth signals to and from an analog sensor.&nbsp;I have epoxied&nbsp;these on a pipe of copper plate which is itself then epoxied onto the tank.&nbsp;Try and keep the bottom one away from the cold water inlet as if too close this will give non-representative&nbsp;low readings and excessive destatification.</p>
<p>With these 3 sensors you can use this algorithm to give an approximation to the energy stored in the tank.&nbsp;</p>
<p>/* Start of destratification details<br />
The energy required to raise the temperature of water by 1 C is 4.1813 joules per gram.&nbsp;<br />
Assuming tank is 170 litres = 170 kg and the input water is 15C&nbsp;<br />
3.6MJ = 1 kWh<br />
Take average of the temperatures, take off the 15C for incoming water temp (lowest possible) X volume in tank in litres X specific heat convert to kWh<br />
*/<br />
Energy = ((((tempTop+tempMid+tempBot)/3)-15)*170000*4.183)/3.6/1000000; // Energy calc in kWh<br />
Energycap = (Energy/energyMax)*100; // Calculating the energy stored in the tank as a percentage of a maximum in kWh.&nbsp;</p>
<p>&nbsp;</p>
<p>.... at least it looks good on the display and gives a good number for my daughter&#39;s hot water bill :))&nbsp;</p>
<p>More seriously though, sets a limit on the stored energy so you know when enough is enough. I call it a day at&nbsp;9 kWh</p>
<p>(note all my posts refer to the traditional gravity fed open vented DHW systems not the more recent pressurised systems)</p>
<p>Peter&nbsp;</p>
<p>&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10821"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-YDkRL0tTKf_QwR-R-nEuY58CNUKsn-w2yTFRM-gjflY" value="form-YDkRL0tTKf_QwR-R-nEuY58CNUKsn-w2yTFRM-gjflY"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
