<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2355 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emoncms: data loggins halts on raspberry | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emoncms: data loggins halts on raspberry</h3>
        <span class="submitted">Submitted by Guest on Wed, 08/05/2013 - 21:17</span>
        <div class="content"><p>&nbsp;</p>
<p>I have a raspberry PI logging data from an emontx and a emonglcd<br />
	Recently (after 2-3 weeks of normal operation) data logging stopped for no apparent reason few times (now almost stops once a&nbsp; day) and resumes if I restart the rfm12piphp service.<br />
	I updated emoncms and the database to the latest version but datalog keeps stopping randomly.</p>
<p>I only added few signals on emontx but I think it should not be a big problem (now I have 12 words being sent from emontx to raspberry)</p>
<p>I noticed the rfm12piphp.log file and I enabled the logging mode when restarting the service.<br />
	When I queried the service before restarting it it was &quot;running&quot;<br />
	I would like to know if there are more places to look to collect data useful to solve this problem</p>
<p>bye</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2427.html" class="topic-previous" title="Go to previous forum topic">‹ Single data stream to multiple Emoncms users?</a>
              <a href="2418.html" class="topic-next" title="Go to next forum topic">RFM2PiPHP service and RFM12Pi board ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-11979"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 09/05/2013 - 13:41.</div>
    <div class="content">
     <p>Hello Scarlaz, might be worth increasing the time between each time the rfm12pi&nbsp;sends time to the emonglcd, what do you have it set to at the moment? the sending of the time can cause the rfm12pi&nbsp;settings to get corrupted but its very infrequent.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11988"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Scarlaz&#039;s picture" title="Scarlaz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by Scarlaz (not verified) on Thu, 09/05/2013 - 21:40.</div>
    <div class="content">
     <p>I got some lockup before upgrading to the latest version. At that time the raspberry was only receiving data from emontx and emonglcd (temperature).</p>
<p>I can increase the send time (was set to 55s). Now I set it to 50000 and we&#39;ll see.</p>
<p>
	Now logging is halted, emoncms shows &quot;RFM12 to Pi interface script is up and running&quot; log file show only TX operations and led on the rfm12pi does not blink when emontx sends data.<br />
	Recently I got also some issues with the telco company and internet connection at my place stopped few times. When this happened I saw that the emoncms (configured to forward data to emoncms.org) was unable to process input data. I believe it is went into timeout situations while trying to connect to the web.</p>
<p>Logging was unable to resume once web connection returned normal</p>
<p>I attached part of the log.</p>
<p>Thanks for &nbsp;the outstanding contributions you are doing to this project!</p>
<p>Best Regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11989"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Fri, 10/05/2013 - 05:01.</div>
    <div class="content">
     <p>Do you have v1 or v2 of the RFM2Pi&nbsp;?</p>
<p>&quot;led on the rfm12pi does not blink when emontx sends data.&quot; is a pointer, if you are running&nbsp;v1 you may want to &#39;lock&#39; your settings</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11994"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/385.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fammann&#039;s picture" title="fammann&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/385.html" title="View user profile.">fammann</a> on Fri, 10/05/2013 - 09:55.</div>
    <div class="content">
     <p>Hallo&nbsp;</p>
<p>I seem to have the same problem. The configuration of the RFM12PI gets changed all the times (see log below). My setting on the Raspberry PI tab in emoncmspi is:</p>
<p>Freq 868MHz<br />
	Group 210<br />
	ID 16</p>
<p>but as you can see this changes all times. Once they are correct I can see information from node 10, 15 and 20.</p>
<p>What exactly do I need to change or update to get this issue resolved. Just got the kit which has the latest code installed!</p>
<p>Many thanks for your help</p>
<p>Fredi</p>
<p>DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:80 i16 g16 @ 868 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	DATA RX:Available commands:<br />
	DATA RX:&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	DATA RX:&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:80 i16 g16 @ 868 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 0i<br />
	BASEID ERROR, RE SENDING BASEID<br />
	DATA RX:<br />
	CONFIG fail detected 1368178481<br />
	00,11,34,00s<br />
	MESSAGE RX:&gt; 16i<br />
	BASEID SET CORRECTLY<br />
	DATA RX:<br />
	DATA RX:Available commands:<br />
	DATA RX:&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	DATA RX:&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:80 i16 g104 @ 433 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	DATA RX:Available commands:<br />
	DATA RX:&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	DATA RX:&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:80 i16 g104 @ 433 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 0i<br />
	BASEID ERROR, RE SENDING BASEID<br />
	DATA RX:<br />
	CONFIG fail detected 1368178488<br />
	00,11,34,00s<br />
	MESSAGE RX:&gt; 168b<br />
	FREQUENCY ERROR, RE SENDING FREQUENCY<br />
	DATA RX:<br />
	CONFIG fail detected 1368178493<br />
	MESSAGE RX:&gt; 16i<br />
	BASEID SET CORRECTLY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 8b<br />
	FREQUENCY SET CORRECTLY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 210g<br />
	GROUP SET CORRECTLY<br />
	DATA RX:<br />
	00,11,34,00s<br />
	MESSAGE RX:&gt; 11i<br />
	BASEID ERROR, RE SENDING BASEID<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 0b<br />
	FREQUENCY ERROR, RE SENDING FREQUENCY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 168b<br />
	FREQUENCY ERROR, RE SENDING FREQUENCY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 8b<br />
	FREQUENCY SET CORRECTLY<br />
	DATA RX:<br />
	DATA RX: 10 102 1 0 0 1 0 0 0<br />
	DATA RX: 15 10 0 35 0 1 0<br />
	DATA RX: 20 158 8<br />
	00,11,35,00s<br />
	DATA RX:Available commands:<br />
	DATA RX:&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	DATA RX:&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:75 i11 g210 @ 868 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	DATA RX:Available commands:<br />
	DATA RX:&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	DATA RX:&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	Sending remote dataDATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:75 i11 g210 @ 868 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 0i<br />
	BASEID ERROR, RE SENDING BASEID<br />
	DATA RX:<br />
	CONFIG fail detected 1368178506<br />
	00,11,35,00s<br />
	DATA RX:Available commands:<br />
	DATA RX:&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	DATA RX:&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:64 i0 g210 @ 433 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 118b<br />
	FREQUENCY ERROR, RE SENDING FREQUENCY<br />
	DATA RX:<br />
	CONFIG fail detected &Ntilde;&micro;&frac12;&iexcl;178511<br />
	D&plusmn;q&frac12;&Eacute;&micro;X:&Ugrave;&ecirc;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &frac12;&plusmn;&plusmn;<br />
	&plusmn;&plusmn;&aring;&Aacute;JjRrrrb&acirc;r&sup1;&ugrave;&ugrave;j&Ntilde;&nbsp;&nbsp;&nbsp;&nbsp; &frac12;&sup1;&yen;<br />
	DATA RX:&frac12;&sup1;%&aacute;y&sup1;&frac12;&Eacute;&frac12;5)&Eacute;&Eacute;&sup1;&Ntilde;&nbsp;&nbsp; CONFIG fail detected 1368178516<br />
	00,11,35,00s<br />
	MESSAGE RX:&gt; 16i<br />
	BASEID SET CORRECTLY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 8b<br />
	FREQUENCY SET CORRECTLY<br />
	DATA RX:<br />
	DATA RX:Available commands:<br />
	DATA RX:&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	DATA RX:&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:80 i16 g210 @ 868 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 0s<br />
	LENGTH: -&gt; 3 b<br />
	DATA RX: 10 104 1 0 0 1 0 0 0<br />
	DATA RX: 15 10 0 35 0 21 0<br />
	DATA RX: 20 152 8<br />
	00,11,35,00s<br />
	MESSAGE RX:&gt; 0b<br />
	FREQUENCY ERROR, RE SENDING FREQUENCY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 0b<br />
	FREQUENCY ERROR, RE SENDING FREQUENCY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 8b<br />
	FREQUENCY SET CORRECTLY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 8b<br />
	FREQUENCY SET CORRECTLY<br />
	DATA RX:<br />
	DATA RX: 10 104 1 0 0 1 0 0 0<br />
	DATA RX: 15 10 0 35 0 32 0<br />
	DATA RX: 20 152 8<br />
	00,11,35,00s<br />
	MESSAGE RX:&gt; 11i<br />
	BASEID ERROR, RE SENDING BASEID<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 0b<br />
	FREQUENCY ERROR, RE SENDING FREQUENCY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 0s<br />
	LENGTH: -&gt; 1 b<br />
	MESSAGE RX:&gt; 18b<br />
	FREQUENCY ERROR, RE SENDING FREQUENCY<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 8b<br />
	FREQUENCY SET CORRECTLY<br />
	DATA RX:<br />
	Sending remote data00,11,35,00s<br />
	DATA RX:Available commands:<br />
	DATA RX:&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	DATA RX:&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:75 i11 g210 @ 868 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	DATA RX:Available commands:<br />
	DATA RX:&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	DATA RX:&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	DATA RX:&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	DATA RX:&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	DATA RX:&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	DATA RX:&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	DATA RX:&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	DATA RX:Current configuration:<br />
	DATA RX:75 i11 g210 @ 868 MHz&nbsp; Lock: 1<br />
	DATA RX:<br />
	MESSAGE RX:&gt; 0i<br />
	BASEID ERROR, RE SENDING BASEID<br />
	DATA RX:<br />
	CONFIG fail detected 1368178540<br />
	^C<br />
	pi@emoncmspi /var/log $ &nbsp;&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11995"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Fri, 10/05/2013 - 11:29.</div>
    <div class="content">
     <p>If you have v1 of the RFM2Pi board, you need to lock the settings.</p>
<p>To do it may be a bit tricky since you need to gain access to the serial without the cron/daemon standing on the way. The Wiki has tips how to disable the cron so you can freely communicate with the RFM2Pi board with minicom. do the correct settings and toggle the lock. Basically the command &#39;123x&#39; will toggle the settings lock. With the settings lock, the board will ignore any requests for change in band, id, group and you will use it happily ever after :)</p>
<p>There is some gibberish in the log you provided, this is typical for the v1 that was running software serial. V2 boards use hardware serial and don&#39;t have such issues.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12001"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/385.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fammann&#039;s picture" title="fammann&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/385.html" title="View user profile.">fammann</a> on Fri, 10/05/2013 - 13:49.</div>
    <div class="content">
     <p>Hallo Martin</p>
<p>&nbsp;</p>
<p>thanks a lot. Now I know what the 123x actually stand for ;-)</p>
<p>Too bad that I got an older model as I just bought it.</p>
<p>Will try to make the change</p>
<p>Many thanks</p>
<p>Fredi</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12007"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Scarlaz&#039;s picture" title="Scarlaz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by Scarlaz (not verified) on Fri, 10/05/2013 - 16:18.</div>
    <div class="content">
     <p>Hi&nbsp;</p>
<p>Since I have assembled the RFM12Pi by myself I guess I have the V1 version....&nbsp;</p>
<p>If I am right it seems I need to shutdown emoncms/cron and issue some commands to the card manually.<br />
	Could you point out some doc about this?</p>
<p>thanks</p>
<p>scarlaz</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12012"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Fri, 10/05/2013 - 17:14.</div>
    <div class="content">
     <p>It depends on which version of emoncms you are running, the older one used cron; to disable it:</p>
<p>Open crontab: $ sudo nano /etc/crontab<br />
	Add a &#39;#&#39; in front of the line: */1 * * * * root cd /var/www/emoncms/Modules/raspberrypi &amp;&amp; php raspberrypi_run.php<br />
	Reboot the pi with $ sudo reboot</p>
<p>for newer emoncms (v5) it is running as a daemon so you need to&nbsp;</p>
<p>sudo service rfm12piphp stop (when done use&nbsp;sudo service rfm12piphp start)</p>
<p>So given that you have done the above successfully, emoncms is not going to touch the RFM2Pi board and we can talk to it over minicom.</p>
<p>&nbsp;</p>
<p>start minicom:</p>
<p>minicom -b 9600 -o -D /dev/ttyAMA0</p>
<p>The default RFM12B settings are 868Mhz and network group 210</p>
<p>Type 4b into the minicom serial window to change the RFM12B to 433Mhz and 210g to change network group. 15i will sed the RFM2Pi board node id.</p>
<p>Type &#39;h&#39; to see the current config.</p>
<p>when happy with the configuration, type 123x to lock these settings. The lock status should read 0 (meaning settings are locked). You may run in a frustration later if you try to change the settings and forget that you locked them, always check the status line ;-)</p>
<p>To exit minicom [CTRL+ A] then [X] then [Enter]</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>so having done the configuration and settings lock, you may enable the cron or daemon depending on your emoncms.</p>
<p>Should be &#39;happily ever after&#39; time from now on :)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12019"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Scarlaz&#039;s picture" title="Scarlaz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by Scarlaz (not verified) on Fri, 10/05/2013 - 22:15.</div>
    <div class="content">
     <p>Thanks for the reply.</p>
<p>Using your instructions I managed to lock the configuration (My actual configuration is the default configuration: group210; node15;868Mhz).<br />
	I had to stop&nbsp;<em>rfm12piphp&nbsp;</em> and&nbsp;<em>rfm2pigateway&nbsp;</em> services.</p>
<p>Anyway I found a problem... it happened that both the service and cron were enabled.... :-( &nbsp;</p>
<p>Now the line in cron is disabled as it should be (using the last version of emoncms)</p>
<p>I locked config using <em>123x&nbsp;</em>and now I re-enabled sending emonglcd timestamp (set at 60s).</p>
<p>I will see the results<br />
	Thanks!<br />
	Scarlaz</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12064"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Scarlaz&#039;s picture" title="Scarlaz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by Scarlaz (not verified) on Sun, 12/05/2013 - 12:40.</div>
    <div class="content">
     <p>Arghhh....&nbsp;</p>
<p>logging stopped again. This time at least one improvement: led on RFM12 kept blinking when receiving data: this means parms locking did its job.<br />
	Symptoms.</p>
<p>Raspberry PI seemed &nbsp;overloaded, responded to ping but emoncms login did not respond. Remote desktop did not respond, I was only able to login via&nbsp;<em>putty&nbsp;</em> and queried <em>rfm12pi&nbsp;</em>service and it was running... &nbsp;Data forwarding did not work neither...When I queried services status interface did not respong anymore and I was forced to power-cycle the device.</p>
<p>Now I slowed down again the emonglcd time update but it is hard for me to believe that it is the culprit for such behavior.</p>
<p>My raspberry is not used only to run emoncms. I added few utils (remote desktop, samba) and I would like to make few more tests before reinstalling form scratch...</p>
<p>Any idea?</p>
<p>Thanks</p>
<p>Scaarlaz</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12494"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Scarlaz&#039;s picture" title="Scarlaz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by Scarlaz (not verified) on Fri, 31/05/2013 - 21:46.</div>
    <div class="content">
     <p>Update:</p>
<p>Setting an update time for emoglcd will cause logging to stop sooner or later. Now, with &nbsp;timestamp disabled, logging kept working for 10 days without problems.</p>
<p>When logging stopped last time (with timestamp update enabled) all was &quot;fine&quot;:<br />
	- rfm12b led blinked on raspberry (data received)<br />
	- Raspberry was not overloaded<br />
	-SD access was fine&nbsp;<br />
	- Web interface showed all was ok (service running)<br />
	-rfm12php service status was &quot;running&quot;.<br />
	- .... but data was not updated anymore.</p>
<p>A reboot solved the situation.&nbsp;<br />
	I will have to make some debug on the service when timestamp update is enabled.</p>
<p>&nbsp;</p>
<p>Regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12543"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms: data loggins halts on raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 03/06/2013 - 07:33.</div>
    <div class="content">
     <p>It would be interesting to have a log of the failure. I can&#39;t think of anything specific, but while the locking avoids the garble screwing up the radio config, it does not prevent garbled messages from coming in and perhaps did the Pi receive a message that couldn&#39;t be handled by the .php script algorithm.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2355"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-X1yJaF16RU22Hu3w6S9mLu__B7NGJx6-94I4JJJErS0" value="form-X1yJaF16RU22Hu3w6S9mLu__B7NGJx6-94I4JJJErS0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2355 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:43 GMT -->
</html>
