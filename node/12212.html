<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12212 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:16:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>(Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">(Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>
        <span class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 21/02/2016 - 12:54</span>
        <div class="content"><h2>This is a Release Candidate, and may still contain bugs Please read comments in the thread&nbsp;below, before installing. If you require a stable release, see&nbsp;<a href="10729.html">emonSD-17Jun15</a>.</h2>
<h2>If you&#39;re running an&nbsp;earlier beta, I highly recommend switching to this version for long term support</h2>
<p>--------------------------------------------------------------------------------------------------------------------------------------------</p>
<h2><strong>DOWNLOAD RC#1: <a href="http://openenergymonitor.org/files/emonSD-20Feb16.img.zip">emonSD-20Feb16.zip</a>&nbsp;(1.3GB)</strong></h2>
<p>MD5 Checksum (zip):&nbsp;ee3ba84431aa0895bdd472829c39085b</p>
<p>MD5 Checksum (.img):&nbsp;fa7f45e19545a962055c044d8054d58e</p>
<p><em>​To check the image version you are currently running, look for a file called emonSD-XXX in the /boot partition:</em></p>
<pre>
$ sudo ls /boot | grep emonSD
</pre><p>This post follows on from&nbsp;<a href="11407.html">Steps towards an EmonCMS 9.0 SD Card Image + Upgrade path</a>, the <a href="11695.html">Low-write mode - your thoughts please</a> thread and blog posts on <a href="http://openenergymonitor.blogspot.com/2015/10/emonpi-nodered-and-mqtt.html">node-RED &amp; MQTT</a>, <a href="http://openenergymonitor.blogspot.com/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB</a> and <a href="http://openenergymonitor.blogspot.co.uk/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWaveRF OOK control</a>. <a href="11799.html">emonSD-22Dec15 beta</a>, <a href="12164.html">emonSD-12Feb16 Alpha</a></p>
<p>Key Features:&nbsp;</p>
<ul>
<li>Based on&nbsp;<a href="https://www.raspberrypi.org/downloads/raspbian/">RASPBIAN JESSIE LITE</a> (2015-11-21)&nbsp;</li>
<li>Built following <a href="https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md">emonPi SD card Build Guide</a></li>
<li>4GB min card size download&nbsp;(ships on an 8GB expanded SD card)</li>
<li>Emoncms V9 (<a href="https://github.com/emoncms/emoncms/blob/stable/docs/RaspberryPi/readme.md">RasPi&nbsp;emonPi&nbsp;install</a>&nbsp;- thanks Paul Reed for writing the guide)&nbsp;</li>
<li>Read-only&nbsp;root FS (see <a href="11695.html#comment-36528">discussion thread</a>)</li>
<li><a href="http://openenergymonitor.blogspot.co.uk/2015/10/emonpi-nodered-and-mqtt.html">NodeRED</a>, <a href="http://openenergymonitor.blogspot.com/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWave RF MQTT OOK control</a> and <a href="http://openenergymonitor.blogspot.com/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB</a>&nbsp;all pre installed and configured</li>
</ul>
<p>Please report any bugs on this thread.&nbsp;</p>
<h1>Data Migration&nbsp;</h1>
<p>If you&#39;re moving from our previous pre-built-SD card, and have Emoncms data you want to migrate, this can be done using the backup module. Backup module is ready installed on this image. You will need to install it on an older image:&nbsp;</p>
<p>See Emopncms&nbsp;backup module readme:&nbsp;<a href="https://github.com/emoncms/backup">https://github.com/emoncms/backup</a></p>
<p>Please report any issues to his thread.&nbsp;</p>
<p>&nbsp;</p>
<h1>Storage&nbsp;&amp;&nbsp;Read-only File system&nbsp;</h1>
<p>The image is based on Lightweight Raspbian&nbsp;Jessie&nbsp;which makes for a very space efficient stack. With everything installed (inc nodeRED&nbsp;&amp; openHAB) total system size is 1.7GB compared to the previous ready-to-go emonPi&nbsp;image, which was&nbsp;over 2GB <em>without</em> nodeRED or openHAB.</p>
<p>As before, the filesystem&nbsp;is in read-only mode by default. <a href="11695.html#comment-36528">discussion thread</a>.</p>
<p>To put the filesystem in read/write mode, use the command: <em>rpi-rw</em>&nbsp;<br />
To return to read-only mode, use the command:<em> rpi-ro</em></p>
<pre>
df -h
/dev/root &nbsp; &nbsp; &nbsp; 3.4G &nbsp;1.8G &nbsp;1.5G &nbsp;56% /
devtmpfs &nbsp; &nbsp; &nbsp; &nbsp;459M &nbsp; &nbsp; 0 &nbsp;459M &nbsp; 0% /dev
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 463M &nbsp; &nbsp; 0 &nbsp;463M &nbsp; 0% /dev/shm
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 463M &nbsp; 13M &nbsp;451M &nbsp; 3% /run
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5.0M &nbsp;4.0K &nbsp;5.0M &nbsp; 1% /run/lock
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 463M &nbsp; &nbsp; 0 &nbsp;463M &nbsp; 0% /sys/fs/cgroup
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;40M &nbsp;6.6M &nbsp; 34M &nbsp;17% /var/lib/openhab
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.0M &nbsp; &nbsp; 0 &nbsp;1.0M &nbsp; 0% /var/lib/dhcp
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;50M &nbsp;7.9M &nbsp; 43M &nbsp;16% /var/log
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;30M &nbsp; 36K &nbsp; 30M &nbsp; 1% /tmp
/dev/mmcblk0p1 &nbsp; 60M &nbsp; 20M &nbsp; 41M &nbsp;34% /boot
/dev/mmcblk0p3 &nbsp;194M &nbsp; 32M &nbsp;153M &nbsp;17% /home/pi/data

</pre><p>The main data folder for emoncms is /home/pi/data this folder is always mounted Read/Write. A number of other folders are mounted in RAM (tmpfs), see <a href="https://github.com/openenergymonitor/emonpi/blob/master/fstab">/etc/fstab</a>. A read-only file system presents challenges to some core Linux processes such as DHCP and NTP. A couple of DHCP &amp; Resolv <a href="http://github.com/openenergymonitor/emonpi/blob/master/install#L57">files</a> are located in the writeable ~/data folder and symlinked to /etc and a custom <a href="http://github.com/openenergymonitor/emonpi/blob/master/dhclient-script_minibian">/sbin/dhclient-script</a> is used.<a href="http://github.com/emonhub/ntp-backup">NTP-backup</a> (thanks Paul) is used to enable NTP clock updates in R/O mode. See the original NTP discussion <a href="5877.html">thread</a>.</p>
<h1>emonPi</h1>
<p>Now updates itself on first factory boot so we will always ship with latest software pulled from github. emonPi LCD now shows when it&#39;s updating and also LCD scrip has been updated to include authenticated MQTT support and to display&nbsp;temperature, VRMS and pulse count values as well as power 1 &amp;2.</p>
<p><a href="../sites/default/files/emonpi_update.jpg"><img alt="" src="../sites/default/files/emonpi_update.jpg" style="width: 300px; height: 169px;" /></a></p>
<p>&nbsp;</p>
<h1><strong>Emoncms&nbsp;V9&nbsp;</strong></h1>
<p><strong>Access via</strong>: <a href="http://emonpi/" title="http://emonpi">http://emonpi</a></p>
<p><strong>Authenticate</strong>: Create the admin user account&nbsp;</p>
<p><strong>Configure</strong>: emonhub.conf (located in ~/data) via web interface&nbsp;</p>
<p><strong>Update</strong>: Pull in the latest updates from Emoncms&nbsp;stable branch using the web-based update tool in Administration &gt; update emonPi.&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<h2><strong>SSH &nbsp;</strong></h2>
<p>The default SSH password has been changed from &quot;raspberry&quot; to &quot;<strong>emonpi2016</strong>&quot; since even though we recommend users change their password, not many do. Moving away from the default&nbsp;raspberry will give a little more security. It&#39;s still <strong>HIGHLY RECOMMENDED</strong> to change the SSH password using&nbsp;<em><strong>passwd</strong></em> (be sure the filesystem is in R/W mode before you change the password (rpi-rw)&nbsp;</p>
<p>&nbsp;</p>
<h2><strong>MQTT</strong></h2>
<p>Mosquitto&nbsp;MQTT&nbsp;server is running on port 1883.</p>
<p><a href="https://github.com/openenergymonitor/emonhub">emonHub&nbsp;(emon-pi variant)</a>&nbsp;posts emonPi data to the following&nbsp;topics:</p>
<pre>
<em>emonhub/rx/&lt;nodeID&gt;/values</em> topic

<em>emon/&lt;nodename&gt;/&lt;keyname&gt; (e.g. emon/emontx/power1)</em>

See here for <a href="https://github.com/emoncms/emoncms/blob/master/docs/RaspberryPi/MQTT.md#node-format">more info an emonHub MQTT topics</a></pre><p>Port 1883 is open by default and authentication has been turned on:</p>
<p>mosquitto username &quot;emonpi&quot;</p>
<p>mosquitto password &quot;emonpimqtt2016&quot;</p>
<p>to change password&nbsp;:&nbsp;</p>
<pre>
sudo nano /etc/mosquitto/mosquitto.conf</pre><p>add lines&nbsp;</p>
<pre>
allow_anonymous false
password_file /etc/mosquitto/passwd</pre><p>To generate a password file, use the mosquitto_passwd tool. It will prompt for a password, then create a hashed password file.&nbsp;</p>
<pre>
$ sudo mosquitto_passwd -c /etc/mosquitto/passwd username</pre><address>&nbsp;</address>
<address>Note if mosquitto&nbsp;authentication&nbsp;credentials are change the new credentials will also need to be updated in:</address>
<address>~/data/emonhub.conf</address>
<address>/var/www/emoncms/settings.php</address>
<address>~/emonpi/lcd/emonPiLCD.py</address>
<address>~/oem_openhab/configuration/openhab.cfg</address>
<address>in node-RED MQTT node&nbsp;via web flows editor&nbsp;</address>
<address>&nbsp;</address>
<p>On this image the Nodes module has been depreciated in favor of the mqtt_input script. When data from a particular node is received (as long as it has a relevant entry in emonhub.conf) it will be posted to Inputs when it can be then be logged go feeds. Any data posted to the emon/# MQTT topic will be logged to feeds using tbe topic names as Input name and Key name, e.g: emon/emontx/power1 will result in an input called emontx with a key called power 1 and the value.&nbsp;</p>
<p>The mqtt input script can be stopped, started and restarted using:</p>
<pre>
sudo service mqtt_input restart </pre><p>The mqtt_input scripts logs to the emoncms log which can be viewed in Admin &gt; logger. The default log level is WARN this can be changed to INTO for a more verbose log in emoncms settings.php. The MQTT server authentication details used by the script are also set in settings.php.&nbsp;</p>
<address>&nbsp;</address>
<h2><strong>NodeRED</strong></h2>
<p>Node-RED is installed and set up with a basic (but useful!)&nbsp;demo flow to subscribe to emonHub MQTT&nbsp;topic and send an email to alert the user when emonTH batteries are low. For email to work, you will have to enter your gmail&nbsp;or smtp&nbsp;details into the node-RED email node. See <a href="http://openenergymonitor.blogspot.com/2015/10/emonpi-nodered-and-mqtt.html">node-RED blog post</a>. For &nbsp;our install and&nbsp;setup notes see <a href="https://github.com/openenergymonitor/oem_node-red">oem_node-red repo</a></p>
<p><strong>Access Via</strong>:&nbsp;<a href="http://emonpi:1880/">http://emonpi:1880</a></p>
<p><strong>Authentication</strong>: user &quot;emonpi&quot; and password &quot;emonpi2016&quot;&nbsp;</p>
<p>The User folder is in the R/W partition so flows can be saved via web editor without he need to change to R/W mode&nbsp;/home/pi/data/node-red</p>
<p>Set user name and password in /home/pi/node-red/settings.js. See instructions on out nodeRED&nbsp;github</p>
<p><a href="https://github.com/openenergymonitor/oem_node-red">https://github.com/openenergymonitor/oem_node-red</a></p>
<p><a href="../sites/default/files/nodered2.png"><img alt="" src="../sites/default/files/nodered2.png" style="height: 415px; width: 600px;" /></a></p>
<h2>&nbsp;</h2>
<p><strong>Note: Node-RED as setup in the image is compiled for Pi2, to use with Model B+ Node will need to be recompiled. Follow these instructions:&nbsp;</strong></p>
<p>Check if node &amp; npm are installed/working properly, normally you will get these results:</p>
<pre>
rpi-rw
​sudo apt-get remove nodered
pi@emonpi:~$ node -v
Segmentation fault
pi@emonpi:~$ npm -v
Segmentation fault</pre><p>Install ARM v6 (for a RasPi model B 512MB) LTS version of node.js</p>
<pre>
wget <a href="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz" title="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz">https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz</a>
tar -xvf node-v4.2.4-linux-armv6l.tar.gz
cd node-v4.2.4-linux-armv6l/
sudo cp -R * /usr/</pre><p>Check if Node-Red is working (can take up to 40-50s on a RasPi model B 512MB)</p>
<pre>
sudo service nodered start</pre><p>Re-enable the Node-Red service (maybe not nescessary, haven&#39;t tested it)</p>
<pre>
sudo systemctl daemon-reload
sudo systemctl enable nodered.service</pre><p>Check if Node-Red gets auto-started on boot:</p>
<pre>
sudo reboot</pre><h2>&nbsp;</h2>
<h2><strong>OpenHAB&nbsp;</strong></h2>
<p>OpenHAB is installed and setup with the basic skeleton OpenEnegyMonitor config. See <a href="http://openenergymonitor.blogspot.co.uk/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB blog post</a>.</p>
<p><strong>Access via</strong>:&nbsp;<a href="http://emonpi:8080/">http://emonpi:8080</a></p>
<p><strong>Authenticate</strong>: user &quot;pi&quot; and password &quot;emonpi2016&quot;</p>
<p>Change user name and password in&nbsp;/etc/openhab/configurations/users.cfg</p>
<p><strong>Configure:&nbsp;</strong>oem.items and oem.sites and located in git repo ~/oem-opemhab and symlinked&nbsp;to default.items and default.sitemap in&nbsp;relevant folders in&nbsp;to&nbsp;/etc/openhab/configurations.&nbsp;</p>
<p><em>Note:&nbsp;Config files are symlinked to our <a href="https://github.com/openenergymonitor/oem_openHab">oem_openhab</a> git repo so we can add functionally with git updates, pulled in automatically with emonPi&nbsp;update. It&#39;s recommended to setup your own sitemap and files config so your changes will not be overwritten by out updates: </em></p>
<p><em>e.g. dave.items and dave.sitemaps then navigate to&nbsp;<a href="http://emonpi8081/openhab.app?sitemap=dave">http://emonpi8081/openhab.app?sitemap=dave</a></em></p>
<p><img alt="" src="../../../1.bp.blogspot.com/-lAn2SNSzyLQ/VmVkYfsFDxI/AAAAAAABkic/Wqhp7g4R4uA/s400/OpenEnergyMonitor_openHAB.png" style="width: 385px; height: 400px;" /></p>
<h2>&nbsp;</h2>
<h2>LightWaveRF OOK RF Tx&nbsp;</h2>
<p>Service to control lightwaveRF plugs and relays via OOK (OOK Tx module installed on emonPi) controlled via MQTT&nbsp;and openHAB. See <a href="http://openenergymonitor.blogspot.com/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWaveRF OOK blog post</a>.</p>
<p><a href="../../../3.bp.blogspot.com/-ooKdNYl_8fA/Vlc-c0pyyJI/AAAAAAABj5o/M6wlA5rH_Ko/s640/emonPi_lwrf.png"><img alt="" src="../../../3.bp.blogspot.com/-ooKdNYl_8fA/Vlc-c0pyyJI/AAAAAAABj5o/M6wlA5rH_Ko/s640/emonPi_lwrf.png" style="height: 319px; width: 300px;" /></a></p>
<h1>Timezone&nbsp;</h1>
<p>The timezone can be set by running raspi-config then selecting &#39;Internationalisation Options&#39;:</p>
<pre>
sudo raspi-config</pre><p><strong>Caution: don&#39;t try and run the &#39;Expand file-system option&#39; in raspi-config. This won&#39;t work because of the extra third partition.</strong></p>
<ul></p>
<li>&nbsp;</li>
</ul>
  <div class="forum-topic-navigation clear-block">
          <a href="12532.html" class="topic-previous" title="Go to previous forum topic">‹ Manipulating Week or Month Data</a>
              <a href="12555.html" class="topic-next" title="Go to next forum topic">Correcting Null value at Midnight ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-39627"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 22/02/2016 - 04:18.</div>
    <div class="content">
     <p>I need a hint. &nbsp;On the RC1 image the&nbsp;Inputs&nbsp;work fine and all of my old Feed data is available, but I cannot figure out how to connect my Inputs to my old Feeds. &nbsp;The new emoncms.conf was empty. &nbsp;I tried copying the old emoncms.conf file to the empty one, but that did not work. &nbsp;I am guessing it is different do to the change in paths names with&nbsp;MQTT&nbsp;(rx/# to emon/#). &nbsp;But I am not sure how to fix. &nbsp;Any hints would be wonderful!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39631"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 22/02/2016 - 11:09.</div>
    <div class="content">
     <p>I think you will need to manually map your inputs to feeds due to the change of MQTT topic names. Could you post screen grab to illustrate?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39641"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 22/02/2016 - 15:35.</div>
    <div class="content">
     <p>Glyn - Attached is&nbsp;two screen shots and my emoncms.conf file.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39642"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 22/02/2016 - 15:44.</div>
    <div class="content">
     <p>Since you are updating from another recent image you should be able to use your old (imported) emoncms.conf. To avoid conflicts we start from a blank emoncms.conf after the import by default. This means people will need to re-map feeds.</p>
<p>To re use your emoncms.conf run:</p>
<address>cd ~/data&nbsp;</address>
<address>mv old.emoncms.conf emoncms.conf</address>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39646"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 22/02/2016 - 16:29.</div>
    <div class="content">
     <p>Glyn - That was already done (with a sudo reboot) but it did not change anything. &nbsp;If I click on any spanner&nbsp;(wrench!) it is empty with no processes listed at the top.</p>
<p>EDIT: added&nbsp;screen shot</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39648"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 22/02/2016 - 16:56.</div>
    <div class="content">
     <p>Glyn - I just re-read your response.</p>
<blockquote><p><em>&nbsp;This means people will need to re-map feeds.</em></p>
</blockquote>
<p>How do I re-map a feed?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39649"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 22/02/2016 - 17:10.</div>
    <div class="content">
     <p>Click the little spanner next to the input then select exisitng&nbsp;feed in the drop down box</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39650"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 22/02/2016 - 17:24.</div>
    <div class="content">
     <p>Glyn - I think that worked! &nbsp;Doh!</p>
<p>I was going down a different path. &nbsp;I found this during the Import:</p>
<blockquote><pre>
Decompressing backup..
Restore phpfina and phptimeseries data folders...
<strong>chown: missing operand after &lsquo;www-data:root&rsquo;
</strong>Try &#39;chown --help&#39; for more information.
Emoncms MYSQL database import...</pre></blockquote>
<p>And when I looked at the&nbsp;/home/pi/data/phpfina directory I saw all of the imported files&nbsp;owned by root:</p>
<blockquote><pre>
<em>-rw-r--r-- 1 www-data www-data     972 Feb 22 11:13 68.dat
-rw-r--r-- 1 www-data www-data      16 Feb 22 10:33 68.meta
-rw-r--r-- 1 www-data www-data      72 Feb 22 11:10 69.dat
-rw-r--r-- 1 www-data www-data      16 Feb 22 10:37 69.meta
-rw-r--r-- 1 root     root     8113772 Feb 21 16:04 6.dat
-rw-r--r-- 1 root     root          16 Feb 21 16:04 6.meta
-rw-r--r-- 1 root     root      664612 Feb 21 16:05 7.dat
-rw-r--r-- 1 root     root          16 Feb 21 16:05 7.meta
-rw-r--r-- 1 root     root      664576 Feb 21 16:04 8.dat
-rw-r--r-- 1 root     root          16 Feb 21 16:04 8.meta</em></pre></blockquote>
<p>&nbsp;Not sure if this is an issue or not...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39654"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jason&#039;s picture" title="jason&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9478.html" title="View user profile.">jason</a> on Mon, 22/02/2016 - 19:03.</div>
    <div class="content">
     <p>Hi Glyn, I&#39;m now&nbsp;starting from scratch with the 20Feb build ... I have a couple of questions ...</p>
<p>First, should I, with no configuration, be able to see my inputs working automatically - and immediately&nbsp;?</p>
<p>I can see from emonhub.log and also using the node-red debug&nbsp;flow that the emonhub process is feeding values into mqtt. How would I set up the inputs for the emonhub ?</p>
<p>Sorry to sound like a NOOB here, but I&#39;m not sure what my expectations should be ... but I did think that the OOB experience would be more-or-less ok on a RC build?</p>
<p>Having tried this, I rebooted the pi, and, the inputs are showing. Perhaps there is something wrong with the start-up sequence ? A race condition somewhere ?</p>
<p>Second question, when I restore my backup from the&nbsp;June15 build, I again get to the &quot;loading ...&quot; page on the feeds screen after doing the log/out - log-in cycle. The configuration of the emonpi system was very simple - just a current sensor and&nbsp;emonglcd sending in some&nbsp;temperature data.&nbsp;&nbsp;Again, should I be expecting this to work &quot;OOB&quot; ?</p>
<p>All I really want to do is migrate in the historic data that I have - should I write a script to parse the data files and send the data in through the input API .... or ... should I instead try and work out why the backup/restore sequence does not seem to work?</p>
<p>I&#39;m happy to have a bash at making all this a bit better as I have a pile of time on my hands at the moment - but I don&#39;t want to tread on others feet or waste my time either...</p>
<p>Also, proving that I don&#39;t always&nbsp;moan, I think what you guys have done is excellent - and have recommended the emonpi to a few of my mates :-)</p>
<p>Jason</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39675"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 23/02/2016 - 00:03.</div>
    <div class="content">
     <p>@jon&nbsp;</p>
<p>Thanks for letting us know about the chown error. That&#39;s really interesting since I don&#39;t experiance that, here is my import-log output. Are you running the latest version of backup module? Could you try and git pull in the ~/backup folder then retry the import to see if you still experiance&nbsp;error?&nbsp;</p>
<p>=== Emoncms import start ===<br />
Mon 22 Feb 23:51:44 UTC 2016<br />
Reading ~/backup/config.cfg....<br />
Location of mysql database: /home/pi/data<br />
Location of emonhub.conf: /home/pi/data<br />
Location of emoncms.conf: /home/pi/data<br />
Location of Emoncms: /var/www/emoncms<br />
Backup destination: /home/pi/data<br />
Backup source path: /home/pi/data/uploads<br />
Starting import from /home/pi/data/uploads to /home/pi/data...<br />
Image version: emonSD-20Feb16<br />
new image<br />
Backup found: emoncms-backup-2016-02-16.tar.gz starting import..<br />
Decompressing backup..<br />
Restore phpfina and phptimeseries data folders...<br />
Emoncms MYSQL database import...<br />
Import emonhub.conf &gt; /home/pi/data/old.emohub.conf<br />
Import emoncms.conf &gt; /home/pi/data/old.emoncms.conf<br />
Start with fresh config: copy NEW default emonpi.emonhub.conf:<br />
cp /home/pi/emonhub/conf/emonpi.default.emonhub.conf /home/pi/data/emonhub.conf<br />
OK<br />
Restarting Services...<br />
Mon 22 Feb 23:52:02 UTC 2016<br />
=== Emoncms import complete! ===</p>
<p>--------------------------------------------------------------------------------------------------------------------</p>
<p>@Jason</p>
<p>Thanks a lot for your feedback. It&#39;s great that your testing the new image, we really appreciate your feedback. Everything seems to be working well for us (hence RC) but still need to get some more data points on testing before release.</p>
<p>1. Yes, you should see the emonPi&nbsp;input appear&nbsp;automatically after import and any RF &nbsp;nodes in range. The default nodes should have their corresponding node decoders set in emonhub.conf. You should see in the emoncms.log that the mqtt_input script has subscribed to &#39;emon&#39; base&nbsp;topic. Ah, great so after a reboot it seems like mqtt_input script is working. I will double check any race conditions that might have effected your first boot.&nbsp;</p>
<p>2. Could you post your emoncms-import.log? and emoncms.log Copy and paste from the import window and Admin page.&nbsp;&nbsp;</p>
<p>Have you tried to reboot the Pi after import? It should not be needed but interested to hear if it fixes this</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39699"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jason&#039;s picture" title="jason&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9478.html" title="View user profile.">jason</a> on Tue, 23/02/2016 - 11:54.</div>
    <div class="content">
     <p>@Glyn</p>
<p>So, using 20Feb&nbsp;image ... a long-ish story with nice news at the end :-)</p>
<p>1. Create a backup (with about 18 hours of data, so really small)<br />
2. Factory reset<br />
3. On reboot, set up new emoncms user, and login<br />
4. Look at inputs page ...<br />
5. Note that there are no inputs.<br />
6. Be patient, sip some tea.<br />
7. Inputs from emonhub appear<br />
8. Create feeds, configure &quot;My Electric&quot;<br />
9. All working :-)</p>
<p>10. Restore the backup from #1 above....<br />
11. Log out and in again ...<br />
12. Check that inputs, feeds are working :-)<br />
13. Check that &quot;my electric&quot; now shows the old data too ... and :-)</p>
<p>14. Restore my backup from the 17Jun image with about a months worth of data<br />
15. Log out and in again.<br />
16. The feeds page is loaded with the &quot;loading ...&quot; message :-(<br />
17. Drink a cup of coffee. Drum fingers.<br />
18. Reboot the emon pi.<br />
19. GOTO&nbsp;16<br />
20. My personal NMI kicks in, and I capture the logs, and reboot the emonpi.<br />
21. Nothing is better :-(</p>
<p>So, there is an issue with the import of the old image&#39;s backups. I have attached the emoncms log and the import log. Nothing looks that interesting with those.&nbsp;</p>
<p>I looked at the apache logs and I can see errors in the feed_model script. If we look at line 748 ... there is a script bug as the result from the sql query is not checked before it is used ... (very naughty) Anyhow, I have added the apache logs and a SQL dump for you to look at.</p>
<p>BUG: feed.model: 748 - $result used without checking result from query.</p>
<p>Seeing this error, I remembered to go to the admin page and do an &quot;update and check&quot; - see the attached pdf for the changes that were needed.</p>
<p>I applied the changes, and HUZZAH!, the feeds are now present.</p>
<p>So I then re-mapped the inputs to the feeds, and I have something that seems to work.</p>
<p>So,&nbsp;I think there are a couple of things that are needed. First, the &quot;restore&quot; script really should force the db update to happen - or, failing that, the user should be prompted to do the update at the end of the restore. Second, there needs to be instructions for how to map the inputs to the feeds for those moving from an &quot;old&quot; image to the new &quot;image&quot;.</p>
<p>Another idea that springs to mind is that for simply restoring historic data, perhaps we could add something to just backup and restore the data. My thinking is that on the &#39;restore&#39;, the user could be prompted with the feed that the data should be restored to. What do you think?</p>
<p>Now it is time for more coffee :-)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39728"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jason&#039;s picture" title="jason&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9478.html" title="View user profile.">jason</a> on Wed, 24/02/2016 - 09:42.</div>
    <div class="content">
     <p>@Glyn,</p>
<p>Just to take the edge off the decent news from yesterday, I now see that creating dashboards does not work. I&#39;ll try again with a fresh image just to check.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39730"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 24/02/2016 - 10:04.</div>
    <div class="content">
     <p>Hi Jason,</p>
<p>Sorry to hear you had trouble imported. Thanks so much for the comprehensive set of log files. I will try and&nbsp;investigate this today. What image were you importing the backup from? Was the backup created with the 20Feb15 image? Or was it an older image? I will try and recreate the issue.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39734"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jason&#039;s picture" title="jason&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9478.html" title="View user profile.">jason</a> on Wed, 24/02/2016 - 11:50.</div>
    <div class="content">
     <p>Hi Glyn - no problem - nothing that I have not seen in the past 30 years or so of professional software development :-)</p>
<p>So, the backup was from the 17Jun15 image - I did say in step #14 ... ! This backup was taken by using the emoncms-export.sh script from the command line.</p>
<p>My guess is that the issue with the import is all to do with the SQL schema changes since last June.</p>
<p>I guess making &nbsp;smooth transition from the 17Jun15 image to a new one is all about making sure the steps are clear for everyone. Lots of changes have happened since then ...&nbsp;I&#39;m happy to contribute a write up if someone could verify it ?</p>
<p>I&#39;ll look at the dashboard problem later this afternoon and get back to you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39750"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jason&#039;s picture" title="jason&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9478.html" title="View user profile.">jason</a> on Wed, 24/02/2016 - 17:56.</div>
    <div class="content">
     <p>Hi Glyn, I took a look at the dashboard issue - in my system with no dashboards, hitting &quot;new&quot; would not work. Here&#39;s what I see in my safari debug console:</p>
<p>[Error] TypeError: dashboard.add is not a function. (In &#39;dashboard.add()&#39;, &#39;dashboard.add&#39; is undefined)</p>
<p>I have attached a pdf with a screen shot from the debugger.</p>
<p>It turns out that this error is due to a cached version of dashboard.js - with a fresh browser, there is not a problem.</p>
<p>Perhaps someone with a bit more up-to-date knowledge can work out why the cached copy was being used?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39757"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 24/02/2016 - 23:08.</div>
    <div class="content">
     <p>I did an Update emonPi&nbsp;Update Now today and the LCD display stops on the emonPi Build screen.&nbsp;If I do&nbsp;<strong>sudo service emonPiLCD restart</strong> after a shutdown then all works as expected.</p>
<pre>
pi@emonpi:~ $ <strong>sudo service emonPiLCD status</strong>
● emonPiLCD.service - LSB: emonPi LCD controller
   Loaded: loaded (/etc/init.d/emonPiLCD)
   Active: active (running) since Wed 2016-02-24 16:24:32 CST; 5min ago
  Process: 431 ExecStart=/etc/init.d/emonPiLCD start (code=exited, status=0/SUCCESS)
   CGroup: /system.slice/emonPiLCD.service
           └─453 python /usr/share/emonPiLCD/emonPiLCD.py

Feb 24 16:24:32 emonpi emonPiLCD[431]: Starting system emonPiLCD daemon:.
Feb 24 16:24:32 emonpi systemd[1]: Started LSB: emonPi LCD controller.
pi@emonpi:~ $ <strong>sudo service emonPiLCD restart</strong>
pi@emonpi:~ $ <strong>tail /var/log/emonpilcd.log</strong>
...
pi@emonpi:~ $ <strong>tail /var/log/daemon.log</strong> 
...
pi@emonpi:~ $ <strong>sudo ls /boot | grep emonSD</strong>
emonSD-20Feb16
</pre><p>&nbsp;</p>
<p>​<strong>EDIT:</strong> I decided to send the log files as attachments.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39759"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 25/02/2016 - 00:48.</div>
    <div class="content">
     <p>@jon did you update after 4pm today? This issue should now be fixed. Please update again and confirm. Thanks for letting me know.&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/commit/424644fddebd8b8abec631b5ca6a80d1c63c67d2" title="https://github.com/openenergymonitor/emonpi/commit/424644fddebd8b8abec631b5ca6a80d1c63c67d2">https://github.com/openenergymonitor/emonpi/commit/424644fddebd8b8abec63...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39825"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Thu, 25/02/2016 - 22:54.</div>
    <div class="content">
     <p>Hi, &nbsp;</p>
<p>I have decided to update a few things and finally catch up with the current branch of workings. &nbsp;</p>
<p>Unfortunately I have a but of ancient hardware however this is working fine as emonhub.log is showing the updates as I would expect and is pushing around the MQTT feeds. &nbsp;</p>
<p>The hardware I have is&nbsp; a Pi 1 B (2nd Gen) with the RFM12Pi (V1) - I must have been lucky as this worked solidly for 6 months or so until I upgraded to a full Debian PC and a JeeNode V6 (USB) to capture the data. &nbsp;</p>
<p>The PC is working fine now, and I am looking to try and develop a module or two for my own use on this Pi, I have hit a stumbling block.</p>
<p>When I am trying to create the feeds, I get the error message &quot;ERROR: Feed could not be created, undefined&quot;. This is in the actual inputs page, after clicking on the spanner to create it. &nbsp;</p>
<p>In the emoncms.log, I get the line &nbsp;<br />
2016-02-25 22:22:38.140|ERROR|feed_model.php|EngineClass() Engine id &#39;1&#39; is not supported.</p>
<p>To help troubleshoot I have gone into the settings, and commented out all of the hidden engines and tried them all. &nbsp;</p>
<p>Within mysql (I understand how to get to this) I have the following the feeds table</p>
<pre>
+----+--------------+--------+------+------+-------+----------+--------+------+--------+-------------+
| id | name         | userid | tag  | time | value | datatype | public | size | engine | processList |
+----+--------------+--------+------+------+-------+----------+--------+------+--------+-------------+
|  1 | Node emontx1 |      1 |      | NULL |  NULL |        0 |      0 | NULL |      1 | NULL        |
+----+--------------+--------+------+------+-------+----------+--------+------+--------+-------------+
1 row in set (0.00 sec)</pre><p>I think it is something to do with the engine field, but when changed to &#39;8&#39; (from settings.php), it makes no difference.</p>
<p>This is a clean image that was downloaded today (25th) and am looking just to setup as a test for now and the database is completely fresh also, as I wanted to develop with fresh data in the newer formats. (I started all this with Emoncms 3 (I think, before the dedicated Pi images were produced).</p>
<p>Looking forward to getting this going, and helping where I can to get this going on some of the legacy hardware out there.</p>
<p>Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39874"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Fri, 26/02/2016 - 17:52.</div>
    <div class="content">
     <p>@Glyn - I did emonPi Update just now (Fri Feb 26 at 17:20 UTC) and still have the same issue. &nbsp;The display freezes at&nbsp;the emonPi Build screen and running <strong>sudo service emonPiLCD restart</strong> corrects the freeze until the next power up.</p>
<p>And now&nbsp;the switch&nbsp;changes the display from emonPi Build screen&nbsp;to the WiFi screen (as expected). &nbsp;The next 4 or 5 button pushes stay at the Wi-Fi screen. &nbsp;The next button push and I am back to&nbsp;emonPi Build screen. &nbsp;Hope this makes sense...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39913"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sat, 27/02/2016 - 21:01.</div>
    <div class="content">
     <p>@Glyn - Once I stop the emonhub service via&nbsp;<strong>sudo service emonhub stop</strong> / or <strong>restart</strong>&nbsp;I cannot restart emonhub. &nbsp;The only way I can restart emonhub is via <strong>sudo reboot</strong>. &nbsp;This is what I see in the emonhub log:</p>
<pre>
2016-02-27 14:24:26,822 INFO     RFM2Pi     Publishing: emonhub/rx/5/values
 309,179,488,121.79,17,0,0,0,0,0,57
2016-02-27 14:24:26,824 INFO     RFM2Pi     Publishing: emonhub/rx/5/rssi 0
2016-02-27 14:24:26,826 DEBUG    RFM2Pi     17 adding frame to buffer =&gt;
 [1456604666, 5, 309, 179, 488, 121.79, 17, 0, 0, 0, 0, 0, 57]
2016-02-27 14:24:26,827 DEBUG    RFM2Pi     17 Sent to channel&#39; : ToEmonCMS
​2016-02-27 14:24:28,446 DEBUG    MainThread SIGINT received.
2016-02-27 14:24:28,447 INFO     MainThread Exiting hub...
2016-02-27 14:24:28,667 INFO     MainThread Exit completed</pre><p>And I see this in the Terminal:</p>
<pre>
pi@emonpi:~ $ sudo service emonhub stop
​pi@emonpi:~ $ sudo service emonhub start
​pi@emonpi:~ $ sudo service emonhub status
● emonhub.service - LSB: Start/stop emonHub
​   Loaded: loaded (/etc/init.d/emonhub)
   Active: active (exited) since Sat 2016-02-27 14:24:38 CST; 6s ago
  Process: 1764 ExecStop=/etc/init.d/emonhub stop (code=exited, status=0/SUCCESS)
  Process: 1814 ExecStart=/etc/init.d/emonhub start (code=exited, status=0/SUCCESS)
Feb 27 14:24:38 emonpi emonhub[1814]: Starting OpenEnergyMonitor emonHub:
 emonhub​ has been started ok.
Feb 27 14:24:38 emonpi systemd[1]: Started LSB: Start/stop emonHub.
Feb 27 14:24:38 emonpi emonhub[1814]: usage: emonhub.py [-h] [--config-file​
 CONFIG_FILE] [--logfile LOGFILE]
Feb 27 14:24:38 emonpi emonhub[1814]: [--show-settings] [--version]
Feb 27 14:24:38 emonpi emonhub[1814]: emonhub.py: error: argument --logfile:
&nbsp;can&#39;t open &#39;/var/log/emonhub/emonhub.log&#39;: [Errno 13...hub.log&#39;
Hint: Some lines were ellipsized, use -l to show in full.pi@emonpi:~ $ </pre><p>I added more Terminal info in the enclosed file.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39919"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Sat, 27/02/2016 - 23:04.</div>
    <div class="content">
     <p>Jon,</p>
<p>To me with my limited linux skills it looks as though it cannot find, open or write to /var/log/emonhub/emonhub.log.</p>
<p>if you change directory to /var/log/emonhub</p>
<pre>
<strong>cd /var/log/emonhub</strong></pre><p>and then do</p>
<pre>
<strong>ls -lah</strong></pre><p>This will show the owner, file permissions etc of that directory, if you could feed that back I may be able to help.</p>
<p>Jimmy</p>
<p>PS, If someone can explain how to add blocks of code, I would be grateful.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39925"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 28/02/2016 - 00:23.</div>
    <div class="content">
     <p>Thanks for letting me know. It was indeed a log file permissions issue. I have just pushed a fix. Please let me know if it works for you.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39939"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sun, 28/02/2016 - 20:01.</div>
    <div class="content">
     <p>The sudo service emonhub stop&nbsp;/ start /&nbsp;restart works! &nbsp;Thank you!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39968"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Mon, 29/02/2016 - 18:03.</div>
    <div class="content">
     <p>I had some problems upgrading, which I detailed <a href="12189.html">here</a> and just got around to trying this again.</p>
<p>I have upgraded from <strong>emonpi-28may2015</strong> to this release candidate, following your directions. Here&#39;s what I did:</p>
<ol>
<li>I dd&#39;d the image to a 16GB&nbsp;&micro;SD card with <strong>sudo ddrescue -Df ~/emonSD-20Feb16.img /dev/sde</strong>;</li>
<li>I resized the partitions using GParted;</li>
<li>I used opened the page <strong>http://emonpi/emoncms/backup</strong> on my existing emonPi and downloaded the file <strong>emoncms-backup-2016-02-22.tar.gz</strong> to my home directory;</li>
<li>I copied this file to the data partition of the new SD card, into the <strong>/uploads</strong> directory;</li>
<li>I shutdown my emonPi, switched the SD cards over, inserting the new 16GB one, then connected an ethernet cable;</li>
<li>After powering up the emonPi, I ssh&#39;d into it and ran <strong>~/backup/./emoncms-import.sh</strong>;</li>
<li>I then performed the actions <strong>cd ~/data</strong> and <strong>mv old.emoncms.conf emoncms.conf</strong> then <strong>sudo</strong><strong> reboot</strong>;</li>
<li>I browsed to&nbsp;<strong>http://emonpi</strong>, successfully logged in with my existing credentials, went to <strong>Setup &gt; EmonHub</strong>, changed the RF frequency for my emonTH modules to 868MHz and then entered my Write API Key from emoncms.org.</li>
<li>I then clicked on menu item <strong>Setup &gt; Administration</strong> then under <strong>Update database</strong>, clicked the button&nbsp;<strong>Update &amp; check</strong>, which listed some errors;</li>
<li>I applied the listed fixes and then browsed to <strong>Setup &gt; Inputs</strong>, where <strong>Node </strong><strong>emonpi</strong>, <strong>Node emonth1</strong> and <strong>emonth2</strong> were now visible;</li>
<li>Next, I re-mapped the inputs to my existing feeds by re-creating the processes needed, selecting the old feeds from the drop-down menu (see screenshot, below);</li>
</ol>
<p><img alt="" src="../sites/default/files/Screenshot%20from%202016-02-29%2016-13-44.png" style="height: 298px; width: 500px;" /></p>
<p>(Tip: I put my original emonPi SD card into a second Raspberry Pi, <a href="http://www.howtogeek.com/197934/how-to-change-your-hostname-computer-name-on-ubuntu-linux/">changed it&#39;s hostname</a> to <strong>emonpi-old</strong>, connected it to the network and opened <strong>http://emonpi-old</strong> in a new tab on my web browser, so that I could look at my old settings, rather than trying to rely on memory.)</p>
<p>I entered my WIFI key, removed the ethernet cable and rebooted the emonPi again to check that everything was working OK and all seems well, except for a couple of issues:</p>
<ol>
<li>Initially, the LCD screen and control buttons were not working quite right. The power-off and selection button were not working at all and the LCD screen was perminently backlit. I ran <strong>Update emonPi &gt; Update Now</strong> and this seemed to fix the problem;</li>
<li>I am able to see my dashboard by going to <strong>Setup &gt; Dashboards</strong> and viewing/editing my main dash (by clicking on the eyeball button), but when I try to view my dash from the main page <em>(<a href="http://emonpi/emoncms/dashboard/view/main dash" title="http://emonpi/emoncms/dashboard/view/main%20dash">http://emonpi/emoncms/dashboard/view/main%20dash</a>)</em>, it is blank (see first screenshot, below);</li>
<li>Some of the items in my dashboard do not initially display and need to be &quot;prodded&quot; in order to show up (see second screenshot, below);</li>
</ol>
<p><img alt="" src="../sites/default/files/Screenshot%20from%202016-02-29%2016-49-28.png" style="height: 298px; width: 500px;" /></p>
<p><img alt="" src="../sites/default/files/Screenshot%20from%202016-02-29%2016-50-11.png" style="height: 298px; width: 500px;" /></p>
<p>Also, as a feature request; could you possibly put a shutdown/restart option in the admin interface?</p>
<p>(It&#39;ll save having to ssh into the pi to do so.)</p>
<p>Please let me know if you want any more information, logs, or anything else,</p>
<p>Rich.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39972"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 29/02/2016 - 20:08.</div>
    <div class="content">
     <p>Hello again Ritch!&nbsp;</p>
<p>Fantastic, thanks a lot for detailing your migration&nbsp;experience. I&#39;m glad to hear it was a mostly positive experience this time around.&nbsp;</p>
<p>When you say &#39;poke&#39; the new&nbsp;dashboard to make the graphs appear, what do you mean exactly?!&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>Yes, it would be great to be able to restart / shutdown via Emoncms. However it would be quite a large security risk to allow the web user to run superuser shell commands. Maybe it could be an optional Emoncms module users could self install if they are feeling brave and are confident with their local firewall security setup. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39973"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Mon, 29/02/2016 - 20:33.</div>
    <div class="content">
     <p>I actually do agree that this could be a security risk, but also could be a better end user experiance so people don&#39;t have to get putty, or use the cli at all.</p>
<p>This is not something I have ever tried, but if you were to change the permissions on the &quot;shutdown command&quot; (/bin/shutdown?) and the web link just perform a system call to this would this be doable, or just an alias?</p>
<p>That way the www-data user is not elevated, but it will allow the request to be built, so should help mitigate the security risk.</p>
<p>After all most&nbsp;linux based home routers allow this functionality one way or another...</p>
<p>&nbsp;</p>
<p>Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39979"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 29/02/2016 - 21:16.</div>
    <div class="content">
     <p>That's actually a good idea, I had not thought of that. So simple. You can see my concern of letting Web user run sudo commands! </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39980"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Mon, 29/02/2016 - 21:46.</div>
    <div class="content">
     <p>Hi,</p>
<p>It does not work :(</p>
<p>Tried on Ubuntu, but its basically the same, it looks like the /sbin/shutdown binary is hard coded to require a root user...</p>
<p>However the link <a href="http://askubuntu.com/questions/168879/shutdown-from-terminal-without-entering-password">http://askubuntu.com/questions/168879/shutdown-from-terminal-without-entering-password</a> may be able to provide a future use that may work, but I&#39;ll leave that down to you...</p>
<p>Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39985"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Tue, 01/03/2016 - 08:19.</div>
    <div class="content">
     <p>&quot;When you say &#39;poke&#39; the new&nbsp;dashboard to make the graphs appear, what do you mean exactly?!&quot; - <a href="../user/10.html">glyn.hudson</a></p>
<p>&nbsp;</p>
<p><img alt="" src="../sites/default/files/Screenshot%20from%202016-02-29%2016-50-11.png" style="width: 500px; height: 298px;" /></p>
<p>Basically, as I hope you can see from the image above, the power dials on the top three graphs were not visible, but when I clicked on the area where each dial should be, the outline of the widget appeared. Clicking <strong>Configure</strong> for each one of these showed that all three widgets were set to <strong>mains_power</strong> as their chosen feed input, although the other options remained intact. I assume that this must have had something to do with the re-mapping of inputs to the feeds, but this does not explain why this happened only with these dials and not the rest of the graphs. This behavior is reproducible, as this happened exactly the same during my earlier attempt at upgrading. On the grand scheme of things, this is not really a big deal, but it is a reproducible bug and so I thought it should be brought to your attention.</p>
<p><img alt="" src="../sites/default/files/Screenshot%20from%202016-03-01%2007-55-45.png" style="width: 500px; height: 298px;" /></p>
<p>I simply changed the relevant feeds back to <strong>mains_power</strong>, <strong>solar_power</strong> and <strong>house_power</strong> respectively, then saved the dash and all was well.</p>
<p>Also, as you may notice; I managed to get my default dashboard to show up properly, so that it is not only accessible from the Setup menu. I did this by changing it&#39;s name and alias from <strong>Main Dash</strong> to <strong>Main-Dash</strong>. (Thanks to&nbsp;<a href="../user/9178.html">derek_j</a> in <a href="11798.html">this post</a> for the solution.)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39986"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Tue, 01/03/2016 - 08:17.</div>
    <div class="content">
     <p>&quot;However the link <a href="http://askubuntu.com/questions/168879/shutdown-from-terminal-without-entering-password" title="http://askubuntu.com/questions/168879/shutdown-from-terminal-without-entering-password">http://askubuntu.com/questions/168879/shutdown-from-terminal-without-ent...</a> may be able to provide a future use that may work, but I&#39;ll leave that down to you...&quot; - <a href="../user/3623.html">manicmoddin</a></p>
<p>I just took a look and there&#39;s some really good ideas on there. :)</p>
<p>+1</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39992"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Tue, 01/03/2016 - 12:38.</div>
    <div class="content">
     <p>I&#39;ve been looking forward to being able to get my emonPi to do OOK switching for ages now and with this major release, I should be able to do so soon. The trouble is, I have a big bunch of cheapo, Maplin RF sockets, which I want to control and not the LightWaveRF type supported here.</p>
<p><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=37&amp;t=66946" title="https://www.raspberrypi.org/forums/viewtopic.php?f=37&amp;t=66946">https://www.raspberrypi.org/forums/viewtopic.php?f=37&amp;t=66946</a></p>
<p><a href="http://web.archive.org/web/20151125162714/http://code.google.com/p/rc-switch/wiki/HowTo_OperateLowCostOutlets" title="http://web.archive.org/web/20151125162714/http://code.google.com/p/rc-switch/wiki/HowTo_OperateLowCostOutlets">http://web.archive.org/web/20151125162714/http://code.google.com/p/rc-sw...</a></p>
<p>I have been trawling the internet for the last couple of days and couldn&#39;t find an easy way of getting this set up, until I found myself back to the OpenHab site, where I discovered that a <a href="https://github.com/openhab/openhab/wiki/Raspberry-Pi-RC-Switch-Binding">Raspberry Pi RC Switch Binding</a> has been in the pipeline since last May and was added to version 1.8 in January.</p>
<p>My question is: Would it be possible to include this in the release and do you think it would work on your hardware?</p>
<p>Also, I&#39;ve been in conversation with Daniel Knight over at the <a href="http://dietpi.com/">DietPi</a> project about including emonCMS and some of this other stuff as options in <a href="http://fuzon.co.uk/phpbb/viewtopic.php?f=8&amp;t=5#p5">his installer</a> and he seems very interested.</p>
<p><a href="https://www.raspberrypi.org/forums/viewtopic.php?p=914226#p914226" title="https://www.raspberrypi.org/forums/viewtopic.php?p=914226#p914226">https://www.raspberrypi.org/forums/viewtopic.php?p=914226#p914226</a></p>
<p><a href="https://github.com/Fourdee/DietPi/issues/210" title="https://github.com/Fourdee/DietPi/issues/210">https://github.com/Fourdee/DietPi/issues/210</a></p>
<p>Apart from my own selfish motives, I thought that it wouldn&#39;t hurt to pimp this project and maybe get word of it to a wider audience.</p>
<p>&nbsp;</p>
<p><em>[Partial duplicates of this post deleted. Please see &#39;Read this before posting&#39;.&nbsp;Moderator (RW)]</em></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40013"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 01/03/2016 - 17:10.</div>
    <div class="content">
     <p>Yes RC switch binding should with with our hardware. Just select GPIO&nbsp;18 to use the OOK Tx module. Installing by default may conflict with LWRF. Testing would be needed. Let me know if you get this working.&nbsp;</p>
<p>DietPi looks very cool. This is the full image build guide I created while making the emonPi image. Emoncms&nbsp;can be installed as a normal web app but it&#39;s frequent disk writing could cause a normal SD to fail in a few months. This is why we have put a lot of effort into RO FS and low-write optimisation. See full image build guide:&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md" title="https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md">https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-bui...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40083"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Thu, 03/03/2016 - 17:19.</div>
    <div class="content">
     <p>One of the first questions you are asked when you first install DietPi is if you want to set up a dedicated hard drive for data storage:</p>
<p><a href="http://fuzon.co.uk/phpbb/viewtopic.php?f=8&amp;t=9#p9" title="http://fuzon.co.uk/phpbb/viewtopic.php?f=8&amp;t=9#p9">http://fuzon.co.uk/phpbb/viewtopic.php?f=8&amp;t=9#p9</a></p>
<p>&quot;Step 5 :<br />
On first run, DietPi will ask the following questions regarding this installation:<br />
- Dedicated USB Harddrive Installation?</p>
<p>If you selected Yes, DietPi will start the USB drive setup system. Follow the onscreen instructions. This will configure your USB drive for this installation.<br />
Using a USB Dedicated Harddrive installation will ensure all DietPi-Software options are available to you. DietPi will automatically setup all future software installations to utilize the USB Drive rather than the SD card.&quot;</p>
<p>So you can set up a spinning drive for this role if you want.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40085"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 03/03/2016 - 18:02.</div>
    <div class="content">
     <p>Excellent.&nbsp;</p>
<p>I am planning a release of this image soon, I have the following&nbsp;on my list of tweaks to make. Can you think of anything else that needs to be fixed (that can&#39;t be fixed fix git push to emoncms&nbsp;/ emonPi repo etc.). The unit will perform an auto update on first boot&nbsp;in the factory so all latest git update will be pulled in:</p>
<ul>
<li><span style="line-height: 1.6;">Update (update, upgrade and raspi-update) to pull in support for RasPi3</span></li>
<li><span style="line-height: 1.6;">Driver support for GSM 3G dongle&nbsp;</span><span style="line-height: 1.6;">&nbsp;</span>​</li>
<li>Fix serial AMA0 RasPi3 issue</li>
<li>Install new<a href="12280.html"> Emoncms Graph module</a></li>
</ul>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40089"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Thu, 03/03/2016 - 20:33.</div>
    <div class="content">
     <p>Here is a list I had (not sure if they can be updated by&nbsp;git):</p>
<ul>
<li>Backup &gt; Import Backup webpage: &nbsp;get tar.gz error even with correct file extension.</li>
<li>Node-RED: update to current version of v0.13.3.
<ul>
<li>I&#39;ve tried the instructions on nodered.org and many other sites but I cannot get Node-Red updated</li>
</ul>
</li>
<li>Node.js:&nbsp;update to current version of node.js. &nbsp;Some of the node-red node installs warn of installed version&nbsp;v0.10.29&nbsp;and want 0.10.40+</li>
<li><strong>EDIT: </strong>LCD: &nbsp;Display freezes on the emonPi Build screen after reboot/power-up.&nbsp;<strong>sudo service emonPiLCD restart </strong>needed<strong> </strong>after reboot or&nbsp;shutdown.</li>
</ul>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40094"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 03/03/2016 - 23:36.</div>
    <div class="content">
     <p>Hi Jon, Thanks for the input.</p>
<p>I have not been able to replicate the exact&nbsp;backup issue. You are experiencing. Could you send me your backup file (via&nbsp;dropbox) so i can try and restore and debug this issue. What base image version are you migrating from? What is the size of the backup file?&nbsp;Sorry, if you have told me these details before..too much multithreading going on!&nbsp;</p>
<p>Its should be easy to update nodered since we&#39;re now using the pre-packaged version sudo apt-get update &amp;&amp; upgrade should do the trick. I&#39;ve just tested and it has indeed updated nodered. This most recent package updates will be included in the new image. It&#39;s on my list!&nbsp;</p>
<p>The emonPi&nbsp;LCD software has just had a big update. The hanging issue has been fixed and the code has been overhauled resulting&nbsp;in a much snappier page changing experience. Let me know if all is working for you now.&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40096"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Fri, 04/03/2016 - 03:47.</div>
    <div class="content">
     <p>Glyn - The Backup Import info should be in your inbox and dropbox. &nbsp;And I&#39;ll try the node-red update via the command&nbsp;sudo apt-get update &amp;&amp; upgrade.</p>
<p>And the emonPi&nbsp;LCD upgrade did make things run much faster - no delays between screens!. &nbsp;Thank you Bruce! &nbsp;(I did see the git comment about the backlight staying on and my display does the same).</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40117"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 05/03/2016 - 03:29.</div>
    <div class="content">
     <p>I can&#39;t see your backup file in my dropbox, nor have I had a notification. Please PM me a download link&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40160"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Tue, 08/03/2016 - 01:17.</div>
    <div class="content">
     <p>Glyn - I sent a PM on the 4th. &nbsp;Did it make it to you?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40161"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 08/03/2016 - 01:22.</div>
    <div class="content">
     <p>Got it! Thanks, sorry I&#39;ve been busy over the weekend and today. I&#39;ll have a go at debugging this tomorrow :-)&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40173"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Tue, 08/03/2016 - 17:10.</div>
    <div class="content">
     <p>I did an emonPi update via the web interface about eight days ago and all was working fine, but I checked the screen on the emonPi a little later and it was filled with garbage (random characters - sorry, no pics; I&#39;ll take a snapshot next time). The backlight was powering off properly after it&#39;s delay, so I just left it.</p>
<p>I checked it again today and all seemed OK still, apart from the display still, so I ran the emonPi updater again. The screen restarted during the update, showing the correct info pages and was switchable via the front mounted button, however, the backlight was permanently on again.</p>
<p>I ssh&#39;d in and tried a <strong>sudo reboot</strong>, which failed and froze the terminal. I ssh&#39;d in again and tried a <strong>sudo poweroff</strong>, which did the same. I then tried a <strong>sudo halt</strong>, which seemed to do the same, but I was unable to ssh in again. Checking my DHCP server showed that the emonPi was down, so I looked at the unit again and saw that the screen was still showing the network (IP) info. Pressing the front button, however, failed this time (indicating that the Pi was powered down, but not the screen) so I then did a hard shutdown (I pulled the plug).</p>
<p>After plugging back in, all was well, apart from the fact that the backlight was now permanently on again (grr). A further <strong>sudo reboot</strong> restarted the machine, but the screen is still permanently backlit.</p>
<p>It seems that I&#39;m not the only one seeing screen glitches like this, so it needs looking at, I think.</p>
<p>I think that my suggestion of a soft-restart and shutdown option in the web interface would definitely be good idea (possibly utilising your shutdown script in some way); especially for debugging work like this.</p>
<p>I would also like to suggest that the <strong>Update and check</strong> (database) screen have a <strong>Done</strong> or <strong>Go Back</strong> button at the bottom (so you don&#39;t have to click the back arrow to get back) and that the <strong>Server Information</strong> section in the admin screen have a <strong>Filesystem Info</strong> part, with percentage of free space remaining in Root and Data directories, at the minimum. Maybe it could show if you are using an external storage drive for the data.</p>
<p>&nbsp;</p>
<p>Thanks,</p>
<p>Rich.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40194"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 09/03/2016 - 11:12.</div>
    <div class="content">
     <p>Hi Ritch,</p>
<p>Thanks for letting us know. The backlight issue has now been fixed. Please update again today to pull in&nbsp;the latest fix. You should notice the LCD navigation to be more responsive now. A community member has helped me&nbsp;refactor the emonPi LCD python service code.&nbsp;</p>
<p>If you interested in what&#39;s going on, see commits:&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/commits/master/lcd/emonPiLCD.py" title="https://github.com/openenergymonitor/emonpi/commits/master/lcd/emonPiLCD.py">https://github.com/openenergymonitor/emonpi/commits/master/lcd/emonPiLCD.py</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40206"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 09/03/2016 - 15:31.</div>
    <div class="content">
     <p>Hi Jon,</p>
<p>I&#39;ve had a go at debugging why your backup file is not uploading..i&#39;ve not been able to fix. The upload seems to fail about 98%.&nbsp;I am uploading over local network and the uploads is very&nbsp;fast to network timeout is not an issue.&nbsp;</p>
<p>The error about not being a tar.gz is incorrect, this is just the general error I set for any failure. I have now renamed this error just to be &#39;upload failed&#39; to avoid confusion.&nbsp;</p>
<p>I think the issue is with php file uploader. Things I have tried:</p>
<p>increasing size of /tmp in tmpfs&nbsp;in case php is storing the file here before moving to ~/data/uploads</p>
<p>Double checked the php.ini settings:</p>
<pre>
post_max_size = 200M
upload_max_filesize = 200M</pre><p>​Expand ~/data/uploads to ensure there is plenty of space (even though there was already).&nbsp;</p>
<p>Has anyone got any ideas what else could be causing PHP upload to fail to upload a 28Mb&nbsp;file while a 6Mb file uploads fine ? Here is the upload code:&nbsp;</p>
<p><a href="https://github.com/emoncms/backup/blob/master/backup/backup_controller.php#L71" title="https://github.com/emoncms/backup/blob/master/backup/backup_controller.php#L71">https://github.com/emoncms/backup/blob/master/backup/backup_controller.p...</a></p>
<p>Obviously you could do a manul import using backup module to restore after moving the backup onto the emonPi manually, but this misses the point! Instructions for manual restore are here:&nbsp;</p>
<p><a href="https://github.com/emoncms/backup/#manual-import-instructions " title="https://github.com/emoncms/backup/#manual-import-instructions ">https://github.com/emoncms/backup/#manual-import-instructions </a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40212"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 09/03/2016 - 21:37.</div>
    <div class="content">
     <p>Glyn - This is a guess of why the&nbsp;import is running out of room.</p>
<p>28 MB from the tar.gz file (in the<strong> /uploads</strong> folder)<br />
87 MB from the uncompressed files (in the<strong> /imports</strong> folder)<br />
87 MB from the files copied from the <strong>/imports </strong>folder to the<strong> /data</strong> folder<br />
------<br />
202 MB added to the /home/pi/data area. &nbsp;And this is bigger then the 194 MB allocated. &nbsp;This is the df -h from the first post.</p>
<pre>
/dev/mmcblk0p3  194M   32M  153M  17% /home/pi/data

</pre><p>Maybe delete the tar.gz should be deleted after uncompressing&nbsp;it. &nbsp;And after the import delete the&nbsp;&nbsp;/imports folder.&nbsp;</p>
<p><strong>EDIT:&nbsp;</strong> Ignore the above. &nbsp;I just realized I never tried an import with a larger <strong>/data</strong> partition using gparted or Paul&#39;s sdpart script. &nbsp;Sorry.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40219"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 09/03/2016 - 23:04.</div>
    <div class="content">
     <p>Good point, it would be a good idea to remove the compressed backup once it&#39;s been unzipped. I will add this to the import script.&nbsp;</p>
<p>However I did try to import&nbsp;your backup&nbsp;with an expanded (to 3GB!) ~/data partition with the same result. I would be interested to hear if you also experienced this same. I wish I could fix this. It&#39;s very annoying, there is something strange going on with php uploads.&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40262"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Fri, 11/03/2016 - 16:29.</div>
    <div class="content">
     <p>&quot;Hi Ritch,</p>
<p>Thanks for letting us know. The backlight issue has now been fixed. Please update again today to pull in&nbsp;the latest fix. You should notice the LCD navigation to be more responsive now. A community member has helped me&nbsp;refactor the emonPi LCD python service code.&nbsp;</p>
<p>If you interested in what&#39;s going on, see commits:&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/commits/master/lcd/emonPiLCD.py"" title="https://github.com/openenergymonitor/emonpi/commits/master/lcd/emonPiLCD.py&quot;">https://github.com/openenergymonitor/emonpi/commits/master/lcd/emonPiLCD...</a></p>
<p>&nbsp;</p>
<p>Sorry for the delay.</p>
<p>I haven&#39;t had the chance to check out the commits to the LCD script, though I will because I <em>am</em> very interested.</p>
<p>I applied the update as soon as I read your reply and it seemed to immediately fix my display issues. I did not try shutting down and restarting afterwards (this has previously triggered the problems I have mentioned), but great progress seems to have been made on this front. Good work!</p>
<p>&nbsp;</p>
<p>&quot;Good point, it would be a good idea to remove the compressed backup once it&#39;s been unzipped. I will add this to the import script.&nbsp;</p>
<p>However I did try to import&nbsp;your backup&nbsp;with an expanded (to 3GB!) ~/data partition with the same result. I would be interested to hear if you also experienced this same. I wish I could fix this. It&#39;s very annoying, there is something strange going on with php uploads. &quot;</p>
<p>&nbsp;</p>
<p>As I have pointed out previously; I have been having the exact same problem with the uploader and circumvented this by doing a direct transfer and triggering the update script manually. <em>It is annoying</em>.</p>
<p>I dd&#39;d onto a 16GB card and expanded the root and&nbsp; data partitions to Gigabyte sizes, but as you have experienced; this makes no difference.</p>
<p>One suggestion I would make would be be to provide an ~8GB image as standard, with nice, big root and data partitions, already configured.</p>
<p>As I pointed out earlier; the new image does not fit on the 4GB SD card that originally came with my emonPi and I had to substitute it with a larger one in order to get upgraded: If the new standard is 8GB, commit to 8GB and don&#39;t make people faff around with resizing their partitions. ;)</p>
<p>My one bit of advice would be to make sure that the image comes in comfortably under the 8GB boundary, as otherwise, people will have the same problem that I did: Their particular card may well come in a few hundred or even tens of MB undersize. Annoying!</p>
<p>Thanks for all of the hard work,</p>
<p>Rich.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40266"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9146.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ajsicek&#039;s picture" title="ajsicek&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9146.html" title="View user profile.">ajsicek</a> on Fri, 11/03/2016 - 18:46.</div>
    <div class="content">
     <p>Thanks everyone for great work.</p>
<p>I downloaded the new RC1 SD image&nbsp;put in on 16GB card and expanded root and data partition&nbsp;for my emonpi. Most of the stuff is running smoothly out of the box (Node-red is awesome!), except <strong>creating feeds on local emoncms</strong>.</p>
<div>I can create a feed but after couple of minutes it turn red saying <strong>Feedid&nbsp;#&nbsp;does not exists or was deleted.</strong></div>
<div>In the inputs page Process list column is stuck on <strong>wait...</strong></div>
<div>Feeds page is stuck on <strong>loading...</strong></div>
<div>emoncms.log has also a lot of lines saying <strong>ERROR|feed_model.php|EngineClass() Engine id &#39;1&#39; is not supported.</strong></div>
<div>When I create the feed in the emoncms.log will soon appear &quot;<strong>|WARN|PHPFina.php|get_meta() meta file does not exist &#39;/home/pi/data/phpfina/#.meta&#39;&quot;</strong>&nbsp;but the file exists and its size is growing so I assume it works. Permissions of /home/pi/phpfina are files inside are</div>
<ul>
<li>
<div>drwxr-xr-x 2 www-data root &nbsp; &nbsp; &nbsp;1024 Mar 11 18:37 phpfina</div>
</li>
<li>
<div>-rw-r--r-- 1 www-data www-data 28848 Mar 11 19:31 #.dat​​</div>
</li>
</ul>
<div>I have seen people having similar issues, but could not actually find any solution which would work.</div>
<div>Cheers</div>
<div>Ajs</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40273"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Fri, 11/03/2016 - 22:36.</div>
    <div class="content">
     <p>I took a fresh image to test the new&nbsp;RPi 3. After doing updates (sudo apt-get update and upgrade) the standard node red flow was gone as wel as the emoncms node. After that I did the emonpi update in the emoncms administration</p>
<p>When I scan for Wifi networks, check my network and type in the password, nothing happens. Wifi&nbsp;won&#39;t get saved and won&#39;t connect. Is this RPi 3&nbsp;related?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40318"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 14/03/2016 - 15:56.</div>
    <div class="content">
     <p>It&nbsp;seems the nodered update overwrote the setting to move the nodered data folder to ~/data. To set this back just</p>
<p>edit&nbsp;<br />
&nbsp;</p>
<p><em>sudo nano /lib/systemd/system/nodered.service</em></p>
<p>Add line to the [service] section</p>
<p>
<em>Environment=&quot;NODE_RED_OPTIONS=--userDir /home/pi/data/node-red&quot;</em></p>
<p>then run<br />
&nbsp;</p>
<p><em>sudo systemctl daemon-reload<br />
sudo service nodered restart</em></p>
<p>
<a href="https://github.com/openenergymonitor/oem_node-red#move-user-data-partition-to-rw-data-partition-on-emonpi" title="https://github.com/openenergymonitor/oem_node-red#move-user-data-partition-to-rw-data-partition-on-emonpi">https://github.com/openenergymonitor/oem_node-red#move-user-data-partiti...</a></p>
<p>​<br />
Your flows should now be restored :-)&nbsp;<br />
&nbsp;</p>
<p>I&#39;m not sure how to stop this happening, might be just a one off. Node-red should not need to change this file in a normal update</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40327"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 14/03/2016 - 21:51.</div>
    <div class="content">
     <p>Yes, to make Wifi work on Rpi3 you need to:</p>
<pre>
sudo apt-get update
sudo apt-get upgrade
sudo apt-get dist-upgrade
sudo rpi-update</pre><p>then add to config.txt</p>
<pre>
dtoverlay=pi3-disable-bt</pre><p>​then reboot and run&nbsp;</p>
<pre>
sudo systemctl disable hciuart</pre><p>​Full explanation:&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md#raspberry-pi-3-compatibility" title="https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md#raspberry-pi-3-compatibility">https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-bui...</a></p>
<p>I will be releasing RC2 image soon which will work out of box with Rpi3</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40328"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 14/03/2016 - 21:56.</div>
    <div class="content">
     <p>@ajsicek sorry to hear you are having so many errors. I have been unable to relocate these errors. Can an you think of any other factors which might have caused these issues?&nbsp;Could you try and run an emonPi update then&nbsp;factory reset then let me know if you still get errors?&nbsp;</p>
<p>To factory reset:</p>
<pre>
$ sudo su

$ emonpi/./factoryreset</pre><p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40337"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3655.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="keithpark&#039;s picture" title="keithpark&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/3655.html" title="View user profile.">keithpark</a> on Tue, 15/03/2016 - 07:46.</div>
    <div class="content">
     <p>Have been testing RC1 with my setup which is based on a Pi ,TXv2 and a bunch of diy temp/humidity boards. I&#39;m having trouble getting the data&nbsp;from the diy nodes to report in the input&nbsp;menu.</p>
<p>I&#39;ve added the node info to emonhub.conf as below.</p>
<p>[[27]]<br />
&nbsp; &nbsp; nodename = FunkyLounge27<br />
&nbsp; &nbsp; [[[rx]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp;names = battery, temperature, humidity<br />
&nbsp; &nbsp; &nbsp; &nbsp;datacode = h<br />
&nbsp; &nbsp; &nbsp; &nbsp;scales = 0.001,0.01,0.01<br />
&nbsp; &nbsp; &nbsp; &nbsp;units = V,C,%</p>
<p>Checking the log reports the data&nbsp;as published :</p>
<p>016-03-13 21:21:51,340 DEBUG&nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; 30163 NEW FRAME : OK 27 14 13 224 6 166 24 (-57)<br />
2016-03-13 21:21:51,342 DEBUG&nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; 30163 Timestamp : 1457904111.34<br />
2016-03-13 21:21:51,342 DEBUG&nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; 30163 From Node : 27<br />
2016-03-13 21:21:51,343 DEBUG&nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; 30163&nbsp; &nbsp; Values : [3.342, 17.6, 63.1]<br />
2016-03-13 21:21:51,343 DEBUG&nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; 30163&nbsp; &nbsp; &nbsp;&nbsp;RSSI&nbsp;: -57<br />
2016-03-13 21:21:51,344 INFO &nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; Publishing:&nbsp;emon/FunkyLounge27/battery 3.342<br />
2016-03-13 21:21:51,349 INFO &nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; Publishing:&nbsp;emon/FunkyLounge27/temperature 17.6<br />
2016-03-13 21:21:51,352 INFO &nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; Publishing:&nbsp;emon/FunkyLounge27/humidity 63.1<br />
2016-03-13 21:21:51,353 INFO &nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; Publishing:&nbsp;emon/FunkyLounge27/rssi&nbsp;-57<br />
2016-03-13 21:21:51,355 INFO &nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; Publishing:&nbsp;emonhub/rx/27/values 3.342,17.6,63.1<br />
2016-03-13 21:21:51,356 INFO &nbsp; &nbsp;&nbsp;RFM2Pi&nbsp;&nbsp; &nbsp; Publishing:&nbsp;emonhub/rx/27/rssi&nbsp;-57</p>
<p>However in the input list all that comes through is the node name and just&nbsp;rssi value for this node. Any ideas?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40339"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 15/03/2016 - 10:14.</div>
    <div class="content">
     <p>Hi Keith,&nbsp;</p>
<p>It looks from the log that all is working well. Your Funky node is being successfully decoded and posted to MQTT. All topics posted to emon/ base topic should appear in Emoncms. Can you show me the full log showing your emonTx&nbsp;node being decoaded? Is your emonTx appearing OK in the Inputs?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40359"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3655.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="keithpark&#039;s picture" title="keithpark&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/3655.html" title="View user profile.">keithpark</a> on Tue, 15/03/2016 - 20:07.</div>
    <div class="content">
     <p>Thanks for the help, a&nbsp;link to the log is <a href="https://dl.dropboxusercontent.com/u/1214269/EmonConfLog.rtf">here</a>. Plus the <a href="https://dl.dropboxusercontent.com/u/1214269/EmonLog.rtf">Emon</a>&nbsp;log if you need it.</p>
<p>This is the input view with just the rssi reporting.</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/1214269/Screen%20Shot%202016-03-15%20at%2019.19.52.png_%3b%20filename_%3dUTF-8%27%27Screen%2520Shot%25202016-03-15%2520at%252019.19.52.png" style="width: 700px; height: 234px;" /></p>
<p>I also tried removing node 27 from the list in the&nbsp;EmonHubConf. By doing so the node then appeared in the input view without the naming, this&nbsp;would just mean some manual naming and processing to get working.</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/1214269/Screen%20Shot%202016-03-15%20at%2019.21.00.png_%3b%20filename_%3dUTF-8%27%27Screen%2520Shot%25202016-03-15%2520at%252019.21.00.png" style="width: 700px;" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40363"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 16/03/2016 - 01:18.</div>
    <div class="content">
     <p>This is very strange behavior, I have tested posting the exact MQTT topic string that you are having trouble with and it seems to work fine for me. See attached. I wanted to test to see if the capital letters or decimal places were causing an issue. However this seems to be&nbsp;not the case.</p>
<p>The next step will be for you to take a look to see if the values are ACTUALLY being posted to MQTT. You can look-in directly on the MQTT topics either via connecting to the emonPi&nbsp;vi ssh and running:</p>
<pre>
$ mosquitto_sub -v -u &#39;emonpi&#39; -P &#39;emonpimqtt2016&#39; -t &#39;emon/#&#39;</pre><p>Or using another MQTT client and entering your emonPi&nbsp;IP and MQTT&nbsp;authentication details (see above). I like using <a href="https://chrome.google.com/webstore/detail/mqttlens/hemojaaeigabkbcookmlgmdigohjobjm?hl=en">MQTT lens&nbsp;Chrome broswer extension</a>.&nbsp;</p>
<p>One you are subscribed to emon/# topic you should be able to see all the MQTT traffic posted to this topic, see if you can see any entries for&nbsp;FunkyLounge27. You could subscribed directly to emon/FunkyLounge27/# to only view messages on this topic. Let m know if you see&nbsp;battery,&nbsp;temperature etc.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40368"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 16/03/2016 - 09:49.</div>
    <div class="content">
     <p>Ah, that&#39;s interesting that the node appeared without the names. What exactly did you change?</p>
<p>Could you try using a nodeID other than 27?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40389"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3655.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="keithpark&#039;s picture" title="keithpark&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/3655.html" title="View user profile.">keithpark</a> on Thu, 17/03/2016 - 07:33.</div>
    <div class="content">
     <p>Thanks for the advice, I&#39;ve&nbsp;setup MQTT Lens and was able to subscribe to the Funky data as below.</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/1214269/Screen%20Shot%202016-03-17%20at%2007.14.00.png_%3b%20filename_%3dUTF-8%27%27Screen%2520Shot%25202016-03-17%2520at%252007.14.00.png" style="width: 700px; height: 312px;" /></p>
<p>To make the data from 27 appear in the input view without the names I just removed the entry below from the EmonHub Confg.</p>
<p>[[27]]<br />
&nbsp; &nbsp; nodename = FunkyLounge27<br />
&nbsp; &nbsp; [[[rx]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp;names = battery, temperature, humidity<br />
&nbsp; &nbsp; &nbsp; &nbsp;datacode = h<br />
&nbsp; &nbsp; &nbsp; &nbsp;scales = 0.001,0.01,0.01<br />
&nbsp; &nbsp; &nbsp; &nbsp;units = V,C,%</p>
<p>I also have a bunch of other temp/humidity&nbsp;nodes in the house numbered 22-30. I&#39;ve not added these to the node list in&nbsp;EmonHub Config yet. They currently show up in the input list but seem to have been re-mapped to higher node numbers. I guess the lower numbers are reserved?</p>
<p><img alt="" src="../../../dl.dropboxusercontent.com/u/1214269/Screen%20Shot%202016-03-17%20at%2007.28.42.png_%3b%20filename_%3dUTF-8%27%27Screen%2520Shot%25202016-03-17%2520at%252007.28.42.png" style="width: 700px; height: 264px;" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40390"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 17/03/2016 - 11:25.</div>
    <div class="content">
     <p>Mmm all looks good. I&#39;ve no idea why it&#39;s not showing up!</p>
<p>Using MQTT lense, could you try and publish some test values e.g. emon/test124/power99&nbsp;XX.XX and see if they show up in Emoncms?</p>
<p>You could also try renaming your&nbsp;funky sensor name to remove capitals and numbers&nbsp;from the topic name to see if that makes a difference.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40423"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9146.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ajsicek&#039;s picture" title="ajsicek&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9146.html" title="View user profile.">ajsicek</a> on Sat, 19/03/2016 - 09:11.</div>
    <div class="content">
     <p>Thanks a lot Glyn, it works like a charm after factory reset. I still get the error in log that a file does not exists, even if it exist, but it does not seem&nbsp;to have any consequences&nbsp;:)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40501"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8948.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smitt1979&#039;s picture" title="smitt1979&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8948.html" title="View user profile.">smitt1979</a> on Mon, 21/03/2016 - 16:37.</div>
    <div class="content">
     <p>Hi Glyn</p>
<p>I think there may be a bug in the emonSD-20Feb16 image if I restart my emonpi at boot up I get a large spike on the pulse counter see image</p>
<p><img alt="" src="../sites/default/files/PulseSpike.jpg" style="width: 700px; height: 422px;" /></p>
<p>the three spikes are all when i have reboot me emonpi&nbsp;I don&rsquo;t recall seeing this in previous builds</p>
<p>Thanks Steve</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40502"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 21/03/2016 - 16:39.</div>
    <div class="content">
     <p>Does this spike happen each time you reboot?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40503"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8948.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smitt1979&#039;s picture" title="smitt1979&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8948.html" title="View user profile.">smitt1979</a> on Mon, 21/03/2016 - 16:52.</div>
    <div class="content">
     <p>Hi Glyn&nbsp;</p>
<p>Yep looks that way I have just&nbsp;tested see image</p>
<p><img alt="" src="../sites/default/files/PulseSpike2.jpg" style="width: 700px; height: 401px;" /></p>
<p>Steve</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40573"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 24/03/2016 - 17:08.</div>
    <div class="content">
     <p>Hi Steve,</p>
<p>Sorry for the slow reply, this could be a hardware issue. I will try and investigate&nbsp;Just to confirm are you using a pulse counter connected to the emonPi&nbsp;via RJ45?&nbsp;</p>
<p>I&#39;m a bit confused why the spike on the graph then goes down again. Are you not logging the pulse data to Emoncms with the Wh accumulator data type? This feed type should now allow the value to decrement.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40574"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 24/03/2016 - 17:10.</div>
    <div class="content">
     <p>For those concerned, the upload issue (PHP upload failing at 20Mb) has now been fixed. Larger files can now easily be uploaded and imported into Emoncms via web interface.&nbsp;</p>
<p>Update emonPi to pull in latest changes</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40586"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8948.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smitt1979&#039;s picture" title="smitt1979&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8948.html" title="View user profile.">smitt1979</a> on Thu, 24/03/2016 - 20:11.</div>
    <div class="content">
     <p>Hi Glyn</p>
<p>The spike on the graph is not going down on its own.&nbsp; Sorry, I forgot to say I had been manually changing it back. See image with no manual edits. And yes, the pulse counter is connected directly to the emonPi&nbsp;via RJ45 &nbsp;</p>
<p><img alt="" src="../sites/default/files/spike.jpg" style="width: 700px; height: 402px;" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40594"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 24/03/2016 - 23:38.</div>
    <div class="content">
     <p>The feed is still going down (see Mar 21st 00:00). Are you logging with accumulator input process? I have setup a test and am investigating this. Thanks for your feedback&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40613"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Fri, 25/03/2016 - 21:16.</div>
    <div class="content">
     <p>Glyn - I did an emonPi Update but did not find any changed files in the /backup area. &nbsp;There are no errors in the emonpiupdate.log:</p>
<pre>
Thu Mar 24 22:24:11 CDT 2016
git pull /home/pi/emonpi
Already up-to-date.
git pull /home/pi/RFM2Pi
Already up-to-date.
git pull /home/pi/emonhub
git pull /home/pi/oem_openHab
Already up-to-date.
git pull /home/pi/usefulscripts
git pull /home/pi/backup
Start emonPi Atmega328 firmware update:

</pre><p>I tried to run git pull manually and saw &quot;error: insufficient permission for adding an object to repository database .git/objects&quot; for these three directories:<br />
&nbsp;&nbsp;&nbsp;&nbsp; /home/pi/emonhub<br />
&nbsp;&nbsp;&nbsp;&nbsp; /home/pi/usefulscripts<br />
&nbsp;&nbsp;&nbsp;&nbsp; /home/pi/backup<br />
Then I ran your fix:&nbsp;&nbsp; <a href="11799.html#comment-39153 " title="https://openenergymonitor.org/emon/node/11799#comment-39153 ">https://openenergymonitor.org/emon/node/11799#comment-39153 </a> and all updated as expected.</p>
<p>Is it possible to turn back on the git pull errors found within the emonpiupdate.log? &nbsp;</p>
<p>I&#39;ll try testing the import via the web page this weekend.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40684"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 28/03/2016 - 18:44.</div>
    <div class="content">
     <p>Glyn - Today I ran the Backup Import with a large file via the webpage. &nbsp;The backup file was 29 MB compressed and 95 MB uncompressed. &nbsp;All worked A-OK! &nbsp;The cleanup of the /import&nbsp;and /uploads directories is good - lots more room!</p>
<p>The only issue I ran into was the one above (<a href="12212.html#comment-40613" title="https://openenergymonitor.org/emon/node/12212#comment-40613">https://openenergymonitor.org/emon/node/12212#comment-40613</a>)&nbsp;and repairing git related permissions&nbsp;for these three directories:<br />
&nbsp;&nbsp;&nbsp;&nbsp; /home/pi/emonhub<br />
&nbsp;&nbsp;&nbsp;&nbsp; /home/pi/usefulscripts<br />
&nbsp;&nbsp;&nbsp;&nbsp; /home/pi/backup</p>
<p>This was a new build of image&nbsp;emonSD-20Feb16&nbsp;on a empty 8 GB&nbsp;SD Card. &nbsp;I ran sdpart_imagefile and after the emonPi updates I had to run the git permissions fix. &nbsp;Then the emonPi update ran as expected.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40694"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 28/03/2016 - 21:59.</div>
    <div class="content">
     <p>Great! Good to hear. Thanks for testing.&nbsp;</p>
<p>I wish I could get to the button of the git permissions errors. I&#39;m still not quite sure what&#39;s triggering it. I struggle to reliably recreate the issue. The git&nbsp;permissions errors seem to appear randomly!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40700"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 28/03/2016 - 23:18.</div>
    <div class="content">
     <p>Can the emonpiupdate&nbsp;log capture the git permission errors? &nbsp;Right now the only way I know there is an error is if the &quot;Already up-to-date&quot; is missing after the&nbsp;git pull command.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40947"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8948.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smitt1979&#039;s picture" title="smitt1979&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8948.html" title="View user profile.">smitt1979</a> on Wed, 06/04/2016 - 16:18.</div>
    <div class="content">
     <p>Hi Glyn</p>
<p>Did you have any luck looking in to the spike problem i have been having</p>
<p><img alt="" src="../sites/default/files/Spike-2.jpg" style="width: 700px; height: 401px;" /></p>
<p><img alt="" src="../sites/default/files/PulseFeeds.jpg" style="width: 700px; height: 133px;" /></p>
<p>Thanks Steve</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41338"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8948.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smitt1979&#039;s picture" title="smitt1979&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8948.html" title="View user profile.">smitt1979</a> on Fri, 22/04/2016 - 13:14.</div>
    <div class="content">
     <p>Hi Glyn</p>
<p>I&#39;m now not sure this is a hardware problem as it is also happening on the pulse input on my emonTH for my water meter could this be a problem at boot time in emoncms?</p>
<p>Steve</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41351"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 23/04/2016 - 09:22.</div>
    <div class="content">
     <p>Hi Steve,&nbsp;</p>
<p>I have not been able to replicate your pulse issue. Are you using our optical pulse counter with the emonPi? Same with the emonTH&nbsp;pulse, see below for output of my emonTH with an optical pulse connected:&nbsp;</p>
<p>I noticed an error with your input processing. The final input process &#39;power to kwh&#39; is designed for converting power data to kwh, this will not work with pulse data. You should use the wh accumulator as you have correctly&nbsp;above. If you want a Kwh accumulation, just apply a x 0.001 scaler then log to wh accumulator again. That will be Kwh. See attached&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41369"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8948.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smitt1979&#039;s picture" title="smitt1979&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8948.html" title="View user profile.">smitt1979</a> on Sun, 24/04/2016 - 15:32.</div>
    <div class="content">
     <p>Hi Glyn</p>
<p>I have been doing some playing and I think I have most of it working now It was the kWh to power causing the problem I just have one last part I cant getting working how do I covert the Wh Accumulator To kWh/d this is the setup i have now but the kWh to kWh/d is causing the same problem</p>
<p>Thanks Steve</p>
<p><img alt="" src="../sites/default/files/inputs_1.png" style="width: 700px; height: 126px;" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41381"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #1 ): emonSD-20Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 25/04/2016 - 12:12.</div>
    <div class="content">
     <p>Wh accumulator can be converted to Kwh bar graph data using bar graph vis see half way down<br />
<a href="../opticalpulsesensor.html" title="https://openenergymonitor.org/emon/opticalpulsesensor">https://openenergymonitor.org/emon/opticalpulsesensor</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12212"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-67kkmVDWnpzczZOSWHs1BBRXYpQebymA6gtMYcUbHPM" value="form-67kkmVDWnpzczZOSWHs1BBRXYpQebymA6gtMYcUbHPM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
