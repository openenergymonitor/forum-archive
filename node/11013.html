<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emonhub not receiving a certain node | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/emon/sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/emon/modules/node/node.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/defaults.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system-menus.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/user/user.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/mollom/mollom.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/forum/forum.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/views/css/views.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/comment/comment.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/themes/emon3/style.css?r" />
<style type="text/css" media="all">@import "/emon/sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="/emon/" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="/emon/">Home</a> » <a href="/emon/forum">Forums</a> » <a href="/emon/forum/5">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emonhub not receiving a certain node</h3>
        <span class="submitted">Submitted by <a href="/emon/user/2872" title="View user profile.">Marquis27</a> on Tue, 21/07/2015 - 02:32</span>
        <div class="content"><p>I&#39;m trying to switch from using a NanodeRF to an EmonHub. I am doing this since I have a custom node that sends a few items of data using unsigned ints which fail using the NanodeRF.&nbsp;</p>
<p>The problem is that for some reason my Emonhub isn&#39;t recieving that Node. When I use the minicom I can see all the other nodes transmitting, but I can&#39;t see my none 21. My NanodeRF&nbsp;receives it just fine, but it messes up the data a bit for the unsigned ints.&nbsp;</p>
<p>Is there a max size for the packet that for some reason the emonhub&nbsp;wont&#39; receive but that the NanodeRF can? Any other suggestions?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="/emon/node/5806" class="topic-previous" title="Go to previous forum topic">‹ make emoncms remember username.... </a>
              <a href="/emon/node/10999" class="topic-next" title="Go to next forum topic">My Electric app showing yesterdays usage in *Use Today* ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-32424"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/4440" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub not receiving a certain node</h3>

    <div class="submitted">Submitted by <a href="/emon/user/4440" title="View user profile.">pb66</a> on Tue, 21/07/2015 - 09:17.</div>
    <div class="content">
     <p>The only size restriction is 66byte packet size set&nbsp;within JeeLib, emonhub and emoncms&nbsp;are not so fussy.&nbsp;</p>
<p>Just for clarity, emonHub is just a software&nbsp;running on the Pi, the receiver hardware attached to the Pi&#39;s GPIO&nbsp;is usually a RFM2Pi&nbsp;and combined these are one form of&nbsp;emonBase, the emonPi and NanodeRF are also emonBases.</p>
<p>emonHub&nbsp;can only process the data it receives&#39; and if you are not seeing the data in minicom then the data is not arriving at the serial port of the Pi so this excludes the Pi and emonhub, leaving only the &quot;Custom Node&quot;, the RF route or the&nbsp;RFM2Pi to debug.</p>
<p>Some RFM2Pi firmwares&nbsp;did have a ~20byte&nbsp;packet size cap for a while, how big is your packet?&nbsp;</p>
<p>Is the emonBase located where the NanodeRF was located? Is the&nbsp;&quot;Custom Node&quot; within range ? have you tried moving it closer just to test?</p>
<p>If it is not range/interferance and the packet size is ok&nbsp;then since the other nodes are seen it would suggest something in the &quot;Custom&nbsp;Node&quot; is causing an issue. Can you tell us more about it?</p>
<p>Paul</p>
<p>​</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32445"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/2872" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Marquis27&#039;s picture" title="Marquis27&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub not receiving a certain node</h3>

    <div class="submitted">Submitted by <a href="/emon/user/2872" title="View user profile.">Marquis27</a> on Tue, 21/07/2015 - 18:52.</div>
    <div class="content">
     <p>Thanks for the assistance.&nbsp;I don&#39;t think I&#39;m hitting any limits.&nbsp;</p>
<p>This is my data structure. I think this is 9 x 2 = 18 bytes. &nbsp;That should be within the size limits. Perhaps I have an old version of the RFM2Pi firmware.. Maybe that is a place to start? If I&#39;m using a v1 can it take an updated firmware?&nbsp;</p>
<p>typedef struct {<br />
&nbsp; int systemVolts; // Processor Voltage<br />
&nbsp; int battery; &nbsp; // Battery Volts<br />
&nbsp; int volts; // Volts to the Charger (From Panel)<br />
&nbsp; int current; // mA x 10 (Panel Current)<br />
&nbsp; unsigned int lux;<br />
&nbsp; unsigned int ir;<br />
&nbsp; unsigned int full;<br />
&nbsp; int state;<br />
&nbsp; int temp;<br />
} Payload;</p>
<p>&nbsp;</p>
<p>I&#39;m sure it&#39;s not a range issue. They are sitting about 1 foot apart.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32448"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/4440" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub not receiving a certain node</h3>

    <div class="submitted">Submitted by <a href="/emon/user/4440" title="View user profile.">pb66</a> on Tue, 21/07/2015 - 20:39.</div>
    <div class="content">
     <p>I&#39;m afraid I&#39;m not that clued up with the v1 emonPi, but I would not expect there to be any problem with 18bytes of&nbsp;data.&nbsp;</p>
<p>Although the typedef struct looks fine, I don&#39;t think that would pprobally&nbsp;stop the packet being received by the&nbsp;&nbsp;rfm2pi. what hardware is it?, what sketch are you running?</p>
<p>Are you sure the group and frequency are set up correctly on node 21? Do you have another test sketch you can try?</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="/emon/node/11013"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-GN-CAJ-t9p6mohjlDuR1yvrlvU-VXd1mXK6YyEnMcZs" value="form-GN-CAJ-t9p6mohjlDuR1yvrlvU-VXd1mXK6YyEnMcZs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org">https://community.openenergymonitor.org</a></p>
   
</div>

<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
