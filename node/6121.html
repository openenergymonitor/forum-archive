<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/6121 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:32:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Flashing RFM12Pi with Raspberry | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Flashing RFM12Pi with Raspberry</h3>
        <span class="submitted">Submitted by <a href="../user/7118.html" title="View user profile.">pfeilc</a> on Fri, 14/11/2014 - 13:55</span>
        <div class="content"><p>Hi,</p>
<p>I have read on OpenEnergyMonitor Wiki that it is possible to flash RFM12Pi directly on a Raspberry Pi.</p>
<p>I have everthing installed and I folled the instructions on the Wiki page, but it does not work.</p>
<p>Do I need to connect ISP Pins also to the raspberry Pi GPIO or is this not necessary for flashing?</p>
<p>Best regards,</p>
<p>Christian</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5788.html" class="topic-previous" title="Go to previous forum topic">‹ emonTXv3 - Newbie isues</a>
              <a href="10024.html" class="topic-next" title="Go to next forum topic">yhdc SCT-019-000 vs Magnelab SCT-075-000 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-25145"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 15/11/2014 - 13:14.</div>
    <div class="content">
     <p>No you don&#39;t need any additional connections, the rfm2pi is programmed via the serial port. Only if the bootloader is missing or damaged would you need an in-circuit programmer or SPI connection.</p>
<p><a href="5549.html">See this thread for a recent use of the wiki method</a>, 2 things spring to mind, are you stopping the&nbsp;<span style="line-height:20.7999992370605px">(correct software)&nbsp;</span>rfm2pi<span style="line-height:1.6"> being accessed ? and is the power supply stable enough ?</span></p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25152"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7118.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pfeilc&#039;s picture" title="pfeilc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/7118.html" title="View user profile.">pfeilc</a> on Sat, 15/11/2014 - 21:25.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>thank you! When I try to flash RFM12Pi&nbsp;the console outputs the following error message:</p>
<p>&nbsp;</p>
<p><em>root@raspberrypi:/home/pi/RFM2Pi/firmware/Full_RF12demo_atmega328# sudo avrdude -v -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 9600 -U flash:w:Full_RF12demo_atmega328.cpp.hex</em></p>
<p><em>avrdude: Version 5.10, compiled on Jun 18 2012 at 12:38:29<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Copyright (c) 2000-2005 Brian Dean, <a href="http://www.bdmicro.com/" title="http://www.bdmicro.com/">http://www.bdmicro.com/</a><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Copyright (c) 2007-2009 Joerg Wunsch</em></p>
<p><em>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System wide configuration file is &quot;/etc/avrdude.conf&quot;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;User configuration file is &quot;/root/.avrduderc&quot;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;User configuration file does not exist or is not a regular file, skipping</em></p>
<p><em>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Using Port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: /dev/ttyAMA0<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Using Programmer &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: arduino<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Overriding Baud Rate &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 9600<br />
avrdude: stk500_recv(): programmer is not responding</em></p>
<p><em>avrdude done. &nbsp;Thank you.</em></p>
<p><em>root@raspberrypi:/home/pi/RFM2Pi/firmware/Full_RF12demo_atmega328#&nbsp;</em></p>
<p>&nbsp;</p>
<p>What is wrong?</p>
<p>Best regards,<br />
Christian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25153"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7118.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pfeilc&#039;s picture" title="pfeilc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/7118.html" title="View user profile.">pfeilc</a> on Sat, 15/11/2014 - 21:34.</div>
    <div class="content">
     <p>I switched the programmer to gpio because I work from a raspberry pi.<br />
But no luck until now!</p>
<p>&nbsp;</p>
<p>root@raspberrypi:/home/pi/RFM2Pi/firmware/Full_RF12demo_atmega328# sudo avrdude -v -c gpio -p ATMEGA328P -P /dev/ttyAMA0 -b 9600 -U flash:w:Full_RF12demo_atmega328.cpp.hex</p>
<p>avrdude: Version 5.10, compiled on Jun 18 2012 at 12:38:29<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Copyright (c) 2000-2005 Brian Dean, <a href="http://www.bdmicro.com/" title="http://www.bdmicro.com/">http://www.bdmicro.com/</a><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Copyright (c) 2007-2009 Joerg Wunsch</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System wide configuration file is &quot;/etc/avrdude.conf&quot;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;User configuration file is &quot;/root/.avrduderc&quot;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;User configuration file does not exist or is not a regular file, skipping</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Using Port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: /dev/ttyAMA0<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Using Programmer &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: gpio<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Overriding Baud Rate &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 9600<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AVR Part &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: ATMEGA328P<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Chip Erase delay &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 9000 us<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PAGEL &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : PD7<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BS2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : PC2<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RESET disposition &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : dedicated<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RETRY pulse &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : SCK<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;serial program mode &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : yes<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;parallel program mode &nbsp; &nbsp; &nbsp; &nbsp; : yes<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Timeout &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 200<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;StabDelay &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 100<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CmdexeDelay &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 25<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SyncLoops &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 32<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ByteDelay &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PollIndex &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 3<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PollValue &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0x53<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Memory Detail &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Block Poll &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Page &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Polled<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Memory Type Mode Delay Size &nbsp;Indx Paged &nbsp;Size &nbsp; Size #Pages MinW &nbsp;MaxW &nbsp; ReadBack<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eeprom &nbsp; &nbsp; &nbsp; &nbsp;65 &nbsp; &nbsp; 5 &nbsp; &nbsp; 4 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; 1024 &nbsp; &nbsp;4 &nbsp; &nbsp; &nbsp;0 &nbsp;3600 &nbsp;3600 0xff 0xff<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flash &nbsp; &nbsp; &nbsp; &nbsp; 65 &nbsp; &nbsp; 6 &nbsp; 128 &nbsp; &nbsp;0 yes &nbsp; &nbsp; 32768 &nbsp;128 &nbsp; &nbsp;256 &nbsp;4500 &nbsp;4500 0xff 0xff<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lfuse &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp;4500 &nbsp;4500 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hfuse &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp;4500 &nbsp;4500 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;efuse &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp;4500 &nbsp;4500 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp;4500 &nbsp;4500 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;calibration &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;signature &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 0x00 0x00</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Programmer Type : GPIO<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Description &nbsp; &nbsp; : Use sysfs interface to bitbang GPIO lines</p>
<p>avrdude: AVR device not responding<br />
avrdude: initialization failed, rc=-1<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Double check connections and try again, or use -F to override<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;this check.</p>
<p>
avrdude done. &nbsp;Thank you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25154"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 15/11/2014 - 22:28.</div>
    <div class="content">
     <p>It appears you don&#39;t have the needed&nbsp;&quot;avrdude-rpi&quot; part worrking, Any messages from avrdude&nbsp;would be prefixed &quot;avrdude-original&quot; not &quot;avrdude&quot; this shows the original version is being used.</p>
<p>There should also be a message section &quot;using auto-reset ..........&quot; which isn&#39;t there (see previously linked threads message logs)</p>
<p>The &quot;avrdude-rpi&quot; is a mod to provide a DTR (reset) to rfm2pi&nbsp;on gpio4&nbsp;by intercepting the avrdude command&nbsp;and&nbsp;providing the DTR whilst running the original avrdude.</p>
<p>​Selecting &quot;gpio&quot; as a programmer will attempt to bit bang via the Pi&#39;s SPI on the gpio&nbsp;(P1-19,21,23&amp;24) which would require connections to the ISP conn on the rfm2pi,</p>
<p>You need to recheck the wiki guidee, specifically the installing of &quot;rpi-avrdude&quot;.</p>
<p>Just use this line until you get a successful read&nbsp;</p>
<blockquote><p>sudo avrdude -v -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 38400</p>
</blockquote>
<p>this will just attempt to read the fuses and check connectivity without attempting and possibly failing tp program the avr, so it minimizes the chance of any damage. Once you are able to read the avr with no errors returned add the &quot;-U flash:w:/path/filename&quot; back to the command&nbsp;line and it should work ok.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25183"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7118.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pfeilc&#039;s picture" title="pfeilc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/7118.html" title="View user profile.">pfeilc</a> on Mon, 17/11/2014 - 09:36.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>thank you for your answer! Very helpful.</p>
<p>I followed exactly the instructions on the wiki page and installed avrdude-rpi but it did not work. I will try it again and post the error message.</p>
<p>The only thing I noticed, after installing avrdude-rpi and doing all the steps written on the wiki page was, that my arduino ide became very very slow when uploading sketches e.g. to Attiny84 (normaly: 20 seconds, after doing the steps on the wiki page it took &gt; 15 minutes!), my CPU level was 100% and the task manager was full of tasks with &quot;reset&quot;. So I uninstalled everything again, reinstalled arduino ide and now it is working and fast again.</p>
<p>Best regards,</p>
<p>Christian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25184"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 17/11/2014 - 10:18.</div>
    <div class="content">
     <p>﻿I don&#39;t think the fuses do get successfully read since we&#39;re uploading over serial via the GPIO not ISP. Here&#39;s an example of a successful upload:&nbsp;</p>
<p>&nbsp;</p>
<pre>
pi@raspberrypi ~/RFM2Pi/firmware/RF12_Demo_atmega328 $ avrdude -v -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 38400 -U flash:w:Full_RF12demo_atmega328.cpp.hex

avrdude-original: Version 5.11.1, compiled on May 23 2012 at 11:08:25

Copyright (c) 2000-2005 Brian Dean, <a href="http://www.bdmicro.com/" title="http://www.bdmicro.com/">http://www.bdmicro.com/</a>

Copyright (c) 2007-2009 Joerg Wunsch

System wide configuration file is &quot;/etc/avrdude.conf&quot;

User configuration file is &quot;/root/.avrduderc&quot;

User configuration file does not exist or is not a regular file, skipping

Using Port : /dev/ttyAMA0

Using Programmer : arduino

Overriding Baud Rate : 38400

done with autoreset

AVR Part : ATMEGA328P

Chip Erase delay : 9000 us

PAGEL : PD7

BS2 : PC2

RESET disposition : dedicated

RETRY pulse : SCK

serial program mode : yes

parallel program mode : yes

Timeout : 200

StabDelay : 100

CmdexeDelay : 25

SyncLoops : 32

ByteDelay : 0

PollIndex : 3

PollValue : 0x53

Memory Detail :

Block Poll Page Polled

Memory Type Mode Delay Size Indx Paged Size Size #Pages MinW MaxW ReadBack

----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------

eeprom 65 20 4 0 no 1024 4 0 3600 3600 0xff 0xff

flash 65 6 128 0 yes 32768 128 256 4500 4500 0xff 0xff

lfuse 0 0 0 0 no 1 0 0 4500 4500 0x00 0x00

hfuse 0 0 0 0 no 1 0 0 4500 4500 0x00 0x00

efuse 0 0 0 0 no 1 0 0 4500 4500 0x00 0x00

lock 0 0 0 0 no 1 0 0 4500 4500 0x00 0x00

calibration 0 0 0 0 no 1 0 0 0 0 0x00 0x00

signature 0 0 0 0 no 3 0 0 0 0 0x00 0x00

Programmer Type : Arduino

Description : Arduino

Hardware Version: 3

Firmware Version: 4.4

Vtarget : 0.3 V

Varef : 0.3 V

Oscillator : 28.800 kHz

SCK period : 3.3 us

avrdude-original: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.01s

avrdude-original: Device signature = 0x1e950f

avrdude-original: safemode: lfuse reads as 0

avrdude-original: safemode: hfuse reads as 0

avrdude-original: safemode: efuse reads as 0

avrdude-original: NOTE: FLASH memory has been specified, an erase cycle will be performed

To disable this feature, specify the -D option.

avrdude-original: erasing chip

avrdude-original: reading input file &quot;Full_RF12demo_atmega328.cpp.hex&quot;

avrdude-original: input file Full_RF12demo_atmega328.cpp.hex auto detected as raw binary

avrdude-original: writing flash (32768 bytes):

Writing | ################################################# | 100% 11.51savrdude-original:</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25204"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7118.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pfeilc&#039;s picture" title="pfeilc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/7118.html" title="View user profile.">pfeilc</a> on Tue, 18/11/2014 - 08:30.</div>
    <div class="content">
     <p>Hi Glyn,</p>
<p>how can I do an upload using ISP?</p>
<p>Is it possible using raspberry pi? Or do I have to buy an USB/ISP programmer.<br />
On eBay for example there are programmer made in China <a href="http://www.ebay.de/itm/USB-ISP-Programmer-For-ATMEL-AVR-51-ATMega-ATTiny-AT89S51-AT89S52-AT90PWM2-/381054968282" title="http://www.ebay.de/itm/USB-ISP-Programmer-For-ATMEL-AVR-51-ATMega-ATTiny-AT89S51-AT89S52-AT90PWM2-/381054968282">http://www.ebay.de/itm/USB-ISP-Programmer-For-ATMEL-AVR-51-ATMega-ATTiny...</a></p>
<p>But which software can I use? On Mac / Windows PC? Or does the programmer also work on my raspberry pi?</p>
<p>Best regards,<br />
Christian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25212"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 18/11/2014 - 09:33.</div>
    <div class="content">
     <p>It is possible to use Pi as an ISP, aside from the additional gpio connections, you will also need to solder the header pins on to the rfm2pi and further modify arduino IDE&#39;s settings files (board.txt and programmer.txt), it&#39;s not straight forward and only really advantageous if you will be doing frequent bootloader uploads or have several permanently connected avr&#39;s.</p>
<p>I&#39;m also unsure whether this would definitely&nbsp;resolve your issue as the wiki method is proven to work by many users which may also mean the issue carries over to the ISP method.</p>
<p>Glyn&#39;s printout is from a successful&nbsp;&quot;write&quot; using the method from the wiki. My previous suggestion to just &quot;read&quot; still stands, although although as Glyn points out you will not actually see the value of the fuses (see his successful print)&nbsp;it will be quite clear that the &quot;read&quot; was successful as there are no error messages and the &quot;read&quot; progress bar will reach 100% and the fuses will be &quot;read as 0&quot; (as in Glyn&#39;s&nbsp;print).</p>
<p>The wiki method is designed for direct use with avrdude from the command line, I would of expected it to be able work with Arduino IDE but haven&#39;t tried it myself, however&nbsp;I am aware that the IDE tries to address the serial port in linux as /dev/ttyS0 so a redirect will be needed to /dev/ttyAMA0&nbsp;(I&#39;ve seen guides online but not tried any).&nbsp;</p>
<p>With this in mind does the &quot;read&quot; of the rfm2pi work from the command line ?</p>
<p>Once the avrdude-rpi works as intended you could then try to get&nbsp;the IDE to work with it or if that&#39;s not possible, change the symlink arrangement in the wiki guide so that the&nbsp;avrdude-rpi mod is only utilized from the avrdude&nbsp;........&nbsp;&nbsp;command&nbsp;line by using &quot;avrdude-rpi&quot; instead of &quot;avrdude&quot;&nbsp;, leaving the IDE method unmodified.</p>
<p>If you post some details of the results when using the current wiki method we can help get that part working 1st.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25213"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 18/11/2014 - 10:51.</div>
    <div class="content">
     <p>Yes, as Paul explained the method &#39;direct from the Pi&#39; as is on the wiki us just a serial upload just the same as Arduino IDE with a standard Arduino. The RFM12Pi already has the Optiboot bootloder in place so flashing a bootloder via ISP is not required if all you want is to upload some new code. I&#39;ve not done&nbsp;it but using the IDE on the Pi should work. Might need the changes Paul mentions above, or maybe the correct port will be selectable in the IDE..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25214"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7118.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pfeilc&#039;s picture" title="pfeilc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/7118.html" title="View user profile.">pfeilc</a> on Tue, 18/11/2014 - 11:01.</div>
    <div class="content">
     <p>Hi Paul, Hi Glyn,</p>
<p>ok, thank you both for your detailed descriptions.</p>
<p>I will try to re-install avrdude-rpi and try to get a successful read.</p>
<p>Just a simple (newbie) question: How do I change the symlink back to the &quot;normal&quot; avrdude so that the whole installation process has no effect on my Ardiuno IDE?</p>
<p>Best regards,<br />
Christian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25215"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 18/11/2014 - 11:29.</div>
    <div class="content">
     <p>I wouldn&#39;t worry about symlinking just yet</p>
<p>step 1 - get IDE and standard&nbsp;avrdude working - done !</p>
<p>step 2 - get avrdude-rpi&nbsp;working from the command line</p>
<p>step 3 - try IDE with &quot;known to be working&quot;&nbsp;avrdude-rpi, if it breaks IDE try and resolve it</p>
<p>step 4 - if unable to get them to play nicely together,&nbsp;try and&nbsp;get around it with symlinks&nbsp;by either</p>
<p>&nbsp; &nbsp; &nbsp;a) symlink&nbsp;serial port address so IDE can be used with avrdude-rpi&nbsp;&amp;&nbsp;rfm2pi</p>
<p>&nbsp; &nbsp; &nbsp;or</p>
<p>&nbsp; &nbsp; &nbsp;b) change symlinks to initiate &quot;avrdude-rpi&quot; from the command line only</p>
<p>I do not know 100% if either will work, I think they should, but&nbsp;it is unchartered territory.</p>
<p>If you do it in controlled steps and test each one when it doesn&#39;t work you know when the issue got introduced and can go back a step, If you change from the wiki guided steps and do not know if all parts work correctly independently&nbsp;it makes tackling an issue much harder, you need to know the standard &quot;avrdude-rpi&quot; works from the command line before changing anything.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25221"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 18/11/2014 - 13:45.</div>
    <div class="content">
     <p>Just to let you know I have tried this out and can now upload a sketch to an&nbsp;arduino&nbsp;based board&nbsp;(haven&#39;t tried&nbsp;rfm2pi&nbsp;yet) &nbsp;from a Pi&nbsp;using the&nbsp;arduino&nbsp;IDE either via a&nbsp;usb attached programmer or directly via the&nbsp;serial&nbsp;UART&nbsp;using&nbsp;gpio4&nbsp;as a DTR/reset (as per&nbsp;rfm2pi).</p>
<p>I did have to symlink&nbsp;the serial port and also add pi to a couple of groups.</p>
<p>So it is possible to use IDE&nbsp;once you get the &quot;wiki&nbsp;method&quot; sorted.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25330"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 26/11/2014 - 11:33.</div>
    <div class="content">
     <p>Hi&nbsp;Christian</p>
<p>Did you try this again ?</p>
<p>There is another consideration to be made for these to work in harmony, the avrdude-autoreset&nbsp;script should be modified to only kick-in IF the command-line includes a reference to the serial port other wise when using a usb FTDI&nbsp;lead for example the rfm2pi&nbsp;would also get reset, it wouldn&#39;t get programmed as the IDE/avrdude&nbsp;would&nbsp;specify a target but I think currently gpio4&nbsp;would go low regardless of the method used.</p>
<p>I think adding an IF statement around the<a href="https://github.com/pb66/avrdude-rpi/blob/master/avrdude-autoreset#L3"> &quot;strace&quot; in &quot;avrdude-autoreset&quot; </a>to look for the serial ports address would work, <s>it could also incorporate&nbsp;changing the address used by the IDE eliminating the need for an additional symlink.</s></p>
<p>something like</p>
<p>if command line contains &quot; /dev/ttyS0&nbsp;&quot;<br />
&nbsp; &nbsp; <s>&nbsp;replace&nbsp;&quot; /dev/ttyS0&nbsp;&quot; with &quot; /dev/ttyAMA0&nbsp;&quot;<br />
if command line contains &quot; /dev/ttyAMA0&nbsp;&quot;</s><br />
&nbsp; &nbsp; &nbsp;sudo&nbsp;strace&nbsp;etc to run autoreset&nbsp;and send gpio4 low for rfm2pi<br />
else<br />
&nbsp; &nbsp; &nbsp;run&nbsp;avrdude-original without autoreset</p>
<p>If I get a chance I will try to write a modified version to try, but thought I would just document this in case I didn&#39;t get round to it.</p>
<p>Paul</p>
<p>​<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25365"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 26/11/2014 - 11:40.</div>
    <div class="content">
     <p>I have now experienced the extremely long upload times and found it&#39;s due to the &quot;autoreset&quot; code being unnecessarily triggered when not using the serial/gpio4. There is a 5 second timeout and the script is triggered multiple times during one upload.</p>
<p>The change I suggest above may&nbsp;also prevent this happening as the &quot;autoreset&quot; should only run if the serial port is defined as the port (-P) in the command line from the IDE to avrdude.</p>
<p>Having pondered on the thought of using an additional IF function instead of a symlink I now realize that won&#39;t work as the symlink is required so that the IDE can recognize there is an active port to use before the IDE can send the upload command&nbsp;so I have removed that part from my last post.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25377"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 27/11/2014 - 22:06.</div>
    <div class="content">
     <p>So I had a go at putting this together this afternoon, I have forked the <a href="https://github.com/pb66/avrdude-rpi">avrdude-rpi&nbsp;repo</a> and added some changes</p>
<p>1. The installation is simpler, the basic &quot;autoreset&quot; mod can be done by just cutting and pasting 5 lines in one go.</p>
<p>2. The &quot;autoreset&quot; only runs when using the Pi&#39;s gpio serial port so other upload methods can stiil be used.</p>
<p>3. Includes instruction to symlink&nbsp;/dev/ttyAMA0&nbsp;used on the Pi in place of the IDE&#39;s default /dev/ttyS0</p>
<p>4. The &quot;autoreset confirmation message&quot; now informs user which gpio pin is being used for DTR (reset)</p>
<p>5. Instructions on how to add the &quot;RFM2Pi&quot; board details so &quot;RFM2Pi&quot; can be selected in IDE &gt; boards</p>
<p>6. Instructions on how to add&nbsp;the 8MHz&nbsp;optiboot&nbsp;bootloader&nbsp;files</p>
<p>I haven&#39;t tested the bootloader&nbsp;part yet, maybe someone more knowledgeable in this area with a spare rfm2pi kicking around could try it, (mentioning no names,&nbsp;Glyn)&nbsp;:-)</p>
<p>Seems the integration of the &quot;autoreset&quot; and &quot;Normal&quot; Arduino&nbsp;IDE operation works well. no&nbsp;extended delays while uploading and the rfm2pi is no longer&nbsp;reset when using the IDE with a USB/FTDI&nbsp;programmer lead or other programmer.</p>
<p>As well as the RFM2Pi v2&#39;s this can be used to program a emonTx&nbsp;over a direct-serial connection by just adding another link between the Pi&#39;s P1-7&nbsp;(gpio4) and the DTR pin of the 6-pin&nbsp;FTDI&nbsp;header on the Tx.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25698"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Mon, 08/12/2014 - 21:49.</div>
    <div class="content">
     <p>I&#39;ll tag this on here since I&#39;ve got a (sort of?) related issue.</p>
<p>﻿I&#39;ve tried the steps in the wiki but the upload falls over. Any tips on troubleshooting this would be appreciated.</p>
<p>This is on my second Pi and I&#39;ve never tried to use this particular&nbsp;Rfm12Pi board before at all, so I don&#39;t know for sure that it&#39;s a firmware issue as opposed to a bad board etc.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<pre>

<strong>$ sudo avrdude -v -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 38400 -U flash:w:RF12_Demo_atmega328.cpp.hex</strong>

avrdude-original: Version 5.11.1, compiled on May 23 2012 at 11:08:25
                  Copyright (c) 2000-2005 Brian Dean, <a href="http://www.bdmicro.com/" title="http://www.bdmicro.com/">http://www.bdmicro.com/</a>
                  Copyright (c) 2007-2009 Joerg Wunsch

                  System wide configuration file is &quot;/etc/avrdude.conf&quot;
                  User configuration file is &quot;/root/.avrduderc&quot;
                  User configuration file does not exist or is not a regular file, skipping

                  Using Port                    : /dev/ttyAMA0
                  Using Programmer              : arduino
                  Overriding Baud Rate          : 38400
done with autoreset
                  AVR Part                      : ATMEGA328P
                  Chip Erase delay              : 9000 us
                  PAGEL                         : PD7
                  BS2                           : PC2
                  RESET disposition             : dedicated
                  RETRY pulse                   : SCK
                  serial program mode           : yes
                  parallel program mode         : yes
                  Timeout                       : 200
                  StabDelay                     : 100
                  CmdexeDelay                   : 25
                  SyncLoops                     : 32
                  ByteDelay                     : 0
                  PollIndex                     : 3
                  PollValue                     : 0x53
                  Memory Detail                 :

                                           Block Poll               Page                       Polled
                    Memory Type Mode Delay Size  Indx Paged  Size   Size #Pages MinW  MaxW   ReadBack
                    ----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------
                    eeprom        65    20     4    0 no       1024    4      0  3600  3600 0xff 0xff
                    flash         65     6   128    0 yes     32768  128    256  4500  4500 0xff 0xff
                    lfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
                    hfuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
                    efuse          0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
                    lock           0     0     0    0 no          1    0      0  4500  4500 0x00 0x00
                    calibration    0     0     0    0 no          1    0      0     0     0 0x00 0x00
                    signature      0     0     0    0 no          3    0      0     0     0 0x00 0x00

                  Programmer Type : Arduino
                  Description     : Arduino
                  Hardware Version: 3
                  Firmware Version: 4.4
                  Vtarget         : 0.3 V
                  Varef           : 0.3 V
                  Oscillator      : 28.800 kHz
                  SCK period      : 3.3 us

avrdude-original: AVR device initialized and ready to accept instructions

Reading | ################################################## | 100% 0.01s

avrdude-original: Device signature = 0x1e950f
avrdude-original: safemode: lfuse reads as 0
avrdude-original: safemode: hfuse reads as 0
avrdude-original: safemode: efuse reads as 0
avrdude-original: NOTE: FLASH memory has been specified, an erase cycle will be performed
                  To disable this feature, specify the -D option.
avrdude-original: erasing chip
avrdude-original: reading input file &quot;RF12_Demo_atmega328.cpp.hex&quot;
avrdude-original: input file RF12_Demo_atmega328.cpp.hex auto detected as Intel Hex
avrdude-original: writing flash (7530 bytes):

Writing | ########################################           | 79% 2.12s
avrdude-original: stk500_paged_write(): (a) protocol error, expect=0x14, resp=0x78
avrdude-original: stk500_cmd(): programmer is out of sync

</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25699"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Mon, 08/12/2014 - 22:09.</div>
    <div class="content">
     <p>Figured it out... I had reset the Pi at some point while grappling with this and emonhub had kicked off in the background. Oops!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26036"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 21/12/2014 - 21:02.</div>
    <div class="content">
     <p>Just a quick update on the RFM2Pi&nbsp;firmware uploads from a pi.</p>
<p>Using a <a href="https://github.com/pb66/avrdude-rpi">modified version of&nbsp;rpi-avrdude</a> and the Arduino&nbsp;IDE I have now&nbsp;tested this on a RFM2Pi, Editing and uploading sketches in the normal way on a Pi using windows&nbsp;remote desktop from a PC. This negates the need to compile&nbsp;the hex and use avrdude.</p>
<p>I have just uploaded the <a href="https://github.com/openenergymonitor/RFM2Pi/blob/master/firmware/RFM69CW_RF_Demo_ATmega328/RFM69CW_RF12_Demo_ATmega328/RFM69CW_RF12_Demo_ATmega328.ino">latest 38400&nbsp;baud rf69 firmware</a> by copying and pasting the sketch content directly into a blank ino from git, save and upload, a&nbsp;little slow on a Pi maybe but so much more convenient.&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28611"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6931.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jun&#039;s picture" title="jun&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6931.html" title="View user profile.">jun</a> on Thu, 12/03/2015 - 18:47.</div>
    <div class="content">
     <p>Hi there,</p>
<p>I just had the same problem as <a href="6121.html#comment-25152">in the 3rd post here</a>, but using&nbsp;the correct&nbsp;avrdude-rpi from pb66 and openenergymonitor.</p>
<p>I&#39;ve added some code to display exceptions&nbsp;within autoreset&nbsp;(<a href="https://github.com/openenergymonitor/avrdude-rpi/pull/1" title="https://github.com/openenergymonitor/avrdude-rpi/pull/1">https://github.com/openenergymonitor/avrdude-rpi/pull/1</a>), but I still get errors and have submitted an issue upstream:&nbsp;https://github.com/deanmao/avrdude-rpi/issues/3</p>
<p>This might be related to differences with the RPi B+? I&#39;m running.</p>
<p>The latest emonSD-23-02-15.img.zip<br />
Using the local data recording instructions.<br />
A RPi B+ v1.2.<br />
The RFM12Pi v2.6 extension board</p>
<p>I&#39;ve had some problems with autobauding with that setup (and can only connect at 9600 baud).&nbsp;https://github.com/deanmao/avrdude-rpi/issues/3#issuecomment-78561531</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28632"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Flashing RFM12Pi with Raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 13/03/2015 - 18:19.</div>
    <div class="content">
     <p>Hi Jun, The issue in the 3rd post was caused by an error in the symlinking, the wiki guide was a&nbsp;little&nbsp;harder to follow then.&nbsp;If you are using the version from the &#39;pb66&#39;&nbsp;repo&nbsp;(which is slightly different to the OpenEnergyMonitor version)&nbsp;and have used the commands provided by the repo, the symlinks should be correct, as I use it frequently myself.</p>
<p>I&#39;m unsure if you are still having an issue I have read your posts and issues on <a href="https://github.com/openenergymonitor/avrdude-rpi/pull/1">openenergymonitor/avrdude-rpi,</a>&nbsp;&nbsp;<a href="https://github.com/deanmao/avrdude-rpi/issues/3#issuecomment-78561531">deanmao/avrdude-rpi</a>,&nbsp;<a href="https://github.com/opendroplet/opendroplet-avr/issues/1">opendroplet/opendroplet-avr</a>,&nbsp;<a href="https://github.com/opendroplet/droplet-hub-config/issues/3">opendroplet/droplet-hub-config</a>&nbsp;and&nbsp;<a href="https://github.com/emonhub/emonhub/issues/135" style="line-height: 20.7999992370605px;">emonhub&#39;s&nbsp;git repo</a>&nbsp;as well as here and it&#39;s difficult to establish I timeline, so I&#39;m not sure where you&#39;re at.</p>
<p>I am aware of an occasional issue with the auto-baud detection in emonHub&nbsp;and I will expand on that a little more on the emonhub repo as it is of no consequence here as emonHub must be stopped before trying to access the serial port with any other software, more so when you are uploading firmware.</p>
<p>I will help if you if I can and will also post some points in the relative threads where I can. If you are still having an issue please post the symptoms specific to your issue (preferably in one place would help),</p>
<p>An incorrect baud speed will ALSO result in a quite common&nbsp;&quot;<em>stk500_recv(): programmer is not responding</em>&quot; but that wasn&#39;t the issue in the 3rd post the symlinking issue is evident by the &quot;<em>avrdude</em>&quot; rather than the expected&nbsp; &quot;<em>original-avrdude</em>&quot; preceding&nbsp;that error message in those&nbsp;logs.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/6121"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-_FHNVwwgU3S1DUDBuPCyG6pCGm3O_KBEqLZbBbqOX2U" value="form-_FHNVwwgU3S1DUDBuPCyG6pCGm3O_KBEqLZbBbqOX2U"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/6121 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:32:41 GMT -->
</html>
