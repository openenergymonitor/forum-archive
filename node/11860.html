<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11860 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:56:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Calculating and displaying realtime Amperage | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Calculating and displaying realtime Amperage</h3>
        <span class="submitted">Submitted by <a href="../user/9170.html" title="View user profile.">michael334</a> on Wed, 23/12/2015 - 21:55</span>
        <div class="content"><p>Hi</p>
<p>Just started using the Emon Pi and EmonTx system so excuse my ignorance.</p>
<p>We have setup Emon TX with 3CT connected to 3Phase 240v (Australia) so am measuring currently the wattage per phase which is working great.</p>
<p>I would like to display the amperage of each phase so w/240 in our case.</p>
<p>Is this possible using the EmonPi CMS or the Emoncms online to display this as a realtime and historical graph.</p>
<p>Thanks in advance.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12053.html" class="topic-previous" title="Go to previous forum topic">‹ Trouble getting started</a>
              <a href="12011.html" class="topic-next" title="Go to next forum topic">Feeds doesn&#039;t show in dashboard anymore ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-37423"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 23/12/2015 - 22:21.</div>
    <div class="content">
     <p>To divide by 240 you would need to multiply by 0.004166&nbsp;(recurring), alternatively you could use a &quot;divide by input&quot; or &quot;divide by feed&quot; for a more dynamic representation of voltage, (if voltage is being logged) but how accuate that sum will be without&nbsp;considering&nbsp;power factor and rms vs peak-to-peak etc I would like to say.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37425"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9170.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="michael334&#039;s picture" title="michael334&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/9170.html" title="View user profile.">michael334</a> on Wed, 23/12/2015 - 22:27.</div>
    <div class="content">
     <p>Thanks Paul</p>
<p>Only really looking for a close representation in this case. We are measuring VRMS also so could divide by that.</p>
<p>Where is this setup as can see that in the node, add feed I can select x input or / input but where would the calculation take place ?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37436"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 23/12/2015 - 22:58.</div>
    <div class="content">
     <p>If you are able to reprogram your emonTx, the rms current has already been calculated. It only needs adding to the 'payload' that's transmitted to the emonPi.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37442"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 23/12/2015 - 23:21.</div>
    <div class="content">
     <p>the calculation is done each time the input that hosts the processlist&nbsp;is updated, the result of the &quot;/ input&quot; will need to be&nbsp;logged using a &quot;log to feed&quot; process next in the processlist.&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38335"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9306.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Shoka&#039;s picture" title="Shoka&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/9306.html" title="View user profile.">Shoka</a> on Sat, 16/01/2016 - 21:02.</div>
    <div class="content">
     <p>Interested in this as well.</p>
<p>I&#39;d like to get at the measured current rather than try and back calculate from the reported power.</p>
<p>I assume it is a matter of adding rx id&#39;s 12 and 13 for the measured current values, to the frame from the Arduino.</p>
<p>something like this in emonPi_RFM69CW_RF12Demo_DiscreteSampling.ino&nbsp; maybe?</p>
<p>typedef struct {<br />
int power1;<br />
int power2;<br />
int power1_plus_2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
int Vrms;<br />
int temp[MaxOnewire];<br />
unsigned long pulseCount;<br />
int current1;<br />
int current2; &nbsp;<br />
} PayloadTX;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<p>and</p>
<p>&nbsp;</p>
<p>if ((now - last_sample) &gt; TIME_BETWEEN_READINGS)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; single_LED_flash();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // single flash of LED on local CT sample<br />
&nbsp;&nbsp; &nbsp;<br />
&nbsp;&nbsp;&nbsp; if (ACAC)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Read from CT 1<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ct1.calcVI(no_of_half_wavelengths,timeout); emonPi.power1=ct1.realPower;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.current1 = ct1.calcIrms(no_of_samples);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Capture RMS current<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.Vrms=ct1.Vrms*100;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.current1 = ct1.calcIrms(no_of_samples);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Capture RMS current &nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.power1 = emonPi.current1*Vrms;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Calculate Apparent Power 1&nbsp; 1480 is&nbsp; number of samples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.Vrms=Vrms*100;<br />
&nbsp;&nbsp;&nbsp; } &nbsp;</p>
<p>
&nbsp;<br />
&nbsp;&nbsp; if (ACAC)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Read from CT 2<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp; ct2.calcVI(no_of_half_wavelengths,timeout); emonPi.power2=ct2.realPower;<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.current2 = ct2.calcIrms(no_of_samples);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Capture RMS current<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.Vrms=ct2.Vrms*100;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; else<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.current2 = ct2.calcIrms(no_of_samples);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Capture RMS current<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.power2 = emonPi.current2*Vrms;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Calculate Apparent Power 1&nbsp; 1480 is&nbsp; number of samples<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.Vrms=Vrms*100; &nbsp;<br />
&nbsp;&nbsp; }</p>
<p>
&nbsp;&nbsp; emonPi.power1_plus_2=emonPi.power1 + emonPi.power2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Create power 1 plus power 2 variable for US and solar PV installs</p>
<p>&nbsp; //Serial.print(emonPi.pulseCount); Serial.print(&quot; &quot;);delay(5);<br />
&nbsp;&nbsp; // if (debug==1) {Serial.print(emonPi.power2); Serial.print(&quot; &quot;);delay(5);} &nbsp;</p>
<p>&nbsp;</p>
<p>Harry</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38344"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 16/01/2016 - 22:19.</div>
    <div class="content">
     <p>There&#39;s absolutely no need to do<br />
&nbsp; emonPi.current1 = ct1.calcIrms(no_of_samples);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Capture RMS current<br />
The current has just been calculated by calcVI and is available as ct1.Irms. (See emonLib.h) So&nbsp;<br />
&nbsp; emonPi.current1 = ct1.Irms;<br />
is all you need.<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38361"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9306.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Shoka&#039;s picture" title="Shoka&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/9306.html" title="View user profile.">Shoka</a> on Sat, 16/01/2016 - 23:56.</div>
    <div class="content">
     <p>Thanks. I&#39;m very new at this, my shiny new emonPi is approaching an uptime of 30 hours...</p>
<p>I had trouble tracking where emonLib.h lives so the above brutal hack was created without view of the internals of emonLib.&nbsp; Your option is worlds better.</p>
<p>Am I correct that all I need to do to publish additional values is to add them to the struct, and that struct is used for both the rf frame, and the link to the Pi?</p>
<p>I&#39;d rather not break my new toy finding out the hard way..</p>
<p>version 2</p>
<p>typedef struct {<br />
int power1;<br />
int power2;<br />
int power1_plus_2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
int Vrms;<br />
int temp[MaxOnewire];<br />
unsigned long pulseCount;<br />
int current1;<br />
int current2; &nbsp;<br />
} PayloadTX;&nbsp;&nbsp; &nbsp;</p>
<p>if ((now - last_sample) &gt; TIME_BETWEEN_READINGS)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; single_LED_flash();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // single flash of LED on local CT sample<br />
&nbsp;&nbsp; &nbsp;<br />
&nbsp;&nbsp;&nbsp; if (ACAC)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Read from CT 1<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ct1.calcVI(no_of_half_wavelengths,timeout);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.power1=ct1.realPower;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.current1 = ct1.Irms;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Capture RMS current<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.Vrms=ct1.Vrms*100;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.current1 = ct1.calcIrms(no_of_samples);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Capture RMS current &nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.power1 = emonPi.current1*Vrms;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Calculate Apparent Power 1&nbsp; 1480 is&nbsp; number of samples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emonPi.Vrms=Vrms*100;<br />
&nbsp;&nbsp;&nbsp; } &nbsp;</p>
<p>
&nbsp;<br />
&nbsp;&nbsp; if (ACAC)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Read from CT 2<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp; ct2.calcVI(no_of_half_wavelengths,timeout);<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.power2=ct2.realPower;<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.current1 = ct2.Irms;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Capture RMS current<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.Vrms=ct2.Vrms*100;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; else<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.current2 = ct2.calcIrms(no_of_samples);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Capture RMS current<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.power2 = emonPi.current2*Vrms;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Calculate Apparent Power 1&nbsp; 1480 is&nbsp; number of samples<br />
&nbsp;&nbsp;&nbsp;&nbsp; emonPi.Vrms=Vrms*100; &nbsp;<br />
&nbsp;&nbsp; }</p>
<p>
&nbsp;&nbsp; emonPi.power1_plus_2=emonPi.power1 + emonPi.power2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Create power 1 plus power 2 variable for US and solar PV installs</p>
<p>&nbsp;</p>
<p>Harry</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38364"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 17/01/2016 - 01:36.</div>
    <div class="content">
     <p>You need to get the&nbsp;sketch into the Atmel386&nbsp;on the &quot;emonTx&quot; inside the emonPi, and for that you need to compile it and transfer the hex file to the Pi, then send it across the serial link to the emon&nbsp;bit. The&nbsp;details of that are in the Hardware Wiki, &quot;RFM69Pi V3&quot; &gt;&nbsp;&quot;Upgrading RFM69Pi Firmware Direct from the Pi&quot;<span style="line-height: 1.6;">.&nbsp;</span></p>
<p>Then you need to use the config editor (or&nbsp;edit emonhub.conf) to make it aware of the additions, else it rejects the complete packet. See&nbsp;http://openenergymonitor.org/emon/modules/emonpi#emonhubconfig&nbsp;</p>
<p>TYPO ALERT! I spy a Copy &amp; Paste error with&nbsp;&quot;emonPi.current1&quot; on channel 2.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38408"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9306.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Shoka&#039;s picture" title="Shoka&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/9306.html" title="View user profile.">Shoka</a> on Sun, 17/01/2016 - 22:29.</div>
    <div class="content">
     <p>ok fixed the typo, installed a shiny new version of arduino on my laptop, got a lot of libraries and have built a new binary. Exported the binary.</p>
<p>I&#39;ve explained my antics to emonhub and its happily reporting two new variables, hopefully scaled and with the right units.</p>
<p>However I have some questions before I try and load that firmware...</p>
<p>I have two versions of the binary, one with built in bootloader, one without.</p>
<p>I&#39;m not clear from the hardware wiki which of the two I need, and if&nbsp; need the version with the bootloader, if the standard bootloader added by the arduino IDE is sufficient or if I need to set up for the optiboot loader mentioned in the hardware&nbsp; wiki (or if that is any different from the standard).</p>
<p>On previous run ins with arduino programming, the bootloader is a preloaded fixture, and the new image is loaded above the existing bootloader, preserving it. I see nothing about that offset in the files I&#39;ve amended, so I&#39;m nervous...</p>
<p>I have minicom installed, and avrdude installed, and the serial console disabled, all of which have been set up already in the standard Pi image I&#39;m running.</p>
<p>Help please...</p>
<p>Harry</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38409"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9306.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Shoka&#039;s picture" title="Shoka&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/9306.html" title="View user profile.">Shoka</a> on Sun, 17/01/2016 - 22:32.</div>
    <div class="content">
     <p>Whoops, forgot to add that my firmware is targeted at Arduino/Genuino Uno, again confirmation that that is a suitable target would be much appreciated.</p>
<p>Harry</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38412"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 17/01/2016 - 23:03.</div>
    <div class="content">
     <p>The target should indeed be Arduino uno. The file without the bootloader&nbsp;is the file to upload via the serial port. the bootloader enables code to be installed via the serial port and cannot be installed itself by that method. it would need uploading with&nbsp;an&nbsp;in-circuit&nbsp;programmer via the SPI bus.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38511"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9306.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Shoka&#039;s picture" title="Shoka&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/9306.html" title="View user profile.">Shoka</a> on Tue, 19/01/2016 - 20:26.</div>
    <div class="content">
     <p>Built and installed the new firmware, it sort of worked, I got some reasonable values transferred, but EmonCMS was complaining at the packet format, so I&#39;ve backed out to the official firmware at the moment.</p>
<p>I patched the current values into the end of the message frame , but some of the errors suggest to me that there is a maximum packet size that the frame can be.</p>
<p>It looks rather suspiciously like the Jeenode frame that both the serial interface and the wireless use is a fixed number of bytes long, and the frame has been packed with as many thermometer values as will fit. If someone can confirm that it will save much scrabbling in the Jeenode code.</p>
<p>I was trying not to intrude on the original set up, but that may have been a mistake.</p>
<p>While I&#39;m asking around, is the power factor that is measured as part of calculating the real power values access able in the Arduino?</p>
<p>Harry</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38512"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 19/01/2016 - 21:21.</div>
    <div class="content">
     <p>The maximum payload is supposed to be 66 bytes, however...</p>
<p>I&#39;ve had problems with over 60 bytes (it&#39;s&nbsp;acknowledged that there&#39;s a bug there), and<br />
There are believed to be&nbsp;synchronisation problems if there is a long string of zero in the payload. If you&#39;re not using all the temperature sensors, you can cut them down or take them out completely, but in any case you need to change the emonhub configuration to suit the payload that you decide upon.</p>
<p>You can extract power factor and add it to your payload (if there&#39;s room!)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38528"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9306.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Shoka&#039;s picture" title="Shoka&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/9306.html" title="View user profile.">Shoka</a> on Tue, 19/01/2016 - 23:56.</div>
    <div class="content">
     <p>Thanks again Robert, I&#39;ll do that. Since my temperature monitoring comes in by a different route, I should have plenty of space for the values I want.</p>
<p>I notice the continuous reading code, which looks like the future, I&#39;m using the standard code as a base presently.</p>
<p>How flaky is that code yet, is there value in my investigating that, or am I adding significantly to my problems?</p>
<p>I&#39;m not depending critically on the emonPi yet, would additional testing of the new code be of value?</p>
<p>Harry</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38531"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 20/01/2016 - 01:44.</div>
    <div class="content">
     <p>There might be the odd bug in the continuous code, but it&#39;s been derived from Robin&#39;s Mk2 Diverter and that&#39;s&nbsp;well proven. So any problems are likely to have been introduced in the translation (like one I reported&nbsp;a couple of days ago) and easily corrected. (<a href="11722.html#comment-38405" title="http://openenergymonitor.org/emon/node/11722#comment-38405">http://openenergymonitor.org/emon/node/11722#comment-38405</a>)</p>
<p>If you have a load that&#39;s rapidly switched, like an induction hob, or an energy diverter, then the &#39;discrete&#39; code isn&#39;t for you. Otherwise, there won&#39;t be much difference, as the short-term errors arising from the discrete (200 ms out of every 10 s) samples will average out over time.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38533"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 20/01/2016 - 02:16.</div>
    <div class="content">
     <p>I think&nbsp;PBudmark should get at least some of the credit for finding that bug, shouldn&#39;t he? &nbsp;He may not have nailed it completely, but presumably it would still be there, but for his research.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38542"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 20/01/2016 - 11:20.</div>
    <div class="content">
     <p>Indeed. He spotted the original problem, and how that got past initial testing I don&#39;t know. All I did was check and report it. [Edit: Trystan&nbsp;has corrected it.]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38605"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9306.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Shoka&#039;s picture" title="Shoka&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating and displaying realtime Amperage</h3>

    <div class="submitted">Submitted by <a href="../user/9306.html" title="View user profile.">Shoka</a> on Thu, 21/01/2016 - 22:51.</div>
    <div class="content">
     <p>My version of the Arduino code works for me as for as I&#39;ve been able to test it.</p>
<p>The current draw goes from a base of 2 Amps, between 550 and 600 watts up to about 11 amps when I switch on a kettle, when it cools down I&#39;ll look at the rating plate, but I&#39;m betting it&#39;s a 2.5 Kilowatt device.</p>
<p>There was nothing wrong with my Arduino code, I&#39;d messed up the Emonhub.conf, and that led to the errors that frightened me off on my first attempt to deploy that code. The bitching about the packet format was at the EmonHub end not a chewed up packet coming from the Arduino.</p>
<p>Thanks for the sterling assistance.</p>
<p>Harry</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11860"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-uTOjHZO87Gpn0z7CoSqlbSP2Ek5tXreDMpdfNedBHk4" value="form-uTOjHZO87Gpn0z7CoSqlbSP2Ek5tXreDMpdfNedBHk4"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
