<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/716 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:51:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>3G Bandwidth  | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">3G Bandwidth </h3>
        <span class="submitted">Submitted by Guest on Tue, 05/06/2012 - 12:19</span>
        <div class="content"><p>I connected&nbsp;emonbase to mobile broadband&nbsp;router&nbsp;and measured uplink&nbsp;data&nbsp;for one day&nbsp;@&nbsp;nearly&nbsp;70MB.&nbsp;Configuration was one emontx with&nbsp;3 CT and 1&nbsp;Pulse&nbsp;sensors connected to emonbase and&nbsp;ethernet into&nbsp;mobile broadband router.</p>
<p>Can this uplink&nbsp;data throughput&nbsp;be reduced in order to reduce&nbsp;costs?</p>
<p>Thanks</p>
<p>Peter</p>
  <div class="forum-topic-navigation clear-block">
          <a href="734.html" class="topic-previous" title="Go to previous forum topic">‹ calibration of ICAL and VCAL</a>
              <a href="723.html" class="topic-next" title="Go to next forum topic">Nanode not responding ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-4708"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 06/06/2012 - 14:41.</div>
    <div class="content">
     <p>Can you clarify? You have posted the emonTx sketch, but you are saying that you have connected the emonBase to the 3G modem/router.</p>
<p>The general answer to your question is yes. You can reduce the data that is sent either by reducing the message length or the frequency, or both. You need to decide what data you need to send and how often it needs updating, then modify (or rewrite) the sketch in the emonBase. For example, instead of simply relaying the data from the emonTx immediately it is received, you could over (say) a 5 minute window accumulate the real and apparent powers and pulse count, record min and max and calculate average voltage and currents, then at the end of the window transmit that over the 3G link. There are innumerable variations on that theme that you could try (e.g. send after 5 minutes or when there is a large change, whichever is the sooner). It all depends on what you are doing and what information you want at the other end.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4709"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by PeterN (not verified) on Wed, 06/06/2012 - 21:55.</div>
    <div class="content">
     <p>Thanks Robert. Not quite as simple as described above I&#39;m using emonbase connected to ethernet bridge wifi and 3G router with a free 3G dongle. My Mobile phone package includes 1GB data a month so I been using my SIM for testing. Once I overcome the data bandwidth issue I plan to build 3G solution based on <a href="https://openwrt.org/">openwrt</a>.</p>
<p>Your suggestion sounds good, it will not only reduce bandwidth but also reduce the frequency of data transfer.&nbsp; I&#39;m new to programming so it may take me a few days, I&#39;ll keep you posted.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4710"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 06/06/2012 - 23:13.</div>
    <div class="content">
     <p>OK, here&#39;s (roughly) how I&#39;d approach it. I&#39;m looking at the sketch NanodeRF_Power_RTCrelay_GLCDtemp.ino</p>
<p>At the top you&#39;ll need to declare new variables for the quantities you want to accumulate (the same types as the individual values, or maybe larger versions - long instead of int - if there&#39;s a danger they will overflow) plus a time that the window will close (type: unsigned long).</p>
<p>In <strong>setup()</strong> you need to set those to zero. You also need to get the current time and decide when to close the window <strong>window_endtime = millis() + 300000;</strong>&nbsp; or similar (5 minutes in milliseconds) - look at the Arduino language reference documentation for what millis() is and does.</p>
<p>In <strong>loop()</strong> after you have received the numbers by radio&nbsp;<strong> if (rf12_recvDone()){</strong> and they are from the right place <strong>if (node_id == 10)</strong> then you can accumulate the powers, like <strong>accum_power1 += emontx.power1;</strong> (I&#39;d put this after the str.print() statements, which you no longer need, so these can be commented out).</p>
<p>When you have all those, you need to see if it&#39;s time to send them and close the window. Do this where the data is sent to the Ethernet. Check whether it is time to do it, if so do it.</p>
<blockquote><p><strong>if (millis() &gt; window_endtime) {<br />
		&nbsp;&nbsp; str.print(&quot;{rf_fail:0&quot;);<br />
		&nbsp;&nbsp; str.print(&quot;Power1:&quot;);<br />
		&nbsp;&nbsp; str.print(accum_power1);</strong></p>
</blockquote>
<p>etc and finish with</p>
<blockquote><p>&nbsp;&nbsp; <strong>str.print(&quot;}\0&quot;);&nbsp; //&nbsp; End of json string</strong></p>
</blockquote>
<p>then you need to set</p>
<blockquote><p><strong>&nbsp;&nbsp; window_endtime = millis() + 300000;&nbsp; </strong></p>
</blockquote>
<p>again and zero all the accumulators before closing the &quot;if&quot;</p>
<blockquote><p><strong>}</strong></p>
</blockquote>
<p>&nbsp;</p>
<p>You might want to send similar stuff (or more) to the serial port ( Serial.print( ..... ) ) to enable you to debug without costing bandwidth. You might also want or need to send the actual window length if you do more calculations at the receiving end.</p>
<p>The big disclaimer: I HAVE NOT TRIED THIS. I DON&#39;T GUARANTEE IT EVEN <em>MIGHT</em> WORK. It is how I would start. I hope it gives you a bit of a steer.</p>
<p>One problem I&#39;d need to check up on - what happens when millis() rolls over and starts again from zero. I think how I&#39;ve done it should work, but you&#39;ll have to run it for 7 weeks to find out!</p>
<p>[Edit]&nbsp; No, it won&#39;t work properly within one window of millis() rolling over, because window_endtime will have rolled over and will be just greater than zero while the value returned by millis() will be 2^32 less a bit!&nbsp; So it will send data continuously until millis() does roll over. It needs some extra logic to detect window_endtime rolling over and inhibit the transmission until millis() has done so too.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4717"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by PeterN (not verified) on Thu, 07/06/2012 - 16:00.</div>
    <div class="content">
     <p>Thanks a mil. I adapted the lastest version of NanodeRF_Power_RTCrelay_GLCDtemp sketch based on your comments above. I was unable to get <strong>millis() </strong>working so used&nbsp; &quot;for(int i = 0; i &lt; 10 ; i++) // to count 10 readings&quot;&nbsp; e.g. 10 RF readings and then I averaged. It seems to be working ok as I checked by changing the number of samples and looking for corresponding decrease in average ( and then set back to correct value) . I was getting some negative values -changed to <strong>unsigned long</strong> rectified this.</p>
<p>However the average value is still updating every twenty seconds. Attached is modified sketch. Any other ideas or have I taken wrong approach. Please excuse my programming.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4720"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 07/06/2012 - 23:07.</div>
    <div class="content">
     <p>I think from what I can see, you are struggling with the basic concept behind the Arduino software. When you first get your Arduino processor (or maybe this has been done for you before you get it), you load a program called a &#39;bootloader&#39;. In effect this is the Windows/Linux/OSX/Android of the Arduino. As far as you are concerned, it does two things. It calls a function called setup( ), then it repeatedly calls a function called loop( ). (It does other things, but those don&#39;t concern you here).</p>
<p>What you have to do is work within that framework.</p>
<p>What I was trying to do with millis() (and unfortunately, you haven&#39;t left your attempt to use it in so I can&#39;t see why it didn&#39;t work for you), was to remember a time when it started, then accumulate values for a length of time after that, then the first time round the loop after the time was up, do something with those accumulated values. But you have to do this within the constraints of the main loop. What you actually did with the for (..;..;..) loop that you inserted was to short-circuit this. In fact, because you did not let the main loop run, you added up the same emontx.power1 etc 10 times.</p>
<p>Here is <u>a very stripped-down version</u> of what you want. You need to merge this with the original:</p>
<blockquote><p>#define WINDOW 180000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 3 minutes x 60 seconds x 1000<br />
		unsigned long window_endtime;<br />
		unsigned long accum_pulse;<br />
		long accum_power1;<br />
		unsigned int num_readings;</p>
<p>		void setup () {<br />
		&nbsp;&nbsp; accum_pulse = 0;<br />
		&nbsp;&nbsp; accum_power1 = 0;<br />
		&nbsp;&nbsp; num_readings = 0;<br />
		&nbsp;&nbsp; window_endtime = millis() + WINDOW;<br />
		}<br />
		void loop() {<br />
		&nbsp; if (rf12_recvDone()){&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (rf12_crc == 0 &amp;&amp; (rf12_hdr &amp; RF12_HDR_CTL) == 0)<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int node_id = (rf12_hdr &amp; 0x1F);<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (node_id == 10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // EMONTX<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emontx = *(PayloadTX*) rf12_data;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // get emontx data<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // accumulate readings each time round loop( )<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; accum_pulse += emontx.pulse; // accumulate readings - this is not averaged as total pulse is used.<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; accum_power1 += emontx.power1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // accumulate readings<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; num_readings++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // and count them<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp; // end of &quot;if (nodeid( ... )&quot;<br />
		&nbsp; &nbsp; }&nbsp;&nbsp;&nbsp;&nbsp; // end of &quot;If (rf12_crc ...&quot;<br />
		&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // end of (if rf12_recv ....)<br />
		&nbsp; if (millis() &gt; window_endtime)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // if we are past the end of the window, do this,<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; // whether we are receiving values or not.<br />
		&nbsp; {<br />
		&nbsp;&nbsp;&nbsp; Serial.print(&quot;accumpulse&quot;);Serial.println(accum_pulse);&nbsp;&nbsp;&nbsp;&nbsp; // Send the numbers to wherever<br />
		&nbsp;&nbsp;&nbsp; Serial.print(&quot;averagepower&quot;);Serial.println(accum_power1/num_readings);<br />
		&nbsp;&nbsp;&nbsp; accum_pulse = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // start a new window<br />
		&nbsp;&nbsp;&nbsp; accum_power1 = 0;<br />
		&nbsp;&nbsp;&nbsp; num_readings = 0;<br />
		&nbsp;&nbsp;&nbsp; window_endtime = millis() + WINDOW;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp; }&nbsp; // end of &quot;if (millis()... ) &quot;<br />
		}&nbsp;&nbsp; // end of &quot;loop()&quot;</p>
<p>		&nbsp;</p>
</blockquote>
<p>Give me a day or two and I&#39;ll try to rewrite your sketch <u>and test it</u> (so you need to subscribe to this thread or keep watching).</p>
<p>In the meantime, check out millis() and see where you went wrong. If you really want to count readings instead of time, then instead of&nbsp;&nbsp;&nbsp; if (millis() &gt; window_endtime)&nbsp;&nbsp; you need&nbsp;&nbsp; if (num_readings &gt; 10 )&nbsp; or whatever number you wish.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4721"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by PeterN (not verified) on Fri, 08/06/2012 - 07:33.</div>
    <div class="content">
     <p>Thanks again for detailed explanation, I&#39;ll work on this over weekend, your time and effort is much appreciated.</p>
<p>Just to confirm I&#39;m using latest Arduino IDE 1.01 for windows, uploading via FTDI, programmer set to AVRISP MK11 and board set to UNO. I tend to use standard sketchs and modify them then compile/verify and upload using IDE. The libraries seem straight forward and are always included in <em>sketch read</em> <em>TXT, </em>anyway this is always verified before upload.</p>
<p>Note I&#39;m assuming I don&#39;t need to do anything with bootloader as I not using USB??? is this correct?</p>
<p>This project and your very well written explanation should help me along the path to better understanding&nbsp; code.</p>
<p>Cheers</p>
<p>Peter</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4722"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 08/06/2012 - 13:24.</div>
    <div class="content">
     <blockquote><p>&quot;Note I&#39;m assuming I don&#39;t need to do anything with bootloader as I not using USB??? is this correct?&quot;</p>
</blockquote>
<p>I wouldn&#39;t want to mess with the bootloader!&nbsp;</p>
<p>No, stay clear. I&#39;m using USB as a serial port to FTDI to program and read the serial data, and I&#39;ve not touched the bootloader. You have to <u>really</u> know what you&#39;re doing in there.</p>
<p>(I&#39;ve just installed 1.0.1 - having not had chance to install it! - and I was just about to load a test sketch into the emonTx so that I&#39;d have something to work with. Then I&#39;ll edit your sketch and get it going.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4736"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 08/06/2012 - 23:30.</div>
    <div class="content">
     <p>Try this. I have not been able to test it fully because I didn&#39;t have access to your server, however it does seem to be doing roughly what you want.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4779"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by PeterN (not verified) on Tue, 12/06/2012 - 05:16.</div>
    <div class="content">
     <p>Great work thanks a mil. Tried above and worked first time. I did notice some very high number when rf fails. I will test further tonight and post results.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4784"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 12/06/2012 - 13:00.</div>
    <div class="content">
     <p>I&#39;m not sure I bothered too much about the failure mode! My main aim was to point you in the right direction. (You do <u>understand</u> now how&nbsp; loop( ) works and how you need to pick out when to do timed things?). Obviously if the rf fails, you need to recognise that and do something sensible rather than just ignore it. What you do depends on what you want - e.g do you assume zero, or power remains constant, or just freeze the average? Your choice.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4786"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by PeterN (not verified) on Tue, 12/06/2012 - 15:27.</div>
    <div class="content">
     <p>Yes thanks. You have definitely&nbsp;helped me understand code a lot better.&nbsp;Cheers</p>
<p>Peter</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4787"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Bandwidth </h3>

    <div class="submitted">Submitted by PeterN (not verified) on Tue, 12/06/2012 - 15:28.</div>
    <div class="content">
     <p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/716"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-YeYe_u8nAbhYrTUW8MZ3DXsg8eo5Lo3fqoc0t9GY56Q" value="form-YeYe_u8nAbhYrTUW8MZ3DXsg8eo5Lo3fqoc0t9GY56Q"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
