<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2373 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:29:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Checking status of mains feed to boiler | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Checking status of mains feed to boiler</h3>
        <span class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Sun, 12/05/2013 - 19:39</span>
        <div class="content"><p>Hi</p>
<p>I have an old back boiler that apparently uses a mains feed to turn on the boiler and a second feed for the pumps, so I can get Hot water (DHW) or Central Heating (CH).</p>
<p>What I am wanting to do is put a sensor of some type onto these feeds and use them to sense when the boiler is turned on and then secondly when the pump for the Central heating is turned on.</p>
<p>	From my understanding of the typical wiring it is very low current, so a CT sensor would not do the job, so what would?</p>
<p>	The sensing is of Mains potential so I do not want to use potential dividers or full / part wave rectification to feed into a digital input on the AVR.</p>
<p>I have thought one of the Hall effect sensors would potentially do this, but would this be the best way of doing it.</p>
<p>	I guess I could use a relay, but this would require further circuitry, and I want to keep as noninvasive as possible.</p>
<p>	Any help / pointers would be welcomed.</p>
<p>Jimmy</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2463.html" class="topic-previous" title="Go to previous forum topic">‹ raspberrypi can ping but no ssh or http</a>
              <a href="1063.html" class="topic-next" title="Go to next forum topic">emonBase not connecting to emonCMS ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-12082"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 12/05/2013 - 20:24.</div>
    <div class="content">
     <p>If you&#39;re happy with designing low voltage analogue circuitry, and all you want is indication that a voltage is present (i.e. you can get at a live wire downstream of any switches), you could try a capacitive voltage pick-up. The basic idea is to wrap foil around a few inches of live wire, and sense the resulting small (microamps) current with an op-amp and rectifier, giving you a digital input to use as you wish.</p>
<p>I proposed a closely related idea as an alternative to the a.c. adapter some while ago - the circuit you&#39;d need would be quite similar to <a href="../sites/default/files/Capacitive%20p.t.%20bootstrapped.png">this</a>. It was designed for a linear 1.1 V p-p output, you&#39;d need a higher output (reduce the 12 nF capacitor) and to rectify and smooth it ready for the digital input.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12117"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Tue, 14/05/2013 - 10:00.</div>
    <div class="content">
     <p>Many thanks for this.</p>
<p>If I read the diagram correctly, the non-inverting input goes to the foil,  but do I need to use the caps? If so I am confused as in the diagram you have provided, it looks like the mains is connected to the op-amp.</p>
<p>I know you said it would be simular to the diagram you provided, but this one gets me confused.</p>
<p>As for the output of this a presume its going to be a 1.1 p-p sine wave, so I will amplyfy this up and then feed through a simple half wave rectifier circuit.</p>
<p>This sounds plausible to me, but this side of electronics is a long time ago.</p>
<p>Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12120"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 14/05/2013 - 12:26.</div>
    <div class="content">
     <p>OK, if you&#39;re happy with the idea I&#39;ll develop it a bit further for you. The upper 15 pF capacitor <strong>IS</strong> the home-made one made from foil and the cable! The cable is one &#39;plate&#39;, the insulation the dielectric, and the foil the second &#39;plate&#39;.</p>
<p>Are you running your processor at 3.3 or 5 V?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12121"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Tue, 14/05/2013 - 13:03.</div>
    <div class="content">
     <p>So in simpleton terms the non inverting input goes to the foil?</p>
<p>Its going to running from 3.3v as a jeenode, but I do have 5v available. From the supply I will be using.</p>
<p>Many thanks fir the help so far.</p>
<p>Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12123"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Tue, 14/05/2013 - 14:46.</div>
    <div class="content">
     <p>I have cobbled together some &quot;blocks&quot; from my old A-level notes.</p>
<p>	Component values I am not sure of, as these are just pulled from a few notes, but this I can work on and simulate if need be.</p>
<p>Does this make sense?</p>
<p>Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12138"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 14/05/2013 - 21:38.</div>
    <div class="content">
     <p>You don&#39;t need anything that complicated. Here&#39;s my version. The original circuit I referred to was designed to give an accurate representation of the mains waveform for measurement purposes, therefore both the shape and amplitude had to be accurate and the phase shift minimal. Those concerns don&#39;t apply here, so we can have a much simpler arrangement. But the basic idea is still there: a capacitor formed by wrapping some foil around the mains line conductor - properly insulated from it of course - feeds into an op.amp whose sole purpose is to provide buffering for the rectifier.</p>
<p>The output should respond within 1 cycle of voltage being applied, and should go off within 2&frac12; cycles (50 ms) of the voltage disappearing. The op.amp is unfortunately only available as surface mount, but it is a dual package, so you can have the two channels that you require using the one package. You will need to keep the wire from the foil to the input fairly short, but you could easily supply power and take the outputs back to your processor using a reasonable length of 4-core telephone or alarm type cable. The two detectors can share R2 &amp; R4. The input voltage to the op.amp is limited by the internal protection diodes, but as the current is only about 1 &micro;A, that should not be a problem. The 330 k&Omega; resistor is there to limit the current (hopefully to a non-lethal value) if the foil should contact the live conductor. The processor ground should be solidly earthed, and although in normal circumstances there is no danger, you should still treat this circuit and anything connected to it with a degree of respect.</p>
<p>If you want to simulate it and tweak, you can get a model of the LMV358 from the TI website. The simulation is the free PSpice from Linear Technologies.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12173"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Thu, 16/05/2013 - 16:30.</div>
    <div class="content">
     <p>First off, let me say thanks for this.</p>
<p>	I have order a sample of the Opamp (well a few of them to give me chance to blow them up / or use them further around the house / solder badly.</p>
<p>	The only bit that is getting me now is the earthing:</p>
<p>	<strong>&quot;The processor ground should be solidly earthed, and although in normal circumstances there is no danger, you should still treat this circuit and anything connected to it with a degree of respect.&quot;</strong></p>
<p>By this are you meaning tie the negative supply of the power supply to the earth bonding point on the boiler?</p>
<p>	This seems a little unorthodox to me.</p>
<p>	After pondering for a little while and googling &quot;mains sensing&quot;, I found the link below:</p>
<p>	<a href="http://www.brighthubengineering.com/diy-electronics-devices/71915-make-a-simple-non-contact-ac-mains-voltage-detector/" title="http://www.brighthubengineering.com/diy-electronics-devices/71915-make-a-simple-non-contact-ac-mains-voltage-detector/">http://www.brighthubengineering.com/diy-electronics-devices/71915-make-a...</a></p>
<p>This mentions battery use and tells only to never touch the &quot;antenna&quot; for the risk of a false positive.</p>
<p>	Think I should order components for both and give both a whirl as if I can get it for a through hole I would prefer this, but I have done SSOP / TSSOP soldering before, but I try to avoid it when possible. - Just getting used to RFM12B.</p>
<p>Many thanks so far and further any feedback would be appreciated.</p>
<p>	Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12179"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 16/05/2013 - 21:24.</div>
    <div class="content">
     <p>I can&#39;t quite see how that other article is relevant. It is going to rely on the capacitance of the body that&#39;s holding the unit to ensure that there is some current in the &quot;antenna&quot;, so unless you want to sit in the cupboard holding it...</p>
<p>I don&#39;t understand what your concern is with earthing your processor, can you elaborate?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12182"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Fri, 17/05/2013 - 08:54.</div>
    <div class="content">
     <p>From my primitive training of mains circuitry (keep as far away from as possible) in my infantry, I was always taught to respect mains and leave it well alone. However now I am an adult (big kid) I still try to live by this rule wherever practical.</p>
<p>The same trainer that gave me this life saving advice also taught me the basics of electronics at an early age and encouraged my enthusiasm. In my early teens he taught me the basics of repairing VCRs, Satellite boxes, but would not let me touch a CRT at all due to the large voltage contained within, but the golden bits of information I still cling onto is as follows:</p>
<p>	Discharge the caps before working, there is potential for them to contain lethal amounts of charge.<br />
	If the casing is metal , always make sure there is continuity between Earth pin and the casing, unless there is a double insulated symbol on it.</p>
<p>	A few years ago we had a spectacular fault in a washing machine that sent live to neutral which resulted in a large flash, bang, and a length of burnt cable behind the machine to the fused spur.</p>
<p>	After getting out the friendly electrician to check the full circuit he explained the RCD which apparently had to be changed as it was faulty, and detects a current on the earth line and trips, this is why I am confused with the notion, There would be a potential difference between the Earth line and the positive so there would be current flow on the line surely?</p>
<p>	If not this is fine, when it comes to mains AC theory, there is more than meets the eye and my &quot;survival training&quot; is a good basic, but is not the be all and end all.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12187"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 17/05/2013 - 12:40.</div>
    <div class="content">
     <p>Most of what you say is correct. (But the RCD doesn&#39;t detect current in the earth cable, it <strong><em>infers</em></strong> that current is flowing to earth because it detects the imbalance between line and neutral currents. So in your case the RCD would not detect the line-neutral fault, but it may well have been damaged as a consequence of the fault current passing through it.)</p>
<p>It&#39;s a matter of the magnitude of the earth current. The usual RCD is guaranteed to trip in under 30 ms with 30 mA of current (more and less sensitive versions can be found), the current required to operate your detector will be, as I wrote above (you obviously missed it!) about 1 &micro;A.&nbsp; I&#39;d guess that&#39;s well less than one thousandth of the current the most sensitive RCD could ever detect.</p>
<p>The purpose of earthing the processor ground is so that you DO get an earth fault if anything goes seriously wrong on the input side! An earth fault through a piece of wire is much preferred to one through you - that&#39;s what<em> &quot;always make sure there is continuity between Earth pin and the casing&quot;</em> means.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12194"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Fri, 17/05/2013 - 16:20.</div>
    <div class="content">
     <p>Perfect, I did miss that.</p>
<p>	Many thanks for all of the above, I will await my samples and the Conversion board for the op amps and will let you know the outcome.</p>
<p>	Do we have a reward / thanks system on here? I would say if you need anything from Maplin, give me a shout and I&#39;ll see what I can do.</p>
<p>	Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12197"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 17/05/2013 - 18:29.</div>
    <div class="content">
     <p><em>&quot;Do we have a reward / thanks system on here?&quot;</em></p>
<p>Generally, people just say &quot;thank you&quot; - but if you support the <a href="http://shop.openenergymonitor.com/" title="">Shop,</a> that will help to maintain this site and keep emoncms.org free.&nbsp; If you&#39;re really keen, I think you need to get in touch with G&amp;T to see if a token donation would be accepted.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12211"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1189.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/1189.html" title="View user profile.">Avontech</a> on Fri, 17/05/2013 - 21:07.</div>
    <div class="content">
     <p>These guys: <a href="http://www.eco-eye.com/products-smartPV.html" title="http://www.eco-eye.com/products-smartPV.html">http://www.eco-eye.com/products-smartPV.html</a> use precisely the same principle of wrapping foil around the cable in their commercial monitoring system to get a &#39;real&#39; power value combined with their CT&#39;s.&nbsp; They get reasonably accurate, so Robert&#39;s proposal to use it in lieu of the AC-AC adaptor is absolutely valid.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12214"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 17/05/2013 - 21:34.</div>
    <div class="content">
     <p><a href="../user/1189.html" title="View user profile.">Avontech</a></p>
<p>The most recent proposal above, &quot;Voltage Detector&quot;,<em><strong> is not suitable</strong></em> as a replacement for the ac adapter - there is no attempt at preserving either phase or amplitude accuracy and the output is rectified anyway - it is <em>purely</em> intended to detect a live wire and feed into a digital input.</p>
<p>The first proposal &quot;Capacitive P.T&quot; does give an accurate representation of the ac signal and is a replacement for the ac adapter. The principle is valid as it is common practice - indeed the only viable way - in H.V. (&gt;70 kV) systems, where the capacitor is usually part of the transformer or switchgear bushing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12218"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Fri, 17/05/2013 - 22:05.</div>
    <div class="content">
     <p>I do use the shop, and will continue to do so as the Emontx and the RFM12Pi I ordered that were out of stock, but still made there way here before they were due in, so customer service and value for money is above all expectations there.</p>
<p>	Thanks for all the help, it has been appreciated, I would not have got a desired result without the help, even if this does not work, its a good pointer in the right direction. Also leant a new software program to play with.</p>
<p>	To all concerned with this, site and the emoncms very well done, it is so nice to get get help when needed and to provide all this open source and free.</p>
<p>Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12231"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1189.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/1189.html" title="View user profile.">Avontech</a> on Sat, 18/05/2013 - 09:29.</div>
    <div class="content">
     <p>Thanks Robert, I now understand the differences!&nbsp; (A little knowledge is a dangerous thing :) )</p>
<p>I need to do something similar here, I&#39;ve currently got both a Pi and an OKG running as as emonbase well as the GLCD and 5 emonTX&#39;s monitoring different energy comsumptions (and three PV generators ) and one of the things I want to do is to monitor the boiler cycling - i.e. how often do the h/w and c/h pumps and boiler go on and off so your help here is much appreciated. - Boiler cycling is one of the key issues to energy efficency - some you want to, so you don&#39;t!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12233"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 18/05/2013 - 10:25.</div>
    <div class="content">
     <p><em>&quot;(A little knowledge is a dangerous thing :) )</em>&quot;</p>
<p>If only that were not true! A while ago, we had on these forums a requirement for using a single supply to both power the emonTx and supply the voltage input. A proposed solution? Obtain a 5 V supply from a transformer and bridge rectifier, and simply connect the emonTx voltage divider across the transformer. The proposer asserted it &quot;works fine&quot; because it gave a steady output on the GLCD, but admitted that he&#39;d needed to include a potentiometer to calibrate it. If you sit down and analyse (and simulate) the circuit, you find &frac14; of the bridge rectifier is shorted out by the de-coupling capacitor on the a.c. input bias, and the a.c. wave is unsurprisingly nothing like the original sine wave. At least two of us tried to tell him, but to no avail. At least two others picked up the idea and had to be advised of the shortcomings - I&#39;ve since used moderator&#39;s privilege to plaster a warning over his posts and diagram so that hopefully that idea will sink into oblivion. I didn&#39;t want you going down a similar route to wonder why the wrong circuit didn&#39;t work &quot;properly&quot;.</p>
<p>You need to understand how the emonTx and its library obtains the numbers for rms voltage and current and average power to know why an accurate representation of both voltage and current waves is important.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12895"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Wed, 12/06/2013 - 10:13.</div>
    <div class="content">
     <p>Sorry to drag this back up, but the samples and the adaptor boards (SOIC to DIP) arrived from China.</p>
<p>Foolishly I jumped straight in and build this on Strip board (Lesson 1 learnt). Unfortunately it did not work out of the box when connected to the live only of the power lead feeding the power brick to the laptop.</p>
<p>I have downloaded Spice IV and I am unable to figure out how to add the .MOD file to the simulation software.</p>
<p>	Tonight, I think A breadboard version of the circuit is to be made to allow the change of the values of the resistors etc where the comparator is.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12901"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 12/06/2013 - 12:32.</div>
    <div class="content">
     <p>The .MOD file needs to go in with the .lib and .sub files in the directory below the executable - in my case .../SwCADIII/lib/sub</p>
<p>There is of course no direct galvanic connection to the line cable - the part marked &quot;Foil capacitor&quot; is aluminium (or copper) foil wrapped around the sheath of the line cable. My first thought is if there isn&#39;t enough voltage to detect, you need to increase the value of that pickup capacitor, i.e. make the foil wrapped around the line cable a bit longer.</p>
<p>Don&#39;t expect to read anywhere near the correct voltage at the op-amp non-inverting input with an ordinary digital multimeter - the presence of the meter will significantly lower the voltage, as will any flux and for that reason you need wash all the flux etc off the board.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12904"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Wed, 12/06/2013 - 13:21.</div>
    <div class="content">
     <p>If you just want an indicator to tell you if the pump and (mains) stat are operating why not use a couple of mains neons? if you want to send the signal elsewhere, then an LDR or photo transistor would give total isolation.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12907"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Wed, 12/06/2013 - 13:34.</div>
    <div class="content">
     <p>&quot;These guys (smart PV)&nbsp;use precisely the same principle of wrapping foil around the cable in their commercial monitoring system to get a &#39;real&#39; power value combined with their CT&#39;s.&nbsp; They get reasonably accurate, so Robert&#39;s proposal to use it in lieu of the AC-AC adaptor is absolutely valid.&quot;</p>
<p>The eco eye foil only gives a phase reference for their device, you have to program in what you think the mains voltage is. I have one of these and can say it&#39;s useful as an indicator no more. It cannot give you real power and is is not even reasonably accurate, showing that I&#39;m importing power when using Robins Mk2 whilst the consumer meter says I&#39;m not. I pointed this out to the manufacturer but never got a satisfactory answer.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12910"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 12/06/2013 - 13:53.</div>
    <div class="content">
     <p>Rich, all that was wanted in this case was a &#39;live&#39; indication. Originally, it had to be totally non-contact, so that ruled out even a neon.</p>
<p>And I&#39;m not surprised you never got a satisfactory answer. Remember Nanny knows best, AKA the Not Invented Here syndrome.</p>
<p>The capacitive voltage &#39;transformer&#39; - not the detector version - when screened and calibrated might even be more accurate, in terms of phase shift and linearity, than a wound transformer. As I&#39;ve pointed out previously, the technique is absolutely standard at high voltages where a resistive dropper is totally impractical, and a transformer prohibitively expensive.</p>
<p>Eco Eye are probably using the foil pickup only for the phase because of the difficulty of instructing Joe Public in how to screen and calibrate it, and my guess is all they get and all they&#39;re interested in after minimal processing is a square wave with zero crossings moderately accurately aligned with the mains voltage.&nbsp; In your case, it seems they might not be. If you&#39;ve a high enough impedance &#39;scope probe ( x 100 ?) then you might be able to check that.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12915"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Wed, 12/06/2013 - 14:25.</div>
    <div class="content">
     <p><em>&quot;And I&#39;m not surprised you never got a satisfactory answer. Remember Nanny knows best, AKA the Not Invented Here syndrome&quot;.</em></p>
<p>Eh? not sure what you are trying to say here Robert, My contact with them was on the lines of the eco eye constantly shows I&#39;m importing energy (when using the Mk2) so&nbsp;it doesn&#39;t &quot;mimic&quot; the action of the meter and was there any way to do so. It seems there are many posts on this site striving for that. I appreciate you get what you pay for and for &pound;80 it&#39;s a useful enough indicator.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12917"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 12/06/2013 - 14:41.</div>
    <div class="content">
     <p>I mean they (Eco Eye) won&#39;t do anything about it because in their eye (ouch!) it&#39;s good enough. And indeed for most purposes it probably is. Here we&#39;re striving for picopence perfection. The average Joe Public probably isn&#39;t concerned to that extent, and that&#39;s where their market is.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13115"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Thu, 20/06/2013 - 22:13.</div>
    <div class="content">
     <p>Once again, many thanks Robert, learnt another lesson today... Check the components before, and after soldering, I mixed up the resistors forming the potential divider prior to going into the non inverting input.</p>
<p>Feel a little silly now, but its all good to learn and admit ones mistakes.</p>
<p>Its all working now and here is the code I have used to test the system, as you can see there is a minimum of 1 second anyway in this, but in testing the LED lights up quicker than I can notice it after putting power to the testing wire.</p>
<address class="rteindent2">
	const int ledPin = 13;<br />
	const int tstPin = 3;<br />
	const int samples = 5;</p>
<p>	int sample;</p>
<p>	void setup() {<br />
	&nbsp; Serial.begin(9600);<br />
	&nbsp; pinMode(ledPin, OUTPUT);<br />
	&nbsp; pinMode(tstPin, INPUT);<br />
	}</p>
<p>	void loop() {<br />
	&nbsp; sample = 0;<br />
	&nbsp; for(int x=0; x&lt;samples; x++){<br />
	&nbsp;&nbsp;&nbsp; sample = sample + digitalRead(tstPin);<br />
	&nbsp; }<br />
	&nbsp;<br />
	&nbsp; //decide if on or off<br />
	&nbsp; int output = sample/samples;<br />
	&nbsp; digitalWrite(ledPin, output);<br />
	&nbsp; Serial.println(output);<br />
	&nbsp;<br />
	&nbsp; delay(1000);<br />
	}</address>
<p></p>
<p>I hope that this will come in useful to anyone else wanting to do the same sort of thing, just got to make the circuit smaller now, and then interface to boiler and pump.</p>
<p>Many thanks</p>
<p>Jimmy</p>
<p></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13116"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 20/06/2013 - 22:30.</div>
    <div class="content">
     <p>Out of interest, what was the problem that made you read the input pin 5 times in succession in order to decide that it was on or off?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13118"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Thu, 20/06/2013 - 23:19.</div>
    <div class="content">
     <p>When done in a loop with no delaysI would sometimes get a digital 0 instead of&nbsp; digital 1 and it seemed to form a pattern of 11110<br />
	11110<br />
	11100<br />
	11110.</p>
<p>This is why I read it 5 times to give a good average and go with that, when I find a suitable place to interface with the wireing for the boiler and pump ( looks like I need to lift floor boards or use the controls in the kitchen) I will play once again.</p>
<p>I would imagine that a larger smoothing cap would also cure the problem, but this as easier (due to not having any spare caps) and as a proof of concept I was happy with the result.</p>
<p>Also as a red herring, I noticed through testing this evening that there does not need to be a load on the wire, so is perfect for other monitoring too. How long does the sticky on electricians tape last?</p>
<p>	I can see this getting tied into lights and all sorts to give various options within the field of home automation. Ooh the mrs will love me wanting to take all the floors up hahaha.</p>
<p>Jimmy</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13120"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Checking status of mains feed to boiler</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 21/06/2013 - 00:34.</div>
    <div class="content">
     <p>I&#39;m not sure what&#39;s going on there - it might be as you say that the dips on each cycle are going low enough to register a zero. The voltage should stay above 2 V (the 0 - 1 transition) so if it&#39;s going back to a zero, it means the voltage has dipped below the 1 - 0 transition at 1 V. That in turn means that something isn&#39;t right - have you cleaned all the flux off around the pickup input R1, R3 and the NI input of the op amp? that&#39;s fairly important with the very high impedances here. You may also need to increase your pickup capacitor - the foil needs extending a bit.</p>
<p>You&#39;re right, there doesn&#39;t need to be a load on the wire because this is picking up voltage, not current.</p>
<p>Tape sticky - it seems to depend on whether you get any traces of grease from your fingers on it when putting it on. Try cable ties instead, or maybe self-amalgamating tape (though I&#39;ve never used any).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2373"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-PJHV2BNlulEY3bYpVn7NQdSJee8nrcHhoMquDOvg6YI" value="form-PJHV2BNlulEY3bYpVn7NQdSJee8nrcHhoMquDOvg6YI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
