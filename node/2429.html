<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2429 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:03:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>PV to immersion diverter idea? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">PV to immersion diverter idea?</h3>
        <span class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 02/06/2013 - 13:54</span>
        <div class="content"><p>Hi,</p>
<p>My first post here, having only just found this forum.</p>
<p>For the past week or so I&#39;ve been working on an idea for a unit to mimic the job that the Immersun excess PV to immersion unit does, as we&#39;re currently building a passive house that will have a 6kWp PV array and it makes sense to use that to boost the relatively low temperature from our heat pump (the system uses a small heat pump to get the heat store tank to 35 deg C, and the PV driven immersion will take the heat store from 35 deg C to as high as I can comfortably get it ).&nbsp;</p>
<p>I&#39;ve only today come across the excellent device that Robin Emley here has come up with, and wish, perhaps, that I&#39;d found it before embarking on my own design.&nbsp; However, I&#39;m not an Arduino person, and find the whole way that the Arduino works more than a little bit confusing, and Github seems to me to be impenetrably geeky.</p>
<p>I&#39;ve already built a few simple &micro;processor gadgets, including a data logger that monitors temperature and humidity at several locations around the house (and outdoors) and stores the data on a &micro;SD card (see here: <a href="http://www.picaxeforum.co.uk/showthread.php?20551-Environmental-uSD-card-data-logger" title="http://www.picaxeforum.co.uk/showthread.php?20551-Environmental-uSD-card-data-logger">http://www.picaxeforum.co.uk/showthread.php?20551-Environmental-uSD-card...</a>) and more recently a portable CO2, temperature and humidity meter and datalogger (see here: <a href="http://www.picaxeforum.co.uk/showthread.php?23893-Air-quality-monitor-and-logger" title="http://www.picaxeforum.co.uk/showthread.php?23893-Air-quality-monitor-and-logger">http://www.picaxeforum.co.uk/showthread.php?23893-Air-quality-monitor-an...</a>).</p>
<p>For this excess PV power to immersion project I took what I thought to be the easy way out when it came to accurately measuring AC power.&nbsp; There seem to be lots of readily available energy meter chips around, intended for use within electricity meters.&nbsp; The range from Analog Devices looked particularly promising, but like the others seem now to only be available as surface mount (I find it easier to work with through hole parts - it&#39;s an age and eyesight thing........).&nbsp; Luckily I found some old stock AD7755 energy meter ICs, which are virtually identical to the current ADE7755 (see: <a href="http://www.analog.com/en/analog-to-digital-converters/energy-measurement/ade7755/products/product.html" title="http://www.analog.com/en/analog-to-digital-converters/energy-measurement/ade7755/products/product.html">http://www.analog.com/en/analog-to-digital-converters/energy-measurement...</a>) in terms of function, but comes in a 24 pin narrow DIP package.</p>
<p>The neat thing about using one of these as a front end is that all the stuff that needs to be done relatively quickly and accurately to measure voltage and current amplitude and phase is all done on the chip.&nbsp; With the chip set to high frequency mode it outputs a stream of pulses with a frequency proportional to real power, plus another line that indicates whether power is being imported or exported.&nbsp; This seemed to me to be a good starting point, as for the princely sum of around &pound;2.00, plus some peripheral bits, like the CT and power supply, I seemed to have most of the hard work done.</p>
<p>So far I&#39;ve been unwittingly paralleling the work that Robin Emley has done, even to the extent that I bought (for less than &pound;10 from ebay) the exact same Carlo Gavazzi controller.&nbsp; My intention was to use a &micro;controller to read the true power from the AD7755 whenever the AD7755 indicated that power was being exported.&nbsp; I will then just use a control loop to drive the Carlo Gavazzi just enough to keep system *just* exporting by a small amount.</p>
<p>Having now stumbled across this forum, and in particular the rather clever &quot;energy bucket&quot; principle that Robin Emley has come up with, I&#39;m seriously thinking about revising my code to work in a similar way, but not using an Arduino.&nbsp; My quick thoughts are to measure real power for a short period (just count the pulses from the AD7755 when it&#39;s in export mode) to get energy, accumulate energy (less a small &quot;leak&quot;) in a counter until it reaches the equivalent of 1800 J (half the threshold energy of most meters, I believe) and then dump 1800J worth of energy into the immersion, resetting the energy accumulator in the process, before going through the whole process again.&nbsp;</p>
<p>Because the AD7755 outputs real power and direction continually, I may add a display to show the imported and exported power, plus perhaps accumulated energy for each over time.&nbsp; Adding accumulated immersion diverted energy should also be possible, provided I can separate it out from the rest of the domestic loads.</p>
<p>Sorry for the lengthy introduction.</p>
<p>Jeremy</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="4238.html" class="topic-previous" title="Go to previous forum topic">‹ 3 Voltage and 3 Current readings sketch</a>
              <a href="4629.html" class="topic-next" title="Go to next forum topic">Heating controller with multi zone scheduling ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-12519"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 02/06/2013 - 14:37.</div>
    <div class="content">
     <p>Welcome, Jeremy.</p>
<p>I take it you&#39;ve also read up about <a href="https://learn.openenergymonitor.org/?redirect=meters" title="Energy Meters">Energy Meters</a>. It&#39;s the characteristics of the meter that drove the design. Actually, and of course depending on the accuracy of your measurement system (by that I mean how closely it is matched to your tariff meter) you don&#39;t need to leak energy back to the grid, you just need to ensure that that the nett transfer is below the creep threshold of your meter.</p>
<p>I think you might be heading for a control algorithm that&#39;s been tried here before, all I can say is Robin&#39;s control loop - where the feedback loop adjusts to a null (zero nett energy transfer) - is inherently more elegant and more accurate than measuring the generated and consumed energies separately.&nbsp; I think your meter i.c. could do that if you use the import/export line as the &#39;sign&#39; for the pulse train. And then you copy Robin&#39;s algorithm more or less exactly, including the anti-flicker features.</p>
<p>Trystan has done some work on <a href="https://learn.openenergymonitor.org/?redirect=appliance-inference">Appliance inference</a> which you might not have found yet! <a href="../user/2484.html" title="View user profile.">jack_kelly</a> is interested in this topic too - see <a href="285.html" title="http://openenergymonitor.org/emon/node/285">http://openenergymonitor.org/emon/node/285</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12520"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 02/06/2013 - 15:27.</div>
    <div class="content">
     <p>Thanks for the welcome.&nbsp; I&#39;ve been busy reading through the forum pages here, but have more to read!&nbsp; Thanks for those links, they&#39;ve certainly pointed to things here I hadn&#39;t yet found.</p>
<p>My intention is to use the AD7755 to do as you suggest, act as a bidirectional energy meter.&nbsp; Hopefully it should be as good as my tariff meter (once calibrated).&nbsp;</p>
<p>My initial code (prior to finding this forum) uses a PID control loop to set the output power to a notional small export target value.&nbsp; To try this out I first had to build a &quot;simulator&quot; to mimic the way that I think the PV, house loads and immersion might react as each load or the PV changes.&nbsp; That wasn&#39;t anywhere near as easy as I&#39;d thought!&nbsp; All sorts of potential gotcha&#39;s when you have two control loops interacting (the simulator control loop trying to dynamically mimic the AD7755 response to changing house and PV loads and the diverter control loop that I was trying to tune to get reasonably quick response with no overshoot).</p>
<p>Having&nbsp; now seen Robin Emley&#39;s idea of &quot;trampolining&quot; sub-meter threshold energy levels between the grid and the immersion I have to say that it does seem very elegant.&nbsp; Having already built a PCB I&#39;m reasonably confident that I can just change the code and make mine work the same way.&nbsp;</p>
<p>During the course of looking at how to measure energy reliably, I came across quite a few cheap energy meter chips, and I suspect that, with a bit of detective work it would be possible to find out exactly which is used in each make/model of electronic tarriff meter.&nbsp; The ones I&#39;ve got hold of can also drive an electromechanical counter directly, so are, in effect, a stand-alone meter system.&nbsp; The handy feature, though, is the fact that the chip outputs a pulse train at a frequency proportional to instantaneous (not averaged) real power.&nbsp; With a frequency of around 5500 Hz for full scale this gives pretty good resolution (around 0.733 Hz for 1 W with a 30A CT, at max allowable mains voltage).&nbsp; There is an understandable 100Hz ripple on this high frequency output, giving around a 10% fluctuation in period from pulse to pulse, but as power should be averaged over a few cycles this shouldn&#39;t present a significant issue, I think.&nbsp; The data sheet for the AD7755 describes well the basic principles used, and looking at some of the other manufacturer&#39;s product data sheets it seems that virtually all work in much the same way.</p>
<p>The anti-creep feature, for example, can be enabled or disabled on the AD7755.&nbsp; For my purposes I&#39;ve disabled it, so that the chip should give real import/export indication at very low power levels (although with anti-creep enabled the threshold is only 1.7W for a meter with a constant of 100 impulses per kWh).</p>
<p>Assuming that it&#39;s OK to &quot;trampoline&quot; up to just under 1 Wh across the meter without it starting to record consumption, then it should be possible to do this quite slowly (I can&#39;t quite grasp C++, so can&#39;t fathom out the code Robin Emley has used for anti-flicker- give me assembly language or one of the control languages and I&#39;m reasonably OK!).&nbsp; If that&#39;s the case, then the energy bucket could be emptied as one big hunk of 1800 J whenever it reached the half-way point.&nbsp; That pretty much removes any need for synchronisation with zero crossing, assuming a zero crossing SSR is used.</p>
<p>I see I have a lot more reading to do here......................</p>
<p>Jeremy</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12522"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Sun, 02/06/2013 - 17:03.</div>
    <div class="content">
     <p>FWIW-</p>
<p><a href="2044.html" title="http://openenergymonitor.org/emon/node/2044">http://openenergymonitor.org/emon/node/2044</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12524"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 02/06/2013 - 17:30.</div>
    <div class="content">
     <p>Thanks, I&#39;d seen all the stuff on Robin Emley&#39;s design, it&#39;s what led to me finding this forum earlier.</p>
<p>As I wrote in my first post, I&#39;m not an Arduino person, so am going to stick with using a PIC, simply because I&#39;ve many years experience with PICs and before that coding in assembler and raw machine code going back to the early days with the 6800 (and before that PDP 11 code..........).&nbsp; I&#39;m too old to get to grips with C++, having spent a few hours trying to decode even Robin Emley&#39;s well-commented code I am even more convinced that I&#39;m far more comfortable sticking with stuff I already know and understand well, rather than spend time I don&#39;t have to get even vaguely competent with a new language and hardware platform.</p>
<p>Having looked at the algorithm being used to determine true power in the Arduino based approach I&#39;m reasonably confident that the dedicated tariff meter front end chip is a more accurate approach, which is another reason for going down this route.&nbsp; The Analog Devices meter front end chips, for example, seem to use a pretty accurate, dedicated and pretty fast digital processing approach in hardware, and are, I believe, likely to give a slightly better measurement for the sort of distorted current waveform that seems quite common on a domestic supply.</p>
<p>The other advantage of this approach is price.&nbsp; The meter front end chips are cheap, as are PICs.&nbsp; The combination of a small PIC and a decent meter front end chip is less&nbsp; than &pound;3.&nbsp; Add in the cost of a CT, mains transformer and a cheap SSR and the unit component cost could be under &pound;20.&nbsp; Cheap enough to not be a painful loss if the experiment doesn&#39;t work out!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12525"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1775.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1775.html" title="View user profile.">Brian D</a> on Sun, 02/06/2013 - 17:54.</div>
    <div class="content">
     <p>Jeremy</p>
<p>	Your self description could so easily be me! PDP 11 (40 &amp; 45 in my case) Also PDP 8. MC6800 assembler .........</p>
<p>	C++ looked scary but for whatever reason I built a version of Robin&#39;s brilliant energy diverter. I expected many hours wrestling with unfamiliar tools and systems but instead with a little help from this excellent forum I had my unit happily diverting power in no time at all.</p>
<p>	If you simply follow the well trodden path that Robin has been so kind to lay for us you will have all the support you need and trust me you will not have to understand a single line of Robin&#39;s code to get your system working.</p>
<p>	If you don&#39;t like using stripboard you can even get some nice clunky PCB&#39;s from Richard (richmc).</p>
<p>	I am sure you are capable of re-inventing the energy diverter &#39;wheel&#39; but life is short ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12526"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Sun, 02/06/2013 - 18:02.</div>
    <div class="content">
     <p>Pleas read my posts regarding &quot;cheep SSRs&quot; I would never use one, there are far too many dodgy copies that pose as being from reputable sources, pay less than &pound;30 and you are asking for trouble.</p>
<p>Genuine Arduino unos are available for &pound;12 now, you will find the hardware more of an expense than the components. As for understanding the programme syntax of the uno I don&#39;t understand one line of it, I trust Robin on that score, I just do the hardware and soldering, and am happy to say the system works, from the very first version of the software to the very latest, it just gets more elegant.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12527"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 02/06/2013 - 18:27.</div>
    <div class="content">
     <p>Just to reiterate something I&#39;ve already mentioned, I&#39;ve built the PCB, and have the PID code sort of working, so am committed to the PIC solution.&nbsp; Sorry if that&#39;s seen as a bad move, it happens to be something I&#39;m comfortable with coding, so I am going to stick with it.&nbsp;</p>
<p>The Carlo Gavazzi controller I have doesn&#39;t seem to be a &quot;Chinese cheapie&quot; to me, yet was under &pound;10 on ebay.&nbsp; In anticipation of going to the &quot;energy bucket&quot; approach I&#39;ve just bought a brand new 25A Crouzet SSR for &pound;6.&nbsp; I&#39;ll eat my hat if Crouzet produce &quot;dodgy&quot; products, they have far too good a reputation to risk, I&#39;d have thought.&nbsp; I&#39;d personally not touch some of the Chinese products that infest ebay, but that&#39;s not to say that there aren&#39;t plenty of genuine branded products around at good prices from UK sellers on there.</p>
<p>I appreciate that the Arduino fans are happy to pay &pound;12 for something that can be done by a &pound;0.50 PIC, but it seems like a real sledgehammer to crack a nut approach to me, I&#39;m afraid.&nbsp; The processing needed when using a dedicated energy measurement front end is very modest, just a few tens of bytes of code.</p>
<p>I&#39;m not in any way being critical of Robin Emley&#39;s designs, quite the opposite.&nbsp; It was the elegance of his energy bucket approach that drew me to this forum.&nbsp;</p>
<p>As I said in my first post here, I&#39;m building a new-build passive house that will be pretty intensively instrumented.&nbsp; It just doesn&#39;t make sense for me to change everything I&#39;ve done to date and switch to a different hardware platform and re-write, re-test and re-evaluate all the subsystems built to date.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12532"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 02/06/2013 - 20:37.</div>
    <div class="content">
     <p>I worked quite closely with Robin when he was developing his design, so feel free to ask about C++ or his algorithms.&nbsp; PM me if you wish. (Robin&#39;s away at the moment, I expect he&#39;ll chip in about a week from now!)</p>
<p>And as we&#39;re all on a Memory Lane trip, I started my programming in Fortran 4 at the end of a 75 baud modem with ... wait for it ... acoustic couplers on the telephone. And this was at work.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12535"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 02/06/2013 - 21:17.</div>
    <div class="content">
     <p>Fortran also sounds very familiar, as does working over slow lines, although in my case it was using teleprinters over a modem link to an ICL running George 3.&nbsp; I well recall writing Fortran 77 code, squirting the punched tape up to the ICL (some 120 miles away) and receiving the compiled (and buggy) code back on the teleprinter the next morning.&nbsp; It has to be said that code development was not exactly rapid back then..................</p>
<p>I look forward to hearing from Robin when he returns, especially as I&#39;d like to personally thank him for his innovative idea.&nbsp; I&#39;ve been revising my code for reading instantaneous real power from the AD7755 this evening, and it looks as if I can fairly comfortably get pretty fast and accurate results by just counting pulses from the CF pin.&nbsp; I have it running on test now, in an &quot;anti flicker&quot; mode, where it fills the bucket to 1800 J then empties it in a single 600mS pulse of power to the immersion.&nbsp; It doesn&#39;t seem to need to be synchronous to the mains frequency, as the error is only one missed mains cycle of 60J, not really enough to worry about in the overall scheme of things.</p>
<p>The current code is only a handful of lines (just a few dozen bytes) as the bulk of the fast processing is done in the AD7755.&nbsp; This makes adding serial or LCD data displays easy, as there&#39;s nothing really time-critical going on, all that stuff is done by the AD7755 front end chip.&nbsp; Based on my experience of using 433MHz RF data links around the house, I suspect there wouldn&#39;t really be any problem in making the immersion switch a remote device using this approach, as all it needs is to receive a suitably encoded trigger signal once every second or so at most (unless you have a particularly large PV array).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12747"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sat, 08/06/2013 - 11:47.</div>
    <div class="content">
     <p>I&#39;m pleased to say that I now have an anti-flicker PV diverter up and running, using just a handful of lines of code (just 73 bytes worth).&nbsp; It uses the elegant energy bucket principle, with the AD7755 set to deliver pulses that represent 10 J of energy, plus a direction indicator so that the PIC knows whether to add or subtract the energy from the bucket.&nbsp; I&#39;ve included a (programmable) leak into the bucket too, which at the moment drains a steady 2% of maximum capacity from it, just to make sure that there&#39;s never an accidental import.</p>
<p>Bench testing with simulated loads and PV generation seems to show that it works OK.&nbsp; I currently have the energy bucket capacity set to 3600 J, the upper trigger point set to 75% full and the lower trigger point set to 25%.&nbsp; The energy bucket fills in 10 J increments (less the 2% leak) and when it reaches 75% full it turns on an SSR (which is inherently zero crossing switched).&nbsp; The energy bucket carries on adding or subtracting 10 J pulses until such time as it empties to the 25% level, where the SSR is turned off.&nbsp;</p>
<p>Testing shows, for example, that with an initial 500 W export and no import, the SSR (and hence the 3kW immersion element) turns on for 0.7 sec, then turns off for 5.5 secs.&nbsp;</p>
<p>I have a PCB designed for this unit, and once I&#39;ve done some further testing and am happy that everything works as it should I&#39;ll make the circuit freely available.&nbsp; The component cost is low, I paid about &pound;2 for the AD7755 precision energy meter chip, another &pound;1.80 for the microntroller, &pound;6 for a surplus 25 A SSR, another &pound;6 or so for a CT and perhaps a further &pound;8 on peripheral components, like a small mains transformer, some resistors, capacitors etc.&nbsp; Total cost excluding the case will probably be around &pound;30.&nbsp; For another &pound;10 I could add an energy/power display, so I may do that once I&#39;m confident the unit works as it seems to.</p>
<p>Many thanks to Robin Emley for coming up with the energy bucket idea.&nbsp;</p>
<p>It does, however, mean that I now have a brand new and boxed surplus Carlo Gavazzi controller that I originally bought for this project when I was looking at using proportional control.................</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12751"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Sat, 08/06/2013 - 12:36.</div>
    <div class="content">
     <p>That sounds like a very neat self-contained solution Jeremy. I look forward to seeing your schematic etc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12752"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sat, 08/06/2013 - 13:11.</div>
    <div class="content">
     <p>Thanks.&nbsp;</p>
<p>Here&#39;s a photo of my (very rough and ready) breadboard.&nbsp;</p>
<p><img alt="" src="../../../farm4.staticflickr.com/3747/8985549785_953ab114bb_z.jpg" style="width: 361px; height: 640px;" /></p>
<p>Most of the stuff on there is simulation related, or part of a general purpose development breadboard, rather than anything to do with the diverter itself.&nbsp;</p>
<p>I used two transformers, one as a simulated immersion heater, switched by the SSR, the other as a combined power supply, voltage sense and import/export load simulator.&nbsp; By winding three sets of&nbsp; 10 turns around the CT I was able to get ten times the apparent current reading, so the small transformer that represents the immersion heater only has a 1.2A load (a couple of big power resistors) yet the CT senses this as if it were 12 A, about the current a 3 kW immersion should draw.</p>
<p>Similarly, I use the one of the other 10 turn CT windings in the power supply feed to the meter, which allows the ~20mA the breadboard draws (it has loads of peripheral stuff on it unconnected to this project) to be read as a 0.2 A background house load.</p>
<p>The AD7755 energy meter chip measures real power (it&#39;s intended for use in electronic commercial energy meters) and has two outputs, CF, which is a pulse train with each pulse being equal to 10 J, and REVP which is a signal that indicates the direction of energy flow, import or export.</p>
<p><img alt="" src="../../../farm3.staticflickr.com/2878/8985553269_9400623cd3_z.jpg" style="width: 501px; height: 365px;" /></p>
<p>The above photo shows the bits and bobs needed to make the AD7755 work OK.&nbsp; Not much really, mainly a few resistors to scale the CT and voltage sense levels and the crystal for the chips internal processor clock.</p>
<p>The microcontroller circuit is about as simple as it gets, a single 8 pin chip with the two outputs from the AD7755 fed in as inputs and a single output to drive the solid state relay.</p>
<p><img alt="" src="../../../farm4.staticflickr.com/3743/8985553823_2a09a399fc_o.jpg" style="width: 259px; height: 238px;" /></p>
<p>&nbsp;</p>
<p>Nothing else on the breadboard is used, except for the 5V voltage regulator.</p>
<p>I&#39;ve just been testing a couple of PCB mounted transformers, with the intention of using one of them as the power supply and voltage sense reference.&nbsp; Unlike the big transformer I used on the breadboard, they seem to have a much better no load waveform, which is good news.</p>
<p>I found the big transformer got quite warm with no load, and had a truly dreadful waveform.&nbsp; After a bit of head scratching I realised it was running at core saturation with no load.&nbsp; Adding a couple of big resistors to lightly load it all the time made it run cool and deliver a very nice looking sine wave.&nbsp; Probably something worth watching for if using a transformer for voltage sensing, as although the high sampling rate should give a fair degree of immunity to waveform shape it seems to make sense to try and retain fidelity if possible.</p>
<p>I&#39;ll publish the schematic as soon as I have it drawn up and am happy that it works when built on to a PCB.&nbsp; The prototype code is here (sorry this is Picaxe Basic, rather than the C++ favoured here!):</p>
<p>Jeremy</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>;Energy bucket immersion heater PV diverter, using Picaxe 08M2 controller</p>
<p>;Code not yet fully tested, but does seem to work as expected using a bench simulation</p>
<p>;Uses Analog Devices energy meter chip, AD7755 (now replaced by ADE7755, only available as surface mount)</p>
<p>;AD7755 determines true instantaneous power and direction of energy flow and has two outputs<br />
	;Output CF is an 18&micro;S wide positive pulse equivalent to 10 J that has a PRF of between 0 and about 5570 Hz (covering a range of 0 W to 55.7 kW in theory)<br />
	;Output REVP indicates the direction of energy flow, low for import, high for export</p>
<p>;Operating Principle:<br />
	;<br />
	;Uses interrupt to trigger a routine whenver a CF pulse occurs.&nbsp; This interrupt is on pin c.3 and is set up using the setint command (pin and mask)<br />
	;The state of the REVP input (pin c.4) is used to determine whether 10 J is added to the energy bucket or whether 10 J is subtracted from it.<br />
	;A small safety leak is built in, in that after a set number of iterations of the interrupt routine the energy bucket accumulator is decremented.<br />
	;the loop counter used to keep track of the number of iterations of the interrupt routine is reset to 0 after the leak is decremented&nbsp;<br />
	;The energy bucket accumulator has a lower limit of 0 J and an upper limit that is set by the variable &quot;capacity&quot;, in Joules / 10<br />
	;When the energy bucket accumulator fills to the upper trigger level, set by the value of &quot;upper&quot;, the solid state relay is turned on, via pin c.2<br />
	;Whenever the energy bucket accumulator empties to the lower trigger level, set by the value of &quot;lower&quot;, the solid state relay is turned off<br />
	;After the interrupt routine has completed the setint command is used to &quot;re-arm&quot; the interrupt, ready for the next energy pulse<br />
	;<br />
	;With values of 270 for the upper trigger point and 90 for the lower trigger point this controller shuttles 1800 J across the meter<br />
	;The majority of household energy meters have a 1 Wh (3600 J) threshold before registering any energy.</p>
<p>;This design reduces the flicker frequency by offsetting the upper and lower trigger points.&nbsp; Typically the immersion will turn on for a short period every few seconds.<br />
	;For example, at 500 W export the immersion will be on for 0.7 seconds and then off for 5.5 seconds, with a 2% leak rate set.</p>
<p></p>
<p>#picaxe 08M2</p>
<p>
	symbol accumulator = w0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;energy bucket accumulator variable</p>
<p>symbol leakcounter = b2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;used as loop counter for leak, records number of times interrupt routine called</p>
<p>symbol upper = 270&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;upper energy bucket threshold for switching on immersion (270 = 75% full)</p>
<p>symbol lower = 90&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;lower energy bucket threshold for switching off immersion (90 = 25% full)</p>
<p>symbol capacity = 360&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;nominal 3600 joule energy bucket capacity (value = Joules / 10)</p>
<p>symbol leak = 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;50 gives a 2% leak rate in the energy bucket (decrements by one every 50 iterations)</p>
<p>&nbsp;</p>
<p>init:</p>
<p>setfreq m32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;set clock frequency to 32 MHz for best speed</p>
<p>setint %00001000, %00001000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;set interrupt on pin c.3, masked to detect high pulse</p>
<p>
	main:</p>
<p>pause 1000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;loop around aimlessly waiting for an interrupt<br />
	goto main</p>
<p>&nbsp;</p>
<p>interrupt:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;interrupt routine is called whenever an energy pulse is detected</p>
<p>	inc leakcounter</p>
<p>	if pinc.4 = 1 then let accumulator = accumulator + 1 max capacity&nbsp; ;accumulate export energy in energy bucket up to max set by variable &quot;capacity&quot;<br />
	endif&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;pin c.4 is REVP on AD7755 and indicates import/export<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;pin c.4 low = import, pin c.4 high = export<br />
	if pinc.4 = 0&nbsp; then let accumulator = accumulator - 1<br />
	endif</p>
<p>	if accumulator &gt; capacity then let accumulator = 0&nbsp;&nbsp;&nbsp; ;trap under flow error from subtracting from zero<br />
	endif</p>
<p>	if accumulator &gt; upper then high c.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;switch on immersion if over upper trigger level<br />
	endif</p>
<p>	if accumulator &lt; lower then low c.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;switch off immersion if below lower trigger level<br />
	endif</p>
<p>	if leakcounter = leak then<br />
	&nbsp; let accumulator = accumulator - 1 min 0&nbsp;&nbsp;&nbsp;&nbsp; ;decrement accumulator once every &quot;leakcounter&quot; times interrupt called<br />
	&nbsp; leakcounter = 0<br />
	endif</p>
<p>	setint&nbsp; %00001000, %00001000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;re-arm interrupt ready for next energy pulse</p>
<p>	return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;return back from interrupt routine to main loop</p>
<p>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;interrupt routine takes about 950&micro;S to execute</p>
<p>	END<br />
	&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12754"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 08/06/2013 - 17:21.</div>
    <div class="content">
     <p>Hi Jeremy, I think the idea of sending power to the immersion in fixed-period bursts is an excellent way to go.&nbsp; Because &quot;time&quot; is well understood, such a system requires no calibration.&nbsp; The latest version of my Mk2 code, rev5a, works in just this way.&nbsp; As posted, the minimum burst duration is 25 mains cycles which is 0.5 seconds.</p>
<p>The rev5 algorithm is actually a little cunning as it works both ways.&nbsp; When the halfway point of the energy bucket is reached in the upwards direction, the load remains OFF for a further 0.5 seconds before being turned ON.&nbsp; The bucket&#39;s level will than start to fall until it gets to the halfway point once more.&nbsp; The load then remains ON for a further period of 0.5 seconds before being turned OFF.&nbsp;</p>
<p>When surplus power is 50% of the load&#39;s rating, the cycle rate is 2 seconds with this scheme; one second on and one second off.&nbsp; When SP is close either extreme, e.g. 100 W or 2900 W, the infrequent ON or OFF periods are much closer to 0.5 seconds.&nbsp;</p>
<p>This behaviour profile turns out to be just the same as for a perfectly calibrated system which has a pair of upper and lower limits set as far apart as is possible - but it runs at exactly twice the rate.&nbsp; The big advantage of this scheme, however, is that there is no need for calibration.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12756"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sat, 08/06/2013 - 19:06.</div>
    <div class="content">
     <p>That&#39;s an interesting approach, although calibration isn&#39;t really a problem with the front end chip I&#39;m using.&nbsp; It&#39;s inherently pretty accurate, as it uses 16 bit A-Ds running at 900kHz sampling rate, and only needs the right input voltage (or current) to be adjusted with a known resistive load to set the calibration, which is pretty easy to do.</p>
<p>The other reason that i opted to use a dedicated energy meter front end chip was that I wanted to ensure that the energy measurement process was continuous and independent of any other activity that I want to do.&nbsp; In my case I&#39;m using a small 8 pin microcontroller to drive the SSR and do the energy bucket sums, and when I add an energy display I&#39;ll probably just use a relatively affordable (&pound;24)&nbsp; 20 x 4 line OLED display with a built in microcontroller, that can independently connect to the pulse and direction outputs from the AD7755 and keep tally of import/export energy as well as current power.&nbsp; If I also hook up to the SSR trigger line I can display true immersion power and energy used as well.&nbsp; By detecting the pulse rate change when the SSR turns on I should be able to detect whether or not the immersion thermostat is calling for heat or satisfied, to give a good indication of energy diverted.&nbsp; I could also use the microcontroller in this display to send data to a RF transmitter module, allowing remote displays or just passing data to the other controllers in the house.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12762"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Sat, 08/06/2013 - 23:33.</div>
    <div class="content">
     <p>It seems there is a dip version of the ADE7755AN</p>
<p><a href="http://www.aliexpress.com/item/ADE7755AN-AD-DIP-ADE7755/437308083.html">http://www.aliexpress.com/item/ADE7755AN-AD-DIP-ADE7755/437308083.html</a></p>
<p>With that IC you can connect the Vac input to the mains via a resistor ladder. WARNING if you do this your circuit will be HOT IE not isolated from the mains.</p>
<p>I wouldn&#39;t mind trying to make this up myself It should be quite possible to make up a &nbsp;pretty accurate import export meter using this rig a simple plug in device&nbsp;with a CT sensor that displays to 1/360th of a WH power flow in watts is &nbsp;calculated as (pulses per second * 10) &nbsp;or 10 / &nbsp;(pulse gap in seconds) or in arduino</p>
<p>thismillis&nbsp;= milis();</p>
<p>watts =10000/ ( PreMilis -&nbsp;thismillis&nbsp;);</p>
<p>PreMilis=thismillis;</p>
<p>The chip is pretty cheep and all else is required is a few caps / resistors and an xtal. I suppose it depends how cheep the chip is , if you can ditch the transformer by using a resister ladder it could be built for the price of a AC/AC Transformer.</p>
<p>This&nbsp;<a href="http://www.aliexpress.com/store/product/5V0-6A-3W-AC-DC-converter-switching-power-supply-with-the-white-case/208521_568442193.html">http://www.aliexpress.com/store/product/5V0-6A-3W-AC-DC-converter-switching-power-supply-with-the-white-case/208521_568442193.html</a>&nbsp;would make a good enough power supply for a few quid.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12763"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 09/06/2013 - 02:44.</div>
    <div class="content">
     <p><em>and only needs the right input voltage (or current) to be adjusted with a known resistive load to set the calibration, which is pretty easy to do.</em></p>
<p>It&#39;s interesting that there&#39;s no provision for phase shift calibration. &nbsp;The datasheet suggests that the internal phase correction stuff is for compensating for any phase shift introduced by the internal HPF. &nbsp;It looks like they&#39;re assuming your two external channels arrive at the device without phase errors (or with identical phase errors). &nbsp; A lot of these energy chips provide a way to calibrate away external phase shifts, like the 2-3 degrees you might get from a typical CT, although even then only if it&#39;s constant across the current range (which it rarely is). &nbsp; &nbsp;</p>
<p>Perhaps they&#39;ve taken the approach that it only matters at low PFs, &nbsp;where real power tends to be fairly small anyway.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12764"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 09/06/2013 - 07:23.</div>
    <div class="content">
     <p>The chips are cheap, I bought 5 of them for less than &pound;2 each including postage.&nbsp; I found the AD7755 in a 24 pin DIP package to be very easy to use indeed, most of the external components are just there to scale the input voltages from the current and voltage sense sources.</p>
<p>The phase error point is an interesting one, and one I&#39;ll try and take a look at today.&nbsp; For the basic, direct connection application that Analog Devices give, it probably isn&#39;t an issue, as they use a resistive divider to get the voltage sense and a low value shunt for the current sense, presumably because this is the most cost-effective way to design a tariff meter, where isolation isn&#39;t really needed.&nbsp; It would be possible to use that design and then just add two optoisolators to the CF and REVP outputs, to get isolated signals out, but is does mean running the sensed current feed through the unit, which I don&#39;t really like for a whole house unit.&nbsp; I suppose it would be possible to build in a thick cable that&#39;s connected through the shunt, as a loop that&#39;s connected to the meter tails via a Henley block, but then a Part P qualified chap would be needed to sign it off after installation.</p>
<p>I&#39;m using transformers for both current and voltage sensing in order to maintain isolation and for ease of connection.&nbsp; I guess the key issue is whether or not the phase errors introduced by the voltage and current sensing transformers effectively cancels out, or whether it makes things worse.&nbsp; I should be able to answer that later today with a bit of luck, after I&#39;ve done a few measurements.</p>
<p>As Analog Devices give an application circuit that includes using transformers, I suspect that this isn&#39;t a significant problem with quality components.&nbsp; It may well be that the cheap Chinese CTs that are readily available are worse with respect to phase error than the more expensive components intended for use in commercial tariff meters.</p>
<p>IIRC, there is also a small phase error in the traditional two coil induction disc meter.&nbsp; As it seems that the specs for electronic meters are based on the performance of induction disc meters it may well be that the general view is that a small phase error doesn&#39;t matter too much.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12765"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 09/06/2013 - 08:45.</div>
    <div class="content">
     <p><em>the cheap Chinese CTs that are readily available are worse with respect to phase error than the more expensive components intended for use in commercial tariff meters</em></p>
<p>Yep, it&#39;s definitely a case of getting what you&#39;re prepared to pay for. &nbsp;Check out the specs on this mob&#39;s &quot;Option C0.6&quot;&nbsp;CTs.</p>
<p><a href="http://www.ccontrolsys.com/w/ACT_Series_Split-Core_Current_Transformers" title="http://www.ccontrolsys.com/w/ACT_Series_Split-Core_Current_Transformers">http://www.ccontrolsys.com/w/ACT_Series_Split-Core_Current_Transformers</a></p>
<p>They even calibrate them for 50 or 60Hz, and ship each CT with a calibration certificate.</p>
<p>On my el-cheapo&#39;s&nbsp;I see a phase error of about:</p>
<p>1.65 degrees at 50Hz</p>
<p>1.30 degrees at 60Hz</p>
<p>0.86 degrees at 100Hz.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12770"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 09/06/2013 - 13:06.</div>
    <div class="content">
     <p>It&#39;s the old story - you get what you pay for.</p>
<p>And those graphs are for the commercial grade. Can you find us an equivalent v.t - plug-in CE marked but at the Chinese price of course? <img alt="" src="../../../s.codeproject.com/script/Forums/Images/smiley_smile.html" /></p>
<p>You can find phase shift for the c.t. and v.t. in the shop in the reports - see how constant those aren&#39;t against current and voltage respectively.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12778"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Sun, 09/06/2013 - 15:23.</div>
    <div class="content">
     <p>For this application I cant see the &quot;Cheep Chinese&nbsp;CT&quot; being a problem. You can calibrate the reader very accurately against&nbsp;the original meter. Just turn off your PV or do a test at night set up a counter to count 1000 meter pulses and pulses from the ADE7755AN&nbsp;at the same time. Count say 1000 pulses on your main meter (1KW&nbsp;hour) = 3,600,000 Joules. if you got 356,000 pulses from the&nbsp;ADE7755AN&nbsp;over the same period then you know that a pulse is ADE7755AN 10.11J. I know this figure may not be truly accurate but we are only interested in the ratio of pulses on the&nbsp;ADE7755AN&nbsp;to the ratio on the tariff meter.&nbsp;</p>
<p>Using the same method you could probably use a self calibration approach&nbsp;to calculate the bucket size for the meter. You could repeatedly keep allowing the bucket to fill higher and higher till you get a w hour of usage then adjust your bucket size downward by 5-10%. &nbsp;When all said and done you are only trying to calculate the the &quot;Magic Number&quot; the number of import pulses on the ADE7755AN&nbsp;to allow before you allow the bucket to refill. &nbsp;</p>
<p>I think If i go down this route I will keep my photo transistor&nbsp;on my meter and let the Atmel&nbsp;constantly compare pulse counts from the ADE7755AN&nbsp;with the tariff meter output.</p>
<p>Most people seem to compare there EMON data with there tariff meter readings as an initial &nbsp;test of its accuracy. Using the above method the ADE7755AN&nbsp;should collate&nbsp;very closely to there tariff meter. &nbsp; &nbsp; &nbsp;</p>
<p>I have found a source for&nbsp;AD7757ARN&nbsp;which seems the same but with a built in Osc&nbsp;its a surface mount though &nbsp;anyone fancy mounting a couple of these onto adapters in exchange for a couple of samples. ??&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12779"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 09/06/2013 - 15:52.</div>
    <div class="content">
     <p>I have one, perhaps two, spare AD7755AAN 24 pin DIP chips, and they still available from the ebay vendor I bought mine from : <a href="http://www.ebay.co.uk/itm/1PCS-AD7755AAN-Energy-Metering-IC-with-Pulse-Output-/221119026566?pt=LH_DefaultDomain_0&amp;hash=item337bb89586" title="http://www.ebay.co.uk/itm/1PCS-AD7755AAN-Energy-Metering-IC-with-Pulse-Output-/221119026566?pt=LH_DefaultDomain_0&amp;hash=item337bb89586">http://www.ebay.co.uk/itm/1PCS-AD7755AAN-Energy-Metering-IC-with-Pulse-O...</a></p>
<p>Mine took around two weeks to arrive, but if you wanted one quickly I could send you one of my spares.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12780"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Sun, 09/06/2013 - 16:55.</div>
    <div class="content">
     <p>I have found some DIPs in HK at around a &pound;&nbsp;1 each in 10&#39;s. The&nbsp;AD7757 has a built in Osc&nbsp;so no xtal or caps to find. I think I would like to make a small PCB &quot;OPEN SOURCE&quot; with an&nbsp;AD7757&nbsp;and the necessary something caps etc pull ups &nbsp;for the S0,S1&nbsp;and SCF. Maybe some 150nf caps to ground&nbsp;on v1 v2 as per there demo diagram The aim would be to have an almost plug and play board they you just ad an ac voltage ref and current ref with burden resistor. It would give out an optically output like yours with a direction indicator. Should be able to build the whole think on something a little bigger than a 28 pin wide DIP.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12781"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 09/06/2013 - 17:14.</div>
    <div class="content">
     <p>If the prime objective of a PV diverter is to reduce surplus power to zero, then no calibration should be required.&nbsp; As long as the measurement process is continuous and the system is linear, an accurate balance between import and export will always be maintained.</p>
<p>Sorry if I&#39;ve misinterpreted anything on this thread, but I though it worth re-stating this basic truth.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12782"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 09/06/2013 - 17:26.</div>
    <div class="content">
     <p>Indeed, there&#39;s no need for calibration if you only want to use the output of the energy metering chip as a stand alone diverter.&nbsp; In my case I want to also use the energy measurement to drive a display, so calibration is useful.&nbsp; It&#39;s very quick an easy to calibrate, literally just plug a known resistive load in and tweak either the voltage sense or current sense to get the right output frequency.&nbsp;</p>
<p>There is a need to get the output to roughly the right range, even if only using it as a stand-alone energy diverter, by picking the right value of resistors for scaling the inputs, selecting the right gain settings on the chip (to avoid saturation) and also a need to reduce the value of the burden resistor in the cheap CTs, as the maximum signal on the current channel is +/- 470mV peak at the lowest gain setting.</p>
<p>I&#39;ve knocked up a PCB and done some quick testing this afternoon, and all seems well.&nbsp; Next step is to put it in a box.</p>
<p><img alt="" src="../../../farm4.staticflickr.com/3708/8997449427_cb018a1737_z.jpg" style="width: 640px; height: 436px;" /></p>
<p>&nbsp;</p>
<p><img alt="" src="../../../farm3.staticflickr.com/2830/8998635246_00ce2af273_z.jpg" style="width: 640px; height: 425px;" /></p>
<p>Note that I&#39;ve made an earthed boundary all around the mains connections, as a barrier, and left enough space to prevent tracking.&nbsp; Once I&#39;m sure the board works OK I&#39;ll clean it up with isopropyl alcohol and give it a coat of conformal coating to protect it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12783"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 09/06/2013 - 17:51.</div>
    <div class="content">
     <p>What about tracking distance around the opto-isolator? Remember that once you have a galvanic connection to the mains, the whole circuit must be considered &#39;live&#39;.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12784"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 09/06/2013 - 18:28.</div>
    <div class="content">
     <p>What opto-isolator?&nbsp; The mains is only inside the big isolated area to the lower right of the underside view.&nbsp; The rest of the circuit is earth-referenced, including the microcontroller that&#39;s doing the sums and driving the SSR.&nbsp; There is no galvanic connection to the mains anywhere.</p>
<p>&nbsp;As a key to the connections, looking at the component side photo, the mains connection is the three way terminal bock to the lower left, with earth in the centre.&nbsp; The other three way terminal block is the CT connection (the CT is adapted so that the internal burden is two resistors, centre tapped).&nbsp; The two way terminal block to the upper right is the connection to the SSR from the microcontroller.&nbsp; The white 5 pin connector just below the microcontroller is a connector to drive an OLED display, that will show import and export Wh totals, plus current import/export status and power.</p>
<p>The three pin header is the serial programming port for the microcontroller.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12788"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Sun, 09/06/2013 - 20:26.</div>
    <div class="content">
     <p>What no LED to tell you its on. :) Only kidding. Just looking an my version was wondering if you had contemplated using a single transformer and half rectifying the mains. The whole thing can only draw 50ma&nbsp;or so if you drew 1W through a resistor across the AC output that should saturate the effect of your DC PSU.&nbsp;</p>
<p>A good looking board simple reasonably small, possibly small enough to fit into a double back box with an override/bypass switch on it. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12791"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 09/06/2013 - 21:19.</div>
    <div class="content">
     <p>I tested the idea of using one transformer, but it doesn&#39;t work well, unfortunately.&nbsp; The problem is that the SSR draws around 15mA from the microcontroller pin when it turns on, so causes a voltage drop at the small (1.5VA) transformer of around 5 to 6%.&nbsp; This voltage drop is then falsely detected by the AD7755 as a reduction in power.&nbsp; My first attempt used just one transformer&nbsp; and gave some odd results, until I stuck the &#39;scope on the raw AC coming from the transformer and saw the dip as the SSR turned on.</p>
<p>The steady state power consumption is about 12mA, with the SSR off, with a part of that being the quiescent current in the 5V regulator.&nbsp; If the SSR didn&#39;t more than double the current drawn for the transformer when it is turned on then I think it would be OK to measure voltage from the same transformer.&nbsp; Another option might be to use a single transformer with a double winding.&nbsp; I&#39;m reasonably sure that the voltage drop is primarily a result of winding resistance, rather than a change in core flux, so another secondary winding may well stay stable as a bit more current is drawn from its partner.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12792"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 09/06/2013 - 21:22.</div>
    <div class="content">
     <p><em>In my case I want to also use the energy measurement to drive a display, so calibration is useful..... I&#39;ve knocked up a PCB and done some quick testing this afternoon, and all seems well,</em></p>
<p>What did you find with regards CT (and voltage transformer) induced phase shifts for your energy display?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12793"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 09/06/2013 - 21:33.</div>
    <div class="content">
     <p>Sorry, I haven&#39;t got around to measuring the phase shift across the Ct and voltage sense transformer today, as i got sidetracked into making up the pcb, rather than doing more testing on the breadboard version.&nbsp; I&#39;ll see if I can get some idea of phase shift through the transformer tomorrow.&nbsp; The CT phase shift should be the same as that already measured in the report here, as it&#39;s a YHDC type, and I suspect they are all much the same (the report here mentions a range of between 2 deg and 7 deg, depending on burden value, load and frequency).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12797"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Sun, 09/06/2013 - 23:43.</div>
    <div class="content">
     <p>This is from the Data sheet</p>
<p>Figure 27 shows the effect of offsets on the real power calculation. As can be seen, an offset on Channel 1 and Channel 2 will&nbsp;contribute a dc component after multiplication. Since this dc&nbsp;component is extracted by the LPF and used to generate the<br />
	real power information, the offsets will have contributed a constant error to the real power calculation. This problem is easily<br />
	avoided by enabling the HPF (i.e., pin AC/DC is set logic high) in Channel 1. By removing the offset from at least one channel,no error component can be generated at dc by the multiplication. Error terms at cos(&omega;t) are removed by the LPF and the&nbsp;digital-to-frequency conversion&mdash;see Digital-to-Frequency&nbsp;Conversion section.<br />
	&nbsp;</p>
<p>The HPF in Channel 1 has an associated phase response that is<br />
	compensated for on-chip. The phase compensation is activated<br />
	when the HPF is enabled and is disabled when the HPF is not<br />
	activated. Figures 28 and 29 show the phase error between<br />
	channels with the compensation network activated. The AD7755<br />
	is phase compensated up to 1 kHz as shown. This will ensure<br />
	correct active harmonic power calculation even at low power<br />
	factors.</p>
<p><strong>I think </strong>that means its corrected even with some of the cheaper CTs&nbsp;correct me if I am wrong.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12799"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 10/06/2013 - 00:21.</div>
    <div class="content">
     <p>I think not. The compensation refers to the filter inside the i.c. It cannot have any knowledge of the properties of a c.t.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12801"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Mon, 10/06/2013 - 00:41.</div>
    <div class="content">
     <p><em>I think that means its corrected even with some of the cheaper CTs correct me if I am wrong.</em></p>
<p>I&#39;m pretty sure the &quot;offset&quot; part discussed in the first paragraph of your quote is all about DC offsets on the channel inputs, and not related to any phase shifts.</p>
<p>My reading of the second paragraph of your quote is that the device will correct for any phase error it introduces. &nbsp;Its HPF introduces a phase shift, and so when its enabled, the phase compensation logic is also enabled to correct for it.</p>
<p>Conceptually, the two signals arriving on the channel inputs may be phase shifted relative to each other, &nbsp;because of:</p>
<p>. the nature of the load</p>
<p>. phase errors introduced by the CT or the voltage sensing transformer</p>
<p>The first is not an error, and should not be corrected for, while the second is.&nbsp;</p>
<p>It&#39;s usually during the phase shift calibration process that you tell the device which shifts to correct for, and which to leave alone. &nbsp;For example on the device I use, the recommended procedure is to supply a load with a PF of 0.5. &nbsp; You then read the device&#39;s real and reactive energy components and effectively do a tan<sup>-1</sup>(react/real). &nbsp; You want that result to come out at 60<sup>0</sup>, since cos(60<sup>0</sup>) = 0.5. &nbsp;Typically, it&#39;ll come out at something more like 58<sup>0</sup> say, which would indicate that your total phase error (both external and internal) is 2<sup>0</sup>. &nbsp;​ &nbsp;So you then just tweak the phase shift calibration register until it does come out to 60<sup>0</sup>.</p>
<p>It&#39;s not perfect because it assumes your phase error is constant across temperature, primary current etc. which it rarely is. But if the graph is fairly flat, and you can nail the error in the most common operating zone, then it&#39;s probably better than ignoring it completely.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12803"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Mon, 10/06/2013 - 02:48.</div>
    <div class="content">
     <p>The first bit was for the LPF I just copied and pasted the whole section. But yes it seems it may correct its own internal error.</p>
<p>Had a good look at a few of these chips now the microchip one looks very similar to the AD one.</p>
<p>If you want bells and whistles the Maxim MAX71020&nbsp;one has it all definitely the Ferrari of the meter reading chips, by that I mean&nbsp;your constantly tinkering with it to get it to do what you want.&nbsp;</p>
<p>S 0.1% Accuracy Over 2000:1 Current Range</p>
<p>S Exceeds IEC 62053/ANSI C12.20 Standards<br />
	S <strong>Two </strong>Differential Current Sensor Inputs<br />
	S <strong>Two</strong> Voltage Sensor Inputs<br />
	S Selectable Gain of 1 or 8.9 for One Current Input&nbsp;to Support a Shunt<br />
	<strong>S High-Speed<u> Wh/VARh</u> Pulse Outputs with&nbsp;Programmable Width</strong><br />
	S Up to Four Pulse Outputs with Pulse Count<br />
	S Four-Quadrant Metering<br />
	S Digital Temperature Compensation<br />
	S Independent 32-Bit Compute Engine<br />
	S 45Hz to 65Hz Line Frequency Range with Same<br />
	Calibration<br />
	S<strong> Phase Compensation (&plusmn;10&deg;)</strong><br />
	S Four Multifunction DIO Pins<br />
	S SPI Interface</p>
<p>S -40&deg;C to +85&deg;C Industrial Temperature Range&nbsp;</p>
<p>You can read the voltages and current freq etc through the spi interface as well as setup the amount of pulses per power etc.&nbsp;</p>
<p>Its the one to go for if you want to have a shiny emon&nbsp;displaying lots of wonderful figures.but mayby a little OTT if you want something to work out if your buckets full and its time to turn off your SSR.</p>
<p>And all for &pound;2.20 how do they do it&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12804"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Mon, 10/06/2013 - 06:21.</div>
    <div class="content">
     <p>These things are amazing for the price, aren&#39;t they?&nbsp; Given the performance and price it hardly seems worth tying up much of the processing power of something like an Arduino just to take energy measurements, especially as the A-Ds and sampling rate with an Arduino are always going to give far worse instantaneous measurement accuracy.</p>
<p>The only real downside with these chips seems to be that the vast majority are only available as surface mount, which makes them less useful for DIY projects IMHO.&nbsp; There are still some around in DIP packages,&nbsp; although these seem to mainly be the older, less capable, devices.&nbsp; Having said that, even the old AD7755 chips I&#39;ve acquired are pretty good, with the exception of not having a means of correcting for externally introduced phase errors.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12806"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Mon, 10/06/2013 - 07:16.</div>
    <div class="content">
     <p>Nice job on the PCB Jeremy.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12810"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1775.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1775.html" title="View user profile.">Brian D</a> on Mon, 10/06/2013 - 09:08.</div>
    <div class="content">
     <p>Very neat and only two wire links!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12814"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Mon, 10/06/2013 - 11:12.</div>
    <div class="content">
     <p>Thanks for the kind words, folks.&nbsp;</p>
<p>I&#39;m still testing it, but so far it seems to be working as designed.&nbsp; Here&#39;s a photo of the completed prototype diverter working on my test rig.&nbsp; Note that all the stuff inside the black outlined area at the top is just the PV generation and load simulation stuff for testing, the actual diverter circuitry is just the circuit board plus the solid state relay and the CT.</p>
<p>
	<img alt="" src="../../../farm3.staticflickr.com/2863/9005981078_6b5b65e92c_z.jpg" style="width: 401px; height: 640px;" /></p>
<p>I managed to take a photo whilst the LED on the SSR was lit - got to have at least one blinking LED in any project...................</p>
<p>It&#39;s fairly small, so should fit in a box that will be easy enough to hide away by the consumer unit somewhere.&nbsp; The circuit board is 108mm long, 66mm wide and 35mm tall, and the only other thing to fit inside the box will be the SSR plus some terminal block to make it easier to connect up.&nbsp; I think I&#39;ll leave the CT connection as the PCB mounted terminal block, rather than add a 3.5mm jack socket to the case.</p>
<p>The next stage is to build the display module, not needed for the basic diverter to work, but perhaps nice to have.&nbsp; This will plug in to the 5 way white connector on the board, and won&#39;t need any other connections.&nbsp; I&#39;m still undecided on the data to display, but think that an LCD that just keeps tally of total import and total export (with the running totals stored in EEPROM if there&#39;s a power failure) plus a display showing current power and direction should be about right.&nbsp; I could very easily add a 433MHz transmitter module, too, to allow another remote display or some other bit of kit to use the same measured data as the diverter is using.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12815"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Mon, 10/06/2013 - 11:54.</div>
    <div class="content">
     <p>As far as DIY goes I afraid the end seems to be neigh -</p>
<p><a href="http://solarimmersion.co.uk/" title="http://solarimmersion.co.uk/">http://solarimmersion.co.uk/</a></p>
<p>The new version seems to be based on an anti flicker program, with multiple outputs, all seems very familiar and the price is getting better although it&#39;s plus VAT. I have to admit it looks good.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12816"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Mon, 10/06/2013 - 11:56.</div>
    <div class="content">
     <p>Hi I am not sure whether your picaxxe does <strong>Time</strong> but if you take the Low Voltage AC to one of the digital io pins via a 3k resistor if you have a spare pin. then you have a 50hz&nbsp;clock. Count the pulses to say (86400*50) IE a day and you have power today power yesterday power last hour power last min etc with very little memory use, and almost no additional hardware.&nbsp;</p>
<p>&nbsp;</p>
<p>PS on the Atmel the IO pins ore clamped to ground an 5v&nbsp;via diodes check this is the case with the PIC device.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12817"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Mon, 10/06/2013 - 12:36.</div>
    <div class="content">
     <p>Nice to see the price of commercial products coming down, especially if that reduction has been driven by openly published information from DIY projects showing just how over-priced some of the original products were.&nbsp; Mind you, paying the best part of &pound;275 still seems a lot, given that there&#39;s only around &pound;30 of parts in that box.</p>
<p>Time is easy, as there&#39;s an internal TIME variable updated once per second that can be read.&nbsp; No real need for any connection to AC to derive a timebase.&nbsp; It&#39;s not super accurate, as it&#39;s reliant on the stability of the internal clock resonator, but is fine for keeping track of time for a day or so.&nbsp; PIC pins are protected in the same way as Atmel pins, with internal diodes to the rail and ground, so a series current limiting resistor can be used in the same way.&nbsp; I could also store values in the internal EEPROM if need be, to protect from power failure causing a data loss, but to avoid too many EEPROM writes (I think it&#39;s good for a few hundred thousand)&nbsp; early power fail detection is required.&nbsp; I&#39;ve built this is, by adding a potential divider across the unregulated DC supply.&nbsp; As soon as the unregulated supply dips below a set threshold (as read by an A/D) it switches to data save mode and stores values from key variables to EEPROM, ready to be read and re-used when power comes back on.&nbsp;</p>
<p>I&#39;ve used the same technique to make a battery state-of-charge remaining indicator for my electric bike.&nbsp; That monitors current drawn by the bike motor and keeps track of Ah of battery capacity used.&nbsp; When the bike is switched off the circuit detects this before the 5V rail shuts down (it takes a few tens of mS for the 5V rail to collapse, plenty of time to do a lot of stuff)&nbsp; and saves the current battery capacity to EEPROM.&nbsp; Next time the bike is powered on the circuit reads the remaining battery capacity from EEPROM, sticks it in volatile memory and carries on subtracting capacity again.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12819"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Mon, 10/06/2013 - 13:39.</div>
    <div class="content">
     <p>I find I have to adjust my software&nbsp;RTC in the Arduino&nbsp;pro mini by 1 sec every 1 Hour and 20 Mins. A drift of 200 PPM my raspberry pi tweeks it if it drifts more than 2 secs&nbsp;from &quot;Real Time&quot;. Apparently the power companies do the same if the time drifts by 20 seconds at 8AM each day. They adjust the the frequency the next day by 10mHz I just thought as you had the timebase there if you waned to display the time its a &quot;Reasonable&quot; accurate source.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12820"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 10/06/2013 - 14:12.</div>
    <div class="content">
     <p><em>&quot;Apparently the power companies do the same if the time drifts by 20 seconds at 8AM each day.&quot;</em></p>
<p>I&#39;m not sure that is correct. Frequency falls when the system is heavily loaded and I believe it is allowed to rise when the system is lightly loaded so that &quot;system time&quot; (by counting cycles) remains as close as possible to UTC. National Grid aim to keep within &plusmn; 0.2 Hz. As I write, it is 50.089 Hz (<a href="http://www.nationalgrid.com/uk/Electricity/Data/Realtime/Frequency/" title="http://www.nationalgrid.com/uk/Electricity/Data/Realtime/Frequency/">http://www.nationalgrid.com/uk/Electricity/Data/Realtime/Frequency/</a>)</p>
<p>The main reason for this was so that clocks driven by synchronous motors would keep accurate time from day to day - presumably the rationale still applies as the majority of appliances with built-in clocks are still of the cycle-counting sort.</p>
<p>If you use MartinR&#39;s excellent PLL sketch <a href="../sites/default/files/phase_lock_50hz.html" title="http://openenergymonitor.org/emon/sites/default/files/phase_lock_50hz.ino">http://openenergymonitor.org/emon/sites/default/files/phase_lock_50hz.ino</a>, you can watch the frequency fall as demand rises, then suddenly there is a sharp rise as another set is brought on-line. The reverse happens as demand falls again, there&#39;s a sharp drop as each set is taken off-line. It is even clearer if you save the numbers to a spreadsheet, or you can download historical data from <a href="http://www.gridwatch.templar.co.uk/" title="http://www.gridwatch.templar.co.uk/">http://www.gridwatch.templar.co.uk/</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12821"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Mon, 10/06/2013 - 14:28.</div>
    <div class="content">
     <p>I&#39;ve always understood that frequency was allowed to drift just as you say, but that if averaged over 24 hours it was pretty close to spot on 50 Hz, just to keep synchronous motor driven clocks accurate in the long term.</p>
<p>For this application I&#39;m not sure I need anything more accurate than &quot;in about the last day XX kWh was imported/exported&quot;.&nbsp; I may not even bother with that, as if I transmit power data over a 433 MHz link I can log anything I need on a platform better suited to storing and analysing data.</p>
<p>I&#39;m inclined to just put a cheap and cheerful import/export totaliser display, plus an indication of current power and direction on this box, as it&#39;ll be tucked away in the meter cabinet, pretty much out of sight most of the time.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12822"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1774.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1774.html" title="View user profile.">PaulOckenden</a> on Mon, 10/06/2013 - 15:06.</div>
    <div class="content">
     <p>Are those mains wires connected to the SSR man enough for the job? An immersion is quite a heavy load, and those wires look a little on the thin side...</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12823"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Mon, 10/06/2013 - 15:10.</div>
    <div class="content">
     <p>I remember seeing this from <strong>&quot;UCTE (Union for the Co-ordination of Transmission of Electricity)&quot;</strong></p>
<p>On short term (seconds to hours), several mechanisms are employed that continuously try to keep the frequency as close as possible to 50.0000 Hz, but that do not consider the phase (i.e., clock error).<br />
	As long as the deviation between the true time and the time indicated by a mains-driven clock is less than 20 seconds, observed at 8 o&#39;clock in the morning, no further measures are taken.<br />
	When that deviation exceeds 20 seconds, a correction is scheduled: during the next day (from midnight to midnight) frequency regulators in the entire zone will be set to 10 mHz higher or lower than the normal 50.0000 Hz. Ideally, this results in a correction of 17.28 seconds.<br />
	The above should normally keep the deviation within about 30 seconds. Only if the deviation exceeds 60 seconds are larger corrections than 10 mHz allowed.</p>
<p>But Apparently you are correct the UK and US are not part of this system. So time to throw out the mains motor clocks.</p>
<p>Something else I learned today is that the new interconnects between UK and Europe are high voltage DC.</p>
<p>Anyhow I think we have drifted more than 20 seconds from the original topic. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12824"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ffimon&#039;s picture" title="ffimon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by ffimon (not verified) on Mon, 10/06/2013 - 15:16.</div>
    <div class="content">
     <p>I think he is using a simulated load not his immersion&nbsp;heater.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12826"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Mon, 10/06/2013 - 15:59.</div>
    <div class="content">
     <p>Yes, this is just a test rig with simulated loads.&nbsp; To simulate 12A going through the immersion heater I&#39;m using the SSR to switch a small mains transformer, the output of which feeds a couple of big resistors.&nbsp; I&#39;ve wound 10 turns from the loaded output around the CT, so when 1.2A flows through it the CT thinks it&#39;s seeing 12A.&nbsp; The SSR is only actually switching about 25mA, because of the transformer ratio.</p>
<p>This was my cunning plan to be able to simulate various loads, or PV generation, without generating loads of heat from running real mains heaters.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12831"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2867.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="9fingers&#039;s picture" title="9fingers&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/2867.html" title="View user profile.">9fingers</a> on Mon, 10/06/2013 - 17:50.</div>
    <div class="content">
     <p>You can see virtually real time frequency and a whole lot more for UK power grid here</p>
<p>&nbsp;</p>
<p><a href="http://www.gridwatch.templar.co.uk/" title="http://www.gridwatch.templar.co.uk/">http://www.gridwatch.templar.co.uk/</a></p>
<p>&nbsp;</p>
<p>Bob</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13849"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1088.html" title="View user profile.">fewyatt</a> on Mon, 29/07/2013 - 09:00.</div>
    <div class="content">
     <p>Interesting design but how likely it is that even the above mentioned anti-flicker code results in meeting all relevant flicker and EMC standards?&nbsp; At the above quoted 500 W export and no import, the SSR turns on for 0.7 sec, then turns off for 5.5 secs. That is about 10 changes a minute or 20 if both on and off are defined as a change.&nbsp; My reading of the flicker spec curve on page 13 here <a href="http://www.reo.co.uk/files/handbook_en_61000-3-3_and_en_61000-3-11.pdf" title="http://www.reo.co.uk/files/handbook_en_61000-3-3_and_en_61000-3-11.pdf">http://www.reo.co.uk/files/handbook_en_61000-3-3_and_en_61000-3-11.pdf</a> shows that this is not compliant as it needs to be less than about 2. In fact it is worse than that as there is 0.65 factor that needs to be applied to the&nbsp;Y axis for equipment on for long periods, which perhaps means you need to be slower than 1 change per minute. Also according to Crydom even a fully on SSR fails domestic EMC standards due to the zero crossing distortion in it.</p>
<p>I have removed my PIC based homebuilt unit, that was based on a bucket idea and put in a commercial phase controlled unit instead, partly because I was concerned about flicker in my neighbour&rsquo;s houses.</p>
<p>Not that all commercial units appear to fully comply with the EMC, flicker and safety standards that they should do. One a friend looked at gives a nasty hundreds of volts shock when you touch the CT wire if not plugged into the unit as there is no burden resistor fitted and the market leader fails the flicker spec.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13855"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Fri, 26/07/2013 - 20:19.</div>
    <div class="content">
     <p>The wheel is round and was invented some time ago.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13858"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 26/07/2013 - 21:37.</div>
    <div class="content">
     <p>Hi Fewyatt, what unit have you installed instead, and how does it differ?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13859"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1088.html" title="View user profile.">fewyatt</a> on Mon, 29/07/2013 - 09:06.</div>
    <div class="content">
     <p>Paul, it is an Intelligent Immersion model I2. The I2 is not a burst fire unit and says it meets all relevant EMC and flicker standards. Certainly my lights have stopped flickering; my burst fire unit was bad at this.</p>
<p>I have adjusted the export down to about 10W as the latest software version has adjustment of export from a front panel switch.&nbsp;I tried it at zero too but I have a wheel meter that registers very low powers so best to be a bit cautious and stick at 10W. I would adjust it to zero if I had a digital meter, which I think have some deadband around zero so don&rsquo;t record small imports or exports &ndash; I heard 20W mentioned somewhere.</p>
<p>The unit responds quickly, so within &frac12; second of a kettle being switched off the wheel stops dead.<br />
	What unit do you have installed these days as I seem to remember you had your own design some time back?<br />
	Sorry Jeremy this is very off topic but you did raise the subject of commercial units.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13860"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 27/07/2013 - 00:20.</div>
    <div class="content">
     <p>Fewyatt&nbsp;(Frank?), I see from&nbsp;<a href="http://whois.domaintools.com/intelligent-immersion.org">http://whois.domaintools.com/intelligent-immersion.org </a>that the domain name is registered to you, Edward.</p>
<p>I sincerely hope that you are not promoting your own<u> <strong>commercial product </strong></u>whilst trying to degrade the excellent work done by the OEM team, and especially Robin who has made a considerable contribution to this <strong>open source</strong> project?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13863"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1088.html" title="View user profile.">fewyatt</a> on Mon, 29/07/2013 - 09:10.</div>
    <div class="content">
     <p><em>What unit have you installed instead, and how does it differ?</em></p>
<p>Thought I was just answering your question.</p>
<p>Excellent OEM work here and I have enjoyed the threads. I had a self built one installed a while back and then adapted it to Robin&rsquo;s burst fire routine, but ultimately I decided it was safer to go with a commercial product as there is no risk of my insurer washing his hands if the product caused a fire etc. and I was worried about the flicker.</p>
<p>But it&rsquo;s your own choice and lots of people seem to have successfully gone down the self build route which will still save money. I wish them well as were it not for them I suspect we would still be in a market where I&rsquo;d be trying to justify the large price of an EMMA to myself.&nbsp; Rumour is that some of the commercial products may have used ideas from this and other similar forums to design their products although see nothing in the I2 that came from this forum.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13867"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 27/07/2013 - 10:55.</div>
    <div class="content">
     <p>fewyatt, let me be blunt...</p>
<p>Are you in fact &nbsp;Edward Chase, the owner of&nbsp;INTELLIGENT IMMERSION LTD, and owner of domain names <a href="http://www.intelligent-immersion.co.uk/" title="www.intelligent-immersion.co.uk">www.intelligent-immersion.co.uk</a> &amp; <a href="http://www.intelligent-immersion.org/" title="www.intelligent-immersion.org">www.intelligent-immersion.org</a> ?</p>
<p>If so, why are you signing your posts in this forum as Frank, and purporting to be a happy customer of a <a href="http://companycheck.co.uk/company/08271212/INTELLIGENT-IMMERSION-LIMITED#contact-details" target="_blank">commercial company</a>, when in fact you own it?</p>
<p>If this is true, then you should come clean, otherwise your intentions may be misconstrued.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13869"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1088.html" title="View user profile.">fewyatt</a> on Sat, 27/07/2013 - 12:44.</div>
    <div class="content">
     <p>I know him so perhaps I should have made that clear. I&rsquo;ll b..&hellip;.r off as it is confusing this excellent thread by irrelevant stuff, although Jeremy did first raise the topic of commercial units.&nbsp; You won&rsquo;t hear from me again as I have nothing more to contribute on self build units.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13873"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 27/07/2013 - 14:00.</div>
    <div class="content">
     <p>It seems we have a problem of ethics here. If Intelligent Immersion Ltd is using this site as a free source of design ideas and a free consultancy service, then the moral thing to do is contribute say 5% of turnover towards the running costs of the site.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13874"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Sat, 27/07/2013 - 14:13.</div>
    <div class="content">
     <p><em>&quot;You won&rsquo;t hear from me again as I have nothing more to contribute on self build units&quot;</em></p>
<p>Or nothing more to gain?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13875"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 27/07/2013 - 15:12.</div>
    <div class="content">
     <p><em>fewyatt: I have removed my PIC based homebuilt unit, that was based on Robin&rsquo;s bucket idea and put in a commercial phase controlled unit instead, partly because I was concerned about flicker in my neighbour&rsquo;s houses.</em></p>
<p>&quot;Robin&#39;s bucket idea&quot; does not generate &quot;flicker&quot;.&nbsp; Flicker only appears when an output device is used in burst-fire mode in order to balance consumption with generation.&nbsp; If flicker is seen to be a problem, then why not use the phase-angle variant that I posted several months ago?&nbsp;</p>
<p>As for home-sourced components, my original BTA41 triac is still going strong.&nbsp; Although the hardware that surrounds it has been re-worked on several occasions, this all-important component has never been changed.&nbsp; It has also never had the benefit of a proper heatsink - just an offcut of ali tube - so may well be running hotter than it should.&nbsp; But, like Voyager 2, it just keeps on going.</p>
<p>Most of my components these days come from Spiratronics, whose service is superb.&nbsp; I ordered some bits from them online yesterday morning (Friday) and the pack appeared in the post this morning.</p>
<p>As far as the use of this open-source site is concerned, I think it is only fair that everyone is open and honest about their background and interests.&nbsp; My own contributions, and those of many others, should not be used to spread bad press about &quot;home engineering&quot;.</p>
<p>RE</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13882"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sat, 27/07/2013 - 19:57.</div>
    <div class="content">
     <p>I&#39;ve been prompted to return here, as I&#39;ve been informed that Edward Chase and his unethical spamming practice has spread here from another forum, and wish to apologise for inadvertently having provided him with a way to continue his unethical sales practices.&nbsp; A friend linked to this thread&nbsp; on the Green Building forum yesterday (see here, halfway down that page, a post by &quot;Steamy Tea&quot;: <a href="http://www.greenbuildingforum.co.uk/forum114/comments.php?DiscussionID=9487&amp;page=2" title="http://www.greenbuildingforum.co.uk/forum114/comments.php?DiscussionID=9487&amp;page=2">http://www.greenbuildingforum.co.uk/forum114/comments.php?DiscussionID=9...</a>) , in reply to a blatant bit of spam advertising by Edward Chase from Intelligent Immersion Ltd, and lo and behold the spammer appears here, using a false identity.</p>
<p>The product being promoted here on the thread I started to discuss my own DIY project uses phase control and is inherently nasty, in my person opinion, from an engineering perspective.&nbsp; Yes, you can filter the worst of the artifacts that phase control creates, but it&#39;s still a fairly horrid way to control a fair bit of power.&nbsp; As a company, I&#39;d not deal with Intelligent Immersion Ltd on a point of principle, as they blatantly spam any forum they can to try and get free advertising.&nbsp; So far I&#39;ve seen this company try this trick on three forums, each time they get banned or told off, yet still they carry on trying.&nbsp; Not a clever way to promote a product, in my view, as it tends to alienate the very people they are trying to sell to.&nbsp; Certainly I advise people to NOT buy this product, purely because, along with many others, I do not like the way they&#39;ve spammed several forums I frequent.</p>
<p>My unit did get properly engineered into an enclosure, and as I used to run an EMC test facility and was the head of type approval for all UK marine radio, radar and navigation equipment years ago (and was, in fact, a Notified Body for approval under the EMC Directive), I do understand the need for compliance with regulations and the test processes required to demonstrate them.&nbsp; If anyone here is still interested in a non-Arduino solution then I can post details here of my completed unit.&nbsp; It ended up with a simple display and a 433Mhz data link to send power data out to any other device, like a logger or another display.&nbsp; I stopped posting here as I was a bit concerned that some were unhappy with discussion of a non-Arduino approach.</p>
<p>I am quite happy to provide full details of my unit, with the final code etc, if anyone else wants to build one.&nbsp; I&#39;d strongly recommend the approach that Robin has come up with, as in my view it is technically far superior to the rather nasty way that one or two of the commercial units operate.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13884"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="oldbod&#039;s picture" title="oldbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by oldbod (not verified) on Sat, 27/07/2013 - 20:40.</div>
    <div class="content">
     <p>Hi All, new member, been reading beforehand though.</p>
<p>Prompted to join by this thread; first thing, BIG thank you to everybody who has spent so much time and effort to create such a great resource.&nbsp;&nbsp;Every time I read a thread it amazes me that people find the time to post with such clarity about their own stuff, and even more so to respond so quickly and fully to others.&nbsp; So thank you,&nbsp;calypso_rae and Robert Wall and richmc and Paul Reed and everybody else.</p>
<p>Got interested in Immersion Controllers specifically because I have a friend who can use one, and the commercial units seemed ridiculously expensive often for very limited functionality.&nbsp;&nbsp;And no fun for me.&nbsp;</p>
<p>I do have a concern about &quot;flicker&quot;, just because I&#39;ve seen the reference to how often loads can be switched before and don&#39;t want my friend to&nbsp;be getting a visit because&nbsp;a neighbour&#39;s lights keep dimming or whatever,&nbsp;so I&#39;ve been thinking about a phase control unit, but then you need a filter and that&#39;s expensive.&nbsp;I&#39;d prefer the zero cross option because it seems a more elegant solution&nbsp;better&nbsp;matched&nbsp;to needs.&nbsp; &nbsp; So, my question is, does anybody know how the commercial units do it (two way street...) and in practice, am I worrying about nothing..&nbsp;&nbsp; after all, my 2.2KW vacuum cleaner has triac control...</p>
<p>Sorry not a complete post - thought I was saving a draft.... newbies!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13885"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sat, 27/07/2013 - 21:03.</div>
    <div class="content">
     <p>The commercial units either use burst fire, which tends to cause flicker if the line impedance is on the high side, or they use phase control, which tends to cause interference unless the unit includes extremely good filters (and even then the waveform distortion phase angle control creates is problematical for some other appliances and measurement devices).</p>
<p>Robin&#39;s &quot;energy bucket&quot; idea is inherently free from any flicker, and is an elegant way to perform this power diversion function, which is the main reason I decided to use his idea and build the variant of his diverter described in this thread (the main threads are the one started by Robin, describing his mk2, which uses an Arduino).</p>
<p>It is worth putting the flicker problem into perspective, though, as it may not ever be a significant problem for many.&nbsp; For a start, flicker only really occurs if you happen to have a reasonably high line impedance, so will be worse for those on the end of a long cable, for example.&nbsp; Secondly, flicker only occurs when the unit is operating, which will only be when the generated PV is greater than the house load, which implies that the weather is bright and sunny.&nbsp; Few people will be using lights under these conditions.</p>
<p>If you want an inherently flicker free, and inherently clean (in terms of potential interference and waveform distortion) unit, then I would strongly recommend either just building Robin&#39;s Mk2 or one of the alternatives that use the same principle, like the unit I&#39;ve described in this thread.</p>
<p>I would very strongly advise against buying the Intelligent Immersion unit, mainly on a point of principle over their advertising antics, but also because it uses phase angle control.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13891"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="oldbod&#039;s picture" title="oldbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by oldbod (not verified) on Sun, 28/07/2013 - 07:53.</div>
    <div class="content">
     <p>Agree entirely on the ethics front - to post without declaring an interest is completely unacceptable in my view.</p>
<p>I&#39;d be very&nbsp;interested to see full details of your unit as I&#39;ve had similar thoughts in the past, and what I&#39;m aiming for here is cheap&nbsp;and fit for purpose.&nbsp;&nbsp; I fully understand why so&nbsp;many use the arduino platform; I too am an old-time programmer starting&nbsp;from the days of cards and paper tape, I&#39;ve learnt only to reinvent the wheel when I have time to spare.&nbsp;&nbsp; The functionality that was originally in the openenergymonitor &quot;stuff&quot; really lends itself to being converted to this,&nbsp; and all the hard work going from there to a working solution has been done by those I thanked in my earlier post - and once familiar with that and running a hardware platform you may as well stick with it as it makes developing other related functions and test suites so much quicker.</p>
<p>For me starting from scratch (component wise) I can go either way.&nbsp; I think the Arduino is an excellent platform, but some of the issues I&#39;ve read about here do involve working around its limitations on the ADC front.&nbsp; My impression is that it&#39;s not the sample rate so much as the need to get voltage and current readings as close to simultaneous (on a chip that uses mux&#39;d channels)&nbsp;as possible that is the problem.&nbsp; Everything else should just fit round that really easily.&nbsp;&nbsp; Thought about using a dedicated adc too....,but would really like to see info on your setup.&nbsp;&nbsp;&nbsp;</p>
<p>Sorry but I&#39;m still&nbsp;not really clear on the &quot;flicker&quot; front , partly from a legislative perspective.&nbsp; Seems to me that the less you switch the fewer &quot;trigger points&quot; for interference&nbsp;of all types there are, so that&#39;s what to aim for.&nbsp;That&#39;s what you and Robin do. Isn&#39;t this a sort of extended version of burst firing?&nbsp;&nbsp;</p>
<p>What I don&#39;t see is how this fits inside the &quot;allowed number of&nbsp;off/on transitions&quot; that are mentioned in document above - and I&#39;ve come across elsewhere.&nbsp;&nbsp; (Though unless phase angle control isn&#39;t switching, seems to me that should be included too!)</p>
<p>Would your advice be just to go for it, and deal with any problems to do with line impedance only if proves to be an issue? Perhaps by switching to one or more lower value elements as a first step....</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13893"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Sun, 28/07/2013 - 08:10.</div>
    <div class="content">
     <p><em>Robin&#39;s &quot;energy bucket&quot; idea is inherently free from any flicker</em></p>
<p>Why do you say that Jeremy? It&#39;s just as&nbsp;susceptible to flicker as any other burst fire system.</p>
<p>Also, while it&#39;s true that flicker is only present when the sun&#39;s out, you still notice it in things like fridge and microwave lights or any other lights in dark places like cupboards.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13895"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 28/07/2013 - 08:44.</div>
    <div class="content">
     <p>I suppose it depends on your definition of flicker.&nbsp; Take a typical cooker energy controller, for example (the type used to control the power on hotplates etc).&nbsp; This switches the power on and off with a varying duty cycle (often not on a zero crossing, either) at the same sort of rates as the energy bucket system, i.e. an energy pulse every few seconds or so, depending on selected power.&nbsp; This is a sort of burst fire control, but at a much slower rate than conventional zero crossing burst fire as used in triac based control systems.</p>
<p>We&#39;ve lived with crude power control systems like this for tens of years (pretty much every resistance heating hotplate uses it), and I&#39;ve never seen a noticeable effect on lighting from them.&nbsp; This very strongly suggests that switching power in bursts at this slow rate has little or no disturbing visual effect.</p>
<p>On the other hand, diverter systems using plain burst fire triac control, like the Immersun for example, are known to cause disturbing flicker effects on lighting, as it&#39;s been quite widely reported.&nbsp; This seems to be because they switch at much faster rates, rather like the way the Carlo Gavazzi controller does when in burst fire mode.&nbsp;&nbsp; The Immersun, for example, seems to pulse several times a second, rather than once every few seconds, and I think this is the main difference in terms of perceived nuisance.&nbsp; Our eyes seem quite sensitive to flicker at some low frequencies, probably because of the ancient correlation between fast movement and threat that&#39;s hard wired into our brain/optical system.</p>
<p>Whether flicker presents a significant problem very much depends on the impedance of the supply line and the particular installation.&nbsp; If you&#39;re unlucky enough to live near the end of a LV feed, some distance from the nearest substation, then the possibility of getting noticeable flicker will be higher than if you&#39;re near a nice fat cable just a short distance from a sub-station.&nbsp;</p>
<p>It&#39;s easy to do a subjective test to see whether flicker is going to present a problem or not in a particular installation.&nbsp; Just place a light somewhere where you can see it from the immersion heater switch and switch the immersion on and off a few times and watch what the light does.&nbsp; In most cases there may be a barely perceptible change as the immersion is switched on and off, in some cases the change may be more pronounced.&nbsp; You can even simulate how an energy bucket controller might appear, just by switching the immersion on and off at the sort of duty cycle I mentioned above and seeing how disturbing it might be.</p>
<p>If it&#39;s just a matter of a bit of flickering in the fridge light then frankly I don&#39;t think I&#39;d be too bothered.&nbsp; What would be more of a concern would be flicker in things like workshop or desk task lighting, where flicker could be quite a nuisance.&nbsp; It all comes down to perception of nuisance, something that will vary a lot.</p>
<p>I&#39;ll take some photos of my finished unit and post the circuit and code later, by way of closing off this particular energy diverter project.&nbsp; The basic unit has no display, it just diverts power to an immersion whenever there is an excess.&nbsp; The display and radio data link section is completely separate, and just shares the raw energy data from the AD7755 meter front end chip to provide a bit of user feedback on what&#39;s going on.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13896"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Sun, 28/07/2013 - 09:17.</div>
    <div class="content">
     <p>Flicker is really a moot point, the diverter is switching whilst the sun is out ego no lights on to flicker, the only instance I have experienced is in my downstairs loo that is under the stairs and then I only detected it once it was mentioned on the forum, unless you (or your neighbors) live in a cave you have no worries. Incidentally I see the same flicker effect whilst my wife is using the iron.</p>
<p>Remember Robin has several versions of the software you can play with to find one that satisfies your needs, that&#39;s one of the best reasons for using the arduino, it&#39;s ease of reprogramming.</p>
<p>Now the absolutely blatant but non commercial plug with the blessing of the forum group, I still have kits, boards and built up modules available.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13897"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 28/07/2013 - 09:39.</div>
    <div class="content">
     <p><em>&quot;that&#39;s one of the best reasons for using the arduino, it&#39;s ease of reprogramming.&quot;</em></p>
<p>Other in circuit programmable microcontrollers are available...................... :)</p>
<p>The unit described here could be reprogrammed in a few minutes to operate in a different mode, via the programming header on the board.&nbsp; The Arduino is a nice bit of kit, but expensive if all you need is a very simple programmable microcontroller.&nbsp; The code needed to do this immersion control is so simple, and needs so little processing power, that using an Arduino seems to me to be a bit of an overkill, when a very cheap 8 pin microcontroller will do the job for around 15% of the cost.</p>
<p>Nice that kits for Robin&#39;s design are are available, though, as it makes it a lot easier for people to build units up.&nbsp; I&#39;ve not got the time to do something similar, but anyone&#39;s welcome to copy my efforts if they wish, but it would involve more work than just assembling a kit or building a unit up from pre-assembled modules.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13898"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Sun, 28/07/2013 - 10:28.</div>
    <div class="content">
     <p>Commerce: Noun, the activity of buying and selling.</p>
<p>I think your activities qualify on that definition Rich &ndash; perhaps you meant non-profit? Either way I think advertising your wares on someone else&rsquo;s thread is perhaps a step too far.</p>
<p>Jeremy has a perfectly valid point that PIC chips might offer a cheaper alternative to using an Arduino (as does using the Atmel chips by themselves) and any of Robin&rsquo;s sketches could easily be re-targeted to PIC by anyone with PIC experience.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13899"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Tinbum&#039;s picture" title="Tinbum&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/2888.html" title="View user profile.">Tinbum</a> on Sun, 28/07/2013 - 10:48.</div>
    <div class="content">
     <p><em>Now the absolutely blatant but non commercial plug with the blessing of the forum group, I still have kits, boards and built up modules available.</em></p>
<p>Rich, I would like 3 of your input pcb&#39;s and sent you a pm but you never replied.</p>
<p>&nbsp;</p>
<p>I have been using Robins Mk2i code for some months now and it has proved to be absolutely fantastic and totally reliable and I&#39;ve not noticed any flicker at all. The only thing&nbsp;I wish is that&nbsp;I could run the air sourced heat pump&nbsp;I bought for the kids pool off it.</p>
<p>Some years ago when&nbsp;I lived in a small village&nbsp;I was on the receiving end of flicker which was very very annoying. It used to occur every morning from about 6.30am&nbsp;for a few hours with brief spells where it would stop for a few minutes.&nbsp;It&nbsp;could best be described as the lights strobeing many times a second.&nbsp;It took the DNO some months to find what was causing it. They only actually realized what it was when the same problem occurred in a smaller village than ours and they found the faulty item there and remembered seeing the same item in a house in our village. I can&#39;t remember exactly what it was other than some type of &#39;range&#39; that was also used for heating.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13903"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 28/07/2013 - 14:57.</div>
    <div class="content">
     <p>As promised, here is the information on the basic diverter, less the optional display module.&nbsp; (edited as I&#39;ve just realised that code tags don&#39;t work here!)</p>
<p><img alt="" height="574" src="../sites/default/files/Power%20diverter%20-%20cover%20off.jpg" width="766" /></p>
<p>The code is in text format and can be directly copied into the free Picaxe programming editor.</p>
<p>&nbsp;</p>
<p>
	<img alt="" height="540" src="../sites/default/files/PV%20power%20diverter%201.0.jpg" width="805" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13907"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Sun, 28/07/2013 - 15:32.</div>
    <div class="content">
     <p>Tinbum you have PM, not got your original message. if you were to run the rev 5 code I beleve there is an option for switched outputs so writing in a degree of hysterisis so the heat pump isn&#39;t constantly switching in and out would do the trick, the &quot;how to&quot; you would need to ask Robin, I&#39;m thinking of doing the same with air con if and when I move house.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13908"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Sun, 28/07/2013 - 16:17.</div>
    <div class="content">
     <p><em>&quot;I think your activities qualify on that definition Rich &ndash; perhaps you meant non-profit? Either way I think advertising your wares on someone else&rsquo;s thread is perhaps a step too far.&quot;</em></p>
<p>Martin, as you have noted I produce these kits to help others make their Mk2s, not for profit,&nbsp;as the OP has said in his last post he has no intention of producing these units as kits or boards. As for thread hijacking take a look at my &quot;Robins Mk2 for sale thread&quot; and the direction that went. If JSHarris had said he was going to produce kits I would not have posted that line. I may well offer to etch his boards if he agrees for sale on the forum if there is enough interest.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13909"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 28/07/2013 - 16:18.</div>
    <div class="content">
     <p>Jeremy, that&#39;s a nice looking build with good HV isolation. You&#39;ve obviously done this sort of work before!</p>
<div>
	Thanks for sharing.</p>
<div>
		&nbsp;</div>
<div>
		Paul</div>
</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13910"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Sun, 28/07/2013 - 16:55.</div>
    <div class="content">
     <p>Thanks for the kind words.&nbsp; Here&#39;s a few photos of the small 8 character x 2 line display and RF data board that sits in the lid:</p>
<p><img alt="" height="510" src="../sites/default/files/Front%20panel.jpg" width="680" /></p>
<p><img alt="" height="518" src="../sites/default/files/Display%20-%20rear.jpg" width="681" /></p>
<p><img alt="" height="499" src="../sites/default/files/Display.jpg" width="612" /></p>
<p>I haven&#39;t finished tinkering with the display code yet, nor have I drawn up a schematic, but in essence the display board just uses the raw data from the AD7755 independently of the diverter and shows/records power and import/export status.&nbsp; The 5 pin connector that plugs in to the diverter board provides the 5V supply and the two data lines from the AD7755, plus a voltage sense line.&nbsp; The latter can be used to detect a power outage before the 5V rail has time to collapse and enable EEPROM storage of any running total data, which c an then be read back when the power comes back on, so avoiding the loss of any historical data.</p>
<p>The 433MHz antenna isn&#39;t fitted yet, but will be a strip of copper tape stuck on the inside face of the box lid and covered with a bit of kapton insulating tape.&nbsp; At the moment the data link is just transmitting the corrected raw power data (power in watts and direction) as a Manchester encoded data stream.&nbsp; This can then be used by anything that can receive and decode data in this format.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13916"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="oldbod&#039;s picture" title="oldbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by oldbod (not verified) on Sun, 28/07/2013 - 20:08.</div>
    <div class="content">
     <p>Jeremy</p>
<p>Thanks very much for taking the time to do this, and in such detail.&nbsp; Hugely helpful.&nbsp;Just need to find time to produce the pcb (learning curve, never done one before) and I&#39;ll be off.&nbsp;&nbsp;&nbsp; At the risk of asking to be spoonfed, could I ask a couple of things please?</p>
<p>&nbsp;</p>
<p>Do you remember where you got the enclosure (just being lazy) and does it get warm at all?&nbsp; I can see the mounting plate would act as a hefty heat sink/spreader, and I guess at 100% duty cycle there&#39;s only perhaps 15-20watts to dissipate...</p>
<p>Thanks again</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13920"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3829.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JSHarris&#039;s picture" title="JSHarris&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3829.html" title="View user profile.">JSHarris</a> on Mon, 29/07/2013 - 07:37.</div>
    <div class="content">
     <p>Thanks, the case is from Rapid Electronics: <a href="http://www.rapidonline.com/Mechanical-Fastenings-Fixings/Black-Large-Rectangular-Case-with-Recessed-Top-and-Base-175x145x60-30-3551" title="http://www.rapidonline.com/Mechanical-Fastenings-Fixings/Black-Large-Rectangular-Case-with-Recessed-Top-and-Base-175x145x60-30-3551">http://www.rapidonline.com/Mechanical-Fastenings-Fixings/Black-Large-Rec...</a> and was the most suitable I could find at a reasonable price.&nbsp; The SSR barely seems to get warm when running a 2kW test load, so I think it should be fine in that box.&nbsp;</p>
<p>The alloy plate is a bit of 16g mounted on the raised pillars that are moulded in to the case, so has a small gap behind which should allow air to circulate.&nbsp; If I find that it gets a bit too warm in use, then I plan to add an external heatsink to the rear, by just cutting a hole out of the back of the box and fixing a bit of flat base finned heatsink extrusion to the alloy plate.&nbsp; With the box mounted off the wall on small spacers this should work OK, I think.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13921"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 29/07/2013 - 08:57.</div>
    <div class="content">
     <p>A number of us have used aluminium boxes, suitably earthed, and bolted the SSR/Triac&nbsp; directly onto it (on the inside!), which seems to work well, and keeps cool, as it uses the entire box surface area to dissipate heat.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13928"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Mon, 29/07/2013 - 22:09.</div>
    <div class="content">
     <p>Yep, I&#39;ve done that with my pool controller which has a couple of beefy SSRs in it. &nbsp;I went further and smeared heatsink paste on the base of the aluminium box and screwed it to a concrete pillar that disappears a few metres into the ground. &nbsp;I&#39;m not sure how much the concrete helps, but it was the most convenient thing to mount to in any case.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13929"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 29/07/2013 - 23:00.</div>
    <div class="content">
     <p>Here are some numbers:</p>
<p>A Spiratronics Diecast Aluminium Box 187x118x57mm, Code: FW2-910<br />
	I did the measurements with the box flat on its back and with the lid off (because it&#39;s not getting drilled for cable entry until it&#39;s being installed). It will be mounted on the wall &quot;portrait&quot; fashion with the triacs - there are 3 for 3 tanks - on the long vertical side. I expect conduction to the lid and better convection to reduce the temperature somewhat from the values I measured. A thin layer of black paint (or better, black anodising, should also help).</p>
<p>The ambient was 18 &deg;C. I had a 2.5 kW (10 A) electric fire on it, the triac tab got up to about 55 &deg;C and the box was about 40 &deg;C under the active device, cooler elsewhere. The power should be just under 9 W from the data sheet graph, so the box works out to be about 2.4 &deg;C/W. and the junction temperature 0.6 &deg;C/W x 9 W = 55 &deg;C + 5.4 &deg;C, so about 60 &deg;C while the maximum permissible is 125 &deg;C.</p>
<p>Extrapolating those numbers to 16 A, the dissipation should be 15 W,&nbsp; so the box should get up to around 55 &deg;C, the tab 80 &deg;C and the junction 89 &deg;C - still comfortably below the maximum. But it implies the temperature inside the box will be around 55 &deg;C, which I think is OK for most components but might reduce the life of electrolytic capacitors a bit (typically, they&#39;ll have a lower max operating temperature than most other things in there).</p>
<p>I used the insulated mounting kit for the triacs and the box is earthed. It means that even if the tab becomes live, there&#39;s a second line of defence before you blow the fuse/trip the breaker. It&#39;s possible that the mounting kit can actually improve the heat transfer from tab to heat sink if the mating surface is less than perfect. And it&#39;s not as messy as heat sink compound.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20929"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6222.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="camden&#039;s picture" title="camden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/6222.html" title="View user profile.">camden</a> on Mon, 21/04/2014 - 09:56.</div>
    <div class="content">
     <p>Gentlemen</p>
<p>I am delighted that I stumbled upon this forum, which has convinced me that the commercial route is not the way to go, yet.</p>
<p>As I am no whizz-kid like most of you posters here, is there any way I can purchase a ready-built (or at least a kit with instructions) based on Robin&#39;s idea? I can solder and follow instructions but my understanding is, I am afraid, rather limited.</p>
<p>Any help would be appreciated and if there were affordable, well-designed products available based on Robin&#39;s design I would gladly part with the money but that does not seem to be the case.</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20952"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV to immersion diverter idea?</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Tue, 22/04/2014 - 02:54.</div>
    <div class="content">
     <p>Camden,</p>
<p>Robin has kits and pre-built units. Here&#39;s the link: <a href="http://mk2pvrouter.co.uk/13779.html">http://mk2pvrouter.co.uk/13779.html</a></p>
<p>I bought one of his prototypes, and can vouch for the quality of the unit. Very dependable, and well built.</p>
<p>Regards,</p>
<p>Bill</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2429"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-0gLw7eXwPGlvqIQI3X4giGgP2nUyiBQkW-C1ugWF28E" value="form-0gLw7eXwPGlvqIQI3X4giGgP2nUyiBQkW-C1ugWF28E"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
