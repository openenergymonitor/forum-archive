<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Exclude Input CT noise values before it is posted to a Feed | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/emon/sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/emon/modules/node/node.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/defaults.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system-menus.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/user/user.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/mollom/mollom.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/forum/forum.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/views/css/views.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/comment/comment.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/themes/emon3/style.css?r" />
<style type="text/css" media="all">@import "/emon/sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="/emon/" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="/emon/">Home</a> » <a href="/emon/forum">Forums</a> » <a href="/emon/forum/5">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Exclude Input CT noise values before it is posted to a Feed</h3>
        <span class="submitted">Submitted by <a href="/emon/user/8012" title="View user profile.">bruce_miranda</a> on Fri, 08/05/2015 - 22:13</span>
        <div class="content"><p>On emoncms, is there a way to exclude small values being reported by the CT, which I assume are noise, before the Input gets put into a Feed.</p>
<p>So a function like if less than 5W, ignore input.&nbsp;</p>
<p>I know I can do this within the sketch, but it seems like unnecessary&nbsp;processing.&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="/emon/node/1395" class="topic-previous" title="Go to previous forum topic">‹ Inputs OK but feeds inactive after changes on emoncms.org</a>
              <a href="/emon/node/10637" class="topic-next" title="Go to next forum topic">[SOLVED] How to troubleshoot ERROR: Feed could not be created, undefined when creating a new feed ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-30209"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/238" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Exclude Input CT noise values before it is posted to a Feed</h3>

    <div class="submitted">Submitted by <a href="/emon/user/238" title="View user profile.">Paul Reed</a> on Fri, 08/05/2015 - 22:28.</div>
    <div class="content">
     <p>Afraid not, although I agree that it&#39;s a worthwhile suggestion.<br />
I&#39;ve coded this within the emonTX sketch, to overcome false readings delivered by my solar inverter during the night, which you have&nbsp;already considered...</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30210"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/8012" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="bruce_miranda&#039;s picture" title="bruce_miranda&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Exclude Input CT noise values before it is posted to a Feed</h3>

    <div class="submitted">Submitted by <a href="/emon/user/8012" title="View user profile.">bruce_miranda</a> on Fri, 08/05/2015 - 22:55.</div>
    <div class="content">
     <p>How do you work out it is night, in your sketch? Or do you just work on threshold?</p>
<p>Have you connected a clock module to your emontx?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30218"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/238" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Exclude Input CT noise values before it is posted to a Feed</h3>

    <div class="submitted">Submitted by <a href="/emon/user/238" title="View user profile.">Paul Reed</a> on Sat, 09/05/2015 - 13:03.</div>
    <div class="content">
     <p>You can get really strange readings from invertors when they go into sleep mode, so I added a line of code to disregard negative readings, also readings less than 20W, so not a perfect solution, but better than seeing -20W in a graph at 2am in the morning.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30220"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/8012" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="bruce_miranda&#039;s picture" title="bruce_miranda&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Exclude Input CT noise values before it is posted to a Feed</h3>

    <div class="submitted">Submitted by <a href="/emon/user/8012" title="View user profile.">bruce_miranda</a> on Sat, 09/05/2015 - 15:03.</div>
    <div class="content">
     <p>OK, I thought you were doing something more creative with a Real Time Clock module attached and excluding the small values only between two time periods.&nbsp;</p>
<p>But I do agree that we need some conditional calibration at the emoncms level rather than suppressing the values at source. emoncms knows the time, so that should be easy too. i.e. only apply correction if time between 2130 - 0530</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30227"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/238" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Exclude Input CT noise values before it is posted to a Feed</h3>

    <div class="submitted">Submitted by <a href="/emon/user/238" title="View user profile.">Paul Reed</a> on Sat, 09/05/2015 - 20:03.</div>
    <div class="content">
     <p>I doubt whether using a timer would be effective, because inverters go to sleep and wake up at different times depending upon sunlight according to the time of year, and also factor in weather conditions and DST. In mid winter, I&#39;ve known my inverter not even bother waking up all day!</p>
<p>I don&#39;t think that the 20W threshold makes much difference to accuracy, because I recall when setting this figure, I had noticed that 20W was probably the absolute minimum that it would supply before shutting down anyway.</p>
<p>See <a href="http://openenergymonitor.org/emon/node/10684">this post</a>&nbsp;re power factor.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30235"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/8012" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="bruce_miranda&#039;s picture" title="bruce_miranda&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Exclude Input CT noise values before it is posted to a Feed</h3>

    <div class="submitted">Submitted by <a href="/emon/user/8012" title="View user profile.">bruce_miranda</a> on Sat, 09/05/2015 - 22:32.</div>
    <div class="content">
     <p>It&#39;s extremely strange but the noise level being picked up on my solar CT is less than 1W, but my diversion CT is often picking up between 5-6W even when I know there is no diversion taking place. Ofcourse this is much better because previously with a long CT cable wrapped up next to another power cable it was picking up in excess of 12-15Ws.&nbsp;</p>
<p>So I do think we need some exclusion ability in emoncms&nbsp;so that we can exclude values on different feeds below a certain level. The Calibration function isn&#39;t really useful here.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="/emon/node/10679"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-pemPTvu7k1-Xuw2Vn9DWpZqrgzvpNwEDP3QUFd7IzoA" value="form-pemPTvu7k1-Xuw2Vn9DWpZqrgzvpNwEDP3QUFd7IzoA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org">https://community.openenergymonitor.org</a></p>
   
</div>

<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
