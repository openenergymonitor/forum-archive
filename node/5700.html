<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5700 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:38:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>lm35 temp sensor failing occasionally | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">lm35 temp sensor failing occasionally</h3>
        <span class="submitted">Submitted by <a href="../user/6828.html" title="View user profile.">rangua</a> on Tue, 02/09/2014 - 19:51</span>
        <div class="content"><p>I have set up an arduino with a lm35 temp sensor on it and logging the data with emoncms.</p>
<p>The wiring is straightforward. Three pins, Vcc, A3, Gnd.</p>
<p>To do the measurement, i change the analogReference to Internal (1.1V) and take about 50 samples, do the average and calculate the standard deviation, both of which i send to emoncms for logging.</p>
<p>Everything worked fine, but i can check on my log that i have occasional spikes on the std deviation of the temp measurements..</p>
<p>What could be wrong? is my sensor fried?</p>
<p>i&#39;ll leave attached the arduino sketch (the same board also measures voltage and current and it sends the data to an RPi through an nrf24 module) and some graphs of the TempErr (std deviation of temperature).</p>
<p>Thanks!</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10006.html" class="topic-previous" title="Go to previous forum topic">‹ Using RFM12Pi V2 and also Power over GPIO possible?</a>
              <a href="10012.html" class="topic-next" title="Go to next forum topic">Mounting the RFM12Pi to PI B+ ??? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-23533"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 02/09/2014 - 22:28.</div>
    <div class="content">
     <p>Read the Atmel Data Sheet. On Page 253: &quot;When the bandgap reference voltage is used as input to the ADC, it will take a certain time for the voltage to stabilize. If not stabilized, the first value read after the first conversion may be wrong.&quot; I cannot see a delay in your sketch, so that is the first thing to look at.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23535"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6828.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rangua&#039;s picture" title="rangua&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/6828.html" title="View user profile.">rangua</a> on Tue, 02/09/2014 - 23:10.</div>
    <div class="content">
     <p>right! i had added a delay (it&#39;s inside the if statement that checks the temperature) but it was BEFORE changing the reference voltage. duh!.</p>
<p>I&#39;m going to change that to see if it helps.</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23536"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 03/09/2014 - 02:03.</div>
    <div class="content">
     <p>I&#39;m not sure that will actually help. &nbsp;If you read the source code for analogReference() you&#39;ll see it doesn&#39;t go anywhere near the ADC hardware, but rather remembers the setting and programs it up during the next call to analogRead(). So even if you shift your delay() to after you call analogReference(), it&#39;ll still be happening too early.</p>
<p>There&#39;s a comment in the code to explain why they have to do that. &nbsp;They&#39;re trying to be safe in the case where someone is providing an external Vref.</p>
<p>I think you have two options:</p>
<p>1. break away from using the Arduino calls, and bang directly on the ADC registers yourself &nbsp; &nbsp;OR</p>
<p>2. instead of spending your delay() doing nothing, sit in a tight loop calling analogRead() and discard the result.</p>
<p>#2 relies on the observation (or hope?) that re-programming ADMUX with its current value doesn&#39;t count with regards the need for setting time, which is probably safe.</p>
<p>Assuming your Arduino has a decoupling cap on AREF (as recommended) then you&#39;ll probably also need a delay as you change back to the default reference voltage (AVCC) for power monitoring. &nbsp;While selecting AVCC as your reference isn&#39;t strictly a bandgap reference (so strictly speaking isn&#39;t included in Robert&#39;s datasheet reference above), whatever reference you choose gets sent out to that decoupling cap, so you don&#39;t want to be doing any conversions until it&#39;s reached steady state. &nbsp;Given you&#39;re measuring an AC signal after you set it back to AVCC you wouldn&#39;t necessarily notice problems with that reading, unless you were collecting and plotting the results.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23538"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6828.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rangua&#039;s picture" title="rangua&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/6828.html" title="View user profile.">rangua</a> on Wed, 03/09/2014 - 07:09.</div>
    <div class="content">
     <p>you were right. it didn&#39;t help.. i had another error spike a few hours ago..</p>
<p>i half understand what you&#39;re saying so i guess option #1 is off the board for now :S</p>
<p>in simple words, the delay only counts as long as i&#39;m reading the analog pin?</p>
<p>is it possible my arduino board already has a decoupling cap? if not, i just need to add a capacitor between the aref and ground pin (even though my new analog reference is an internal 1.1v source and not the aref pin)?</p>
<p>for the power part, you&#39;re right, i think i get steady values; the voltage does varies, but the mains are never constant (and even less so in my town!).. power is more stable though but i&#39;ll make some dummy readings on it for the sake of doing things right.</p>
<p>i&#39;ll try to add the following lines instead of the delay:</p>
<p>started_at = millis();</p>
<p>while(millis()-started_at&lt;1000)</p>
<p class="rteindent1">int tmp = analog.read(%pins%);</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23541"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 03/09/2014 - 08:53.</div>
    <div class="content">
     <p><em>in simple words, the delay only counts as long as i&#39;m reading the analog pin?</em></p>
<p>Almost. &nbsp;It&#39;s more that the new reference isn&#39;t selected until you read an analog pin.</p>
<p><em>is it possible my arduino board already has a decoupling cap?</em></p>
<p>Definitely. &nbsp;You&#39;d need to check the schematic for your particular Arduino board. &nbsp;It&#39;s also possible that it may get decoupled on shields too.</p>
<p><em>if not, i just need to add a capacitor between the aref and ground pin (even though my new analog reference is an internal 1.1v source and not the aref pin)?</em></p>
<p>Correct. &nbsp;The AREF pin is dual-purpose. &nbsp;You can feed it an external Vref of any voltage you want (between&nbsp;1V and&nbsp;Vcc), or when you&#39;re using an internal reference (like you are in both cases) &nbsp;the internal Vref runs out to that pin and they ask that you decouple it for them, with a cap to ground.</p>
<p><em>for the power part, you&#39;re right, i think i get steady values; the voltage does varies, but the mains are never constant (and even less so in my town!)</em></p>
<p>Actually, you&#39;re reading a sine wave there, so you should be getting anything but steady values. &nbsp;After you&#39;ve grabbed lots of samples, and calculated the RMS, you may or may not get steady values depending on your local grid. &nbsp;AREF settling errors in the early samples wouldn&#39;t necessarily show up as a varying RMS reading, but it might make calibration tricky.</p>
<p>Your suggested loop should work. &nbsp;I suspect 1 second is a major overkill, so you could look at paring that right back once you&#39;ve confirmed it fixes it. &nbsp;You could probably even lose the timer and just make it count based if you prefer. &nbsp;Each call to analogRead() takes about 110 usecs from memory, so just as do as many as required to get consistent readings, plus some for an extra safety margin.</p>
<p>I&#39;m still not entirely sure this is the cause of your problem. The cap behaviour is quite deterministic, so I would have expected it to be fairly consistent rather than spiky like you&#39;re finding(*). &nbsp;But it&#39;s worth eliminating before investigating further.</p>
<p>(*) I&#39;m assuming your board already has a decoupling cap. &nbsp;If it doesn&#39;t, then it could well be noise that might get fixed by adding the cap.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23549"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6828.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rangua&#039;s picture" title="rangua&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/6828.html" title="View user profile.">rangua</a> on Wed, 03/09/2014 - 16:23.</div>
    <div class="content">
     <blockquote><p>Definitely.&nbsp; You&#39;d need to check the schematic for your particular Arduino board.&nbsp; It&#39;s also possible that it may get decoupled on shields too.</p>
</blockquote>
<p>yes, it&#39;s an Arduino Uno Rev3 board. <a href="http://arduino.cc/en/uploads/Main/Arduino_Uno_Rev3-schematic.pdf">This schematic </a>shows a 100nF cap on the AREF pin :)</p>
<blockquote><p>Your suggested loop should work.&nbsp; I suspect 1 second is a major overkill, so you could look at paring that right back once you&#39;ve confirmed it fixes it.</p>
</blockquote>
<p>So far, it&#39;s been 12 hours without an accident, but it&#39;s too soon to claim victory.</p>
<blockquote><p>Actually, you&#39;re reading a sine wave there, so you should be getting anything but steady values.</p>
</blockquote>
<p>&nbsp;I use emonlib, which handles all the calculations and returns the Vrms, Irms, and power numbers.. i was talking about those calculated values, not the raw data from the analog pin.</p>
<blockquote><p>I&#39;m still not entirely sure this is the cause of your problem. The cap behaviour is quite deterministic, so I would have expected it to be fairly consistent rather than spiky like you&#39;re finding(*).&nbsp; But it&#39;s worth eliminating before investigating further.</p>
</blockquote>
<p>Let&#39;s hope this solves the issue.. i&#39;ll report back in 12 hours.</p>
<p>Thanks for the help! I&#39;m in debt with you :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23556"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6828.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rangua&#039;s picture" title="rangua&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/6828.html" title="View user profile.">rangua</a> on Wed, 03/09/2014 - 18:00.</div>
    <div class="content">
     <p>Welp.. despite the loop, i still have some spikes in TempErr :(<br />
	however, i&#39;ve already learned something from this thread so it&#39;s not all lost..</p>
<p>I hope this thread helps someone else.</p>
<p>for now, i&#39;ll blame the poor quality of my sensor..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23558"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 03/09/2014 - 21:29.</div>
    <div class="content">
     <p>It&#39;s hard to know what causes your spikes. &nbsp;Do they happen at a fairly regular time, or coincide with some nearby equipment switching on/off?</p>
<p>Even if you&#39;re prepared to live with them, I think you&#39;ll get more accurate results (both temperature and power) if you waste the first x readings after you change the reference, where x needs to be determined, but I&#39;m guessing in the order of about 20 to 100 readings, which would take about 2 to 11 msecs.</p>
<p>It&#39;s pretty easy to test if you need to do that. &nbsp;After you select the 1.1V reference, take 100 readings of the temperature input as fast as you can, into an array. &nbsp;<strong>After(*)&nbsp;</strong>you&#39;ve collected all 100, print out the raw readings and I suspect you&#39;ll see them ramp up as AREF slowly decays down to 1.1V. &nbsp; Hopefully they&#39;ll&nbsp;stabilise&nbsp;well before the end of the array, and that&#39;ll give you an idea of how many you need to waste. &nbsp;You really don&#39;t want to be including those early numbers in your average as they&#39;re completely bogus. &nbsp; &nbsp;</p>
<p>Ditto in the other direction after you&#39;ve selected Vcc as the reference, you don&#39;t want to be including the early voltage/current samples in the emonlib calculations. &nbsp; All that averaging, and RMSing does a good job at hiding issues like this but the bogus values can&#39;t help but mess with your overall accuracy/calibration. &nbsp;You won&#39;t be able to do the &quot;sample into an array&quot; technique in this direction because what you are sampling is a fast moving target in any case. &nbsp;But whatever &#39;x&#39; you determine you need in the Vcc -&gt; 1.1V direction will hopefully suffice in the 1.1V -&gt; Vcc direction as well.</p>
<p>(*) You can&#39;t print them out as you read them because the print takes so long it will act as a delay.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23561"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6828.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rangua&#039;s picture" title="rangua&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/6828.html" title="View user profile.">rangua</a> on Thu, 04/09/2014 - 04:52.</div>
    <div class="content">
     <p>ok, thanks for the advice. i&#39;ll calibrate it at another time, for now i&#39;ll stick with half a second.&nbsp;</p>
<p>I thought about that too (maybe the current sensor was screwing my measurement) but when i plot the temperr and power together i get no correlation, at least with the high consuming parts.. and it looks pretty random.. maybe later on it will show a pattern (bear in mind that those prolonged periods of error were due to me measuring wrong, which got better at the end of the graph due to me adding some delays here and there).</p>
<p>edit: is it a coincidence that it failed at noon the last two days? hmm...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23563"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Thu, 04/09/2014 - 06:14.</div>
    <div class="content">
     <p>Actually, I just looked at your code again. &nbsp;I think you&#39;re already doing what I suggested.....</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; analogReference(INTERNAL);<br />
	&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(i=0;i&lt;(DATASIZE2+50);i++) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sensorValue = analogRead(sensorPin);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(i&gt;49){<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TempSample[i-50]=sensorValue/9.31;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>That looks to me like it&#39;s doing 50 extra reads up front that get ignored, then it gets on with doing DATASIZE2 reads on top of that. &nbsp;It looks like whoever wrote that code knew about letting AREF settle. &nbsp; &nbsp;Probably worth doing something similar when you switch back to Vcc as your reference and then you&#39;re done.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23571"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6828.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rangua&#039;s picture" title="rangua&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/6828.html" title="View user profile.">rangua</a> on Thu, 04/09/2014 - 19:36.</div>
    <div class="content">
     <p>that&#39;s my code! i had forgot already about that.</p>
<p>it&#39;s just that i started working on this a year ago but dropped it for lack of time, and i had read about the decoupling stuff then (albeit very superficially).</p>
<p>sadly, the error keeps spiking. just today i had 4 separate spikes and two of them when i wasn&#39;t even at home, so i guess that failure due to a certain equipment turning on is off the table (particularly because i couldn&#39;t find any correlation with the fridge/water heater which are the only two things in my house that turn on/off automatically).</p>
<p>and i can&#39;t see any correlation with the temperature neither :(</p>
<p>i&#39;ll try buying another sensor (i can buy them really cheap ~3$ since they use them all over town for the big clock/thermometers in the streets) and rule out a bad sensor, but for the price tag i would believe if you told me it&#39;s a normal thing to happen every now and then.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23572"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6828.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rangua&#039;s picture" title="rangua&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/6828.html" title="View user profile.">rangua</a> on Thu, 04/09/2014 - 20:10.</div>
    <div class="content">
     <p>in case it&#39;s useful for anyone, here&#39;s my final code for the project.</p>
<p>I&#39;ve cleaned it up a bit and added some comments.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25838"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7022.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="geo3geo&#039;s picture" title="geo3geo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by <a href="../user/7022.html" title="View user profile.">geo3geo</a> on Sun, 14/12/2014 - 18:14.</div>
    <div class="content">
     <p>I&#39;ve had similar issues with two LM35&#39;s&nbsp;on my system. I made a big improvement by adding a pull-down resistor of 1K on the outputs. I also put a diode in series with the LM35 gnd pin to introduce a &#39;sort of&#39; negative voltage. This adds a significant error in the temperature reading but this is easily corrected in software. This way the LM35s can cope with negative temperatures.&nbsp;A 1.2v zener would be better still, I may add that at a later stage.</p>
<p>Geo</p>
<p>bugthebees.blogspot.com</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26859"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Tbox&#039;s picture" title="Tbox&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: lm35 temp sensor failing occasionally</h3>

    <div class="submitted">Submitted by Tbox (not verified) on Mon, 19/01/2015 - 15:11.</div>
    <div class="content">
     <p>Hi,</p>
<p>Have you consider using screened cable, when connecting LM 35 to main board ?&nbsp;</p>
<p>Probably there is some environment noise that is interfering to LM 35.</p>
<p>Hopefully, this will help&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5700"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-bKoJuGcVVFJZyVW4glmfeE1ihfmUMIIHzQ8qJ2s_nDk" value="form-bKoJuGcVVFJZyVW4glmfeE1ihfmUMIIHzQ8qJ2s_nDk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
