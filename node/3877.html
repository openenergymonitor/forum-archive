<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3877 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:04:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonRPi v2.0 Raspberry Pi emon shield | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonRPi v2.0 Raspberry Pi emon shield</h3>
        <span class="submitted">Submitted by <a href="../user/5264.html" title="View user profile.">Lightning</a> on Wed, 19/02/2014 - 23:41</span>
        <div class="content"><p>Hi,</p>
<p>The emonRPi v2.0 is born!</p>
<p>I wasn&#39;t too happy with the performance of my first prototype (especially accuracy and noise susceptivity).</p>
<p>So I decided to go for a complete new approach and created a V2 prototype featuring a Maxim Integrated max1239 12bit 12 channel i2c ADC.</p>
<p>I&#39;ve adopted the emonlib to allow reading from an I2C ADC, also i changed the emon INO code to directly write the results to the serial port. First tests show only 1 Watt jitter on a 100W light bulb on all 3 current channels.</p>
<p>As my next project I&#39;ll build a transformer free 3 Phase voltage monitor which will interface to the emonRPi over opto-isolated longwire I2C connection (6 wire RJ12 inteface). The plan is to make it small enough to fit into a one Unit DIN rail housing. let&#39;s see how well this goes. :-) The emonRPi is already prepared for this setup using a PCA9600 i2c buffer.</p>
<p>&nbsp;</p>
<p>Below you can find schematics, board and a few pictures!</p>
<p><a href="../../../www.dropbox.com/s/z2yq6zkl51h6n1s/Photo%2019.02.14%2023%2030%2031.html">https://www.dropbox.com/s/z2yq6zkl51h6n1s/Photo%2019.02.14%2023%2030%2031.jpg</a></p>
<p><a href="../../../www.dropbox.com/s/63ut1kkapkypoph/Photo%2019.02.14%2023%2030%2042.html">https://www.dropbox.com/s/63ut1kkapkypoph/Photo%2019.02.14%2023%2030%2042.jpg</a></p>
<p><a href="../../../www.dropbox.com/s/oc1pyteinxq2amt/Photo%2019.02.14%2023%2031%2002.html">https://www.dropbox.com/s/oc1pyteinxq2amt/Photo%2019.02.14%2023%2031%2002.jpg</a></p>
<p><a href="../../../www.dropbox.com/s/96mlo3ayts6hv6y/Photo%2019.02.14%2023%2031%2015.html">https://www.dropbox.com/s/96mlo3ayts6hv6y/Photo%2019.02.14%2023%2031%2015.jpg</a></p>
<p>&nbsp;</p>
<p><a href="https://www.dropbox.com/s/muf7csdr440d1eq/EmonRPi_V2.0.pdf">https://www.dropbox.com/s/muf7csdr440d1eq/EmonRPi_V2.0.pdf</a></p>
<p>&nbsp;</p>
<p><a href="https://www.dropbox.com/s/h3qo5rxwcys2jcg/EmonRPi_V2.0.brd">https://www.dropbox.com/s/h3qo5rxwcys2jcg/EmonRPi_V2.0.brd</a></p>
<p><a href="https://www.dropbox.com/s/76k6beq6zsufgp3/EmonRPi_V2.0.sch">https://www.dropbox.com/s/76k6beq6zsufgp3/EmonRPi_V2.0.sch</a></p>
<p>&nbsp;</p>
<p>I&#39;ll upload the code into a github fork repo within the next few days</p>
<p>regards</p>
<p>Rupert</p>
  <div class="forum-topic-navigation clear-block">
          <a href="4091.html" class="topic-previous" title="Go to previous forum topic">‹ Arduberry - a kickstarter project</a>
              <a href="4053.html" class="topic-next" title="Go to next forum topic">ADE7753 - compared to emon ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-18582"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonRPi v2.0 Raspberry Pi emon shield</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Thu, 20/02/2014 - 10:25.</div>
    <div class="content">
     <p>Hi,</p>
<p>Very interesting.</p>
<p>Can you tell us more about the features of this RPI shield ?</p>
<p>Eric</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18601"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5264.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Lightning&#039;s picture" title="Lightning&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonRPi v2.0 Raspberry Pi emon shield</h3>

    <div class="submitted">Submitted by <a href="../user/5264.html" title="View user profile.">Lightning</a> on Thu, 20/02/2014 - 22:20.</div>
    <div class="content">
     <p>Basically it has all features of my version 1 prototype (see this post: <a href="3619.html" title="http://openenergymonitor.org/emon/node/3619">http://openenergymonitor.org/emon/node/3619</a>)</p>
<p>These are:</p>
<ul>
<li>
		&nbsp;&nbsp;&nbsp; 3 x 3,5 mm Stereo plug connectors for 3 Phase current sensor input</li>
<li>
		&nbsp;&nbsp;&nbsp; a Barrel Jack for 9V AC-AC measurement input</li>
<li>
		&nbsp;&nbsp;&nbsp; A 2,5 mm Stereo plug connector for onewire sensor, highside powerswitched</li>
<li>
		&nbsp;&nbsp;&nbsp; A 2,5 mm Stereo plug connector for pulse counting sensors, highside powerswitched</li>
<li>
		&nbsp;&nbsp;&nbsp; all inputs are equipped with an additional TVS Diode (Just in case)</li>
<li>
		&nbsp;&nbsp;&nbsp; a dedicated area for a solder on RFM12B board (connected to the AVR&#39;s SPI bus) including a SMA connector for an external antenna</li>
<li>
		&nbsp;&nbsp;&nbsp; It&#39;s own LDO 3v3 regulator, the RPi&#39;s 3V3 bus only allows for max 50mA additional load which &#39;should&#39; be sufficient, but not worth the risk</li>
<li>
		&nbsp;&nbsp;&nbsp; only SMT parts, smallest 0805 (+ a few TVS diodes in SOD523 Package) to allow for convenient hand assembly</li>
<li>
		&nbsp;&nbsp;&nbsp; an FTDI connector + ISP connector + ability to flash via bootloader from RPi (reset circuitry)</li>
<li>
		&nbsp;&nbsp;&nbsp; a PCP layout which <strike>should</strike> does completely fit into a standard RS-Components RPi Case (764-4382) and just needs a few wholes and one cutout for the RJ12 socket</li>
</ul>
<p>Additionally it has a PCA9600 based I2C buffer circuit to allow for an opto-isolated interconnect to a direct (transformer free) 3 Phase voltage monitor device which I&#39;m trying myself on next. My plans are to fit it into a 1 Unit DIN rail housing, lets see how difficult this will become.</p>
<p>A further major difference is the whole ADC circuitry is based on a Maxim Integrated&nbsp; MAX1239 12 Bit i2c ADC. The design I went for uses a fully differential bipolar input pair for each CT and the Voltage transformer on the ADC which is very robust against noise. This also overcomes the need to run the analog lines across half of the PCP and make thus it more susceptible to noise. The two&#39;s complement output is then simply converted into offset two&#39;s complement (the same idea the original emonTX is creating in hardware) by binary logic in software.</p>
<p>regards</p>
<p>Rupert</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1741.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1741.jpg" alt="ukmoose&#039;s picture" title="ukmoose&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonRPi v2.0 Raspberry Pi emon shield</h3>

    <div class="submitted">Submitted by <a href="../user/1741.html" title="View user profile.">ukmoose</a> on Thu, 20/02/2014 - 22:48.</div>
    <div class="content">
     <p>Many thanks for sharing this, have you thought what your intention is for this project going forward?</p>
<p>If you wish to open this for others to use it is probably worth think about what type of license to place on it. &nbsp;The absence of a license means that copyright laws apply. This means that you retain all rights and that nobody else may reproduce, distribute, or create derivative works from your work. This might not be what you intend.</p>
<p>There are a couple of sites that might help such as</p>
<p><a href="http://www.shareable.net/blog/how-to-choose-an-open-source-hardware-license" title="http://www.shareable.net/blog/how-to-choose-an-open-source-hardware-license">http://www.shareable.net/blog/how-to-choose-an-open-source-hardware-license</a> (quite wordy)</p>
<p>and</p>
<p><a href="http://choosealicense.com/" title="http://choosealicense.com">http://choosealicense.com</a></p>
<p>Whilst the second link is about software its very easy to read and digest.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18649"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5264.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Lightning&#039;s picture" title="Lightning&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonRPi v2.0 Raspberry Pi emon shield</h3>

    <div class="submitted">Submitted by <a href="../user/5264.html" title="View user profile.">Lightning</a> on Fri, 21/02/2014 - 21:39.</div>
    <div class="content">
     <p>Hi,</p>
<p>&nbsp;</p>
<p>My personal intention for this project is the interest in the EE matter in general, there was nothing available that really suited the idea I had. Of course I would be pleased if somebody else also shares the same opinion and can make use of my work.</p>
<p>Talking about the license question I have decided to go for the CC license model, namely the<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"> &quot;Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License&quot;</a></p>
<p><img alt="" src="../../../licensebuttons.net/l/by-nc-sa/4.0/88x31.png" style="width: 88px; height: 31px;" /></p>
<p>&nbsp;</p>
<p>Although I really like spending time on these things I still have a Job and a GF (also called a job sometimes). As I&#39;m not a professional developer either I can&#39;t promise I&#39;m able find enough time to add all features that are theoretically supported by the hardware (e.g. the RFM12B gateway functionality). Maybe somebody else has use for this feature is willing to contribute that part.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18659"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Merlin&#039;s picture" title="Merlin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonRPi v2.0 Raspberry Pi emon shield</h3>

    <div class="submitted">Submitted by Merlin (not verified) on Sat, 22/02/2014 - 11:55.</div>
    <div class="content">
     <p>thanks for your work!</p>
<p>This project is very interesting.&nbsp;I don&#39;t have the ability to rebuild myself this, but if it was for sale surely i buy it!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19320"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonRPi v2.0 Raspberry Pi emon shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 16/03/2014 - 16:20.</div>
    <div class="content">
     <p>Hi Ligntning,</p>
<p>I&#39;ve been taking a little look at your design, it&#39;s a very nice PCB. I like your idea of including TVS diodes, have you given thought to the specification of the diodes? What diode do you intend to use?</p>
<p>What are your plans for the design? How&#39;s development and testing coming along?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3877"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-u_cIi_S1W3QD4vqxGMwTTxtagq_XFHT4aptjfC6n3pI" value="form-u_cIi_S1W3QD4vqxGMwTTxtagq_XFHT4aptjfC6n3pI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
