<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/1967 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:18:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Monitor Multiple EmonTX Low Power Temperature Node | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Monitor Multiple EmonTX Low Power Temperature Node</h3>
        <span class="submitted">Submitted by Guest on Sun, 27/01/2013 - 23:31</span>
        <div class="content"><p>I am planning on setting up a monitoring system for a vacation home.&nbsp; I would like to monitor the temperature in 3 different places using EmonTX Low Power Temperature Nodes with a Raspberry Pi system as the base station that is also monitoring my UPS via apcupsd. I have a few questions.</p>
<p>Is it possible to monitor 3 EmonTX Low Power Temperature Nodes?</p>
<p>How do I keep the 3 monitoring nodes from transmitting on top of each other?</p>
<p>Is it possible to have the nodes only transmit in response to a message from the Raspberry Pi system?</p>
<p>How long would the batteries last for each node if they are waiting for a message from the Raspberry Pi base station?</p>
<p>Ultimately I would like to add a monitor for the heating system to see when it is cycling and interface to a weather station.</p>
<p>Thank you for your help in getting a noob started.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1975.html" class="topic-previous" title="Go to previous forum topic">‹ phpMyAdmin</a>
              <a href="1973.html" class="topic-next" title="Go to next forum topic">Emoncms and my hardware ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-9449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/01/2013 - 01:27.</div>
    <div class="content">
     <p>Welcome, Mike,</p>
<p><em>Is it possible to monitor 3 EmonTX Low Power Temperature Nodes?</em></p>
<p>Yes, in principle.</p>
<p><em>How do I keep the 3 monitoring nodes from transmitting on top of each other?</em></p>
<p>That&#39;s the problem! There&#39;s a long thread currently ongoing that revolves around this difficulty and the emonGLCD <a href="1051-2.html" title="http://openenergymonitor.org/emon/node/1051. ">http://openenergymonitor.org/emon/node/1051. </a> One suggestion in that thread to alleviate (not solve) the problem is to transmit at intervals that are related by prime numbers. I suggest you keep a watch on that thread.</p>
<p><em>Is it possible to have the nodes only transmit in response to a message from the Raspberry Pi system?</em></p>
<p>Yes, but you either need to keep the node fully powered and receiving (which means a very short battery life) or you need to turn on and listen when a request to transmit is expected, or of course supply mains power.</p>
<p><em>How long would the batteries last for each node if they are waiting for a message from the Raspberry Pi base station?</em></p>
<p>I believe it is days (depending of course on the battery capacity). These&#39;s some data about this on Jeenode I think.</p>
<p><em>Ultimately I would like to add a monitor for the heating system to see when it is cycling and interface to a weather station.</em></p>
<p>See here <a href="1906.html" title="http://openenergymonitor.org/emon/node/1906">http://openenergymonitor.org/emon/node/1906</a> for the weather station. What you do for the heating system depends on what it will tell you!</p>
<p>(p.s. Do you want mikeHF7 or shall I kill it?)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9452"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Mon, 28/01/2013 - 09:03.</div>
    <div class="content">
     <p>You could do something like this...</p>
<p>Have the Raspberry Pi (presumably mains powered) transmit a message every 5 seconds or so.</p>
<p>Have the emonTxs wake up at what ever interval you want and then listen for the next&nbsp;transmission from the Pi (max 5 secs)</p>
<p>Have each emonTx wait a different time after the Pi transmission, say 100ms, 200ms and 300ms and then transmit their own message.</p>
<p>This way the average time emonTx will be on for will be slightly over 2.5s and there will never be any collisions. If you make the emonTx transmit interval something like 5 minutes the average power will be very small.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9455"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1817.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="StuntMonkeh&#039;s picture" title="StuntMonkeh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/1817.html" title="View user profile.">StuntMonkeh</a> on Mon, 28/01/2013 - 10:02.</div>
    <div class="content">
     <p>In most temperature applications the temperature value does not change very often.&nbsp; It really depends on what you want to monitor but if its around a house ie: room temp, outside air temp etc these are not going to change much over the course of 5 seconds.</p>
<p>I have been working on a sketch myself for a temperature node using a thermistor.</p>
<p>Currently the node sits in low power mode for 10 seconds, wakes up reads the temperature, if the temperature has changed greater than +/-0.2&deg;C or it has been longer than 1 hour since the last transmission to the base station it sends the value.</p>
<p>I have been using ACK&#39;s with all my sketches to make sure data gets to the base station.&nbsp; Occasionally something weird may happen where it can take a good few attempts.</p>
<p>I also agree using a strategy of using prime numbers as intervals.&nbsp; Its a strategy I have used in the past on other comms systems based on RS232/485 etc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9460"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Mon, 28/01/2013 - 12:18.</div>
    <div class="content">
     <p><em>these are not going to change much over the course of 5 seconds</em></p>
<p>That&#39;s why I suggested 5 minutes, The prime number approach is good but it won&#39;t guarantee no collisions like the timeslot approach above would.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9466"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1817.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="StuntMonkeh&#039;s picture" title="StuntMonkeh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/1817.html" title="View user profile.">StuntMonkeh</a> on Mon, 28/01/2013 - 14:28.</div>
    <div class="content">
     <p>Apologies Martin, I didn&#39;t mean to knock your suggestion, only offer another alternative based on what I have been working on myself.</p>
<p>I&#39;m not sure how bad the collisions are getting on my setup.&nbsp; I have two nodes, one sending every 15mins and the other is the temperature node which is going to send at different times based on my previous description.&nbsp; Using ACK&#39;s and retries seems to make sure the data makes it through.&nbsp; I would agree its more a brute force method.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9469"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Mon, 28/01/2013 - 15:23.</div>
    <div class="content">
     <p>I thought you were interpreting my post as suggesting transmitting every 5 seconds, sorry StuntMonkeh&nbsp;if that wasn&#39;t the case or if I sounded snappy - didn&#39;t mean to.</p>
<p>Do you possibly have a range&nbsp;issue rather than anything to do with collisions?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9473"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1817.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="StuntMonkeh&#039;s picture" title="StuntMonkeh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/1817.html" title="View user profile.">StuntMonkeh</a> on Mon, 28/01/2013 - 16:21.</div>
    <div class="content">
     <p>Don&#39;t worry no offense caused.&nbsp; I think at some point writing I got my wires crossed and I understand now why you wrote what you did.&nbsp; I understand how your solution works.</p>
<p>I was more alluding to the fact that temperatures don&#39;t often change very frequently so you don&#39;t always need to keep sending them in general not specific to your solution.</p>
<p>I don&#39;t think I have a range issue, the temperature node is in the room next door and the gas meter is outside no more than 10 metres away from the base.&nbsp; There is nothing foil backed in the construction of the walls.</p>
<p>If I run the temp sensor serial output it will fail fairly regularly at the first attempt, say 1 in 10.&nbsp; I have seen it go to 7 retries once but then be fine.</p>
<p>Its probably my dodgy soldering skills!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9487"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/01/2013 - 21:40.</div>
    <div class="content">
     <p>One point worth mentioning - it doesn&#39;t affect anything either of you (StuntMonkeh or MartinR) have said - is that the RFM12 library allegedly does a rudimentary check that the band is clear before it starts to transmit. However, that will only work provided both transmitters can hear each other.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9491"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MikeHF&#039;s picture" title="MikeHF&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by MikeHF (not verified) on Tue, 29/01/2013 - 03:55.</div>
    <div class="content">
     <p>Dear All,</p>
<p>Thank you for the information.&nbsp; Now all I have to do is wait for the modules I need to be back in stock.</p>
<p>FYI <a href="1051-2.html" title="http://openenergymonitor.org/emon/node/1051.&nbsp;">http://openenergymonitor.org/emon/node/1051</a> is 404.</p>
<p>Thanks again.</p>
<p>&nbsp;</p>
<p>Mike</p>
<p>&nbsp;</p>
<p>PS Yes, you can kill MikeHF7.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9494"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Tue, 29/01/2013 - 10:20.</div>
    <div class="content">
     <p><em>that the RFM12 library allegedly does a rudimentary check that the band is clear before it starts to transmit</em></p>
<p>This is how it <strong>should</strong> work, but it doesn&#39;t. This is a long known bug in the Jeelib code.</p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9501"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Monitor Multiple EmonTX Low Power Temperature Node</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Tue, 29/01/2013 - 16:56.</div>
    <div class="content">
     <p>&nbsp;</p>
<p>Been running 2 x temperature funky sensors and 3 x emontx with emonrf and emonglc for a couple of months. When monitoring the rf space with jeenode i found more transmissions from neighbours (propably) home alarm system network than from my emon network devices. The funky sensor&nbsp;3v battery seems to be ok for good few months even with led blinking, everything else has a psu connected</p>
<p>There has been some dropouts in the network but those have been always related to restarting one device and not resetting emonrf, besides a few times wiht adsl being down. Emoncms is ever so good as it allows to see how often data gets received. Anyway my system is not mission critical, all heating steering components are independent of emon, hardwired together and are operating independently and redundant to each other - even though tuned to work together and monitored with emon.</p>
<p>Emonglc stability is another issue... Had initially a lot of issues with it failing when 1-wire sensor connection was not ok. Then just bite the bullet and implemented watchdog timer reset and use emontx to store all the needed data.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/1967"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-t_tcwuIhWfjdQCauy_9HjeLbOr1I4ydhY7unEJPhuMQ" value="form-t_tcwuIhWfjdQCauy_9HjeLbOr1I4ydhY7unEJPhuMQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
