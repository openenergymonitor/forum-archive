<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2220 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:33:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>How to set up basic communication signals with emontx and Nanode RF basestation  | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">How to set up basic communication signals with emontx and Nanode RF basestation </h3>
        <span class="submitted">Submitted by Guest on Tue, 09/04/2013 - 20:14</span>
        <div class="content"><p>Hi,</p>
<p>I hope someone can help me. I&#39;m doing a college project at the moment and this is my first introduction to electronics. I&#39;m trying to get basic communication signals working between these two modules where I can then see it on my computer.</p>
<p>I&#39;ve followed the building blocks for setting up the arduino environment and uploaded the first emonTx_CT123_Voltage.ino file onto the emontx to receive a flashing LED, but WHAT NEXT?!<br />
	- the document just stops...</p>
<p>I have all the required libraries in the IDE but I don&#39;t what they are doing or what any of this means. All I want to do is use the CT sensor to take readings.</p>
<p>I&#39;d be grateful for any help...</p>
<p>Thanks,</p>
<p>Darren</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2261.html" class="topic-previous" title="Go to previous forum topic">‹ OKG with Wiznet W5200 pcb v1.01 reset mod</a>
              <a href="642.html" class="topic-next" title="Go to next forum topic">emonTx New Version Dev Ideas  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-11067"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 09/04/2013 - 21:32.</div>
    <div class="content">
     <p>You could try reading the Building Blocks articles on the RFM12B to understand how the data is packaged and transmitted.</p>
<p>Then you need to assemble your Nanode (There is a page under &quot;Modules&quot;, but don&#39;t be fooled when you test your Nanode, it <strong>does not</strong> have the &quot;Blink&quot; sketch loaded by default, you need to load it!).</p>
<p>Then download one of the Nanode base sketches (probably the &#39;multinode&#39;), read through it to try to understand how it works (though don&#39;t worry about the Ethernet side of things) and upload to your Nanode.</p>
<p>You&#39;ll need to check the transmitter frequency is set in both sketches to suit the modules you have, but I think everything else should default to suitable numbers.</p>
<p>Then if all went to plan, you should see the incoming data with the serial monitor connected to the Nanode.</p>
<p>As for the libraries, this is all common code that does very particular functions. You don&#39;t need to use it if you&#39;re good enough to write your own, but I&#39;m not and life&#39;s too short, so like everyone else I use the tested and proven library functions. The functions that send and receive the RFM12B messages are just one example. The emonLib functions that read the analogue inputs and calculate power and rms values of voltage and current are another. You don&#39;t need to understand their intimate details, just how to use them correctly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11069"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Tue, 09/04/2013 - 22:26.</div>
    <div class="content">
     <p>Hi again Robert,</p>
<p>What I&#39;m having a hard time understanding is that I have all the libraries in the Arduino IDE but there are many subheadings - do you just follow the &quot;Guide&quot; heading, upload the firmware onto the modules and then see what happens? Or do I upload them one after another</p>
<p>Where is the RFM building block articles?</p>
<p>Maybe I just need to sit tight and read through the entire building blocks manual to understand what it&#39;s doing...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11071"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 09/04/2013 - 23:20.</div>
    <div class="content">
     <p>And I&#39;m finding it a bit difficult to pin down exactly where you&#39;ve got to and where you want to go next!</p>
<p>Basically, the libraries just sit there - I don&#39;t think there are any inter-dependencies but at the top of each sketch, there should be a line or two saying &quot;This sketch requires....&quot; which tells you what you need. If your emonTx sketch compiled and loaded OK, it&#39;s indicative that you&#39;ve got all that done correctly. And for now I recommend that you leave it at that, until you come to write your own sketches from scratch.</p>
<p>What &quot;Guide Headings&quot; are you referring to - the list on the NanodeRF page? Yes, you can work through those if you wish, they are absolute &#39;bare bones&#39; sketches to illustrate the principles. They do work (I tested them!). You&#39;ll find full &#39;production&#39; sketches on GitHub (link in the page heading).</p>
<p>Beware: The Arduino IDE examples won&#39;t necessarily work with the emon.... hardware because things like the on-board LED are on different pins. I recommend you stick with material on this site until you get the hang of it.</p>
<p>If you click on Building Blocks (top right under Site Map), you&#39;ll get the contents page with everything listed.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11072"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Wed, 10/04/2013 - 00:20.</div>
    <div class="content">
     <p>Basically I&#39;ve completed the first step:</p>
<h3>
	Arduino</h3>
<p><a href="https://learn.openenergymonitor.org/?redirect=setting-up-the-arduino-environment">Setting up the arduino&nbsp;environment</a></p>
<p>&nbsp;</p>
<p>I&#39;m wondering can I not just clip the CT sensor to my electricity meter cable, upload a specific firmware/sketch to the emontx and emontx to get them communicating to each other and then see some readings through emoncms or in serial.</p>
<p>What do I need to do in order to get this setup?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11088"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 10/04/2013 - 15:11.</div>
    <div class="content">
     <p>Now I do understand. Yes you can.</p>
<p>You&#39;ve set up your Arduino environment and loaded the &quot;emonTx_CT123_Voltage&quot; sketch, and it compiled and ran.<br />
	At this point, you can connect the serial monitor and read the variables that are printed to serial: the power (powers if you&#39;ve enabled more than 1 c.t.) and the voltage. It will also be transmitting the 3 powers and the voltage.</p>
<p>You need to check line 33: #define freq RF12_433MHZ&nbsp; and change it to suit your RFM12B modules if needs be.</p>
<p>Now build your Nanode, download the sketch NanodeRF_multinode from Github.</p>
<p>Again, check line 36 and change it if necessary. Don&#39;t bother with any of the Ethernet / Web /IP addresses for now. Compile and run the sketch, and monitor the serial port. It won&#39;t work properly - the aim is just to prove you have comms between the two modules.</p>
<p>You should see</p>
<p>[webClient]</p>
<p>then nothing for a long time while it tries unsuccessfully to get onto the Internet (it&#39;s got no physical nor logical connection yet!), then you&#39;ll probably see</p>
<p>DHCP status: 0<br />
	DHCP failed<br />
	Data sent: /api/post.json?apikey=YOURAPIKEY&amp;json={rf_fail:1}<br />
	Time request sent</p>
<p>then after another wait</p>
<p>DHCP status: 0<br />
	DHCP failed<br />
	Data sent: /api/post.json?apikey=YOURAPIKEY&amp;node=10&amp;csv=1,26,0,38,1,33<br />
	Time request sent<br />
	&nbsp;</p>
<p>When you see &quot;&amp;node=10&amp;csv=1,26,0,38,1,33&quot; - the actual numbers following &quot;csv=&quot;&nbsp; will of course be different, you know the modules are talking.</p>
<p>If you&#39;ve got that far, then you can set up the Nanode to chat to emoncms.org (Beware, &quot;emoncms&quot; can mean two things, the free web-based service offered by OEM - &quot;emoncms.org&quot;, or the PHP program running on a local server or under WAMP.)</p>
<p>The easiest to set up is emoncms.org. Register yourself and get an APIkey - it&#39;s available via the Input API help on the Inputs page. Go back to your NanodeRF, paste the APIkey in where it says (line 83), and invent a MAC address for your Nanode (line 68). Everything else should be OK. Plug in an Ethernet cable to your router and compile and upload the sketch.</p>
<p>This time, you should see (with a few long waits in between while it times out and retries)</p>
<p>[webClient]</p>
<p>~ wait ~</p>
<p>DHCP status: 0<br />
	DHCP failed<br />
	Data sent: /api/post.json?apikey=39623397b3126c1afc2ddf1ea98bc5a2&amp;json={rf_fail:1}<br />
	Time request sent</p>
<p>~ wait ~</p>
<p>DHCP status: 1<br />
	IP:&nbsp; 192.168.1.64<br />
	GW:&nbsp; 192.168.1.254<br />
	DNS: 8.8.8.8<br />
	DNS status: 1<br />
	SRV: 213.138.101.177<br />
	Data sent: /api/post.json?apikey=39623397b3126c1afc2ddf1ea98bc5a2&amp;node=10&amp;csv=0,31,3,36,0,28<br />
	Time request sent<br />
	Time: t15,53,13<br />
	Data sent: /api/post.json?apikey=39623397b3126c1afc2ddf1ea98bc5a2&amp;node=10&amp;csv=0,32,0,39,0,31<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=39623397b3126c1afc2ddf1ea98bc5a2&amp;node=10&amp;csv=-1,29,1,24,0,34<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=39623397b3126c1afc2ddf1ea98bc5a2&amp;node=10&amp;csv=2,30,0,39,1,35<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=39623397b3126c1afc2ddf1ea98bc5a2&amp;node=10&amp;csv=0,34,0,23,1,34<br />
	OK recieved<br />
	&nbsp;</p>
<p>[That&#39;s not a real APIkey, and some of the numbers will be different.]</p>
<p>First, the NanodeRF requests an IP address from your router. If successful &quot;DHCP status: 1&quot;, it gets one &quot;IP:&nbsp; 192.168.1.64&quot; which will depend on what your router allocated. &quot;GW:&nbsp; 192.168.1.254&quot; will also depend on your router&#39;s settings. &quot;DNS: 8.8.8.8&quot; meant it went to Google&#39;s Domain Name Service to get the IP address of emoncms.org, it was successful &quot;DNS status: 1&quot; and the IP address it got back was &quot;SRV: 213.138.101.177&quot;</p>
<p>Then, when you look at Inputs at emoncms.org, you should have and be able to click on Node 10 and it will expand to show four inputs named 1-4, and if you click [log] you&#39;ll see a graph of the data.</p>
<p>It also got back from the server the current time: &quot;Time: t15,53,13&quot;.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11094"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Wed, 10/04/2013 - 19:17.</div>
    <div class="content">
     <p>Sorry, what do you mean check line 33? How do you do this to begin? My modules will be using the Europe frequency...</p>
<p>But I went ahead and upload the two sketches (although I haven&#39;t got actually connecting the CT sensor just ye but I still get readings)&nbsp;</p>
<p>0 0 0 0.29 Programming cable connected to EmonTX with CT sensor - Nanode RF powering off plug</p>
<p>Then:</p>
<p>&amp;node=10&amp;csv=0,0,0,21 ( Programming cable connected to Nanode RF, emontx powering off plug</p>
<p>But I don&#39;t know see &quot;LINE&quot; anywhere in the serial monitor.</p>
<p>I have an APIkey read-only &amp; read &amp; write - which one?</p>
<p>Thanks for the help Robert. I appreciate the effort.</p>
<p>P.s - maybe you can tell me but beside the Baud rate in the serial monitor there is a drop down box with four options: No line ending, newline and so on. What is this?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11095"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Wed, 10/04/2013 - 21:24.</div>
    <div class="content">
     <p>In Emontx, how do I define the RF:</p>
<p>Serial.print(&quot; Freq: &quot;);<br />
	&nbsp; if (freq == RF12_433MHZ) Serial.print(&quot;433Mhz&quot;);<br />
	&nbsp; if (freq == RF12_868MHZ) Serial.print(&quot;868Mhz&quot;);<br />
	&nbsp; if (freq == RF12_915MHZ) Serial.print(&quot;915Mhz&quot;);&nbsp;</p>
<p>&nbsp;</p>
<p>I thought I bought the 868MHz specific modules but when I define the RF as 868MHz in the Nanode multinode sketch the modules don&#39;t communicate with it each whereas they do on 435MHZ?!</p>
<p>I get &amp;node=10&amp;csv=0,0,0,21 (varies)</p>
<p>BUT When I move it into the hall I just get RF Fail</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11099"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 10/04/2013 - 22:17.</div>
    <div class="content">
     <p><em>You need to check line 33: #define freq RF12_433MHZ</em></p>
<p>That&#39;s the 33rd line down counting from the top of the sketch! ! !&nbsp; I use a decent editor (Notepad++) that shows the line numbers in the left margin (here&#39;s a bit of the Nanode sketch):</p>
<p><img alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXMAAACaCAIAAADU5D87AAAUi0lEQVR4nO2cz2rbyvvGfQm+BF+CL0H7ZuHNgSy98KorbbozVCvXFIwD9sLuRuom9SGhNiEQQSHKIZi0GCJCOcTghTYG+6xyCfNbvL8O8x39sTRyPMnk+TCU8Xg0M1Izj54ZyW9lrZv//vuPMZbnXwDAa6GiW1jWLJ+sQFwAeEXoVxbICgDmoV9ZGDwLAMahX1kgKwCYh35lYfAsABiHfmWBrABgHrmUZblcnp6e9nq9wWAwHo8XiwWV+74/Ho8dxymjLAyeBQDjyKssFxcXXE16vR7lF4vFfD4vqSyQFQDMo/BqaLlcSlICzwIAkCimLA8PD+PxmPuXvSgLZAUA8yigLIPBoNPpuK67XC73qCwMngUA4yi8GgqCYDAY7FFZICsAmEcuZVksFg8PDzzf6XT2qCwMngUA48ilLPP5fDwe93q98XjMnzovFovBYDAYDBzHoYyaskBWADAP/W/KMXgWAIxDv7JAVgAwD/3KwuBZADAO/coCWQHAPPQrC4NnAcA49CsLZAUA89CvLAyeBQDj0K8skBUAzEO/sjB4FgCMQ7+yQFYAMA/9ysKewbOEV+7JcU3hcoxa9VGr7liVQkcVrX94pAuSf8Av/9TAy6RUtEr63bNUWJQysuIP7cfb6ePt9MZzxPLNKgyvXOWLoktZojAgaVNQt+yRSBcEygKem1LRKs/PzylWy3w+54VFYSU8y6zbZIzdnfUfb6d7vCiHVJYoDBJFcL/Kotx4Ys3wyo3CIP+oDkPFqfAMz++95bSv0irk/1aNoiebsz7VEf8tPLCiQhCPVkkox1IoIyuOVRm16t2j6qhVp7/1WbcZv+d3j6p3Z33Ptk6Oa3dnfV7uD22q7NnW0ybi5dJ0Ej/y/NMmmrQbo1Z90m5IhZ5tTdqNPHPvxnNGrfpmFca/ym4zraO4ECReEMeq+EPbsy3PtrLH6ViV+KXbrMJRqy75RO1kKEuGNBRtWa1Cmd6zKdpmzvpitUMoS2K0yvV67fu+67pqysJKeBZ/aLM/zkVCmkg0KzarsHtUpcJZtzlpNygvza48yjJpN2hqbVYhL/Rsi9zT0ybiHSWyWYWebWVMzuw20zrKMCPSWdAph1euZ1sZ40y8dMSN53i2lSiLh0ea2yQuUj6xUGxBLMnOJDa+s5F4p1LviR8Txy81m3hUYoW0+tmHK9jAPUSrXC6XnU6Hh4YqSpl9llGrzv+VSJQDMe9YFdGnpB2bdnjifCYPxVNi4/zwnWYho820jvIrS55DdtaMwiBbQA9GxuSJf8yooNbyzmbTqu1x8BmFReVm59nloWy0yuVy2ev1lLdv1yU8C18H0b/StzsnUveoWkZZEgvTljZxHm+no1Y9Y3sou82da6jsr6SlYsY4M5Rl5ykckpKTk6VvQBxSWfI0snMMO4eX7bYOqixp0SofHh4Gg0EZWVmX8CxRGNBqKNHP71SWWbfJl1FRGIgTVbIz3aMqfXt31hcXKbSWicKAF/pDO22FFedpE3m2Nes2eV/+0KY8TdqMNtM6yq8sdEY3nsPbIUatetrzaXHrZ9ZtSptTGslvSTIy2R8L+YW08v16lqKmI9um5RemnKhHq1yv147jdDqdwR9831dQFqbqWR5vp7QFkGefJZ5/2kR8F3PSbojKcnfWp21duiHfnfVPjmuebVGGH07HzrpN8bbPd0xzbnCGVy6vGV65fIEj6kVim4mFGcsxyafQ9nNcHfIoy43nlHmov3fyzP/EjGRYxJmTMakS7+0ZKpDWabya1MXOk9rZyM6Lk3YREt0NK4L+N+XwDi44PEXnSfxA5Rb2TuE5f5CR61cWht8NgYNTZnYp3MCfj5cpK+wlKAtkBQDz0K8sDJ4FAOPQryyQFQDMQ7+yMHgWAIxDv7JAVgAwD/3KwuBZADAO/coCWQHAPPQrC4NnAcA49CvLc8jKG49W+bSJxDA02SgM/qWdL3iBqEerTAthWRRWLj6LSdEq98WN5+QPyyQOPqcevbTzBS8Q9WiVaSEsi1LGsxgcrbIMJ8e1/L9Czh+rJbvaywxhCXSxn2iVaSEs88BUPYt50Sofb6eebUm/dT45rvE8hYkUy2kM4klFYcDDSvD4D1LAqvjg6brxn0on/nxcvAivJYQl0MUeolWmhbDMSRnPYli0yigMSOCiMOD7RHdnfT7OWbfJZ7JjVRIjpMy6TW6CPNsiK0Ehmki50gYfP/E0XksIS6CRstEq00JY5oeV2GcxL1pleOVSUKXEsG9Sp4njF7eubzxn1m3eeI4/tGnzhbQ4LXSuwmroJYewBBopG60yozAnZWTFsGiVs26Th5UT2yercnfWF91Z2maHGCOOepm0GxSnatJuUI9qMXHzHPKiQlgCjahHq0wLYVkUpupZzItWyft9vJ2KY6alk7TKSFSB+P6OY1VoSLSxkjF48UwlXmMIS6AX9WiVaSEsi6LsWcyLVknt07HSgiI7+iQfUnwZwrdjZ93mzsGT46Bzlxp5dSEsgV70vynH8A7unrg76+PRDHgh6FcWyMq+ODmu4aEMeCHoVxYGzwKAcehXFsgKAOahX1kYPAsAxqFfWSArAJiHfmVh8CwAGId+ZYGsAGAe+pWFwbMAYBz6lQWyAoB56FcWBs8CgHGoR6vkXFxcKId9WsOzAGAi6tEqicViMR6PyygLg2cBwDjKRqscDAYPDw/wLAAAkVLRKk9PTykPzwIAEFGPVjmfz3kcOXgWAICIerRKx3FoT3cwGDiOMxgM1II/MXgWAIxDPVqlCDwLAEBEPVrlvpSFwbMAYBz635SDrABgHvqVhcGzAGAc+pUFsgKAeehXFgbPAoBx6FcWyAoA5qFfWRg8CwDGoV9ZICsAmId+ZWHwLAAYh35lgawAYB76lYXBswBgHPqV5flkxbEqO+tEYTBq1UetumdbvDC8ck+Oawo9AgCIUtEqB4MB/7mz7/tqysJKeBZ/aD/eTh9vpzeeE/82j7J0j6pRGEiFm1UYXrmFrmMGjlWhLqIwoCHdeM6k3eAVJu3G3Vmfaj7eTvlRvII/tE+OayfHNX9o829HrfrJcW3UqvOhUiGlWbeZMaS7s75nW9L14Q2OWnUaDwDKlIpWORgMKFZLGcp4Fpo/d2d9PiFF8ihLnjolcawKCd+N53SPqlTYPapuViFjbLMKeaFjVbh14gMjFaC8Z1tcg6hkswpPjmskLvnPJQqDx9tpXFmeNpHSKQIgUypaZTycggJM1bPMuk26S3ePqqNWnXzB0yaatBujVn3SbvCZQ4WebU3aDe5QZt3mqFXn93masVRI5byj7lGVpvfJcY3fzBPbTIQvtTzbGrXqVHh31ifbwg0LY8yxKrNuk1rjA+Cnxv6s3dj/ikh45cYL8yDV5wIHQHlKRat0HIdHV1AL+7Qu51lodSA6/0m7QQZhswr5zPFsi0zN0yaS5k/abBTLHatCk1/0FxltStDaJAoDki1e3j2qPt5OxQ0dx6psViEpDh+ANEL6mFbIV0PZYpfWMqmnZ1t5DgcgA/Volev1mmd83x+Px2rKwkrss9BElaYrz4uTk085sTLLrSyF2owPMgoDmq5izbuzvrixwhuftBuiLO5UlqdNlCg3O5Hq86WQuP4CQA31aJUSysGfysgKrYPoXypMVIFRq06bGnGUlSWjzfg4WZIIxnunj+RuDr8ayvkVAHlQj1Y5n8/n8zkVXlxcHN6zRGFAqyHxBuvZFq2G+IMYxpg/tPmzGMnnKytLRpsSoprkURY6i5w7uFEYKOzgxnunR2yUv/EceBZQEvVolQ8PD67r0iNncYlUFGXP8ng75duuvPBpE3m25dnWrNsUV0Z8a1Z6Pq2sLBltSigoi/TgRuGpc8YCjb/Cw+szxmh/hz5O2g08JAIl0f+mHMM7uAAYh35lgawAYB76lYXBswBgHPqVBbICgHnoVxam5Fm2WyQkpJeb9CuLmmfRfuGQkJAykn5lgWdBQjIv6VcWeBYkJPOSfmWBZ0FCMi/pVxZ4FiQk85J+ZXk+z+JYlZ117q+DYbM+bNa/vLd44T9/u72/avu90IkdISGZmkpFq1yv1+fn51TIg7YUpYxn+f7Z/nk5/Xk5vRw68XPLoyyf3lXvrwOp8N9f4T9/u/u90Ikd7Tc5VoXEa9isi32J5d8+Nrdb9sPtf3lvSdfnn79drn15hno5dHgLq9/Rt4/N3l818fDEQhoP5e+vA96COBie/+H2+cgdq/L9s/2sFxBpj6lUtErf913XpTz/MXRRyngWPk9+Xk7j55ZHWfLU2Us6QEe8i/vrQPRc8a7vr4Ofl1Op/Ptne/U72m7Zz8vpTst2fx2I2rT6HXFx/+H26fDEQhoPlV8OnU/vqvFBxgf876/w07sqDe+QqeJUpEz8K6TkS1dUCMRolb1eT1lQOMqe5dvHJt2NP72r8rv06nf09UNj2Kx//dAQ/+6/fmh8eW99/dDgd85vH5t0J6Rb4g+3zwupnF+jT++qdJPv/VWjamltJqbEjrZb1vurdn8d0GipMLFN8Yz4PExMaZMzTdQyxG6nDg6b9X9/hYnVVr+jeLlYyJeEX95bw2Y9z4CHzfreXWSu6ZGiLJCV3ZeukArEo1VeXFxQIAXlaJVlPAvZY3IulL5+aND9UPy7//LeIlOz+h1JkzPPrHOsCs18unPubHNng7zky3tLvA8ntpl4RtldfP9si7s5RZXlh9v/+qGR0dG3j00aUqK5+PLekhanUiEtyu6vA9JcPhhx4SMefjl0tGxOZcgKpcR8WrV4m1I+fmy891ekaKWiVTqOEwTBer1eLBZ8iVSUMvss9HfJ/zq3WyZOcnENz/9qxcrb3MpSqM2dDfISyd4ntpl4RmldcHMktpyx/xJvhETt319hWi8/L6eJRoP+Iz69q3790BB7jxfSMGjnZadn0bUO2uZbCqVl9vgxXv4qUqlolZ1OR1QZNWVR9ix8HUT/btP/QMm6J56/srJktJmzo0TPH28zz7pG/Fac+fnPkdLqd0RrtOxeaFOWq5hUn3aCpaPEQvF+sFNZdK2DtsWVJcOkxD/mqSx1Z6CyJEarXK/X5+fntDKioHNqyqLsWe6vA1oNiVaZu27xucP3zza399I0UFaWjDZ3NphWkthm4hlldyHu5uQ8x+2W/fsrjMtEzpO6vw64Jt5fB+SzEgu3/+sxs5WFtrfyj2ePKUNWEr9N24jJox1v17MkRqtcr9fL5ZICVrque/h9lp+XU77tys9n9Tv68t768t769rEpriP41qy0BaCsLBlt7mwwo+t4m+IZ5VQWmsZ8BSEdxd+s4askXo3cn7TTnKfHn5dT2uGmoZI8JRZuiyiL6I/4I/PDpKLKso1tl+T/mL0LkzGMl5z0vymHd3Dzp4M9I0faV9qXIkBZClPm2dBbS4dXFnFH+cCuwYy0F0V4dbKyfQnKAs+ChGRe0q8s8CxISOYl/cqi5lkAAC8Z/crClDwLAOAlo19ZICsAmId+ZWHwLAAYh35lgawAYB76lYXBswBgHPqV5flkxbEqO+tEYTBq1UetumdbvDC8ck+Oawo9AgCIUtEqT09PB3/odDpqAStZCc/iD+3H2+nj7fTGc+Lf5lGW7lE1CgOpcLMKwyu30HV8sYRXLpdOfqZ3Z33PtqTr87SJRq36yXFt0m48baLDDxWYRKlolWKFXq/HIyoUooxnmXWbjLG7s/7j7TT+bR5lyVPnVeMPbZKJx9spN2JRGDzeTqVzn3WbpKf+0PaH9qEH+iKpOBUp86y9mESpaJUc13Xn87mCrKxLeJZZt+lYlVGr3j2qjlp1uiE/baJJuzFq1SftBp85VOjZ1qTd4PftWbc5atWphVGrfnfW54VUzjvqHlXpJn9yXKNqaW0mwhdcjlWhoVL5yXEtCgMaLTVLbVLirkEcCc93j6r+0PZsi594HiQpkT5y3XnaRFgMEgrKoiATUBY5WiUv5LGgFCjjWejWSs6FmLQbtDLarEI+czzbIlPztIm6R1WxhTTPIs1nmvmbVcgPz2hTghREOpya9WxLXHfwwd94zqTdSBwJz1Cb4ZUr7hBlcHfW523GW6aPfIPJeCuXhzRZ4QEQpBLpq/i/Yk2xcoZ+SQ1K+cRxxoenhVLRKgke/0kNVmKfhe7/3AUwxqSpyzPkGiiJLeRUlkJtSpwc1zarkMU0yLEq0naG+C3Pp/W+8xREqGsaRtqBjlXZrELSUCgLy1QWMZPnY/6a+TvK2awuSkWrJMbjsfJSaF3Cs/B1kLjESJxyo1ZdmlTxOhnlRduUuDvrnxzXaHNUXLnEu1ZTlmzHxP6sbuKLprTV0GYVZmvlGyG/ssStCiuoLIkuw3xlSYtWSSjH1iaYqmeJwoBWQ+JywLMtWlBEYcBnjj+0+UJAmmDKypLRpkTaLI13nbga4l7j7qwvKgsVijUTIZlIHKE0AH9o880m7OBmr1DETB5HA8+STFq0SkI5tjah7Fkeb6d8JvDCp03k2ZZnW7NuU7yZ861Z6fm0srJktCkxaTfIs1Diz7PjXSfu4JLl8WyLMvxY2vqVdmoST4Q8Hd+oFneUxaUcf+osXs83S35lYbt2QBJ3ZNLaifcVd0NSO4kDeE37LM8EM/0d3Em7wddN4r5yGbAP8hZQcx/aNYXQryxmywpjbNSqiwYk56OcbKAsbwQF9wFl+X+Y6Z6FvwVLb9ng9VbwFtCvLGbLCgBvE/3Kwkz3LAC8QfQrC2QFAPPQrywMngUA49CvLJAVAMxDv7IweBYAjEO/skBWADAP/crC4FkAMI5S0SoXi8V4PJYKiwJZAcA8SkWr7HQ69Bvo5XKpHPyJwbMAYBylolU6jsOjKygrC2QFAPMoFa2SYrWcnp6en58rr4YYPAsAxlEqWqXv+67rUpQ53/fVlAWyAoB5lIpWyZdFy+VSCjSXHwbPAoBxlIpW2el0aBG0WCyUY1ZCVgAwj1LRKheLheu6g8HAdV3sswAAOPrflIOsAGAe+pWFwbMAYBz6lQWyAoB56FcWBs8CgHHoVxbICgDmoV9ZGDwLAMbxf/nNKHkzFPrkAAAAAElFTkSuQmCC" /></p>
<p>If your RF module is a 433 MHz version, the line is correct. If it is 868 MHz, you change the line to #define freq RF12_868MHZ</p>
<p>[Edit] Both ends - emonTx and Nanode - need to have the same frequency for both the module and the software.</p>
<p class="rteindent1">Aside:<br />
	As you asked about libraries, for interest &amp; information only, look in the Jeelib library at the file RF12.h&nbsp; In there, you&#39;ll find the three frequencies defined:</p>
<p class="rteindent1"><img alt="" src="data:image/png;base64,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" /></p>
<p class="rteindent1">The reason that&#39;s done is to make it clear what frequency your sketch is using. What happens is wherever in your sketch you want to set the frequency, you could write &quot;1&quot;. But that&#39;s mysterious - it means little. And if you want to change the frequency, you have to change it everywhere. But if you write &quot;freq&quot; instead of &quot;1&quot;, and then &quot;#define freq RF12_433MHZ&quot; at the top, the compiler substitutes &quot;RF12_433MHZ&quot; instead of &quot;freq&quot;, and if you change your mind, you only have to change it once. But the compiler has already come across &quot;#define freq RF12_433MHZ 1&quot;, so actually it substitutes &quot;RF12_433MHZ&quot; for &quot;freq&quot; and &quot;1&quot; for &quot;RF12_433MHZ&quot;<br />
	That way the program gets &quot;1&quot; but you read it as &quot;RF12_433MHZ&quot; and you know what the frequency is.</p>
<p>But as you see &quot;&amp;node=10&amp;csv=0,0,0,21&quot; it&#39;s obviously working. If you get the frequency wrong, it will work over a very short distance, but nowhere near the 100 m that it is supposed to with no obstructions.&nbsp; However, you don&#39;t have the a.c adapter plugged in? otherwise the last number - 21 - should be 230 or whatever your mains voltage is.</p>
<p><em>I have an APIkey read-only &amp; read &amp; write - which one?</em></p>
<p>You&#39;re <strong>writing</strong> data into the database - does that give you a big clue? ! ! !</p>
<p><em>a drop down box with four options</em></p>
<p>This is because the IDE is cross-platform and historically, Windows systems have handled the end-of-line in a text file differently to Unix and its derivatives - Mac and Linux. You choose the one that gives the correct display.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11106"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Thu, 11/04/2013 - 01:27.</div>
    <div class="content">
     <p>I got the RF modules to pick up on the 868MHZ by defining them through notepad +++ and uploading them again but is it common to get so many fails?</p>
<p>I have the emonbase in my room connected to the computer via the programmer cable and then the emontx is in the hall (4-5m away) powered by a 9v plug got from the openenergymonitor shop.</p>
<p>The connection seems really weak. It works sometimes, and when I move it further away I get RF fail (8m away).</p>
<p>But it just says &quot;<br />
	Data sent: /api/post.json?apikey=YOURAPIKEY&amp;node=10&amp;csv=0,0,0,22<br />
	&nbsp;</p>
<p>I ordered the 868 MHZ modules.</p>
<p>Is there anyway to speed up the serial code of this process - it seems to only show results every minute or two.</p>
<p>What could I be doing wrong? Could the soldering be anything to do with it? I did emontx myself and the antenna could possibly need more &#39;insulation&#39;.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11110"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 11/04/2013 - 07:27.</div>
    <div class="content">
     <p>The emontx should be transmitting every 5-7 seconds and so you should see:</p>
<p>Data sent: /api/post.json?apikey=YOURAPIKEY&amp;node=10&amp;csv=0,0,0,22 at the same rate.</p>
<p>Does the rate increase to this when both of them say 1m apart?</p>
<p>I wonder, just incase we made a mistake here with sending you a wrong RF module do both of your modules have two unused pads where another of those small resistors would be (This resistor is present on&nbsp;433Mhz modules)?</p>
<p><a href="../sites/default/files/rfm12_868.jpg"><img alt="" src="../sites/default/files/rfm12_868.jpg" style="width: 400px; height: 226px;" /></a></p>
<p>The modules can be quite sensitive to the quality of soldering on the outer pads that solder up to the emontx. Its easy to not make a connection, the solder joints there are always worth checking too.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11130"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 11/04/2013 - 14:26.</div>
    <div class="content">
     <p>You are only seeing a print every minute because the sketch you are using is waiting for the Ethernet to time out.</p>
<p>At the risk of adding some confusion, you could switch to a pair of test sketches that only transmit and receive, while you are testing only the radio side. You&#39;ll find them on GitHub as &quot;RFM12B_Simple&quot; - one for your transmitter (TX), the emonTx; and one for your receiver (RX), the NanodeRF. These send a set of values every couple of seconds.</p>
<p>Like the sketches you&#39;re using, you need to set the frequency to suit your modules - or more likely, try both settings (433 &amp; 868) to see which works best (over the longest range) if you can&#39;t tell which version of the RFM12B you have.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11237"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Sat, 13/04/2013 - 21:37.</div>
    <div class="content">
     <p>Yes, they have the two unused pads so they must be the 868MHZ RF modules.</p>
<p>I uploaded that RF simple sketch from Github and it appears to work no problem, even when I move it outside the room. The values I get every couple of seconds are attached.</p>
<p>Then I uploaded the emonTX_CT123_voltage sketch to the emontx and NanodeRF_mulitinode sketch to the Nanode RF with both frequencies defined at 868MHZ.</p>
<p>The results are attached where I have them beside each other first and then away from each other.</p>
<p>Could it be that I am running the Emontx off a usb powered plug, or are these values okay?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11243"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 13/04/2013 - 23:18.</div>
    <div class="content">
     <p>The simple sketch runs perfectly OK, it&#39;s not missing any transmissions - at least in the 7 that I can see. Although I didn&#39;t see this, I think the fact that the Nanode is waiting for the Ethernet is making it miss messages. RF Fail means that it didn&#39;t <em>handle</em> a message for 30 seconds, and if it was tied up waiting for the Ethernet to respond, that would happen. I think you can carry on and set it up to work over Ethernet to emoncms.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11244"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Sat, 13/04/2013 - 23:43.</div>
    <div class="content">
     <p>I&#39;ve been trying to set up the ethernet connection&nbsp; but when you say &#39;&quot;invent a Mac address&quot;....how do you do this.</p>
<p>This was the code as before it was changed:</p>
<p>// ethernet interface mac address, must be unique on the LAN<br />
	static byte mymac[] = { 0x42,0x31,0x42,0x21,0x30,0x31 };</p>
<p>I found my Ethenet adapter Local area connection with a physical address of 00-1D-72-FB-5A-90 in command prompt ipconfig/all.</p>
<p>I&#39;ve then input it as follows:</p>
<p>// ethernet interface mac address, must be unique on the LAN<br />
	static byte mymac[] = { 0x00,0x17,0xC4,0x75,0xE4,0x38 };</p>
<p>Is this how you do it??...the sketch compiles okay and I&#39;ve uploaded it to the Nanode RF but haven&#39;t seen any change in the values I&#39;m receiving on the serial monitor.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11245"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 13/04/2013 - 23:57.</div>
    <div class="content">
     <p>Yes, static byte mymac[] is where you change it, and the format is correct. As far as I know, although the MAC address is supposed to be totally unique world-wide, it is good enough if it is unique within your LAN. That is, it is different to your router, computer and any others. The code before you changed it would probably have been OK too.</p>
<p>Have you connected to your router now, and does it communicate like this when you start or reset it:</p>
<p>DHCP status: 1<br />
	IP:&nbsp; 192.168.1.64<br />
	GW:&nbsp; 192.168.1.254<br />
	DNS: 8.8.8.8<br />
	DNS status: 1<br />
	SRV: 213.138.101.177<br />
	Data sent: /api/post.json?apikey=39623397b3126c1afc2ddf1ea98bc5a2&amp;node=10&amp;csv=0,31,3,36,0,28<br />
	Time request sent<br />
	Time: t15,53,13<br />
	Data sent: /api/post.json?apikey=39623397b3126c1afc2ddf1ea98bc5a2&amp;node=10&amp;csv=0,32,0,39,0,31<br />
	OK recieved</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11247"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 14/04/2013 - 01:31.</div>
    <div class="content">
     <p><em>As far as I know, although the MAC address is supposed to be totally unique world-wide, it is good enough if it is unique within your LAN.</em></p>
<p>Yes, uniqueness on the LAN is sufficient as the MAC address doesn&#39;t leave the subnet.</p>
<p>If you end up with a few of these devices around your house it can get tricky to keep track. &nbsp;You can set up your own locally administered convention quite simply. &nbsp;I set the U/L bit, put my initials in another byte (which happen to be all &lt;= &#39;f&#39;) and then start &quot;issuing&quot; from 0, using a text file to keep track. &nbsp; That way I can immediately spot my MAC addresses in an ARP table, and if I want to further distinguish between them I can just turn to the text file to see exactly which device it is. &nbsp; The other tip is to avoid setting the multicast bit.</p>
<p>Once you&#39;ve set the U/L bit you&#39;ll know you&#39;re safe from conflicting with any &quot;bought&quot; products, as they&#39;ll all ship with universally administered addresses.</p>
<p><a href="http://en.wikipedia.org/wiki/MAC_address" title="http://en.wikipedia.org/wiki/MAC_address">http://en.wikipedia.org/wiki/MAC_address</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11248"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Sun, 14/04/2013 - 03:18.</div>
    <div class="content">
     <p>Perfect! I&#39;ve got it up and running on emoncms in realtime.</p>
<p>&nbsp;</p>
<p>I&#39;m just wondering now is my CT sensor placed the right way. The graph I&#39;m getting is very straight and staying at 0.00- is it very sensitive to change?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11261"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 14/04/2013 - 11:47.</div>
    <div class="content">
     <p>Is that graph power or current? If it&#39;s power, is your voltage sensor plugged in? You need both voltage and current to show power. Where is your c.t.? I can&#39;t see it in the pictures. You should clip it around one of the main cables. In your picture, 4 is the incoming line, 3 the incoming neutral, 2 should be the outgoing neutral (why is it red?) and 1 should be the outgoing line. I would clip it around 3 as it looks the easiest to get at. You decide whether you want imported power to show as positive or negative. If it&#39;s the wrong way round, reverse the c.t. on its cable.&nbsp; Finally, is the plug on the c.t. fully home in the socket? They can be tricky to get all the way in, there should be no bare metal of the plug showing. Does it read a sensible power on the serial monitor?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11266"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Sun, 14/04/2013 - 16:08.</div>
    <div class="content">
     <p>I don&#39;t know what that is a graph for to be honest.</p>
<p>My setup at the moment is as follows:</p>
<p>EmonBase connected to a power supply with a 9V Usb powered plug into usb socket on emonbase and ethernet cable connected to router.</p>
<p>EmonTx connected to a power supply with a 9V Usb powered plug into usb socket on emontx and CT sensor connected to cable 3 on the electricity meter. The CT sensor is securely connected to the socket closest to the RF module.</p>
<p>I&#39;m just staying in this house for 1 year so I can&#39;t tell you much about the electricity meter - it&#39;s quite an old house!</p>
<p>Which is the voltage sensor?</p>
<p>On the inputs page on emoncms, I see 3 inputs from node 1 and 4 inputs from node 10.</p>
<p>For that graph I just clicked on the wrench icon on the first input of node 10 and set up a Logtofeed to begin. What processes should I add after this?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11268"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 14/04/2013 - 16:50.</div>
    <div class="content">
     <p><em>Which is the voltage sensor?</em> It&#39;s an <a href="http://shop.openenergymonitor.com/ac-ac-adapter-uk-plug/">ac-ac adapter</a> plugged into a convenient socket. I guess you don&#39;t have one, in which case you&#39;re using the wrong sketch!</p>
<p>The sketch you&#39;re using expects the voltage sensor to be plugged into the coaxial power socket at the opposite corner to the RFM12. It allows the real power to be measured. If you haven&#39;t got one, you need to change to the emonTx_CT123 sketch which measures only current and assumes a fixed voltage (240 V but you can change it) and unity power factor. (Hence it give an approximation only to the power.)&nbsp; (You can read in Building Blocks how the calculations are done.)</p>
<p>Do you mean 5 V USB plugs? - I hope so!</p>
<p>In emoncms, Node 1 will likely be from clicking on a dummy demo feed somewhere - or an rf fail message. Node 10 is your emonTx, and the inputs are the values in Payload in the order they are in Payload. So input 10.1 is power. But as voltage is zero, it will be zero, which it is.</p>
<p>I can&#39;t tell you what other processes to add - it depends on what you want to show! kWh seems a likely one.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11269"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Sun, 14/04/2013 - 17:54.</div>
    <div class="content">
     <p>Yes, apologies, I meant 5v.&nbsp;</p>
<p>Note: emonTx cannot be powered using this adapter, 5V DC USB power adapter is required.&nbsp;</p>
<p>Does this mean that I have to plug both this ac adapter and the 5v usb plug into the emonTX?</p>
<p>I have to buy this in so...</p>
<p>I uploaded the emontx_CT123 sketch and started to get graphs. It&#39;s strange though because the time on the graph seems to be one hour behind....</p>
<p>I might see if I can it running on wamp now...</p>
<p>I&#39;m just wondering also, if this is the basic sketch...do I not have to burn all the firmware to EmonTx to get all the features at some stage or do you leave it as it is in order to update/change the sketch if needed?</p>
<p>Many thanks for all the help Robert by the way....I&#39;d be lost without it.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11273"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 14/04/2013 - 18:59.</div>
    <div class="content">
     <p><em>Does this mean that I have to plug both this ac adapter and the 5v usb plug into the emonTX?</em><br />
	That is correct. The a.c adapter is only there to provide a measurement of the mains voltage. It doesn&#39;t provide power.</p>
<p><em>the time on the graph seems to be one hour behind....</em><br />
	You can set your time zone in emoncms to put that right.</p>
<p><em>I might see if I can it running on wamp now...</em><br />
	I&#39;ve just helped another forum member with that: <a href="2148.html" title="http://openenergymonitor.org/emon/node/2148">http://openenergymonitor.org/emon/node/2148</a></p>
<p><em>I&#39;m just wondering also, if this is the basic sketch...do I not have to burn all the firmware to EmonTx to get all the features at some stage or do you leave it as it is in order to update/change the sketch if needed?</em><br />
	I&#39;m not sure what you&#39;re asking there. The sketch is all you need to load, there should never be any need to touch the&nbsp; bootloader.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11276"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Sun, 14/04/2013 - 21:04.</div>
    <div class="content">
     <p>Okay I followed all the details on setting up Wamp but when I finally click into the Emoncmsmaster under MyProjects, and try to log into emoncms....it says that my username does not exist. I used the same username and password as I used with emoncms previously and simply edited the settings.php in a wordpad document filling them in between the apostrophes. </p>
<p>I don't see where the problem is? Any suggestions?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11278"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Sun, 14/04/2013 - 23:57.</div>
    <div class="content">
     <p>never mind, I just had to register again.</p>
<p>But does this now mean that I have to replace the old API key with a new one?!</p>
<p>Honestly I was not sure what was going to happen by setting up my own database and this may be a stupid question but what is the big advantage of doing this?</p>
<p>Can I feed this information to my own website for processing?</p>
<p>Cheers for the help again Robert.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11279"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 15/04/2013 - 01:59.</div>
    <div class="content">
     <p>Even if you have the same user name and password in your own copy as in emoncms.org, I think (though I haven&#39;t tested this) you&#39;ll get a different APIkey, which you&#39;ll therefore need to change in your NanodeRF.</p>
<p>Your user name inside emoncms is NOT the one you put into settings.php&nbsp; You can make the two to be identical, but they aren&#39;t linked in any way. You can think of the &quot;user&quot; in settings.php as being emoncms itself, and this is it&#39;s user name and password to get into the database, the one which you set up for it in phpmyadmin. It doesn&#39;t have to be a person who logs in to emoncms and sends readings to it.</p>
<p>The big advantage of having your own database is it is under your control. You can back it up if you want to (emoncms.org is <strong>not</strong> backed up, as far as I know), and you can customise all of the software to do your own thing, e.g. design your own graphics.</p>
<p>If the database is accessible to your server, you can do whatever you like with it! There are others around here who know more about this than I do.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11280"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Mon, 15/04/2013 - 02:40.</div>
    <div class="content">
     <p>Is the API key the only code you would need to change in the NanodeRF_Multinode sketch? I can&#39;t seem to get it up and running on my new database when I log in and the serial monitor doesn&#39;t show &quot;OK received&quot;...</p>
<p>&nbsp;</p>
<p>Surely one of the lines has to change here in order to add localhostserver:</p>
<p>	// 1) Set this to the domain name of your hosted emoncms - leave blank if posting to IP address<br />
	char website[] PROGMEM = &quot;<strong>emoncms.org</strong>&quot;;</p>
<p>	// or if your posting to a static IP server:<br />
	static byte hisip[] = { <strong>192,168,1,10</strong> };</p>
<p>	// change to true if you would like the sketch to use hisip<br />
	boolean use_hisip = false;&nbsp;</p>
<p>	// 2) If your emoncms install is in a subdirectory add details here i.e &quot;/emoncms3&quot;<br />
	char basedir[] = &quot;<strong>________________</strong>&quot;;</p>
<p>	// 3) Set to your account write apikey<br />
	char apikey[] = &quot;<strong>________________</strong>&quot;;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11354"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Tue, 16/04/2013 - 19:21.</div>
    <div class="content">
     <p>Any thoughts?</p>
<p>I still haven&#39;t figured out how I can get the information on my database.....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11360"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 16/04/2013 - 21:13.</div>
    <div class="content">
     <p>If you are posting to a local server, you must use the static IP address (&quot;hisip&quot;). The address you use is the one that your router has allocated to the machine that emoncms is running on. To instruct the NanodeRF to use that, you must set use_hisip = <strong>true</strong>;&nbsp; You must also set basedir[ ] to the correct subdirectory, and the APIkey to your account write apikey for that instance of emoncms.</p>
<p>You will also need to instruct your router to always allocate the same IP address to the Server, which it identifies by the MAC address.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11369"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Wed, 17/04/2013 - 02:03.</div>
    <div class="content">
     <p>okay, so I removed emoncms.org from this</p>
<p>// 1) Set this to the domain name of your hosted emoncms - leave blank if posting to IP address<br />
	char website[] PROGMEM = &quot;&quot;;</p>
<p>&nbsp;</p>
<p>But I don&#39;t understand when you say &quot;The address you use is the one that your router has allocated to the <u>machine?</u> that emoncms is running on&quot; - is that your physical IP address of the ethernet adapter local area connection...? This is what I had previously put in to run it on emoncms.org</p>
<p>And subdirectory? the sketch gives an example as &quot;i.e &quot;/emoncms3&quot;&quot;.....but does this just mean that if my &quot;Emoncms-master&quot; folder that I have placed in Wamp folder on my drive, I call it &quot;/Emoncms-master&quot;???</p>
<p>&nbsp;</p>
<p>Also, should it say &quot;OK received&quot; when it works?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11388"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 17/04/2013 - 13:07.</div>
    <div class="content">
     <p><em>But I don&#39;t understand when you say &quot;The address you use is the one that your router has allocated to the <u>machine?</u> that emoncms is running on&quot; - is that your physical IP address of the ethernet adapter local area connection...? This is what I had previously put in to run it on emoncms.org</em></p>
<p>Yes. It is the address of the server. But because use_hisip was false, the Nanode wasn&#39;t using that.</p>
<p><em>And subdirectory? the sketch gives an example as &quot;i.e &quot;/emoncms3&quot;&quot;.....but does this just mean that if my &quot;Emoncms-master&quot; folder that I have placed in Wamp folder on my drive, I call it &quot;/Emoncms-master&quot;???</em></p>
<p>&nbsp;Correct.</p>
<p><em>Also, should it say &quot;OK received&quot; when it works?</em></p>
<p>&nbsp;Correct - and send back a time when it gets asked every minute (I understand this didn&#39;t work, but has been fixed in the last day or two). Or put another way, it should behave exactly as emoncms.org did.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11390"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Wed, 17/04/2013 - 15:34.</div>
    <div class="content">
     <p>It just doesn&#39;t seem to work....no &quot;OK received&quot; and it doesn&#39;t pick up the time.</p>
<p>This is my setup:</p>
<p>// ethernet interface mac address, must be unique on the LAN<br />
	static byte mymac[] = { 0x00,0x1D,0x72,0xFB,0x5A,0x90 };</p>
<p>	// 1) Set this to the domain name of your hosted emoncms - leave blank if posting to IP address<br />
	char website[] PROGMEM = &quot;&quot;;</p>
<p>	// or if your posting to a static IP server:<br />
	static byte hisip[] = { 192,168,1,10 };</p>
<p>	// change to true if you would like the sketch to use hisip<br />
	boolean use_hisip = true;&nbsp;</p>
<p>	// 2) If your emoncms install is in a subdirectory add details here i.e &quot;/emoncms3&quot;<br />
	char basedir[] = &quot;/emoncms-master&quot;;</p>
<p>	// 3) Set to your account write apikey<br />
	char apikey[] = &quot;22eedff1742e32543e94bc2d29abc3&quot;;</p>
<p>I&#39;ve attached the values I get on the serial monitor.</p>
<p>I would be using this link to get emoncms which has been updated recently.</p>
<p>I&#39;m also using firefox but I wouldn&#39;t think that makes much of difference...</p>
<pre>
<code>https://github.com/emoncms/emoncms</code></pre><p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11392"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Wed, 17/04/2013 - 17:39.</div>
    <div class="content">
     <p>I wonder is it to do with my network connections.</p>
<p>I have a local area connection and a wireless network connection. I&#39;m connected to the internet wirelessly at the moment and the ethernet cable connects the Nanode RF to the router.</p>
<p>Which connection do I configure in order to set up a static Ip address? Surely it&#39;s the local area connection (ethernet) considering that is the one connected to the Nanode RF.</p>
<p>Although, the ip address that I set it to obtain do not show up when I upload the sketch and receive values. It seems to be trying to connect to a different ip address in the serial monitor. This must be the wireless network connection ip which is currently set to obtain it&#39;s ip address automatically...</p>
<p>I can&#39;t seem to set up a static ip on this though or my computer won&#39;t connect to the internet..</p>
<p>any thoughts?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11398"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 17/04/2013 - 21:38.</div>
    <div class="content">
     <p><em>I wonder is it to do with my network connections.</em> I think there is little doubt that is the case.</p>
<p><em>I have a local area connection and a wireless network connection. I&#39;m connected to the internet wirelessly at the moment and the ethernet cable connects the Nanode RF to the router.</em> That is exactly my test set-up.</p>
<p><em>I&#39;m also using firefox</em> So am I.</p>
<p><em>Which connection do I configure in order to set up a static Ip address? Surely it&#39;s the local area connection (ethernet) considering that is the one connected to the Nanode RF.</em>&nbsp; I have just written a draft set of instructions for connecting to emoncms. For the local version, I used the &quot;NanodeRF_multinode_static_IP&quot; sketch. Here is the top of that sketch:</p>
<p class="rteindent1">/ ethernet interface mac address, must be unique on the LAN<br />
	static byte mymac[] = { 0x42,0x31,0x42,0x21,0x30,0x31 };</p>
<p>	// 1) Set this to the domain name of your hosted emoncms - leave blank if posting to IP address<br />
	char website[] PROGMEM = &quot;&quot;;</p>
<p>	// or if your posting to a static IP server, change to true if you would like the sketch to post to static IP (not sure if this is working..)<br />
	boolean use_hisip = true;&nbsp;<br />
	//static byte hisip[] = { 213,138,101,177}; //emoncms.org IP<br />
	static byte hisip[] = { 192,168,1,69};&nbsp; &nbsp;&nbsp; &nbsp;// IP of Machine with Wampserver running</p>
<p>	// Set to true and enter IP to give the NanodeRF a static IP address - default is DHCP (NB: must be used with static server IP (hisip)<br />
	boolean use_staticIP = true;&nbsp;<br />
	static byte myip[] = { 192,168,1,66 };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //NanodeRF static IP address - not needed if using DHCP<br />
	static byte gwip[] = { 192,168,1,254 };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // gateway ip address - not needed if using DHCP</p>
<p>	// 2) If your emoncms install is in a subdirectory add details here i.e &quot;/emoncms3&quot;<br />
	char basedir[] = &quot;/emoncms-dev&quot;;</p>
<p>	// 3) Set to your account write apikey<br />
	// char apikey[] = &quot;----your API key ---&quot;;<br />
	char apikey[] = &quot;a82fc888b48640ca24a23cf0e4718cc5&quot;;<br />
	&nbsp;</p>
<p>Obviously your specific details will be different. Have you interrogated your router and got the IP address of the server from there? That is the certain way of getting the correct address to put in hisip[ ]&nbsp;</p>
<p>Are you using Wampserver? Have you put it &quot;On-line&quot;? (Hover your mouse over its taskbar icon.) You need to do that to make it visible outside the machine it is running on (i.e. to your router and thence to your Nanode).</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11411"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="acousticer0111&#039;s picture" title="acousticer0111&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by acousticer0111 (not verified) on Wed, 17/04/2013 - 23:49.</div>
    <div class="content">
     <p>It&#39;s really annoying me at this stage because I feel so close but yet I can&#39;t seem to get it right!</p>
<p><strong>// or if your posting to a static IP server, change to true if you would like the sketch to post to static IP (not sure if this is working..)<br />
	boolean use_hisip = true;<br />
	static byte hisip[] = { 192,168,1,69};&nbsp; &nbsp;&nbsp; &nbsp;// IP of Machine with Wampserver running</strong></p>
<p>&nbsp;</p>
<p><strong>// Set to true and enter IP to give the NanodeRF a static IP address - default is DHCP (NB: must be used with static server IP (hisip)<br />
	boolean use_staticIP = true;&nbsp;<br />
	static byte myip[] = { 192,168,1,66 };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //NanodeRF static IP address - not needed if using DHCP<br />
	static byte gwip[] = { 192,168,1,254 };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // gateway ip address - not needed if using DHCP</strong></p>
<p>&nbsp;</p>
<p>Can you tell me exactly where you got these 3 addresses from???</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11413"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to set up basic communication signals with emontx and Nanode RF basestation </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 18/04/2013 - 00:45.</div>
    <div class="content">
     <p>Yes, invent one (as I&#39;ve told you already), ask your router for the others!&nbsp; I&#39;ve no idea which make/model router you have, so no idea where to find the information, but it&#39;ll be in there somewhere. You need to read your router&#39;s manual - about DHCP and IP addresses.</p>
<p>Alternatively, you can find the default gateway and the IP address of the machine that&#39;s running Wampserver&nbsp; by typing on that machine at the command prompt:</p>
<pre>
ipconfig</pre><p>But you still need to get into your router&#39;s advanced configuration menu to make the IP addresses static, else they might change if the router resets itself for any reason.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2220"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-XQ8Oi8hLAf5hH02-nKLUhHMFlZkGQrWZ3FnjKkY4Ywo" value="form-XQ8Oi8hLAf5hH02-nKLUhHMFlZkGQrWZ3FnjKkY4Ywo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
