<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2649 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:50:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonbase does not work longer than 10 minutes | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonbase does not work longer than 10 minutes</h3>
        <span class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Sat, 03/08/2013 - 10:37</span>
        <div class="content"><p>My emonBase can&#39;t send to the emoncms&nbsp;for more than 10 minutes (sometimes just 2).&nbsp;</p>
<p>I am sure that the remote temperature module is working fine, because it send the data to my GLCD. What&#39;s wrong? I uploaded the sketch from github (nanodeRF_multinode) and just changed the frequency and the apikey...</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2669.html" class="topic-previous" title="Go to previous forum topic">‹ Where are the variables defined?</a>
              <a href="1160.html" class="topic-next" title="Go to next forum topic">Adding new visualisations to emoncms ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-14026"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 03/08/2013 - 12:13.</div>
    <div class="content">
     <p>With so little information, it is very difficult to diagnose a fault. I suggest you look for a fault on the network between your nanodeRF and emoncms.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14041"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sat, 03/08/2013 - 21:49.</div>
    <div class="content">
     <p>Bramper, what do you see in the serial window of the nanodeRF? Might be worth trying a different mac address. Is it a new pre-assembled NanodeRF or the older kit version?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14043"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Sun, 04/08/2013 - 05:47.</div>
    <div class="content">
     <p>Its an older kit version.. In the serial window i see the mac address, ip&nbsp;address, ... And the data he is sending but after a little while it stops... Can I just change the mac address into something I choose or do it have to be a particular one?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14047"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 04/08/2013 - 09:16.</div>
    <div class="content">
     <p>You can change the mac address to be anything as long as its unique on your network.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14057"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Sun, 04/08/2013 - 11:57.</div>
    <div class="content">
     <p>Ok,</p>
<p>I changed the following line:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static byte mymac[] = { 0x42,0x31,0x42,0x21,0x30,0x31 };</p>
<p>into</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; static byte mymac[] = { 0x74,0x31,0x42,0x21,0x30,0x31 };</p>
<p>&nbsp;</p>
<p>but still the smae problem: after 2 minutes it seems like the nanoder RF &#39;hangs&#39;, he don&#39;t sent data anymore</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14059"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 04/08/2013 - 12:08.</div>
    <div class="content">
     <p>Are you using a local emoncms running on your own server on your own network, or emoncms.org?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14068"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Sun, 04/08/2013 - 16:25.</div>
    <div class="content">
     <p>I use emoncms.org</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14070"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 04/08/2013 - 16:47.</div>
    <div class="content">
     <p>Does any data appear in emoncms in that first 2 minutes?, in the Arduino Serial window do you see the line &quot;OK recieved&quot; after an attempted send? If these no OK received, it will try 10 times before going through a system restart, Is that what your seeing?</p>
<p>This is how it should look like in the serial window:</p>
<p>[webClient]<br />
	DHCP status: 1<br />
	IP:&nbsp; 192.168.1.8<br />
	GW:&nbsp; 192.168.1.1<br />
	DNS: 8.8.8.8<br />
	DNS status: 1<br />
	SRV: 213.138.101.177<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;json={rf_fail:1}<br />
	Time request sent<br />
	Time: t16,43,36<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=28&amp;csv=2347,114,6540,2200<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=10&amp;csv=335,441,329,343,129,135,24778,3587,3618,2418,0<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=10&amp;csv=337,442,325,339,129,135,24789,3587,3618,2418,0<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=10&amp;csv=342,448,320,333,128,135,24784,3587,3618,2418,0<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=16&amp;csv=1862<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=10&amp;csv=344,447,321,335,129,135,24783,3587,3618,2418,0<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=18&amp;csv=1768,3044<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=20&amp;csv=1931<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=10&amp;csv=345,451,324,338,128,134,24781,3587,3618,2418,0<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=7a3d3155d180af33b760a5e4d6552dc6&amp;node=19&amp;csv=1750,3362<br />
	OK recieved</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14079"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Mon, 05/08/2013 - 05:55.</div>
    <div class="content">
     <p>This is what I get in the serial window:</p>
<p>[webClient]<br />
	DHCP status: 1<br />
	IP:&nbsp; 192.168.0.107<br />
	GW:&nbsp; 192.168.0.1<br />
	DNS: 8.8.8.8<br />
	DNS status: 1<br />
	SRV: 213.138.101.177<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;json={rf_fail:1}<br />
	Time request sent<br />
	Time: t06,50,30<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2518,2858<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2518,2858<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2518,2851<br />
	Time request sent<br />
	Time: t06,51,30<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2518,2858<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2518,2858<br />
	Time request sent<br />
	Time: t06,52,30<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2518,2858<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2525,2858<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2518,2858<br />
	Time request sent<br />
	Time: t06,53,30<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2525,2858<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2525,2851</p>
<p>&nbsp;</p>
<p>It seems I miss the OK recieved line... what am I doing wrong?</p>
<p>For this I use only the NanodeRF (nanodeRD_multinode script) and the remote temperature module. The data the nanode sends are the termperature and the battery status...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14082"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/08/2013 - 09:23.</div>
    <div class="content">
     <p>No &quot;OK recieved&quot; means either the post is not getting through to emoncms.org, or the &quot;ok&quot; that it sends back is not getting back to you.</p>
<p>But the time is coming back from the server.</p>
<p>Are you using the <strong>read&amp;write</strong> APIkey? Because the time is coming back correctly, and that needs only the read APIkey, it looks as if that is your problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14083"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Mon, 05/08/2013 - 09:48.</div>
    <div class="content">
     <p>Yes, I always used the read&amp;write apikey... But when I look on the input and feeds page, the temperature changes...&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14085"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/08/2013 - 10:28.</div>
    <div class="content">
     <p>The problem therefore is the <strong>ok</strong> that emoncms.org sends is not getting back to you. If you click the example on the Input API Help page that has the APIkey, do you see <strong>ok</strong> in the browser window?</p>
<p>Do you have a firewall that is possibly blocking the message?</p>
<p>Have you accidentally changed anything in decode_reply.ino?&nbsp; Or in my_callback(...) in the main sketch?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14086"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Mon, 05/08/2013 - 11:04.</div>
    <div class="content">
     <p>If I click the example on the Input API Help page, I see &quot;ok&quot; in the browser window</p>
<p>No firewall is used and nothing is changed in de script (exept the frequency and my api key number)</p>
<p>&nbsp;</p>
<p>But the strange thing is, The value is changing on the feed page... just until the nanode &quot;hangs&quot;... So I got my data on the web, but nothing back... (&#39;ok recieved&#39;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14088"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/08/2013 - 11:32.</div>
    <div class="content">
     <p>This is worse than weird!</p>
<p>The same function, my_callback( ... ) receives the reply and the same function get_reply_data( ... ) processes it. It is after that when my_callback( ... ) detects &quot;ok&quot; (which it doesn&#39;t - apparently) or the time (which it does).</p>
<p>Can you insert a Serial.println(line_buf); immediately below</p>
<p class="rteindent1">int lsize =&nbsp;&nbsp; get_reply_data(off);</p>
<p>and check what is actually being received?</p>
<p>(I will set up a similar system later today and post what I see.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14090"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Mon, 05/08/2013 - 11:55.</div>
    <div class="content">
     <p>Ok, I added the line Serial.println(line_buf); immediatly below int lsize = get_replay_data(off);</p>
<p>and this is the result from the serial monitor window:</p>
<p>&nbsp;</p>
<p>DHCP status: 1<br />
	IP:&nbsp; 192.168.0.205<br />
	GW:&nbsp; 192.168.0.1<br />
	DNS: 8.8.8.8<br />
	DNS status: 1<br />
	SRV: 213.138.101.177<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;json={rf_fail:1}<br />
	Time request sent<br />
	t12,53,22<br />
	Time: t12,53,22<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2700,2844</p>
<p>Fatal error: Call to a member function fetch_arr<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2700,2851</p>
<p>Fatal error: Call to a member function fetch_arr<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2700,2844</p>
<p>Fatal error: Call to a member function fetch_arr<br />
	Time request sent<br />
	t12,54,21<br />
	Time: t12,54,21<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2700,2851</p>
<p>Fatal error: Call to a member function fetch_arr<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2700,2851</p>
<p>Fatal error: Call to a member function fetch_arr<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2700,2844</p>
<p>Fatal error: Call to a member function fetch_arr<br />
	Time request sent<br />
	t12,55,21<br />
	Time: t12,55,21<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2700,2851</p>
<p>Fatal error: Call to a member function fetch_arr</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14098"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/08/2013 - 16:53.</div>
    <div class="content">
     <p>I don&#39;t recognise that error message. That&#39;s surely a PHP error?</p>
<p>What I have done is put this</p>
<p class="rteindent1">pBuf(Ethernet::buffer, 300);</p>
<p>in the same place, and at the end</p>
<p class="rteindent1">void pBuf(byte *buf, int len)<br />
	{<br />
	for (int j = 0; j&lt; len; j++)<br />
	{<br />
	&nbsp; if (*(buf+j) &lt; 0x20 || *(buf+j) &gt; 0x7e)<br />
	&nbsp; {<br />
	&nbsp;&nbsp; Serial.print(&#39;\\&#39;);<br />
	&nbsp;&nbsp; if (*(buf+j) &lt; 0x10)<br />
	&nbsp;&nbsp;&nbsp; Serial.print(&quot;0&quot;);<br />
	&nbsp;&nbsp; Serial.print(*(buf+j),HEX);<br />
	&nbsp; }<br />
	&nbsp; else<br />
	&nbsp;&nbsp; Serial.print((char)*(buf+j));<br />
	}<br />
	Serial.print(&quot;\r\n&quot;);<br />
	}</p>
<p>&nbsp;</p>
<p>That produces this output, which is the entire message (and more!) that the server returns. Printable characters are printed correctly, the rest are in the form \XX&nbsp; - two hexadecimal digits. It does not decode the header - only prints the first 300 characters as set in the call.</p>
<p>&nbsp;</p>
<p>B1B!01\00\1DhJ\F3^\08\00E\80\00\FD\8A\B4@\008\06\B9\A1\D5\8Ae\B1\C0\A8\01A\00P\0B\A56+@\BD\00\00\13\86P\18&lt;\00\AA\16\00\00HTTP/1.1 200 OK\0D\0ADate: Mon, 05 Aug 2013 16:22:17 GMT\0D\0AServer: Apache/2.2.17 (Ubuntu)\0D\0AX-Powered-By: PHP/5.3.5-1ubuntu7.11\0D\0AVary: Accept-Encoding\0D\0AContent-Length: 2\0D\0AConnection: close\0D\0AContent-Type: text/html\0D\0A\0D\0Aok\00,22,00\00\00\00\00c\82Sc5\01\03=\07\01B1B!01\0C\0AArdu<br />
	OK received</p>
<p>&nbsp;</p>
<p>The <strong>ok</strong> you should be seeing is the one in here, not the one after the &quot;200&quot;</p>
<p class="rteindent1">Content-Type: text/html\0D\0A\0D\0Aok\00</p>
<p>everything after is rubbish.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14100"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Mon, 05/08/2013 - 18:37.</div>
    <div class="content">
     <p>I don&#39;t understand, what do I have to do now to get the &quot;OK recieved&quot; so that everything is working??</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14104"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/08/2013 - 18:56.</div>
    <div class="content">
     <p>I do not understand what could be preventing the &quot;OK recieved&quot; from appearing. I gave you pBuf( ) so that you could check the complete message that the server sends, and an example of the message that I see.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14105"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Mon, 05/08/2013 - 19:09.</div>
    <div class="content">
     <p>this appears in the serial monitor window:</p>
<p>&nbsp;</p>
<p>Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;json={rf_fail:1}<br />
	Time request sent<br />
	B1B!01\5;9q\A9\08\00E\00\01\04\8E?@\006\06\B9\03\D5\8Ae\B1\C0\A8\00\CD\00P\0BC\83\1Bx\0E\00\00\0DpP\189\08\C7\F4\00\00HTTP/1.1 200 OK\0D\0ADate: Mon, 05 Aug 2013 19:08:01 GMT\0D\0AServer: Apache/2.2.17 (Ubuntu)\0D\0AX-Powered-By: PHP/5.3.5-1ubuntu7.11\0D\0AVary: Accept-Encoding\0D\0AContent-Length: 9\0D\0AConnection: close\0D\0AContent-Type: text/html\0D\0A\0D\0At20,08,01\00\00\00\00c\82Sc5\01\056\04\C0\A8\00\013\04\00\00\0E\10:\04\00<br />
	Time: t20,08,01<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2781,2844<br />
	B1B!01\5;9q\A9\08\00E\00\01\83\CB\DC@\006\06z\E7\D5\8Ae\B1\C0\A8\00\CD\00P\0Bd\89\173\A9\00\00\10\84P\18&lt;\00l&amp;\00\00HTTP/1.1 200 OK\0D\0ADate: Mon, 05 Aug 2013 19:08:07 GMT\0D\0AServer: Apache/2.2.17 (Ubuntu)\0D\0AX-Powered-By: PHP/5.3.5-1ubuntu7.11\0D\0AVary: Accept-Encoding\0D\0AContent-Length: 134\0D\0AConnection: close\0D\0AContent-Type: text/html\0D\0A\0D\0A\0AFatal error: Call to a member fu<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2775,2837<br />
	B1B!01\5;9q\A9\08\00E\00\01\83\B4&quot;@\006\06\92\A1\D5\8Ae\B1\C0\A8\00\CD\00P\0B\85\9B\F7\B4\B1\00\00\13\84P\18&lt;\00\D3\1C\00\00HTTP/1.1 200 OK\0D\0ADate: Mon, 05 Aug 2013 19:08:27 GMT\0D\0AServer: Apache/2.2.17 (Ubuntu)\0D\0AX-Powered-By: PHP/5.3.5-1ubuntu7.11\0D\0AVary: Accept-Encoding\0D\0AContent-Length: 134\0D\0AConnection: close\0D\0AContent-Type: text/html\0D\0A\0D\0A\0AFatal error: Call to a member fu</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14111"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/08/2013 - 21:24.</div>
    <div class="content">
     <p>There must be something wrong with the data that you are sending to emoncms. When you ask for the time, it replies (<strong>in bold</strong>)</p>
<p class="rteindent1">Content-Type: text/html\0D\0A\0D\0A<strong>t20</strong><strong>,08,01</strong>\00</p>
<p>which is correct. When you send data, it replies</p>
<p class="rteindent1">Content-Type: text/html\0D\0A\0D\0A\0A<strong>Fatal</strong><strong> error: Call to a member fu</strong>...</p>
<p>and from what you did earlier, we know that is &quot;Fatal error: Call to a member function fetch_array( )&quot;</p>
<p>But I do not understand because the numbers you see in emoncms is that data being accepted.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14113"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 05/08/2013 - 21:42.</div>
    <div class="content">
     <p>Wow fantastic bit of detective work! Thanks Bramper and Robert</p>
<p>Right so copying the call directly into the browser:</p>
<p><a href="http://emoncms.org/api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2525,2851" title="http://emoncms.org/api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2525,2851">http://emoncms.org/api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e...</a></p>
<p>Gives:</p>
<p>Fatal error: Call to a member function fetch_array() on a non-object in /var/www/emoncms/Modules/input/process_model.php on line 461</p>
<p>Which is my fault, it was an error affecting the kwh_to_kwhd2 input process which is a little used process and probably why it had not come up before.. I have added a check which prevents the error from occuring so now the call:</p>
<p><a href="http://emoncms.org/api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2525,2851" title="http://emoncms.org/api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2525,2851">http://emoncms.org/api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e...</a></p>
<p>returns &quot;ok&quot; as expected.</p>
<p>This should now mean the&nbsp;NanodeRF does not try and restart every 2 or so minutes, which should hopefully mean stable operation.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14114"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 05/08/2013 - 21:54.</div>
    <div class="content">
     <p>Digging a little deeper the error only occurs when the feed&nbsp;kwh_to_kwhd2&nbsp;is trying to write to does not exist, which may mean you had deleted it, but that the input process for it remained. In time there will be better error checking and clean up for this in emoncms&nbsp;but for now I would delete that input process entry as its not doing anything useful.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14124"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Tue, 06/08/2013 - 11:03.</div>
    <div class="content">
     <p>all right, we are one step further... Now I can write 30 minutes to emoncms.org.. but that&#39;s it</p>
<p>&nbsp;</p>
<p>these are the last lines from the serial monitor window:</p>
<p>Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2162,2816<br />
	OK recieved<br />
	Time request sent<br />
	Time: t11,57,29<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2150,2816<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2131,2816<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2106,2808<br />
	OK recieved<br />
	Time request sent<br />
	Time: t11,58,29<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2087,2816<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2100,2808<br />
	OK recieved<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2118,2808<br />
	OK recieved<br />
	Time request sent<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2131,2816<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2106,2816<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2106,2816<br />
	Time request sent<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2125,2808<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2118,2808<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2125,2808<br />
	Time request sent<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2150,2808<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2150,2816<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2168,2808<br />
	Time request sent<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2193,2808<br />
	Data sent: /api/post.json?apikey=8421fda046bd07d32bf74d62f120c34e&amp;node=12&amp;csv=2162,2816</p>
<p>&nbsp;</p>
<p>When I reset the NanodeRF, it goes again..for 30 minutes...&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14138"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 07/08/2013 - 09:03.</div>
    <div class="content">
     <p>Hello Bramper, thats strange, how up to date are your libraries and NanodeRF code?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14143"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/804.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bramper&#039;s picture" title="bramper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonbase does not work longer than 10 minutes</h3>

    <div class="submitted">Submitted by <a href="../user/804.html" title="View user profile.">bramper</a> on Wed, 07/08/2013 - 16:22.</div>
    <div class="content">
     <p>Problem found:</p>
<p>In the folder libraries there was JeeLib&nbsp;&amp; JeeLib-master (and others too of course) and they had both e.g. JeeLib.h in it. I think there was an old and a new version... same with EtherCard. I removed both libraries and downloaded the latest ones..</p>
<p>now everything seems to work, the system is up and running for more than 2 hours now, this didn&#39;t happen before :-)</p>
<p>thanks for all the help!!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2649"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-O18sCGMfQJc-MnuePFSVPHa2P4vaOUvh8WB0LZbRIiI" value="form-O18sCGMfQJc-MnuePFSVPHa2P4vaOUvh8WB0LZbRIiI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
