<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10226 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:37:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>[SOLVED] EmonTx v 3.2.1 direct to Raspberry pi | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">[SOLVED] EmonTx v 3.2.1 direct to Raspberry pi</h3>
        <span class="submitted">Submitted by <a href="../user/7764.html" title="View user profile.">hercules71035</a> on Thu, 26/02/2015 - 13:15</span>
        <div class="content"><p>Hi there,</p>
<p>I&#39;m trying to connect my emonTx v3 to rasp directly, via serial port. I know there is a lot of threads in this topic, but &nbsp;no one is for me! :( On my emonTx there is a standard firmware, the baord version is 3.2.1 and I purchased it on December 2014. I have connected the emonTx to rasp correctly, so I see (on the rasp) what emonTx sends. The problem is that I receive data with variable NodeId!! This is my emonhub.log:</p>
<p>[...]</p>
<p>NEW FRAME: 1424955966.75 15 25540</p>
<p>Timestamp: 1424955966.75</p>
<p>Node: 15</p>
<p>Value: [25540]</p>
<p>NEW FRAME: 1424956066.75 14&nbsp;24540</p>
<p>Timestamp: 1424956066.75</p>
<p>Node: 14</p>
<p>Value: [24540]</p>
<p>NEW FRAME: 1424956966.75 16&nbsp;25440</p>
<p>Timestamp: 1424956966.75</p>
<p>Node: 16</p>
<p>Value: [25440]</p>
<p>[...]</p>
<p>So, it forwards correctly data to emoncms (local), but I think that tha data are meaningless.</p>
<p>I attach a screen of emoncms:&nbsp;<img alt="" src="../../../www.dropbox.com/s/jxl2ovpypjojkxw/emoncms%20screenec75.html?dl=0" /></p>
<p>(<a href="../../../www.dropbox.com/s/jxl2ovpypjojkxw/emoncms%20screenec75.html?dl=0" title="https://www.dropbox.com/s/jxl2ovpypjojkxw/emoncms%20screen.png?dl=0">https://www.dropbox.com/s/jxl2ovpypjojkxw/emoncms%20screen.png?dl=0</a>)</p>
<p>Thanks guys!!! :)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10232.html" class="topic-previous" title="Go to previous forum topic">‹ CT Sensor sensitivity</a>
              <a href="10137.html" class="topic-next" title="Go to next forum topic">BoM for emonTx V3.4 ›</a>
      </div>
</div>
      </div>
    
      </div>
<div id="comments">
  <a id="comment-28232"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7764.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hercules71035&#039;s picture" title="hercules71035&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [SOLVED] EmonTx v 3.2.1 direct to Raspberry pi</h3>

    <div class="submitted">Submitted by <a href="../user/7764.html" title="View user profile.">hercules71035</a> on Thu, 26/02/2015 - 18:20.</div>
    <div class="content">
     <p>The problem is that the first value sent by emonTx is the power &nbsp;but emoncms&nbsp;read it as nodeId!!! Can anyone help me???</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-28235"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [SOLVED] EmonTx v 3.2.1 direct to Raspberry pi</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 26/02/2015 - 22:29.</div>
    <div class="content">
     <p>Hi, The normal data packet stucture if for data to be preceeded by the node id, which is why emoncms is assuming the first data value as a node id.</p>
<p>If you are using a serial connection you will need to add a node id to the sketch as the current &quot;serial&quot; sketches do not provide one. emoncms now expects a node id of 1 or higher as does emonhub currently.</p>
<p>This is discussed on<a href="6048.html">&nbsp;http://openenergymonitor.org/emon/node/6048</a>&nbsp;and other similar threads.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-28246"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7764.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hercules71035&#039;s picture" title="hercules71035&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [SOLVED] EmonTx v 3.2.1 direct to Raspberry pi</h3>

    <div class="submitted">Submitted by <a href="../user/7764.html" title="View user profile.">hercules71035</a> on Fri, 27/02/2015 - 09:20.</div>
    <div class="content">
     <p>Hi there,&nbsp;</p>
<p>thank you for the reply. I have just modified the standard sketch adding the nodeId print on serial. The problem that I&#39;m not able to upload the firmware. There is some strange procedure to do?? I connect my USB to UART, but I have this problem:&nbsp;stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 1 of 10: not in sync: resp=0x01<br />
avrdude: stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 2 of 10: not in sync: resp=0x01<br />
avrdude: stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 3 of 10: not in sync: resp=0x01<br />
avrdude: stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 4 of 10: not in sync: resp=0x01<br />
avrdude: stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 5 of 10: not in sync: resp=0x01<br />
avrdude: stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 6 of 10: not in sync: resp=0x01<br />
avrdude: stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 7 of 10: not in sync: resp=0x01<br />
avrdude: stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 8 of 10: not in sync: resp=0x01<br />
avrdude: stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 9 of 10: not in sync: resp=0x01<br />
avrdude: stk500_recv(): programmer is not responding<br />
avrdude: stk500_getsync() attempt 10 of 10: not in sync: resp=0x01</p>
<p>How can I proceed??</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-28259"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [SOLVED] EmonTx v 3.2.1 direct to Raspberry pi</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 27/02/2015 - 21:28.</div>
    <div class="content">
     <p>That error simply means that your computer is not communicating with the programmer, or the programmer with your emonTx, but that could be for one of many reasons.</p>
<p>Have you followed exactly the installation procedure for the Arduino IDE <a href="https://learn.openenergymonitor.org/?redirect=setting-up-the-arduino-environment">here</a>?  That is the starting point.</p>
<p>Have you got the correct connections on the FTDI cable between programmer and emonTx?<br />
Is the connector the right way round? ("GND" is marked on the circuit board and on the programmer if it is the Shop one.)</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-28268"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7764.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hercules71035&#039;s picture" title="hercules71035&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [SOLVED] EmonTx v 3.2.1 direct to Raspberry pi</h3>

    <div class="submitted">Submitted by <a href="../user/7764.html" title="View user profile.">hercules71035</a> on Sat, 28/02/2015 - 09:42.</div>
    <div class="content">
     <p>Hi there,</p>
<p>I have resolved all. The problem on uploading firmware was on the procedure. In order to enable the upload I have to press the reset button on emonTx just before click the upload button on Arduino IDE. I don&#39;t knew this and I haven&#39;t read this nowhere.</p>
<p>Thanks a lot!</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-28274"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [SOLVED] EmonTx v 3.2.1 direct to Raspberry pi</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 28/02/2015 - 13:25.</div>
    <div class="content">
     <p>Your programmer should send a 'Reset' pulse on the "RTS" line, which should be connected to the "Reset" on your emonTx. If that is missing from your programmer, or the pulse is not correct in some way (amplitude, length or timing), then that is the reason that you need to press the Reset pushbutton.</p>
<p>As you don't have the RTS line (DON'T DOUBLE POST -IT WASTES EVERYBODY'S TIME), you need a different programmer.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10226"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-pppOl6WvSd-EuE38gB5pj5qu84-XqeV63vHBvnZDdBM" value="form-pppOl6WvSd-EuE38gB5pj5qu84-XqeV63vHBvnZDdBM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/10226 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:37:17 GMT -->
</html>
