<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12437 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:14:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>(Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node sticky">

    
    
          <div class="comment" >
                <h3 class="title" style="">(Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>
        <span class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 31/03/2016 - 08:45</span>
        <div class="content"><h2>This is a the latest&nbsp;Release Candidate, but may still contain bugs. Please read comments in the thread&nbsp;below, before installing. If you require a stable release, see&nbsp;<a href="10729.html">emonSD-17Jun15</a>.&nbsp;</h2>
<p>--------------------------------------------------------------------------------------------------------------------------------------------</p>
<h2><strong>DOWNLOAD RC#2: <a href="http://openenergymonitor.org/files/emonSD-29Mar16.img.zip">emonSD-29Mar16.zip</a>&nbsp;(1.7GB)</strong></h2>
<h3>Please&nbsp;read&nbsp;comments below&nbsp;before&nbsp;installing</h3>
<h3>MD5 Checksum (zip):&nbsp;15e5fef75dd9729c13ef9f9de1a290b2</h3>
<p>MD5 Checksum (.img):&nbsp;78f6caaf926b255438367244f6faa71d</p>
<p><em>​To check the image version you are currently running, look for a file called emonSD-XXX in the /boot partition:</em></p>
<pre>
$ sudo ls /boot | grep emonSD

</pre><p><strong>Key Features:</strong>&nbsp;</p>
<ul>
<li>Based on&nbsp;<a href="https://www.raspberrypi.org/downloads/raspbian/">RASPBIAN JESSIE LITE</a> (2015-11-21)&nbsp;</li>
<li>Built following <a href="https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md">emonPi SD card Build Guide</a></li>
<li>4GB min card size download&nbsp;(ships on an 8GB expanded SD card)</li>
<li>Emoncms V9 (<a href="https://github.com/emoncms/emoncms/blob/stable/docs/RaspberryPi/readme.md">RasPi&nbsp;emonPi&nbsp;install</a>&nbsp;- thanks Paul Reed for writing the guide)&nbsp;</li>
<li>Read-only&nbsp;root FS (see <a href="11695.html#comment-36528">discussion thread</a>)</li>
<li><a href="http://openenergymonitor.blogspot.co.uk/2015/10/emonpi-nodered-and-mqtt.html">NodeRED</a>, <a href="http://openenergymonitor.blogspot.com/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWave RF MQTT OOK control</a> and <a href="http://openenergymonitor.blogspot.com/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB</a>&nbsp;all pre installed and configured</li>
</ul>
<p><strong>Full Change log (important changes highlighted):</strong></p>
<ul>
<li>Based on RASPBIAN JESSIE LITE (2015-11-21) SSH user,pass:pi,emonpi2016</li>
<li>RasPi Firmware &amp; packages updated to support <strong>Raspberry Pi3</strong> &amp; onboard Wifi (RasPi3 BT disabled)</li>
<li><strong>Emoncms V9.4</strong> stable branch</li>
<li>emonHub emon-pi variant</li>
<li>MQTT LightWave RF OOK</li>
<li><strong>NodeRED 13.3</strong> - with custom OEM setup port:1880&nbsp;user,pass:emonpi,emonpi2016</li>
<li><strong>OpenHab 1.8.2</strong> - with custom OEM setup port:8080 user,pass:pi,emonpi2016</li>
<li>Mosquitto MQTT server V1.4.8 with authentication port:1883 user,pass:emonpi,emonpimqtt2016</li>
<li>Nodes module depreciated in favor of MQTT_input script direct to Emoncms Inputs. see MQTT info</li>
<li>Emoncms Wifi module - bug fixes: support for open-networks + SSID with spaces&nbsp;</li>
<li><strong>Support for HiLink GSM 3G USB dongle</strong></li>
<li>Beta Support for enabling wifiAP <em>sudo wifiAP start | stop</em></li>
<li>emonPi LCD now displays signal strength from GSM HiLink dongle if connected&nbsp;</li>
<li>emonPi LCD script overhauled, much snappier page changing, bootup hang issue fixed&nbsp;</li>
<li>emonPi LCD now logs to /var/log/emonpilcd/emonpilcd</li>
<li>SD card data partition expansion script included: $&nbsp;<em>sudo emonSDexpand</em></li>
<li><strong>Emoncms Graph</strong> vis module included and set as default feedviewer</li>
<li>service-runner extended to include emonPi update as well as backup import/export. Real-time logviewer and responsive emonPi update starting</li>
<li><strong>Backup &amp; restore module fixes</strong> Fix 20Mb import file PHP upload limit removed</li>
<li>Service-runner method for executing backup imports, exports and update process​</li>
</ul>
<p><strong><a href="https://github.com/openenergymonitor/emonpi/wiki/emonSD-pre-built-SD-card-Repository-&amp;-Change-Log">See here&nbsp;full change log of all emonSD&nbsp;releases</a>&nbsp;&nbsp;</strong></p>
<p>Please report any bugs on this thread.&nbsp;</p>
<h1>Data Migration&nbsp;</h1>
<p>If you&#39;re moving from our previous pre-built-SD card, and have Emoncms data you want to migrate, this can be done using the backup module. Backup module is ready installed on this image. You will need to install it on an older image:&nbsp;</p>
<p>See <a href="https://github.com/emoncms/backup">Emoncms&nbsp;backup module readme</a>&nbsp;and <a href="https://www.youtube.com/watch?v=5U_tOlsWjXM">video screen cast guide</a>.&nbsp;</p>
<p>Please report any issues to his thread.&nbsp;</p>
<p>&nbsp;</p>
<h1>Storage&nbsp;&amp;&nbsp;Read-only File system&nbsp;</h1>
<p>As before, the filesystem&nbsp;is in read-only mode by default. <a href="11695.html#comment-36528">discussion thread</a>.</p>
<p>To put the filesystem in read/write mode, use the command: <em>rpi-rw</em>&nbsp;<br />
To return to read-only mode, use the command:<em> rpi-ro</em></p>
<pre>
&nbsp;df -h
Filesystem &nbsp; &nbsp; &nbsp;Size &nbsp;Used Avail Use% Mounted on
/dev/root &nbsp; &nbsp; &nbsp; 3.4G &nbsp;2.2G &nbsp;1.1G &nbsp;67% /
devtmpfs &nbsp; &nbsp; &nbsp; &nbsp;214M &nbsp; &nbsp; 0 &nbsp;214M &nbsp; 0% /dev
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 218M &nbsp; &nbsp; 0 &nbsp;218M &nbsp; 0% /dev/shm
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 218M &nbsp; 13M &nbsp;206M &nbsp; 6% /run
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5.0M &nbsp;4.0K &nbsp;5.0M &nbsp; 1% /run/lock
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 218M &nbsp; &nbsp; 0 &nbsp;218M &nbsp; 0% /sys/fs/cgroup
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;40M &nbsp;6.6M &nbsp; 34M &nbsp;17% /var/lib/openhab
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.0M &nbsp; &nbsp; 0 &nbsp;1.0M &nbsp; 0% /var/lib/dhcp
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;50M &nbsp;5.3M &nbsp; 45M &nbsp;11% /var/log
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;30M &nbsp; 36K &nbsp; 30M &nbsp; 1% /tmp
/dev/mmcblk0p1 &nbsp; 60M &nbsp; 20M &nbsp; 41M &nbsp;34% /boot
/dev/mmcblk0p3 &nbsp;194M &nbsp; 32M &nbsp;153M &nbsp;17% /home/pi/data

</pre><p>The main data folder for emoncms is /home/pi/data this folder is always mounted Read/Write. A number of other folders are mounted in RAM (tmpfs), see <a href="https://github.com/openenergymonitor/emonpi/blob/master/fstab">/etc/fstab</a>. A read-only file system presents challenges to some core Linux processes such as DHCP and NTP. A couple of DHCP &amp; Resolv <a href="http://github.com/openenergymonitor/emonpi/blob/master/install#L57">files</a> are located in the writeable ~/data folder and symlinked to /etc and a custom <a href="http://github.com/openenergymonitor/emonpi/blob/master/dhclient-script_minibian">/sbin/dhclient-script</a> is used.<a href="http://github.com/emonhub/ntp-backup">NTP-backup</a> (thanks Paul) is used to enable NTP clock updates in R/O mode. See the original NTP discussion <a href="5877.html">thread</a>.</p>
<h1>emonPi</h1>
<p>Now updates itself on first factory boot so we will always ship with latest software pulled from github. emonPi LCD now shows when it&#39;s updating and also LCD scrip has been updated to include authenticated MQTT support and to display&nbsp;temperature, VRMS and pulse count values as well as power 1 &amp;2.</p>
<p><a href="../sites/default/files/emonpi_update.jpg"><img alt="" src="../sites/default/files/emonpi_update.jpg" style="width: 300px; height: 169px;" /></a></p>
<p>&nbsp;</p>
<h1><strong>Emoncms&nbsp;V9&nbsp;</strong></h1>
<p><strong>Access via</strong>: <a href="http://emonpi/" title="http://emonpi">http://emonpi</a></p>
<p><strong>Authenticate</strong>: Create the admin user account&nbsp;</p>
<p><strong>Configure</strong>: emonhub.conf (located in ~/data) via web interface&nbsp;</p>
<p><strong>Update</strong>: Pull in the latest updates from Emoncms&nbsp;stable branch using the web-based update tool in Administration &gt; update emonPi.&nbsp;&nbsp;</p>
<p><strong>MYSQL:</strong>&nbsp;&#39;root&#39; user password is &#39;emonpimysql2016&#39; and mysql&nbsp;&#39;emoncms&#39;&nbsp;user&nbsp;password is &#39;emonpiemoncmsmysql2016&#39;</p>
<h2><strong>SSH &nbsp;</strong></h2>
<p>The default SSH password has been changed from &quot;raspberry&quot; to &quot;<strong>emonpi2016</strong>&quot; since even though we recommend users change their password, not many do. Moving away from the default&nbsp;raspberry will give a little more security. It&#39;s still <strong>HIGHLY RECOMMENDED</strong> to change the SSH password using&nbsp;<em><strong>passwd</strong></em> (be sure the filesystem is in R/W mode before you change the password (rpi-rw)&nbsp;</p>
<p>&nbsp;</p>
<h2><strong>MQTT</strong></h2>
<p>Mosquitto&nbsp;MQTT&nbsp;server is running on port 1883.</p>
<p><a href="https://github.com/openenergymonitor/emonhub">emonHub&nbsp;(emon-pi variant)</a>&nbsp;posts emonPi data to the following&nbsp;topics:</p>
<pre>
<em>emonhub/rx/&lt;nodeID&gt;/values</em> topic

<em>emon/&lt;nodename&gt;/&lt;keyname&gt; (e.g. emon/emontx/power1)</em>

See here for <a href="https://github.com/emoncms/emoncms/blob/master/docs/RaspberryPi/MQTT.md#node-format">more info an emonHub MQTT topics</a></pre><p>Port 1883 is open by default and authentication has been turned on:</p>
<p>mosquitto username &quot;emonpi&quot;</p>
<p>mosquitto password &quot;emonpimqtt2016&quot;</p>
<p>to change password&nbsp;:&nbsp;</p>
<pre>
sudo nano /etc/mosquitto/mosquitto.conf</pre><p>add lines&nbsp;</p>
<pre>
allow_anonymous false
password_file /etc/mosquitto/passwd</pre><p>To generate a password file, use the mosquitto_passwd tool. It will prompt for a password, then create a hashed password file.&nbsp;</p>
<pre>
$ sudo mosquitto_passwd -c /etc/mosquitto/passwd username</pre><address>&nbsp;</address>
<address>Note if mosquitto&nbsp;authentication&nbsp;credentials are change the new credentials will also need to be updated in:</address>
<address>~/data/emonhub.conf</address>
<address>/var/www/emoncms/settings.php</address>
<address>~/emonpi/lcd/emonPiLCD.py</address>
<address>~/oem_openhab/configuration/openhab.cfg</address>
<address>in node-RED MQTT node&nbsp;via web flows editor&nbsp;</address>
<address>&nbsp;</address>
<p>On this image the Nodes module has been depreciated in favor of the mqtt_input script. When data from a particular node is received (as long as it has a relevant entry in emonhub.conf) it will be posted to Inputs when it can be then be logged go feeds. Any data posted to the emon/# MQTT topic will be logged to feeds using tbe topic names as Input name and Key name, e.g: emon/emontx/power1 will result in an input called emontx with a key called power 1 and the value.&nbsp;</p>
<p>The mqtt input script can be stopped, started and restarted using:</p>
<pre>
sudo service mqtt_input restart </pre><p>The mqtt_input scripts logs to the emoncms log which can be viewed in Admin &gt; logger. The default log level is WARN this can be changed to INTO for a more verbose log in emoncms settings.php. The MQTT server authentication details used by the script are also set in settings.php.&nbsp;</p>
<address>&nbsp;</address>
<h2><strong>NodeRED</strong></h2>
<p>Node-RED is installed and set up with a basic (but useful!)&nbsp;demo flow to subscribe to emonHub MQTT&nbsp;topic and send an email to alert the user when emonTH batteries are low. For email to work, you will have to enter your gmail&nbsp;or smtp&nbsp;details into the node-RED email node. See <a href="http://openenergymonitor.blogspot.com/2015/10/emonpi-nodered-and-mqtt.html">node-RED blog post</a>. For &nbsp;our install and&nbsp;setup notes see <a href="https://github.com/openenergymonitor/oem_node-red">oem_node-red repo</a></p>
<p><strong>Access Via</strong>:&nbsp;<a href="http://emonpi:1880/">http://emonpi:1880</a></p>
<p><strong>Authentication</strong>: user &quot;emonpi&quot; and password &quot;emonpi2016&quot;&nbsp;</p>
<p>The User folder is in the R/W partition so flows can be saved via web editor without he need to change to R/W mode&nbsp;/home/pi/data/node-red</p>
<p>Set user name and password in /home/pi/node-red/settings.js. See instructions on out nodeRED&nbsp;github</p>
<p><a href="https://github.com/openenergymonitor/oem_node-red">https://github.com/openenergymonitor/oem_node-red</a></p>
<p><a href="../sites/default/files/nodered2.png"><img alt="" src="../sites/default/files/nodered2.png" style="height: 415px; width: 600px;" /></a></p>
<h2>&nbsp;</h2>
<p><strong>Note: Node-RED as setup in the image is compiled for Pi2, to use with Model B+ Node will need to be recompiled. Follow these instructions:&nbsp;</strong></p>
<p>Check if node &amp; npm are installed/working properly, normally you will get these results:</p>
<pre>
rpi-rw
​sudo apt-get remove nodered
pi@emonpi:~$ node -v
Segmentation fault
pi@emonpi:~$ npm -v
Segmentation fault</pre><p>Install ARM v6 (for a RasPi model B 512MB) LTS version of node.js</p>
<pre>
wget <a href="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz" title="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz">https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz</a>
tar -xvf node-v4.2.4-linux-armv6l.tar.gz
cd node-v4.2.4-linux-armv6l/
sudo cp -R * /usr/</pre><p>Check if Node-Red is working (can take up to 40-50s on a RasPi model B 512MB)</p>
<pre>
sudo service nodered start</pre><p>Re-enable the Node-Red service (maybe not nescessary, haven&#39;t tested it)</p>
<pre>
sudo systemctl daemon-reload
sudo systemctl enable nodered.service</pre><p>Check if Node-Red gets auto-started on boot:</p>
<pre>
sudo reboot</pre><h2>&nbsp;</h2>
<h2><strong>OpenHAB&nbsp;</strong></h2>
<p>OpenHAB is installed and setup with the basic skeleton OpenEnegyMonitor config. See <a href="http://openenergymonitor.blogspot.co.uk/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB blog post</a>.</p>
<p><strong>Access via</strong>:&nbsp;<a href="http://emonpi:8080/">http://emonpi:8080</a></p>
<p><strong>Authenticate</strong>: user &quot;pi&quot; and password &quot;emonpi2016&quot;</p>
<p>Change user name and password in&nbsp;/etc/openhab/configurations/users.cfg</p>
<p><strong>Configure:&nbsp;</strong>oem.items and oem.sites and located in git repo ~/oem-opemhab and symlinked&nbsp;to default.items and default.sitemap in&nbsp;relevant folders in&nbsp;to&nbsp;/etc/openhab/configurations.&nbsp;</p>
<p><em>Note:&nbsp;Config files are symlinked to our <a href="https://github.com/openenergymonitor/oem_openHab">oem_openhab</a> git repo so we can add functionally with git updates, pulled in automatically with emonPi&nbsp;update. It&#39;s recommended to setup your own sitemap and files config so your changes will not be overwritten by out updates: </em></p>
<p><em>e.g. dave.items and dave.sitemaps then navigate to&nbsp;http://emonpi:8080/openhab.app?sitemap=dave</em></p>
<p><img alt="" src="../../../1.bp.blogspot.com/-lAn2SNSzyLQ/VmVkYfsFDxI/AAAAAAABkic/Wqhp7g4R4uA/s400/OpenEnergyMonitor_openHAB.png" style="width: 385px; height: 400px;" /></p>
<h2>&nbsp;</h2>
<h2>LightWaveRF OOK RF Tx&nbsp;</h2>
<p>Service to control lightwaveRF plugs and relays via OOK (OOK Tx module installed on emonPi) controlled via MQTT&nbsp;and openHAB. See <a href="http://openenergymonitor.blogspot.com/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWaveRF OOK blog post</a>.</p>
<p><a href="../../../3.bp.blogspot.com/-ooKdNYl_8fA/Vlc-c0pyyJI/AAAAAAABj5o/M6wlA5rH_Ko/s640/emonPi_lwrf.png"><img alt="" src="../../../3.bp.blogspot.com/-ooKdNYl_8fA/Vlc-c0pyyJI/AAAAAAABj5o/M6wlA5rH_Ko/s640/emonPi_lwrf.png" style="height: 319px; width: 300px;" /></a></p>
<h1>Timezone&nbsp;</h1>
<p>The timezone can be set by running raspi-config then selecting &#39;Internationalisation Options&#39;:</p>
<pre>
sudo raspi-config</pre><h1>Expand SD Card</h1>
<p><strong>Caution: don&#39;t try and run the &#39;Expand file-system option&#39; in raspi-config. This won&#39;t work because of the extra third partition</strong></p>
<p>If you have flashed the image to an SD card greater than 4GB you can run to expand the ~/data partition</p>
<pre>
$ sudo emonSDexpand
</pre><ul></p>
<li>&nbsp;</li>
</ul>
  <div class="forum-topic-navigation clear-block">
          <a href="12603.html" class="topic-previous" title="Go to previous forum topic">‹ **OpenEnergyMonitor Forums have now moved to https://community.openenergymonitor.org**</a>
              <a href="10729.html" class="topic-next" title="Go to next forum topic">STABLE: emonPi and RFM69Pi emonbase ready-to-go SD card image (emonSD-17Jun15) ›</a>
      </div>
</div>
      </div>
    
      </div>
<div id="comments">
  <a id="comment-40791"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9549.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gsiviero&#039;s picture" title="gsiviero&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9549.html" title="View user profile.">gsiviero</a> on Fri, 01/04/2016 - 09:00.</div>
    <div class="content">
     <p>I installed this version yesterday on my emonPi.</p>
<p>Brand new installation on a new SD card from the latest SD image.</p>
<p>I&#39;m trying to create new feeds from my nodes but after&nbsp;I add and save anew node I get a &quot;wait...&quot; in the process list and the feed does not get really added.</p>
<p>If after some times I return to edit the node I find for example &quot;Feedid 16 does not exists or was deleted&quot;</p>
<p>And in Administration -&gt; Logger I read<br />
2016-04-01 08:25:44.629|WARN|PHPFina.php|get_meta() meta file does not exist &#39;/home/pi/data/phpfina/16.meta&#39; 2016-04-01 08:28:22.059|ERROR|feed_model.php|EngineClass() Engine id &#39;1&#39; is not supported.</p>
<p>From&nbsp;/var/log/apache2/error.log:</p>
<p>[Fri Apr 01 08:53:40.090096 2016] [:error] [pid 1518] [client&nbsp;192.168.1.72:54730] PHP Fatal error:&nbsp; Uncaught exception &#39;Exception&#39; with message &#39;ABORTED: Engine id &#39;1&#39; is not supported.&#39; in /var/www/emoncms/Modules/feed/feed_model.php:71\nStack trace:\n#0 /var/www/emoncms/Modules/feed/feed_model.php(396): Feed-&gt;EngineClass(&#39;1&#39;)\n#1 /var/www/emoncms/Modules/feed/feed_model.php(279): Feed-&gt;get_timevalue(&#39;1&#39;)\n#2 /var/www/emoncms/Modules/feed/feed_model.php(253): Feed-&gt;redis_get_user_feeds(1)\n#3 /var/www/emoncms/Modules/feed/feed_controller.php(38): Feed-&gt;get_user_feeds(&#39;1&#39;)\n#4 /var/www/emoncms/core.php(64): feed_controller()\n#5 /var/www/emoncms/index.php(146): controller(&#39;feed&#39;)\n#6 {main}\n&nbsp; thrown in /var/www/emoncms/Modules/feed/feed_model.php on line 71, referer:&nbsp;http://emonpi/emoncms/input/view</p>
<p>What should I do?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40793"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9549.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gsiviero&#039;s picture" title="gsiviero&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9549.html" title="View user profile.">gsiviero</a> on Fri, 01/04/2016 - 11:11.</div>
    <div class="content">
     <p>Please check in the original post the ports and example links for NodeRED and OpenHAB:</p>
<p>NodeRED 13.3 - with custom OEM setup port:<strong>18880</strong> user,pass:emonpi,emonpi2016<br />
OpenHab 1.8.2 - with custom OEM setup port:<strong>8080</strong> user,pass:pi,emonpi2016</p>
<p>...</p>
<p>Access Via:&nbsp;http://emonpi:<s>1880</s></p>
<p>(I think it should be &quot;Access Via:&nbsp;http://emonpi:<strong>18880</strong>&quot;)</p>
<p>...</p>
<p>Access via:&nbsp;http://emonpi:<strong>8080</strong></p>
<p>e.g. dave.items and dave.sitemaps then navigate to&nbsp;http://<s>emonpi8081</s>/openhab.app?sitemap=dave</p>
<p>(I think it should be &quot;http://<strong>emonpi:8080</strong>/openhab.app?sitemap=dave&quot;)</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40794"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9549.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gsiviero&#039;s picture" title="gsiviero&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9549.html" title="View user profile.">gsiviero</a> on Fri, 01/04/2016 - 11:17.</div>
    <div class="content">
     <p>Regarding OpenHab:</p>
<p>You write &quot;Note:&nbsp;Config files are symlinked to our oem_openhab git repo so we can add functionally with git updates, pulled in automatically with emonPi&nbsp;update. It&#39;s recommended to setup your own sitemap and files config so your changes will not be overwritten by out updates: &quot;</p>
<p>Would the file openhab.cfg -&gt; /home/pi/oem_openHab/openhab.cfg be overwritten by an update?</p>
<p>I need to modify it to add&nbsp; Philips Hue Lighting support, so I would like to know if I need to restore my modified copy after a possible OpenHab update.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40804"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Fri, 01/04/2016 - 21:16.</div>
    <div class="content">
     <p><sub><sup>Small item</sup></sub>&nbsp;for the <strong>Expand SD Card</strong>&nbsp;section it should be:</p>
<pre>
$ sudo emonSDexpand</pre>         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40810"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 01/04/2016 - 23:07.</div>
    <div class="content">
     <p>Hi guys, thanks a lot for testing.</p>
<p>@gsiviero thanks for letting me know about the meta file errors. I have been able to re-create and am investigating. I will post a fix as soon as I can. Sorry for the hassle.</p>
<p>Thanks for letting me know about the openHAB port number typo. This has been fixed. &nbsp;NodeRED&nbsp;port is correct it should be 1880. Does this not work for you?&nbsp;</p>
<p>If you modify&nbsp;openhab.cfg it won&#39;t update with any emonPi updates. If you want to be totally save you could remove the symlink:</p>
<p><em>sudo rm /etc/openhab/openhab.cfg </em></p>
<p><em>sudo&nbsp;cp&nbsp;/home/pi/oem_openHab/openhab.cfg&nbsp;/etc/openhab/openhab.cfg&nbsp;</em></p>
<p>@Jon where did you see the emonSDexpand typo? It seems to be correct on the post above. Please correct me if I&#39;m wrong!&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40811"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Fri, 01/04/2016 - 23:15.</div>
    <div class="content">
     <p>Glyn - in the first post of this thread</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40814"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 01/04/2016 - 23:59.</div>
    <div class="content">
     <p>@jon thanks, it&#39;s been corrected :-)&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40839"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sun, 03/04/2016 - 02:38.</div>
    <div class="content">
     <p>Glyn - Everything works really well with the new&nbsp;emonSD-29Mar16 image. &nbsp;A big &ldquo;thank you&rdquo; to the Team - very nice work!</p>
<p>I found one odd item. I went to Administration &gt; Update emonPi &gt; Update Now and nothing happened - no update! The virtual terminal would clear and then just redisplay the first boot emonpi update. I deleted the emonpiupdate.log file, then the virtual terminal went blank/black and now the Update Now button works as expected. I was not able to repeat the issue.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40842"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9549.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gsiviero&#039;s picture" title="gsiviero&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9549.html" title="View user profile.">gsiviero</a> on Sun, 03/04/2016 - 08:40.</div>
    <div class="content">
     <p>Hy Glyn,</p>
<p>NodeRED port should then be corrected in the first part of the post (but I&#39;m not using it yet):</p>
<p>NodeRED 13.3 - with custom OEM setup port:<s>18880</s>&nbsp;user,pass:emonpi,emonpi2016</p>
<p>in the ​openHab example link in the openHab section you should also add the colon (sorry if I&#39;m pedant):</p>
<p>e.g. dave.items and dave.sitemaps then navigate to&nbsp;http://<s>emonpi8080</s>/openhab.app?sitemap=dave</p>
<p>(I think it should be &quot;http://<strong>emonpi:8080</strong>/openhab.app?sitemap=dave&quot;)</p>
<p>Another thing: my emonPi display is always lit, I will try to determine why this is happening.</p>
<p>Thanks for your work!</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40866"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 04/04/2016 - 12:16.</div>
    <div class="content">
     <p>Thanks for the typo corrections. They have been fixed.</p>
<p>@jon mmm, I don&#39;t know what is going on here. I&#39;ll try and replicate. Is this the &#39;out of box&#39; experience you had after flashing the new image? It sounds like the first update the should happen automatically on the very first boot of the emonPi was interrupted. This cased the update log display terminal to hang since it was waiting for more data to display. This first update will happen in the factory so most users should not experience this issue.&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40868"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 04/04/2016 - 13:03.</div>
    <div class="content">
     <p>@Glyn - I saw&nbsp;the same issue as Jon with the &quot;update&quot; when I used a fresh download of this&nbsp;image at the weekend. When I clicked &quot;update&quot; from the webpage, it goes blank and repopulates without any sign of updating. I did not explore any further, so as far as I&#39;m aware, it is still in the fault condition, if you are not able to reproduce.</p>
<p>I will be back home later.</p>
<p>I did also notice there was no &quot;emonPi&nbsp;updating&quot; type message on the LCD at any time, which I though was odd. But since I have also seen other anomolies with the LCD like garbage at boot, locking up&nbsp;and staying permanently lit,&nbsp;I didn&#39;t think too much about it.</p>
<p>I emailed you over the weekend with some other points too.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40881"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 04/04/2016 - 17:21.</div>
    <div class="content">
     <p>Glyn - Yes, this was after the new build on a blank SD. The virtual terminal display acted like it had more to display - I could not scroll upward as the display would jump to the last line. And there was no &quot;emonPi Update done&quot; on the last line.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40937"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9765.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="miniwark&#039;s picture" title="miniwark&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9765.html" title="View user profile.">miniwark</a> on Wed, 06/04/2016 - 19:12.</div>
    <div class="content">
     <p>Hi !</p>
<p>Testing this on a emonBase (Raspberry Pi B Rev2)...</p>
<p>Almost everything seems to work out of the box including NodeRed except:</p>
<p>&nbsp;&nbsp;&nbsp; <s>/var/lib/phpfina</s><br />
&nbsp;&nbsp;&nbsp; <s>/var/lib/phpfiwa</s><br />
&nbsp;&nbsp;&nbsp; <s>/var/lib/phptimeseries/</s></p>
<p><s>Did not exist on the files system witch prevent the feed creation (with an undefined error message). After creating them and setting the rights manualy, everything was working for me.</s></p>
<p>Edit: seems like this directories are under /home/pi/data ont the SDCard, no need to create them manually. But this is not working at this point. After creating a feed and trying to display the feeds module logs say :</p>
<pre>
2016-04-06 18:50:13.656|WARN|PHPFina.php|get_meta() meta file does not exist &#39;/home/pi/data/phpfina/16.meta&#39;
2016-04-06 18:50:28.906|ERROR|feed_model.php|EngineClass() Engine id &#39;1&#39; is not supported.
</pre><p>But the file did exist on the file system...</p>
<p>So in short the first issue submited by @gsiviero is still here for me.</p>
<p>Apart from this i would be glad to have a bit of documentation on how to use the new MQTT based input system (witch apparently completly replace the Node module by now ?). Also a simple tutorial about NodeRED and&nbsp;OpenHAB would be welcome (i do not really understand what they are for).</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40951"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9549.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gsiviero&#039;s picture" title="gsiviero&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9549.html" title="View user profile.">gsiviero</a> on Wed, 06/04/2016 - 19:57.</div>
    <div class="content">
     <p>With&nbsp;OpenHab&nbsp;on the emonPi&nbsp;I successfully:</p>
<p>- read emonPi temperature and power sensors</p>
<p>- read emonTh temperature sensor (waiting for feeds to work to add pulse count)</p>
<p>- control Philips Hue lights</p>
<p>- control Kodi (see status and control play/pause and other functions)</p>
<p>- see network webcam video feeds (with motion installed on different Raspberry Pis)</p>
<p>- see if a given Android phone (or other device) is connected to the local WiFi (LAN)</p>
<p>All of this both from LAN and the Internet (port forwarding needed), and from my android phone.</p>
<p>And that I think is just the beginning... In fact you&nbsp;can add also &quot;rules&quot; (do &quot;this&quot; if &quot;that&quot; happens), and add numerous other &quot;bindings&quot; (control other &quot;IOT&quot; devices that have an OpenHab binding available).</p>
<p>It&#39;s a bit long to configure initially, but very interesting.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40989"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9145.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mrpetrov&#039;s picture" title="mrpetrov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9145.html" title="View user profile.">mrpetrov</a> on Thu, 07/04/2016 - 17:15.</div>
    <div class="content">
     <p>Sorry, Glyn, but I have to challenge the 4GB SD card minimum requirement - I just tried to write the expanded .img file to a 4 GB SanDisk micro SD card I have laying around,&nbsp;after verifying the md5 sum, and I could not do that.</p>
<p>I tried to write this new image the same I wrote the image on the SD card currently in my EMONPI - on windows 7, using win32 disk imager 0.9.5.</p>
<p>It now says: Not enough space on disk: Size: 7821312 sectors Available: 7744512 Sector size: 512</p>
<p>And since I keep my image files in the same directory, I noticed this: image from 18Dec2015 - 3.67GB, image from 22Dec2015 - 3.67GB, current image 29Mar2016 - 3.72GB</p>
<p>I shall now use a bigger card for my EMONPI, since I need it working asap, but wanted to give a heads-up.</p>
<p>Thanks, and keep up the good work!</p>
<p>Plamen</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-40990"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 07/04/2016 - 21:37.</div>
    <div class="content">
     <p>@Plamen&nbsp;Thanks for testing. It should fit on most 4GB SD cards. I think you have just been unlucky that your card was smaller. I will trim the image file down so it will fit on your card.&nbsp;</p>
<p>@gsiviero&nbsp;wow, sound like you have been busy. Great to hear.&nbsp;</p>
<p>@Paul I wil investigate the update terminal freezing issue. I think this is due to an incomplete updated happening in the past. I agree this needs tri be fixed,&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41002"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9549.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gsiviero&#039;s picture" title="gsiviero&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9549.html" title="View user profile.">gsiviero</a> on Fri, 08/04/2016 - 09:44.</div>
    <div class="content">
     <p>Another update on the &quot;Engine id &#39;1&#39; is not supported.&quot; issue.</p>
<p>When I create a new feed I get</p>
<p>2016-04-08 09:25:49.817|WARN|PHPFina.php|get_meta() meta file does not exist &#39;/home/pi/data/phpfina/34.meta&#39;</p>
<p>then the &quot;wait...&quot; in the Inputs view.</p>
<p>If I edit again the feed (process list setup) I get &quot;feedid 34 does not exists or was deleted&quot;.</p>
<p>But if I go to /home/pi/data/phpfina/ I see that the file 34.dat keeps growing, so data is added to it.</p>
<p>It looks like the problem is somehow in the web interface that cannot find or visualize the feed, but the feed seems to be working:</p>
<p>-rw-r--r-- 1 www-data www-data 260 Apr&nbsp; 8 11:38 34.dat</p>
<p>-rw-r--r-- 1 www-data www-data 304 Apr&nbsp; 8 11:40 34.dat</p>
<p>-rw-r--r-- 1 www-data www-data 376 Apr&nbsp; 8 11:42 34.dat</p>
<p>I don&#39;t know if this finding could be useful.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41003"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 08/04/2016 - 10:11.</div>
    <div class="content">
     <p>This issue should now have bee fixed as of four days ago. Are you running latest software? Run emonPi update:&nbsp;</p>
<p><a href="https://github.com/emoncms/emoncms/commit/7cdbaf13510fc4e9043a724453bb4c68251bf83e" title="https://github.com/emoncms/emoncms/commit/7cdbaf13510fc4e9043a724453bb4c68251bf83e">https://github.com/emoncms/emoncms/commit/7cdbaf13510fc4e9043a724453bb4c...</a></p>
<p>Please confirm if latest update fixed for you. Recommend a reboot after update</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41004"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9495.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="iainmac&#039;s picture" title="iainmac&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9495.html" title="View user profile.">iainmac</a> on Fri, 08/04/2016 - 10:50.</div>
    <div class="content">
     <p>using emonpi&nbsp;v1.6 on raspberry pi 3, with no LCD,&nbsp;</p>
<ul>
<li>I have the same update issue as mentioned above</li>
<li>I also cannot power off the device using the button, holding for 5 seconds, no matter how many&nbsp;seconds does nothing.</li>
</ul>
<p>great build on the whole though! any thoughts on the powering on and off?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41006"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9549.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gsiviero&#039;s picture" title="gsiviero&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9549.html" title="View user profile.">gsiviero</a> on Fri, 08/04/2016 - 11:23.</div>
    <div class="content">
     <p>Pressing the web interface &quot;Update now&quot; button did nothing.</p>
<p>In fact from /var/log/service-runner.log :</p>
<p>STARTING: /home/pi/emonpi/service-runner-update.sh &gt; /home/pi/data/emonpiupdate.log<br />
/home/pi/emonpi/service-runner: riga 20: /home/pi/data/emonpiupdate.log: Permesso negato<br />
COMPLETE: /home/pi/emonpi/service-runner-update.sh &gt; /home/pi/data/emonpiupdate.log</p>
<p>I had to update from the command line:</p>
<p>sudo&nbsp; /home/pi/emonpi/service-runner-update.sh</p>
<p>Now the error &quot;meta file does not exist&quot; does not appear anymore, but I still have the error</p>
<p>2016-04-08 11:06:19.719|ERROR|feed_model.php|EngineClass() Engine id &#39;1&#39; is not supported.</p>
<p>and still cannot add feeds. I tried also with &quot;Clear browsing data&quot; (Chrome) but nothing changed.</p>
<p>Note: After the command line update now the &quot;Update now&quot; button works correctly.</p>
<p>EDIT:</p>
<p>from /var/log/apache2/error.log</p>
<p>[Fri Apr 08 13:19:29.508538 2016] [:error] [pid 6849] [client 192.168.1.9:54791] PHP Fatal error:&nbsp; Uncaught exception &#39;Exception&#39; with message &#39;ABORTED: Engine id &#39;1&#39; is not supported.&#39; in /var/www/emoncms/Modules/feed/feed_model.php:71\nStack trace:\n#0 /var/www/emoncms/Modules/feed/feed_model.php(411): Feed-&gt;EngineClass(&#39;1&#39;)\n#1 /var/www/emoncms/Modules/feed/feed_model.php(294): Feed-&gt;get_timevalue(&#39;1&#39;)\n#2 /var/www/emoncms/Modules/feed/feed_model.php(268): Feed-&gt;redis_get_user_feeds(1)\n#3 /var/www/emoncms/Modules/feed/feed_controller.php(38): Feed-&gt;get_user_feeds(&#39;1&#39;)\n#4 /var/www/emoncms/core.php(64): feed_controller()\n#5 /var/www/emoncms/index.php(146): controller(&#39;feed&#39;)\n#6 {main}\n&nbsp; thrown in /var/www/emoncms/Modules/feed/feed_model.php on line 71, referer: <a href="http://emonpi.lan/emoncms/" title="http://emonpi.lan/emoncms/">http://emonpi.lan/emoncms/</a><br />
[Fri Apr 08 13:19:30.143287 2016] [:error] [pid 1372] [client 192.168.1.9:54794] PHP Fatal error:&nbsp; Uncaught exception &#39;Exception&#39; with message &#39;ABORTED: Engine id &#39;1&#39; is not supported.&#39; in /var/www/emoncms/Modules/feed/feed_model.php:71\nStack trace:\n#0 /var/www/emoncms/Modules/feed/feed_model.php(411): Feed-&gt;EngineClass(&#39;1&#39;)\n#1 /var/www/emoncms/Modules/feed/feed_model.php(294): Feed-&gt;get_timevalue(&#39;1&#39;)\n#2 /var/www/emoncms/Modules/feed/feed_model.php(268): Feed-&gt;redis_get_user_feeds(1)\n#3 /var/www/emoncms/Modules/feed/feed_controller.php(38): Feed-&gt;get_user_feeds(&#39;1&#39;)\n#4 /var/www/emoncms/core.php(64): feed_controller()\n#5 /var/www/emoncms/index.php(146): controller(&#39;feed&#39;)\n#6 {main}\n&nbsp; thrown in /var/www/emoncms/Modules/feed/feed_model.php on line 71, referer: <a href="http://emonpi.lan/emoncms/input/view" title="http://emonpi.lan/emoncms/input/view">http://emonpi.lan/emoncms/input/view</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41010"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 08/04/2016 - 13:38.</div>
    <div class="content">
     <p>@Iain the shutdown script is part of the LCD script. If the emonpi detects no lcd connected the lcd script (including shutdown) does not run. I will look into creating a sparate shutdown script to run when no lcd is connected. However, almost all the emonPi&#39;s we sell include an lcd. Not many users have chosen to use just the emonpi pcb. If you want to use just a shutdown script there is one available in the emonpi LCD folder We are investigating the meta data and feed engine issue.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41011"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9765.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="miniwark&#039;s picture" title="miniwark&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9765.html" title="View user profile.">miniwark</a> on Fri, 08/04/2016 - 14:41.</div>
    <div class="content">
     <p>Hi !</p>
<p>I confirm that:</p>
<ul>
<li>the &quot;update now&quot; button was not doing anything. In fact, it was very painful to try to read the corresponding logs inside emoncms admin module, because this log is refreshed to the end of the logs all the time (its scrolled back to the end at each refresh).</li>
<li>thanks to @gsivierot I was able to update with`sudo&nbsp; /home/pi/emonpi/service-runner-update.sh`.</li>
<li>after this update, the &quot;update now&quot; button is now working. The refresh problem is also corrected.</li>
<li>the feeds still do not work after this update because of `EngineClass() Engine id &#39;1&#39; is not supported`</li>
</ul>
<p>I use an emonBase... so no need for the emonPiLCD service. But this service is started anyway at the end of the update script, and at boot up. (service emonPiLCD status tells me it&#39;s active).</p>
<p>This give me an emoncms admin module suggestion: a module where it&#39;s possible to activate/deactivate optional services : emonPiLCD, NodeRED, OpenHab, LightWaveRF. And why not also check the status of necessary services like redis, mysql, mosquitto, emonhub?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41015"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 09/04/2016 - 01:07.</div>
    <div class="content">
     <p>@miniwark,</p>
<p>If you have data you don&#39;t mind losing, could you try and perform a factory reset and let me know if the issue persists?</p>
<pre>
sudo su

emonpi/./factoryreset</pre>         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41019"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sat, 09/04/2016 - 17:19.</div>
    <div class="content">
     <p>Glyn - There may be an issue with the EditRealTime.&nbsp; I tried to delete a spike from&nbsp;July 15, 2015 at 2:54:50 PM CDT and it did not work. &nbsp;When I finally looked at the zoomed out graph, the EditRealTime ended up changing a value on&nbsp;March 18, 2016 at 10:21:59 PM CDT. &nbsp;This is the time I was doing the editing. I have two spikes to fix. &nbsp;How do I delete bad data in my kWh feed?</p>
<p>If this belongs in a new thread please let me know and I will delete this and start a new thread.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41024"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9765.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="miniwark&#039;s picture" title="miniwark&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9765.html" title="View user profile.">miniwark</a> on Sat, 09/04/2016 - 21:20.</div>
    <div class="content">
     <p>@glyn.hudson</p>
<p>I have done the factory reset and reboot:</p>
<p>1) after the reset, emoncms could not connect to the database: manualy restarting the mysql service have solved the problem (the restart script said than mysql was &#39;not closed cleanly&#39;). By the way what is the default password for mysql root user ? <em>emonpi2016</em> and <em>emonpiemoncmsmysql2016</em> are denied.</p>
<p>2) an update for the database was recommended using the admin module (<em>dashboard</em> table)</p>
<p>3) after updating the EmonHub config file, my emonTX v2 node was detected with the correct fields. By the way, what is this <em>rssi</em> field (field with negative value around 40) ? I do not have defined this field in my node firmware and emonhub config.</p>
<p>4) i was able to create a new feed from the input module.</p>
<p>5) the feed now appear correctly in the feeds module and is usable in dashboards :)</p>
<p>Conclusion: the factory reset have solved the problem (but may be updated to avoid the mysql error message problem after reboot). Thanks a lot for your help!</p>
<p>&nbsp;</p>
<p>A few final remarks: (but may be specifics to emoncms and not the image)</p>
<ul>
<li>after setting the correct local time with raspi-config and inside emoncms, emoncms.log is still at GMT+0</li>
<li>please update the description with the root mysql password (see above)</li>
</ul>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41033"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 10/04/2016 - 11:35.</div>
    <div class="content">
     <p>@miniwark&nbsp;the mysql&nbsp;&#39;root&#39; user password is &#39;emonpimysql2016&#39; and mysql&nbsp;&#39;emoncms&#39;&nbsp;user&nbsp;password is &#39;emonpiemoncmsmysql2016&#39;</p>
<p>1. Where did you see the mysql error? I have not seen this error or had issues connecting to DB after factory reset. Here is the MYSQL drop code, can you see how it can be improved?&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/blob/master/factoryreset#L92" title="https://github.com/openenergymonitor/emonpi/blob/master/factoryreset#L92">https://github.com/openenergymonitor/emonpi/blob/master/factoryreset#L92</a></p>
<p>2. The emonPi update script should auto update the database. I would recomend running emonpi update after factory reset.&nbsp;</p>
<p>3. RSSI is Received Signal Strength Indicator it&#39;s a signal strength indicator. The less negative the better the signal. If you move the emonTx further away the number should decrease (get more negative).&nbsp;</p>
<p>4. Great!&nbsp;</p>
<p>Is the time showing correct on the graphs? Is it just in the log time is incorrect?</p>
<p>Thanks for your help.&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41034"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 10/04/2016 - 11:41.</div>
    <div class="content">
     <p>@Jon Just tested realtime edit and it seemed to work fine for me. I&#39;m running Emoncms V9.4. When you click the graph to inform RealTime edit the time location of the data point you wish to edit make sure your click was registered and the &#39;Edit FEED-NAME @ time:&#39; shows the time string of the data point you wish to edit</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41053"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sun, 10/04/2016 - 22:57.</div>
    <div class="content">
     <p>Glyn - should I see the data change immediately on the chart? &nbsp;Or do I need to clear the cache and refresh? &nbsp;How do I know the data changed? &nbsp;I&#39;ve tried Firefox, Safari &amp; Chrome and they all seem to do the same thing... &nbsp;(and yes I am clicking on the data point I want to change and I can see the current data at that epoch time)</p>
<p><strong>EDIT:</strong> &nbsp;OK it seems to take a little while. &nbsp;Is the data stored as increments and the fina&nbsp;engine needs to recalculate the entire set of data?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41085"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 11/04/2016 - 22:29.</div>
    <div class="content">
     <p>Hmm Seems to show up immediately for me, testing on emonPi&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41086"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 11/04/2016 - 22:56.</div>
    <div class="content">
     <p>me too</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41092"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Tue, 12/04/2016 - 08:57.</div>
    <div class="content">
     <p>OK, this is probably an FAQ, but if I use the standard low-write image like this one but then add spinning storage like a WD pi Drive later is there a &quot;big switch&quot; where I can enable all the disabled features like PHPFIWA etc. ?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41094"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9549.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gsiviero&#039;s picture" title="gsiviero&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9549.html" title="View user profile.">gsiviero</a> on Tue, 12/04/2016 - 09:39.</div>
    <div class="content">
     <p>I modified the factoryreset script to obtain a &quot;DB reset script&quot; to reset only<br />
- mysql emoncms database<br />
- phpfina and phptimeseries data</p>
<p>Now I can add and modify feeds again.</p>
<p>I&#39;m afraid that the previous time there may have been an error when I deleted or modified some of the feeds and the db may have lost the correct feed-ID &lt;-&gt; feed association or something like that.</p>
<p>Can anyone point me to a thread or instructions to create a &quot;pulse-count to power&quot; feed, if this is even possible using the &quot;process list&quot; interface?</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41131"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8417.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="baldockery&#039;s picture" title="baldockery&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8417.html" title="View user profile.">baldockery</a> on Thu, 14/04/2016 - 03:16.</div>
    <div class="content">
     <p>(1)&nbsp;Sorry if I missed when this happened, but have reporters in emonhub.conf been replaced by new types of interfacers?</p>
<p>I am accustomed to&nbsp;Type = EmonHubEmoncmsReporter to post to my own Ubuntu-based emonCMS server, but I see that the deafult emonhub.conf file in this new release candidate is using EmonHubEmoncmsHTTPInterfacer to get to emoncms.org.</p>
<p>(2) I&#39;ve been using the emonSD-17Jun2015 image to run a low-write emonHub on a Raspberry Pi. Is this viewed as a successor to that? In particular, the&nbsp;emonSD-17Jun2015 version was not a local emonCMS server (as far as I know), but this clearly is. I like the idea of preserving the longevity of the SD card in the Pi by posting all the data to a server elsewhere.</p>
<p>Thanks! I&#39;m having fun checking out OpenHAB and NodeRED.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41153"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Thu, 14/04/2016 - 17:53.</div>
    <div class="content">
     <p>On the 4GB card subject.... I have just tried flashing it the to Transcend 4GB card *supplied with* the emonpi&nbsp;I bought and it&#39;s still too big. Considering I thought I was supposed to get an 8GB card anyway, but that&#39;s by the by...</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41158"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 14/04/2016 - 21:19.</div>
    <div class="content">
     <p>@Peter I&#39;m afraid there is no &#39;big-switch&#39; to revert to a non low write image. However I would recommend sticking with the low-write image. I cannot see any advantages of changing. What missing features are you after? The low write optimizations will increase the life span of your disk.&nbsp;</p>
<p>@gsiviero see here for how to log pluse&nbsp;count to feed <a href="../opticalpulsesensor.html">https://openenergymonitor.org/emon/opticalpulsesensor</a></p>
<p>@baldockery&nbsp;</p>
<p>1.) yes the RC image uses the &#39;emon-pi- varient of emonHub which supports MQTT. See here for config info <a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/configuration.md">https://github.com/openenergymonitor/emonhub/blob/emon-pi/configuration.md</a>. This version of emonhub was also used on the 17Jun2015 image.&nbsp;</p>
<p>2.) Yes, this is a successor to this 17thJun image. I would recommend using this image if you want Emoncms V9 and latest features e.g openHAB, nodeRED built in. No, incorrect the 17thJune image DOES also run local Emoncms V8 by default. We have optimised the low-write so there is no problem running Emoncms locally. However if you wish you can just post data to Emoncms.org and not log any Inputs to feeds locally.&nbsp;</p>
<p>@ Peter It&#39;s on the list to address the size of the image for the next release to fit on all 4GB sd card sizes. Only the recent SD cards from the shop are 8GB. When was your emonPi ordered? Drop an email to shop support they will happily send you out an 8GB SD card. &nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41162"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Fri, 15/04/2016 - 07:43.</div>
    <div class="content">
     <p>Glyn,</p>
<p>In terms of a non low-write version, maybe I&#39;m just not spending enough time understanding emoncms but most of the functions are missing and I have assumed they are missing because they depend on the phpfiwa&nbsp;functionality - if it&#39;s simply a case of more git clones/pulls to add the full set of functions then I&#39;m happy. I have now got a separate Pi 3 and I have a Pi Drive on order so I can &quot;play&quot; with emoncms on Pi (and other stuff) without trashing what was my only Pi. My bad.</p>
<p>As long as I have a live data back up schedule in place *I* don&#39;t care about SD card lifespans. I do understand that many others do, especially for less accessible and more critical applications of the emonpi.</p>
<p>The Transcend card was 5MB too small - but to get me out of a hole, since I was the idiot that trashed my original install - I just went back to the earlier release candidate and that works fine. I have now ordered a couple of 64GB&nbsp;cards both for the emonpi&nbsp;and my other Pi3 as above. At today&#39;s prices (&pound;12.55 for a Transcend Class10/U1 and &pound;24.99 for a SanDisk Extreme Class10/U3) it&#39;s not worth faffing.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41173"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9765.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="miniwark&#039;s picture" title="miniwark&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9765.html" title="View user profile.">miniwark</a> on Fri, 15/04/2016 - 12:49.</div>
    <div class="content">
     <p>@glyn.hudson</p>
<p>Thanks for the MySql root user password.</p>
<p>1) The error message was a generic error &quot;could not connect to the database&quot; message by Emoncms.</p>
<p>At the end of the database reset, just restart the MySQL server. Or maybe use a FLUSH statement. I think the issue may be related to incomplete syncing of the MySQL internal caches.</p>
<p>2) OK.</p>
<p>3) Thanks, than sure is an useful metric.</p>
<p>4) :-)</p>
<p>&gt; Is the time showing correct on the graphs? Is it just in the log time is incorrect?</p>
<p>Yes the time is showing correctly in the graphs: in the visualization extra, and in the &#39;realtime&#39; graph widget ins the dashboards.</p>
<p>Only the logs display a wrong time.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41174"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Fri, 15/04/2016 - 13:02.</div>
    <div class="content">
     <p>One minorish thing, but the emonSDexpand&nbsp;is very slow compared to the almost instance NOOBS&nbsp;resize that runs at their install time. I am not sure what the latter does, but the one I started on a 64GB card a while back is still running resizefs</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41176"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 15/04/2016 - 15:21.</div>
    <div class="content">
     <p>&nbsp;I believe there could be some confusion with regard to the old low-write branch on github. Low write optimisations&nbsp;have now been merged into Master and the new&nbsp;emonPi&nbsp;(this image) runs the Stable branch which is a stable snapshot of Master. All features are included.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41177"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Fri, 15/04/2016 - 15:25.</div>
    <div class="content">
     <p>That&#39;s very good to know. I now have a copy of this RC installed on a shiny 64GB card, filesystem expanded and emonhub.conf installed - just got to get home from work and install it. Can&#39;t see any nodes on this standalone Pi so I can fiddle with feeds yet.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41180"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Fri, 15/04/2016 - 18:45.</div>
    <div class="content">
     <p>Right, that&#39;s almost all good. All the functions are visible, thanks.</p>
<p>I am seeing two problems &quot;out of the box&quot;;</p>
<p>1. /var/lib/php5/sessions is not a symlink to a writable directory and so generates errors. I don&#39;t see it mentioned in the /var/log set-up in /etc/rc.local. Is it supposed to be taken care of by any other mechanism?</p>
<p>2. The phpmqtt_input.php script is constantly going in a connect loop:</p>
<p>2016-04-15 18:09:15.561|WARN|phpmqtt_input.php|Connecting to MQTT server: Connection Accepted.: code: 0<br />
2016-04-15 18:09:15.562|WARN|phpmqtt_input.php|Subscribed to topic: emon/#<br />
2016-04-15 18:09:16.619|WARN|phpmqtt_input.php|Starting MQTT Input script<br />
2016-04-15 18:09:24.731|WARN|phpmqtt_input.php|Subscribing to: emon/#<br />
2016-04-15 18:09:24.731|WARN|phpmqtt_input.php|Not connected, retrying connection</p>
<p>I am going to hack the php sessions directory in for now. In php.ini I am changing the save_path and then creating /var/log/php5 and /var/log/php5/sessions in /etc/rc.local - I think that&#39;s about right. But I recall /etc/rc.local is created from something else?</p>
<p>Edit: Old version used /tmp for sessions. Would try it but my emonpi crashed and wouldn&#39;t reboot, so restored old SD card for tonight.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41185"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 15/04/2016 - 18:48.</div>
    <div class="content">
     <p>Where are you seeing the&nbsp;. /var/lib/php5/sessions errors? Are you using this RC2 SD card image out of the box?&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41186"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Fri, 15/04/2016 - 19:12.</div>
    <div class="content">
     <p>I did an apt-get update / upgrade while preparing the card, so it may once again be my fault. It was in /etc/php5/apache2/php.ini I think.</p>
<p>I am going to start from scratch tomorrow, no mods and see.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41190"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 15/04/2016 - 22:34.</div>
    <div class="content">
     <p>I have just tested an apt-get upgrade and when updating apache it gave me the option to keep the local version of&nbsp;/etc/php5/apache2/php.ini&nbsp;of upgrade to the package maintainers version. I checked out the difference and the best option will be to keep the local copy. The modifications made to php.ini are critical to emonPi operation.&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41195"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Sat, 16/04/2016 - 17:26.</div>
    <div class="content">
     <p>Thanks. I&#39;ve gone back to a raw image, no updates and just grown the file system. All is well in stupid user land. Sorry.</p>
<p>The phpmqtt errors continue, but I&#39;ve not looked if that needs further config to start working.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41204"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 16/04/2016 - 23:54.</div>
    <div class="content">
     <p>What mqtt input error are your experiencing? Does a restart of the service or system reboot fix?&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41237"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Mon, 18/04/2016 - 15:20.</div>
    <div class="content">
     <p>Sorry, back now. The phpmqtt_input.php errors continued after a clean reinstall but then stopped eventually with no intervention by me, last seen:</p>
<p>2016-04-16 08:32:41.258|WARN|phpmqtt_input.php|Not connected, retrying connection</p>
<p>This time I can say all I think have done is make an image, boot with Ethernet attached and connected to web interface, registered&nbsp;user, added local emoncms and added API keys in emonhub,&nbsp;changed&nbsp;ssh password and grown filesystem. I have tried hard not to fiddle. This time.</p>
<p>I may reboot at some point and see if the connection errors for phpmqtt come back.</p>
<p>All else is well, thanks for your patience!</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41239"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8417.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="baldockery&#039;s picture" title="baldockery&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8417.html" title="View user profile.">baldockery</a> on Mon, 18/04/2016 - 19:46.</div>
    <div class="content">
     <p>Earlier in these comments I was under the impression that emonhub&nbsp;low-write didn&#39;t run a local Emoncms instance. I discovered why. Apparently when I set up my emonhub in July of 2015 I went with the emonSD-13-03-15.img image&nbsp;that provided me with &quot;emonHub Pre-Release Development Version (rc1.2)&quot;.&nbsp;Why, I don&#39;t know, since the&nbsp;17th&nbsp;Jun image would have been available to me at that time.</p>
<p>In any case, on my version the following are installed but&nbsp;not running: apache, mysql, redis-server, mosquitto.</p>
<p>So, my question now is, what is the best upgrade path for me? My emonhub.conf file will clearly need to look very different with the new MQTT-based&nbsp;scheme. I&#39;d like to:</p>
<p>1) Avoid significant down-time where I missing collecting solar and use data.</p>
<p>2) Have a plan to revert to my current stable setup if the upgrade is going poorly.</p>
<p>My current best thought is to use another spare Raspberry Pi, buy another RFM69Pi hat for it and run it in parallel with my current setup until it appears to be working, then take down the current setup. But if there is a better way ...</p>
<p>Thanks much,&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41247"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 18/04/2016 - 22:33.</div>
    <div class="content">
     <p>So I&#39;m presuming you don&#39;t have any local Emoncms data to backup since your current image is not running local Emoncms. Is all your data stored in Emoncms.org?&nbsp;</p>
<p>If this is the case then you can just fire up the new image on a fresh SD card and paste in your Emoncms.org API key into the new emonhub.conf.&nbsp;</p>
<p>Depending on what remote nodes you have set up, you many need to modify emonhub.conf with the correct node decoders to match the RF data being transmitted by your nodes. See here for info on configuring emonhub node decoders:&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/configuration.md" title="https://github.com/openenergymonitor/emonhub/blob/emon-pi/configuration.md">https://github.com/openenergymonitor/emonhub/blob/emon-pi/configuration.md</a></p>
<p>If you want to begin logging to local Emoncms you would then log the required inputs to feeds in local Emoncms</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41262"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Tue, 19/04/2016 - 12:37.</div>
    <div class="content">
     <p>On the subject of &quot;EngineClass() Engine id &#39;1&#39; is not supported.&quot; errors, I did a</p>
<p>delete from feeds where engine = 1;</p>
<p>in mysql and rebooted. All was well after that.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41267"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9784.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9784.jpg" alt="Paul-B&#039;s picture" title="Paul-B&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9784.html" title="View user profile.">Paul-B</a> on Tue, 19/04/2016 - 20:33.</div>
    <div class="content">
     <p>I am trying to work this out for myself but given up as I am not a Linux expert. I have a stock EmonPI is their a guide to upgrading from June15 to release candidate?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41271"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8948.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smitt1979&#039;s picture" title="smitt1979&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8948.html" title="View user profile.">smitt1979</a> on Tue, 19/04/2016 - 22:43.</div>
    <div class="content">
     <p>Hi Paul</p>
<p>Bit out of date but should&nbsp;still work&nbsp;</p>
<p><a href="11407.html" title="https://openenergymonitor.org/emon/node/11407">https://openenergymonitor.org/emon/node/11407</a></p>
<p>Steve</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41272"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 19/04/2016 - 23:17.</div>
    <div class="content">
     <p>I would recommend starting from fresh with this new image on a new SD card and using the Backup Module to migrate your data:</p>
<p><a href="https://github.com/emoncms/backup" title="https://github.com/emoncms/backup">https://github.com/emoncms/backup</a></p>
<p><a href="https://www.youtube.com/embed/5U_tOlsWjXM" title="https://www.youtube.com/embed/5U_tOlsWjXM">https://www.youtube.com/embed/5U_tOlsWjXM</a></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41321"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Thu, 21/04/2016 - 18:37.</div>
    <div class="content">
     <p>One minor comment; All user&#39;s .bash_history needs to be deleted before building a distribution - it&#39;s full of your old commands. Certainly root and emonpi have them.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41328"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9549.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gsiviero&#039;s picture" title="gsiviero&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9549.html" title="View user profile.">gsiviero</a> on Fri, 22/04/2016 - 07:26.</div>
    <div class="content">
     <p>There may be a problem with the emonPi LCD service.</p>
<p>Every time I reboot the emonPi the display remains lit.</p>
<p>From the log it looks like the service is loaded at startup:</p>
<p>Apr 20 21:18:49 emonpi systemd[1]: Starting LSB: emonPi LCD controller...</p>
<p>Apr 20 21:18:49 emonpi emonPiLCD[418]: Starting system emonPiLCD daemon:.</p>
<p>Apr 20 21:18:49 emonpi systemd[1]: Started LSB: emonPi LCD controller.</p>
<p>If I check it:</p>
<p>sudo service emonPiLCD status<br />
* emonPiLCD.service - LSB: emonPi LCD controller<br />
&nbsp;&nbsp; Loaded: loaded (/etc/init.d/emonPiLCD)<br />
&nbsp;&nbsp; Active: active (<strong>exited</strong>) since Wed 2016-04-20 21:18:49 CEST; 1 day 11h ago<br />
&nbsp; Process: 418 ExecStart=/etc/init.d/emonPiLCD start (code=exited, status=0/SUCCESS)</p>
<p>Apr 20 21:18:48 emonpi systemd[1]: Starting LSB: emonPi LCD controller...<br />
Apr 20 21:18:48 emonpi emonPiLCD[418]: Starting system emonPiLCD daemon:.<br />
Apr 20 21:18:49 emonpi systemd[1]: Started LSB: emonPi LCD controller.</p>
<p>And when I restart the LCD service with</p>
<p><em>sudo service emonPiLCD restart</em></p>
<p>I find that the service is in fact not running:</p>
<p>Apr 22 09:11:26 emonpi systemd[1]: Stopping LSB: emonPi LCD controller...<br />
Apr 22 09:11:26 emonpi emonPiLCD[20444]: Stopping system emonPiLCD daemon:start-stop-daemon: warning: failed to kill 446: No such process<br />
Apr 22 09:11:26 emonpi emonPiLCD[20444]: No process in pidfile &#39;/var/run/emonPiLCD.pid&#39; found running; none killed.<br />
Apr 22 09:11:26 emonpi emonPiLCD[20444]: failed!<br />
Apr 22 09:11:26 emonpi systemd[1]: Starting LSB: emonPi LCD controller...<br />
Apr 22 09:11:26 emonpi emonPiLCD[20451]: Starting system emonPiLCD daemon:.<br />
Apr 22 09:11:26 emonpi systemd[1]: Started LSB: emonPi LCD controller.</p>
<p>Only then:</p>
<p>sudo service emonPiLCD status<br />
* emonPiLCD.service - LSB: emonPi LCD controller<br />
&nbsp;&nbsp; Loaded: loaded (/etc/init.d/emonPiLCD)<br />
&nbsp;&nbsp; Active: active (<strong>running</strong>) since Fri 2016-04-22 09:11:26 CEST; 7s ago<br />
&nbsp; Process: 20444 ExecStop=/etc/init.d/emonPiLCD stop (code=exited, status=0/SUCCESS)<br />
&nbsp; Process: 20451 ExecStart=/etc/init.d/emonPiLCD start (code=exited, status=0/SUCCESS)<br />
&nbsp;&nbsp; CGroup: /system.slice/emonPiLCD.service<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `-20456 python /usr/share/emonPiLCD/emonPiLCD.py</p>
<p>Apr 22 09:11:26 emonpi emonPiLCD[20451]: Starting system emonPiLCD daemon:.<br />
Apr 22 09:11:26 emonpi systemd[1]: Started LSB: emonPi LCD controller.</p>
<p>Anyone else having this problem?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41342"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6977.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eno&#039;s picture" title="Eno&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/6977.html" title="View user profile.">Eno</a> on Fri, 22/04/2016 - 15:17.</div>
    <div class="content">
     <p>All installed and now up and running, seems ok so far.</p>
<p>A minor comment on guide post:</p>
<p>On MQTT password change</p>
<p>&quot;~/oem_openhab/configuration/openhab.cfg&quot; should read &quot;~/oem_openHab/openhab.cfg&quot;</p>
<p>Is the capitalization&nbsp;intentional?</p>
<p>&quot;&nbsp;/etc/openhab/configurations/openhab.cfg&quot; is a sym link to&nbsp;&quot;~/oem_openHab/openhab.cfg&quot;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41352"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 23/04/2016 - 09:28.</div>
    <div class="content">
     <p>@ peter thanks, I have added clearing full bash history the the emonPi factory reset script which gets ran before making an image</p>
<p>@&nbsp;gsiviero&nbsp; is the issue that the LCD does not restart when the system is restarted? I have not been able to recreate</p>
<p>@Eno thanks. The config can actually be edited in either location, but I agree, it&#39;s clearer for the user to edit the source symlink location. The capitalization of ~/oem_openHab is required.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41383"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Mon, 25/04/2016 - 15:29.</div>
    <div class="content">
     <p>This may be more a 9.4 thing than a emonpi thing I think, but since it&#39;s part of my testing of the image...</p>
<p>I am getting odd maths / sign changes in my <em>solar + grid = home</em> calculation.</p>
<p>I noticed that my home power was going negative occassionally. Looking back through the feed it appears to have starts on Saturday morning. I am not aware of - but maybe did - make changes.</p>
<p>My input for &quot;<em>Solar Power</em>&quot; does:</p>
<p>...<br />
9.&nbsp;Reset to original<br />
10. If &gt; 40, skip<br />
11. Reset to zero<br />
12. + input <em>Grid Power</em><br />
13. Log to feed <em>Home Power</em></p>
<p>I see this in the feed view (ticking the other boxes, nice feature):</p>
<p>Date Time,Solar,Grid,Home</p>
<p>2016-04-23 08:24:20, 1484.0, -931.0, 607.0<br />
2016-04-23 08:24:30, 1452.0, -885.0, 521.0<br />
2016-04-23 08:24:40, null, null, null<br />
2016-04-23 08:24:50, null, null, null<br />
2016-04-23 08:25:00, 1504.0, -961.0, 619.0<br />
2016-04-23 08:25:10, 537.0, -24.0, <u><strong>-424.0</strong></u><br />
2016-04-23 08:25:20, 511.0, -25.0, 487.0<br />
2016-04-23 08:25:30, 510.0, -2.0, 485.0</p>
<p>Similar negatives continue every few minutes.</p>
<p>Only difference I can see is my existing emoncms&nbsp;(also claiming to be 9.4)&nbsp;is using PHPFIWA while on the emonpi they are PHPFINA.</p>
<p>Am I just missing the way the system handles preceding&nbsp;nulls?</p>
<p><strong>Update:</strong>&nbsp;actually now noticed that &quot;-424&quot; is 537 + - 961 from the previous sample. Is this the way it&#39;s supposed to work with the change in the feed and is this another instance of me not reading some crucial doc about PHPFINA?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41385"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 25/04/2016 - 16:10.</div>
    <div class="content">
     <p>Yes looks like solar pv app issue which has just been updated. Please post github issue<br />
<a href="https://github.com/emoncms/app" title="https://github.com/emoncms/app">https://github.com/emoncms/app</a></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41388"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Tue, 26/04/2016 - 09:14.</div>
    <div class="content">
     <p>Glyn,</p>
<p>Are you replying on my question? That&#39;s the feed, long before the mysolar app reads the data... I am guessing a timing issue. I have only been trying the emonpi for processing data for a couple of weeks or so. Until now I have always used emoncms.org or a Linux server; This could be a performance issue, given it calculates against a delayed data item in another data item&#39;s input?</p>
<p>Edit: I did notice a big chunky change being applied to PHPFina for averaging support, so I am updating and rebooting for now...</p>
<p>Edit2: Now I think about this more I think it&#39;s simply a consequence of processing the data on the same system as it&#39;s collected; When you send data to another emoncms instance it is groups together into a write-per-interval and all the values are updated at the same time. When locally processing the data one of the data points will always lead or lag another. Is there any way I may have missed to lock-step each input cycle and run the processing at a fixed interval?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41395"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 26/04/2016 - 09:17.</div>
    <div class="content">
     <p>Hi Peter, The example you give would seem to be correct,&nbsp;if &quot;grid&quot; uses a lower CT channel number than &quot;solar&quot; and is therefore before it in packet arriving into emonhub.</p>
<p>The reason you are seeing a change when moving to an&nbsp;emonPi image is that the emon-pi variant of emonhub&nbsp;passes the individual values one by one rather than passing them as a group (AKA node).&nbsp;</p>
<p>Previously the group of value would arrive at emoncms&nbsp;(by http)&nbsp;and then get processed, now what you are seeing is each input arriving at emoncms&nbsp;and being processed individually and independently of each other.</p>
<p>You will get better results if you rewrite your processing to the solar&nbsp;input and moving forward&nbsp;only use the&nbsp;inputs and feeds of&nbsp;preceding&nbsp;inputs&nbsp;(according to the original packet order)&nbsp;in any given&nbsp;processlist and hope that the order they arrive at emoncms doesn&#39;t change eg a momentary network glitch, any apache, mosquitto or sql server house keeping etc as there is no mechanism to ensure the order they arrive or get processed.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41399"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Tue, 26/04/2016 - 10:19.</div>
    <div class="content">
     <p>Thanks. I was considering trying that - move the processing down to the Grid CT, one CT below. I think this worked on day one because I originally had the solar CT as the high sensitivity one (CT4) but subsequently moved both the processing/storage to a Linux instance and also moved the CT to CT1 when the solar output looked like it would exceed the limits of CT4 on the emonTX.</p>
<p>Update: Yup, that was it. All working now. Is this an FAQ or should it be?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41417"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 26/04/2016 - 14:47.</div>
    <div class="content">
     <p>Ah sorry when you said &#39;my solar&#39; I thought you were referring to the &#39;MySolar&#39; app!&nbsp;Apologies.&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41473"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Thu, 28/04/2016 - 13:12.</div>
    <div class="content">
     <p>Not sure if this is an RC2 thing, but having tried to install a node-red node using &quot;npm install -g&quot; the node ends up in /usr/loca/lib/... and not /usr/lib/...</p>
<p>Even if this is correct for user installed nodes, it still didn&#39;t appear and after removing it and installing it again without the -g I still could not see node-red-node-forecastio&nbsp;after a node-red restart and also a reboot just to be sure. Is there a different&nbsp;supported way to install new nodes and&nbsp;flows using npm?</p>
<p>Edit: Found the non -g install under /home/pi/node_modules/ - when I think it should be /home/pi/data/node-red/node_modules ?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41475"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 28/04/2016 - 13:40.</div>
    <div class="content">
     <p>Node red is ready installed on this images via the Jessie sources. This is the recommended way to install NodeRED node, not via NPM.</p>
<p>The nodeRED user directory is in <em>/home/pi/data/node-red</em>&nbsp;&nbsp;this is where user modules should be installed. See readme on:</p>
<p><a href="https://github.com/openenergymonitor/oem_node-red" title="https://github.com/openenergymonitor/oem_node-red">https://github.com/openenergymonitor/oem_node-red</a></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41480"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Thu, 28/04/2016 - 15:22.</div>
    <div class="content">
     <p>Peter - I&#39;ve only been experimenting with Node-RED for a couple of months so I am not an expert. But this is how I install a new Node-RED node from the Node-RED library <a href="http://flows.nodered.org/">http://flows.nodered.org</a> onto the emonPi.</p>
<blockquote><pre>
cd /home/pi/data/node-red
rpi-rw
npm install node-red-node-forecastio
​# do not use the global option (e.g., npm install -g node-red-xxxxx) 
rpi-ro
sudo service nodered restart</pre></blockquote>
<p>Once in awhile I will need to prefix the &quot;npm install node-red-xxxxx&quot; with&nbsp;do a &quot;sudo &quot;&nbsp;but I don&#39;t know why. &nbsp;I am guessing it is related to a dependency that is also installed with the new node.</p>
<p>All of your new Node-RED nodes should now be installed at: /home/pi/data/node-red/node_modules</p>
<p>The recommendation for not using the global option (-g) came from the Node-RED Google Group at <a href="https://groups.google.com/forum/#!forum/node-red">https://groups.google.com/forum/#!forum/node-red</a>. I cannot find the post at this moment.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41481"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Thu, 28/04/2016 - 15:22.</div>
    <div class="content">
     <p>Thanks. I also shoved a symlink in /home/pi to protect myself from forgetting to cd into data/node-red.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41525"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5562.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rtX&#039;s picture" title="rtX&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/5562.html" title="View user profile.">rtX</a> on Sun, 01/05/2016 - 14:55.</div>
    <div class="content">
     <p>I&#39;m using the RC2 image after expanding on an 8GB card, on a Pi with the RF hat from the shop, and after doing a Pi update using apt-get. Warning: I&#39;m a novice user and so may be missing something.&nbsp; I&#39;ve set up a number of inputs and feeds and they all seem to be working okay or as I would expect anyway.&nbsp; I have successfully connected to the Pi using SSH and have logged into the web interface of my local Pi.&nbsp; A couple of times today whilst &#39;watching&#39; the inputs page and after a few hours attached via the web interface, I have noticed that the inputs have seemingly stopped logging.&nbsp; When trying to perform any task (such as adding a new feed) I get an error message (&#39;undefined&#39;, I think, sorry did not note it).&nbsp; If I logout, it seems to do that okay and I get the (re)log in screen okay, but if I try to login again a banner appears on a red background in the login box saying &#39;undefined&#39;.&nbsp; I don&#39;t seem to be able to login.&nbsp; The SSH connection still seems to be working and I can do an orderly &#39;sudo halt&#39;, restart the Pi and am then able to login into the web interface again using the same credentials. As I say this has happened twice today.&nbsp; I&#39;m just playing around at the moment, so it&#39;s not a major issue for me, but maybe there is a problem - or am I doing something silly? I&#39;ve tried different browser tabs etc. If I go to the Pi&#39;s IP address (192.168.2.2, fwiw), I get the login screen but my credentials do not work until I restart the Pi.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41531"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 01/05/2016 - 20:46.</div>
    <div class="content">
     <p>rtX - the discussion on the&nbsp;<a href="12566.html">Tips n Tricks from my own Pi appliance...</a>&nbsp;thread points the finger at the&nbsp;&quot;commit=180&quot; entry in /etc/fstab&nbsp;causing the issues once&nbsp;apt-get upgrade is used, you could try manually editing and rebooting.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41556"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 03/05/2016 - 08:23.</div>
    <div class="content">
     <p>Thanks Paul, Yes this is a known issue and will be fixed in the next sd card release (posted later today)&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/commit/fd145f0797769fd3af082edc63c9722d64410d50" title="https://github.com/openenergymonitor/emonpi/commit/fd145f0797769fd3af082edc63c9722d64410d50">https://github.com/openenergymonitor/emonpi/commit/fd145f0797769fd3af082...</a></p>
<p>Take a peak at the change log for the updated image at the bottom of this page:</p>
<p><a href="https://github.com/openenergymonitor/emonpi/wiki/emonSD-pre-built-SD-card-Download-&amp;-Change-Log" title="https://github.com/openenergymonitor/emonpi/wiki/emonSD-pre-built-SD-card-Download-&amp;-Change-Log">https://github.com/openenergymonitor/emonpi/wiki/emonSD-pre-built-SD-car...</a></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41564"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 03/05/2016 - 17:45.</div>
    <div class="content">
     <p>New image has been released. Please post on thread on the new forums&nbsp;</p>
<p><a href="https://community.openenergymonitor.org/t/emonsd-03may16-release/145" title="https://community.openenergymonitor.org/t/emonsd-03may16-release/145">https://community.openenergymonitor.org/t/emonsd-03may16-release/145</a></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41567"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5562.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rtX&#039;s picture" title="rtX&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/5562.html" title="View user profile.">rtX</a> on Wed, 04/05/2016 - 10:52.</div>
    <div class="content">
     <p>Thanks for the help, Paul.&nbsp; I have been using the June 2015 image just to get things working etc.</p>
<p>I see now a new image is available (3rd May 2016).&nbsp; Is this an RC or an actual release? Many thanks for all the hard work.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-41575"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: (Release Candidate #2 ): emonSD-29Mar16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 05/05/2016 - 00:10.</div>
    <div class="content">
     <p>This *should* be an actual release. Please post on the new thread on the new forums:</p>
<p><a href="https://community.openenergymonitor.org/t/emonsd-03may16-release/145" title="https://community.openenergymonitor.org/t/emonsd-03may16-release/145">https://community.openenergymonitor.org/t/emonsd-03may16-release/145</a></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12437"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-tORQcqqfbmvyH0OSsHEwdy-uHYCzqCMpovcXSTJDyp0" value="form-tORQcqqfbmvyH0OSsHEwdy-uHYCzqCMpovcXSTJDyp0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
