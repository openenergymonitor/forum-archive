<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11716 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:49:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Transmit variables from EmonCMS (Rasp or external) to EmonPi  | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>
        <span class="submitted">Submitted by <a href="../user/8733.html" title="View user profile.">CidiRome</a> on Tue, 01/12/2015 - 01:22</span>
        <div class="content"><p>Hi.</p>
<p>I&#39;ve been reading about this subject, and I&#39;m not sure of the best way to do it.</p>
<p>To transmit variables to the EmonPi firmware,is it necessary to use packetgen&nbsp;or the EmonPi&#39;s internal EmonCMS can do that by itself?</p>
<p>I&#39;ve seen that there is Tx information after the Rx variables in Nodes section<br />
<em>Tx ID Name Last updated Value</em><br />
I suspect I would be able to configure them with something like this in the emonhub&nbsp;config section:</p>
<blockquote><p>&nbsp; &nbsp; [[[tx]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp; names = var1,&nbsp;var2<br />
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;datacodes = h, h<br />
&nbsp; &nbsp; &nbsp; &nbsp; scales = 1, 1<br />
&nbsp; &nbsp; &nbsp; &nbsp; units = %, delay</p>
</blockquote>
<p>But, if this would even work what would be the method to receive the variables in the EmonPi firmware?&nbsp;</p>
<p>Cheers.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11778.html" class="topic-previous" title="Go to previous forum topic">‹ Customize 3-phase sketch</a>
              <a href="11749.html" class="topic-next" title="Go to next forum topic">MQTT From scratch ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-36668"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8733.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8733.jpg" alt="CidiRome&#039;s picture" title="CidiRome&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/8733.html" title="View user profile.">CidiRome</a> on Thu, 03/12/2015 - 21:48.</div>
    <div class="content">
     <p>This is turning&nbsp;to be not as easy as it seems... And the proof is that, after two days,&nbsp;no one gave any hint.</p>
<p>I&#39;ve tried the&nbsp;RFM12b Packet Generator and I cant see any information about it&#39;s packets on the emonhub log, it seems that it is not working...</p>
<p>With the other option, configuring the&nbsp;[[[tx]]] in the emonhub.conf I get the packets logged in emonhub.log, but I&#39;m not being able to receive anything in the arduino.</p>
<blockquote><p><strong>This code is in the setup()</strong></p>
<p>&nbsp;Serial.begin(BAUD_RATE);</p>
<p>&nbsp; rf12_initialize(5,RF12_433MHZ,210); // NodeID, Frequency, Group</p>
<p><strong>This code is in the loop()</strong></p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; if (rf12_recvDone() &amp;&amp; rf12_crc == 0 &amp;&amp; (rf12_hdr &amp; RF12_HDR_CTL) == 0)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int node_id = (rf12_hdr &amp; 0x1F);<br />
// &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (node_id == 5) // This line in commented in order to try to receive from any node id<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // The packet data is contained in rf12_data, the *(EmoncmsPayload*) part tells the compiler<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // what the format of the data is so that it can be copied correctly<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; emoncms = *(EmoncmsPayload*) rf12_data;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; emonPi.variable=emoncms.PermanentOn;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p>
</blockquote>
<p>Don&#39;t know what else to try, any ideas?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36683"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 04/12/2015 - 00:49.</div>
    <div class="content">
     <p>All packetgen does is set up a packet that can be retrieved via the packetgen&nbsp;api, there was a hack for the original emonhub to poll packetgen and pass the packet out via the rfm2pi but that pre-dates the [[[tx]]] sections in emonhub.conf and was a&nbsp;hardcoded hack.&nbsp;The experimental branch from which the &quot;emon-pi&quot; variant originated also had a packetgen interfacer which didn&#39;t get carried over.</p>
<p>The &quot;fetch&quot; feed api was added to emoncms for the purpose of using any feed value in emonhub via http, but the emon-pi variant has been focused on mqtt so you will probally need to look at the &quot;publish to mqtt&quot; process in emoncms and&nbsp;the mqtt interfacer in emonhub.</p>
<p>I know G&amp;T have succesfully&nbsp;switched on and off a desk lamp via emoncms -&gt;&nbsp;emonhub -&gt; rfm2pi but I cannot find any ref to that now.</p>
<p>each interfacer in emonhub&nbsp;uses an internal pub/sub bus to pass data and anything published to &quot;ToRFM12&quot; should get transmited</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36688"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8733.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8733.jpg" alt="CidiRome&#039;s picture" title="CidiRome&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/8733.html" title="View user profile.">CidiRome</a> on Fri, 04/12/2015 - 09:51.</div>
    <div class="content">
     <p>Hi.</p>
<p>I think that now my problem is about receiving the packet inside the firmware, look at this:</p>
<blockquote><p>2015-12-04 09:44:45,220 DEBUG &nbsp; &nbsp;MQTT &nbsp; &nbsp; &nbsp; Nodeid: 5 values: 199<br />
2015-12-04 09:44:45,222 DEBUG &nbsp; &nbsp;MQTT &nbsp; &nbsp; &nbsp; 8899 sent TX packet: 5,199,0,s<br />
2015-12-04 09:44:45,223 DEBUG &nbsp; &nbsp;MQTT &nbsp; &nbsp; &nbsp; 8899 Sent to channel&#39; : ToRFM12</p>
<p>&nbsp;</p>
</blockquote>
<p>This was accomplished with the [[[tx]]] form I referred earlier.<br />
Do you think that even with this lines appearing on the emonhub log the packets could&nbsp;not be passing through?</p>
<p>There seems to be a bug anyway, but it is not important now, if my [[[tx]]] variable has more than one char, one line for each char appears in the nodes section.</p>
<p>Cheers.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36689"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 04/12/2015 - 10:38.</div>
    <div class="content">
     <p>There seems to be several formatting errors there. The frame &nbsp;&quot;5,199,0,s&quot; is correct to &quot;broadcast&quot; 3 values of 5, 199 and 0. the value immediately&nbsp;before the trailing command letter (but not separated by a comma) is the node id, in this case it is omitted and therefore 0 which in JeeLib means broadcast using the transceivers&nbsp;own node&nbsp;id as a &quot;from&nbsp;id&quot; (the default base id is usually 15).</p>
<p>So all or any of&nbsp;your nodes should be able to receive the packet IF they are listening for node 15 or 31, node 31 is promiscuous mode and accepts any node id, like the rfm2pi&nbsp;firmwares do.&nbsp;</p>
<p>This is also assuming the frame is accurately logged and&nbsp; &quot;5,199,0,s&quot; is exactly&nbsp;what is passed to the rfm2pi. This part definitely worked as intended in the &quot;experimental&quot; branch&#39;s JeeInterfacer&nbsp;but I wasn&#39;t involved in the &quot;emon-pi&quot; variant so I&#39;m not that familiar with it&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36691"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8733.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8733.jpg" alt="CidiRome&#039;s picture" title="CidiRome&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/8733.html" title="View user profile.">CidiRome</a> on Fri, 04/12/2015 - 10:58.</div>
    <div class="content">
     <p>Hi.</p>
<p>About this transmission packet, it seemed ok to me because I did understood what was being transmitted, but it doesn&#39;t mean it is correct (as you said):</p>
<p>5 -&gt; node ID (at least is the node ID of EmonPI)<br />
199 -&gt; the low significant part of the integer being sent 199;<br />
0 -&gt; the high significant part of the integer being sent 199;<br />
s -&gt; this I thought&nbsp;was some control to signal the end of the packet.</p>
<p>I don&#39;t completely understand how this works, because there is no RF involved, the packet is transmited just through the serial connection into emonPi.</p>
<p>You say something about the listening node (15 or 31), but (while testing) as I comment the line that verifies the node&nbsp;&nbsp;i<em>f (node_id == 5)</em>, it should receive any node, shouldn&#39;t it?</p>
<p>Cheers.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36706"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 04/12/2015 - 15:21.</div>
    <div class="content">
     <p><span style="line-height: 20.8px;">Without looking closer I&#39;m not sure about commenting out the &quot;if&quot; line the way you have,&nbsp;</span><span style="line-height: 20.8px;">will the braced code still run without it? you could try removing the braces too or replacing the if with an absolute result eg if 1 == 1;</span></p>
<p>The JeeLib use of byte values to construct integers and long etc is necessary due to the &quot;rf packet&quot; format, if just communicating over serial with the emonpi&nbsp;you could indeed&nbsp;just use ascii&nbsp;strings for values rather than lsb and msb etc.</p>
<p><span style="line-height: 20.8px;">I will try and free up some time to look at this later if I can. I do not know exactly how things are implemented in&nbsp;</span>emon-pi<span style="line-height: 20.8px;">&nbsp;or&nbsp;</span>emonPi<span style="line-height: 20.8px;">.</span></p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36707"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8733.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8733.jpg" alt="CidiRome&#039;s picture" title="CidiRome&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/8733.html" title="View user profile.">CidiRome</a> on Fri, 04/12/2015 - 20:57.</div>
    <div class="content">
     <p>Hi.</p>
<p>I will later try what you say about the braces, but I don&#39;t see any reason for the code to be passed without being executed, at least it never happened to me in any language I used before. At least I would expect an error or a warning.</p>
<p><strong>Update:</strong></p>
<p>I&#39;ve tried the remove the braces and can confirm that, as I expected,&nbsp;it still don&#39;t work.</p>
<p>In fact I can confirm that this braces situation doesn&#39;t affect the code execution:&nbsp;I&#39;ve put a very important chunk of code inside braces and the system still work exactly as expected.</p>
<p>Cheers.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36728"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 04/12/2015 - 22:35.</div>
    <div class="content">
     <p>I wasn&#39;t sure about the braces but that was a side note anyways.</p>
<p>I have looked at the emon-pi&nbsp;JeeInterfacer and it has been changed significantly from the working &quot;experimental&quot; version. For example <a href="https://github.com/emonhub/emonhub/blob/experimental/src/emonhub_interfacer.py#L794">this line</a>&nbsp;has changed to <a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/src/interfacers/EmonHubJeeInterfacer.py#L251">this line</a>&nbsp;without the trailing node id before the command it no longer conforms to JeeLib, this isn&#39;t an issue if you are wanting something bespoke but for portability across devices and to reach other nodes than the attached one, it would be better if the standard lib was used.</p>
<p>When the correctly formatted command string is passed over serial to an rfm2pi it is handled by <a href="https://github.com/openenergymonitor/RFM2Pi/blob/master/firmware/RFM69CW_RF_Demo_ATmega328/RFM69CW_RF12_Demo_ATmega328/RFM69CW_RF12_Demo_ATmega328.ino#L363">this function</a>, more specifically when sending using the &quot;s&quot; command via<a href="https://github.com/openenergymonitor/RFM2Pi/blob/master/firmware/RFM69CW_RF_Demo_ATmega328/RFM69CW_RF12_Demo_ATmega328/RFM69CW_RF12_Demo_ATmega328.ino#L476"> this line</a>. The emonPi&nbsp;has a <a href="https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/emonPi_RF.ino#L70">similar set up</a>.&nbsp;</p>
<p>Since this code was written for transmitting to remote nodes rather than use in the attached device, (as it pre-dates even the rfm69pi&nbsp;and&nbsp;no IO was previously available on the rfm12pi) it will need to be caught before the RF&nbsp;transmission&nbsp;IF the base id node matches or it&#39;s a broadcast.&nbsp;</p>
<p>So ideally, <a href="https://github.com/openenergymonitor/RFM2Pi/blob/master/firmware/RFM69CW_RF_Demo_ATmega328/RFM69CW_RF12_Demo_ATmega328/RFM69CW_RF12_Demo_ATmega328.ino#L704-L717">this block</a>&nbsp;needs expanding to include the logic to determine if it should be used locally, transmitted via rfm or both. I think <a href="https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/emonPi_RF.ino#L55-L64">this is the equivilent</a>&nbsp;in emonPi.</p>
<p>Assuming you are using the [[[tx]]] section in [nodes] then the payload will need to match the typedef struct&nbsp;you&nbsp;set up to take the received frame at&nbsp;the emonpi.</p>
<p>A brief look at your example looks like it intends to use data received via rf rather than serial as the line starting &quot;&nbsp;if (rf12_recvDone()&nbsp;&quot; is handling the received rf payload rather than the serial stream.</p>
<p>What is your goal? will you replace the emonpi sketch with a bespoke sketch to handle your command or are you looking to retain the existing emonpi functions and add the command ability?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36733"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8733.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8733.jpg" alt="CidiRome&#039;s picture" title="CidiRome&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/8733.html" title="View user profile.">CidiRome</a> on Sat, 05/12/2015 - 00:22.</div>
    <div class="content">
     <p>Hi.</p>
<p>I&#39;m making a function to receive the data I want using<em>&nbsp;Serial.available()</em> and&nbsp;<em>Serial.read()</em></p>
<p>Now I only need to format the data back to it&#39;s format since it is received in ASCII.</p>
<p>Cheers.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36824"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8733.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8733.jpg" alt="CidiRome&#039;s picture" title="CidiRome&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Transmit variables from EmonCMS (Rasp or external) to EmonPi </h3>

    <div class="submitted">Submitted by <a href="../user/8733.html" title="View user profile.">CidiRome</a> on Tue, 08/12/2015 - 01:27.</div>
    <div class="content">
     <p>Hi.</p>
<p>I&#39;ve managed to get it to work, I can now send at least&nbsp;one* variable&nbsp;from the local EmonCMS to Emonhub and receive it inside the EmonPI firmware.<br />
I changed the&nbsp;handleInput function to my needs and it is working now.<br />
I believe that there are some&nbsp;bugs in the emonhub software because it crashes when I send values above 32767 (the max positive number), but it shouldn&#39;t crash, I think. Anyway it works well enough for my needs.</p>
<p>* there is some bug here, if there is only one variable with more than one character in the name, it will create one variable for each character.</p>
<p>Now the question:<br />
How do I update this variables from the remote EmonCMS&nbsp;(also in the local network) server that I use to make my logs and graphs?<br />
In other words: how do I create a feed/node/<strong><em>output</em></strong>&nbsp;that calls the address on emonhub&nbsp;.../nodes/5/tx/values to update it&#39;s value?</p>
<p>Edit: It seems that what I want is&nbsp;<em>Publish to MQTT,</em> I&#39;m now searching for the format of the <em>Type Text Here</em>&nbsp;related to&nbsp;<em>Publish to the specified MQTT topic</em></p>
<p>Cheers.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11716"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-3Du9Zo4ovx7KkUl8ezZsfGOXucq48PFyujdqyt1nmOc" value="form-3Du9Zo4ovx7KkUl8ezZsfGOXucq48PFyujdqyt1nmOc"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
