<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2585 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:21:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>RFM12 repeater - solved | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">RFM12 repeater - solved</h3>
        <span class="submitted">Submitted by <a href="../user/2128.html" title="View user profile.">jb79</a> on Sun, 14/07/2013 - 16:46</span>
        <div class="content"><p>I&#39;m thinking about installtion of a RFM12B Repeater because an EmonTX I&#39;d like to integrate is out of reach (located in the gardenhouse, receiver in the basement of my house</p>
<p>There are different ideas:</p>
<p>&nbsp;</p>
<p>1) Repeater with 2 modules (433Mhz receiver and 868MHz sender), using a 433MHz EmonTX.</p>
<p>2) Repeater with only one 868Mhz module and a 868Mhz EmonTx.</p>
<p>If the power of the 868Mhz and the 433Mhz modules are equal the 433Mhz should have a little advantage in the range because the free space loss should only be 25% of the free space loss from the 868Mhz module.</p>
<p>&nbsp;</p>
<p>For the second idea I&#39;ve allready found a link to a source here in the forum that relays data between to network groups.</p>
<p><a href="https://github.com/jcw/jeelib/blob/master/examples/RF12/groupRelay/groupRelay.ino" title="Relay script">https://github.com/jcw/jeelib/blob/master/examples/RF12/groupRelay/groupRelay.ino</a></p>
<p>What would you prefer to use?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3607.html" class="topic-previous" title="Go to previous forum topic">‹ I2C bus and EmonTX shield v2</a>
              <a href="2293.html" class="topic-next" title="Go to next forum topic">Upload to pvoutput.org - WILL PAY FOR CODE  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-13621"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12 repeater - solved</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 14/07/2013 - 20:48.</div>
    <div class="content">
     <p>Why not store-and-forward on the same frequency with the same module? Or is that your No.2 option? The emonTx will normally ignore other transmissions, and with bit of luck (else why do you need a repeater?) the receiver won&#39;t see the same message twice. The only problem I see is the measurement will arrive a few milliseconds late.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13627"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12 repeater - solved</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 15/07/2013 - 17:35.</div>
    <div class="content">
     <p>&gt; with bit of luck (else why do you need a repeater?) the receiver won&#39;t see the same message twice</p>
<p>You could change the Node ID before transmission, to be sure the same sample is not received twice. This requires a more intelligent repeater, perhaps.</p>
<p>Or add a timestamp to each sample.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13944"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2128.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jb79&#039;s picture" title="jb79&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12 repeater - solved</h3>

    <div class="submitted">Submitted by <a href="../user/2128.html" title="View user profile.">jb79</a> on Tue, 30/07/2013 - 16:24.</div>
    <div class="content">
     <p>Today is the day.</p>
<p>&nbsp;</p>
<p>Yesterday I first tried to send values from the EmonTX in the gardenhouse to my Raspberry - it doesn&#39;t work because my massive 30cm ferro-concrete basement of my house.</p>
<p>So I built up a small module with an ATMEGA 328, an RFM12 module for 868Mhz, and a voltage regulator. On this module I installed the groupRelay Script from my first post. In the script the serial interface is set to 57600baud, I changed it to 9600 like all the other deviced run on.</p>
<p>Then I changed the networkGroup and networkID of an unused EmonTX to another network group to test it.</p>
<p>I left the relay module connected to the PC for configuration and testing of the settings, it can be configurated via the serial monitor.</p>
<p>&nbsp;</p>
<p>There are two settings you can change on the relay: MULTI and ACK.</p>
<p>ACK can be switched on or off, both seems to work with the EmonTX/RaspberryPI scripts</p>
<p>MULTI has to be switched off (0), otherwise no values reach my Raspberry. The NodeID that is seen for the values is equal to the outgoing NodeID of the relay.</p>
<p>I think MULTI = 1 should present a Node transparent so if it has nodeID 4 in group X it should have 4 in group Y after passing the relay, but it doesn&#39;t work for me, I tried it with ACK=0 and 1, but none of this settings worked.</p>
<p>I also tried to relay two different EmonTX with different nodeIDs but I only got crap, together there should be 11 feeds but I only got 8 feeds out of the relay with the first three of them mixed (sometimes first, sometimes second EmonTX). I tried different settings for MULTI and ACK but I wasn&#39;t able to get both EmonTX working with the relay. Maybe the script isn&#39;t perfect, maybe I did something wrong.</p>
<p>&nbsp;</p>
<p>So for plug &amp; play:</p>
<ol>
<li>
		change serial speed to 9600baud in the groupRelay script</li>
<li>
		install the groupRelay script</li>
<li>
		switch off MULTI by typing 0m when connected via serial console</li>
<li>
		set the right&nbsp; frequency, nodeIDs and networkIDs for both incoming and outgoing packets also via serial console</li>
</ol>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17603"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3464.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3464.jpg" alt="Bra1n&#039;s picture" title="Bra1n&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12 repeater - solved</h3>

    <div class="submitted">Submitted by <a href="../user/3464.html" title="View user profile.">Bra1n</a> on Tue, 14/01/2014 - 16:47.</div>
    <div class="content">
     <p>I couldn&#39;t get the groupRelay Script to work with my Emoncms installation, the relay seemed to receive then send out but the RaspberryPi mounted RFM12B didn&#39;t seem to understand the packets and nothing was received. I ended up writing my own simple relaying code which works for me. It receives from one network group then retransmits to another maintaining the Node ID. Example code is here&nbsp;<a href="https://github.com/Bra1nK/HomeMonitor/blob/master/Arduino Code/RFM12B_Relay_Example.ino">https://github.com/Bra1nK/HomeMonitor/blob/master/Arduino%20Code/RFM12B_Relay_Example.ino</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17610"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2128.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jb79&#039;s picture" title="jb79&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12 repeater - solved</h3>

    <div class="submitted">Submitted by <a href="../user/2128.html" title="View user profile.">jb79</a> on Tue, 14/01/2014 - 21:46.</div>
    <div class="content">
     <p>Hello Brian,</p>
<p>is your script able to relay more than one node? I mean for example to relay/translate Node 7&nbsp; &amp; 8 from group 211 to Node 7 &amp; 8 in group 210?</p>
<p>I didn&#39;t get the groupRelay Script to do this, when I tried I only get waste data.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17701"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3464.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3464.jpg" alt="Bra1n&#039;s picture" title="Bra1n&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12 repeater - solved</h3>

    <div class="submitted">Submitted by <a href="../user/3464.html" title="View user profile.">Bra1n</a> on Fri, 17/01/2014 - 17:14.</div>
    <div class="content">
     <p>It should do however I&#39;ve just realised that there&#39;s a problem with my script in that it only retransmits one item of data so I need to revisit it, I should have tested more comprehensively !</p>
<p>I&#39;ve currently got a bigger problem to solve first though as my RFM12Pi will now only receive from nodes a few feet away (this followed a crash/lockup on the Pi) :(</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17747"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3464.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3464.jpg" alt="Bra1n&#039;s picture" title="Bra1n&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12 repeater - solved</h3>

    <div class="submitted">Submitted by <a href="../user/3464.html" title="View user profile.">Bra1n</a> on Sun, 19/01/2014 - 18:24.</div>
    <div class="content">
     <p>OK having resolved my other&nbsp;RFM12Pi issue I&#39;ve refactored the repeater code and tested it with 2 nodes transmitting data every 10 seconds. Seems to be working perfectly and and maintains the node id&#39;s as designed. The new code can be found here&nbsp;<a href="https://github.com/Bra1nK/HomeMonitor/tree/master/RFM12B_Relay_Example">https://github.com/Bra1nK/HomeMonitor/tree/master/RFM12B_Relay_Example</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2585"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Z8cCUWWIFo2-YsZUWhFv7Ssqa3bzewBMCAF815-37uA" value="form-Z8cCUWWIFo2-YsZUWhFv7Ssqa3bzewBMCAF815-37uA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
