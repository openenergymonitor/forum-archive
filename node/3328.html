<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3328 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:28:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Calibration - ideal power voltage adapter | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Calibration - ideal power voltage adapter</h3>
        <span class="submitted">Submitted by Guest on Thu, 12/12/2013 - 22:54</span>
        <div class="content"><p>I made a emontx v2.2 based on a meduino nano i had laying around, based on the solderpad drawing.&nbsp;This meduino nano&nbsp;is a arduino nano clone you can set on 3.3V of 5V - mine is set to 3.3V to be safe when connecting it via i2c to my raspberry Pi.</p>
<p>I use the 3Phase firmware found here on the forum. In this firmware one has to enter the calibration coefficients.</p>
<p>I bought a ideal power (euro plug) via the shop here. On the calibration page it says that Vcal is 228.268.</p>
<p>But when using this&nbsp; factor, i get measurements of 199 a 200V instead of +-240V.</p>
<p>Should i change these co&euml;fficients or is something else wrong?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3326.html" class="topic-previous" title="Go to previous forum topic">‹ 40% packet loss from emonGLCDs</a>
              <a href="3321.html" class="topic-next" title="Go to next forum topic">Oregon probe support ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-16731"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calibration - ideal power voltage adapter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 13/12/2013 - 00:16.</div>
    <div class="content">
     <p>With the voltage wrong by that amount, there may well be a problem somewhere.</p>
<p>Check these things:</p>
<p>1. The d.c. voltage at the input to the ADC. That should be V<sub>CC</sub> / 2.<br />
	2. The voltage from the adapter. That should be about 11 V - 11.5 V with an input of 240 V.<br />
	3. The alternating voltage at the input to the ADC. This is best measured across the 10 k&Omega; resistor that forms the bottom half of the potential divider. That should be one eleventh of the adapter voltage.<br />
	4. The voltage of the internal reference. To do this you need to load a test sketch. The Building Blocks &quot;Calibration&quot; article has all the information you need.<br />
	5. The accuracy of your meter on the ranges you used.</p>
<p>This should show you where the error has arisen.</p>
<p>There are several articles in Building Blocks about calibration and measurement errors. These should help you to calculate the correct calibration coefficient if the components you used are not the correct values, but if you are sure there is no fault, then by all means change the calibration coefficient to give you the correct reading.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16734"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="promy&#039;s picture" title="promy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Calibration - ideal power voltage adapter</h3>

    <div class="submitted">Submitted by promy (not verified) on Fri, 13/12/2013 - 10:03.</div>
    <div class="content">
     <p>I checked those things and i also found a bad connection on my pcb :-s</p>
<p>I get these measuremenst:</p>
<p>1: DC: 2.26V&nbsp;<br />
	2: voltage adapter: 11.1V with mains power at this moment 223V<br />
	3: AC voltage over 10kOhm: 1V (seems ok, this is +- 1/11th of 11.1V)</p>
<p>for nr 4: the &quot;5V&quot; is actually 4.57V (getting power from usb from the Pi)&nbsp; / the &quot;3.3V&quot;&nbsp;measures 3.32V. Arduino says that VCC is 3.21V<br />
	&nbsp;</p>
<p>With this i get get voltage reading in the range 206-209V (mains 223V - the 238 from last night must have been a peek?)</p>
<p>What i am uncertain about is the VCC i used: now i connected everything (CTs and powersensor) to the &quot;5V&quot;. But now i notice on the solderpad that VCC= 3.3V. Did i connect it wrong? On my meduino i have the 2 voltages available: &quot;3.3V&quot; and &quot;5V&quot;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16744"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calibration - ideal power voltage adapter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 13/12/2013 - 15:04.</div>
    <div class="content">
     <p>I don&#39;t know the Meduino, so I can&#39;t comment about that.&nbsp; The 5V from the RPi is out of specification, so maybe you are drawing too much current from it? I don&#39;t know what you are allowed, but the data sheets should tell you.</p>
<p>You can run the Atmel 328P at any voltage up to (I think - check the data sheet) 6 V. We choose to run the emonTx at 3.3 V mainly because that simplifies the interface to the RFM12B radio module and makes battery operation from two 1.5 V cells easy.</p>
<p>It also looks as if you have got your inputs mixed up and you have not followed the emonTx circuit exactly. The d.c voltage at the ADC input should be 1.65 V if it is reporting that the supply is 3.3 V (approx - you say it says 3.21 but that is a calibration issue). If you wish, you can run calypso-rae&#39;s sketch RawSamplesTool_4ss_2 (<a href="1757.html" title="http://openenergymonitor.org/emon/node/1757">http://openenergymonitor.org/emon/node/1757</a>) which should draw the voltage waveform. If the waveforms are offset from the centre and the voltage clips on the positive peak, that is a sure indication that the input circuit is wrong.</p>
<p>I suggest you check the input circuit carefully and then go through the calibration procedure. The standard emonLib library methods measure the ADC voltage reference with respect to the internal band-gap reference, so the feed from the RPi being low should be corrected in the software.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16753"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="promy&#039;s picture" title="promy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Calibration - ideal power voltage adapter</h3>

    <div class="submitted">Submitted by promy (not verified) on Fri, 13/12/2013 - 17:18.</div>
    <div class="content">
     <p>Found the problem thanks to your help: i was running the atmega at 3.3V but was using the 5V(4.x V) for the sensors.</p>
<p>When i switched to 3.3V for the sensors, the voltage reading was spot on: less than 1V difference with my handheld multimeter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3328"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-_Cd6NypjauDk-nKw8wNy4tJgMnz-I_utCRw0sPIUk7A" value="form-_Cd6NypjauDk-nKw8wNy4tJgMnz-I_utCRw0sPIUk7A"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/3328 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:28:44 GMT -->
</html>
