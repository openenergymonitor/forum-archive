<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3370 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:10:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Raspberry Pi + EmonCMS ?? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Raspberry Pi + EmonCMS ??</h3>
        <span class="submitted">Submitted by Guest on Thu, 19/12/2013 - 20:15</span>
        <div class="content"><p>Hello&nbsp;</p>
<p>I want to use a Raspberry Pi with EmonCMS to monitor my electrical consumption.</p>
<p>I don&#39;t want to use an external HDD (like this tuto :&nbsp;http://emoncms.org/site/docs/raspberrypihdd)</p>
<p>Is it possible ?&nbsp;</p>
<p>And how to do this ?</p>
<p>Today, I have web server + MySQL on the Pi. I use teleinfo to extract datas of my electric meter.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="4895.html" class="topic-previous" title="Go to previous forum topic">‹ Commercial Meter in the US. Need help getting started</a>
              <a href="3950.html" class="topic-next" title="Go to next forum topic">No Inputs received ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-16902"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 19/12/2013 - 23:49.</div>
    <div class="content">
     <p>The read only gateway forwarder should do exactly what you want</p>
<p><span style="font-size: 12px;">http://emoncms.org/site/docs/</span>raspberrypigateway<span style="font-size: 12px;">&nbsp;</span></p>
<p>&nbsp;</p>
<p>These are pre built so card image available for download and we sell ready to go sd cards in the shop</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16908"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gloops100&#039;s picture" title="gloops100&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by gloops100 (not verified) on Fri, 20/12/2013 - 09:00.</div>
    <div class="content">
     <p>Thank you for your answer glyn :)</p>
<p>With this solution, is it possible to save datas&nbsp;in SQL table (SD card) and send this datas to EmonCMS ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16910"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 20/12/2013 - 12:18.</div>
    <div class="content">
     <p>No, the reason for this read-only file system on the SD card solution is that we found that logging data to the SD card 24/7 caused the card to fail after about 3 months hence the move to a HDD solution for users who want to log data locally. This blog post should explain&nbsp;<a href="http://openenergymonitor.blogspot.com/2013/12/setup-emoncms-on-raspberrypi-with-hard.html">http://openenergymonitor.blogspot.com/2013/12/setup-emoncms-on-raspberrypi-with-hard.html</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16919"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gloops100&#039;s picture" title="gloops100&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by gloops100 (not verified) on Fri, 20/12/2013 - 22:55.</div>
    <div class="content">
     <p>Ok, it&#39;s true.</p>
<p>So with your solution (OEMGateway), the datas are sent directly to EmonCMS and I can monitor my consumption with graph ? &nbsp;</p>
<p>But I don&#39;t know how EmonCMS&nbsp;works exactly. I don&#39;t find any tuto...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17004"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 24/12/2013 - 14:01.</div>
    <div class="content">
     <p>Go to the <a href="http://emoncms.org/">EmonCMS website</a>, click &quot;Guide&quot;. Then look under &quot;Using emoncms&quot;.</p>
<p>When you send your data to emonCMS (you must create an account, get your APIkey from Input Help and set that in your Raspberry PI to give it permission to write into the database) &quot;Inputs&quot; are created automatically. You can then process the data (say convert &deg;C to &deg;F, or Power to kWh) and send it to a &quot;Feed&quot;. A &quot;Feed&quot; is stored in the database and you can then draw a graph from that.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17271"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gloops100&#039;s picture" title="gloops100&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by gloops100 (not verified) on Sat, 04/01/2014 - 13:46.</div>
    <div class="content">
     <p>Thanks you, it&#39;s ok now, I can connect to EmonCMS with my Raspberry Pi.</p>
<p>How to send data automatically from my teleinfo&nbsp;(USB) to EmonCMS&nbsp;?</p>
<p>I use script to save data to my Database.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17423"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gloops100&#039;s picture" title="gloops100&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by gloops100 (not verified) on Thu, 09/01/2014 - 09:07.</div>
    <div class="content">
     <p>Is it possible to use emoncms.org url&nbsp;in my PHP script to send data ? &nbsp;(URL with datas + key)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17424"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Thu, 09/01/2014 - 09:35.</div>
    <div class="content">
     <p>Not sure I understand the question, but in emoncms.org, go to the &quot;inputs&quot; page and see &quot;API help&quot; link.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17450"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gloops100&#039;s picture" title="gloops100&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by gloops100 (not verified) on Thu, 09/01/2014 - 15:40.</div>
    <div class="content">
     <p>I&#39;ve a PHP script which save energy data from my electric meter to my SQL database. Now, I want to send these datas to emonCMS.org.</p>
<p>I have the link in &quot;API help&quot;, it works when I click on it.</p>
<p>But I want to use it in my PHP script.&nbsp;</p>
<p>Is it possible to do this ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17456"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Thu, 09/01/2014 - 16:20.</div>
    <div class="content">
     <p>The examples provided in the API help page should help you create appropriate http requests in your PHP script to send the data to emoncms.org.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17463"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gloops100&#039;s picture" title="gloops100&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by gloops100 (not verified) on Thu, 09/01/2014 - 20:34.</div>
    <div class="content">
     <p>Thank you for your answer jer&ocirc;me.</p>
<p>I can use this URL :&nbsp;http://emoncms.org/input/post.json?json={power:200}&amp;apikey=*****************************</p>
<p>But, how can I send many datas ? &nbsp;(like power, intensity,...)</p>
<p>It&#39;s necessary to use many URL for all datas&nbsp;or can I put all datas in one URL ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17465"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 09/01/2014 - 21:48.</div>
    <div class="content">
     <p>The API Help page shows JSON, CSV and bulk data formats. You might find that a search engine will help you to find more information about the first two.</p>
<p>You can easily type in your web browser a string that you think might work and test it, before writing it into your script.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17476"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gloops100&#039;s picture" title="gloops100&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by gloops100 (not verified) on Fri, 10/01/2014 - 07:12.</div>
    <div class="content">
     <p>Yes I know Robert, but I don&#39;t know how to put many variable in URL with JSON...</p>
<p>I look for it...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20401"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6107.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="asez73&#039;s picture" title="asez73&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + EmonCMS ??</h3>

    <div class="submitted">Submitted by <a href="../user/6107.html" title="View user profile.">asez73</a> on Fri, 04/04/2014 - 10:43.</div>
    <div class="content">
     <p>Form a bash script you could use curl this way, on a single line:</p>
<p><em>curl http://emoncms.org/input/post.json?time=1396607593.66&amp;node=0&amp;json={RaspberryPi:ADCO:0**********,OPTARIF:2,ISOUSC:45,HCHC:006611999,HCHP:009297403,PTEC:1,IINST:002,IMAX:045,PAPP:00390,HHPHC:3,MOTDETAT:000000}&amp;apikey=e1***************</em></p>
<p>where *** are specific to your data, api keys and so on.</p>
<p>Note that:</p>
<ol>
<li>
		<strong>?time=</strong> must be immediately after <strong>post.json?</strong> otherwise the timestamp won&#39;t be correctly treated</li>
<li>
		<strong>apikey=</strong> must end the request</li>
<li>
		a python script for getting the teleinfo data is <a href="http://skimpax.web4me.fr/wiki/doku.php/teleinfo:teleinfo_reader_csv">there </a></li>
<li>
		I have a modified version of this script able to send the data properly formatted, through urllib2 python&#39;s module. However it still requires some cleanup before publishing. More precisely, using request rather than urllib2 is a real need and the api keys and so on are hardcoded in it.</li>
<li>
		I use python to grab permanently those data from the teleinfo link and it works pretty much well. Power outage, unreachable ntp server and unreachable emoncms server are still to be solved. This happens regularly and really breaks the emoncms chronology and thus scramble all the computed feeds.</li>
<li>
		<strong>&amp;node=</strong> should be placed before the <strong>json=</strong> string, furthermore, the value must be lower than 32</li>
</ol>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3370"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-0x8Q1T0GjujGmgyuVo3HhwaJTZWp_XG9KdOqI8IUsVE" value="form-0x8Q1T0GjujGmgyuVo3HhwaJTZWp_XG9KdOqI8IUsVE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
