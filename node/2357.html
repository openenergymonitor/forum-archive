<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2357 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:02:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Where to start for a new house | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Where to start for a new house</h3>
        <span class="submitted">Submitted by <a href="../user/3713.html" title="View user profile.">lunarok</a> on Thu, 09/05/2013 - 09:48</span>
        <div class="content"><p>Hi,</p>
<p>&nbsp;</p>
<p>This is my first post here, I discover the project thanks to jihele article on linuxfr.</p>
<p>First of all, sorry for my english, I&#39;m french :)</p>
<p>This looks like a great project and something that I want for our house project. We are waiting some land in the city we want to build an house. This is planned for 2014 (lands are published beginning of year, building will follow just after)</p>
<p>So I have read some of the wiki and articles (not all, there is so much :D) and forums posts, but I want to share and asks some points here. If the answer is somewhere, please forgive me to have not look well or not finding it, just give me a link or some clues it&#39;s already a lot.</p>
<p>&nbsp;</p>
<p>So here are my questions :</p>
<p>&nbsp;</p>
<p>1- Is it possible (now or in future plans) to use ethernet and not RF communications ? (as we are going for building the house, will have RJ45 everywhere, and if possible to avoid radio communications I prefer like many people I think) (I see on the wiki there is a list ethernet but no link, here&nbsp;http://openenergymonitor.org/emon/buildingblocks in Networking) I know Arduino&nbsp;can connect by ethernet and for exemple Bretagne Telecom gives clues for ethernet module reading french electric provider (<a href="http://departements.telecom-bretagne.eu/rsm/logiciels/smartb/particuliers/" title="http://departements.telecom-bretagne.eu/rsm/logiciels/smartb/particuliers/">http://departements.telecom-bretagne.eu/rsm/logiciels/smartb/particuliers/</a>) Also ethernet&nbsp;module for Arduino&nbsp;have an option for PoE, making it perfect to not use any additional cable or battery for power)</p>
<p>2- I read a post about sending data with python script to oemcms. Doesn&#39;t seems to much complicate to what I read (I&#39;m not really software engineer, mor system so my level in scripting is not good) So it&#39;s not complicate to use sensors we already have ? (plan is to get a raspberry in each room already using them for multiroom&nbsp;audio streaming, network webcam and must be also for touchscreen&nbsp;for access domtique software and maybe other usages, one of them is temperature sensor, for this I have ordered DHT22 so will be perfect if can send the data to oem)</p>
<p>3- Is it complicate to use oem for reading its data ? As a good way, I prefer to use twice a data than pulling twice the information. In an home automation, temperature for exemple&nbsp;is usefull in scenarii, or light exposition. So if oem already have the informations, better using them in the home automation software than pulling them from sensor in home automation software.</p>
<p>4-Is there already some work done for interfacing oem with domotique software ? For now I still not sure which one to choose. Have a shortlist of domogik and freedomotic (second one look more active) The sure thing is I will use IPX800&nbsp;modules for heart of automation.</p>
<p>&nbsp;</p>
<p>If you have any usefull&nbsp;advices or reading in addition, if you have read all until here you must have a good idea of my project :)</p>
<p>&nbsp;</p>
<p>Thanks</p>
<p>&nbsp;</p>
<p>C&eacute;dric</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2377.html" class="topic-previous" title="Go to previous forum topic">‹ False Measuring</a>
              <a href="2371.html" class="topic-next" title="Go to next forum topic">Quick electronics advice needed. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-11980"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 09/05/2013 - 13:52.</div>
    <div class="content">
     <p>Hello Cedric</p>
<p>Good to hear your interest in building a system and your plans for the house, it sounds like a big project!&nbsp;</p>
<p>All main configurations that we&#39;ve been using end up as ethernet&nbsp;at some point whether its the raspberrypi that connects to LAN via ethernet or the NanodeRF which is an ethernet enabled arduino. If you dont want RF at all (RF would probably be cheaper than having an ethernet basestation for sensors in each room) then the nanode without the rf chip with an emontx shield might be your best bet</p>
<p><a href="../emonBase/NanodeRF.html" title="http://openenergymonitor.org/emon/emonBase/NanodeRF">http://openenergymonitor.org/emon/emonBase/NanodeRF</a></p>
<p><a href="../emontxshield.html" title="http://openenergymonitor.org/emon/emontxshield">http://openenergymonitor.org/emon/emontxshield</a></p>
<p>For your second and third question, Emoncms should do what you want and it has a good API which you could use to get the data out of it. I would experiment with it first to get a feel for how the system fits together, start by getting one sensor logging to emoncms and build up from there.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11981"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 09/05/2013 - 15:31.</div>
    <div class="content">
     <p>Hi Cedric,</p>
<p>I am new to the forum too, but have been reading it for some time (just received my first order consisting of a couple emontx, a raspberry and a bunch of sensors) so I&#39;ll try and give a shot at your questions but don&#39;t feel too comfortable with the answers :)</p>
<p>1 - On the transmitter side I think it should definitely be possible using emontx shields and an ethernet/poe capable arduino, you would have to modify the emontx firmware to transmit the data through an ethernet connection instead of an rf one directly to your emoncms (or other data aggregator) instance</p>
<p>2 - Yes, as long as you are able to get the data from the sensor in the raspberry in some way (usb/serial/rfreceiver) then it should be trivial to add that feed to emoncms (especially if you already practiced with the emontx modifications to send data to emoncms over TCP/IP)</p>
<p>3 - If by oem you mean emoncms, then reading data directky from it is one mysql client connection/http query away (or pushing data from it is one emoncms plugin away) , but since in your scenario you would need to write your own feed generators I think it would be simpler having the transmitters feed both emoncms and the home automation system than having to write a bridge between emoncms and the home automation system (be it a custom external program or an emoncms plugin).</p>
<p>On a second thought since on the raspberry you can use whatever language you are comfortable with (and possibly some already written libs) while on the arduino&nbsp;you would be pretty much on your own, maybe a better approach would be to write a small proxy that runs on the raspberry and that feeds whatever data to whatever collector (emoncms/home automation system) whenever it is received from the emontx sensors</p>
<p>4 - Don&#39;t know :) you should probably be better off reseearching&nbsp;the possibility to interface your raspberrys to the home automation system, and from there decide how to handle the data exchange</p>
<p>&nbsp;</p>
<p>Regards</p>
<p>Mattia</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11983"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3713.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="lunarok&#039;s picture" title="lunarok&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3713.html" title="View user profile.">lunarok</a> on Thu, 09/05/2013 - 19:53.</div>
    <div class="content">
     <p>Hi Trystan,</p>
<p>&nbsp;</p>
<p>For what I think, I don&#39;t need ethernet basestation for sensors. As I I have one Raspberry in every room, I want to use DHT22 sensors (they do temperature and humidity) directly connected by I2C to each Raspberry. And also the IPX800 can have additionnal sensors (temperature, humidity and light) So there is maybe only light sensors I&#39;m missing for additional rooms (but a way to do it via raspberry will be nice)</p>
<p>&nbsp;</p>
<p>So I want at least the emontx for power usage. But they can be all at same place (in fuse box) right ? So, if all power use can be monitor from here, network switch will be there, direct connexion possible.</p>
<p>So yes I will look at your 2 links to see how get a ethernet shield on emontx. There is also this article (in french, but maybe you understand it ;) ) :</p>
<p><a href="http://departements.telecom-bretagne.eu/rsm/logiciels/smartb/particuliers/" title="http://departements.telecom-bretagne.eu/rsm/logiciels/smartb/particuliers/">http://departements.telecom-bretagne.eu/rsm/logiciels/smartb/particuliers/</a></p>
<p>The emonmeter is able to send data directly to emoncms, maybe it&#39;s possible to use part of their work to get the emontx send by network directly to emoncms ?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11984"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3713.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="lunarok&#039;s picture" title="lunarok&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3713.html" title="View user profile.">lunarok</a> on Thu, 09/05/2013 - 20:04.</div>
    <div class="content">
     <p>Hi Matt,</p>
<p>&nbsp;</p>
<p>1- Yes I will look at links given before and the link from Bretagne Telecom that is using an arduino to monitor french power fuse box to send directly by ethernet connexion&nbsp;to emoncms.</p>
<p>2- In my case, I think my primary use of Raspberry it&#39;s not as a emonbase but more as a emontx (with sensor only) My emoncms&nbsp;will be on a server (where I already have all my other web products like UPNP, streaming ....)</p>
<p>3-Feeding both can be done yes, but it&#39;s better&nbsp;feeding only one and sharing the feed :) But if it&#39;s I will do with it. My server where will be the emoncms is also the one will have the automation suite. So sharing in this case is not a network thing, the data transit only once.</p>
<p>I have better feeling with Raspberry like you said I can use the language I want. But will be used only for sensors. For all arduino related stuff (emontx for power use and other pule use, and maybe emonmeter&nbsp;or some arduino reading telemeter for power usage) And arduino is new for me, I have wanted to get involved long time before but never get a good reason, now I have :D But as it&#39;s new, modifying firmware will be easy ?</p>
<p>4- Yes I look also what home automation suite can be the best on my side :) Need to have one with a url plugin maybe to read data by API or I don&#39;t know</p>
<p>&nbsp;</p>
<p>Thanks</p>
<p>&nbsp;</p>
<p>C&eacute;dric</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11985"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3713.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="lunarok&#039;s picture" title="lunarok&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3713.html" title="View user profile.">lunarok</a> on Thu, 09/05/2013 - 20:25.</div>
    <div class="content">
     <p>Just want to add some things.</p>
<p>I have install emoncms (just fresh) on my server, was quick :) Like these I have the API doc under my noise.</p>
<p>I will try make input from DHT22 as soon I receive my sensor (so from one Raspberry first, as soon it&#39;s successfull I order 3 more for 2 raspberry and one Cubieboard) For these sensors, before knowing about emon, I already planned it (order DHT22 3 weeks ago) and was excpecting&nbsp;to use my Zabbix for follow up first.</p>
<p>&nbsp;</p>
<p>And important : if I want to try get a emontx&nbsp;using ethernet, I order an emontx&nbsp;from openenergymonitor and what else ? (as I say, newbie for arduino)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11986"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 09/05/2013 - 21:14.</div>
    <div class="content">
     <p>C&eacute;dric,</p>
<p>it depends</p>
<p>if you feel more comfortable with a full arduino solution (as suggested from Trystan) then you will need a nanoderf and an emontx shield to plug directly into the nanoderf, then you will need to modify (or find one that suits your needs) the nanoderf firmware to be able to directly send the data from the sensors through tcp/ip instead of wireless</p>
<p>if you don&#39;t then you could refer to this forum post:</p>
<p><a href="2327.html" title="http://openenergymonitor.org/emon/node/2327">http://openenergymonitor.org/emon/node/2327</a></p>
<p>in which there is a brief explanation of how to connect the emontx (or multiple stacked emontx modules) to a raspberry through the serial interface, in this case the arduino firmware should already be available, and you would have to write the code on the raspberry to receive the data and store it in emoncms</p>
<p>In order to be able to start working with an emontx&nbsp;or a nanoderf what you need are a 5v power supply and a miniUSB&nbsp;cable, an&nbsp;FTDI cable to be able to program the nanoderf/emontx &nbsp;firmware, an AC/AC voltage adapter if you plan on measuring voltage accurately and as many ct/temperature sensors as you need .. anyway, the store is really well organized and you have all this information in the page detail (what is included, what is not and is needed, and what needs soldering) while you can find all the links to the relevant firmwares&nbsp;in the site under the various modules pages</p>
<p>&nbsp;</p>
<p>I believe there&#39;s also a short explanation of how to work with the arduino IDE and how to load firmwares in general, but I haven&#39;t tried that yet and can&#39;t really point you to it at the moment</p>
<p>From what I have seen of the arduino&nbsp;firmwares so far, if you are moderately competent with writing software and with the technologies involved (serial communications/tcp&nbsp;communications and so on) then you won&#39;t have any problem modifying the firmwares to suit you needs. If your experience with writing software (not using software written by someone else, but really writing it to suit your needs) is poor, then I&#39;d suggest to stick with standard solutions at the cost of using the wireless modules, in order not to put too much stuff on the plate and not to risk buying a lot of stuff that you won&#39;t be able to put together as you like.</p>
<p>&nbsp;</p>
<p>Personally, I do have cat6 cables running around the house, and a lot of experience in writing software, and I chose anyway to use standard emontx modules and using the wireless transmission to a raspberry. This way I can put one wherever I need it (one near the fuse box, one in the garage near a couple of pumps) without having to bother to run lan cables to them but only providing power (and if I really wanted I could use batteries and not worry about the power either).</p>
<p>Also, with the raspberry RFM12Pi&nbsp;board I&#39;ll be able to directly interface some weather sensors that use the same frequency (if not the same protocol) and store in emoncms also weather data without having to add other hardware. You already have the raspberrys, so all you would need is a single&nbsp;RFM12Pi module and you would be up and running.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11992"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3713.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="lunarok&#039;s picture" title="lunarok&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3713.html" title="View user profile.">lunarok</a> on Fri, 10/05/2013 - 08:17.</div>
    <div class="content">
     <p>Hi Matt,</p>
<p>&nbsp;</p>
<p>Thanks for this link about serial connexion&nbsp;between Raspberry and EmonTX. That&#39;s a good way and I think the one I will like. Yesterday, I come to think that getting EmonTX with ethernet&nbsp;make me scared, as there is a more work to modify and they will send datas each. A way with a base is better so I get only the emonbase to send data (so easier for management) And same maybe this base getting data from DHT22 in first step and not them sending.</p>
<p>As the link speak of serial connexion, do you think it&#39;s possible to do it with a normal computer ? (in fuse box, it will be more the NAS/home server than a simple raspberry for me)</p>
<p>For exemple, I get the same mind about emonMeter (link I send before). As in the fuse box I can have already Raspberry and other emonTX, having an arduino connected directly to network for telemeter ... Don&#39;t know if it&#39;s good.</p>
<p>&nbsp;</p>
<p>And yes, I keep RF as a way. But more for outside of house (less wireless in home) as you say maybe for water (don&#39;t know where it will be) and also weather stations like Oregon use this technology (and for outside sensors they are cheaper way than building an arduino outdoor station like&nbsp;http://arduinoweather.sourceforge.net/)</p>
<p>&nbsp;</p>
<p>Ok, I see in the shop RFM12Pi&nbsp;it&#39;s about 20 euros, worst it for a first step with emontx and see after what can evolve.</p>
<p>I see also AirQuality Egg shield. 75 including CO&sup2; measure look cheap and it&#39;s interesting. But it&#39;s speaking of connect it to a NanodeRF, that I don&#39;t need if using RFM12Pi&nbsp;on a RPi, so is it working with the Pi as emonbase&nbsp;too ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11993"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Fri, 10/05/2013 - 09:46.</div>
    <div class="content">
     <p>Hi,</p>
<blockquote><p>As the link speak of serial connexion, do you think it&#39;s possible to do it with a normal computer ? (in fuse box, it will be more the NAS/home server than a simple raspberry for me)</p>
</blockquote>
<p>I imagine so, the added value of using the pi is taht you already have the code for the serial communications and the hardware connections ready and working</p>
<blockquote><p>I see also AirQuality Egg shield. 75 including CO&sup2; measure look cheap and it&#39;s interesting. But it&#39;s speaking of connect it to a NanodeRF, that I don&#39;t need if using RFM12Pi on a RPi, so is it working with the Pi as emonbase too ?</p>
</blockquote>
<p>It is a shield, so it must be connected to an arduino&nbsp;(the nanoderf is an arduino platform with added stuff)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11996"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Fri, 10/05/2013 - 12:20.</div>
    <div class="content">
     <p>Salut C&eacute;dric.</p>
<p>Welcome to OEM. Nice to see you here. (I&#39;m the one that wrote the article on linuxfr.org)</p>
<p>Long posts. I went through that quickly.</p>
<p>1/ From OEM point of view, one raspi in each room is overkill. But if you have them for a good reason, why not. If you&#39;re buying a few, you may want to have a look at <a href="https://www.olimex.com/Products/OLinuXino/">Olinuxino</a> instead.</p>
<p>Yes, it is possible to merge emonTX and emonBase so that the TX sends data over ethernet. This is how I started with an Arduino and a emonTX shield.</p>
<p>2/ I maintain the python gateway script. There is a post <a href="2254.html">here</a> from someone else wanting to do something similar : using a sensor directly from the Pi, no TX involved. The gateway script can be adapted to do that. Either by adding the code that manages the sensor, or, to make it generic, by running a code to manage the sensor, then store the data in a file, then let the script monitor the file. I like the second way better because it means you can keep on pulling new versions of the gateway script without merge issues, and it makes it generic : any sensor can use it. See that other thread for details.</p>
<p>I haven&#39;t done any move in that direction in the script, but honestly, it shouldn&#39;t be difficult. The only issue bothering me was about the ability to name the inputs (you may want to name each sensor with the name of the room). This wouldn&#39;t be easy with the current API, but the API may evolve and anyway, it is not necessary, just a convenience.</p>
<p>3/ I think you can access any value through the API, without even using the database directly. If I&#39;m wrong, then it is a good feature request for the API.</p>
<p>4/ As I wrote in the article, I don&#39;t think much work was done regarding automation. It is a wide (and wild) area. But I&#39;m sure people here will be interested.</p>
<p>Good luck. Enjoy the WE.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12041"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3713.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="lunarok&#039;s picture" title="lunarok&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3713.html" title="View user profile.">lunarok</a> on Sat, 11/05/2013 - 17:06.</div>
    <div class="content">
     <p>Thank you J&eacute;r&ocirc;me for your answer (and your article in the first place)</p>
<p>1/ Yes, I completly&nbsp;agree one RPi in every room is overkill for OEM. But like I say, I will have them for home automation purpose so, as they are here if they can also get some sensors, it&#39;s pure bonus.</p>
<p>Thank you for Olinuxino, I didn&#39;t know these products. Will try them for sure (the fact they have also touchscreen in 4 and 7&quot; avalaible&nbsp;is very interesting, as I was thinking of using RPi&nbsp;for automation monitors as well)</p>
<p>2/ Yes the second way looks less intrusive, so better for me too. So on the RPi used as the gateway, get all additionnal value in a file as you described look nice. Like this can have something generic for ouput and multiple input (I mean call X RPi/olinuxino/Cubie ... for their sensors and also the IPX800&nbsp;for sensors)</p>
<p>Maybe you can bring me light on the gateway : do I need to have my emoncms on the RPi getting the gateway ? The article here :</p>
<p><a href="http://emoncms.org/site/docs/raspberrypibuild" title="http://emoncms.org/site/docs/raspberrypibuild">http://emoncms.org/site/docs/raspberrypibuild</a></p>
<p>It&#39;s not clear if I can avoid emoncms on RPi and just install the python gateway, and in this case I think I need to add the RPi module for emoncms to my emoncms instance on server right ?</p>
<p>3/ I have install emoncms on my server, the API doc let me think that yes every value is exposed so no need to do SQL request, just using the API.</p>
<p><a href="https://myserver/emoncms/feed/value.json?id=0" title="https://myserver/emoncms/feed/value.json?id=0">https://myserver/emoncms/feed/value.json?id=0</a></p>
<p>4/ I have ask on domogik mailing if look possible for a plugin in this way, first return is that seems easy if API can give a list of feed and after value of a selected feed (and the API can)</p>
<p>Ask same for freedomotic&nbsp;and waiting answer. For me a couple OEM+automation software can be great. OEM for what I see is already a great tool for energy and sensors, so let it take care of all this and a good automation software must be able to handle any feeds or action, maybe how quickly and easy integration of OEM will be in domogik or freedomotic can be my answer to which one to choose :)</p>
<p>&nbsp;</p>
<p>In these few days I start to read and see what is possible with OEM, I&#39;m just amazed how it seems easy and well thinked in architecture. Congrats for this.</p>
<p>Is it possible to use wiki maybe for exemple to share what people are doing with OEM ? Or any other ways ? Can be great to see what people have done with it, what they have connected ... And in case like me for starters, can be a good way to let expain and maybe add a picture for sharing what expected and have ideas from people with knowledge ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12128"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Tue, 14/05/2013 - 17:53.</div>
    <div class="content">
     <p>Hi.</p>
<p>2/ I&#39;m questioning the pertinence of using a buffer file as it means regular write accesses on the SD card, which wears off the cards with time.</p>
<p>Indeed the gateway script needs an emoncms instance to host the RPi module that sets the radio parameters. This is for historical reasons, but it makes sense to change that.</p>
<p>For those matters, see discussion here:</p>
<p><a href="https://github.com/emoncms/raspberrypi/issues/30" title="https://github.com/emoncms/raspberrypi/issues/30">https://github.com/emoncms/raspberrypi/issues/30</a></p>
<p>The wearing off issue is discussed here:</p>
<p><a href="2292.html" title="http://openenergymonitor.org/emon/node/2292">http://openenergymonitor.org/emon/node/2292</a></p>
<p><a href="2312.html" title="http://openenergymonitor.org/emon/node/2312">http://openenergymonitor.org/emon/node/2312</a></p>
<p>4/ I think I heard of Domogik once on lunuxfr.org but then forgot about it. I hate to recreate the wheel, and it would make sense to interface Domogik or any equivalent to OEM instead.</p>
<p>I didn&#39;t take the time to dive onto it (yet) but from what I know, home automation becomes complicated when it comes to interfacing with proprietary stuff. Domogik uses xPL. I have no idea how widespread this protocol is.</p>
<blockquote><p>Is it possible to use wiki maybe for exemple to share what people are doing with OEM ? Or any other ways ? Can be great to see what people have done with it, what they have connected</p>
</blockquote>
<p>As you saw, I do that on my profile page, but most people don&#39;t. I use that profile page as a draft, a way of sharing info, and a personal memo.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12136"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3713.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="lunarok&#039;s picture" title="lunarok&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Where to start for a new house</h3>

    <div class="submitted">Submitted by <a href="../user/3713.html" title="View user profile.">lunarok</a> on Tue, 14/05/2013 - 21:25.</div>
    <div class="content">
     <p>Hi J&eacute;r&ocirc;me.</p>
<p>&nbsp;</p>
<p>2/ Yes, readly quickly your gateway, I think reading in a flat file is not worthing value. If the gateway must receive a new way to get data, it must be by listening on an IP. I&#39;m not pythonist, but it&#39;s common in first exemples of python coding to show this is simple (to make easy publicity :D)</p>
<p>I have comment the github&nbsp;link.</p>
<p>I think the gateway as a standalone service is a good way for future. You have already init script, the main script so give it a setting files where we can set the emoncms(s) to send data and where to listen for datas incoming.</p>
<p>Like this maybe :</p>
<p>[emoncms]</p>
<p>serverip=xxx.xxx.xxx.xxx</p>
<p>apikey=*****</p>
<p>&nbsp;</p>
<p>[emoncms]</p>
<p>serverip=xxx.xxx.xxx.xxx</p>
<p>apikey=*****</p>
<p>&nbsp;</p>
<p>[ethernet]</p>
<p>listenip=xxx.xxx.xxx.xxx</p>
<p>&nbsp;</p>
<p>[radio]</p>
<p>...</p>
<p>&nbsp;</p>
<p>Like this, in future including the radio access maybe can work on other hardware that RPi</p>
<p>&nbsp;</p>
<p>4/ Domogik&nbsp;is using xPL as a main bus. Plugins are a way to take data from other sources and send them in the xPL bus (more or less) This makes it also perfect with the xPLduino project to come (teams are working together)</p>
<p>The main dev has answer me, for him reading json is easy in python. There is already some plugin started for XBMC&nbsp;(XBMC&nbsp;use also an API with JSON&nbsp;files) They are willing to help, so as soon I have a emoncms &quot;working&quot; I will try with their help to start a plugin. (I have order RPi&nbsp;RF module and emontx with pusle sensor and current sensor today, already send. And already receive DHT22 for my Pi, waiting the other sensors)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2357"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-HHdAlAoTP5lndZxGypQZ8WYkynlJsczY564XZNw5Ris" value="form-HHdAlAoTP5lndZxGypQZ8WYkynlJsczY564XZNw5Ris"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
