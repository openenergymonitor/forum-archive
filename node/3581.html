<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3581 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:02:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>What about our Inverters ? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">What about our Inverters ?</h3>
        <span class="submitted">Submitted by Guest on Thu, 09/01/2014 - 11:14</span>
        <div class="content"><p>&nbsp;&nbsp;&nbsp; I have had a (PIC based) PV-to-Immersion-Heater system running for nearly a year now, and have experimented with different algorithms for efficiency.&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Basically my current system reads the Grid cable power over one cycle (120 samples) calculates the PV surplus and fires the Triac as appropriate over the next 15 cycles (i.e. 30 Half-Cycles at 100W each) , giving a maximum of 3 kW with full sun.&nbsp; This works fine and, in summer, gives us several days worth of hot water (we have 2 Hot Tanks, with 2 Triacs) with no Grid power usage.</p>
<p>&nbsp;&nbsp;&nbsp; This system gives a flicker rate of about 3 Hz (17 cycles = 340 mS) which is noticable in our two windowless shower-rooms (less heat loss in winter).&nbsp;&nbsp;&nbsp; While not bothered unduly (we are 300 m from our nearest neighbour - who has no &quot;dark rooms&quot;)&nbsp; I have tried the odd strategy to reduce the flicker effect while still retaining maximum efficiency, particularly at low (winter) sun levels.</p>
<p>&nbsp;&nbsp;&nbsp; My latest strategy was to space out the Triac firing evenly over the 30 power Half-Cycles, thus 500 W spare power&nbsp; would trigger the Triac at the Following Half-cycles : 1,6,12,18,24 say, of the 30.</p>
<p>&nbsp;&nbsp; Using a 32 MHz PIC, Table look-up etc for this method was absolutely no problem and it did dramatically reduce the perceived flicker - however ...</p>
<p>&nbsp;&nbsp; It caused the Inverter (Sunny Boy SB3800) eventually to drop out (displaying &quot;Mains Disturbance&quot;) and it took some minutes to come back on line.&nbsp;&nbsp; Looking at the mains voltage on a scope it was somewhat spiky and distorted, even with the zero-cross switching, while the equivalent effect with a same power but continuous block of Triac switching is remarkably clean.</p>
<p>&nbsp;&nbsp; This made me think - are there any long-term effects on our Inverters with the varying voltages we are imposing on them with these systems (including the Commercial systems) ? - Has anyone any comments ?&nbsp;&nbsp; My Sunny Boy always hums &amp; groans on a sunny day, and I can detect a 3 Hz pattern when the Immersion system is working.</p>
<p>&nbsp;&nbsp;&nbsp; Could we reduce the effects with some (large !) capacitors near the Triac or Immersion Heater ?&nbsp; Generally I believe mains &amp; large caps are not too good an idea.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3583.html" class="topic-previous" title="Go to previous forum topic">‹ RFM12 causing interference to other equipments</a>
              <a href="3391.html" class="topic-next" title="Go to next forum topic">Forum SPAM blocker malfunction? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-17434"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What about our Inverters ?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Thu, 09/01/2014 - 11:44.</div>
    <div class="content">
     <p>I&#39;ve never noticed any odd effects from our Nedap inverter when running a Mk2 PV Router (aka diverter) in any mode.&nbsp; In burst mode with anti-flicker measures in place, the operation of a diverter system is no different than slowly turning a 3 kW kettle on &amp; off.&nbsp; In phase-angle mode, it&#39;s no different than a bank of bulbs on a conventional dimmer switch.&nbsp; Even in its original mode, with a flicker rate of up to 12 Hz, the inverter never complained, nor did our immersion heater.</p>
<p>When running in burst-mode with anti-flicker measures in place, the rate at which surplus energy is cycled to the dump load is determined entirely by the supply meter.&nbsp; Most meters allow a window of 3600J, which is 1.2 seconds&#39; worth at 3 kW, but some only allow around a third of this.&nbsp;</p>
<p>Having a rapid response time allows the diverter to cycle (flicker) as slowly as the meter will allow.&nbsp; Any pipeline delay, such as predicting the next 300 millisecond&#39;s worth of activity, will serve to increase the flicker rate, otherwise you&#39;ll be running the risk of straying outside the all-important penalty-free zone.</p>
<p>3 Hz is a very fast cycle rate, and the effect will be very noticeable at nearby lighting outlets.&nbsp; None of the AF algorithms that I&#39;ve posted operate at anything like this rate.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17440"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What about our Inverters ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 09/01/2014 - 13:16.</div>
    <div class="content">
     <p><em>&quot;Looking at the mains voltage on a scope it was somewhat spiky and distorted, even with the zero-cross switching,&quot;</em></p>
<p>That leads me to think that your zero-crossing trigger may not be working correctly. Is the first half-cycle of a block still correct, or is that &quot;spiky and distorted&quot; too? Do you still see &quot;spiky and distorted&quot; when the inverter is turned off? - If not, then it seems that the inverter is trying to correct for dip that caused by switching the load.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17485"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="greenhph&#039;s picture" title="greenhph&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: What about our Inverters ?</h3>

    <div class="submitted">Submitted by greenhph (not verified) on Fri, 10/01/2014 - 11:11.</div>
    <div class="content">
     <p>&nbsp; The zero-crossing seems to work fine when switching a long consecutive block of power, e.g. switching at each of 7 half-cycles when 700W is available.&nbsp; In fact looking at the mains voltage adjacent to the immersion there is a perfect entry at the first switch on and a very slight &quot;tail&quot; at the end of the block - but no spikes - it is remarkably clean.&nbsp;</p>
<p>&nbsp; I don&#39;t know why the intermittent Triac firing at, say, every 5th or 8th Half-wave was so messy.&nbsp; It certainly smoothed out the flicker, causing (on 16W 2D fluorescent lights) a very slight, relatively high frequency, pulsing which was hardly noticeable.&nbsp; However I shall probably not pursue this any further - I had my doubts when I first simulated it.</p>
<p>&nbsp; I use MOC3041 optos firing BTA41 Triacs.&nbsp;</p>
<p>&nbsp; Incidentally I use a small 8 pin PIC micro (all 85 p&#39;s worth) as the overall system zero-cross detector.&nbsp;</p>
<p>&nbsp;&nbsp; This runs at 32 MHz, doing continuous ADC sampling of the mains voltage (i.e. 12v AC - AC transformer) and outputting two pulse trains.&nbsp; One oscillates 0v to 5v with the Positive and Negative mains cycle, transitioning at the zero cross point, and the other gives a positive pulse spanning +/- 20v either side of the zero-cross point.</p>
<p>&nbsp;&nbsp; Thus my main processor dosn&#39;t have to worry about any of this, just using simple polling to see which part of the mains cycle it is in, when it&#39;s hit a zero-cross and when to &quot;enable&quot; the Triac.</p>
<p>&nbsp;&nbsp; I have also built a basic power monitor which watches the flashing LEDs on three mains meters (PV output, House usage, Grid In/Out) and confirms the operation of the Immersion system - showing a small export for safety.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17486"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What about our Inverters ?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 10/01/2014 - 11:42.</div>
    <div class="content">
     <p><em>&nbsp; I use MOC3041 optos firing BTA41 Triacs.&nbsp;</em></p>
<p><em>&nbsp; Incidentally I use a small 8 pin PIC micro (all 85 p&#39;s worth) as the overall system zero-cross detector.&nbsp;</em></p>
<p>The MOC3041 trigger has an internal zero-crossing detector so the processor needs to know nothing about such details.&nbsp; It only needs to know when a new mains cycle has started so that the trigger can be armed accordingly.&nbsp; It gets this timing information from the existing stream of voltage samples so no additional polling is required.&nbsp; I&#39;ve yet to understand what your PIC is doing.</p>
<p>At 50% power, are you diverting your surplus energy in alternate half-cycles?&nbsp; That would have a large DC-content which could possibly upset your sensors which continuously &#39;float&#39; towards the point of minimum DC.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17489"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What about our Inverters ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 10/01/2014 - 15:28.</div>
    <div class="content">
     <p>Good point, Robin. This: &quot;I don&#39;t know why the intermittent Triac firing at, say, every <strong>5th or 8th</strong> Half-wave was so messy.&quot; [my emphasis] does indeed seem to imply that rectification is a possibility. He needs to fire for complete cycles, and stay off for complete cycles, to assure that rectification does not happen. Otherwise, apart from his inverter getting upset, the Power Company might join in as well.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17491"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="greenhph&#039;s picture" title="greenhph&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: What about our Inverters ?</h3>

    <div class="submitted">Submitted by greenhph (not verified) on Fri, 10/01/2014 - 16:05.</div>
    <div class="content">
     <p>&nbsp; A couple of years ago, when I needed a zero-cross detector for another mains project I breadboarded some of the comparator and discrete component systems but found them somewhat unsatisfactory.&nbsp;</p>
<p>&nbsp; I then programmed a PIC 12F1822 8-pin chip and used this as a simple, single component,&nbsp; &quot;black box&quot; in the project - which also used the MOC3041 &amp; BTA41.&nbsp; The PIC program is very simple but reliable and puts out, via just 2 pins, the three &quot;vital&quot; parameters for any mains Triac system. &nbsp; It even puts out some real-time RS232 data covering max, min &amp; offset values to a laptop if required.</p>
<p>&nbsp; When I later started looking at the PV-Immersion system I just started off using the 8 pin PIC to supply the zero-cross parameters as a foundation,&nbsp; since I had it, to reduce the workload and complexity of the main program.&nbsp; Obviously there are many ways to skin a cat - I went this way.</p>
<p>&nbsp; The main processor does not now need to test any of it&#39;s ADC readings for polarity, to establish the cycle end points, or to check for the +/- 20v Triac enable point.&nbsp;</p>
<p>&nbsp; &nbsp; The system currently reads the Grid cable power over one cycle (taking 120 samples), calculates the PV surplus as so many 100W &quot;chunks&quot; and then fires the Triac as appropriate over the next 15 cycles (i.e. 30 Half-Cycles at 100W each for a max of 3kW).&nbsp; Thus a PV surplus of 1300W will trigger the Triac for the next 13 consecutive Half-Cycles, and then not trigger the Triac for the next 17 consecutive cycles.&nbsp;</p>
<p>&nbsp;&nbsp; Thus total elapsed time is 17 AC cycles, or about 1/3 sec giving a very fast response to other mains activity like kettles, or clouds across the sun.</p>
<p>&nbsp; The attached traces show the sampling (blue block) then 700W being switched and then another sampling and 600W being switched.&nbsp; The Traces show current from the CT on the Grid cable and also voltage at the Immersion.</p>
<p>&nbsp; It all works fine.&nbsp; I have Temperature sensors on the tanks so the system can switch between tanks on a sunny day, and I also have a RTC chip so I can set up a timing period to heat the tank from the mains the morning after a dull day to ensure we always have hot water at minimum cost.</p>
<p>&nbsp; If PV power is available I heat the top tank to 65 C but if heating from the mains it only takes it up to 48 C.&nbsp; Both tanks have the usual foam insulation and we have added about another 6 - 8 inches via plastic bags filled with rockwool fluff.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17493"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What about our Inverters ?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 10/01/2014 - 18:32.</div>
    <div class="content">
     <p><em>Thus total elapsed time is 17 AC cycles, or about 1/3 sec giving a very fast response to other mains activity like kettles, or clouds across the sun.</em></p>
<p>During 17 mains cycles at 50Hz, a 3kW appliance will consume 1020 Joules.&nbsp; Some meters have a range of only 1250 Joules before penalties are applied.&nbsp; This combination seems likely to have difficulties when conditions change.&nbsp;</p>
<p>But it will no doubt be fine for most of the time :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17496"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What about our Inverters ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 10/01/2014 - 20:24.</div>
    <div class="content">
     <p>And I reiterate the point I tried to make above: 13 half-cycles on and 17 half-cycles off is imposing a dc load. I&#39;m not saying this is the problem, but saying &quot;it works fine&quot; does not mean it is blameless.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17515"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Tinbum&#039;s picture" title="Tinbum&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What about our Inverters ?</h3>

    <div class="submitted">Submitted by <a href="../user/2888.html" title="View user profile.">Tinbum</a> on Sat, 11/01/2014 - 12:49.</div>
    <div class="content">
     <p>I have 4 sunnyboy inverters (4000 TL 20) and none of them make any noise at all. I run 2no 3kw and 5no 1Kw loads with a version of Robins diverter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3581"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-vqXZ7hwxHM65TXLfKJcyguV2gGrxw0tYf2NjUORxnQ0" value="form-vqXZ7hwxHM65TXLfKJcyguV2gGrxw0tYf2NjUORxnQ0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
