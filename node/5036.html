<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5036 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:04:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emonlib on Beaglebone | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emonlib on Beaglebone</h3>
        <span class="submitted">Submitted by <a href="../user/6172.html" title="View user profile.">zaxter</a> on Sat, 19/04/2014 - 09:20</span>
        <div class="content"><p>Hi,</p>
<p>I&#39;ve been trying to adapt the Emonlib for beaglebone ADC. So far i&#39;e been able to get it running, but I&#39;m not getting very precise values. I&#39;m using only the calcIrms function to get the rms Current, which I use to calculate the apparent power by multiplying with 230.</p>
<p>&nbsp;</p>
<p>These are the constants I&#39;m using:</p>
<p>&nbsp;</p>
<p>SUPPLYVOLTAGE = 1800;</p>
<p>calibration = 166.666 (i.e. for a burden resistor of 13 ohms, calculated using the calibration theory).</p>
<p>Further, I changed&nbsp;I_RATIO = ICAL *((SUPPLYVOLTAGE/1000.0) / (1.8 * ADC_COUNTS));</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Can&#39;t figure out whats wrong. Please help.</p>
<p>&nbsp;</p>
<p>Thanks.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11260.html" class="topic-previous" title="Go to previous forum topic">‹ The Official Emoncms Android App</a>
              <a href="12592.html" class="topic-next" title="Go to next forum topic">Emontx V3.4 Freeze ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-20860"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sat, 19/04/2014 - 09:55.</div>
    <div class="content">
     <p>Hello zaxter, can you copy and paste a sample of the output at different loads, say 60W and then 3kW. Maybe 10 readings at each power.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20862"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/04/2014 - 11:01.</div>
    <div class="content">
     <p>What are the raw numbers that your ADC is giving out?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20867"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6172.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="zaxter&#039;s picture" title="zaxter&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/6172.html" title="View user profile.">zaxter</a> on Sat, 19/04/2014 - 14:08.</div>
    <div class="content">
     <p>@TrystanLea</p>
<p>Following is the output for a 160w load-&gt;</p>
<p>	At 17:39:54<br />
	Apparent power = 26.270148 and Irms = 0.114218 &nbsp;&lt;&lt;--------when switched off<br />
	At 17:39:55<br />
	Apparent power = 28.736440 and Irms = 0.124941<br />
	At 17:39:57<br />
	Apparent power = 44.157726 and Irms = 0.191990<br />
	At 17:39:59<br />
	Apparent power = 60.549677 and Irms = 0.263259<br />
	At 17:40:1<br />
	Apparent power = 63.220695 and Irms = 0.274873<br />
	At 17:40:2<br />
	Apparent power = 64.330163 and Irms = 0.279696 &nbsp;&lt;&lt;--------when switched on<br />
	At 17:40:4<br />
	Apparent power = 64.444600 and Irms = 0.280194<br />
	At 17:40:6<br />
	Apparent power = 64.733168 and Irms = 0.281449<br />
	At 17:40:7<br />
	Apparent power = 65.135276 and Irms = 0.283197</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Sorry I dont currently have a larger load.</p>
<p>I&#39;m using a yhdc sct-01300 current o/p type sensor.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20868"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6172.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="zaxter&#039;s picture" title="zaxter&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/6172.html" title="View user profile.">zaxter</a> on Sat, 19/04/2014 - 14:09.</div>
    <div class="content">
     <p>@robert wall. I&#39;m getting 800~. Its a 12 bit ADC with Vref = 1.8v.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20869"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/04/2014 - 14:27.</div>
    <div class="content">
     <p>That tells me that your mid-point bias is wrong. You should be seeing a count of around 2048 with no input, if you&#39;re seeing ~800 it means your midpoint is at&nbsp; 0.35V, not where it should be at 0.9 V.</p>
<p>With a 230 V supply and a load of 160 W, the primary current is ~700 mA and the secondary current out of your ct (SCT-013-000?) is 0.35 mA, the voltage across your burden should be ~ 4.5 mV (all rms values). That means the ADC output should be swinging by 29 counts peak-peak.</p>
<p>Could you try one of Robin&#39;s test sketches to show what is happening to the input: <a href="1757.html" title="http://openenergymonitor.org/emon/node/1757">http://openenergymonitor.org/emon/node/1757</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20870"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6172.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="zaxter&#039;s picture" title="zaxter&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/6172.html" title="View user profile.">zaxter</a> on Sat, 19/04/2014 - 15:40.</div>
    <div class="content">
     <p>Thanks a lot for your reply @Robert. I&#39;ve attached my circuit. Maybe the voltage divider I&#39;m using isn&#39;t right.</p>
<p>The arduino sketches need to be tweaked a little to get them working on Beaglebone. It will take some time. I&#39;ll get back to you once I&#39;m done.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20871"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/04/2014 - 15:46.</div>
    <div class="content">
     <p>That ought to be right - there must be something else wrong somewhere. I assume the capacitor is a polarised type, is it the correct way round? Have you measured the mid-point voltage with a multimeter? If that&#39;s correct, then we need to await the results of Robin&#39;s sketches.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20872"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6172.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="zaxter&#039;s picture" title="zaxter&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/6172.html" title="View user profile.">zaxter</a> on Sat, 19/04/2014 - 16:17.</div>
    <div class="content">
     <p>@Robert. Sorry I just had a doubt.</p>
<p>Shouldn&#39;t the raw value for 1.8V in a 12 bit ADC be ~1800. Because when I connect 1.8V to a ADC pin, it reads ~1799. In that case 0.9V should give about 900. Could you please clarify?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20874"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/04/2014 - 16:58.</div>
    <div class="content">
     <p>But you said your reference was 1.8 V, therefore all voltages and counts that you measure are based on 0 V = 0 counts and 1.8 V = 4095 counts.&nbsp; 0.9 V is half way and should be 2047-2048 counts.</p>
<p>What you&#39;ve just written says your Analogue reference is 4.096 V, which is a common and credible number but not what you said it was.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20875"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6172.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="zaxter&#039;s picture" title="zaxter&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/6172.html" title="View user profile.">zaxter</a> on Sat, 19/04/2014 - 17:09.</div>
    <div class="content">
     <p>Oh. I&#39;m really sorry for the confusion.&nbsp;</p>
<p>The analog pins on beaglebone&nbsp;can only take a maximum of 1.8V, although its a 12 bit ADC. So, practically, the maximum value can only be 1799 and not 4095.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20882"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/04/2014 - 23:56.</div>
    <div class="content">
     <p>That&#39;s really weird and a bit pointless - you have got a not-quite-11-bit ADC there.</p>
<p>So you expect the midpoint to sit at around 900 counts, therefore the 800 you are seeing is a bit low but not disastrously wrong. But the input swing I gave you in counts is grossly optimistic, it should be 12-13 counts peak-peak, or 4.5 counts rms. Or for 100 A, you should see 650 counts rms. That&nbsp; I think makes your current calibration constant 153.84, always assuming you&#39;ve set SUPPLYVOLTAGE = 1800 and ADC_COUNTS = 1799 - you need consistent values here.&nbsp; (If you have left ADC_COUNTS as it is set in the header file to 1024 or 4096, that&#39;s at least part of where it is going wrong.</p>
<p>But equally worrying is the &quot;no current&quot; values of 120 mA or so. This indicates that there is noise or pickup getting in to the analogue front end (or into the ADC converter reference voltage), and that needs to be sorted out. Careful attention to grounding, screening and filtering will be required to reduce it, but using current-only is the worst case because any sniff of noise is rectified by the rms calculation and added to the wanted value. You&#39;ll find it reduces if you use calcVI to get average power directly, because the noise current that is in phase and that which is out of phase with the voltage tends to cancel out and average towards zero.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20922"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6172.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="zaxter&#039;s picture" title="zaxter&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/6172.html" title="View user profile.">zaxter</a> on Mon, 21/04/2014 - 06:32.</div>
    <div class="content">
     <p>@Robert. Thanks again for your continued interest. I&#39;ve tried with the constant values you suggested, but no luck yet, although I have been able to get closer to desired values. Currently looking into the possibility of using the&nbsp;CalcVI().&nbsp;</p>
<p>&nbsp;</p>
<p>I was wondering if the current o/p yhdc&nbsp;SCT013&nbsp;can be used somehow to get the voltage readings.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20934"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 21/04/2014 - 13:16.</div>
    <div class="content">
     <p><em>&quot;I was wondering if the current o/p yhdc SCT013 can be used somehow to get the voltage readings.&quot;&nbsp; </em>No, that&#39;s not possible. The YHDC SCT-013-000 is a <strong><em>current</em></strong> transformer (and it makes no direct galvanic connection to the cable), for the voltage input you need an approved (for your safety) <em><strong>voltage</strong></em> transformer (also called an ac-ac adapter) that connects directly to Line &amp; Neutral.</p>
<p>As far as the calibration goes, how far out are you now (over a range of values)? All the theory will only get you to within about 4% at best due to the tolerance spread in the various components that affect the measurement (see Building Blocks and &quot;Sources of error in the emonTx voltage and current inputs&quot;).&nbsp; The final adjustment has to be by checking against a known good meter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21238"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6172.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="zaxter&#039;s picture" title="zaxter&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/6172.html" title="View user profile.">zaxter</a> on Mon, 05/05/2014 - 05:43.</div>
    <div class="content">
     <p>@Robert. Apologies for the delayed response.&nbsp;</p>
<p>Presently, I&#39;m getting ~40W for a 60W&nbsp;load and ~130 for a 160W load. But I&#39;m still getting values around 20W&nbsp;without any load.&nbsp;</p>
<p>Thanks a lot for your help.</p>
<p>Could you please suggest me a voltage sensor?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21239"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/05/2014 - 11:03.</div>
    <div class="content">
     <p>At the top of every page, there&#39;s a link labelled &quot;Shop&quot;. If you are in Europe, or you have an equivalent supply (voltage, frequency, plug shape), you should find what you need there. Otherwise, I&#39;m afraid you will have to find a local equivalent. The output voltage isn&#39;t critical, because provided that it is greater then the input range of your ADC, you can have a voltage divider to scale it appropriately. There&#39;s &quot;Building Blocks&quot; page that explains this.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34700"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8785.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="johnyaya&#039;s picture" title="johnyaya&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/8785.html" title="View user profile.">johnyaya</a> on Mon, 05/10/2015 - 13:42.</div>
    <div class="content">
     <p>Hi guys I also want to use the Beaglebone Black with a CT I have a few leftover of these &nbsp;582-1018-ND from</p>
<p>Digi-key. they are rated at 20 amps and&nbsp; are 1000 turn. I don&#39;t need any thing higher than 20 amps. I want to install</p>
<p>this&nbsp;in&nbsp;my Level 2 16 amp&nbsp;electric vehicle charging station.&nbsp;A step by step for the CT setup would be greatly appeared.</p>
<p>&nbsp;Zaxter &nbsp;&nbsp;Did you ever solve the Delta in you power measurements?</p>
<p>&nbsp;</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34705"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/10/2015 - 19:10.</div>
    <div class="content">
     <p>I have thought about rewriting the design process all in one place, it's actually all in Building Blocks but it's scattered about. Here's the short version:</p>
<p>1. Calculate the current you'll get in the CT secondary at the maximum current you're interested in.<br />
2. Calculate the maximum voltage swing that your ADC input can accept under worst-case conditions, e.g. at minimum supply voltage, and with the midpoint bias off-centre due to resistor tolerances.<br />
3. Calculate the value of burden resistor to give you that voltage peak-peak at the current from step 1, again given worst-case resistor tolerance. Always go to the next lower value (or revise your requirement for the maximum current), so as to allow a bit of 'headroom'. If you think you might have a 'peaky' current wave, where the ratio of peak/rms is greater then &radic;2, then you need to reduce the burden resistor value by quite a lot - maybe 20 - 30%.<br />
4. Use those values to calculate your calibration coefficient as explained in Building Blocks - CT and AC power adapter installation and calibration theory.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41572"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9894.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="blazejka&#039;s picture" title="blazejka&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/9894.html" title="View user profile.">blazejka</a> on Wed, 04/05/2016 - 23:43.</div>
    <div class="content">
     <p>Could someone please explain how to run Emonlib on BeagleBoneBlack so I could test it myself?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41577"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonlib on Beaglebone</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 05/05/2016 - 08:03.</div>
    <div class="content">
     <p>This forum is now&nbsp;read-only. See the Latest Blog post on the right for details.&nbsp;Please join the new forums and&nbsp;ask this question there.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5036"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-vMrtY9G8YRHxToMQo-IFlyXHp0XoJ5-sIM54vQDn0qM" value="form-vMrtY9G8YRHxToMQo-IFlyXHp0XoJ5-sIM54vQDn0qM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/5036 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:04:31 GMT -->
</html>
