<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5353 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Forgive my ignorance slow input updates | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Forgive my ignorance slow input updates</h3>
        <span class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Mon, 30/06/2014 - 21:25</span>
        <div class="content"><p>All my inputs used to update every couple of seconds. Now all of them are taking @40 secs. I have made no changes whatsoever. Any ideas?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3889.html" class="topic-previous" title="Go to previous forum topic">‹ Expand the HDD partition</a>
              <a href="5319.html" class="topic-next" title="Go to next forum topic">Emoncms time-series feed engine documentation ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22251"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 01/07/2014 - 07:38.</div>
    <div class="content">
     <p>Hello webby, can you give a bit more detail on your setup?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22257"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 01/07/2014 - 16:08.</div>
    <div class="content">
     <p>Looking through your previous posts, of course your using emoncms.org, sorry for my forgetfulness. Looking at your account now it looks ok from here updated within 5-10s. It may have been a temporary hold up. Thanks for asking and notifying, its good to know if anything goes amiss.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22291"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Thu, 03/07/2014 - 17:41.</div>
    <div class="content">
     <p>Have had no updates for 10hrs Now!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22292"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Thu, 03/07/2014 - 17:44.</div>
    <div class="content">
     <p>rebooted rpi and now seems ok. something was badly amiss because rpi seemed to be sending huge amounts of data aking up all my bandwidth. SOrted as soon as I rebooted.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22296"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 03/07/2014 - 18:24.</div>
    <div class="content">
     <p>What OS and software are you running on pi? how is connected to LAN WiFi or Ethernet cable? how are nodes connected to pi? there are checks you can do to locate the issue if it happens again, if you are using rfm2pi has the firmware been updated?</p>
<p>There are known WiFi issues with the drivers for some adapters on early IPE-R1&nbsp;based oem-gateway and there are known issues with rfm2pi&nbsp;v2 locking out on earlier firmware, both can be temporarily resolved with a reboot.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22300"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Thu, 03/07/2014 - 20:18.</div>
    <div class="content">
     <p>std software as delivered on sd card recently updated. Emons.org hosted&nbsp; All connected by Ethernet cable. It seems that another piece of software that my pc is running is causing some kind of conflict as updates are fine once I disable it and reboot the rpi. The other piece of software which is an ip camera monitoring service is also being messed up and it just begins to hog all bandwidth (5mbs) whilst not working either. Possible port conflict????</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22307"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 04/07/2014 - 07:36.</div>
    <div class="content">
     <p>How recently did you update the SD card? and did you update Raspbian&nbsp;or OEM gateway or both?</p>
<p>There was an issue with IPE-R1 when updating raspbian&nbsp;with &quot;sudo apt-get upgrade&quot; see&nbsp;<a href="4036.html">http://openenergymonitor.org/emon/node/4036</a>&nbsp;but there have been several updates to Raspbian since then that may or may not of affected the upgrading result.</p>
<p>The IPE-R1 hasn&#39;t been updated by the original author but I did notice on <a href="http://nutcom.hu/">his site</a> a link to a <a href="http://www.andreasgiemza.de/allgemein/ipe-r1-v2/">3rd&nbsp;party&nbsp;IPE-R1v2</a>.&nbsp;</p>
<p>I cannot vouch for it though as I reverted to using an early un-updated version (which I was very happy with aside from not being able to update it) until recently switching to using stock Raspbian in read-only mode&nbsp;<a href="5331.html">http://openenergymonitor.org/emon/node/5331</a>.</p>
<p>I can&#39;t tell you if this is the issue or not but if you used &quot;sudo apt-get upgrade&quot; I certainly wouldn&#39;t be surprised if it was.</p>
<p>It is quite possible that it&#39;s a port or IP address conflict causing network issues, does restarting your router fix the issue or only rebooting the pi? I assume from your comments if you disable&nbsp;ip&nbsp;camera monitor, the pi doesn&#39;t recover by itself.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22323"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Fri, 04/07/2014 - 16:42.</div>
    <div class="content">
     <p>The rpi&nbsp;does not recover when the camera monitor is disabled. Nor does it recover when the router is restarted with the camera monitor disabled. Only rebooting the rpi gets it to work again. Not sure what this tells us? DO you know what port the rpi uses? The ip camera system uses ports 9001 and 9002 for external monitoring of cameras. I did not use the update that you refer to.</p>
<p>Thanks for your assistance</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22330"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 05/07/2014 - 12:28.</div>
    <div class="content">
     <p>By default OEM gateway opens a port on 50011, this can be disabled by &#39;commenting out&#39; each of the lines in the [[<a href="https://github.com/Jerome-github/oem_gateway/blob/master/oemgateway.conf.dist#L39-L44">Socket]] settings in the oemgateway.conf</a>&nbsp;with a #.</p>
<p>If the Pi was able to recover by itself that would tell us we should probably look elsewhere for an issue, the fact the Pi doesn&#39;t recover suggests there is a problem with the Pi, however it doesn&#39;t rule out the possibility that the cause is external to the Pi and the Pi&#39;s issue is the inability to handle the external fault. does the fault <u>only</u> occur if the IP camera system is running?</p>
<p>What are the current symptoms&nbsp;is it a consistent&nbsp;delay or does it just stop posting or both?</p>
<p>Your original post said the inputs where updating every 40 secs, was that number taken from the &quot;last updated&quot; column or did you calculate that result? The reason I ask is, for example if that column varies between 0 &amp; 40 or 15 &amp; 55 the updates are indeed every 40secs but if it&#39;s varying between say 30 &amp; 40 then it is updating every 10secs&nbsp;but there is a 30 second time difference or delay, these are 2 different situations and it&#39;s quite easy to get led in the wrong direction.</p>
<p>Trystan&nbsp;said he checked your account and it was updating every 5-10secs at that time, do you recall if matched what you were seeing at that time? your next post after this said it hadn&#39;t updated in 10hrs, do you know if the delay gradually built up or it just suddenly stopped?</p>
<p>I assume you are collecting data via a rfm2pi? have you tried the oemgateway &quot;troubleshooting&quot; section at the end of this page&nbsp;<a href="http://emoncms.org/site/docs/raspberrypigateway">http://emoncms.org/site/docs/raspberrypigateway</a>. this will confirm successful&nbsp;receipt of packets, which can confirm update time, frequency &amp; interval and if the frames are dispatched successfully. It can also tell us if the fault is persistent&nbsp;when restarting the gateway service &amp; serial connection, all valuable info even if just for elimination.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22336"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Sat, 05/07/2014 - 20:07.</div>
    <div class="content">
     <p>Solved! seems to have been a router issue.further research ongoing. Thanks for your help everybody.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22550"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Mon, 14/07/2014 - 21:06.</div>
    <div class="content">
     <p>Not quite solved!</p>
<p>Major issue with large home network now seems to be fixed However:</p>
<p>Inputs are now updating regularly but there is a delay which varies around 50 to 65 secs. It used to be 5-10 secs.</p>
<p>Can anybody explain this(and hopefully the solution) to an ignoramus such as myself?</p>
<p>Also I have never got to the bottom of why my PHP feeds are logging a day behind my SQL feeds.</p>
<p>Is trystan still working on it or do I have my time zone set incorrectly somehow?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22556"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6246.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JetJackson&#039;s picture" title="JetJackson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/6246.html" title="View user profile.">JetJackson</a> on Tue, 15/07/2014 - 08:14.</div>
    <div class="content">
     <p>I think I am having the same (or similar) issue. All has been working fine for weeks then a few data ago emocms stopped updating. Updates are happening but are intermittent and often with the wrong values.</p>
<p>&nbsp;</p>
<p>What was you router issue?</p>
<p>Thanks..</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22558"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 15/07/2014 - 09:30.</div>
    <div class="content">
     <p>Hi webby, The important thing is you are receiving regular updates. The variation &quot;around 50 to 65 secs&quot; means you are getting good data arriving regularly, emoncms is counting up to a max of ~65sec since update and dropping back to a minimum of ~50secs&nbsp;since update.</p>
<p>The ~50 second discrepancy&nbsp;is &nbsp;probably consistent and signifies either a delay, which is rare or more likely a time difference somewhere, I frequently even see &nbsp;<u>minus</u> 5 seconds since last update in emoncms. so it will vary. ~50secs seems quite high though.</p>
<p>Can you confirm if it&#39;s a time inaccuracy or a delay by watching emoncms and switching on a large load on a monitored supply and see how long until that change is displayed relative to the &quot;since update&quot; value at the time of update?</p>
<p>I&#39;m not entirely sure where the times are derived off the top of my head but you can resync the time on the Pi by running&nbsp;<strong>sudo ntpd</strong>, it is common&nbsp;for them to be out of sync due to not having a RealTimeClock&nbsp;onboard.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22569"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Forgive my ignorance slow input updates</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Tue, 15/07/2014 - 21:15.</div>
    <div class="content">
     <p>Hi Paul</p>
<p>It seems that syncing the times correctly in my managed switches and router has solved the delay issue. It is now 5-10 secs.</p>
<p>The other problem still eludes me but setting the time correctly in the RPi could well be it.</p>
<p>I just need to remember how to do it on a MAC!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5353"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-mbUYowcxct-2Pr7lAgp2yB7Rkc8WjPMMRtE9fJthNY0" value="form-mbUYowcxct-2Pr7lAgp2yB7Rkc8WjPMMRtE9fJthNY0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
