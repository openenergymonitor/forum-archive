<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/251 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:22:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Glyn&#039;s home energy and temperature monitor setup | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
          <span class="submitted"></span>
      <div class="taxonomy"></div>
      <div class="content"><h2>Glyn's home energy monitor setup&nbsp;</h2>
<p>This is the setup I've been running in my own house since December 2010. In this time it's only needed a few restarts.&nbsp;</p>
<p>I would like to replace this (rather messy) setup with an&nbsp;<a href="../emontx.html">emonTx&nbsp;</a>,&nbsp;<a href="../emonbase.html">emonBase</a>&nbsp;and&nbsp;<a href="../emonglcd.html">emonGLCD</a>&nbsp;wireless display. Watch this space!&nbsp;</p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" /><br />
<meta http-equiv="content-type" content="text/html; charset=utf-8" /></p>
<p><a href="../sites/default/files/DSCF0356.jpg"><img width="200" height="267" alt="" src="../sites/default/files/DSCF0356.jpg" /></a>&nbsp;<a href="../sites/default/files/DSCF0361.jpg"><img width="200" height="150" alt="" src="../sites/default/files/DSCF0361.jpg" /></a></p>
<p><a href="../sites/default/files/12122010797.jpg"><img width="200" height="150" alt="" src="../sites/default/files/12122010797.jpg" /></a></p>
<p>&nbsp;Using modules:</p>
<p><a href="58.html">AC mains non-invasive 3.0:</a> x2 channel CT (we have two circuits in my house: one for off-peak tariff electricity)</p>
<p><a href="98.html">Digital temperature sensors:</a> x3 (outside, living room and hot-water&nbsp;</p>
<p><a href="119.html">RF link to Nokia 3310 display&nbsp;</a></p>
<p>Wiznet Ethernet shield to post to <a href="../emoncms.html">emonCMS</a>&nbsp;</p>
<p>&nbsp;</p>
<p>Arduino Source code: <a href="../sites/default/files/HomeMonitorV4.zip">download&nbsp;</a>&nbsp;(V4.0)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
    
    
      </div>
<div id="comments">
  <a id="comment-2287"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/317.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-317.jpg" alt="Sergegsx&#039;s picture" title="Sergegsx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Glyn's home energy and temperature monitor setup</h3>

    <div class="submitted">Submitted by <a href="../user/317.html" title="View user profile.">Sergegsx</a> on Sat, 05/11/2011 - 12:41.</div>
    <div class="content">
     <p>very nice and clean implementation of multiple CTs</p>
<p>I had done this in a very similar way but yours is cleaner so I adapted my code this morning. Now it will be easy to connect the extra 5 CTs that are coming from ebay.</p>
<p>Congrats.</p>
<p>&nbsp;</p>
<p>btw. you use realpower in whInc = realPower * ((whtime-lwhtime)/3600000.0);</p>
<p>shouldnt we use apparent power? I normally calibrate and then take the electrical counter of my house and calculate the error and apply the correction to my calibration. I have always done this for apparent power. should i do it for realpower instead?</p>
<p>Then in emoncms when it says &quot;power&quot; it means apparent power ?</p>
<p>&nbsp;</p>
<p>thank you.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-2333"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Glyn's home energy and temperature monitor setup</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 15/11/2011 - 21:46.</div>
    <div class="content">
     <p>My setup is probably a bit different to most domestic monitoring setups. I monitor AC voltage using an AC-AC voltage adapter as well as current using a CT sensor. Having both voltage and current readings allows me to calculate real power. This is the power the the utility company bills me for. Most domestic monitors using just a current sensor can only monitor current, the assumet the voltage to be constat at a particular level and the PF to be constant at 1. This will often result in slightly higher readings that you are acutally being billed for due to inductive loads reducing the PF. For my house apparent power is 10% higher than real power.&nbsp;</p>
<p>We started collecting data on the differences between real and apparent power readings here:&nbsp;<a href="220.html">http://openenergymonitor.org/emon/node/220</a></p>
<p>You have done the best thing by calibrating your energy monitor againsed your meter.&nbsp;</p>
<p>At the end of the day the main reason for domesti energy monitoring is to better understand our energy consumption, actual precise values is not as important as trends.&nbsp;</p>
<p>The 'power' value in emoncms is whatever you post to it! emoncms has no way of telling. I post both, see the link above for a screen grab.&nbsp;</p>
<p>All the best, Glyn.&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-2335"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/317.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-317.jpg" alt="Sergegsx&#039;s picture" title="Sergegsx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Glyn's home energy and temperature monitor setup</h3>

    <div class="submitted">Submitted by <a href="../user/317.html" title="View user profile.">Sergegsx</a> on Tue, 15/11/2011 - 22:06.</div>
    <div class="content">
     <p>Hi Glyn thanks for your time on answering.</p>
<p>I also have the AC to AC converter and then use that value of voltage for calculating the realpower. I actually use the example of your build as its incredible easy to add new CTs to the setup.</p>
<p><a href="251.html" title="http://openenergymonitor.org/emon/node/251">http://openenergymonitor.org/emon/node/251</a></p>
<p>I have right now 3 CTs and 5 are waiting to be installed when i get my Arduino MEGA in the mail.</p>
<p>Thank you for the code in that example, as makes it super easy.</p>
<p>&nbsp;&nbsp;&nbsp; ch1.emon_calc(inPinI_1,ICAL_1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Energy Monitor calc function for channel 1, pass Arduino analog in pin nummber and calibration coefficient <br />
&nbsp;&nbsp;&nbsp; ch2.emon_calc(inPinI_2,ICAL_2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Energy Monitor calc function, for channel 2, pass Arduino analog in pin nummber and calibrat on coefficient<br />
&nbsp;&nbsp;&nbsp; ch3.emon_calc(inPinI_3,ICAL_3);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Energy Monitor calc function, for channel 3, pass Arduino analog in pin nummber and calibrat on coefficient<br />
&nbsp;</p>
<p>The only thing i added to the emon.pde part of the code is this</p>
<p>&nbsp; cost = (wh/1000.0) * preciokwh;<br />
in order to have the accumulated cost of each sensor to display it in the LCD. maybe you want to use it also.</p>
<p>If you have any suggestions or things to take into account when having multiple CTs please let me know.</p>
<p>Thanks Glyn.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
</div></div></div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
