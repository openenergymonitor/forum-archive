<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/590 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:07:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonTx precision | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonTx precision</h3>
        <span class="submitted">Submitted by Guest on Mon, 16/04/2012 - 11:18</span>
        <div class="content"><p>&nbsp;</p>
<div>
	Hi All,</div>
<div>
	&nbsp;</div>
<div>
	I&#39;ve seen there is a test by Trystan with a maximum of 14% error (although most measures had much lower errors) I&#39;d like to know which are the min amd max Wattages detectable by emonTx. Will emonTX detect charges down to a few Watts?</div>
<div>
	&nbsp;</div>
<div>
	Thanks,</div>
<div>
	Jordi.</div>
  <div class="forum-topic-navigation clear-block">
          <a href="646.html" class="topic-previous" title="Go to previous forum topic">‹ Connecting emonBase to internet</a>
              <a href="647.html" class="topic-next" title="Go to next forum topic">Designs Using Crydom ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-3863"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx precision</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 16/04/2012 - 20:09.</div>
    <div class="content">
     <p>Wattage means nothing without knowing the system voltage. The standard current transformer is rated at 100 A maximum. The minimum current that can be measured with any degree of certainty is around 1% of this. Below that, even theoretical errors (leaving out errors created by component tolerances and factors like the accuracy of the analog to digital converter) start to increase significantly. Theory alone suggests the error below about 0.5% of maximum current (i.e. 0.5 A) varies wildly and can exceed 50% of the reading.</p>
<blockquote><p>&quot;Will emonTX detect charges [ ? ] down to a few Watts?&quot;</p>
</blockquote>
<p>The short answer is no, at least not with the standard 100 A current transformer.</p>
<p>At the current levels you envisage, in effect you have a 1-bit, 2-bit or 3-bit analogue to digital conversion. I intend to write a full explanation of the behaviour of the analog to digital converter with very low level signals. When I&#39;ve done that, all should become clear. (Factors that influence the reading at such low levels include electrical noise, where the zero line sits in relation to the steps in the ADC converter law, how this relates to the amplitude of the sine wave and the calculation of the rms value of that sine wave).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3864"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="prensel&#039;s picture" title="prensel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx precision</h3>

    <div class="submitted">Submitted by prensel (not verified) on Mon, 16/04/2012 - 20:39.</div>
    <div class="content">
     <p>I did &#39;asked&#39; &#39;this in another thread but when looping the live wire three or four times through the CT sensor wouldnt that make it more responsive to lower Amps ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3879"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx precision</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 17/04/2012 - 19:55.</div>
    <div class="content">
     <p>See here: <a href="587.html" title="http://openenergymonitor.org/emon/node/587">http://openenergymonitor.org/emon/node/587</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3883"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jordi&#039;s picture" title="jordi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx precision</h3>

    <div class="submitted">Submitted by jordi (not verified) on Wed, 18/04/2012 - 08:38.</div>
    <div class="content">
     <p>&nbsp;</p>
<div>
	Hi</div>
<div>
	&nbsp;</div>
<div>
	Thanks for you answers.</div>
<div>
	&nbsp;</div>
<div>
	I am based in Europe and thus I have a 1 phase installation at 230V. My main line is 40A and most individual circuits are either 10A or 16A. There are a couple of 25A (kitchen &amp; owen and an Altherma heat pump). I have 18 individual circuits (I know... many circuits).</div>
<div>
	&nbsp;</div>
<div>
	My goal is to be able not only to monitor big loads like the heat pump and other appliances, but also to monitor those small constant loads like wireless phones, computers, TVs, etc. I&#39;d like to monitor the main line and also several of the individual circuits in order to detect this small standby suckers. In some cases I could use a killawatt</div>
<div>
	&nbsp;</div>
<div>
	As far as I understand there are two complementary ways of increasing accuracy for low readings:</div>
<div>
	1) Adjusting the resistor for a lower Amperage and posibly using a lower amperage CT (like the 30A)</div>
<div>
	2) Using a better analog to digital converter (is that possible?) I understand that the converter used by the emonTX is a 10 bit 0-5V.&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	Number 1 is the easiest. Adjusting the resistor for a 20A reading might increase the resolution 5 times. Am I right? What happens if the emonTx (or any Arduino) receives more than 5V?</div>
<div>
	&nbsp;</div>
<div>
	Since I plan to monitor several circuits I am also considering using some other hardware with more analog inputs like the beaglebone.</div>
<div>
	&nbsp;</div>
<div>
	Jordi.</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3891"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx precision</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 18/04/2012 - 16:55.</div>
    <div class="content">
     <p>If you are thinking of increasing the value of the burden resistor, there is a lot of information that should help you in the report <a href="https://learn.openenergymonitor.org/?redirect=report-yhdc-sct-013-000-current-transformer%c2%a0" title="http://openenergymonitor.org/emon/buildingblocks/report-yhdc-sct-013-000-current-transformer ">http://openenergymonitor.org/emon/buildingblocks/report-yhdc-sct-013-000...</a> As you will see from the report, it is generally not a good idea to increase the value of the burden resistor too much, as distortions creep in.</p>
<p>Provided the primary wire size is small enough, as mentioned earlier in the thread you could pass the wire several times through the core, then adjust the software calibration constant to suit.</p>
<p>Or as you say you could do both of these things.</p>
<blockquote><p>&quot;What happens if the emonTx (or any Arduino) receives more than 5V?&quot;</p>
</blockquote>
<p>Not necessarily 5 V ! ! !&nbsp; The input must stay between the supply rails. You need to read the Atmel data sheet. The analog input is connected to the supply rails by internal diodes, while these clamp the voltage to -0.7 V and (Vss + 0.7 V), they have limited current capability, and if you exceed those limits you probably have a dead Arduino. The best way of limiting the current is to include a series resistor between the CT and the input pin (note below). The current drawn by the analog input pin is so low that any resistor large enough to limit the current will still have negligible effect on the accuracy. When calculating the resistor value, bear in mind the CT can develop a substantial voltage when it saturates in fault conditions - in the extreme, that&#39;s 22 V, limited by the internal zener diodes. You could of course put your own zener diodes (say 6V8) in parallel with the burden resistor to limit the voltage even further (see the report for wiring the zeners).</p>
<blockquote><p>&quot;Using a better analog to digital converter (is that possible?)&quot;</p>
</blockquote>
<p>It should be possible. I believe <a href="../user/888.html" title="View user profile.">Marc_Eberhard</a> was considering using a <span class="DeviceNameHeading" id="lblDevice">MCP3909, but I&#39;ve no idea whether he has progressed this.</span> In that case, you&#39;d use the Arduino to command the A/D conversions, do the maths, and send the answer by wireless.</p>
<blockquote><p>&quot;I understand that the converter used by the emonTX is a 10 bit 0-5V.&quot;</p>
</blockquote>
<p>Almost right. It is 10-bit (the MCP3909 is 16-bit) but it runs off 3.3 V in the standard emonTx.</p>
<blockquote><p>&quot;Since I plan to monitor several circuits I am also considering using some other hardware with more analog inputs like the beaglebone.&quot;</p>
</blockquote>
<p>Or several MCP3909&#39;s ? A quick calculation shows that this with the standard 100 A CT should resolve 3 W with moderate accuracy. However, electrical noise might be a problem. Get-out clause: I have not engineered that suggestion in any detail - you must do the engineering on it.</p>
<p>[NOTE] The two voltage divider resistors that bias the inputs to Vss / 2 provide that function in the standard emonTx circuit - but you must not increase the bypass capacitor else that will pass enough current to blow the protection diodes.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3913"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jordi&#039;s picture" title="jordi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx precision</h3>

    <div class="submitted">Submitted by jordi (not verified) on Thu, 19/04/2012 - 20:40.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>Thanks for your suggestion. MCP3909 looks very promising. However I don&#39;t think I have the necessary knowledge to attempt such type of electronic circuits by myself. I am a software engineer with some experience with small hardware projects but this is too difficult.</p>
<p>I understand I&#39;d like something similar to&nbsp;<a href="http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&amp;nodeId=1824&amp;appnote=en544926">http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&amp;nodeId=1824&amp;appnote=en544926</a>&nbsp;but with more circuits.</p>
<p>BTW, in the former example they measure real power and power factor, but, as I understand, without measuring current voltage. How is this achieved?</p>
<p>Jordi</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3974"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx precision</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 22/04/2012 - 22:37.</div>
    <div class="content">
     <blockquote><p>&quot;BTW, in the former example they measure real power and power factor, but, as I understand, without measuring current voltage.&quot;</p>
</blockquote>
<p>In Microchip&#39;s Application Note for the MCP3909 - AN1291 ?</p>
<p>They cannot and they do not! The MCP3909 has two differential inputs. In the circuit diagram (Figure 2), CH0 measures current via a shunt and CH1 measures line voltage via a divider network.</p>
<p>As you say you are a software person and not experienced in hardware, and especially not experienced with working on live high voltages - <strong>DO NOT USE THIS CIRCUIT ARRANGEMENT !&nbsp;</strong> Stay with the isolated, low voltage arrangement that the emonTx uses, that is a current transformer and step-down voltage transformer.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4200"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Pcunha&#039;s picture" title="Pcunha&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx precision</h3>

    <div class="submitted">Submitted by Pcunha (not verified) on Thu, 03/05/2012 - 20:50.</div>
    <div class="content">
     <p>The method used in the microchip&acute;s solution is to use an amplifier to boost the signal when the power is too weak. in a dynamic form.</p>
<p>I&acute;ve try similar solution with arduino, but, lowering the acd&nbsp;voltage reference and derived voltage bias to the CT censor. that way increasing the resolution, but...</p>
<p>My idea has been killed by the noise. when the vref voltage was lowered to about 1v, the background noise was multiplied by somthing about 20x... If anyone figures how to reduce that noise, i think voltage dividers can be used drived by arduino pins to drop the Vref and Vbias to lower voltages, increasing resolution.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4204"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx precision</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 04/05/2012 - 16:18.</div>
    <div class="content">
     <p>I would be fairly certain that Microchip&#39;s solution does work. They introduce a gain of 70 x, and I&#39;d suggest that they paid great attention to the printed circuit layout, and earthing and shielding. They mention this several times in the AN, and stress its importance.</p>
<p>Using an external amplifier means that the very low level signals can be physically moved further away from the digital circuits, which must be a good thing.</p>
<p>[Edit:]</p>
<p>I have a gut feeling that scaling the ADC range is just inherently wrong, and you only stand to gain 3 x anyway. Atmel don&#39;t suggest it, and I&#39;d take that as a hint that it is not a good idea.</p>
<p>If you do the maths on the ADC converter when the input signal amplitude is just a few LSBs, you&#39;ll find that below 1% full scale, the errors can be well above 10% (of actual reading). So you do need Atmel&#39;s 60 - 70 x to accurately read down to single-figure Watts.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/590"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-8muzfl97igOl1C86nPX3Atw68k35ckO_a9yUx3ftqR8" value="form-8muzfl97igOl1C86nPX3Atw68k35ckO_a9yUx3ftqR8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
