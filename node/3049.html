<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3049 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Getting the average of two feeds in Emoncms | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Getting the average of two feeds in Emoncms</h3>
        <span class="submitted">Submitted by <a href="../user/4611.html" title="View user profile.">deeaitch</a> on Tue, 29/10/2013 - 22:24</span>
        <div class="content"><p>Hi everyone, this is my first post.</p>
<p>WOW!!! &nbsp;What an awesome system you&#39;ve built together. &nbsp;I jumped on the bandwagon a couple of weeks ago and already I&#39;ve given my raspberry pi full control of my gas central heating and hot water. &nbsp;Remote monitoring, remote control, evironmental feeds, I&#39;ve zones for upstairs and downstairs with a temperature setting for every hour of the day. &nbsp;This is really awesome stuff! &nbsp;I&#39;m so excited by it.</p>
<p>So, to my question:</p>
<p>I recently added 2x temperature probes to the top and bottom of my hotwater tank, hooked up to a jeenode. &nbsp;My own little python program ensures the boiler heats the water only when required based on the temperature readings. &nbsp;Works great. &nbsp;What I want to do is to calculate the average of the 2 readings on Emoncms with a view to calculating approximate heat flux from my Immersun.</p>
<p>My problem is that each temperature input is in the form 3010 where the actual temperature would be 30.10C. &nbsp;So each input is multiplied by 0.01 to scale them. &nbsp;The trouble is when I try to add them together I end up with one temperature&nbsp;such as 30.1C added to the unscaled input which might be 4050. &nbsp;This is clearly won&#39;t compute. &nbsp;So how to I do it? &nbsp;Do I need to create a dummy feed and log the unscaled temperatures just so I can add them together?? &nbsp;Seems a bit wasteful if that&#39;s the case. &nbsp;I suppose I could do it in the jeenode too but again it seems a bit obtuse :)</p>
<p>Thanks in advance. &nbsp;Here&#39;s hoping I can contribute to the community in the future.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3101.html" class="topic-previous" title="Go to previous forum topic">‹ ready-to-go SD card image</a>
              <a href="3121.html" class="topic-next" title="Go to next forum topic">Incorrect remote server details ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-16026"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Getting the average of two feeds in Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Tue, 29/10/2013 - 22:46.</div>
    <div class="content">
     <p>Hi.</p>
<p>I&#39;m not so familiar with the processing, but you seem to be in a corner case that was not thought of.</p>
<p>Could this be a workaround ?</p>
<p>&nbsp;</p>
<p>Input 1:</p>
<p>x 0.01</p>
<p>Log to feed -&gt; Temp 1</p>
<p>x 100</p>
<p>+ Input 2</p>
<p>x 0.01</p>
<p>Log to feed -&gt; Average</p>
<p>&nbsp;</p>
<p>Input 2 :</p>
<p>x 0.01</p>
<p>Log to feed -&gt; Temp 2</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16035"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4611.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="deeaitch&#039;s picture" title="deeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Getting the average of two feeds in Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/4611.html" title="View user profile.">deeaitch</a> on Wed, 30/10/2013 - 09:59.</div>
    <div class="content">
     <p>Jerome,</p>
<p>Brilliant. &nbsp;That works a treat.</p>
<p>Am I using heat flux right? &nbsp;I multiply average temperature by the volume of my tank in litres then apply heat flux? &nbsp;Should I use a long logging interval to better see small changes?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16038"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Getting the average of two feeds in Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Wed, 30/10/2013 - 11:13.</div>
    <div class="content">
     <p>Hi.</p>
<p>Glad it works.</p>
<p>I don&#39;t know heat flux, I don&#39;t see it in the <a href="http://emoncms.org/site/docs/inputprocessing">docs</a>. If in doubt, you may have a look in the code...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16044"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Getting the average of two feeds in Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 30/10/2013 - 17:19.</div>
    <div class="content">
     <p>Here is more on the heat flux&nbsp;http://harizanov.com/2012/05/measuring-the-solar-yield/</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16164"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4611.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="deeaitch&#039;s picture" title="deeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Getting the average of two feeds in Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/4611.html" title="View user profile.">deeaitch</a> on Mon, 04/11/2013 - 22:08.</div>
    <div class="content">
     <p>Hi Martin,</p>
<p>Still no luck with it but it&#39;s not important. &nbsp;I have 2 of your Funky v2s and they are just awesome. &nbsp;Do you know when you&#39;ll have more available?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16170"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Getting the average of two feeds in Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Tue, 05/11/2013 - 05:32.</div>
    <div class="content">
     <p>I seem not to have enough time lately and building just one takes me an hour. I was thinking of organizing a batch build of 100pcs of the new v3, but never got there as it requires some investment in both time and money. suggestions on how to move the project forward are welcome :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16176"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4611.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="deeaitch&#039;s picture" title="deeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Getting the average of two feeds in Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/4611.html" title="View user profile.">deeaitch</a> on Tue, 05/11/2013 - 15:05.</div>
    <div class="content">
     <p>Ouch, that&#39;s a lot of work. &nbsp;I can see how you&#39;ll never get rich that way. &nbsp;What you need is for people to preorder and then as you say have a batch made for you. &nbsp;You could do it on a forum, or even better you could start a <a href="http://www.kickstarter.com/">Kickstarter </a>campaign. &nbsp;I for one would order at least another 5, maybe more.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3049"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-gPfDzC1jhV0bSIlc4RA1a9LRCRWY6obOsz5otyUKc98" value="form-gPfDzC1jhV0bSIlc4RA1a9LRCRWY6obOsz5otyUKc98"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
