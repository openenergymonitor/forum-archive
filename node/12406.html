<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12406 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:54:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Periodically getting odd temperature readings | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Periodically getting odd temperature readings</h3>
        <span class="submitted">Submitted by <a href="../user/9704.html" title="View user profile.">ossiejnr</a> on Sat, 26/03/2016 - 16:02</span>
        <div class="content"><p>Hi,</p>
<p>I&#39;ve got a temperature sensor attached to an emonTX3&nbsp;and it was providing accurate readings when it was powered by the AC adapter. But now I&#39;ve moved it to a location where it needs to be battery powered and now it periodically provides readings without the decimal place, which obviously then screws up the charting (see sample image).&nbsp;</p>
<p>Anybody have any idea how best to get around this?</p>
<p>I&#39;m using a emonPI to forward this data to a self hosted emonCMS setup running on Linux using the&nbsp;9.4&nbsp;2016.03.15 build.</p>
<p>Thanks</p>
<p>Chris</p>
<p><img alt="" src="../sites/default/files/temp_0.jpg" /></p>
<p><em>Edit - moved pic to OEM - Moderator, BT</em><br />
<em>Please upload your image directly to the OEM site, i.e. don&#39;t use pictures linked to third party sites</em><br />
&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12418.html" class="topic-previous" title="Go to previous forum topic">‹ EMONTH slow response</a>
              <a href="12409.html" class="topic-next" title="Go to next forum topic">Bargraph data wrong ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-40631"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Periodically getting odd temperature readings</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 26/03/2016 - 19:43.</div>
    <div class="content">
     <p>&quot;<em>readings without the decimal place&quot;</em><br />
Are you absolutely certain that is exactly what is happening, or does it just look as if the scaling is about 10 times what you expect?&nbsp;<br />
Which sketch is your emonTx running, and what version emonTx and radio module do you have?<br />
What batteries are you using?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40669"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9704.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ossiejnr&#039;s picture" title="ossiejnr&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Periodically getting odd temperature readings</h3>

    <div class="submitted">Submitted by <a href="../user/9704.html" title="View user profile.">ossiejnr</a> on Mon, 28/03/2016 - 12:02.</div>
    <div class="content">
     <p>I&#39;m absolutely sure that is what is happening, I&#39;ve got raw records ....I do have two emonTxs and two emonBase stations because the distance between the TXs means they can&#39;t always commuicate. I wondered if this could be causing an issue...so I disabled one of the base&#39;s and it appears to have resulted in more accurate temperature readings.....</p>
<p>BUT, the VMS recording is then being send without a decimal place....so there must be something wrong in the TX or Base codebase. &nbsp;In the example below from the log you can see the value&nbsp;24626 for the voltage should actually be 246.26 - the screenshot shows it report on the emoncms (from the emonBase).</p>
<pre style="width:80%;overflow: scroll;">

2016-03-28 11:48:48,077 DEBUG RFM2Pi 9113 Timestamp : 1459165728.07 
2016-03-28 11:48:48,077 DEBUG RFM2Pi 9113 From Node : 8 
2016-03-28 11:48:48,078 DEBUG RFM2Pi 9113 Values : [-3819, -2446, -2046, 0, 24626, 3000, 3000, 3000, 3000, 3000, 3000, 1, 0] 
2016-03-28 11:48:48,079 DEBUG RFM2Pi 9113 RSSI : -81 
2016-03-28 11:48:48,080 INFO RFM2Pi Publishing: emonhub/rx/8/values -3819,-2446,-2046,0,24626,3000,3000,3000,3000,3000,3000,1,0 
2016-03-28 11:48:48,082 INFO RFM2Pi Publishing: emonhub/rx/8/rssi -81 
2016-03-28 11:48:48,084 DEBUG RFM2Pi 9113 adding frame to buffer =&gt; [1459165728, 8, -3819, -2446, -2046, 0, 24626, 3000, 3000, 3000, 3000, 3000, 3000, 1, 0, -81] 
2016-03-28 11:48:48,085 DEBUG RFM2Pi 9113 Sent to channel&#39; : ToEmonCMS 
2016-03-28 11:48:50,099 DEBUG RFM2Pi 9114 NEW FRAME : OK 7 25 17 1 17 40 17 0 0 203 1 100 0 184 11 184 11 184 11 184 11 184 11 1 0 0 0 (-78) 
2016-03-28 11:48:50,104 DEBUG RFM2Pi 9114 Timestamp : 1459165730.1 
2016-03-28 11:48:50,104 DEBUG RFM2Pi 9114 From Node : 7 
2016-03-28 11:48:50,105 DEBUG RFM2Pi 9114 Values : [4377, 4353, 4392, 0, 4.59, 10, 300, 300, 300, 300, 300, 1] 2016-03-28 11:48:50,106 DEBUG RFM2Pi 9114 RSSI : -78 
2016-03-28 11:48:50,107 INFO RFM2Pi Publishing: emonhub/rx/7/values 4377,4353,4392,0,4.59,10,300,300,300,300,300,1 
2016-03-28 11:48:50,109 INFO RFM2Pi Publishing: emonhub/rx/7/rssi -78 
2016-03-28 11:48:50,112 DEBUG RFM2Pi 9114 adding frame to buffer =&gt; [1459165730, 7, 4377, 4353, 4392, 0, 4.59, 10, 300, 300, 300, 300, 300, 1, -78]
</pre><p><img alt="" src="../sites/default/files/voltage.png" style="width: 300px; height: 186px;" /></p>
<p>I don&#39;t have a UART cable to connect the emonTX to check on the sketch version, they were purchased in the last 2 weeks from the online store, so I can only assume they are up to date. If there is a way to tell the version without a UART cable please let me know.</p>
<p>Any ideas greatly received.</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40679"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Periodically getting odd temperature readings</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/03/2016 - 15:52.</div>
    <div class="content">
     <p>Normally, all&nbsp;values are transmitted as integers. You can download the sketch from Github and look at the code. Powers are sent in watts, voltage is sent as Vrms*100&nbsp;and temperature as&nbsp;temp*10. So that is neither&nbsp;a mistake nor a fault.</p>
<p>&nbsp;You can also look at the emonhub.conf file where you should see it being corrected by the multiplier constant &quot;scales = 1,1,1,1,0.01,0.1,0.1 ...&quot; etc. So there&#39;s some misunderstanding there.</p>
<p>But Node 8&nbsp;<strong>isn&#39;t</strong>&nbsp;sending the wrong values: I can&#39;t see the raw numbers for Node 8, they&#39;re cut off the top, but it is showing &quot;3000&quot; as the&nbsp;<span style="line-height: 20.8px;">&quot;failed sensor&quot; value, which should be scaled to 300.0 so it would appear that&nbsp;</span><span style="line-height: 1.6;">it</span><span style="line-height: 1.6;"> is the scaling in </span>emonHub<span style="line-height: 1.6;">&nbsp;that is wrong (at least in the snip you posted)</span><span style="line-height: 1.6;">. I think y</span><span style="line-height: 1.6;">ou need to check the </span><span style="line-height: 1.6;">scal</span><span style="line-height: 1.6;">ing</span><span style="line-height: 1.6;"> for Node 8 in emoncms.conf.</span></p>
<p><span style="line-height: 1.6;">But I&#39;ve no idea why that should be changing intermittently, unless the two bases -&nbsp;emonPi&#39;s -&nbsp;can both receive both&nbsp;nodes&nbsp;and that one emonTx is sometimes received by one and sometimes by the other, and they have different scaling values set.</span></p>
<p><span style="line-height: 1.6;">If you have&nbsp;one node specification in&nbsp;each base, that base will only receive and forward the data from that node.</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40682"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9704.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ossiejnr&#039;s picture" title="ossiejnr&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Periodically getting odd temperature readings</h3>

    <div class="submitted">Submitted by <a href="../user/9704.html" title="View user profile.">ossiejnr</a> on Mon, 28/03/2016 - 17:48.</div>
    <div class="content">
     <p>So I found the issue - thank you for your help. Basically I&#39;d set one base up with:</p>
<p>[[7]]<br />
&nbsp; &nbsp;nodename = solar<br />
&nbsp; &nbsp;[[[rx]]]<br />
&nbsp; &nbsp; &nbsp; names = grey, black, brown, power4, vrms, temp1, temp2, temp3, temp4, temp5, temp6, pulse<br />
&nbsp; &nbsp; &nbsp; datacodes = h,h,h,h,h,h,h,h,h,h,h,L<br />
&nbsp; &nbsp; &nbsp; scales = 1,1,1,1,0.01,0.1,0.1, 0.1,0.1,0.1,0.1,1<br />
&nbsp; &nbsp; &nbsp; units =W,W,W,W,V,C,C,C,C,C,C,p</p>
<p>and the other with:</p>
<p>[[8]]<br />
&nbsp; &nbsp;nodename = home<br />
&nbsp; &nbsp;[[[rx]]]<br />
&nbsp; &nbsp; &nbsp; names = grey, black, brown, power4, vrms, temp1, temp2, temp3, temp4, temp5, temp6, pulse<br />
&nbsp; &nbsp; &nbsp; datacodes = h,h,h,h,h,h,h,h,h,h,h,L<br />
&nbsp; &nbsp; &nbsp; scales = 1,1,1,1,0.01,0.1,0.1, 0.1,0.1,0.1,0.1,1<br />
&nbsp; &nbsp; &nbsp; units =W,W,W,W,V,C,C,C,C,C,C,p</p>
<p>But both can see each emonTX occasionally, not always, hence two bases.....without the other config, it still forwards the data on to the emonCMS&nbsp;even for nodes not in the configuration (which strikes me as odd). Anyway, by adding a node 7 and node 8 in both configs, they are both transmitting with the correct scaling factor.</p>
<p>Thank you for your help!</p>
<p>Now I just need to figure out why the 3 CT clips aren&#39;t reporting their values correctly, especially when operating in reverse.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40686"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Periodically getting odd temperature readings</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/03/2016 - 19:25.</div>
    <div class="content">
     <p><em>&quot;Now I just need to figure out why the 3 CTs...&quot;&nbsp;</em></p>
<p>&quot;names = grey, black, brown...&quot;<br />
That&#39;s worrying. You&#39;re not trying to measure the real powers of a 3-phase system with a single-phase off-the-shelf sketch, are you? Because&nbsp;you never will. Read the piece in Resources &gt; Building Blocks about 3-phase power.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40688"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9704.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ossiejnr&#039;s picture" title="ossiejnr&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Periodically getting odd temperature readings</h3>

    <div class="submitted">Submitted by <a href="../user/9704.html" title="View user profile.">ossiejnr</a> on Mon, 28/03/2016 - 19:32.</div>
    <div class="content">
     <p>Yes I am but for now I was trying to use&nbsp;apparent&nbsp;rather than real power but it appears like the watts are drastically out for two of the phases.....I know that I&#39;m going to have to add two other TXs and two AC adapters to measure the 3 lines correctly.....was just hoping to see if this worked well enough to start with.....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40691"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Periodically getting odd temperature readings</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/03/2016 - 21:16.</div>
    <div class="content">
     <p>You will get better, but not completely accurate, results with the 3-phase sketch. It uses a &#39;fiddle&#39; to derive a best guess at the voltages of the two unmonitored phases. If the phase voltages are accurately balanced, it should be fairly close.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12406"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Asq_jOVcpZJk8cotktBKRAb3me6upyTnKwWQV1GKjXA" value="form-Asq_jOVcpZJk8cotktBKRAb3me6upyTnKwWQV1GKjXA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
