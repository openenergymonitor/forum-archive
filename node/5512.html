<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5512 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:03:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>3-phase EmonTX? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">3-phase EmonTX?</h3>
        <span class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 04/08/2014 - 11:19</span>
        <div class="content"><p>On the forum thread <a href="3937.html">emonPi early prototype - ideas?</a>&nbsp; <a href="../user/5462.html">michaeljquinn</a> wrote on Sun, 03/08/2014 - 07:33:</p>
<p>&quot;Really looking forward to the EmonTx version for the pi, although, would love more CT inputs - was wondering if there are any opportunities to multiplex CTs ?&quot;</p>
<p><a href="../user/3149.html">boelle</a> responded on Sun, 03/08/2014 - 10:40.</p>
<p>&quot;I tend to agree, native support for 3 phase would not harm anyone, and now I can hear people shout 3 phase is not so common in the UK I know, but the world is not a bottomless black pit outside the UK :-D</p>
<p>EDIT, and by 3phase native I mean 3 ct and 3ac. I know you can calc the 2 other ac&#39;s but that is not native, just a &quot;hack&quot; at best.&quot;</p>
<p>I added:</p>
<p>&quot;You really want at least 9 analogue inputs for 3-phase working: 3 voltages, 3 &#39;grid&#39; currents and 3 &#39;PV&#39; currents. A few spares for individual appliances would be nice too.</p>
<p>Multiplexing CTs might be problematical if you need continuous measurement, which you will if you have one of the burst-mode energy diverters, I think a fairly fast ADC and a moderately powerful processor is required.&quot;</p>
<p><a href="../user/5027.html">Eric_AMANN</a> wrote on Sun, 03/08/2014 - 20:54:</p>
<p>&quot;Regarding the three phase, I am also looking forward having a node with 3 phase native (3CT+3AC) but ... I don&#39;t think it&#39;s relevant for the EmonPi.&nbsp; According to me, the EmonPi should remain a node as simple and as cheap as possible to be deployed broadly. The three phase should be supported on a EmonTX-3phase version.&quot;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5768.html" class="topic-previous" title="Go to previous forum topic">‹ Monitoring a 3-phase installation</a>
              <a href="5714.html" class="topic-next" title="Go to next forum topic">Diverting surplus PV Power: PLL using emonTx V3 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22902"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4067.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4067.jpg" alt="stevenma&#039;s picture" title="stevenma&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/4067.html" title="View user profile.">stevenma</a> on Tue, 05/08/2014 - 09:28.</div>
    <div class="content">
     <p>I would like to add my support for a 3-phase EmonTx.</p>
<p>We have a medium size office building that has a 100Amp&nbsp;rated 3-phase supply and two 3-phase SolarMax PV Inverters totalling&nbsp;22kWp&nbsp;across two rooves, south &amp; west. &nbsp;I would suggest that this is fairly typical in the UK and around the World.</p>
<p>We also have a gas meter with reed switch and water meter than can probably also have a reed switch fitted so a minimum of two pulse inputs would be good.</p>
<p>So 3-voltages, 3 consumption CTs and 3 generation CTs&nbsp;and at least two pulse inputs would be good.</p>
<p>We also have, from a legacy Trend Building Management System, a Belden screened single twisted pair cable run back to a central point from most offices that I&#39;d like to try with&nbsp;OneWire temperature appreciating that a bus rather than star network is best.</p>
<p>Even with the single phase EmonTx&nbsp;it would be good to have a minimum of two pulse inputs as most domestic premises will have a water meter and gas meter. &nbsp;If there were 4 pulse inputs one could include the electricity and generation meters too.</p>
<p>How about built in modular sketch support for uploading to PVoutput and the like too?</p>
<p>Just my pennyworth. &nbsp;Keep up the good work.</p>
<p>Regards,</p>
<p>Steve</p>
<p>UK</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23530"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Tue, 02/09/2014 - 20:32.</div>
    <div class="content">
     <p>Hi,</p>
<p>Now, we have to use a specific EmonTX for each phase.<br />
	For some applications, it makes me &quot;waste&quot; EmonTXs.<br />
	By example, if I want to monitor the 11 following circuits, I need 5 EmonTXs :<br />
	&nbsp;&nbsp;&nbsp; - circuit 1&nbsp; : phase 1 -&gt; EmonTX1-CT1<br />
	&nbsp;&nbsp;&nbsp; - circuit 2&nbsp; : phase 2 -&gt; EmonTX2-CT1<br />
	&nbsp;&nbsp;&nbsp; - circuit 3&nbsp; : phase 2 -&gt; EmonTX2-CT2<br />
	&nbsp;&nbsp;&nbsp; - circuit 4&nbsp; : phase 2 -&gt; EmonTX2-CT3<br />
	&nbsp;&nbsp;&nbsp; - circuit 5&nbsp; : phase 2 -&gt; EmonTX2-CT4<br />
	&nbsp;&nbsp;&nbsp; - circuit 6&nbsp; : phase 2 -&gt; EmonTX3-CT1<br />
	&nbsp;&nbsp;&nbsp; - circuit 7&nbsp; : phase 3 -&gt; EmonTX4-CT1<br />
	&nbsp;&nbsp;&nbsp; - circuit 8&nbsp; : phase 3 -&gt; EmonTX4-CT2<br />
	&nbsp;&nbsp;&nbsp; - circuit 9&nbsp; : phase 3 -&gt; EmonTX4-CT3<br />
	&nbsp;&nbsp;&nbsp; - circuit 10 : phase 3 -&gt; EmonTX4-CT4<br />
	&nbsp;&nbsp;&nbsp; - circuit 11 : phase 3 -&gt; EmonTX5-CT1</p>
<p>I&#39;m wondering whether it would be feasible to use only 3 interconnected EmonTX to monitor those 11 circuits.</p>
<p>&nbsp;&nbsp;&nbsp; - circuit 1&nbsp; : phase 1 -&gt; EmonTX1-CT1<br />
	&nbsp;&nbsp;&nbsp; - circuit 2&nbsp; : phase 2 -&gt; EmonTX2-CT1<br />
	&nbsp;&nbsp;&nbsp; - circuit 3&nbsp; : phase 2 -&gt; EmonTX2-CT2<br />
	&nbsp;&nbsp;&nbsp; - circuit 4&nbsp; : phase 2 -&gt; EmonTX2-CT3<br />
	&nbsp;&nbsp;&nbsp; - circuit 5&nbsp; : phase 2 -&gt; EmonTX2-CT4<br />
	&nbsp;&nbsp;&nbsp; - circuit 6&nbsp; : phase 2 -&gt; EmonTX1-CT2<br />
	&nbsp;&nbsp;&nbsp; - circuit 7&nbsp; : phase 3 -&gt; EmonTX3-CT1<br />
	&nbsp;&nbsp;&nbsp; - circuit 8&nbsp; : phase 3 -&gt; EmonTX3-CT2<br />
	&nbsp;&nbsp;&nbsp; - circuit 9&nbsp; : phase 3 -&gt; EmonTX3-CT3<br />
	&nbsp;&nbsp;&nbsp; - circuit 10 : phase 3 -&gt; EmonTX3-CT4<br />
	&nbsp;&nbsp;&nbsp; - circuit 11 : phase 3 -&gt; EmonTX1-CT3</p>
<p>
	<strong>A first solution</strong> is a variant of what MArtinR did <a href="1170.html">here</a>.<br />
	&nbsp;&nbsp; - three EmonTXs are interconnected by I2C and driven by a master EmonTX<br />
	&nbsp;&nbsp; - each EmonTX would measure the voltage on a different phase and then it would report the value to the master EmonTX<br />
	&nbsp;&nbsp; - each EmonTX would measure the current on every CT and then it would report the values to the master EmonTX<br />
	&nbsp;&nbsp; - all sampling would be done by the master EmonTX that will then send data by RF</p>
<p><strong>A second solution :</strong><br />
	&nbsp;&nbsp; - three EmonTXs interconnected by I2C<br />
	&nbsp;&nbsp; - each EmonTX would measure the voltage on a different phase and then&nbsp; it would share the value with the two others EmonTXs. So every EmonTX would know the three voltage value<br />
	&nbsp;&nbsp; - each EmonTX would sample its own CT and then it would send data by RF</p>
<p>I have no idea if these 2 solutions can be implemented in term of synchronization and sampling rate, ...<br />
	But if it is feasible, a 3-phase EmonTX version is not really needed.</p>
<p>EDIT : I guess only discrete sampling would be possible but I&#39;m not sure.</p>
<p>Let me know,</p>
<p>Eric</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23534"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 02/09/2014 - 22:55.</div>
    <div class="content">
     <p>Eric, I think you might be right with the discrete sampling part. If two or three emonTx&#39;s are going to share the instantaneous sample values, the ADC conversions have to be synchronised, otherwise it looks like a phase angle shift. But there could be a way: If each emonTx is phase locked to mains, it implies that that ADC conversions take place at the same instant (if you get the number of sample sets per cycle to be a multiple of 3, and assuming negligible jitter). So it might just be possible, but you still have the overhead of sharing the voltage values with the wire I<sup>2</sup>C library to take into account.</p>
<p>It would be possible - conceptually - to connect any number of emonTx&#39;s. Three would be &quot;phase masters&quot; measuring and transmitting the voltage samples to all, the rest would only phase lock to their own voltage input and listen to the voltage samples from the masters and use whichever one was appropriate for each CT. (All those on the same phase could of course share the ac adapter, and they&#39;d all need to use a common 5 V dc supply for the I<sup>2</sup>C bus to work.)&nbsp; It would certainly be a very attractive solution if it could be made to work.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23589"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Fri, 05/09/2014 - 19:51.</div>
    <div class="content">
     <p>Hi,</p>
<p>Well, this sounds promising for 3-phase users !</p>
<p>Moreover this concept of voltage sharing can also be applied to 1-phase system. It will allow to save AC adapters,&nbsp; DC adapters and RF module, when using a high number of EmonTXs.</p>
<p>I will have a look on MartinR&#39;s code to see how EMonTXs can communicate over I2C.</p>
<p>Eric</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23591"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 05/09/2014 - 23:15.</div>
    <div class="content">
     <p>why not make a V4 that is just a V3 but with more voltage input so it can calc&nbsp;3 phase?</p>
<p>&nbsp;</p>
<p>it could not add much to the cost, only what is needed to add 2 voltage circuits...&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23594"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 05/09/2014 - 23:36.</div>
    <div class="content">
     <p>My <a href="http://mk2pvrouter.co.uk/61101.html">3-phase PCB</a> has the same processor and RF capability as an emonTx, and can measure voltage and current on each phase :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23597"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Sat, 06/09/2014 - 08:27.</div>
    <div class="content">
     <p><em>&quot;why not make a V4 that is just a V3 but with more voltage input so it can calc 3 phase?&quot;</em></p>
<p>With such a design, I guess it would be possible to tell in the arduino sketch which CT is on which phase. Can someone confirm that point ? (for discrete sampling and continuous sampling). If it is not the case, this V4 would not be very attractive.</p>
<p>Eric</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 06/09/2014 - 12:15.</div>
    <div class="content">
     <p><em>&quot;it would be possible to tell in the arduino sketch which CT is on which phase&quot;</em> only if you can make assumptions about the phase angle of the load. But the problem as I see it with the Atmel ATmega 328P is you could measure only one quantity - either whole-house load or PV generation, since there are only 6 analogue inputs. That is not a limitation for Robin&#39;s energy diverter, which just needs to measure whole-house nett energy transfer. I&#39;d suggest you need at least 9 inputs, giving one voltage and two current measurements on each phase, to approach the functionality of the emonTx.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23686"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Tue, 09/09/2014 - 19:32.</div>
    <div class="content">
     <p>Hi,</p>
<p>Considering this limited number of input, a V4 that is just a V3 but with 3 voltage seems not interesting as it would need a lot of AC adapters (one by CT ?).&nbsp; 11 AC adapters (instead of 5)&nbsp; in my study case above ...</p>
<p>If one can interconnect several EmonTX to share the voltage samples, it would not require any new hardware and it will provide a very flexible solution. If it could be made to work...</p>
<p>Eric</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23689"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Tue, 09/09/2014 - 20:41.</div>
    <div class="content">
     <p>you would only need 1 ac adapter for each phase.... and 1 ct each phase if you only want to monitor the grid wires</p>
<p>some like to monitor also lines from solar cells... for that 1 ct&nbsp;extra for each phase is needed... but no extra ac adapters should be needed</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23693"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Wed, 10/09/2014 - 05:38.</div>
    <div class="content">
     <p>Robert,</p>
<p>There is a misunderstanding. I totally agree that, <u>in theory,</u> one AC adapter is needed for each phase + 1 CT (or 2 CT for people having solar cells) for each phase are needed.</p>
<p>My point is : if one have an EmonTX V4 with 3 voltages and a maximum of 3 CTs, it would require <u>in practice</u> one AC adapter for each CT. As an example, people who wants to monitor the grid and the PV generation will need two such EmonTX V4, so 6 AC adapters.</p>
<p>That why, according to me, a V4 that is just a V3 with three voltage is not interesting.</p>
<p>Eric</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23701"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 10/09/2014 - 12:30.</div>
    <div class="content">
     <p><em>&quot;My point is : if one have an EmonTX V4 with 3 voltages and a maximum of 3 CTs, it would require in practice one AC adapter for each CT. As an example, people who wants to monitor the grid and the PV generation will need two such EmonTX V4, so 6 AC adapters.<br />
	That why, according to me, a V4 that is just a V3 with three voltage is not interesting.</em>&quot;</p>
<p>I agree. 6 ac adapters is prohibitive. A V4 such as that would be so limited in its appeal that it would be hardly worth the trouble. Surely it would be much better to go to a more powerful processor that supported many more analogue inputs, plus as suggested by Stevenma above, two pulse inputs. [Within the last couple of days, I saw someone had done just that with an Arduino board and prototype shield or similar. I can&#39;t find it now.]</p>
<p>The only way that I can see a 6-input V4 being useful is if it can be assembled with either 3 voltage + 3 current inputs; or 2 voltage + 4 current inputs; or 1 voltage + 5 current inputs; or 6 current inputs; and it must communicate so that two or more units can work synchronously sharing data.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23707"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 10/09/2014 - 13:27.</div>
    <div class="content">
     <p>Bill Thomson posted a link to this 12-input Arduino Due monitor a while ago: <a href="http://boredomprojects.net/index.php/projects/home-energy-monitor" title="http://boredomprojects.net/index.php/projects/home-energy-monitor">http://boredomprojects.net/index.php/projects/home-energy-monitor</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23711"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Wed, 10/09/2014 - 17:23.</div>
    <div class="content">
     <p>Phew that&#39;s quite a project.&nbsp; A couple of observations:</p>
<p>With so many input sensors, having a single buffered reference would have saved a lot of voltage divider pairs.</p>
<p>I&#39;m wondering whether the 12-bit ADC is likely to make any noticeable difference when the processor is spending so little of its time measuring each channel.&nbsp; With the &#39;discrete&#39; sketch, each channel is measured in sequence, so the ADC can only be sampling each channel for a few percent of the time.&nbsp;</p>
<p>With the larger and hopefully faster processor, this would seem a good application for multi-channel &quot;continuous monitoring&quot; code.&nbsp; But it require a bit more work ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23717"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Wed, 10/09/2014 - 19:09.</div>
    <div class="content">
     <p>To get the three voltages, one may imagine a dedicated node that would share the voltage samples with the other nodes which would be only responsible for getting the current. This is how <a href="http://mv.omegawatt.fr/en/raccordement-electrique-simplifie.php">this proprietary solution</a> works. This is done by&nbsp; a DIN rail concentrator that get the voltage samples and power the current nodes. More details <a href="http://mv.omegawatt.fr/en/caracteristiques-mesure-electrique-multivoies.php">here</a>.</p>
<p>With this architecture, having only 6 inputs per nodes is fine. Moreover, it would provide a very flexible solution that will meet all needs whatever the total number of CT required (3, 6, or more). This architecture is also very appreciable when using a large number of CT in term of physical integration and also to avoid RF collisions.</p>
<p>&nbsp;</p>
<p>Another very important point not discussed here before : how to get the three voltages without invasive action&nbsp; ?&nbsp; On my last 3 phase project, I got an available outlet with the 4 wires (N+3L) but it is not always the case.</p>
<p>&nbsp;</p>
<p>Eric</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23726"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Wed, 10/09/2014 - 20:57.</div>
    <div class="content">
     <p><em><em>Another very important point not discussed here before : how to get the three voltages without invasive action&nbsp; ?&nbsp; On my last 3 phase project, I got an available outlet with the 4 wires (N+3L) but it is not always the case.</em></em></p>
<p>This is a very important point in all threads about three phase systems! You never have three normal outlets inside the distribution. And even if there is a three-phase CEE outlet (not normally <strong>inside </strong>the distribution box, too) , how do you want to get the standard wall transformers into that?</p>
<p>I have mentioned it a few times but nobody seems to care. And if you have to ask an electrician to fit outlets, you can just as well ask him to fit a decent three-phase meter with readout. This was the reason why I started this thread just a few hours ago: <a href="5743.html">http://openenergymonitor.org/emon/node/5743 </a></p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23727"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Wed, 10/09/2014 - 21:14.</div>
    <div class="content">
     <p>well i can only speak for myself... but i have a 3 phase outlet behind the stove... and behind clothes washer... i could just connect some female extension sockets on a lenght of wire on each phase....</p>
<p>put i have mounted 3 normal outlets above the fuse box.... have 1 years worth of training.... sure might be illegal... but its as say as it can be... each socket is marked with what phase it belongs to and they are all with earth/safety</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23730"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 10/09/2014 - 21:26.</div>
    <div class="content">
     <p>Bo, the concern with having outlets belonging to more than one phase in a single room is it dramatically increases the risk of a phase-phase electric shock, which has a correspondingly greater risk of resulting in a fatality.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23731"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Wed, 10/09/2014 - 21:41.</div>
    <div class="content">
     <p>This is also the reason why you <strong>not </strong>normally have plug type three-phase outlets behind stoves but a fixed cabling! Same for continuous flow water heaters. I have very seldom seen CEE three-phase outlets in private households.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23737"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Thu, 11/09/2014 - 07:23.</div>
    <div class="content">
     <p><em>I&#39;m wondering whether the 12-bit ADC is likely to make any noticeable difference when the processor is spending so little of its time measuring each channel.</em></p>
<p>I think those SAM based Atmel devices like used in the Due would be much &nbsp;better for you guys. &nbsp;Not only 12-bit resolution, but much faster conversion times... from memory in the order of 1usec Vs 100usec. &nbsp;Plus there are 2 ADCs. &nbsp;So if you put the coding work in, you ought to be able to get roughly&nbsp;200x the sampling rate compared to an&nbsp;AVR device.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23739"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Thu, 11/09/2014 - 07:49.</div>
    <div class="content">
     <p>Jorg, I like your solution for its simplicity but it guess it can&#39;t be generalized for users who wants to measure many circuits. It would require to install several 3-phase energy monitors in the fuse box and that&#39;s just impossible.</p>
<p>Well, when reading again all comments, I &#39;m figuring out there are two VERY different needs for 3-phase</p>
<p>&nbsp;&nbsp; 1. many people just want to monitor the 3 lines from the grid (and eventually the PV generation).</p>
<p>&nbsp;&nbsp; 2. few others people (like me) want to measure many different currents to monitor electricity usage in office building, education building, industrial building, data center, ...</p>
<p>According to me, we have plenty of&nbsp; solutions for the first need like the ones from <a href="5743.html">J&ouml;rg,&nbsp;</a><a href="1170.html">MartinR</a> or <a href="http://mk2pvrouter.co.uk/61101.html">Robin</a>. For the second one, there is no suitable solutions.</p>
<p>&nbsp;</p>
<p>Regarding the risk of a phase-phase electric shock, the idea of a DIN rail unit who will be responsible for getting the voltage sample seems right ? It&#39;s invasive but not so much.</p>
<p>Eric &nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23744"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 11/09/2014 - 09:27.</div>
    <div class="content">
     <p><em><em>It would require to install several 3-phase energy monitors in the fuse box and that&#39;s just impossible.</em></em></p>
<p>Impossible, why? As a retrofit, this can be a problem. Adding small current clamps will be easier, but you still need quite a lot of space for the rest of the electronics. And any work done inside the distribution box should still be done by an electrician!</p>
<p>But you are right that there are a lot of people with very special requirements and these can hardly be fulfilled by a &#39;standard&#39; solution. The DIN rail voltage sensor unit is certainly a good solution, easy to do and comparatively easy to install.</p>
<p>J&ouml;rg.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23745"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 11/09/2014 - 09:28.</div>
    <div class="content">
     <p>Adding to Eric&#39;s list:</p>
<p>3. Those in the US who have a split-phase supply and need to monitor 2 lines.</p>
<p>(I&#39;m sure MartinR should not be in the first list, his &quot;full-fat&quot; monitor gives him 3 current channels per phase - definitely in the second category.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23755"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Thu, 11/09/2014 - 19:02.</div>
    <div class="content">
     <p>J&ouml;rg, I think that it&#39;s not possible in practice to install several 3-phase energy monitors (like the SDM630M) in the fuse box when one wants to monitor a lot of circuits (need 2).</p>
<p>The first reason is that it needs too much space in the fuse box. Most of time, I see very few available space on the rails.</p>
<p>The main issue is that this solution needs to redo a lot of connection in the fuse box (Correct me if I&#39;m wrong). When it&#39;s possible, it&#39;s a long work. To do it safely, you have to turn off the main power for a long time. This is just not possible in most of non-residential buildings (shop, office, factory, ...)</p>
<p>Eric</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23759"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Thu, 11/09/2014 - 20:23.</div>
    <div class="content">
     <p>Eric,</p>
<p>&nbsp;I think you are correct that in many situations, the installation is difficult and space is very limited. However, as J&ouml;rg points out, it can be equally problematic when you have all the CT&#39;s and associated electronics. It&#39;s always possible to mount the meter in a seperate box( with DIN rail in it) if there&#39;s no space in the distribution unit.</p>
<p>A word on safety ( Not directed at you Eric, but this thread is giving me the feeling that many people &#39;have a go&#39; at wiring in their own homes....)</p>
<p><span style="font-size: 12px;">&lt;SOAPBOX on....&gt; </span></p>
<p><span style="font-size: 12px;">I&#39;m a qualified electrician( but not practicing recently - my focus is energy mgmt) so I would always get an electrician who&#39;s practicing and has the latest standards training to install any wiring. I would never recommend you do wiring, if you are not an electrician. There are simple things.....e.g. if you don&#39;t fill the terminal sufficiently and prepare the cable end properly, and </span>overtighten<span style="font-size: 12px;"> the screw, you may crack or damage the copper and this can lead to arcing and/or an open circuit. Arcing of course can create heat and fire risk...</span></p>
<p><span style="font-size: 12px;">There are small details such as this that people don&#39;t </span>realise<span style="font-size: 12px;">. Adding equipment to an electrical installation can also change the </span>earth<span style="font-size: 12px;"> loop impedance and impact operation of safety equipment. Some people don&#39;t know how to match the fuse/</span>mcb<span style="font-size: 12px;"> ratings to the load that is downstream etc.... So, if folks are thinking about having to disconnect ANY electrical cables, there is no choice but to get an electrician involved - it&#39;s simply not worth the risk. Through all my electrical training, we were drilled with one top prioity&nbsp;&quot;Safety First&quot;. I&#39;m not exaggerating - electricity is deadly, and it&#39;s a living breathing entity that can destroy lives. I&#39;ve never had an electric shock by the way so I must be doing something right :-)</span></p>
<p>Forgive the off-thread rant, but we must all be advocates of Safety First... imho.</p>
<p><span style="font-size: 12px;">&lt;SOAPBOX off....&gt;</span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23760"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3-phase EmonTX?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Thu, 11/09/2014 - 20:36.</div>
    <div class="content">
     <p>Thank&#39;s for this reminder !&nbsp; I totally agree.</p>
<p>Safety is never off-topic</p>
<p>Eric</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5512"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form--IJWPL3PTWSP9tNLHDckeEkrxyXAoEjlNjw9oNYXk94" value="form--IJWPL3PTWSP9tNLHDckeEkrxyXAoEjlNjw9oNYXk94"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
