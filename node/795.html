<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/795 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:51:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>120v/60hz AC to 12v AC Divider/Software calibration | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">120v/60hz AC to 12v AC Divider/Software calibration</h3>
        <span class="submitted">Submitted by Guest on Wed, 04/07/2012 - 01:24</span>
        <div class="content"><p>I'm in North America (120v/60hz per pole) trying to calibrate the software for a 12v ac transformer. (I can't dig up a 9v)</p>
<p>The 12v transformer I have yields 13.7vac at 119vac and 13.4vac at 116vac. </p>
<p>Using a same 10k - 100k divider it should produce 1.25vac.&nbsp; Add the DC&nbsp;bias 2.5v for a max of 3.75v DC.</p>
<p>First is this correct?&nbsp; and if so what changes do I make to the EMON example app and/or calcVI to adjust it's range?</p>
<p>Thank you<br />
You all are an incredible resource!!!</p>
  <div class="forum-topic-navigation clear-block">
          <a href="579.html" class="topic-previous" title="Go to previous forum topic">‹ Power to kWh/d problem</a>
              <a href="790.html" class="topic-next" title="Go to next forum topic">Forum display font size wrong. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-5108"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 120v/60hz AC to 12v AC Divider/Software calibration</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 04/07/2012 - 10:21.</div>
    <div class="content">
     <p>The full theory behind the calculation of the calibration of the input components is here: <a href="https://learn.openenergymonitor.org/?redirect=measuring-voltage-with-an-acac-power-adapter" title="http://openenergymonitor.org/emon/buildingblocks/measuring-voltage-with-an-acac-power-adapter">http://openenergymonitor.org/emon/buildingblocks/measuring-voltage-with-...</a> and for the coefficients it is here: <a href="https://learn.openenergymonitor.org/?redirect=ct-and-ac-power-adaptor-installation-and-calibration-theory" title="http://openenergymonitor.org/emon/buildingblocks/ct-and-ac-power-adaptor-installation-and-calibration-theory">http://openenergymonitor.org/emon/buildingblocks/ct-and-ac-power-adaptor...</a></p>
<p>I'm afraid your understanding is a bit wobbly:&nbsp; &quot;Add the DC&nbsp;bias 2.5v for a max of 3.75v DC.&quot; isn't quite right.</p>
<p>But it looks as if your components are good. From &quot;Add the DC&nbsp;bias 2.5v&quot; I infer that you are using an Arduino running at 5 V (not an emonTx at 3.3 V).</p>
<p>Your transformer gives 13.7 V a.c - add say 5% for the highest possible system voltage = 14.38 V. This is divided down by 1/11 by the resistors to give 1.3 V rms, or 3.69 V peak-peak. This peak-peak voltage is well within the input range (0 - 5 V) of the Arduino so is OK, and all you have to do is adjust the calibration. (If that number had been close to 5 V, I would have gone on to check that you  had at least a further 5% in hand to allow for the bias chain resistor  tolerances, because if they were wrong, it would limit the range by  shifting the bias point away from the middle).</p>
<p>Your voltage calibration constant (from the second link above)&nbsp; =&nbsp; 119 * 11 / 13.7 = 95.547</p>
<p>You use this in the call to voltageTX</p>
<blockquote><pre>
ct1.voltageTX(<strong>95.547</strong>, 1.7);               // Voltage: calibration, phase_shift
</pre></blockquote>
<p>You should expect to have to change this because the calculation assumes the divider chain resistors are exact, in reality they will be &plusmn; 1 % or even &plusmn; 5 %, giving a possible 2% or 10% error for the voltage constant. The way you change it is measure the voltage with your meter and adjust the number to give you the same answer. The theoretical calibration is a good check that you have everything correct. If you have to change it outside the expected range, you should look for an error somewhere.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/795"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-GDpDs12wlO1Oy_0vqOSpfygrux8xO-1ejKVwz06i4L0" value="form-GDpDs12wlO1Oy_0vqOSpfygrux8xO-1ejKVwz06i4L0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
