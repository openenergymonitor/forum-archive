<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11048 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:56:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>RaspberryPi Emon base persistant data? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">RaspberryPi Emon base persistant data?</h3>
        <span class="submitted">Submitted by <a href="../user/8504.html" title="View user profile.">tomstephens89</a> on Wed, 29/07/2015 - 08:30</span>
        <div class="content"><p>Hi guys, I am new to the OpenEnergyMonitor system but I do however work for one of the biggest integration specialists &amp; product suppliers to the UK energy management &amp; building controls industry.</p>
<p>I got myself an emonTX&nbsp;v3 and the wireless board for the RPi + pre loaded SD card. All is working and I still can&#39;t believe how good and straight&nbsp;foward this is (especially compared to the commercial offerings we use).</p>
<p>I have a question though, am I correct in thinking that when using the Raspberry Pi as an emon Base (pre loaded sd card), that no data is stored persistantly? Reason I ask is because when I rebooted my RPi, I can&#39;t seem to find any of my data from yesterday. I do have a few inputs logging to feed.</p>
<p>Also, I looked at the SQL install and can&#39;t seem to see any Tables that contain the energy data?</p>
<p>Is this the case? If so its not a problem since I plan on developing an external service that leverages the emon base to fetch data from the tx&#39;s&nbsp;and log elsewhere anyway.</p>
<p>Also, great job on this product guys!</p>
<p>Cheers</p>
<p>Tom</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11056.html" class="topic-previous" title="Go to previous forum topic">‹ My Electric translation / language</a>
              <a href="11044.html" class="topic-next" title="Go to next forum topic">emonGLCD time update ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-32768"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RaspberryPi Emon base persistant data?</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 29/07/2015 - 09:22.</div>
    <div class="content">
     <p>Hi Tom, As you&#39;ve discovered,&nbsp;emonCMS&nbsp;is enabled by default on recent emonSD cards. emonCMS always persists data although not always to an SQL table.</p>
<p>Because the Pi runs from a SDcard&nbsp;the writes need to be reduced to lower the chance of a failing card, so the data is held in low overhead, unindexed&nbsp;&quot;feeds&quot; which can be found in the&nbsp;&quot;phpfina&quot;,&quot;phpfiwa&quot; and &quot;phptimeseries&quot; folders in &quot;data&quot;. these files are written to once per minute&nbsp;to reduce write activity.</p>
<p>emonHub&nbsp;is also included in the SDcard&nbsp;image and is&nbsp;a &quot;gateway&quot; to emoncms and can run totally read only and does not&nbsp;persist data directly, it forwards to one or multiple emoncms installs, remote or local. It buffers data in RAM if a network or server is down. It is designed to be modular in the way that it is the local base for a remote emoncms&nbsp;so there are many emonHubs&nbsp;reporting to a central emonCMS server,</p>
<p>The extended&nbsp;version&nbsp;of emoncms&nbsp;(ie not low-write for SDcard) can write data to SQL and has a lot more functionality and input processes that are not (currently) available to a Pi without installing a hdd so to get a picture of a model closer to your needs you could set up an &quot;extended&quot; emoncms server on another local&nbsp;machine and have emonHub forward the data across&nbsp;a network.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32769"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8504.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="tomstephens89&#039;s picture" title="tomstephens89&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RaspberryPi Emon base persistant data?</h3>

    <div class="submitted">Submitted by <a href="../user/8504.html" title="View user profile.">tomstephens89</a> on Wed, 29/07/2015 - 09:37.</div>
    <div class="content">
     <p>Hi Paul, thanks for the reply.</p>
<p>That answers my question and like I said, is not an issue since I only intend to use it as a hub to which an external application will receive data. Looking at your feed api, I will probably just make my application call the API of the low-write emon cms install on the pi and retrieve the values from each feed that way.</p>
<p>Where is that data folder?</p>
<p>Another quick question for you....</p>
<p>Whats the transmit power of the radio in the emonTX v3. I am trying to get an idea of maximum range that the pi can be from the tx. Obviously I can fit a big antenna to the module on the pi, but this is only going to be as good as the transmit power from the tx itself.</p>
<p>Any line of sight range testing results you can share?</p>
<p>I am currently running the TX in a cupboard where one of our 3 phase incomers resides and the pi is around 60ft away through two walls and up one floor.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32771"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RaspberryPi Emon base persistant data?</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 29/07/2015 - 10:10.</div>
    <div class="content">
     <p>One of the strengths of the OEM project is the options available and the way you can do your own thing with it, however based on what you&#39;ve told us the &quot;feed api&quot; method may not be the best way.</p>
<p>For a commercial remote install you want it to be as low-maintenence&nbsp;and reliable as possible, a forwarder only solution has less moving parts, a fixed on disc size and is extremely robust. emonHub&#39;s less robust predecessor earned the name &quot;the rock-solid gateway&quot; it really is a install and forget solution.</p>
<p>To be able to access via the feeds api you will also need to set up the&nbsp;server at each location with external access which will require a fixed ip and/or dns, you will then need a custom application that can systematically poll every install rather than just sitting back and watching the data arrive. it will also need to get the&nbsp;backlog if there is a network interruption etc</p>
<p>Plus, using a central emoncms you can&nbsp;<span style="line-height: 20.7999992370605px;">have one global&nbsp;</span><span style="line-height: 20.7999992370605px;">account or&nbsp;</span><span style="line-height: 1.6;">set up an account for each location, then</span><span style="line-height: 1.6;">&nbsp;if you want you can give your client read-only access to just </span>thier<span style="line-height: 1.6;">&nbsp;data and behind the server you can access all of the tables to get group information via a custom application.</span></p>
<p>Unfortunately&nbsp;I have never done any RF tests, I have quite a noisy environment and lots of obstacles, There is a lot of info regarding RF performance across the forum, the number of devices is also a factor once you have a lot of traffic collisions will be a factor.</p>
<p>The data is on a 3rd partition as the 2nd is read-only, that is mounted to&nbsp;/home/pi/data usually but it location is specified in the emoncms settings file, normally found at /var/www/emoncms/settings.php</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32772"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8504.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="tomstephens89&#039;s picture" title="tomstephens89&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RaspberryPi Emon base persistant data?</h3>

    <div class="submitted">Submitted by <a href="../user/8504.html" title="View user profile.">tomstephens89</a> on Wed, 29/07/2015 - 11:54.</div>
    <div class="content">
     <p>Hi Paul, Thanks again for the response.</p>
<p>With regards to shipping data off site, we typically do that in a different application, so the API call coming inward to the Pi will actually be coming from a device or server on site. The data is then posted off site via another service we have developed.</p>
<p>We could, long term, just use the hub aspect of openenergymonitor to get the values off the serial line, then write some python to post them outwards into an API of our own... Or like you said, if we just hosted an emoncms instance in one of our datacentres we could then configure the RPi to post its data out to that using the options in the hub config file as is. Im an IT infrastructure architect myself, so routing, static IP&#39;s etc is no problem!</p>
<p>Have to say, excellent looking product so far, since my first post we have just written a service to integrate data from emoncms into the Tridium Niagara AX Framework if you know what that is. (The most versatile building integration platform there is, used in 100,000&#39;s of installations).</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32785"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8504.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="tomstephens89&#039;s picture" title="tomstephens89&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RaspberryPi Emon base persistant data?</h3>

    <div class="submitted">Submitted by <a href="../user/8504.html" title="View user profile.">tomstephens89</a> on Wed, 29/07/2015 - 20:47.</div>
    <div class="content">
     <p>I have just noticed that no &#39;hour&#39; graphs seem to draw. 30 mins or less works fine. Is this a bug or something?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11048"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-SXOeg6rXO1Ztip6_dplY9xQV2S18xsPTOF-cBsmi07w" value="form-SXOeg6rXO1Ztip6_dplY9xQV2S18xsPTOF-cBsmi07w"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/11048 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:56:59 GMT -->
</html>
