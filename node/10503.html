<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10503 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:23:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>What is the aim of $max_node_id_limit | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">What is the aim of $max_node_id_limit</h3>
        <span class="submitted">Submitted by <a href="../user/11.html" title="View user profile.">cagabi</a> on Wed, 22/04/2015 - 09:11</span>
        <div class="content"><p>Hi there,</p>
<p>We are working on a module for EmonCMS that assigns&nbsp;node ids to nodes and we&#39;re wondering if&nbsp;there is any special reason to have a&nbsp;$max_node_id_limit.</p>
<p>$max_node_id_limit is set to 32 in settings.php. If it is not set there then the input&nbsp;module sets it to 32 by default.</p>
<p>The comment&nbsp;in settings.php says&nbsp;that $max_node_id_limit&nbsp;<em>Checks for limiting garbage data?</em></p>
<p>Does anybody know what does this mean? I guess it is to avoid people having to many nodes and keep their &quot;infrastructure&quot; tidy. But i also wonder if&nbsp;it has something to do with the number of nodes a Nanode can work with.</p>
<p>Cheers,</p>
<p>&nbsp; &nbsp; Carlos</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10470.html" class="topic-previous" title="Go to previous forum topic">‹ Pull data from my.currentcost.com or xivley.com into EmonCMS</a>
              <a href="10493.html" class="topic-next" title="Go to next forum topic">Calibration of Vrms on emontx v2.2 - question on coefficient ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-29852"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What is the aim of $max_node_id_limit</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 22/04/2015 - 09:22.</div>
    <div class="content">
     <p>The limit is set by JeeLib - 5 bits are available for the nodeID. You'll find details of the format of the message used to send the data by radio over at the JeeLabs website.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29861"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/11.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-11.jpg" alt="cagabi&#039;s picture" title="cagabi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What is the aim of $max_node_id_limit</h3>

    <div class="submitted">Submitted by <a href="../user/11.html" title="View user profile.">cagabi</a> on Wed, 22/04/2015 - 11:57.</div>
    <div class="content">
     <p>Thanks Rob for your quick reply.</p>
<p>I have had a quick look at the <a href="http://jeelabs.net/pub/docs/jeelib/">jeelib documentation</a>&nbsp;and couldn&#39;t find the answer but i haven&#39;t spent very much time with that.</p>
<p>Anyway&nbsp;after a quick conversation between somebody in the office with Trystan the reason for having the limit is due to noise that (i can&#39;t&nbsp;understand&nbsp;how) was making emonCMS create thousands of nodes, so this was a good way of solving the problem. I know&nbsp;this explanation is missing a&nbsp;scientific explanation but i wasn&#39;t the one in the phona,&nbsp;sorry!!</p>
<p>The important thing about this is that&nbsp;$max_node_id_limit can be increased in EmonCMS&nbsp;but&nbsp;according to Rob&#39;s answer nodeIDs for radio nodes must be kept in the 32 limit (to comply with JeeLib specification.</p>
<p>Cheers</p>
<p>&nbsp; &nbsp;Carlos</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29871"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What is the aim of $max_node_id_limit</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 22/04/2015 - 15:20.</div>
    <div class="content">
     <p>As I understand it, the problem inside emonCMS is that the software expects a node number attached to the incoming message, if that's missing, then emonCMS creates a new node on receipt of each new message, hence hundreds of new nodes each with one data point.</p>
<p>If you're not using radio and JeeLib, it may be possible to exceed the 32-node limit, Paul (pb66) will put you right on that.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29877"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/11.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-11.jpg" alt="cagabi&#039;s picture" title="cagabi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What is the aim of $max_node_id_limit</h3>

    <div class="submitted">Submitted by <a href="../user/11.html" title="View user profile.">cagabi</a> on Wed, 22/04/2015 - 16:08.</div>
    <div class="content">
     <p>Hi Rob,</p>
<p>Yes i had noticed that if you don&#39;t add node to the request a new nodeId is created&nbsp;automatically which i find not to be a very clever thing to do. If a node hasn&#39;t got a nodeId it is pointless that it sends inputs as all of them will be seen&nbsp;by emonCMS as they come from&nbsp;different nodes.</p>
<p>In our case we are not using RF but it would be silly not to take it into account as you never know if we will need it. What we are thinking is increasing&nbsp;$max_node_id_limit reserving the first 32 for RF nodes while higher nodeIds&nbsp;would be assigned&nbsp;to&nbsp;tcp nodes.&nbsp;</p>
<p>&nbsp; carlos</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29888"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What is the aim of $max_node_id_limit</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 22/04/2015 - 20:16.</div>
    <div class="content">
     <p>The &quot;5&nbsp;bit&quot; node Id used by jeelib is the source of the 32 (0-31) limit, but it has been widely adopted as THE limit as it was the natural choice when a control was implemented.&nbsp;</p>
<p>The issue causing many inputs to be created by not defining a node id is a relatively recent bug as emoncms previously assigned a node id of 0 to undefined nodes but that is no longer the case.</p>
<p>It would be a great idea to differentiate between the maximum number of nodes permitted and the accepted&nbsp;&quot;labelling&quot; range but I&#39;m not sure the &quot;RF reserved 0-31&quot; is the best way for the wider adoption. it is widening the window perhaps unnecessarily. If you only have 1 rf device and one tcp device you do not need &quot;$max_node_id_limit = 33;&quot; when &quot;$max_node_id_limit = 2:&quot; is less open&nbsp;to errors. Plus if you have more than one rf network how would that effect the numbering? and what about other source types what would their band of node ids be? Perhaps a type or source prefix to the node id could work.</p>
<p>the next version of emonhub&nbsp;has &quot;node offset&quot; to enable multiple rfm networks, basically each interfacer will have the ability to add an &quot;offset&quot; to each node id eg the 2nd rfm network can also use 0-31 (as imposed by jeelib) but the interfacer adds 32 to each node id so emoncms see&#39;s nodes 32-63.</p>
<p>Personally I&nbsp;would also like to see the &quot;node id&quot; being more informative and less likely to clash by being a more complex UUID&nbsp;or sourceid+nodeid&nbsp;combo, this line of thinking works well with the direction mqtt&nbsp;may lead the development but is less accommodating for auto assignment though.</p>
<p>But certainly on a local install you can set the &quot;$max_node_id_limit =&quot; setting to a number &gt; 32 and this has direct ties to jeelib.&nbsp;</p>
<p>Paul</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29953"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/11.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-11.jpg" alt="cagabi&#039;s picture" title="cagabi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What is the aim of $max_node_id_limit</h3>

    <div class="submitted">Submitted by <a href="../user/11.html" title="View user profile.">cagabi</a> on Mon, 27/04/2015 - 14:29.</div>
    <div class="content">
     <p>Thanks again Paul for another very informative answer.</p>
<p>We don&#39;t want to limit the number of nodes in anyway as we still don&#39;t know how many there will be. We will start with a very little number of them but don&#39;t know what after. Also we don&#39;t know if they will be rf or tcp. Many questions not answered for our &quot;Register Module&quot; that will assign nodes id. In order to make it reusable we need to have all this ideas clear so that we don&#39;t limit the future use of the module.</p>
<p>Thank you very much all for yout input</p>
<p>&nbsp; &nbsp;carlos</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10503"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-M0dTfa-nRNh0NHtx7aqZhLJMBPK_ciSS8huMXdwOzJU" value="form-M0dTfa-nRNh0NHtx7aqZhLJMBPK_ciSS8huMXdwOzJU"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
