<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2231 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:05:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>EmonTx (no RF) question | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">EmonTx (no RF) question</h3>
        <span class="submitted">Submitted by Guest on Sat, 13/04/2013 - 19:26</span>
        <div class="content"><p>Hello,</p>
<p>I&#39;m playing with my emonTx (without RF) and 1 voltage and 3 current sensors (all orginal&nbsp;openenergy).</p>
<p>My idea is to connect the Rpi to my arduino&nbsp;(USB serial) , i tried that and it works fine!</p>
<p>I have the following arduino software:</p>
<p>[code]</p>
<p>#include &quot;EmonLib.h&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Include Emon Library<br />
	EnergyMonitor emon1, emon2, emon3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Create tree instances</p>
<p>void setup()<br />
	{&nbsp;<br />
	&nbsp; Serial.begin(9600);<br />
	&nbsp; emon1.voltage(0, 234.26, 1.7);&nbsp; // Voltage: input pin, calibration, phase_shift<br />
	&nbsp; emon1.current(1, 111.1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Current: input pin, calibration.<br />
	&nbsp; emon2.voltage(0, 234.26, 1.7);&nbsp; // Voltage: input pin, calibration, phase_shift<br />
	&nbsp; emon2.current(2, 111.1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Current: input pin, calibration.<br />
	&nbsp; emon3.voltage(0, 234.26, 1.7);&nbsp; // Voltage: input pin, calibration, phase_shift<br />
	&nbsp; emon3.current(3, 111.1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Current: input pin, calibration.<br />
	&nbsp;<br />
	}</p>
<p>void loop()<br />
	{<br />
	&nbsp; emon1.calcVI(20,2000);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Calculate all. No.of half wavelengths (crossings), time-out<br />
	&nbsp; Serial.println(&quot;CT 1:&quot;);<br />
	&nbsp; emon1.serialprint();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Print out all variables</p>
<p>&nbsp; emon2.calcVI(20,2000);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Calculate all. No.of half wavelengths (crossings), time-out<br />
	&nbsp; Serial.println(&quot;CT 2:&quot;);<br />
	&nbsp; emon2.serialprint();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Print out all variables<br />
	&nbsp;<br />
	&nbsp; emon3.calcVI(20,2000);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Calculate all. No.of half wavelengths (crossings), time-out<br />
	&nbsp; Serial.println(&quot;CT 2:&quot;);<br />
	&nbsp; emon3.serialprint();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Print out all variables<br />
	}</p>
<p>[/code]</p>
<p>When i take a look to my serial output i see the following values:</p>
<p>CT 1:<br />
	-475.78 1707.07 231.89 7.36 -0.28<br />
	CT 2:<br />
	16.61 208.05 232.66 0.89 0.08<br />
	CT 2:<br />
	753.23 895.12 230.48 3.88 0.84<br />
	CT 1:<br />
	-156.12 631.12 231.66 2.72 -0.25<br />
	CT 2:<br />
	13.39 205.52 233.68 0.88 0.07<br />
	CT 2:<br />
	792.80 924.17 232.96 3.97 0.86<br />
	CT 1:<br />
	-167.20 602.54 232.29 2.59 -0.28<br />
	CT 2:<br />
	1.69 209.64 232.43 0.90 0.01<br />
	CT 2:<br />
	772.37 903.69 233.85 3.86 0.85</p>
<p>(i know i used 2x&nbsp;CT 2 :x ).</p>
<p>The question i have:</p>
<p>1. How is a negative value possible? (CT 1)</p>
<p>2. Is a calibration necessary ? (or can i work with the default values).</p>
<p>3. And i try to understand the calibration but i can&#39;t follow that story (my english isn&#39;t that good :( ).</p>
<p>4. Is the code i used good? (because i see severally explanations)&nbsp;</p>
<p>Thank you!</p>
<p>Regards,</p>
<p>Rob</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2962.html" class="topic-previous" title="Go to previous forum topic">‹ EmonCMS data incorrect</a>
              <a href="2954.html" class="topic-next" title="Go to next forum topic">Unused DIO ? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-11233"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3129.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jagerp&#039;s picture" title="jagerp&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/3129.html" title="View user profile.">jagerp</a> on Sat, 13/04/2013 - 20:09.</div>
    <div class="content">
     <p>Hi Rob,</p>
<p>From your post your English is pretty good to me in fact it is much better than other &quot;English speaking&quot; people I know.&nbsp;</p>
<p>&nbsp;</p>
<p>In relation to your question is it possible you have &#39;CT1&quot; orientated a different way to the other CTs for example the arrow on the CT is in opposition to the current flow in the cable you have it installed on.</p>
<p>&nbsp;</p>
<p>Regards Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11234"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Sat, 13/04/2013 - 20:31.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>I tried changed CT1 with CT2 but no result (CT1 and CT2 are both negative).</p>
<p>I tried tho&nbsp;mount the CT1 on the other way (turn around) but the results are more negative.</p>
<p>And it looks like it&#39;s only on &quot;low&quot; power.</p>
<p>Regards,</p>
<p>Robert</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11236"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Sat, 13/04/2013 - 21:23.</div>
    <div class="content">
     <p>I tried also the next thing:</p>
<p>I disconnected CT1 and CT2 (with closed clamp) and i get those values:</p>
<p>CT 1:<br />
	-35.59 173.91 225.61 0.77 -0.20<br />
	CT 2:<br />
	-25.32 210.49 224.91 0.94 -0.12<br />
	CT 2:<br />
	648.35 771.14 225.05 3.43 0.84</p>
<p>It looks like they are measuring something?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11238"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Sat, 13/04/2013 - 21:44.</div>
    <div class="content">
     <p>I think i have to build my arduino into a metal case or something.. I tested again on my desk and the values are less..</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11242"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 13/04/2013 - 22:57.</div>
    <div class="content">
     <p>What is your construction method? - you say emonTx at the top but refer to Arduino elsewhere. Anecdotally, people who use Arduino boards and prototype boards (stripboard, plugboard) for the input circuitry seem to have experienced more noise pickup and spurious readings - as you are seeing - than people who use the emonTx kit. It has been suggested that a 2n2 capacitor connected from the processor input pin for the current inputs to ground is a cure for noise pickup. It should have no significant effect on the desired signal, but I have not tested it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11270"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Sun, 14/04/2013 - 17:52.</div>
    <div class="content">
     <p>I have a arduino uno and i connected the orginal emonTx (without RF) directly on the arduino uno.</p>
<p>I will test the 2n2&nbsp;capacitor soon!</p>
<p>Ps, how is it possible that i get negative values like i said into the first post?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11272"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 14/04/2013 - 18:35.</div>
    <div class="content">
     <p>The sign refers to the direction of power flow. You can read up how the emonTx does the maths in Building Blocks.</p>
<p>Calibration is not necessary, the default values should give you reasonable results, but if you want the best accuracy, then you should calibrate.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11307"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Mon, 15/04/2013 - 20:12.</div>
    <div class="content">
     <p>I tested with a 2n2&nbsp;capacitor but i got the same results :(</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11321"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 15/04/2013 - 21:43.</div>
    <div class="content">
     <p>Why are you connecting an emonTx to an Arduino Uno? I think you are reading digital noise that is getting in to the analogue input, or into the analogue reference voltage via the power supply. It is possible that this digital noise is coming from the Uno. Another possible source of noise is a poor quality 5 V power supply. See <a href="http://openenergymonitor.blogspot.com/2011/08/not-all-usb-power-supplies-are-created.html">Not all USB power adapters are created equal.</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11328"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Mon, 15/04/2013 - 23:00.</div>
    <div class="content">
     <p><em>or into the analogue reference voltage via the power supply.</em></p>
<p>Now that you mention that, Atmel call for AVCC to be connected to VCC via an LC network (Fig 23-9 in the datasheet), &nbsp;and yet very few Arduino designs do that, and nor does emonTx since it&#39;s based on them. &nbsp; Does anyone know the history of that?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11353"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Tue, 16/04/2013 - 19:07.</div>
    <div class="content">
     <p>@Robert,</p>
<p>I have also a 9vdc battery connected to my arduino but with the same results.</p>
<p>I ordered also a mega 2560 and i got the same results on that board :(</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11361"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 16/04/2013 - 21:23.</div>
    <div class="content">
     <p>RobV:<br />
	What result do you get with your emonTx connected to a good clean power supply, with the voltage input connected but with the c.t&#39;s off their cables and unplugged, sending the results by radio (meaning no other connection to the outside world)?</p>
<p>dBC:<br />
	Why not take a look at Atmel&#39;s App.Note? (Hint: the emonTx is based on that and it doesn&#39;t decouple the Aref either!). And a pre-emptive answer to the inevitable question: NO, I don&#39;t know either.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11366"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 17/04/2013 - 00:21.</div>
    <div class="content">
     <p><em>Why not take a look at Atmel&#39;s App.Note?</em></p>
<p>Which one? &nbsp;&quot;AVR042: AVR Hardware Design Considerations&quot; certainly shows it in Fig 6-1.</p>
<p><em>Hint: the emonTx is based on that and it doesn&#39;t decouple the Aref either!</em></p>
<p>Actually, I was talking about AVCC not AREF. &nbsp;I assume that&#39;s a typo on your part, because emonTx does decouple AREF right?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11368"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 17/04/2013 - 01:41.</div>
    <div class="content">
     <p>You&#39;re right, it was a typo. I can&#39;t remember now which note it was, but I was rather surprised there was no decoupling, as they&#39;re fairly insistent on good layout practice etc. AVR465 does show it too, so it wasn&#39;t that one. I&#39;m wondering now whether I was looking at an incomplete diagram.</p>
<p>We haven&#39;t yet proved that noise is the problem, but it seems to me the likeliest cause of the erroneous readings that we&#39;ve seen.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11376"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 17/04/2013 - 08:20.</div>
    <div class="content">
     <p><em>I&#39;m wondering now whether I was looking at an incomplete diagram</em></p>
<p>Is it possible you were looking at an Arduino schematic? &nbsp;As far as I can see, the only official Arduino design to include the LC network is the Leonardo. &nbsp;That may provide a fairly painless way to determine if it&#39;s the lack of LC network causing the problem, at least if you can replicate it on the shield-based solutions.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11393"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Wed, 17/04/2013 - 19:06.</div>
    <div class="content">
     <p>@Robert,</p>
<p>I don&#39;t have RF&nbsp;so i have to use the USB port to monitor the values :(</p>
<p>Maybe i will connect a LCD display soon so i can use the LCD to monitor.</p>
<p>Another question where in the CPP file can i add a offset to set the input to the 0 value?</p>
<p>My situation right now: i disconnected the power wires and i made some new wires with 3 turns (so my measuring will be 3x higher) &nbsp;and i add a diverter (/3) into the CPP file. with this solution my noise also diverted to 3.</p>
<p>Maybe another detail, i ordered my arduino&nbsp;at dx.com (i don&#39;t know if it orginal?)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11399"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 17/04/2013 - 21:45.</div>
    <div class="content">
     <p>That tells me without doubt that you are measuring noise. Tell me again what you are using. Is it an emonTx from the openenergymonitor shop but without the RFM12B module?</p>
<p>How does the Arduino Uno relate to your problem?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11439"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Thu, 18/04/2013 - 20:19.</div>
    <div class="content">
     <p>Yes Robert, i explain that earlier.</p>
<p>I have 2 arduino&#39;s</p>
<p>1. Uno</p>
<p>2. Mega</p>
<p>Same problems.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 18/04/2013 - 23:34.</div>
    <div class="content">
     <p>So you do <strong><u>not</u></strong> have an <a href="http://shop.openenergymonitor.com/emontx-v2/">emonTx</a>?</p>
<p>There are many ways that the wrong readings could be generated.</p>
<p>First, it could be digital noise from the processor finding its way into the ADC, either by the signal input or by the supply AVcc. as dBC wrote above, the Arduino boards don&#39;t appear to include the filter here that Atmel recommends.</p>
<p>Second, it could be pick-up from the circuits you are measuring or from adjacent circuits.</p>
<p>Third, it could be due to circulating ground currents between power supply, the computer you are using to monitor, and the analogue circuits.</p>
<p>Fourth, it could be from a poor quality 5 V power supply, but as you get the same from a 9 V battery, in this case it is not that.</p>
<p>Are your current transformers connected like this: <a href="https://learn.openenergymonitor.org/?redirect=ct-sensors-interface" title="http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface">http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface</a></p>
<p>Which current transformer are you using and what is the value of your burden resistor?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11494"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Sat, 20/04/2013 - 22:44.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>I have the following configuration:</p>
<p>1. Arduino uno :&nbsp;http://dx.com/p/x1301-uno-r3-starter-singlechip-set-kit-multicolored-961192965</p>
<p>2.&nbsp;http://shop.openenergymonitor.com/emontx-shield-kit-no-rf/</p>
<p>3. 3x&nbsp;http://shop.openenergymonitor.com/100a-max-clip-on-current-sensor-ct/</p>
<p>4.&nbsp;http://shop.openenergymonitor.com/ac-ac-adapter-euro-plug/</p>
<p>Thats exact my configuration :)</p>
<p>And yes maybe it is one of the problems you mentiont i will try some thing.</p>
<p>But about the filter where can i a how to made a filter layout?</p>
<p>Thank you!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11495"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sat, 20/04/2013 - 23:28.</div>
    <div class="content">
     <p><em>But about the filter where can i a how to made a filter layout?</em></p>
<p>I doubt you&#39;ll be able to successfully retro-fit the LC network to your Uno. &nbsp;However, if you&#39;re up for spending another $25 you could purchase an Arduino Leonardo and see if that improves things. &nbsp;The Leonardo has the Atmel specified LC filter between VCC and AVCC. &nbsp; &nbsp;There&#39;s no guarantees it will fix your problem, but it would go some way to determining if the missing LC filter is relevant.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11496"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 21/04/2013 - 00:42.</div>
    <div class="content">
     <p>There is a big difference between an emonTx and an emonTx shield!</p>
<p>You will probably not be able to fit a filter to your Arduino - that should have been done when the circuit board was designed.</p>
<p>Are you certain that you have the correct components fitted, especially the 33 R burden resistors R3, R5, R16 &amp; R22?</p>
<p>[Edit]<br />
	Compare it carefully with this photo: <a href="../../../cdn2.bigcommerce.com/server4400/98a75/products/78/images/183/emonTx_Shield_top2D_web__19730.1350635542.1280.1280.html" title="http://cdn2.bigcommerce.com/server4400/98a75/products/78/images/183/emonTx_Shield_top2D_web__19730.1350635542.1280.1280.png">http://cdn2.bigcommerce.com/server4400/98a75/products/78/images/183/emon...</a> and check that the colour code on each component is the same as the picture, and the electrolytic capacitors are the right way round.<br />
	[/Edit]</p>
<p>In your first post:<br />
	CT 1:<br />
	-167.20 602.54 232.29 <strong>2.59</strong> -0.28<br />
	CT 2:<br />
	1.69 209.64 232.43 <strong>0.90</strong> 0.01<br />
	CT 2:<br />
	772.37 903.69 233.85 <strong>3.86</strong> 0.85</p>
<p>and later:<br />
	CT 1:<br />
	-35.59 173.91 225.61 <strong>0.77</strong> -0.20<br />
	CT 2:<br />
	-25.32 210.49 224.91 <strong>0.94</strong> -0.12<br />
	CT 2:<br />
	648.35 771.14 225.05 <strong>3.43</strong> 0.84</p>
<p>The numbers I have <strong>marked</strong> are current, these are far too high. I would expect to see small numbers ~ 0.2 maximum. You are using the wrong <a href="https://learn.openenergymonitor.org/?redirect=ct-and-ac-power-adaptor-installation-and-calibration-theory">current calibration factor,</a> it should be 60.6 here: emon1.current(1, <strong>111.1</strong>); but that only partly explains the problem - when you correct this it will change 3.86 to 2.10 which is still at least 10 times too big.</p>
<p>I have only now looked at the circuit diagram of the emonTx shield. If the diagram is correct, and it is, I think I can see what your problem might be.<br />
	The drawing shows the body of the socket and the sleeve of the plug connecting to the ADC input. If the cable screen is connected to the plug sleeve and you have high voltages close by, that would explain the high current that you see [edit] if there is mistake in your assembly [/edit]. If you take the c.t&#39;s off their cables and unplug them all from the shield (but leave the voltage input plugged in and on, working), what currents do you see?</p>
<p>[Edit]<br />
	Can you also check that the ground connection between your shield and the Arduino board is good.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11501"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Sun, 21/04/2013 - 13:17.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>I checked the hardware and the hardware is OK.</p>
<p>Right now i have values like:</p>
<p>CT 1:<br />
	0.01,0.04,0.43,0.10,0.22,<br />
	CT 2:<br />
	0.02,0.11,0.40,0.27,0.21,<br />
	CT 3:<br />
	0.01,0.12,0.47,0.25,0.12,<br />
	CT 1:<br />
	0.00,0.07,0.54,0.13,0.00,<br />
	CT 2:<br />
	0.03,0.13,0.49,0.27,0.21,<br />
	CT 3:<br />
	0.03,0.13,0.52,0.25,0.25,<br />
	CT 1:<br />
	0.02,0.08,0.51,0.16,0.22,<br />
	CT 2:<br />
	0.07,0.18,0.65,0.28,0.41,<br />
	CT 3:<br />
	0.02,0.12,0.50,0.25,0.15,<br />
	CT 1:<br />
	0.02,0.06,0.47,0.13,0.26,<br />
	CT 2:<br />
	0.06,0.12,0.45,0.27,0.47,<br />
	CT 3:<br />
	0.02,0.12,0.48,0.25,0.17,</p>
<p>CT 1:<br />
	0.04,0.12,0.55,0.22,0.33,<br />
	CT 2:<br />
	-0.01,0.14,0.55,0.26,-0.11,<br />
	CT 3:<br />
	0.01,0.13,0.54,0.24,0.11,<br />
	CT 1:<br />
	0.04,0.11,0.54,0.21,0.38,<br />
	CT 2:<br />
	0.07,0.15,0.54,0.27,0.47,<br />
	CT 3:<br />
	0.02,0.13,0.52,0.25,0.15,<br />
	CT 1:<br />
	0.02,0.08,0.52,0.15,0.20,<br />
	CT 2:<br />
	0.05,0.14,0.55,0.26,0.32,<br />
	CT 3:<br />
	-0.01,0.15,0.65,0.23,-0.04,<br />
	CT 1:<br />
	0.02,0.10,0.57,0.18,0.15,<br />
	CT 2:<br />
	0.02,0.14,0.54,0.25,0.16,<br />
	CT 3:<br />
	-0.02,0.14,0.61,0.24,-0.17,</p>
<p>This is just my arduino connected to my PC and 3x&nbsp;a current clamp without connecting to the wires.</p>
<p>And about the values i posted before.</p>
<p>In my first post my question was &quot;Why are those negative?&quot;</p>
<p>The post later was with disconnected CT 1 and CT 2 (CT 3 was still on the line).</p>
<p>Above are the values right know WITHOUT anything on the clamps.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11502"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 21/04/2013 - 14:34.</div>
    <div class="content">
     <p>Those values are much better but still high - you now have&nbsp; ~0.25 A of current showing on CT2 &amp; CT 3, CT 1 is sometimes better.</p>
<p>Are you using the correct current calibration factor now?</p>
<p>Are your current transformers unplugged from the shield?</p>
<p><em>In my first post my question was &quot;Why are those negative?&quot;</em>&nbsp; You get negative power if the current is flowing in the opposite direction. It is explained <a href="https://learn.openenergymonitor.org/?redirect=ac-power-introduction">here</a>. You can reverse the sign by turning the c.t. around on its wire, but you said you did that and the numbers got more negative. That means you are getting readings that are not coming from the current in the cable that the c.t. is clipped onto. The true current is half the difference and the &#39;false&#39; current is the average of the two readings.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11503"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Sun, 21/04/2013 - 14:50.</div>
    <div class="content">
     <p>I use the default current calibration right now.</p>
<p>I changed that before but without big difference.</p>
<p>The current transformers are plugged into the shield.</p>
<p>I think im going to build the arduino into a metal case maybe this will solve my problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11504"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 21/04/2013 - 15:09.</div>
    <div class="content">
     <p>The correct calibration for the emonTx Shield is 60.6. That is the default value in the Shield example sketch.</p>
<p>Unplug the c.t&#39;s from the shield and post the values you see.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11507"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 21/04/2013 - 20:33.</div>
    <div class="content">
     <p>Just for reference, I have loaded a standard emonTx (NOT the shield) with the &quot;emonTx_CT123_Voltage&quot; sketch and get this It is calibrated to read 100 A with 15 &Omega; burden resistors (current calibration factor = 138.8), voltage sensor connected and working, no c.t&#39;s connected, powered via FTDI programmer &amp; laptop USB 5 V. The emonTx is uncased - it was actually resting on the laptop keyboard to record these numbers:</p>
<p>CT 1: 2.44 26.12 248.80 0.10 0.09<br />
	CT 2: 4.80 33.16 248.83 0.13 0.14<br />
	CT 3: 2.26 30.25 248.69 0.12 0.07<br />
	CT 1: 4.21 31.76 248.51 0.13 0.13<br />
	CT 2: 5.47 33.50 248.60 0.13 0.16<br />
	CT 3: 1.32 29.93 248.26 0.12 0.04</p>
<p>So you should expect the current read by CT2 &amp; CT3 to come down a little more yet before I would say the results are acceptable.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11521"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RobV&#039;s picture" title="RobV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by RobV (not verified) on Mon, 22/04/2013 - 20:00.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>I changed the calibration to 60.6 and i see the following values:</p>
<p>CT 1:<br />
	0.00,0.02,0.36,0.05,0.19,<br />
	CT 2:<br />
	0.02,0.07,0.43,0.16,0.31,<br />
	CT 3:<br />
	0.02,0.07,0.49,0.14,0.26,<br />
	CT 1:<br />
	0.02,0.07,0.53,0.13,0.24,<br />
	CT 2:<br />
	0.05,0.12,0.70,0.17,0.47,<br />
	CT 3:<br />
	0.01,0.08,0.57,0.13,0.09,<br />
	CT 1:<br />
	0.02,0.08,0.54,0.14,0.29,<br />
	CT 2:<br />
	0.02,0.09,0.61,0.16,0.26,<br />
	CT 3:<br />
	0.02,0.07,0.57,0.13,0.26,<br />
	CT 1:<br />
	0.02,0.07,0.54,0.14,0.27,</p>
<p>CT 2:<br />
	0.02,0.07,0.44,0.15,0.35,<br />
	CT 3:<br />
	0.01,0.06,0.43,0.14,0.22,<br />
	CT 1:<br />
	0.05,0.15,0.77,0.19,0.33,<br />
	CT 2:<br />
	0.04,0.11,0.73,0.15,0.35,<br />
	CT 3:<br />
	0.00,0.06,0.55,0.11,0.03,<br />
	CT 1:<br />
	0.06,0.13,0.72,0.18,0.42,<br />
	CT 2:<br />
	0.01,0.07,0.55,0.13,0.10,<br />
	CT 3:<br />
	0.02,0.05,0.37,0.15,0.31,<br />
	CT 1:<br />
	-0.00,0.03,0.43,0.07,-0.03,<br />
	CT 2:<br />
	0.05,0.09,0.56,0.17,0.58,<br />
	CT 3:<br />
	0.02,0.06,0.44,0.15,0.27,<br />
	CT 1:<br />
	0.01,0.02,0.36,0.06,0.26,<br />
	CT 2:<br />
	0.02,0.08,0.52,0.15,0.29,<br />
	CT 3:<br />
	0.00,0.07,0.54,0.12,0.06,<br />
	CT 1:<br />
	0.05,0.12,0.65,0.19,0.40,<br />
	CT 2:<br />
	0.01,0.08,0.57,0.14,0.15,<br />
	CT 3:<br />
	0.00,0.07,0.55,0.12,0.07,<br />
	CT 1:<br />
	0.02,0.08,0.59,0.14,0.28,<br />
	CT 2:<br />
	0.01,0.08,0.54,0.14,0.17,</p>
<p>A littlebit unstable but i think it&#39;s better?</p>
<p>This are the values with current sensors connected:</p>
<p>CT 1:<br />
	0.01,0.03,0.37,0.08,0.19,<br />
	CT 2:<br />
	0.00,0.01,0.22,0.05,0.22,<br />
	CT 3:<br />
	-0.00,0.05,0.48,0.11,-0.04,<br />
	CT 1:<br />
	-0.00,0.08,0.54,0.15,-0.00,<br />
	CT 2:<br />
	0.06,0.12,0.58,0.20,0.52,<br />
	CT 3:<br />
	-0.01,0.06,0.52,0.11,-0.14,<br />
	CT 1:<br />
	0.02,0.08,0.55,0.15,0.20,<br />
	CT 2:<br />
	-0.00,0.07,0.54,0.13,-0.04,<br />
	CT 3:<br />
	0.01,0.02,0.15,0.15,0.23,<br />
	CT 1:<br />
	0.00,0.01,0.28,0.03,0.25,<br />
	CT 2:<br />
	0.01,0.06,0.42,0.15,0.23,<br />
	CT 3:<br />
	-0.00,0.07,0.55,0.12,-0.00,<br />
	CT 1:<br />
	0.03,0.10,0.65,0.15,0.28,<br />
	CT 2:<br />
	0.01,0.07,0.55,0.13,0.08,</p>
<p>Ps. the arduino + shield are on my table (wood / plastic).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11523"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 22/04/2013 - 20:36.</div>
    <div class="content">
     <p>Those numbers are a fraction higher than mine, but I doubt that you will get them much lower. As far I can find out, the noise comes from the digital circuits inside the processor and there is little you can do about it.</p>
<p>If you do not need to measure the full 100 A, you can increase the value of the burden resistor, but you risk distorting the waveform and introducing errors into the measurements if you make it too large.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15747"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4346.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="estqwerty&#039;s picture" title="estqwerty&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/4346.html" title="View user profile.">estqwerty</a> on Thu, 17/10/2013 - 15:34.</div>
    <div class="content">
     <p>Hello, I am trying the same thing - arduino to talk to rasppi via usb cable. I see that arduino talks to usb0 on raspi but i cant foward the data to emoncms.</p>
<p>How i must configure oem-gateway script and OemGatewaySerialListener&nbsp;?&nbsp;</p>
<p>And what i must change in arduino sketch?</p>
<p>Thanks.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15752"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Thu, 17/10/2013 - 19:59.</div>
    <div class="content">
     <p><em>RobV: I have the following configuration:</em></p>
<p><em>1. Arduino uno :&nbsp;http://dx.com/p/x1301-uno-r3-starter-singlechip-set-kit-multicolored-961192965</em></p>
<p><em>2.&nbsp;http://shop.openenergymonitor.com/emontx-shield-kit-no-rf/</em></p>
<p><em>3. 3x&nbsp;http://shop.openenergymonitor.com/100a-max-clip-on-current-sensor-ct/</em></p>
<p><em>4.&nbsp;http://shop.openenergymonitor.com/ac-ac-adapter-euro-plug/</em></p>
<p><em>Thats exact my configuration :)</em></p>
<p>Good!&nbsp; With that configuration, you should be able to run my <a href="../sites/default/files/RawSamplesTool_4ss_2.ino_.zip">Raw Samples Tool</a> sketch.&nbsp;&nbsp; This will display exactly how your signals are being seen by the processor.&nbsp; For details about this tool, and many others, just follow the link on my <a href="1757.html">Summary Page</a></p>
<p>The above sketch requires an AC signal to be present at Analog input 2 - the voltage sensor.&nbsp; If it&#39;s not working, try my <a href="../sites/default/files/minMaxAndRangeChecker.ino_.zip">MinMaxAndRangeChecker</a> sketch, also linked from near the top of the same page.&nbsp;</p>
<p>Whenever I build anything new, I always run these basic sketches because they are so useful for checking that the new hardware is OK.&nbsp; Another useful sketch, linked from the same page, is my <a href="../sites/default/files/DigitalMeterEmulator.ino_.zip">DigitalMeterEmulator</a>.&nbsp; Every time that 1Wh has been recorded, a pulse appears at the on-board LED.&nbsp;&nbsp; Just clip the CT around an incoming tail and the two LEDs (meter and emonTx/Uno) should pulse at the same rate.&nbsp; If they don&#39;t, then just change the value of powerCal until they do.&nbsp; Calibration made easy!</p>
<p>powerCal is the means by which all of my sketches are calibrated.&nbsp; Other software has different calibration methods.&nbsp; It only takes a minute or two to switch from one sketch to another, so you could run one of mine to check that everything is working for you, and then switch to a different sketch, e.g. emonTx_CT123_voltage</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15791"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4346.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="estqwerty&#039;s picture" title="estqwerty&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/4346.html" title="View user profile.">estqwerty</a> on Sun, 20/10/2013 - 06:52.</div>
    <div class="content">
     <p>calypso_rae : thanks, your tools will be very useful.</p>
<p>i picked up an old topic. i had a problem with running no rf, trough usb&nbsp;cable serial connection but all my problems seems to be lack of connection to emoncms.org. now everything is alright , up and running. &nbsp;</p>
<p>i am trying to run an ultrasonic level sensor to emoncms.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15792"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx (no RF) question</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 19/10/2013 - 07:23.</div>
    <div class="content">
     <p>Great.</p>
<p>If things are not working as intended, it&#39;s often worth running some simple checks to confirm that the basic parts of the system are in order.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2231"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-2PZvSWBtLrt3yusHkeHVjurnZJI_ItDPPjjeU3CXaQ0" value="form-2PZvSWBtLrt3yusHkeHVjurnZJI_ItDPPjjeU3CXaQ0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
