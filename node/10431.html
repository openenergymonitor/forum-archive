<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10431 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:24:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>RFM69cw data transmissions not getting through | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">RFM69cw data transmissions not getting through</h3>
        <span class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Fri, 03/04/2015 - 09:38</span>
        <div class="content"><p>I am trying to swap my system over to rfm69cw&nbsp;equipped nodes but the rfm69cw&#39;s seem to be reducing the rate of&nbsp;successful transmissions to make the system unusable.</p>
<p>I have an emontx V3.2 with rfm12b&nbsp;sending power and Wh data every 5 seconds to rfm12pi base. The emontx transmissions are also received by a FunkyV3 with rfm12b which acts on the spare solar power reported by the emontx&nbsp;and controls the power to my electric vehicle charger via the spi bus.The Funky V3 also receives the time from the rfm12pi and uses this to split the Wh import figure from the emontx into peak and off peak usage which it then transmits every 10 seconds to the rfm12pi base along with charger output etc. There is also two FunkyV2&#39;s transmitting temperature readings every 60 seconds to the rfm12pi base. &nbsp;Data transmissions for the above seem to get through reliably although the odd packet from the emontx to the FunkyV3 are lost which is why I wanted to change to the rfm69cw with the hope of reducing these lost packets.</p>
<p>When I change any or all of the above to rfm69cw radio modules the successful&nbsp;transmissions drop to every 20&nbsp;seconds&nbsp;up to 10 minutes. I changed to emontxV3.4 with rfm69cw, rfm69pi base and FunkyV3 with rfm69 all located in exactly the same positions as rfm12b units yet I cannot achieve reliable reception unless I swap back to rfm12b.&nbsp;</p>
<p>I am running all the sketches with&nbsp;#define RF69_COMPAT 1 as the first line and with (I think) the latest Jeelib library suitable for each unit. Emonhub&nbsp;is not reporting any problems (emonhub&nbsp;debug mode and rfm69 quiet mode) but the data is still&nbsp;not getting through. Rssi&nbsp;is -37 for emontx to rfm69pi 1m apart and&nbsp;-55 for emontx to FunkyV3 4m and two walls apart. &nbsp;The emontx payload is 58 bytes so quite large, but would this be enough to cause the problem?</p>
<p>&nbsp;</p>
<p>Any suggestions as to where to look next to solve this?</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10433.html" class="topic-previous" title="Go to previous forum topic">‹ Trying to upgrade old HDD pi installation</a>
              <a href="10374.html" class="topic-next" title="Go to next forum topic">EmonCMS - cannot export csv from MYSQL feeds ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-29364"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69cw data transmissions not getting through</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 03/04/2015 - 17:04.</div>
    <div class="content">
     <p>I can think of two conditions when that makes some sense:</p>
<p>1. You have not exactly the same frequency and your receiver is now in a dead spot (more precisely, the dead spot has moved to where the receiver is!)</p>
<p>2. The greater transmitted power is actually overloading the receiver. I don't know what the RSSI numbers actually mean in practical terms (i.e. where the AGC can no longer cope!).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29365"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69cw data transmissions not getting through</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Fri, 03/04/2015 - 17:46.</div>
    <div class="content">
     <p>I could move the rfm69pi&nbsp;further away from the emontx,&nbsp;which may cure the condition if No.2 is the cause. I&#39;ll give that a try tomorrow. Thanks for the suggestions.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29382"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69cw data transmissions not getting through</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Sat, 04/04/2015 - 13:06.</div>
    <div class="content">
     <p>I&#39;d also see if smaller payloads get through better; 58 byte payload could be more subjective to noise/interference.&nbsp;</p>
<p>Jeelib puts the&nbsp;RFM69CW in RFM12B compatibility mode, I am not sure how this may contribute to the issue you experience and would two RFM69CWs talk better among themselves&nbsp;than a RFM69CW to RFM12B.</p>
<p>​I&#39;ve been meaning to test&nbsp;Felix&#39;s native RFM69 library and compare performance against Jeelib;&nbsp;&nbsp;https://github.com/LowPowerLab/RFM69</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29384"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69cw data transmissions not getting through</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 04/04/2015 - 13:54.</div>
    <div class="content">
     <p>I've got that (LowPowerLab/RFM69) too, but not used it/tested it yet, because we've got problems with the 3-phase sketches ever since JeeLib had the RFM69 capability added. I've no proof, but I strongly suspect that the expanded JeeLib has created memory issues. I made an RFM12B version of the sketch using SPI to send raw commands to the RFM12B, and the problem went away.</p>
<p>My intention was to do the same with the RFM69CW, but it might well be worth trying the library first/as well.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29387"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69cw data transmissions not getting through</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Sat, 04/04/2015 - 16:04.</div>
    <div class="content">
     <p>I tried LowPowerLab&#39;s library with couple Funky&nbsp;V3s equipped with RFM69CWs, works very&nbsp;well. I had the transmitting one in my kitchen and walked with the receiving one&nbsp;in and around the house and was able to get reception in a shack at the far end of the yard. Imressed. RFM12B could never go that far.</p>
<p>Here is the code I used:&nbsp;</p>
<p><a href="https://github.com/mharizanov/new_Funky/tree/master/examples/LowPowerLab_RF69_lib_test" title="https://github.com/mharizanov/new_Funky/tree/master/examples/LowPowerLab_RF69_lib_test">https://github.com/mharizanov/new_Funky/tree/master/examples/LowPowerLab...</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29393"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69cw data transmissions not getting through</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Sat, 04/04/2015 - 19:10.</div>
    <div class="content">
     <p>I&#39;d read a&nbsp;blog post by &#39;TheArduinoGuy&#39; who had switched to the LowPowerLabs library after having data transmission problems with the rfm69cw using jeelib library. I still have a couple of FunkyV2&#39;s with rfm12b&#39;s&nbsp;running in low power mode so would need to keep the RFM69pi&nbsp;running in COMPAT&nbsp;mode. Would I be able to switch the emontx and FunkyV3&nbsp;that were&nbsp;on RFM69cw&#39;s to full RFM69 mode using the LowPowerLab library whilst still running the RFM12pi in COMPAT mode with the RFM12b FunkyV2&#39;s?&nbsp;</p>
<p>Today I put the emontx&nbsp;sketch payload temporarily&nbsp;up to 66&nbsp;bytes&nbsp;to try and debug it&nbsp;and then read Martins post about trying a smaller payload. &nbsp;It seems to be working ok at 66 bytes with rfm12b&nbsp;system and I&#39;ve decreased the rf transmission interval&nbsp;of the emon tx to every second which may be helping reduce the number of 30 second gaps in successful receives or it could just be due to better conditions today, difficult to tell.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29398"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69cw data transmissions not getting through</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 04/04/2015 - 19:54.</div>
    <div class="content">
     <p>LowPowerLabs and JeeLib do not use the same message format, therefore you cannot use both on the same network.</p>
<p>However, I think it would not be too difficult to add a function LowPowerLabs library to construct a message in JeeLib format, for compatibility. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10431"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-hqmNtYkmeLNuS0SaElSarwvToVwHTln4vTMtMLSv750" value="form-hqmNtYkmeLNuS0SaElSarwvToVwHTln4vTMtMLSv750"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/10431 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:24:15 GMT -->
</html>
