<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5335 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:01:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Blank realtime graph when not logged in | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Blank realtime graph when not logged in</h3>
        <span class="submitted">Submitted by <a href="../user/6495.html" title="View user profile.">Olivier</a> on Tue, 24/06/2014 - 07:24</span>
        <div class="content"><p>I&#39;m using Emoncms V8.2.6 on a Raspberry with an HDD.</p>
<p>I discovered this weekend that the realtime graph are only visible if I&#39;m logged in. When I use the link <a href="http://ipserver/emoncms/user/" title="http://ipserver/emoncms/user/">http://ipserver/emoncms/user/</a> the realtime graph are blank. When I&#39;m logged in the realtime graph are not blank.</p>
<p>The concerned feeds are public and they can be displayed with another visualization method. Am I the only one in this situation? Is there a workaround to solve this issue?</p>
<p>Olivier</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10179.html" class="topic-previous" title="Go to previous forum topic">‹ HOW does the offset code work in emon  library </a>
              <a href="10832.html" class="topic-next" title="Go to next forum topic">emoncms on WP8.1  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22167"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6451.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dapres&#039;s picture" title="dapres&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/6451.html" title="View user profile.">dapres</a> on Tue, 24/06/2014 - 14:49.</div>
    <div class="content">
     <p>I&#39;ve exactly the same issue on the same version of emoncms running on public linux server.</p>
<p>
	Dario</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22211"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6495.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Olivier&#039;s picture" title="Olivier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/6495.html" title="View user profile.">Olivier</a> on Fri, 27/06/2014 - 12:51.</div>
    <div class="content">
     <p>Hello,</p>
<p>When not logged in if I use the Debug console of my internet browser, I see this:<br />
	GET <a href="http://ipserver/emoncms/feed/timevalue.json" title="http://ipserver/emoncms/feed/timevalue.json">http://ipserver/emoncms/feed/timevalue.json</a> [HTTP/1.1 200 OK 4287ms]<br />
	TypeError: data[(data.length - 1)] is undefined</p>
<p>It seems to be link to this function from the realtime.php file:<br />
	&nbsp;&nbsp;&nbsp; function getdp()<br />
	&nbsp;&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp; var result = {};<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $.ajax({ url: path+&quot;feed/timevalue.json&quot;, data: &quot;id=&quot;+feedid, dataType: &#39;json&#39;, async: false, success: function(datain) {result = datain;} });</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var timestamp = new Date;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if <strong>(data[data.length-1][0]!=result.time*1000)</strong> {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data.push([result.time*1000,parseFloat(result.value)]);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (data[1][0]&lt;(start-20)) data.splice(0, 1);<br />
	&nbsp;&nbsp;&nbsp; }</p>
<p>If I&#39;m logged in I haven&#39;t got this error.</p>
<p>&nbsp;</p>
<p>Olivier</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22293"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4446.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4446.jpg" alt="xmasta&#039;s picture" title="xmasta&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/4446.html" title="View user profile.">xmasta</a> on Thu, 03/07/2014 - 17:58.</div>
    <div class="content">
     <p>The same issue has been up for months on the <strong>live emoncms.org build</strong> imho. I&#39;ve been waiting for a long time for this to be fixed, thought it is so exposed that it gets fixed soon but guys on the other end must be real busy with other stuff.</p>
<p>I reported this issue on another thread too:&nbsp;http://openenergymonitor.org/emon/node/4907</p>
<p>with pictures.</p>
<p>Visualization for realtime graphs only happens when logged in, tried making new feed on a new dashboard too, still doesnt show if not logged in. All public feeds. my emoncms username is gelisob - if it&#39;s a userbased problem that needs to be sorted out case by case.. sorry for the trouble and thanks for taking time for it, if it is!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22700"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/689.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-689.jpg" alt="tgmaxx&#039;s picture" title="tgmaxx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/689.html" title="View user profile.">tgmaxx</a> on Thu, 24/07/2014 - 01:44.</div>
    <div class="content">
     <p>I see the same issue in 8.3.2 with Realtime&nbsp;graphs displaying when logged in and not displaying when logged out.</p>
<p>I am using MySQL for my feed logging and using Chrome on Win7.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22705"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 24/07/2014 - 21:04.</div>
    <div class="content">
     <p>It works fine for me on v8.3.1, and I can see the realtime&nbsp;graphs via&nbsp;http://mydomain/emoncms/username&nbsp;OK.</p>
<p>There is a issue with the dashboard graphs, where the dashboard records the graph&nbsp;url at the time that the graph is created.</p>
<p>This means that if you add a graph to a dashboard whilst accessing your site via Localhost or your private IP address, then that local&nbsp;url is saved within the dashboard, and the graph would be blank if you tried to access it via your domain name, or outside of your local network.</p>
<p>To check this, access your site via it&#39;s domain name , log in, and visit your dashboard, and select edit.<br />
	Select &#39;configure&#39; one of your graphs and &#39;Save&#39; it. This will ensure that the graph location is saved in your dashboard.<br />
	Now logout, and try to again access your dashboard via the same url&nbsp;you have used to configure/save, except add your username to the url. eg&nbsp;http://mydomain/emoncms/username and see if they then display OK.</p>
<p>Sorry if I havent explained this very clearly, let me know if not!</p>
<p>This issue bugged me for a while because&nbsp;when I accessed my dashboard via&nbsp;http://mydomain/emoncms/username I could see the graphs, BUT if my browser flipped the url to&nbsp;http://www.mydomain/emoncms/username (www added) then the graphs were blank.</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22706"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/689.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-689.jpg" alt="tgmaxx&#039;s picture" title="tgmaxx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/689.html" title="View user profile.">tgmaxx</a> on Thu, 24/07/2014 - 21:50.</div>
    <div class="content">
     <p>Paul,</p>
<p>Your idea doesn&#39;t work for me, so there must be a bug in the code. I still have the problem in V8.3.2</p>
<p>I know for sure this issue does not exist in V8.1.2. &nbsp;Olivier noted it in V8.2.6 so it may have been introduced in 8.2 ?</p>
<p>Thanks,</p>
<p>Tom</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22708"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 24/07/2014 - 22:40.</div>
    <div class="content">
     <p>Hi Tom,</p>
<p>My installation is via git, so the files in theory should be the same. I&#39;ll PM you a link to my raspberry pi.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23983"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 19/09/2014 - 19:10.</div>
    <div class="content">
     <p>not to cross post to much but just tried the edit and save... did not work</p>
<p>&nbsp;</p>
<p>graphs work only if i use local ip</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23984"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 19/09/2014 - 19:15.</div>
    <div class="content">
     <p>of course the feeds has to be public too.... dooh :-D</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24203"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="littlepanda&#039;s picture" title="littlepanda&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by littlepanda (not verified) on Mon, 29/09/2014 - 12:47.</div>
    <div class="content">
     <p>Hi everyone,</p>
<p>I&#39;m new to emoncms and created a dashboard, public, with all public feeds, on emoncms.org.</p>
<p>The dashboard is working fine except for the realtime graph which is blank. I&#39;m not seing an answer on this thread on how to fix this.</p>
<p>Thanks for your help, and happy emoncms ! what a great tool !</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25944"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7374.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nicolas&#039;s picture" title="nicolas&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by <a href="../user/7374.html" title="View user profile.">nicolas</a> on Thu, 18/12/2014 - 11:10.</div>
    <div class="content">
     <p>Hello,</p>
<p>Have the same problem on 8.3.2, I do all my test on my local network, url is alway the same...</p>
<p>Someone have a fix for that ?</p>
<p>Thanks !</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33543"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="evandro&#039;s picture" title="evandro&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Blank realtime graph when not logged in</h3>

    <div class="submitted">Submitted by evandro (not verified) on Sat, 22/08/2015 - 20:08.</div>
    <div class="content">
     <p>The problem is where the browser calls /emoncms/feed/data.json?&amp;apikey=&amp;id=10&amp;start=1440272310278&amp;end=1440272670318&amp;dp=1000</p>
<p>the server responds without apikey=</p>
<p>You can fix that putting your READ ONLY key in the line 48 of /emoncms/Modules/vis/visualisations/realtime.php</p>
<p>Link that:</p>
<p>var apikey = &quot;76XXXXXXXXXXXXXXXXXXXXXXXXXXXX29&quot;;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<p>It is a temporary fix, but works fine for me.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5335"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-EAmHr2_wepragkZzCWp3Eq5e-sQAHXzjCfmzCcf0xhM" value="form-EAmHr2_wepragkZzCWp3Eq5e-sQAHXzjCfmzCcf0xhM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/5335 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:01:49 GMT -->
</html>
