<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/1903 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:39:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>3G Forward data to remote emoncms | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">3G Forward data to remote emoncms</h3>
        <span class="submitted">Submitted by Guest on Sun, 13/01/2013 - 13:53</span>
        <div class="content"><p>I have problem with forwarding data to remote url.&nbsp; Using the ready-to-go SD card image all goes well when connected to home broadband router but when I configure 3G dongle and reboot it stops posting data to remote url but it keeps updating localhost/emoncms. I can browse www so 3G connection is ok.</p>
<p>Wireshark shows HTTP forward data to remote url sent to remote url with home broadband (obvious) but&nbsp; Wireshark&nbsp; shows that RPi is not sending HTTP forward data to remote url for 3G connection after RPi reboot.&nbsp;</p>
<p>&quot;To rectify the process used <em>&quot;I&nbsp; have to login to dashboard Raspberry Pi and change remote url to false URL and save, then revert changes so url is correct and save again</em>&quot;.&nbsp;</p>
<p>Wireshark trace shown the following during above process:</p>
<p>1.Update with false url below</p>
<p>&nbsp;</p>
<p class="western" style="margin-bottom: 0cm">GET /emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=$cms1.wedo.i&amp;remoteapikey=5e5a182a37420e3c22ef48c339c3xxxx HTTP/1.1</p>
<p class="western" style="margin-bottom: 0cm">2.Update with correct url below:</p>
<p class="western" style="margin-bottom: 0cm">GET /emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms1.wedo.ie&amp;remoteapikey=5e5a182a37420e3c22ef48c339xxxx HTTP/1.1</p>
<p class="western" style="margin-bottom: 0cm">Now it works the HTTP forward data to remote url is visible in wireshark. Unfortunately when I reboot it stops forwarding to remote url again and I have to use process above. I have tried to get code to duplicate above process using cron job but no luck. Could someone please help by providing code to produce above http get e.g. .php or other. I would also like to know what this process does as it must reset something or update some data lost during reboot. Any help or suggestions welcome.</p>
<p class="western" style="margin-bottom: 0cm">Thanks in advance.</p>
<p class="western" style="margin-bottom: 0cm">Peter</p>
<p class="western" style="margin-bottom: 0cm">&nbsp;</p>
<p class="western" style="margin-bottom: 0cm">&nbsp;</p>
<p class="western" style="margin-bottom: 0cm">&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>
	&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1995.html" class="topic-previous" title="Go to previous forum topic">‹ Measuring DC voltage?</a>
              <a href="1982.html" class="topic-next" title="Go to next forum topic">How to use the API from a PHP script ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-9104"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2128.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jb79&#039;s picture" title="jb79&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/2128.html" title="View user profile.">jb79</a> on Mon, 14/01/2013 - 11:05.</div>
    <div class="content">
     <p>Hello Peter!</p>
<p>As I understood you&#39;ve got a router connected via DSL, another connection can be done via a 3G dongle.</p>
<p>What&#39;s not clear for me (important to help you):</p>
<p>What&#39;s your exact configuration, so where is the dongle connected to? Router or somewhere else?</p>
<p>What do you use as base? EmonBase or RaspberrryPi, ...?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9109"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Mon, 14/01/2013 - 12:32.</div>
    <div class="content">
     <p>Peter,</p>
<p>&nbsp;just fyi - I&#39;m trying the WR703n also, so if I can get it setup I&#39;ll try to test your scenario also (I&#39;ve DSL broadband here, using OKG emonbase).... Should be ready by Thurs/Fri if I can find some time....</p>
<p>I have a Pi, but am not using it as a base yet.</p>
<p>Eamonn</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9110"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Mon, 14/01/2013 - 12:33.</div>
    <div class="content">
     <p>Plan to write up when working fully and I have some spare time.</p>
<p>It Raspberry Pi with ready-to-go SD and&nbsp; works staright away with home router.</p>
<p>I then configure for 3G using UMTSKeeper and Sakis3G - <a href="http://zool33.uni-graz.at/petz/umtskeeper/" title="http://zool33.uni-graz.at/petz/umtskeeper/">http://zool33.uni-graz.at/petz/umtskeeper/</a> and disconnect from home router. 3G connection comes up ok and I can browse internet using Huawei K3520. However every time I powercycle Raspberry pi or reboot &nbsp;I have to run through above process to get it posting to remote url again. The 3G connection comes back ok each time its just that it stops posting to remote url.</p>
<p>&nbsp;</p>
<p>Thanks</p>
<p>Peter</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9112"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Mon, 14/01/2013 - 13:34.</div>
    <div class="content">
     <p>Hi Eamonn, I had a emonbase NanodeRF working with W703n and 3G dongle (K3520 and K3765) in a trial for about three months last year. For the main it worked fine but&nbsp;sometimes&nbsp;it would hand over to 2G and stop working&nbsp;which needed me to go to site and&nbsp;powercycle to rectify (I&#39;m sure some code could sort this). The weak link was definately the wr703n connection (nanodRF just kept working),&nbsp;however &nbsp;I really liked the wr703n with LUCI loaded, quite a nice little box. I also had wifi working for a while which was very handy. Sorry I can&#39;t add more as I moved to Raspberry Pi before testing was complete.&nbsp;Assume you found the site for setting up relayd&nbsp;but just in case <a href="http://trac.gateworks.com/wiki/relayd" title="http://trac.gateworks.com/wiki/relayd">http://trac.gateworks.com/wiki/relayd</a></p>
<p>You never know I may move back to NanodeRF with wr703n if things don&#39;t work out with Raspberry Pi. Anyhow&nbsp;I&#39;d be interested to hear how you get on and of course if I can help I will.</p>
<p>Good luck</p>
<p>Cheers</p>
<p>Peter</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9173"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Wed, 16/01/2013 - 22:47.</div>
    <div class="content">
     <p>Request for help from kind programmer. I&nbsp;need to build php script to&nbsp;send two&nbsp;lines below with short delay (a few seconds). Reason I would like to add cron job to automate process to fix issue I&#39;m having.&nbsp; Many Thanks</p>
<p>&nbsp;</p>
<p><a href="http://192.168.1.8/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms1.wedo.i&amp;remoteapikey=5e5a182a37420e3c22ef48c339c3338c" title="http://192.168.1.8/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms1.wedo.i&amp;remoteapikey=5e5a182a37420e3c22ef48c339c3338c">http://192.168.1.8/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid...</a></p>
<p><a href="http://192.168.1.8/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms1.wedo.i&amp;remoteapikey=5e5a182a37420e3c22ef48c339c3338c" title="http://192.168.1.8/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms1.wedo.i&amp;remoteapikey=5e5a182a37420e3c22ef48c339c3338c">http://192.168.1.8/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9260"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Sun, 20/01/2013 - 22:22.</div>
    <div class="content">
     <p>Tried everything but no look. Can someone please direct me to script that is invoked in my process described below and shown in attached images.</p>
<p>&quot;To rectify the process used <em>&quot;I&nbsp; have to login to dashboard Raspberry Pi and change remote url to false URL and save, then revert changes so url is correct and save again</em>&quot;.&nbsp;</p>
<p>For some reason this is needed to make emoncms post to remote url over 3G connection after each reboot. Once I understand process I hope to automate at boot.</p>
<p>Thanks in advance</p>
<p>Cheers</p>
<p>Peter</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9261"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Mon, 21/01/2013 - 05:19.</div>
    <div class="content">
     <p>I&#39;ve traced the code generated by Dashboard Raspberry Pi module during my process discussed above using wireshark. I then used code directly in internet browser and ran both HTML lines and it worked to restore posting to remote url over 3G after reboot.</p>
<p>First with false url</p>
<p lang="en" style="margin-bottom: 0cm"><font face="Times New Roman, serif"><font size="3">http://192.168.1.79/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=<u><strong>cms.wedo.i</strong></u>&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2<font size="3">ccccc</font></font></font></p>
<p lang="en" style="margin-bottom: 0cm">Second with correct url</p>
<p lang="en" style="margin-bottom: 0cm">&nbsp;</p>
<p lang="en" style="margin-bottom: 0cm"><font face="Times New Roman, serif"><font size="3">http://192.168.1.79/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=<strong><u>cms.wedo.ie</u></strong>&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2ccccc</font></font></p>
<p lang="en" style="margin-bottom: 0cm">This means that whatever is being changed in EMONCMS by receiving above code is somehow making post to remote url work again for my 3G connection after reboot and I need to find out what code it is so I can fix or automate it.. Please note posting to remote url works fine over wifi only issue when using 3G dongle.</p>
<p lang="en" style="margin-bottom: 0cm">At this stage I&#39;d welcome any suggestions or direction to code invoked in emoncms by above HTML lines</p>
<p lang="en" style="margin-bottom: 0cm">Cheers</p>
<p lang="en" style="margin-bottom: 0cm">Peter</p>
<p lang="en" style="margin-bottom: 0cm">&nbsp;</p>
<p lang="en" style="margin-bottom: 0cm">&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9279"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Mon, 21/01/2013 - 15:14.</div>
    <div class="content">
     <p>Peter,</p>
<p>&nbsp;Hadn&#39;t seen relayd yet, so thanks a lot for that. Haven&#39;t made any progress since I&#39;ve bricked my 703n [firmware experimentation!] and really don&#39;t want to set up a serial interface to recover it [microscopic soldering :-)] so I&#39;ve ordered a new one.</p>
<p>While I wait I&#39;ll get the sim900 testing going again.</p>
<p>Eamonn.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9281"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Mon, 21/01/2013 - 15:30.</div>
    <div class="content">
     <p>Don&#39;t feel to bad I bricked one also. Tried soldering serial and gave up very quick. In all I flashed four devices several times with no issues it was only when I tried to flash with english version TL MR3020 that one bricked largely due to myself and unclear instruction&nbsp; took a chance. Good Luck</p>
<p>Peter</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9305"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Tue, 22/01/2013 - 22:04.</div>
    <div class="content">
     <p>My first attempt to automate the following process &quot;To rectify the process used <em>&quot;I&nbsp; have to login to dashboard Raspberry Pi and change remote url to false URL and save, then revert changes so url is correct and save again</em>&quot;.&nbsp;</p>
<p>First with false url</p>
<p lang="en" style="margin-bottom: 0cm"><font face="Times New Roman, serif"><font size="3">http://192.168.1.79/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=<u><strong>cms.wedo.i</strong></u>&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2<font size="3">ccccc</font></font></font></p>
<p lang="en" style="margin-bottom: 0cm">Second with correct url</p>
<p lang="en" style="margin-bottom: 0cm">&nbsp;<font face="Times New Roman, serif"><font size="3">http://192.168.1.79/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=<strong><u>cms.wedo.ie</u></strong>&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2ccccc</font></font></p>
<p lang="en" style="margin-bottom: 0cm">Crontab code:</p>
<pre class="western">
<span style="display: none;">&nbsp;</span>Sudo nano /etc/crontab
*/5 * * * * root cd /var/www/emoncms/Modules/raspberrypi &amp;&amp; php remote.php$


PHP Script:
sudo nano /var/www/emoncms/Modules/raspberrypi/remote.php

&lt;?php


sleep (100);
$remotefalse = file_get_contents(&#39;http://192.168.1.79/emoncms/raspberrypi/set?
frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms.wedo.i&amp;remoteapikey=
487c485f1f0d5b9fcccc$
echo $remotefalse;

sleep (30);
$remotecorrect = file_get_contents(&#39;http://192.168.1.79/emoncms/raspberrypi/set?
frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms.wedo.ie&amp;remoteapikey=
487c485f1f0d5b9fccc$
echo $remotecorrect;
?&gt;

Unfortunately it doesn&#39;t work. Any comments or guidence on how to check script 
or obvious errors welcome.

</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9316"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 23/01/2013 - 05:52.</div>
    <div class="content">
     <p>Looks like you missed the closing quotation mark and bracket</p>
<p>&nbsp;</p>
<p>$remotecorrect = file_get_contents(&#39;http://192.168.1.79/emoncms/raspberrypi/set?<br />
	frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms.wedo.ie&amp;remoteapikey=<br />
	487c485f1f0d5b9fccc<u><strong>&quot;);</strong></u><br />
	&nbsp;</p>
<p>This is true for both the file_get_contents;</p>
<p>If that doesn&#39;t work either - you can use the same function to access remote url as used by the raspberry_run script</p>
<p>&nbsp;</p>
<p>// example:&nbsp;getcontent($remotedomain,80,&quot;/input/bulk.json?apikey=&quot;.$remoteapikey.&quot;&amp;data=&quot;.$remotedata);</p>
<p>function getcontent($server, $port, $file)<br />
	{<br />
	&nbsp;&nbsp; $cont = &quot;&quot;;<br />
	&nbsp;&nbsp; $ip = gethostbyname($server);<br />
	&nbsp;&nbsp; $fp = fsockopen($ip, $port);<br />
	&nbsp;&nbsp; if (!$fp)<br />
	&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;Unknown&quot;;<br />
	&nbsp;&nbsp; }<br />
	&nbsp;&nbsp; else<br />
	&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $com = &quot;GET $file HTTP/1.1\r\nAccept: */*\r\nAccept-Language: de-ch\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)\r\nHost: $server:$port\r\nConnection: Keep-Alive\r\n\r\n&quot;;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fputs($fp, $com);<br />
	/* Don&#39;t realy need to fetch output as it slows us down<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (!feof($fp))<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $cont .= fread($fp, 500);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
	*/<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fclose($fp);<br />
	//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $cont = substr($cont, strpos($cont, &quot;\r\n\r\n&quot;) + 4);<br />
	//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $cont;<br />
	&nbsp;&nbsp; }<br />
	}</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9317"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Wed, 23/01/2013 - 06:56.</div>
    <div class="content">
     <p>Hi Martin,</p>
<p>Thanks, checked and bracket is there but when I ctrl C and paste its not copied - off the screen. Here it is without node id as I don&#39;t suppose its needed.<br />
	&nbsp;</p>
<p>&lt;?php</p>
<p>	sleep (100); $remotefalse =<br />
	file_get_contents(&#39;http://192.168.1.79/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;remotedomain=cms.wedo.i&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2416ac4&#39;);<br />
	echo $remotefalse;</p>
<p>	sleep (30); $remotecorrect =<br />
	file_get_contents(&#39;http://192.168.1.79/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;remotedomain=cms.wedo.ie&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2416ac4&#39;);<br />
	echo $remotecorrect; ?&gt;</p>
<p>	&nbsp;</p>
<p>The method you suggest would seem better, can you please explain how I would&nbsp; add false remote url as in first case and correct remote url as in second case.</p>
<p>Thanks in advance.</p>
<p>Peter</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9322"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 23/01/2013 - 11:54.</div>
    <div class="content">
     <p>this showld do the trick:</p>
<p>&nbsp;</p>
<p>&lt;?php</p>
<p>&nbsp;</p>
<p>getcontent(&quot;192.168.1.79&quot;,80,&quot;/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;remotedomain=cms.wedo.i&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2416ac4&quot;);</p>
<p>sleep (100);</p>
<p>getcontent(&quot;192.168.1.79&quot;,80,&quot;/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;remotedomain=cms.wedo.ie&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2416ac4&quot;);</p>
<p>&nbsp;</p>
<p>function getcontent($server, $port, $file)<br />
	{<br />
	&nbsp;&nbsp; $cont = &quot;&quot;;<br />
	&nbsp;&nbsp; $ip = gethostbyname($server);<br />
	&nbsp;&nbsp; $fp = fsockopen($ip, $port);<br />
	&nbsp;&nbsp; if (!$fp)<br />
	&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return &quot;Unknown&quot;;<br />
	&nbsp;&nbsp; }<br />
	&nbsp;&nbsp; else<br />
	&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $com = &quot;GET $file HTTP/1.1\r\nAccept: */*\r\nAccept-Language: de-ch\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)\r\nHost: $server:$port\r\nConnection: Keep-Alive\r\n\r\n&quot;;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fputs($fp, $com);<br />
	/* Don&#39;t realy need to fetch output as it slows us down<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (!feof($fp))<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $cont .= fread($fp, 500);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
	*/<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fclose($fp);<br />
	//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $cont = substr($cont, strpos($cont, &quot;\r\n\r\n&quot;) + 4);<br />
	//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $cont;<br />
	&nbsp;&nbsp; }<br />
	}</p>
<p>?&gt;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9338"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Wed, 23/01/2013 - 23:08.</div>
    <div class="content">
     <p>Hi Martin,</p>
<p>Many thanks, I&#39;m trying code now and will keep you posted on progress.</p>
<p>Cheers</p>
<p>Peter</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9392"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Fri, 25/01/2013 - 21:29.</div>
    <div class="content">
     <p>Hi Martin,</p>
<p>No luck yet file runs ok (see extract from syslog below) but unfortunately doesn&#39;t update domain Name or Write Apikey in emoncms dashboard.</p>
<p>Extract syslog (above code is called remote.php)</p>
<p>Jan 25 18:36:01 raspberrypi /USR/SBIN/CRON[29186]: (root) CMD (cd /var/www/emoncms/Modules/raspberrypi &amp;&amp; php remote.php)<br />
	Jan 25 18:36:01 raspberrypi /USR/SBIN/CRON[29187]: (root) CMD (cd /var/www/emoncms/Modules/raspberrypi &amp;&amp; php raspberrypi_run.php)</p>
<p>Will keep you posted.</p>
<p>Thanks</p>
<p>Peter</p>
<p>
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9397"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Fri, 25/01/2013 - 21:34.</div>
    <div class="content">
     <p>I moved new script to rc.local&nbsp;</p>
<p><u><strong>updated rc.local</strong></u></p>
<p>root@raspberrypi:~# cat /etc/rc.local<br />
	#!/bin/sh -e<br />
	#<br />
	# rc.local<br />
	#<br />
	# This script is executed at the end of each multiuser runlevel.<br />
	# Make sure that the script will &quot;exit 0&quot; on success or any other<br />
	# value on error.<br />
	#<br />
	# In order to enable or disable this script just change the execution<br />
	# bits.<br />
	#<br />
	# By default this script does nothing.</p>
<p># Print the IP address<br />
	exec 2&gt; /tmp/rc.local.log&nbsp; # send stderr from rc.local to a log file<br />
	exec 1&gt;&amp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # send stdout to the same log file<br />
	set -x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # tell sh to display commands before execution<br />
	_IP=$(hostname -I) || true<br />
	if [ &quot;$_IP&quot; ]; then<br />
	&nbsp; printf &quot;My IP address is %s\n&quot; &quot;$_IP&quot;<br />
	fi<br />
	/root/umtskeeper/umtskeeper --sakisoperators &quot;USBINTERFACE=&#39;0&#39; OTHER=&#39;USBMODEM&#39; USBMODEM=&#39;12d1:1001&#39;&nbsp; APN=&#39;CUSTOM_APN&#39; CUSTOM_APN=&#39;hs.vodafone.ie&#39; APN_USER=&#39;vodafone&#39; APN_PASS=&#39;vodafone&#39;&quot; --sakisswitches &quot;--sudo --console&quot; --devicename &#39;Huawei&#39; --log --silent --monthstart 8 --nat &#39;no&#39;&nbsp; &#39;/var/www/&#39; &gt;&gt; /root/umtskeeper/error.log &amp;<br />
	/etc/ &amp;&amp; php remote.php</p>
<p>exit 0</p>
<p>&nbsp;</p>
<p><strong><u>logs</u></strong></p>
<p>root@raspberrypi:/tmp# cat rc.local.log<br />
	+ hostname -I<br />
	+ _IP=192.168.1.7<br />
	+ [ 192.168.1.7&nbsp; ]<br />
	+ printf My IP address is %s\n 192.168.1.7<br />
	My IP address is 192.168.1.7<br />
	+ /etc/<br />
	/etc/rc.local: 23: /etc/rc.local: /etc/: Permission denied<br />
	+ exit 0<br />
	+ /root/umtskeeper/umtskeeper --sakisoperators USBINTERFACE=&#39;0&#39; OTHER=&#39;USBMODEM&#39; USBMODEM=&#39;12d1:1001&#39;&nbsp; APN=&#39;CUSTOM_APN&#39; CUSTOM_APN=&#39;hs.vodafone.ie&#39; APN_USER=&#39;vodafone&#39; APN_PASS=&#39;vodafone&#39; --sakisswitches --sudo --console --devicename Huawei --log --silent --monthstart 8 --nat no /var/www/</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9400"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Sat, 26/01/2013 - 11:49.</div>
    <div class="content">
     <p>The new remote.php is not running, I&#39;ve tried manual command and no joy, I&#39;ve checked raspberrypi_run.php and that runs ok which is in same directory. Any ideas? See extract from putty terminal below.</p>
<p><u><strong>raspberrypi_run.php</strong></u></p>
<p>root@raspberrypi:~# php /var/www/emoncms/Modules/raspberrypi/raspberrypi_run.php<br />
	Remote upload enabled - details correct<br />
	SERIAL RX: 20 189 7<br />
	SERIAL RX: 10 7 0 4 0 3 0 126 104 119 4 17 0<br />
	SERIAL RX: 20 189 7</p>
<p><u><strong>remote.php</strong></u><br />
	root@raspberrypi:~# php /var/www/emoncms/Modules/raspberrypi/remote.php&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>Could not open input file: /var/www/emoncms/Modules/raspberrypi/remote.php<br />
	root@raspberrypi:~#<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9431"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Tue, 29/01/2013 - 21:11.</div>
    <div class="content">
     <p>To test below code I called it remote.php and added it to /var/www/emoncms/Modules/raspberrypi and then run using command php remote.php. It doesn&#39;t come back with any errors but doesn&#39;t update mysql raspberrypi table with data included in getcontent below (checked using phpmyadmin).</p>
<p class="western" style="margin-bottom: 0cm">&nbsp;</p>
<p class="western" style="margin-bottom: 0cm"><u><strong>Code remote.php</strong></u>&nbsp; not working ( I&#39;d like to add code to below to add new log file - keep you posted )</p>
<p class="western" style="margin-bottom: 0cm">&nbsp;</p>
<p class="western" style="margin-bottom: 0cm">&lt;?php</p>
<p class="western" style="margin-bottom: 0cm">&nbsp;</p>
<p class="western" style="margin-bottom: 0cm">getcontent(&quot;192.168.1.7&quot;,80,&quot;/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms1.wedo.i&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2416ac4&quot;);</p>
<p class="western" style="margin-bottom: 0cm">&nbsp;</p>
<p class="western" style="margin-bottom: 0cm">getcontent(&quot;192.168.1.7&quot;,80,&quot;/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=cms1.wedo.ie&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2416ac4&quot;);</p>
<p class="western" style="margin-bottom: 0cm">&nbsp;</p>
<p class="western" style="margin-bottom: 0cm">function getcontent($server, $port, $file)</p>
<p class="western" style="margin-bottom: 0cm">{</p>
<p class="western" style="margin-bottom: 0cm">$cont = &quot;&quot;;</p>
<p class="western" style="margin-bottom: 0cm">$ip = gethostbyname($server);</p>
<p class="western" style="margin-bottom: 0cm">$fp = fsockopen($ip, $port);</p>
<p class="western" style="margin-bottom: 0cm">if (!$fp)</p>
<p class="western" style="margin-bottom: 0cm">{</p>
<p class="western" style="margin-bottom: 0cm">return &quot;Unknown&quot;;</p>
<p class="western" style="margin-bottom: 0cm">}</p>
<p class="western" style="margin-bottom: 0cm">else</p>
<p class="western" style="margin-bottom: 0cm">{</p>
<p class="western" style="margin-bottom: 0cm">$com = &quot;GET $file HTTP/1.1\r\nAccept: */*\r\nAccept-Language: de-ch\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows $</p>
<p class="western" style="margin-bottom: 0cm">fputs($fp, $com);</p>
<p class="western" style="margin-bottom: 0cm">/* Don&#39;t realy need to fetch output as it slows us down</p>
<p class="western" style="margin-bottom: 0cm">while (!feof($fp))</p>
<p class="western" style="margin-bottom: 0cm">{</p>
<p class="western" style="margin-bottom: 0cm">$cont .= fread($fp, 500);</p>
<p class="western" style="margin-bottom: 0cm">}</p>
<p class="western" style="margin-bottom: 0cm">*/</p>
<p class="western" style="margin-bottom: 0cm">fclose($fp);</p>
<p class="western" style="margin-bottom: 0cm">// $cont = substr($cont, strpos($cont, &quot;\r\n\r\n&quot;) + 4);</p>
<p class="western" style="margin-bottom: 0cm">// return $cont;</p>
<p class="western" style="margin-bottom: 0cm">}</p>
<p class="western" style="margin-bottom: 0cm">}</p>
<p class="western" style="margin-bottom: 0cm">?&gt;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9592"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Sun, 03/02/2013 - 22:14.</div>
    <div class="content">
     <p>Call for help,</p>
<p>Raspberry Pi stops posting data to remote domain after reboot when using 3G dongle (note 3G connection comes up and it is possible to browse internet ok on Raspberry Pi ). As mentioned above &quot;To rectify the process used <em>&quot;I&nbsp; have to login to dashboard Raspberry Pi and change remote url to false URL and save, then revert changes so url is correct and save again</em>&quot;.&nbsp;</p>
<p>First with false url</p>
<p lang="en" style="margin-bottom: 0cm"><font face="Times New Roman, serif"><font size="3">http://192.168.1.79/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=<u><strong>cms.wedo.i</strong></u>&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2<font size="3">ccccc</font></font></font></p>
<p lang="en" style="margin-bottom: 0cm">Second with correct url</p>
<p lang="en" style="margin-bottom: 0cm">&nbsp;<font face="Times New Roman, serif"><font size="3">http://192.168.1.79/emoncms/raspberrypi/set?frequency=8&amp;sgroup=210&amp;baseid=15&amp;remotedomain=<strong><u>cms.wedo.ie</u></strong>&amp;remoteapikey=487c485f1f0d5b9fcdb9fc4ea2ccccc</font></font></p>
<p>Here is wireshark trace file for above and screen shots of key extracts.</p>
<p>Wireshark_1 extract is after reboot and emoncms is not posting to remote domain.</p>
<p>wireshark_2 extract is after above process, note TCP starts and IP address changes now, raspberry pi starts posting to remote domain now.</p>
<p>wireshark_3 extract shows example of data sent</p>
<p>wireshark_zip is full wireshark file any needs wireshark program to open.</p>
<p>Any help or guidance appreciated.</p>
<p>Thanks</p>
<p>Peter</p>
<p>P.S. I&#39;m using raspberry pi, with ready to go SD, sakis3g with umtskeeper and 3G K3520. Note that above is onlyt an issue for 3G, it works perfect with ethernet connection and will post to remote domain automatically after every reboot.</p>
<p>Thanks Martin for above code I will try get this working as temporary solution.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9612"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: 3G Forward data to remote emoncms</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Mon, 04/02/2013 - 23:05.</div>
    <div class="content">
     <p>Some progress, I added Apikey of localhost to above code and it now updates post to remote domain data in localhost dashboard, tested by manually running the PHP script.&nbsp; However I do need to run it several times before raspberry Pi starts posting to remote domain (after reboot).</p>
<p>Thanks again Martin for your help. A little closer to standalone 3G solution.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/1903"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-e68bhCUV8LYbOuK_yX57UXlY1_pl1XBPSV_N-Xviwfc" value="form-e68bhCUV8LYbOuK_yX57UXlY1_pl1XBPSV_N-Xviwfc"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/1903 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:39:43 GMT -->
</html>
