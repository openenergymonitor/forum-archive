<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12305 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:43:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonPi WiFi Access Point &amp; 3G GSM USB dongle LCD | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonPi WiFi Access Point &amp; 3G GSM USB dongle LCD</h3>
        <span class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 06/03/2016 - 02:58</span>
        <div class="content"><p>Over the weekend I&nbsp;put together a guide to use the&nbsp;emonPi in WiFi access point&nbsp;mode for offline or 3G GSM installs. This would be perfect for installs at a site where there is no Wifi or Ethernet, a 3G dongle can be used to provide 3G connectively and and the emonPi can broadcast it&#39;s own Wifi&nbsp;AP to allow Internet access to local Emoncms and also interent via the 3G dongle! emonPi&nbsp;3G router anyone?</p>
<p><a href="https://github.com/openenergymonitor/emonpi/blob/master/docs/wifiAP.md">https://github.com/openenergymonitor/emonpi/blob/master/docs/wifiAP.md</a></p>
<p>Also related development&nbsp;the emonPiLCD script will now display info from Huawei&nbsp;HiLink&nbsp;3G dongles such as connection state&nbsp;and signal strength. This data is obtained directly via a huawei&nbsp;API (tested with E3231). Follow this guide to setup Huawei&nbsp;HiLink&nbsp;dongle:. Initial testing with this dongle is going well, I found I need to use a powered hub USB y-cable to provide extra power to the dongle. &nbsp;</p>
<p><a href="https://github.com/openenergymonitor/huawei-hilink-status" title="https://github.com/openenergymonitor/huawei-hilink-status">https://github.com/openenergymonitor/huawei-hilink-status</a></p>
<p><a href="../sites/default/files/IMG_20160305_241933173_TOP.jpg"><img alt="" src="../sites/default/files/IMG_20160305_241933173_TOP.jpg" style="width: 500px; height: 281px;" /></a></p>
<p>Pulling all these developments together I want to improve our support for mobile connectivity&nbsp;</p>
<p>&nbsp;</p>
<p><strong>To do:&nbsp;</strong></p>
<p>* Automate activating emonPi WiFi access point</p>
<p>*Build support for 3G dongles into emonPi image (plug n play)</p>
<p>*&nbsp;Test more dongles, can we find one that does not need a hub and has external antenna options?&nbsp;</p>
<p>*&nbsp;Test reliability and regaining GSM connection when dropped</p>
<p>*&nbsp;Test antenna options for poor reception areas&nbsp;&nbsp;</p>
<p>*&nbsp;Establish and optimize&nbsp;mobile data consumption, maybe emonPi autodetect mobile connection and turn on optimised data mode&nbsp;</p>
<p>*&nbsp;Investigate&nbsp;network operator&nbsp;options - eventually it would be great to be able to offer the emonPi with a 3G dongle + SIM card pre loaded with enough data for 12&nbsp;months of logging&nbsp;</p>
<p>*&nbsp;Display data consumption on emonPi LCD from dongle APi</p>
<p>*Test how emonPi can be accessed remotely via 3G, reverse ssh?&nbsp;</p>
<p><a href="https://github.com/juslop/3G-tunnel" title="https://github.com/juslop/3G-tunnel">https://github.com/juslop/3G-tunnel</a></p>
  <div class="forum-topic-navigation clear-block">
          <a href="12083.html" class="topic-previous" title="Go to previous forum topic">‹ New EventP Module on 9.3 2016.01.26</a>
              <a href="12263.html" class="topic-next" title="Go to next forum topic">phpmqtt_input is not connecting to broker ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-40157"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 08/03/2016 - 00:04.</div>
    <div class="content">
     <p>Following on from my exploration&nbsp;ino WiFi AP&#39;s I would like to improve the emonPi / emonBase setup process by having the unit broadcast it&#39;s own open-access wifi&nbsp;hotspot at first boot to allow the user to connect directly to it and enter their local WiFi network authentication details then save and reboot and the emonPi will then connect to users existing WiFi network as a client and turn off AP mode. <a href="11339.html">Trystan previously made a start on this</a></p>
<p>I propose the following:</p>
<p><strong>emonPi first boot:</strong></p>
<p>1. AP setup&nbsp;Network interfaces file assigning a static IP to wlan0</p>
<p>2.&nbsp;Hostapd&nbsp;service&nbsp;broadcasting a Wifi hotspot&nbsp;</p>
<p>3. isc-dhcp-server running to allow user to connect to hotspot via DHCP</p>
<p>4. User connects to hotspot and get&#39;s directed to Emoncms&nbsp;(or a custom Wifi config service), enters WIfi network name and password (for the emonPi to be able to display Wifi networks we would need a Wifi adapter to support both client and AP mode, is this possible?). User saves config and reboots.&nbsp;</p>
<p>5. Unit reboots with standard Raspberry Pi&nbsp;&nbsp;network interfaces file</p>
<p>6.&nbsp;Hostapd and&nbsp;isc-dhcp-server services disabled&nbsp;</p>
<p>6. wlan0 gets assigned an IP via DHCP from client network (static IP could also be an option)&nbsp;</p>
<p>7. Unit operates as usual in client mode</p>
<p>&nbsp;</p>
<p><strong>To do</strong></p>
<p>* Changing network interfaces file could be done via bash script&nbsp;using symlinks&nbsp;</p>
<p>*&nbsp;<a href="https://github.com/emoncms/wifi">Emoncms Wifi</a> module to be extended to add static IP config option&nbsp;</p>
<p>&nbsp;</p>
<p><strong>Questions</strong></p>
<p>1. Can Edimax Wifi&nbsp;dongle an Pi3 integrated Wifi&nbsp;operate both in AP and client mode at the same time?&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40158"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 08/03/2016 - 00:35.</div>
    <div class="content">
     <p>Some discussion on this topic here, I think managed (client) + AP mode should be possible on most Wifi hardware:</p>
<p><a href="http://superuser.com/questions/1035755/rtl8188-ap-and-client-mode-simultaneously-with-hostapd-in-linux?lq=1" title="http://superuser.com/questions/1035755/rtl8188-ap-and-client-mode-simultaneously-with-hostapd-in-linux?lq=1">http://superuser.com/questions/1035755/rtl8188-ap-and-client-mode-simult...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40165"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7978.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7978.png" alt="Bbaass_TMH&#039;s picture" title="Bbaass_TMH&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/7978.html" title="View user profile.">Bbaass_TMH</a> on Tue, 08/03/2016 - 07:26.</div>
    <div class="content">
     <p>Concerning emonPi / emonBase first boot in hotspot mode: would there be an option to re-enable this setting without doing a full factory reset? For those of us who use the system as a temporary installation and need to connect it to a different network on a semi-regular basis.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40167"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 08/03/2016 - 09:32.</div>
    <div class="content">
     <p>Yes certainly, it could be activated by hitting the Reset button.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40172"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 08/03/2016 - 16:57.</div>
    <div class="content">
     <p><em>&quot;I found I need to use a powered hub USB y-cable to provide extra power to the dongle. &quot;</em></p>
<p>By default the Pi&#39;s usb ports are restricted to 600mA, but the B+, 2B and 3B&nbsp;are capable of delivering up to&nbsp;1.2A via the usb ports&nbsp;providing the supply to the Pi&nbsp;is up to it. if you haven&#39;t already try adding</p>
<p><strong>max_usb_current=1</strong></p>
<p>to the end of /boot/config.txt and reboot.</p>
<p>I use this for connecting spinning&nbsp;hard-drives directly to Pi&#39;s without a separate hub, power supply or&nbsp;Y-lead, 1200 mA is plenty for most hdd&#39;s&nbsp;and I would hope, way more than you need for the 3g dongle.</p>
<p>Paul<br />
&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40182"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 08/03/2016 - 22:12.</div>
    <div class="content">
     <p>Woo nice find. Are there any side effects to enabling max current? Why not have it enabled by default?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40183"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 08/03/2016 - 23:14.</div>
    <div class="content">
     <p>I&#39;ve answered my on question (thank you Internet!)</p>
<p><em>&quot;All that max_usb_current=1 does is to set GPIO38 high, which in turn turns on a FET, which connects a second 39K resistor in parallel to an existing one, on pin 5 of U13, the AP2553W6 USB power manager, lifting the current limit from 0.6A to double that (1.2A), see no possible scenario there why the PI resets because of that, except in case the gate of the FET Q4 is somehow shorted to GND. Which could be caused by a production fault. Inspect Q4, as look if there is solder shorting pins together. Also R6 (resistor mounted between gate of Q4 and GND) should be 100K not 0 Ohm. U13, Q4 and R6 should be near the USB ports.&quot;</em></p>
<p><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=100244">Reading the Pi forums </a>is seems there are no negative impacts of having this turned on by default except the fact the Pi could potentially draw up to 2A from a PSU (if high power peripherals are plugged in)&nbsp;which could cause damage to cheap PSUs. The PSUs we ship with the emonPi are only 1.2A but high quality with dependable current limiting circuits. I see no problem powering a GSM USB stick, or USB HDD (maybe not both!).&nbsp;</p>
<p>Today I measured the power draw of a RasPi 3, I observed some peak current draws of 0.6A and idle around 0.3A. Pi2 is more like 0.4A peak and 0.26A idle.&nbsp;&nbsp;It would be interesting to measure Pi2 + USB wireless adapter to see if this is lower or higher then Pi3. Obviously the lower the better with regard to a 24/7 energy monitoring device!&nbsp;</p>
<p>Some official measurements:</p>
<p><a href="http://raspberrypi.stackexchange.com/questions/43285/raspberry-pi-3-vs-pi-2-power-consumption-and-heat-dissipation" title="http://raspberrypi.stackexchange.com/questions/43285/raspberry-pi-3-vs-pi-2-power-consumption-and-heat-dissipation">http://raspberrypi.stackexchange.com/questions/43285/raspberry-pi-3-vs-p...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40345"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Tue, 15/03/2016 - 13:30.</div>
    <div class="content">
     <p>Hi,</p>
<p>Facing issues when connecting emonbase to existing wifi/ethernet networks, I&#39;m very interested by these new EmonPi dev.</p>
<p>Would it be possible to modify emonhub to reduce the amount of data uploaded/downloaded through the 3G network ?</p>
<p>Eric</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40370"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 16/03/2016 - 12:27.</div>
    <div class="content">
     <p>Hi Eric,&nbsp;</p>
<p>Wifi&nbsp;connectivity should be improved with this update.&nbsp;</p>
<p>I have just updated emonhub to allow setting the buffer interval&nbsp;for posting to Emoncms.org.&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonhub/commit/050b6139f3bf07b0930dec13ecdc1debc7075a37" title="https://github.com/openenergymonitor/emonhub/commit/050b6139f3bf07b0930dec13ecdc1debc7075a37">https://github.com/openenergymonitor/emonhub/commit/050b6139f3bf07b0930d...</a></p>
<p>After updating emonhub&nbsp;(with a &nbsp;git pull)&nbsp;you can set in emonhub.conf&nbsp;<em>sendinterval= XX&nbsp;</em>where XX is the time in seconds between posts to emoncms.org. Default is 30s. e.g 600 would be 10min</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40372"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Wed, 16/03/2016 - 13:38.</div>
    <div class="content">
     <p>Hi,</p>
<p>Do you have a rough idea how it will affect the amount of data downloaded/uploaded by emonhub ? In your example, can we expect a reduction by 600/30 = 20 ? More ? Less ?</p>
<p>Eric</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40380"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 16/03/2016 - 20:38.</div>
    <div class="content">
     <p>Probably less, since we are sending the same amount of data it&#39;s just being buffered for longer. However we will reduce the amount of data used in the HTTP header request by sending in bulk. We are undergoing testing at the moment to find out for sure.&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40415"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonPi WiFi Access Point & 3G GSM USB dongle LCD</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 18/03/2016 - 14:15.</div>
    <div class="content">
     <p>Bit of progress on Wifi AP setup, I&#39;ve made a script to start and stop WiFi AP mode.&nbsp;</p>
<p>It works starting WiFi AP when emonPi is in normal Wifi mode without any rebooting&nbsp;and then when AP is stopped normal client mode is resumed.</p>
<p>The script also bridges&nbsp;eth1 (USB 3G dongle) to the WiFi&nbsp;AP. This will be useful when using emonPi with 3G dongle, this will allow a local user to connect to the emponPi&nbsp;via Wifi AP, to connect via SSH, view data locally and even get internet&nbsp;via the 3G dongle...an emonPi&nbsp;3G router!&nbsp;<br />
&nbsp;</p>
<p>The script assumes <a href="https://github.com/openenergymonitor/emonpi/blob/master/docs/wifiAP.md">hostpad&nbsp;and dhcp&nbsp;is setup as detailed in my guide</a>. Script has&nbsp;only been tested on RasPi3 using standard version of hostapd. Using hostapd&nbsp;with Edimax dongle is a pain since it requires compiling a upstream version from source. For this reason all development in this topic will be done on RasPi3 / offical&nbsp;Broadcom Wifi dongle.&nbsp;</p>
<p>To install, git pull latest emonpi master and symlink the script:</p>
<p>cd emonpi</p>
<p>git pull</p>
<pre>
sudo ln -s /home/pi/emonpi/wifiAP /sbin/wifiAP</pre><p>​then run&nbsp;</p>
<pre>
sudo wifiAP start</pre><p>This will start a Wifi AP with SSID emonPi and password &#39;raspberry&#39;&nbsp;</p>
<p>Then to stop</p>
<pre>
sudo wifiAP stop</pre><p>The final piece to allow the AP to be used for fist boot setup&nbsp;&nbsp;is the ability to operate in both client+AP mode at the same time to allow scanning for networks while connected in AP mode. This is technically possible. The raspi3 supports AP+client mode at the same time (see output for $ lw list). I&#39;m just not sure how to configure...I&#39;m monitoring some topics on the RasPi&nbsp;forums for any info.</p>
<p><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=36&amp;t=138730&amp;p=931772#p931772" title="https://www.raspberrypi.org/forums/viewtopic.php?f=36&amp;t=138730&amp;p=931772#p931772">https://www.raspberrypi.org/forums/viewtopic.php?f=36&amp;t=138730&amp;p=931772#...</a></p>
<p><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=91&amp;t=134614&amp;p=931751#p931751" title="https://www.raspberrypi.org/forums/viewtopic.php?f=91&amp;t=134614&amp;p=931751#p931751">https://www.raspberrypi.org/forums/viewtopic.php?f=91&amp;t=134614&amp;p=931751#...</a></p>
<p>I think what&#39;s needed to to create a virtual interface. I&#39;ve tried this method but am failing to get the virtual interface to bind to the physical adapter (driver issue?):&nbsp;</p>
<p><a href="http://superuser.com/questions/615664/creating-wifi-access-point-on-a-single-interface-in-linux " title="http://superuser.com/questions/615664/creating-wifi-access-point-on-a-single-interface-in-linux ">http://superuser.com/questions/615664/creating-wifi-access-point-on-a-si...</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12305"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-tTHZn3wtcPQNbgy0beuec41JQT7tb6feQrBKycMB8Dc" value="form-tTHZn3wtcPQNbgy0beuec41JQT7tb6feQrBKycMB8Dc"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
