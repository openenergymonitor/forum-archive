<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12161 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:55:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Connecting emonTX to Raspberry Pi | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Connecting emonTX to Raspberry Pi</h3>
        <span class="submitted">Submitted by <a href="../user/9454.html" title="View user profile.">Bergmam</a> on Thu, 11/02/2016 - 08:31</span>
        <div class="content"><p>Hello,</p>
<p>&nbsp;</p>
<p>I am trying to use a emonTx with a CT Clamp to send data to my Raspberry Pi running the image found at <a href="10729.html" title="http://openenergymonitor.org/emon/node/10729">http://openenergymonitor.org/emon/node/10729</a> with a RFM12B chip on it.</p>
<p>My problem is that I have absolutely no idea how to achieve this. I have been looking at <a href="https://learn.openenergymonitor.org/?redirect=rfm12b2#appendix1" title="http://openenergymonitor.org/emon/buildingblocks/rfm12b2#appendix1">http://openenergymonitor.org/emon/buildingblocks/rfm12b2#appendix1</a> to try and figure out but I have no idea how or where to run the code snippets.</p>
<p>I also found <a href="https://github.com/openenergymonitor/RFM12B_Simple" title="https://github.com/openenergymonitor/RFM12B_Simple">https://github.com/openenergymonitor/RFM12B_Simple</a>, but again - I have no idea in what context or how to run the code.</p>
<p>If anyone could give me a brief tutorial or point me to the direction of resources that can help me that would be awesome.</p>
<p>&nbsp;</p>
<p>Best regards,</p>
<p>Anton</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12176.html" class="topic-previous" title="Go to previous forum topic">‹ Power Usage Monitor directly from breaker panel</a>
              <a href="12174.html" class="topic-next" title="Go to next forum topic">Inputs to Feeds, I&#039;m learning some but still need a bit of help ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-39323"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 11/02/2016 - 10:37.</div>
    <div class="content">
     <p>Firstly, do not try to clamp a current transformer to the cable. If you have the one from the shop, the ferrite core is very brittle and will shatter if you apply any significant pressure on it. It should be loose on its cable.</p>
<p>Second, if you run your emonTx with the default sketch that should have been installed when you received it, it should work. If you&#39;ve overwritten that sketch, you can find it on &quot;Software&nbsp;Github&quot; - it&#39;s called &quot;<a href="http://emontxv3_4_discretesampling/">emonTxV3_4_DiscreteSampling</a>&quot;.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39324"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Thu, 11/02/2016 - 11:19.</div>
    <div class="content">
     <p>It&#39;s admirable that you Brits like to preserve the English language, but this is the world-wide-web and a quick google search on &quot;current clamp&quot; suggests you&#39;ve long ago lost control of that term.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39325"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9454.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bergmam&#039;s picture" title="Bergmam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/9454.html" title="View user profile.">Bergmam</a> on Thu, 11/02/2016 - 12:33.</div>
    <div class="content">
     <p>So I attach the current clamp to the emonTx and restart it as said in chapter 3 of <a href="../modules/emonTxV3.html" title="http://openenergymonitor.org/emon/modules/emonTxV3">http://openenergymonitor.org/emon/modules/emonTxV3</a>, but what I get from emoncms is that all Rx Variables are &quot;inactive&quot;. Why?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39326"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 11/02/2016 - 12:34.</div>
    <div class="content">
     <p>And who invented&nbsp;the world-wide-web? (I didn&#39;t say &quot;Internet&quot;.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39327"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 11/02/2016 - 12:40.</div>
    <div class="content">
     <p>Back on-topic.&nbsp;How are you powering the emonTx. If you&#39;re using the AC adapter, does the LED in the&nbsp;emonTx&nbsp;flash once every 10s?&nbsp;Are you getting any indication that the RFM12Pi&nbsp;receiver is working - does its&nbsp;LED flash in time with the one in the emonTx?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39328"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9454.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bergmam&#039;s picture" title="Bergmam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/9454.html" title="View user profile.">Bergmam</a> on Thu, 11/02/2016 - 12:43.</div>
    <div class="content">
     <p>I am powering the emonTx with AC and the light is flashing every 10 seconds. The RFM12Pi, however, is not giving any signs of life - no LED flashing.</p>
<p>&nbsp;</p>
<p>What pins on the raspberry are the RFM12Pi supposed to be connected to?<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39329"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 11/02/2016 - 17:25.</div>
    <div class="content">
     <p>There is a photo <a href="http://wiki.openenergymonitor.org/index.php/RFM69Pi_V3">here</a>. It&#39;s the &#39;69 radio module but the <a href="http://wiki.openenergymonitor.org/index.php/RFM12Pi_V2">photo of yours</a>&nbsp;doesn&#39;t show the pin alignment at all clearly. In words - right on the end. At the bottom of the RFM12Pi V2 page is a piece about debugging.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39339"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9454.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bergmam&#039;s picture" title="Bergmam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/9454.html" title="View user profile.">Bergmam</a> on Fri, 12/02/2016 - 09:39.</div>
    <div class="content">
     <p>Then it was already placed correctly. I guess I&#39;ll follow the debugging and see if anything comes up.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39348"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9454.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bergmam&#039;s picture" title="Bergmam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/9454.html" title="View user profile.">Bergmam</a> on Fri, 12/02/2016 - 13:31.</div>
    <div class="content">
     <p>When running minicom, I get some packages from node 10, like these:</p>
<p>10 0 0 0 0 0 0 0 0 238 95 0 0<br />
&nbsp;10 0 0 0 0 0 0 0 0 210 95 0 0<br />
&nbsp;10 0 0 0 0 0 0 0 0 194 95 0 0<br />
&nbsp;10 0 0 0 0 0 0 0 0 201 95 0 0<br />
&nbsp;10 0 0 0 0 0 0 0 0 220 95 0 0<br />
&nbsp;10 0 0 0 0 0 0 0 0 218 95 0 0</p>
<p>Does this look correct? When looking at emoncms Node 10:emonTx is still set as inactive.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39357"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 13/02/2016 - 00:16.</div>
    <div class="content">
     <p>That could well be correct, it would be difficult to say as you have not said anything about what emontx you have or what firmware its running, but that is&nbsp;a valid packet, possibly&nbsp;for either a&nbsp;late emontx v3.2 or an early emontx&nbsp;v3.4 running stock firmwares, or even a emontx&nbsp;shield.</p>
<p>I expect it is power1 power2 power3&nbsp;power4&nbsp;ACvoltage temperature, 12 bytes = 6 signed ints.</p>
<p>If you take a look at the emonhub.log you will probally see errors telling you that the &quot;Node 10&quot; packet doesn&#39;t fit the datacodes&nbsp;definition, that is defined in emonhub.conf and fir the image you have it will be pre-configured for a later emonTx firmware.</p>
<p>You will need to change the configuration to suit your device, something like this should get you going</p>
<p>[[10]]</p>
<p>&nbsp; &nbsp; [[[rx]]]</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;names =&nbsp;power1&nbsp;power2&nbsp;power3&nbsp;power4&nbsp;ACvoltage&nbsp;temperature</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;datacode = h</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;scales = 1, 1, 1, 1, 0.01, 0.1</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39440"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9454.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bergmam&#039;s picture" title="Bergmam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting emonTX to Raspberry Pi</h3>

    <div class="submitted">Submitted by <a href="../user/9454.html" title="View user profile.">Bergmam</a> on Mon, 15/02/2016 - 12:26.</div>
    <div class="content">
     <p>I tried to change the configuration according to the suggestions above, but it still says all nodes are inactive after a reboot. I am currently using a emonTx V3.</p>
<p>I cannot see any errors in the emonhub.log regarding the datacode definition, what I do see however is this:<br />
2016-02-12 11:28:00,227 WARNING MainThread Device communication error - check settings</p>
<p>Again - the LED on the RFM12pi is not flashing.<br />
&nbsp;</p>
<p>I&#39;d like to provide some more information as well. Where do I find what firmware version I am running?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12161"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-EyBrAvZRTDYW3QNFXZ4fxYWPhSsg99HiZyxIQNq1sIU" value="form-EyBrAvZRTDYW3QNFXZ4fxYWPhSsg99HiZyxIQNq1sIU"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
