<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11108 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:58:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Simple RPi setup to measure power consumption with RPi and a 4ch ADC | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Simple RPi setup to measure power consumption with RPi and a 4ch ADC</h3>
        <span class="submitted">Submitted by <a href="../user/8568.html" title="View user profile.">Oli</a> on Wed, 12/08/2015 - 13:55</span>
        <div class="content"><p>Hi all,</p>
<p>the OEM project fascinates me a lot and I also want to get started (despite limited electronics background so far).&nbsp; For first steps, I have researched the OEM website and also some other online resources to have some own thoughts about how to create a simple power logger for my home.&nbsp; Some questions came to my mind, why it is not possible to set things up even more easily, and I would love to hear your thoughts, what I am missing.</p>
<p>For now, I was wondering what is absolutely necessary to measure (estimated) power readings off of three phases.&nbsp; I would use the SCT-013-030 transformers with built in 62 ohm load, that already delivers an AC voltage proportional to a max. current of 30A. Can I simply connect the two outputs of the converter to the GND and A0 of a ADS1115 based ADC, which is then read out via I2C from a RPi board?&nbsp; Sampling is more than 800 samples per second with 16 bit depth, adjustable input range would be set to -1 to 1 V. The ADC would even allow for three more inputs, so I could connect two more phases and have one spare channel to also implement conversion of a voltage signal in future improvement to have more precise power readings. The digital signal would then be converted to power according to the description in the calibration section.</p>
<p>Using a RPi and the DAC board, I was also wondering, why it is not possible to also use the RPi itself to connect to the online database and send the measured data out. Having a USB wireless adapter on the Pi, could this be done?</p>
<p>I am aware that these are just thoughts and there is still a lot of work to have everything implemented and programmed.&nbsp; But could you please comment on feasibility of my ideas.</p>
<p>Thanks alot, Oli</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11123.html" class="topic-previous" title="Go to previous forum topic">‹ Intercept Geo Minim Energy Monitor Data</a>
              <a href="11117.html" class="topic-next" title="Go to next forum topic">emonTx V3.4 + pulse sensor + CTs and AC adapter: OK? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-33325"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8568.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Oli&#039;s picture" title="Oli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Simple RPi setup to measure power consumption with RPi and a 4ch ADC</h3>

    <div class="submitted">Submitted by <a href="../user/8568.html" title="View user profile.">Oli</a> on Thu, 13/08/2015 - 17:51.</div>
    <div class="content">
     <p>Any ideas or comments on this?&nbsp; Maybe my thoughts are too naive, sorry if so - I am very excited but also new to the topic.&nbsp; Can anyone give me a hint what I am overseeing?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33333"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Simple RPi setup to measure power consumption with RPi and a 4ch ADC</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 13/08/2015 - 22:53.</div>
    <div class="content">
     <p><i>"I was also wondering, why it is not possible to also use the RPi itself to connect to the online database and send the measured data out. Having a USB wireless adapter on the Pi, could this be done?"</i></p>
<p>I think you're very close to describing the emonPi! The emonPi is a Raspberry Pi with a 2+1 channel emonTx in one box, it has Ethernet or can have a WiFi dongle for connectivity. So not only can it be done, it has been done - and more, the RPi can also be a web server on your LAN running the emonCMS database locally (and with full functionality if you add a hard disc).</p>
<p>But, I'm not too clear on exactly what you want to measure. You mention 3 phases, and yes, to know the power totally accurately you must measure the current and voltage on each phase, because although the aim is to have the 3 currents equal ("balanced") when you'd only need to measure one phase, that never happens in practice. However, we find that we can assume that the three voltages are sufficiently close to each other to not incur too much error. Therefore, although 6 inputs (3 x current, 3 x voltage) would be best, 3 current and one voltage is normally adequate.</p>
<p>I would question the suitability of the ADS115 - 800 samples per second is only 16 samples per cycle, whereas the Arduino ADC can measure approximately 50 sample pairs (voltage and current) per cycle. I think what you are gaining on resolution with 16 bits, you are more than losing on the number of samples per cycle. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33361"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8568.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Oli&#039;s picture" title="Oli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Simple RPi setup to measure power consumption with RPi and a 4ch ADC</h3>

    <div class="submitted">Submitted by <a href="../user/8568.html" title="View user profile.">Oli</a> on Sat, 15/08/2015 - 10:50.</div>
    <div class="content">
     <p>Robert, thanks a lot for your input.</p>
<p>Yes, you are absolutely right - thinking about it, having only 800 samples is too little.&nbsp; So a better ADC would probably be the ADS1015, which has only 12bit depth but roughly four times denser sampling, resulting in 33 points per half-sine.&nbsp; So that should probably be enough and overcompensate for the lower resolution. The nice thing about it is the integrated programmable amplifier, so the input range can be already be set to what is delivered by CTs with integrated resistors (e.g. -1.024 .. 1.024 V input range), resulting in a very slim board.</p>
<p>With that I plan to analyse the signal of three CTs from the three lines supplying my house.&nbsp; The fourth channel would simply digitize the AC input from a transformer, but as you describe only of the first phase.&nbsp; The reason is that only the first phase drives essentially the whole house, while the second and third phases only supply stove and oven.&nbsp; So on one side, I want to have more precision on the power consumption of all the appliances except for kitchen. And on the other hand, I also simply don&#39;t have the AC signals of phases two and three readily available.</p>
<p>This approach also allows for a phased development, starting with only one channel in apparent power analysis mode, which would then easily be extended towards three phases apparent consumption.&nbsp; The next step would be to also analyse the AC signal and calculate the precise consumption on phase one and finally make use of your suggestion that phase two and three have very similar AC voltage levels but shifted by 120 and 240 degree.</p>
<p>Well, so far its only planning and I will have to see how far I get.&nbsp; Nevertheless, thanks again for your input, it is highly appreciated.&nbsp; I will certainly be back at some point with more questions and - hopefully - in the end with decent results.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11108"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-zjIsOfDOw0K0FASAsts9cr0ip22eEAw82gKzLagiJTo" value="form-zjIsOfDOw0K0FASAsts9cr0ip22eEAw82gKzLagiJTo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
