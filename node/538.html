<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/538 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:50:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emoncms 3 issues | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emoncms 3 issues</h3>
        <span class="submitted">Submitted by Guest on Tue, 27/03/2012 - 21:05</span>
        <div class="content"><p>Hello</p>
<p>Currently trying to upload elapsed power consumption to emoncms3 (local installation)</p>
<p>Storing using the log to feed works ok. Although the timstamp is several hours ahead of my time. The time is correct on my NAS at which the emoncms is running. Is emoncms&nbsp;doing any interpretation of the time ?</p>
<p>when activating the &quot;kwh to kwh/d &quot; input procesor&nbsp;nothing is stored for that feed. Have tried using the&nbsp;the &quot;kwhinc to&nbsp;kwh/d &quot; input&nbsp;procesor&nbsp;and that stores data when i look in the tables using phpmyadmin. But the &quot;kwh&nbsp;to&nbsp;kwh/d &quot; input&nbsp;procesor is best for my task. Also have problems with getting the &quot;update feed @ time &quot; input&nbsp;procesor to work.</p>
<p>Anyone seing the same issues or is just my setup ?</p>
<p>Best regards S&oslash;ren</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="549.html" class="topic-previous" title="Go to previous forum topic">‹ emonlcd solar sketch won&#039;t compile - SOLVED</a>
              <a href="519.html" class="topic-next" title="Go to next forum topic">Monitor your Servers CPU temperature using EmonCMS ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-3566"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smi73&#039;s picture" title="smi73&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 3 issues</h3>

    <div class="submitted">Submitted by smi73 (not verified) on Wed, 28/03/2012 - 19:51.</div>
    <div class="content">
     <p>Also get the following error text when i create a new data input.</p>
<p>Warning: Cannot modify header information - headers already sent by (output started at /share/MD0_DATA/Web/Controllers/process_controller.php:72) in /share/MD0_DATA/Web/Controllers/process_controller.php on line 65</p>
<p>But it works...</p>
<p>Note this is based on the latest emoncms3 release.</p>
<p>&nbsp;</p>
<p>/S&oslash;ren</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3607"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 3 issues</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sat, 31/03/2012 - 16:14.</div>
    <div class="content">
     <p>Hello&nbsp;S&oslash;ren</p>
<p>First as regard to time, emoncms gets the server time using php time() (line 25 api_controller.php) and converts it into date time format using:&nbsp;$time = date(&quot;Y-n-j H:i:s&quot;, $time); (line 119 feed_model.php). This is then stored in the mysql database. It is then retrieved using strtotime() which converts it back into a unix timestamp. The initial idea with storing it as a datetime string was that it was easy to analyze when browsing the database manually, however it may be that it isn&#39;t actually the best/most efficient format to store it in.</p>
<p>Sorry for the kwh to kwhd&nbsp;issue I had forgotten to include automatic setup for the database table needed for that processor to work. I&#39;ve fixed it and committed the changes to the github&nbsp;repo.</p>
<p>I cant seem to replicate the &quot;Cannot modify header information&quot; warning,&nbsp;</p>
<p>Thanks</p>
<p>Trystan</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3637"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smi73&#039;s picture" title="smi73&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 3 issues</h3>

    <div class="submitted">Submitted by smi73 (not verified) on Mon, 02/04/2012 - 15:32.</div>
    <div class="content">
     <p>Hello Trystan</p>
<p>Thanks for the feedback, highly appriciated.</p>
<p>Applied your newest release to my NAS server. Now the Kwh to Kwhd input processor works.</p>
<p>Still getting the &quot;Cannot modify header information&quot; warning.</p>
<p>Regarding the time issue. I am not an PHP expert,but I created a small test script containing the time function that you use. From that output I can see that the time reported from PHP to the database is pure UTC time without any timezone offset.</p>
<p>But my mySQL database is interpreting this somehow, because the time that gets in is not the one I can read out.</p>
<p>This is probaly for the new feature wish list. Set timezone info for each account. This would be a nice feature especially for the hosted version of EmonCMS, where people don&#39;t have the possibility to set the timezone for the mySQL database.</p>
<p>Best regards</p>
<p>S&oslash;ren</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/538"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-D7NkESa5yIZPjb4F0NjGemTswvgps4p4sw38-4AKyX0" value="form-D7NkESa5yIZPjb4F0NjGemTswvgps4p4sw38-4AKyX0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/538 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:50:20 GMT -->
</html>
