<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/331 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:42:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>EmonTX 1CT Voltage questions regarding calibration | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">EmonTX 1CT Voltage questions regarding calibration</h3>
        <span class="submitted">Submitted by Guest on Wed, 04/01/2012 - 15:17</span>
        <div class="content"><p>Hi All,</p>
<p>I posted this yesterday in the &quot;General&quot; section but maybe this is more applicable in the &quot;Software&quot; area - I hope the double post is not an issue...</p>
<p>&nbsp;</p>
<div class="content">
<p>Ive recently completed a build of the EmonTX (previously using Mains Non-Invasive V3).</p>
<p>After looking through the various firmware options I've been using the following firmware <a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTx_1CT_Voltage"><font color="#3399cc">https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTx_1CT_Voltage</font></a></p>
<p>as I wish to monitor both voltage and current (one CT). To do this im  using a 9v transformer to measure mains voltage. However, my values are  off by quite a bit.....for example the EmonTX output monitored via its  serial port (real, apparent, VRMS, IRMS, supplyV)</p>
<p>7.59 82.53 343.41 0.24 3164</p>
<p>In relation to the firmware above - could anybody explain the numbers in the calibration code here...</p>
<p>emon1.calibration(357.6,126.5,0); <br />
&nbsp; emon1.calc(20,2000,vcc );</p>
<p>I think I need to substitute these for my own. Im also confused as  the previous V3 firmware had declarations for the number of CT turns,  burden resistor value etc. to calculate the scaling factor - none of  these are mentioned in the firmware above. Thus, where my mains voltage  is 240V (238V at present) the EmonTX is returning 343.41.</p>
<p>In addition, I have the CT connected at present to channel 1 (changed  code to reflect this), however there is no wire through it at present  so it cannot be reading any current. Yet however, Im showing an apparent  and real power measurement. Obviously this would introduce errors into  the system at times whereby voltage is being measured byt current  consumption is zero or practically zero. Indeed with the above example  the current consumption is nearly 0 at 0.24a but still the power  calculations are off.</p>
<p>I am using an SCT-013-000 CT&nbsp; - it came with the EmonTX kit. Anybody know how many turns is on this CT?</p>
<p>Thanks in advance for your time - hopefully somebody can shed some  light on this - or explain how I can calibrate the EmonTX properly.</p>
<p>&nbsp;</p>
<p>Kind regards</p>
<p>Gerard Gallagher</p>
</div>
  <div class="forum-topic-navigation clear-block">
          <a href="457.html" class="topic-previous" title="Go to previous forum topic">‹ Amahi home server</a>
              <a href="409.html" class="topic-next" title="Go to next forum topic">how to upload timestamped data to emoncms? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-3264"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="khenderick&#039;s picture" title="khenderick&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX 1CT Voltage questions regarding calibration</h3>

    <div class="submitted">Submitted by khenderick (not verified) on Sun, 26/02/2012 - 20:45.</div>
    <div class="content">
     <p>&nbsp;Anybody here has a good method of calibrating?</p>
<p>From what I understand, the calibration parameters set the VCAL, ICAL and PHASECAL variables. However, while VCAL and ICAL are used to get from the measured current and voltage to Irms and Vrms, PHASECAL is used to get from the measured voltage to a phase corrected voltage to calculate the real power. This means that the VCAL and ICAL are not used to calulate the real power usage, as the VCAL and ICAL are applied later on:</p>
<p>This is what I guess:</p>
<ul>
<li>Alter VCAL to get the voltage correct</li>
<li>Alter ICAL to get the current correct</li>
<li>Alter PHASECAL so that real and apparent power are correct</li>
</ul>
<p>However, if the measured current is wrong, how can the measured real power ever be correct? Or is this where the V_RATIO and I_RATIO are helping out? What are those values anyway?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/331"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-ptOPMSueL6E2lyr9Tr7tGMR7L8AzMta8Fl3zF0akJRo" value="form-ptOPMSueL6E2lyr9Tr7tGMR7L8AzMta8Fl3zF0akJRo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
