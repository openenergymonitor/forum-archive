<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/837 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:38:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>DC monitoring 600V/15A | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">DC monitoring 600V/15A</h3>
        <span class="submitted">Submitted by Guest on Thu, 12/07/2012 - 20:51</span>
        <div class="content"><p>Hi all,</p>
<p>Just got some time to work on my emon setup again.</p>
<p>I'd like to monitor the incoming/DC side of my PV system before it enters the inverter.</p>
<p>Voltage max is about 600V and max of 15Amps.</p>
<p>For measuring Amps i'm planning on using an Alegro ACS715 with range from 0-30A..</p>
<p>For measuring the Voltage i'm planning on using a resistordivider of 1K/180K so it will bring the 600V down to 3.315V</p>
<p>If i'm correct&nbsp; a 180K/2W&nbsp; and 1K/0.25W would be fine.</p>
<p>The only thing that concerns me is that if something happens to the 180K there might be a high voltage input on the AVR. How can i prevent this ? I've read about having two diodes (one from ground and one from Vcc centered in the analoginput of the AVR) would prevent any higher input on the analoginput then Vcc, but will this work for 600V also ?</p>
<p>&nbsp;</p>
<p>Thanks,</p>
<p>Paul</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="6405.html" class="topic-previous" title="Go to previous forum topic">‹ emonTx just out of range of RFM12Pi</a>
              <a href="6412.html" class="topic-next" title="Go to next forum topic">How many CTs needed to monitor US 230V heat pump?  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-5202"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 12/07/2012 - 22:14.</div>
    <div class="content">
     <p>You need to be VERY careful with what you are proposing. Firstly, there is no question that 600V d.c. does not take prisoners. Unless you are completely confident that what you are doing is safe, don't do it. There is a reason why we recommend clamp-on current transformers and proprietary AC adapters.</p>
<p>Secondly, if you do not have a means of isolating the panel, you must treat it as live at all times, and only make connections in complete darkness.</p>
<p>Having got that out of the way, you need to think the whole idea through. How are you going to power your (presumably) Arduino? Because it will be connected one way or another to the d.c. side of the inverter, you need a power supply to feed it that is isolated to at least 1kV (because you do not know where the panel voltage sits in relation to earth and the mains). How are you going to program it and use the serial monitor? You cannot connect anything to it unless the panel is isolated or dark, and then it won't be working. If you can get over those hurdles, your dropper resistor needs to be rated at 600 V minimum. Most resistors you will buy are rated 250V. So you will need a chain of at least 3 equal resistors in series just to ensure you do not exceed the rated voltage per resistor.</p>
<p>If you are still convinced you know enough to do this safely (and I wonder as you are questioning the calculation of resistor values), then I would use somewhat higher values than you suggest. I would make the 'top' resistor 3 x 1Meg in series, and the 'bottom' 22k, which will give you a bit under 4.4 V at the ADC input.&nbsp; Ordinary metal film 0.4 W resistors should be adequate. The current down the divider chain will be 200&micro;A, so the internal protection diodes of the analogue input can cope with that. Think carefully how you are going to mount the resistors - you cannot use stripboard. You also need to follow exactly the manufacturer's recommendations when mounting the currrent sensor. And think about the wire you will use to connect to the 600 V rails - is that rated at more than 600 V?</p>
<p>(I had to do a very similar thing on a d.c. motor at 800 V - it is not simple).</p>
<p>I'll repeat what I wrote at the top: Unless you are completely confident that what you are doing is safe, don't do it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5203"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Thu, 12/07/2012 - 23:06.</div>
    <div class="content">
     <p>&nbsp;Hey Paul,</p>
<p>I second Robert on the safety stuff. Messing with 600V DC is like playing with nitroglycerin. I've worked in a PV company here in Germany and I've seen some really nasty pictures of workers electrocuted by such high DC voltages. Very very ugly stuff.</p>
<p>Also, messing with your system like that may breach your contract with the utility (I assume you're feeding in).</p>
<p>If I were you I would try to find a hack (or code one) to read these values from your inverter and post them to emonCMS with the help of an Arduino. What's the inverter in your setup?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5204"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="prensel&#039;s picture" title="prensel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by prensel (not verified) on Fri, 13/07/2012 - 05:13.</div>
    <div class="content">
     <p>Hi Robert, Amin</p>
<p>First of all I understand your concerns about the high Voltages and I agree with them. But having that said this will not scare me at this time and taking careful precautions I&nbsp;reccon it can be done and thats the big challenge ;-) &nbsp; I did study electronics about 25 years ago and switched to ICT later on so im not completely unknown with the materials.</p>
<p>Background: I have several different PV systems setup around my house with varying Voc voltages of between 135V and 450V. Also using different types of inverters like StecaGrid500, StecaGrid2010 and Ingeteam feeding in on the net (no contract, we dont need that in The Netherlands upto 5000kWh/year ) but also a MorningstarTristar on a 24V/450Ah batterybank. I'm already monitoring the AC side of some inverters but like to get the DC side monitored also. The whole systems is finally going to be around 18.000Wp scattered all over the place so thats a lot of panels (about 100) and inverters. Most of them are small strings of 3 panels and some 10 panels and i like to monitor each string seperately. Having a string of 10 panels means a Voc of 450V but since i like to get safe i want the sensors to be able to read upto 600V. Amps will be no more then about 12A per string so the ACS715 with 30A max would be fine for that.</p>
<p>Since i have a max of 4 strings per inverter i'm going to need at least 8 analog inputs so im thinking about using a Jeenode with Jeelabs Input plug giving me 16 analog channels. The Jeemon is going to be polled by the emonbase (nanoderf). This would be (for me) the easiest part.</p>
<p>For the ACS715 i'm using Pololu #1186 breakout boards stacked to a carrier board. PV wires soldered to the ACS715 clamps and capable upto 1000V. Everytring neat in a suitable weatherproof box with chassis&nbsp;MC4 connectors on the outside. There's also going to be a DC switch for shutting the panels down before disconnecting the MC4 cables. </p>
<p>For the resistor divider i will make up my own print (still having to find that old UV&nbsp;box somewhere on the attic...) so that shouldnt be a problem also. I'm thinking of some sort of galvanic isolation between the dividers output and arduino input but havent figured that out.</p>
<p>Providing power for the Arduino i first thought of using an AC adapter on the AC side of the inverter but that wouldnt work with the Tristar inverter so i have to take power from the DC side and have it battery backed up during nights or lesser sunny days.</p>
<p>What do you think sofar ?</p>
<p>&nbsp;</p>
<p>Paul</p>
<p>&nbsp; &nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5206"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nico&#039;s picture" title="nico&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by nico (not verified) on Fri, 13/07/2012 - 11:34.</div>
    <div class="content">
     <p>We use these:</p>
<p><a href="http://uk.rs-online.com/web/p/current-transducers/0286361/" title="http://uk.rs-online.com/web/p/current-transducers/0286361/">http://uk.rs-online.com/web/p/current-transducers/0286361/</a></p>
<p>They are insanely expensive and need a linear, non inductive resistor to work but they are very accurate and offer isolation.</p>
<p>There is a cheaper way using an optocoupler to provide isolation but all the parts are SMD so you wold need to design a PCB to get that to work.</p>
<p>If you want I can send you a schematic.</p>
<p>I would definately not advise you to connect your arduino to the PV&nbsp;without isolation, as the negative of the PV array wont be at ground, so connecting anything to the arduino (you, pc or anything else that is grounded) will probabily break the thing you connect it to.</p>
<p>Nico</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5209"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nico&#039;s picture" title="nico&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by nico (not verified) on Fri, 13/07/2012 - 11:51.</div>
    <div class="content">
     <p>That LEMs need a +-15 power supply so that might be a bit of a problem. This is the schmatic of the cheaper technique and I think actually you can get all the components as through hole.</p>
<p>You need an isolated 5v - 15v DC&nbsp;DC converter to power the HV side with this schematic</p>
<p><a href="http://uk.farnell.com/xp-power/ik0515sa/dc-dc-converter-0-25w-one-15v-o/dp/1859048" title="http://uk.farnell.com/xp-power/ik0515sa/dc-dc-converter-0-25w-one-15v-o/dp/1859048">http://uk.farnell.com/xp-power/ik0515sa/dc-dc-converter-0-25w-one-15v-o/...</a></p>
<p>Nico</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5211"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="prensel&#039;s picture" title="prensel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by prensel (not verified) on Fri, 13/07/2012 - 13:56.</div>
    <div class="content">
     <p>Nico,</p>
<p>For powering the Arduino and sensors i might just use an 15V AC/DC adapter when using the unit for grid-tied inverters and using a DC-DC converter from 24V -&gt; 15V when used on the Morningstar controller. &nbsp; The 'solarbox' (as i might call it) wil have the parts for making 5V out of 15V and have a small battery backup for its own use. This way i have the same box regardless to which inverter/controller its used and i dont have to mess with the HighVoltage side.</p>
<p>For the galvanic isolation of the Voltage part i'm just looking into Hall-effect voltage sensors, these work on 15V also but also found some other linear opto-isolation solutions.</p>
<p>The part you mention is pretty expensive !</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5216"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nico&#039;s picture" title="nico&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by nico (not verified) on Sat, 14/07/2012 - 16:17.</div>
    <div class="content">
     <p>All of that seems to make sense.</p>
<p>For some reason the schematic didn't seem to attach properly in my last post. I'm using this approach for measuring the DC link voltage of a 3 phase inverter.</p>
<p>I use an HCPL-788J for the optical isolation</p>
<p><a href="http://uk.farnell.com/avago-technologies/hcpl-788j-000e/optocoupler-smd/dp/9994734?Ntt=hcpl-788j" title="http://uk.farnell.com/avago-technologies/hcpl-788j-000e/optocoupler-smd/dp/9994734?Ntt=hcpl-788j">http://uk.farnell.com/avago-technologies/hcpl-788j-000e/optocoupler-smd/...</a></p>
<p>It needs a 5v supply referenced to the HV side so I use a 5-15v DC-DC converter, followed by a 5V linear regulator (LM78L05).</p>
<p>For measuring the DC link the circuit just uses a voltage divider. I've got 4 resistors in series and I measure the voltage across the bottom one.</p>
<p>I've also got a RC filter on the input ot the opto isolater to reduce the bandwidth a bit.</p>
<p>Let me know if you need any more information about this circuit. The total cost (+pcb) is about <span class="template-min-width"><span class="nowrap mfProductDescriptionAndPrice">&pound;10.</span></span></p>
<p><span class="template-min-width"><span class="nowrap mfProductDescriptionAndPrice">Nico</span></span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5217"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 14/07/2012 - 16:24.</div>
    <div class="content">
     <p><a title="View user profile." href="../user/1331.html">nico</a></p>
<p>You need to click &quot;attach&quot; after you upload the file and before you save the post. I've done it for you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5239"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="prensel&#039;s picture" title="prensel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by prensel (not verified) on Mon, 16/07/2012 - 13:02.</div>
    <div class="content">
     <p>Hi Nico, </p>
<p>&nbsp;</p>
<p>Thanks for your input and schematic.</p>
<p>I did look at some other optocouplers like the LOC110, IL300 and 7B41 but all need more parts like op-amps and such whereas the</p>
<p>HCPL has it&nbsp; all in one package. What pcb did you make for it and what voltages are you monitoring with it ?</p>
<p>&nbsp;</p>
<p>Regards,</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5297"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nico&#039;s picture" title="nico&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by nico (not verified) on Fri, 20/07/2012 - 16:05.</div>
    <div class="content">
     <p>I'm using that schematic for measuring the DC link in a 3-phase inverter PCB that is used to connect a DC source to the grid via a variac. The output voltage is up to 415VRMS which needs a DC link of 700V.</p>
<p>The PCB was designed with Altium and made with PCB Train (not cheap...) but I got a free prototype from Spirit circuits.</p>
<p>This is all part of a research project I'm doing to interface batteries onto the grid but I'm just going to be circulating power and not acutally storing anything. Peak power should be around 60kW but I might not get nearly that high.</p>
<p>It is all contolled by a TI&nbsp;DSP&nbsp;and an alcatel FPGA. I'm using 10A/D converters and 36 digital outputs to control one 3-phase inverters, 3 single phase inverters and 3 cycloconverters. Thats the plan anyway, I haven't managed to get the FPGA&nbsp;and the DSP&nbsp;to co-operate yet...</p>
<p>Nico</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5431"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="prensel&#039;s picture" title="prensel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by prensel (not verified) on Sat, 28/07/2012 - 07:59.</div>
    <div class="content">
     <p>Here's a small follow-up on my DC monitoring system.</p>
<p>In the last week i did some testing with an ACS715 and also an ACS712.</p>
<p>The ACS are fed by 5V from the Arduino and output of the ACS is directly connected to an analog port. Both ACS sensors have a small offset value on zero-current so they can register alternating current. For example the Vout of the ACS712 is Vcc/2 when no current is present.&nbsp;</p>
<p>As a spin-off i made a small battery monitoring system with both sensors to measure the Ah capacity of an 8 year old (completely dead) 12V lead-acid battery before and after desulphating the battery (and yes desulphating works).</p>
<p>Based on a Jeenode It simply takes readings for current and voltage and calculates the power drawn from the battery by a 12V/45W bulb. It also registers the Ah figure and sends all this info to a RFM based receiver with SD card for logging. It all works pretty accurate during load.</p>
<p>However when i turn off the bulb, so no current is drawn, the Jeenode seems to register a different value then the expected Vcc/2. Although it is a Hall effect sensor so it could be disturbed by some magnetic field , but none of these are present that i'm aware off. This behaviour appears with both sensors so i started to figure that this 'noise' was generated by the Jeenode. Changing the Jeenode for an Arduino still shows this behaviour so its not caused by the Jeenode.</p>
<p>When measuring the output from the ACS712 with a DMM&nbsp;it says 2500mV so this is correct. The output of analogRead(A0) gives alternating values between 509 - 511 so this represents a value between (509/1023*5000mV =) 2487mV - and (511/1023*5000mV=) 2497mV</p>
<p>Since the output of the ACS712 is 100mV/A it appears that there's an alternating current of 1Amp which is not correct.</p>
<p>Even when applying 3.3V tot the analogport and compare the read value  against the real Vcc (read by the sketch) shows a difference.</p>
<p>What could be causing this erratic behaviour of the Arduino ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5432"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 28/07/2012 - 12:44.</div>
    <div class="content">
     <p>I'd suggest the likeliest source is noise in the ADC input. 2 LSB is about 10 mV, as you point out, so you might be seeing a little over 10 mV peak-peak of noise. Or because of the nature of noise, something like 2 or 3 mV rms.&nbsp; Because the input impedance of the&nbsp;ADC is so high, I'd guess it is current noise, possibly in the connection between analog and digital earths, and the source will be the processor itself. At those voltage levels, you need to be very careful with the layout and with earthing. Also bear in mind the specification for the analogue input (Section 28.8) does not mention noise, so thay aren't going to be tied down on that subject. I'm guessing here but noise might be one of the reasons why the ADC only has 10-bit resolution.</p>
<p>But what I can tell you, if you use an audio amplifier (with a suitable capacitor to remove the standing voltage) you can hear the noise on an emonTx quite clearly. And there's anecdotal evidence that breadboard / plugboard projects are more susceptible.</p>
<p>(Is your Hall effect sensor seeing the Earth's magnetic field? Just a thought).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7865"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="paolo563&#039;s picture" title="paolo563&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by paolo563 (not verified) on Fri, 30/11/2012 - 22:56.</div>
    <div class="content">
     <p><em>&quot;When measuring the output from the ACS712 with a DMM&nbsp;it says 2500mV so this is correct. The output of analogRead(A0) gives alternating values between 509 - 511 so this represents a value between (509/1023*5000mV =) 2487mV - and (511/1023*5000mV=) 2497mV</em></p>
<p><em>Since the output of the ACS712 is 100mV/A it appears that there&#39;s an alternating current of 1Amp which is not correct.&quot;</em></p>
<p>Hi&nbsp; <a href="../user/943.html" title="View user profile.">prensel</a>,<br />
	you have not 1Amp, but you have 0.1Amp<br />
	2497mV - 2487mV = 10mV, not 100mV, so you have 0,1Amp.</p>
<p>Don&#39;t warry, my&nbsp;<span class="short_text" id="result_box" lang="en"><span class="hps">ACS</span> <span class="hps">behaves</span> <span class="hps">in the same way and is not bad because this value is closed to the maximum resolution that you can have with ACS712 20Amp.</span></span></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16906"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jnogues&#039;s picture" title="jnogues&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by jnogues (not verified) on Fri, 20/12/2013 - 07:07.</div>
    <div class="content">
     <p>Hi Nico. Could you send me this circiuit please?</p>
<p>&nbsp;</p>
<p>Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26429"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5550.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Gerardo&#039;s picture" title="Gerardo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: DC monitoring 600V/15A</h3>

    <div class="submitted">Submitted by <a href="../user/5550.html" title="View user profile.">Gerardo</a> on Sun, 04/01/2015 - 14:51.</div>
    <div class="content">
     <p><strike>
<p>Hello , my name is Gerardo and I write from Italy , I would like to make a DC monitoring . I have a number of photovoltaic panels 15 , a Voc of about 600V , the Amps will be no more than about 12A . I would like to calculate only the passage of amps , excluding the voltage . Which sensor can I use? Kindly anyone can help me ?<br />
&nbsp;</p>
<p></strike></p>
<p><i>[Gerardo: I deleted your second post here. The first was in the queue for moderation. Your question has been answered <a href="6423.html">elsewhere</a>, please do not double-post, it only means answers might be in two places, which makes it harder for everyone. Moderator (RW)]</i></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/837"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-39eQeDLBgsn0oSyMydSPft9OG1ejolYV_zUwcwK-K8k" value="form-39eQeDLBgsn0oSyMydSPft9OG1ejolYV_zUwcwK-K8k"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
