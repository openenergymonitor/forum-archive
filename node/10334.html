<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10334 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:14:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Real power and power factor not correct | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Real power and power factor not correct</h3>
        <span class="submitted">Submitted by <a href="../user/7827.html" title="View user profile.">jiyojolly</a> on Tue, 17/03/2015 - 17:26</span>
        <div class="content"><p>I implemented this and i got the voltage and current correct..But i cant seem to get real power and power factor correct... I tried all possible values for phase calibration but no avail.. Cant seem to pin point the problem...Getting negative real power and negative power factor!!!!!!</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11463.html" class="topic-previous" title="Go to previous forum topic">‹ Helical antenna</a>
              <a href="11475.html" class="topic-next" title="Go to next forum topic">Emonth connect reed switch ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-28752"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 17/03/2015 - 19:10.</div>
    <div class="content">
     <p>By convention, we regard real power as positive when importing, and negative when exporting. The difference is the phase of the current in relation to the voltage. If you flip your CT on its cable, you will invert the current signal and you should then read positive real power when importing (which I assume is what you are doing). </p>
<p>If you are using the standard sensors for voltage and current from the shop, the standard sketches should give you a power factor close to unity for a pure resistive load, but if you use other sensors, that won't necessarily be the case. As you have said nothing about what you have and which sketch you are using, I cannot help you any more. You should find all the information you need somewhere in Building Blocks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29074"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Fri, 27/03/2015 - 15:10.</div>
    <div class="content">
     <p>I'm also the same, I change the direction of current sensor, but the power factor is not correct, I use Arduino Uno sketch, my voltage circuit is LMV321, the current sensor circuit I follow the instruction on this website. but my power is not correct. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29075"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 27/03/2015 - 15:31.</div>
    <div class="content">
     <p>Tell us more. There is not enough information about what you have and what you are trying to measure for us to help you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29099"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Sat, 28/03/2015 - 09:40.</div>
    <div class="content">
     <p>the voltage, i follow instruction here <a href="https://learn.openenergymonitor.org/?redirect=acac-buffered-voltage-bias" title="http://openenergymonitor.org/emon/buildingblocks/acac-buffered-voltage-bias">http://openenergymonitor.org/emon/buildingblocks/acac-buffered-voltage-bias</a>, the current, I follow instruction from <a href="https://learn.openenergymonitor.org/?redirect=how-to-build-an-arduino-energy-monitor" title="http://openenergymonitor.org/emon/buildingblocks/how-to-build-an-arduino-energy-monitor">http://openenergymonitor.org/emon/buildingblocks/how-to-build-an-arduino...</a><br />
I use arduino Mega 2560 and here is my code </p>
<p>// EmonLibrary examples openenergymonitor.org, Licence GNU GPL V3</p>
<p>#include "EmonLib.h"             // Include Emon Library<br />
EnergyMonitor emon1;             // Create an instance</p>
<p>void setup()<br />
{<br />
  Serial.begin(9600);</p>
<p> emon1.voltage(15, 261, 5.5);  // 2 -Voltage: input pin, calibration, phase_shift<br />
  emon1.current(1, 62.3);      // Current: input pin, calibration.<br />
}</p>
<p>void loop()<br />
{<br />
  emon1.calcVI(20,2000);         // Calculate all. No.of half wavelengths (crossings), time-out<br />
  emon1.serialprint();           // Print out all variables (realpower, apparent power, Vrms, Irms, power factor)</p>
<p>  float realPower       = emon1.realPower;        //extract Real Power into variable<br />
  float apparentPower   = emon1.apparentPower;    //extract Apparent Power into variable<br />
  float powerFActor     = emon1.powerFactor;      //extract Power Factor into Variable<br />
  float supplyVoltage   = emon1.Vrms;             //extract Vrms into Variable<br />
  float Irms            = emon1.Irms;             //extract Irms into Variable<br />
}<br />
I compare the measured data with watt meter,and I get the not correct real watt &amp; power factor, I try to change the "phase_shift" in voltage -Function but not correct. I use a 12 AC-AC transformer, YDCD sct013-000(00A)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29104"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Sat, 28/03/2015 - 10:01.</div>
    <div class="content">
     <p>44.39 222.62 3.34 -0.99<br />
-725.62 732.34 220.48 3.32 -0.99<br />
-725.09 731.75 220.64 3.32 -0.99<br />
-735.97 742.54 222.21 3.34 -0.99<br />
-736.14 743.10 222.49 3.34 -0.99<br />
-737.36 743.32 222.44 3.34 -0.99<br />
-728.75 735.22 221.26 3.32 -0.99<br />
-732.48 739.14 221.89 3.33 -0.99<br />
-722.96 729.62 219.58 3.32 -0.99<br />
-724.73 731.26 220.38 3.32 -0.99<br />
-722.53 729.27 219.82 3.32 -0.99<br />
-727.39 734.53 220.40 3.33 -0.99<br />
-740.18 746.82 222.79 3.35 -0.99<br />
-722.13 728.88 220.04 3.31 -0.</p>
<p>the voltage &amp; ampe is correct. But the real power is not correct, in my watt meter is real watt is 680W, power factor is 0,9</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29106"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sat, 28/03/2015 - 11:33.</div>
    <div class="content">
     <p>Did you follow steps 4 and 5 here?</p>
<p><a href="https://learn.openenergymonitor.org/?redirect=calibration" title="http://openenergymonitor.org/emon/buildingblocks/calibration">http://openenergymonitor.org/emon/buildingblocks/calibration</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29108"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 28/03/2015 - 13:21.</div>
    <div class="content">
     <p>1. Did you read <a href="10391.html">this</a>? I have now had to waste time deleting your spam.</p>
<p>2. You can connect your CT in exactly the same way as the voltage transformer, using the same op.amp.</p>
<p>3. Your power factor is 0.99, not 0.90.  It represents a phase angle of just 8&deg; I think that is very good if you have not calibrated your circuit.</p>
<p>4. In another thread, you have written that the calibration constant for the YHDC SCT-013-000 is not correct. Your calibration constant is correct for a burden resistor value of 32 &Omega;. Is that the value of your burden resistor? </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29110"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Sat, 28/03/2015 - 13:47.</div>
    <div class="content">
     <p>Sorry, I'm new , so I dont know so much thing about this website.Thanks for your quick respone,I'll try soon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29114"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Sat, 28/03/2015 - 15:16.</div>
    <div class="content">
     <p> the value of my burden resistor for YHDC SCT-013-000 is 32 ohm</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29137"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Sun, 29/03/2015 - 02:40.</div>
    <div class="content">
     <p>the circuit of the lmv321 for current sensor, I connect 2 out put of the sensor to the 2 output of the AC adapter in the circuit <a href="https://learn.openenergymonitor.org/?redirect=acac-buffered-voltage-bias" title="http://openenergymonitor.org/emon/buildingblocks/acac-buffered-voltage-bias">http://openenergymonitor.org/emon/buildingblocks/acac-buffered-voltage-bias</a><br />
but the current is not correct even I change the calibration. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29140"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Sun, 29/03/2015 - 08:46.</div>
    <div class="content">
     <p>Now, what should I do to get the correct power factor, real watt, If not, my project is useless, waste of money &amp; time. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29143"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 29/03/2015 - 13:29.</div>
    <div class="content">
     <p>Build your circuit according to this diagram:</p>
<p><img alt="" src="../sites/default/files/Buffered%20bias%20VT%20%26%20CT.png" style="width: 650px; height: 416px;" /></p>
<p>When you have done that, follow exactly and in the correct order all the steps in the calibration instructions <a href="https://learn.openenergymonitor.org/?redirect=calibration">here</a>.</p>
<p>If you cannot calibrate your circuit, there is something wrong with some of your components, and you need to measure and tell us:<br />
1, The mains voltage,<br />
2. The measured output&nbsp;voltage of your ac adapter,<br />
3. The exact type of your ac adapter,<br />
You also need to post your sketch - all of it.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29151"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Sun, 29/03/2015 - 16:18.</div>
    <div class="content">
     <p>thanks for your instructions.I have the correct real watt &amp; power Factor, I've tried to build a new circuit follow instruction here <a href="https://learn.openenergymonitor.org/?redirect=acac-buffered-voltage-bias" title="http://openenergymonitor.org/emon/buildingblocks/acac-buffered-voltage-bias">http://openenergymonitor.org/emon/buildingblocks/acac-buffered-voltage-bias</a>, the current,  <a href="https://learn.openenergymonitor.org/?redirect=how-to-build-an-arduino" title="http://openenergymonitor.org/emon/buildingblocks/how-to-build-an-arduino">http://openenergymonitor.org/emon/buildingblocks/how-to-build-an-arduino</a>...<br />
With new circuit, I get correct power Factor, then to get the real watt = supply voltage * Irms*power Factor.<br />
Many thanks for your instructions. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29163"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 29/03/2015 - 21:12.</div>
    <div class="content">
     <p>You do not need to do "real watt = supply voltage * Irms*power Factor"</p>
<p>If you look at emonLib.cpp:</p>
<p>real power, Vrms and Irms are the values that are calculated directly from the sampled voltage and current.</p>
<p>Then these values are used to calculate:</p>
<p style="margin-left: 3ex;">
apparent power = Vrms &times; Irms<br />
power factor = real power &div; apparent power
</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29186"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Mon, 30/03/2015 - 14:36.</div>
    <div class="content">
     <p>here is the video with I test Energy monito with AC watt meter. I speak Vietnamese in the video. <a href="https://www.youtube.com/watch?v=4zhvSSiXF1k&amp;list=UUxrCTbzN0S8pPrGRDJ_YA0w" title="https://www.youtube.com/watch?v=4zhvSSiXF1k&amp;list=UUxrCTbzN0S8pPrGRDJ_YA0w">https://www.youtube.com/watch?v=4zhvSSiXF1k&amp;list=UUxrCTbzN0S8pPrGRDJ_YA0w</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29187"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Mon, 30/03/2015 - 14:38.</div>
    <div class="content">
     <p>I test my equipment with 2 case, the first is 680w, 3.4A, 0.9 power factor, the second is 1320w, 6,1A, 0,99 power factor (read on AC watt meter). my equipment is correct number. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29189"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Mon, 30/03/2015 - 14:50.</div>
    <div class="content">
     <p>this is my sketch,<br />
// EmonLibrary examples openenergymonitor.org, Licence GNU GPL V3</p>
<p>#include "EmonLib.h"             // Include Emon Library<br />
EnergyMonitor emon1;             // Create an instance</p>
<p>void setup()<br />
{<br />
  Serial.begin(9600);</p>
<p>  emon1.voltage(2, 234.26, 1.7);  // Voltage: input pin, calibration, phase_shift<br />
  emon1.current(1, 111.1);       // Current: input pin, calibration.<br />
}</p>
<p>void loop()<br />
{<br />
  emon1.calcVI(20,2000);         // Calculate all. No.of half wavelengths (crossings), time-out<br />
 // emon1.serialprint();           // Print out all variables (realpower, apparent power, Vrms, Irms, power factor)<br />
  //<br />
         //extract Real Power into variable<br />
  float apparentPower   = emon1.apparentPower;    //extract Apparent Power into variable<br />
float powerFActor     = emon1.powerFactor;      //extract Power Factor into Variable<br />
  float supplyVoltage   = emon1.Vrms*0.981702307;             //extract Vrms into Variable<br />
  float Irms            = (emon1.Irms-.2)*.59;<br />
   float realPower       = supplyVoltage*Irms*powerFActor; //extract Irms into Variable<br />
Serial.print (" AC  ");<br />
Serial.print (powerFActor);<br />
Serial.print ("  ");<br />
//Serial.print (apparentPower);<br />
//Serial.print (" W  ");<br />
Serial.print (realPower);<br />
Serial.print (" W  ");</p>
<p>Serial.print (supplyVoltage);<br />
Serial.print (" V  ");<br />
Serial.print (Irms);<br />
Serial.print (" A  ");<br />
Serial.println();<br />
delay(1000);<br />
}</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29194"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Mon, 30/03/2015 - 15:40.</div>
    <div class="content">
     <p>with arduino Uno, I get the correct real watt, power factor, but with arduino mega 2560, i get the wrong value. what's up</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29196"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 30/03/2015 - 15:58.</div>
    <div class="content">
     <p>Look at emonlib.cpp, and check that it is reading the correct value for "SupplyVoltage". You will probably need to add a line to print this to the serial port. The value you get should be the processor Vcc in mV.</p>
<p>How wrong are the values that you get, i.e. what is the value displayed and what should the value be?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29198"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Mon, 30/03/2015 - 16:30.</div>
    <div class="content">
     <p>i'm sorry, i have mistake in soldering the circuit, so I get not correct value.Now,everything is correct. many thanks for your quick support.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35369"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7718.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hanguyen&#039;s picture" title="hanguyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/7718.html" title="View user profile.">hanguyen</a> on Mon, 26/10/2015 - 12:06.</div>
    <div class="content">
     <p>When I use above sketch to measure 3 phase power, the Ampes &amp; voltage is correct, but the power factor is not correct. ere is the data for power factor<br />
Standard	measure<br />
1	0.35<br />
0.5	0.64<br />
0.8	0.84</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35376"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Real power and power factor not correct</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 26/10/2015 - 14:44.</div>
    <div class="content">
     <p>That is hardly surprising, if you have not added another 2 voltage circuits for phases 2 &amp; 3. There is a 120&deg; phase shift between any pair of phases, therefore if you have only one voltage reference that is the same line as CT1, you will see that the "real power" (because it is not in fact the real power at all) in CT2 &amp; CT3 is completely wrong and so is the power factor.</p>
<p>Try adding two more voltage inputs, or try using a sketch designed for 3-phase working. You can find one on Github. Follow the calibration instructions in the sketch exactly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10334"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-u0SMVz-7haSVfuY9DUbNnSKRZghH5H42Hn2Ah96w4rc" value="form-u0SMVz-7haSVfuY9DUbNnSKRZghH5H42Hn2Ah96w4rc"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
