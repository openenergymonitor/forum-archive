<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/991 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:35:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>SoftwareSerial problems | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">SoftwareSerial problems</h3>
        <span class="submitted">Submitted by Guest on Tue, 28/08/2012 - 18:00</span>
        <div class="content"><p>&nbsp;Hello everybody:</p>
<p>Any known reason why SoftwareSerial can not be used in the NanodeRF if used as emonBase ?</p>
<p>I want to display the received data in a 7-Seg display using serial protocol and I can not make it works.</p>
<p>Tryied several different Digital Outputs available in my Nanode but none of them work, the software restarts each time attemps to write data to the SoftwareSerial port.</p>
<p>Any help will be welcome.</p>
<p>Thanks a million. Nelson.</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1001.html" class="topic-previous" title="Go to previous forum topic">‹ RFM12 Init problem</a>
              <a href="970.html" class="topic-next" title="Go to next forum topic">Rfm12 rev.1  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-5936"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: SoftwareSerial problems</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 28/08/2012 - 18:05.</div>
    <div class="content">
     <p>&nbsp;Hello Nelson, Im afraid I havent tried this, has anyone else?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5940"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/450.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: SoftwareSerial problems</h3>

    <div class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Tue, 28/08/2012 - 19:26.</div>
    <div class="content">
     <p>I used the SoftSerial as part of my SMA&nbsp;PV&nbsp;interface software, might be of some use to you.</p>
<p>&nbsp;</p>
<p><a href="https://github.com/stuartpittaway/nanodesmapvmonitor" title="https://github.com/stuartpittaway/nanodesmapvmonitor">https://github.com/stuartpittaway/nanodesmapvmonitor</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5967"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nejemia&#039;s picture" title="nejemia&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: SoftwareSerial problems</h3>

    <div class="submitted">Submitted by nejemia (not verified) on Wed, 29/08/2012 - 12:23.</div>
    <div class="content">
     <p>&nbsp;Thank you Stuart, Trystan:</p>
<p>I solved the problem but I'm afraid it is a very rudimentary solution.</p>
<p>Problem is with mySerial.print() statement - I've used mySerial.write() and I'm sending 1 Byte at a time to the Display and it works happy.</p>
<p>Weird, but... Learning the hard way.</p>
<p>Now, I'm facing another problem which involves RF12 module init.</p>
<p>Have 2 sketches which uses exactly the same init procedure, one works, the other does not...</p>
<p>I am using Trystan examples Fixed_Packets and Basic_multinode_webclient.</p>
<p>Fixed_Packets works, the other hungs at: if (rf12_recvDone() &amp;&amp; rf12_crc == 0 &amp;&amp; (rf12_hdr &amp; RF12_HDR_CTL) == 0)</p>
<p>Never gets TRUE -</p>
<p>Well, lets continue working and thanks a lot !</p>
<p>Nelson.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5975"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nejemia&#039;s picture" title="nejemia&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: SoftwareSerial problems</h3>

    <div class="submitted">Submitted by nejemia (not verified) on Wed, 29/08/2012 - 16:00.</div>
    <div class="content">
     <p>&nbsp;Hello pal's:</p>
<p>I just detected the RF12 module has problems during initialization-</p>
<p>It hungs right &nbsp;after : &nbsp;rf12_initialize(10,RF12_433MHZ,210); // NodeID, Frequency, Group</p>
<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(&quot;Inicia RF12&quot;);</div>
<div>Main problem: this failure is not always, with some sketches it works with some others doesn`t ...&nbsp;</div>
<div>Any ideas? Suggestions ?&nbsp;</div>
<div>Thanks a lot --</div>
<div>Nelson.</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5987"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: SoftwareSerial problems</h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Thu, 30/08/2012 - 09:00.</div>
    <div class="content">
     <p>I'm not sure about the Nanode, but on the emonGLCD, the standard PV sketch uses nearly all the available memory (which is only 1K max to start with!) so any extra global variables or extra libraries added tend to make it crash in wierd and unpredictable ways.</p>
<p>There's a forum thread here which describes how to measure free memory:</p>
<p><a href="http://forum.pololu.com/viewtopic.php?f=10&amp;t=989&amp;view=unread#p4218">http://forum.pololu.com/viewtopic.php?f=10&amp;t=989&amp;view=unread#p4218</a></p>
<p><font face="Courier New">Here's their code:</font></p>
<p><font face="Courier New">extern void __bss_end;<br />
extern void *__brkval;</p>
<p>int get_free_memory()<br />
{<br />
&nbsp; int free_memory;</p>
<p>&nbsp; if((int)__brkval == 0)<br />
&nbsp; &nbsp; free_memory = ((int)&amp;free_memory) - ((int)&amp;__bss_end);<br />
&nbsp; else<br />
&nbsp; &nbsp; free_memory = ((int)&amp;free_memory) - ((int)__brkval);</p>
<p>&nbsp; return free_memory;<br />
}</font></p>
<p>
This returns the free bytes between heap and stack. If the stack grows doen to meet th heap (or static data) then it will crash. Maybe that's the problem here?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/991"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-4jTG0y_FZqYaqKDgnm-NvfU4-zW487Xz4n0LYPWnOGM" value="form-4jTG0y_FZqYaqKDgnm-NvfU4-zW487Xz4n0LYPWnOGM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
