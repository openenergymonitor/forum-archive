<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11770 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:12:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Arduino ports used | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Arduino ports used</h3>
        <span class="submitted">Submitted by <a href="../user/9090.html" title="View user profile.">jeffreamartin</a> on Mon, 07/12/2015 - 02:35</span>
        <div class="content"><p>I have the emonTX version 2.5 shield for arduinos. My plan is to monitor the current draw for four different items in an HVAC system. I have an UNO, an Adafruit LCD shield with buttons, and a LIPO battery shield. I can get the UNO, LIPO shield, and the LCD shield to play nice with each other. The world falls apart when I add the emonTX shield to the stack. The LCD no longer displays and the buttons don&#39;t respond. I removed the LCD from the stack and ran jumpers from A4, A5, 5V, and GND on the emonTX shield to the LCD and still didn&#39;t get anything on the LCD. I removed the emonTX shield from the stack and jumpered A4, A5, 5V, and GND from the LIPO shield to the LCD and it worked fine.</p>
<p>The LIPO shield uses I2C to report battery status and that is what I am using so far to verify that I have some functionality on the LCD.</p>
<p>What pins on the UNO does the emonTX use? I don&#39;t have the wifi option. If it uses I2C, then what is it&#39;s address? With my luck, I might have an address conflict. I found a diagram here (<a href="../emontx/reference.html">http://openenergymonitor.org/emon/emontx/reference)</a> that looks like nearly everything is used for the wireless module that I don&#39;t have. If this is really the board I have, then it looks like it uses the UART port of the arduino and one interrupt pin.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11838.html" class="topic-previous" title="Go to previous forum topic">‹ YHDC SCT-013 direct soundcard input</a>
              <a href="11823.html" class="topic-next" title="Go to next forum topic">AC Adapter polarity. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-36804"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 07/12/2015 - 09:53.</div>
    <div class="content">
     <p>I&#39;m pretty sure you are right about the I&sup2;C being the issue, ADC4 and ADC5 pins double up as the SDA/SCL lines and ADC4 is used on the emonTx shield for CT4.</p>
<p>I&#39;m not familiar with stacking arduino&nbsp;shields&nbsp;but can you either remove a ADC4 stacking pin and put the emonTx&nbsp;at the top or remove the burden resistor for CT4, either way you won&#39;t be able to use CT4 and I&sup2;C.</p>
<p>Paul</p>
<p>EDIT - another option&nbsp;that might be worth investigating is maybe using a software I&sup2;C library and mapping I&sup2;C away from ADC4 if you must have the display and 4 CT&#39;s</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36835"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9090.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jeffreamartin&#039;s picture" title="jeffreamartin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/9090.html" title="View user profile.">jeffreamartin</a> on Tue, 08/12/2015 - 11:55.</div>
    <div class="content">
     <p>I found a software version of I2C that allows me to pick two pins for I2C. Which leads me back to my original question. Is there a port map for the shield? Since I am not using the RF portion (it&#39;s not on my board at all), those ports should be available. I would think that the port map for the emonTX would be the same as the shield since the emonTX is effectively a shield already glued to an Arduiino. That would also make the sketches and library work the same. Is that a true statement?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36836"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 08/12/2015 - 13:25.</div>
    <div class="content">
     <p>There isn't a formal port map on the Wiki. The port map for the emonTx is a starting point, but the Shield has some lines selectable by jumpers/links, which are on the circuit diagram. That is accessible from the Wiki, and should give you all the information you need. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37199"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9090.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jeffreamartin&#039;s picture" title="jeffreamartin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/9090.html" title="View user profile.">jeffreamartin</a> on Fri, 18/12/2015 - 21:19.</div>
    <div class="content">
     <p>I ended up using a Mega instead of a Leonardo or Uno. In order to get your shield to fit, I had to use an extra set of pins to create more separation. Your shield doesn&#39;t include the SCL and SDA pins on the digital side, so I used another set of pins to raise my LCD and left off the A4 and A5 pins. I jumpered the SCL and SDA pins from the Mega to the LCD. Now that works. I also used some of the other Mega pins and a SparkFun OpenLog to log the data. Everything seems to be working,&nbsp;but I need to verify the current readings. I have the CTs plugged in but they are just sitting on my desk (i.e. not around a powered wire). I am getting apparentPower readings anywhere from 9 to 40 amps.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37213"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/12/2015 - 02:13.</div>
    <div class="content">
     <p><i>"I am getting apparentPower readings anywhere from 9 to 40 amps."</i></p>
<p>I don't believe 9 - 40 A unless you have an extremely high current CT connected. Normally, with a 100 A CT and the emonTx calibrated to match, we expect a few hundred mA, i.e. significantly below 1%.</p>
<p>It is a fairly safe bet that what you are seeing is noise. The act of calculating the rms current (and to a much lesser extent the rms voltage) involves squaring the readings, which automatically means that random noise is rectified along with the wanted signal. We believe the noise originates in the digital circuits inside the processor and travels into the analogue side via the analogue reference voltage. There's little you can do about it, other than adding a voltage input and measuring real power, as the main influences are the design and layout of the Arduino board.</p>
<p>It the noise is constant, you can mitigate the effect by subtracting a constant value somewhere - either in the sketch or in emoncms.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37215"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sat, 19/12/2015 - 02:58.</div>
    <div class="content">
     <p>The power supply is often a source of noise, and that is something you may be able to improve. &nbsp;How are you powering it all?... i.e. where does the 5V come from? &nbsp;Do you have a schematic for the exact Arduino you&#39;re using. Have a read of this thread as well: &nbsp;<a href="10111.html">http://openenergymonitor.org/emon/node/10111</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37242"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9090.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jeffreamartin&#039;s picture" title="jeffreamartin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/9090.html" title="View user profile.">jeffreamartin</a> on Sat, 19/12/2015 - 16:16.</div>
    <div class="content">
     <p>I am powering the Mega 2560 (not a clone)&nbsp;via the USB port. I am using the 9VAC power supply that came with the shield for Vrms. I am also using four SCT013 100A CTs.</p>
<p>I assume that the readserial is outputting amps and not milliamps since this device isn&#39;t really designed for low power measurements. Is it safe to assume that the realPower and apparentPower commands also output amps and not milliamps?</p>
<p>I just had a thought (it hurt, too). I am on a ship, surrounded by metal bulkheads (walls for landlubbers), 480VAC power cables for heaters, fluorescent lights, and computers. Even though the CTs are closed and there are no wires passing through them, do you think that they might be picking up that much noise?</p>
<p>I took about 700 samples at about a one second rate. I removed the first 50 to get rid of the initial power-up values that&nbsp;get averaged out. Irms is ranging from 0 to 1.5 with an average of ,&nbsp;realPower is ranging from -7.67 to 14.2,&nbsp;apparentPower is&nbsp;ranging from &nbsp;0.6 to 181.39. Vrms is ranging from 121.26 to 124.39. CT1 apparentPower seems to be picking up more noise in that, while CT3 had the highest value, the minimum reading for CT1 apparentPower was 25.31. I dumped my data into a spreadsheet.</p>
<table border="1" cellpadding="1" cellspacing="1" style="width: 500px; font-size: 7px">
<thead>
<tr>
<th scope="col">&nbsp;</th>
<th scope="col">
<p>CT1</p>
<p>realPower</p>
</th>
<th scope="col">
<p>CT1</p>
<p>apparentPower</p>
</th>
<th scope="col">
<p>CT1</p>
<p>Irms</p>
</th>
<th scope="col">
<p>CT1</p>
<p>Vrms</p>
</th>
<th scope="col">
<p>CT2</p>
<p>realPower</p>
</th>
<th scope="col">
<p>CT2</p>
<p>apparentPower</p>
</th>
<th scope="col">
<p>CT2</p>
<p>Irms</p>
</th>
<th scope="col">
<p>CT3</p>
<p>realPower</p>
</th>
<th scope="col">
<p>CT3</p>
<p>apparentPower</p>
</th>
<th scope="col">
<p>CT3</p>
<p>Irms</p>
</th>
<th scope="col">
<p>CT4</p>
<p>realPower</p>
</th>
<th scope="col">
<p>CT4</p>
<p>apparentPower</p>
</th>
<th scope="col">
<p>CT4</p>
<p>Irms</p>
</th>
</tr>
</thead>
<caption>653 samples</caption>
<tbody>
<tr>
<td>Average</td>
<td>0.954</td>
<td>33.843</td>
<td>0.275</td>
<td>123.119</td>
<td>1.048</td>
<td>10.820</td>
<td>0.088</td>
<td>3.126</td>
<td>18.487</td>
<td>0.151</td>
<td>1.030</td>
<td>14.681</td>
<td>0.119</td>
</tr>
<tr>
<td>Max</td>
<td>9.02</td>
<td>146.49</td>
<td>1.18</td>
<td>124.39</td>
<td>8.73</td>
<td>63.5</td>
<td>0.52</td>
<td>14.2</td>
<td>181.39</td>
<td>1.46</td>
<td>10.24</td>
<td>52.11</td>
<td>0.42</td>
</tr>
<tr>
<td>Min</td>
<td>-7.67</td>
<td>25.31</td>
<td>0.21</td>
<td>121.26</td>
<td>-3.76</td>
<td>1.13</td>
<td>0.01</td>
<td>-5.61</td>
<td>6.75</td>
<td>0.05</td>
<td>-2.83</td>
<td>0.6</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37244"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/12/2015 - 16:43.</div>
    <div class="content">
     <p>If you're using the standard 'discrete samples' sketch, powers are in watts, apparent powers in VA, currents in amps, voltage in volts.</p>
<p>So you're seeing less than 15 W in an input that's good to 12 kW at your system voltage.</p>
<p>As I explained above, apparent power is always more susceptible to noise because all the noise current is rectified and averaged, and not multiplied by the voltage and then averaged as is done for the real power calculation.</p>
<p>One thought: are you running at 400 Hz?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37249"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9090.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jeffreamartin&#039;s picture" title="jeffreamartin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/9090.html" title="View user profile.">jeffreamartin</a> on Sat, 19/12/2015 - 17:18.</div>
    <div class="content">
     <p>Watts. Well I&#39;ll be darn. That makes a world of difference. That means what I am seeing is really in the mud. That is great! Thanks!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37254"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/12/2015 - 17:58.</div>
    <div class="content">
     <p>Well, it has to be said that most people measure powers in watts or a multiple (or sub-multiple) thereof!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37266"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 20/12/2015 - 05:43.</div>
    <div class="content">
     <p>You may find your RMS noise values improve a lot if you power your Arduino&nbsp;via the DC-IN jack, rather than the USB port. &nbsp;At the moment you&#39;re at the mercy of the quality of your 5V USB supply. &nbsp;Some of those can be quite low ripple, but generally it&#39;s not a requirement for most applications&nbsp;so they aren&#39;t. &nbsp;If you power it via the DC-IN jack, you&#39;ll get to enjoy the benefits of the Arduino&#39;s onboard linear regulator. &nbsp;There&#39;s more in that link I posted above.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37345"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9090.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jeffreamartin&#039;s picture" title="jeffreamartin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Arduino ports used</h3>

    <div class="submitted">Submitted by <a href="../user/9090.html" title="View user profile.">jeffreamartin</a> on Mon, 21/12/2015 - 18:54.</div>
    <div class="content">
     <p>Everything is 60Hz. I am using this for something that I don&#39;t think it was really designed for. Nearly all the comments on these forums is regarding measuring power at a house meter or solar panel. In that case, watts reigns supreme. I am more interested in amps since I am digging inside equipment to investigate an intermittent problem. At that point, amps reigns supreme. That is where my head was (and not in a dark, stinky place!) and I wasn&#39;t even thinking about watts.</p>
<p>Once I get back to the ship after Christmas, I&#39;ll have to try using an alternative power supply.</p>
<p>Thanks for all y&#39;alls help, and y&#39;all have Merry Christmas and a Happy New Year!!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11770"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-cUhLNi918WfkUOiAyTLocf51Y94goDA_fmjSnUCA8fA" value="form-cUhLNi918WfkUOiAyTLocf51Y94goDA_fmjSnUCA8fA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
