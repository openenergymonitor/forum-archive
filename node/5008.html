<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5008 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:57:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>New emonTH doesnt transmitting data to basestation | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">New emonTH doesnt transmitting data to basestation</h3>
        <span class="submitted">Submitted by <a href="../user/5908.html" title="View user profile.">rbreuss</a> on Tue, 15/04/2014 - 09:10</span>
        <div class="content"><p>I just bought emonTH sensor node from OEM shop. I have working Raspi/HDD platform with Jeelink connected via USB and receiving data from EmonTX&nbsp; via RFM as well as from another node based on Arduino&nbsp;YUN via Ethernet. Everything works great, network ID is set to 210 and current nodes are 20 and 21. I put batteries into my new emonTH, LED &nbsp;shows, sensor is detected (DHT), but nothning happens then. No data are received by base station, no new inputs from NODE 19 (expected Node ID of emonTH). I tried to connect Arduino IDE via FTDI cable and debugging via serial monitor shows, temperature, humidity as well as battery voltage is meassured properly and sent to sermon. Also group ID and NODE ID are confirmed as correct (210 and 19). I tried to upload new sketch to emonTH via Arduino IDE, but nothing is changed. Everything works great except of data from emonTH are not received by base station. Any idea what could be wrong?&nbsp;</p>
<p>Interesting is, at my EmonTX&nbsp;I have to set beside of NODE ID and Network ID also gateway ID (node to be sent data to). But in settings of emonTH I didnt find possibility to setup gateway ID. Couldnt be just this issue? Isnt emonTH sending data to another gateway than to my current basestation ID 15?</p>
<p>Radek</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5039.html" class="topic-previous" title="Go to previous forum topic">‹  Pre-Loaded Raspberry Pi Base Station Gateway SD card </a>
              <a href="2403.html" class="topic-next" title="Go to next forum topic">Smoothie chart displays no data from feed ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-20776"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emonTH doesnt transmitting data to basestation</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 15/04/2014 - 11:40.</div>
    <div class="content">
     <p>Did you buy the version with the correct radio frequency for your existing set-up? Is it within radio range of the base? If you change your emonTx to Node 19, does that still work?</p>
<p>I do not understand what you mean by Network ID and gateway ID in the emonTx. In the JeeLIb protocol, there is space for <strong>either</strong> the address of the sending node <strong>or</strong> the address of the receiving node, not both. We choose to use only the address of the receiving node, as we consider the source of the data to be important. Therefore, all receiving nodes receive all the data from transmitting nodes within range. They may choose which data to act on. For example the &quot;multinode&quot; Nanode base sketch chooses to forward each message it receives tagged with the number of the transmitting node. The emonGLCD receives energy data from the emonTx and time data from the emonBase, and handles the data according to its source node number.</p>
<p>I think you will find that, unless you have added these two items to the message payload and are using them for your own purposes, Network ID and gateway ID are not being used.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20781"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5908.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rbreuss&#039;s picture" title="rbreuss&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emonTH doesnt transmitting data to basestation</h3>

    <div class="submitted">Submitted by <a href="../user/5908.html" title="View user profile.">rbreuss</a> on Tue, 15/04/2014 - 13:50.</div>
    <div class="content">
     <p>Yes, sure, I have correct frequency 433 MHz at all of my nodes, including emonTH.&nbsp;</p>
<p>I have changed NODE IDs of my emonTX, 10,19 and current 20. All of them work without problems and corresponding NODE ID is shown at&nbsp;EMONCMS&nbsp;Input page.</p>
<p>My emonTX is based on Arduino Due and related modification of Emonlib from boredman available here:</p>
<p><a href="http://boredomprojects.net/index.php/projects/home-energy-monitor" title="http://boredomprojects.net/index.php/projects/home-energy-monitor">http://boredomprojects.net/index.php/projects/home-energy-monitor</a></p>
<p><a href="https://github.com/icboredman/EmonLib/tree/feature/12bit_3phase" title="https://github.com/icboredman/EmonLib/tree/feature/12bit_3phase">https://github.com/icboredman/EmonLib/tree/feature/12bit_3phase</a></p>
<p>If you look into related Arduino Due sketch:</p>
<p><a href="http://boredomprojects.net/images/Articles/HomeEnergy/EmonTxDue.zip" title="http://boredomprojects.net/images/Articles/HomeEnergy/EmonTxDue.zip">http://boredomprojects.net/images/Articles/HomeEnergy/EmonTxDue.zip</a></p>
<p>you can see there at rows 8-11 definitions of NODE ID (sender), Networks (group) ID and gateway ID (receiver). Juts for this am I asking my question regarding &quot;gateway ID&quot;. When I change Gateway ID to another one, then base station NODE ID is, there receiving od data via jeelini&nbsp;is stopped.&nbsp;</p>
<p>But lets forget my emonTX&nbsp;for now. Im receiving data into basestation&nbsp;via jeelink/USB port. I can check received data via serial monitor in&nbsp;Arduino IDE. Each data set is represented by row of integers. But no data are coming from emonTh. Thats&nbsp;the matter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20782"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emonTH doesnt transmitting data to basestation</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 15/04/2014 - 16:14.</div>
    <div class="content">
     <p>If your base receives data from your emonTx when you set that to Node 19, it proves that the base will receive and decode Node 19. Therefore, I suspect that the RFM12B module in your emonTH is not transmitting, or is transmitting weakly. One final check: is the RFM12B module the correct one? (I know you bought the emonTH as a 433 MHz version). Photos to identify the version are <a href="https://learn.openenergymonitor.org/?redirect=rfm12b-wireless">here</a>.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20800"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5908.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rbreuss&#039;s picture" title="rbreuss&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emonTH doesnt transmitting data to basestation</h3>

    <div class="submitted">Submitted by <a href="../user/5908.html" title="View user profile.">rbreuss</a> on Wed, 16/04/2014 - 14:24.</div>
    <div class="content">
     <p>I think, I have isolated my problem. emonTH works OK, problem is another:</p>
<p>Part of my nodes is using library RF12 (or RFu_RF12) and rest is using library RFM12B (or RFM12B_Due from boredman). Nodes using one kind of library (RF12) are comunicating to each other properly, as well as other group of nodes (RFM12B) are comunicating to each other without problems. BUT - node from one group is unable to communicate with node from other group. It seems to me, that there is some incompatibility between libraries RF12 and RFM12B. Does anybody has a experience with this and how to push nodes with different libraries to communicate to each other?</p>
<p>Radek</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20843"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emonTH doesnt transmitting data to basestation</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 18/04/2014 - 13:38.</div>
    <div class="content">
     <p>You did not mention that you were using a library that is not our standard!</p>
<p>I think you are going to have to do some work on the libraries. It seems that your Boredman library has been derived from JeeLib with some changes specific to that hardware and it seems likely that the message format has changed. A similar thing has happened with the RF&micro;_JeeLib library to remove the lock-up problem that affects the RF&micro;-328, although in that case the message format remains identical.</p>
<p>The approach I would take is to find out the differences between the parent JeeLib library and the two child libraries, then incorporate the modifications of one child into the other. Which way to do this depends on what the differences are.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20853"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5908.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rbreuss&#039;s picture" title="rbreuss&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emonTH doesnt transmitting data to basestation</h3>

    <div class="submitted">Submitted by <a href="../user/5908.html" title="View user profile.">rbreuss</a> on Sat, 19/04/2014 - 07:13.</div>
    <div class="content">
     <p>Yes, you are completely right. Boredman&nbsp;has used not Jeelabs clone, but Lowpowerlabs clone of RF12 library instead, which does implement some new features (for example 127 possible nodes instead of 31) but it lost backward compatibility due another packer header structure. To be honest, I dont understand, why boredman has used this &quot;not OEM standard&quot; of RF12 library for his modification to port in on Arduino Due. And to be honest twice, till last week I didn&#39;t&nbsp;know, that there are two incompatible clones of this library. :-)</p>
<p>So situation now is, I have two parts of my RF12 based network and one part is not communication with other one. OK, Im going to study differencies in detail and I have to decide, which one of these two RF12 lib will be my new standard. As I have tendency to respect standards, I do prefer OEM standard, but before I make my final decision, I have to check, whether or not is &quot;boredmans&quot; library better and why he used just this clone even if he went incompatible way.</p>
<p><span style="background-color: transparent;">Radek</span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20864"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emonTH doesnt transmitting data to basestation</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/04/2014 - 11:54.</div>
    <div class="content">
     <p>It it is any help, there&#39;s a comment in emonlib.cpp that reads &quot;modified to use up to 12 bits ADC resolution (ex. Arduino Due) by <a href="mailto:boredman@boredomprojects.net">boredman@boredomprojects.net</a> 26.12.2013&quot;</p>
<p>So an email asking about the changes might be helpful.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20878"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5908.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rbreuss&#039;s picture" title="rbreuss&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emonTH doesnt transmitting data to basestation</h3>

    <div class="submitted">Submitted by <a href="../user/5908.html" title="View user profile.">rbreuss</a> on Sat, 19/04/2014 - 17:21.</div>
    <div class="content">
     <p>Thanks for your tip, I&#39;m in touch with boredman already for a longer period, but no progress. To be quite honest, using of&nbsp;Arduino Due based on my experience, seems to be a step in wrong direction. &nbsp;12 bit resolution is fine, but I got very comparable results with Arduino&nbsp;Mega with just 10 bit res, but with more analogue inputs. From my perspective, based on my current experience, Due is too powerfull&nbsp;for this task and its 32 CPU brings more of&nbsp;disadvantages&nbsp;(incompatibilities) than advantages. Mega fits perfectly all the needs. For limited scope (just 6 inputs with 10 bit resolution) it seems to me to be perfect platform Arduino Yun. You dont need to setup any RF&nbsp;link, you just send data via onboard wifi. And when you use Arduino Mega as an input expander for Yun and you connect both boards via UART&nbsp;wires, you dont need more. At least I think so.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5008"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-OlYsDN8BDKeuQJr9XyE8fXm6NZvQCEiCfKuSPGZnubs" value="form-OlYsDN8BDKeuQJr9XyE8fXm6NZvQCEiCfKuSPGZnubs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
