<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/1239 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:37:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emontx Shield + Ethernet Shield | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emontx Shield + Ethernet Shield</h3>
        <span class="submitted">Submitted by Guest on Fri, 26/10/2012 - 08:59</span>
        <div class="content"><p>Hello,</p>
<p>I&#39;m already using EMoncms on my own server, but I&#39;m a newbie at the hardware level. I have an arduino uno + ether shield,can I plug the emontx shield on the ethershield, using the emontx sketch and the ethernet library to send variables using http get ?</p>
<p>Thanks in advance</p>
<p>Guillaume</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1415.html" class="topic-previous" title="Go to previous forum topic">‹ Power direction monitoring IC</a>
              <a href="1369.html" class="topic-next" title="Go to next forum topic">Emonbase sd card connector ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-6863"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/497.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="markp&#039;s picture" title="markp&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by <a href="../user/497.html" title="View user profile.">markp</a> on Fri, 26/10/2012 - 09:48.</div>
    <div class="content">
     <p>I doubt you can stack the ethershield and emontx shield together - there is likely to be pin conflicts, plus there isn&#39;t a combined tx + base sketch.</p>
<p>The shield is designed to send readings via the rfm12b back to an emonBase (Nanode or similar).</p>
<p>At some point someone may come up with a way of doing this, though I&#39;m not sure if there are enough pins on an Arduino to handle the TX functions as well as the radio module and ethernet.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6864"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gcarlier&#039;s picture" title="gcarlier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by gcarlier (not verified) on Fri, 26/10/2012 - 10:08.</div>
    <div class="content">
     <p>Ok thank you, still investigate</p>
<p>guillaume</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6866"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Fri, 26/10/2012 - 10:40.</div>
    <div class="content">
     <p>It is possible and I have done it. see my experience here</p>
<p>&nbsp;</p>
<p><a href="http://harizanov.com/2012/04/rfm12b-and-arduino-ethernet-with-wiznet5100-chip/" title="http://harizanov.com/2012/04/rfm12b-and-arduino-ethernet-with-wiznet5100-chip/">http://harizanov.com/2012/04/rfm12b-and-arduino-ethernet-with-wiznet5100...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6872"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 26/10/2012 - 16:12.</div>
    <div class="content">
     <p>It should be possible, you will need to change the RFM12B CS pin since this is required for Etherent Shield: see emonTx Shield documentation:&nbsp;<a href="http://wiki.openenergymonitor.org/index.php?title=EmonTx_Arduino_Shield#Hardware_Setup_Instructions">http://wiki.openenergymonitor.org/index.php?title=EmonTx_Arduino_Shield#Hardware_Setup_Instructions</a></p>
<p>The Ethernet shield will need to be stacked&nbsp;underneath the emonTx Shield</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6915"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gcarlier&#039;s picture" title="gcarlier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by gcarlier (not verified) on Sun, 28/10/2012 - 11:27.</div>
    <div class="content">
     <p>Thank you very much, I will try</p>
<p>Guillaume</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7438"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gcarlier&#039;s picture" title="gcarlier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by gcarlier (not verified) on Mon, 19/11/2012 - 13:27.</div>
    <div class="content">
     <p>For information, I&#39;ve just finished mounting, and it&#39;s working, with an Arduino Uno + Ethernet Shield + Emontx Shield, following instructions from the wiki and precious informations from <a href="../user/380.html" title="View user profile.">mharizanov</a> , thanks to him, and&nbsp; I&#39;m posting to Emoncms values from arduino + Ethernet</p>
<p>Still struggling with calibration, CT sensors sends some random values, even if there&#39;s nothing plugged on female jack, is it normal ?</p>
<p>Thanks for help</p>
<p>&nbsp;</p>
<p>Guillaume</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7539"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="parbar&#039;s picture" title="parbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by parbar (not verified) on Thu, 22/11/2012 - 11:35.</div>
    <div class="content">
     <p>I have the same setup with UNO, ethernet card (w5100) but I have made my own shield with a breadboard (one ds18b20 and one CT). Yesterday I connected it up and managed to do some measurements. I just modified the Webserver example supplied with&nbsp;arduino to show values on a webside.</p>
<p><strong>Next step is to send data to emoncms.org. Could you share your arduino&nbsp;code for me?</strong></p>
<p>I also have some more work also with calibrating the CT I used a 47 ohm burden and only had an 5uF cap available but most of the time it seems to delivery reasonable values. I will get an 10 uF capacitor and probably change the burden. I aim to do measurements up to max 30 A (rms) so with higher burden then the 33 ohm recommended should give higher resolution?. Then I will calibrate it.</p>
<p>Thnaks</p>
<p>P&auml;r</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7540"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 22/11/2012 - 11:46.</div>
    <div class="content">
     <p><em>&quot;so with higher burden then the 33 ohm recommended should give higher resolution&quot;</em></p>
<p>When you do that, you run the risk of saturating the c.t., leading to an inaccurate waveform and inaccuracy in the measurements.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7542"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gcarlier&#039;s picture" title="gcarlier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by gcarlier (not verified) on Thu, 22/11/2012 - 11:57.</div>
    <div class="content">
     <p>Hello,</p>
<p>Here&#39;s the code I use to send to my emoncms server</p>
<p>&nbsp;</p>
<pre>
#include <spi.h>&lt;SPI.h&gt;
#include &lt;Ethernet.h&gt;<ethernet.h>

byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };
byte ip[] = { 192,168,1,67 };
byte gateway[] ={ 192, 168, 1, 254 };

IPAddress server(192,168,1,10); // Emoncms Server on SYNOLOGY
EthernetClient client;

#define FILTERSETTLETIME 10000 // Time (ms) to allow the filters to settle before sending data

const int CT1 = 1;
const int CT2 = 1; // Set to 0 to disable
const int CT3 = 0;
const int CT4 = 0;


#define freq RF12_433MHZ // Frequency of RF12B module can be RF12_433MHZ, RF12_868MHZ or RF12_915MHZ. You should use the one matching the module you have.
const int nodeID = 10; // emonTx RFM12B node ID
const int networkGroup = 210; // emonTx RFM12B wireless network group - needs to be same as emonBase and emonGLCD

#include <jeelib.h>&lt;JeeLib.h&gt; // Download JeeLib: <a href="http://github.com/jcw/jeelib" title="http://github.com/jcw/jeelib">http://github.com/jcw/jeelib</a>
#include &quot;EmonLib.h&quot;
EnergyMonitor ct1,ct2,ct3, ct4; // Create instances for each CT channel

typedef struct { int power1, power2, power3, power4;} PayloadTX; // create structure - a neat way of packaging data for RF comms
PayloadTX emontx;

const int LEDpin = 9; // On-board emonTx LED

boolean settled = false;

void setup()
{
         //ENABLE NETWORKING
        pinMode(10, OUTPUT);                  // Ethernet select pin
        digitalWrite(10, LOW);               // Explicitly enable Network
        
  
  Serial.begin(9600);
  Serial.println(&quot;emonTX Shield CT123 example&quot;);
  Serial.println(&quot;OpenEnergyMonitor.org&quot;);
  Serial.print(&quot;Node:emontx &quot;);
  Serial.print(nodeID);
  Serial.print(&quot; Freq: &quot;);
  if (freq == RF12_433MHZ) Serial.print(&quot;433Mhz&quot;);
  if (freq == RF12_868MHZ) Serial.print(&quot;868Mhz&quot;);
  if (freq == RF12_915MHZ) Serial.print(&quot;915Mhz&quot;);
 Serial.print(&quot; Network: &quot;);
  Serial.println(networkGroup);
             
  if (CT1) ct1.current(1, 59.292); // Setup emonTX CT channel (channel, calibration) 111.
  if (CT2) ct2.current(2, 45.523); // Calibration factor = CT ratio / burden resistance
  if (CT3) ct3.current(3, 111.885);
  if (CT4) ct4.current(4, 38.885);
  
 //emonTx Shield Calibration = (100A / 0.05A) / 33 Ohms
  rf12_set_cs(8);
  rf12_initialize(nodeID, freq, networkGroup); // initialize RFM12B
  rf12_sleep(RF12_SLEEP);

  pinMode(LEDpin, OUTPUT); // Setup indicator LED
  digitalWrite(LEDpin, HIGH);
  
  
}

void loop()
{
  if (CT1) {
    emontx.power1 = ct1.calcIrms(1480) * 233.0; //ct.calcIrms(number of wavelengths sample)*AC RMS voltage
    Serial.print(&quot; &quot;); Serial.print(emontx.power1);
    }
  
  if (CT2) {
    emontx.power2 = ct2.calcIrms(1480) * 233.0;
    Serial.print(&quot; &quot;); Serial.print(emontx.power2);
  }

  if (CT3) {
    emontx.power3 = ct3.calcIrms(1480) * 235.0;
    Serial.print(&quot; &quot;); Serial.print(emontx.power3);
  }
  
   if (CT4) {
    emontx.power4 = ct4.calcIrms(1480) * 235.0;
    Serial.print(&quot; &quot;); Serial.print(emontx.power4);
  }
  
  
  Serial.println(); delay(100);
  

  // because millis() returns to zero after 50 days !
  if (!settled &amp;&amp; millis() &gt; FILTERSETTLETIME) settled = true;

  if (settled) // send data only after filters have settled
  {
    send_rf_data(); // *SEND RF DATA* - see emontx_lib
    digitalWrite(LEDpin, HIGH); delay(8); digitalWrite(LEDpin, LOW); // flash LED
    
    delay(15000); // delay between readings in ms
    }
    
        
    // Open serial communications and wait for port to open:
  Serial.begin(9600);
  EthernetClient client;
  
  // start the Ethernet connection:
  Ethernet.begin(mac,ip); 

  // if you get a connection, report back via serial:
  if (client.connect(server, 80)) {
    Serial.println(&quot;connected to EMONCMS&quot;);
    
    //POWER COULOIR SUR CT1
    client.print(&quot;GET /powerbase/api/post?apikey=d356882fe194da4aa72954807&amp;node=1&amp;json={emon_couloir:&quot;);
    client.print(emontx.power1); //POST CT1 VALUE
    client.print(&quot;,&quot;);
    client.print(&quot;emon_prises:&quot;);
    client.print(emontx.power2); //POST CT2 VALUE
    client.print(&quot;}&quot;);
    client.println(&quot; HTTP/1.0&quot;);
    client.println(&quot;User-Agent: arduino-ethernet&quot;);
    client.println(&quot;Connection: close&quot;);
    client.println();
    Serial.println(&quot;POWERMON COULOIR &amp; PRISES: VALUES SENT&quot;);
    delay(500);
    }
    else   {
    // kf you didn&#39;t get a connection to the server:
    Serial.println(&quot;connection failed TO EMONCMS&quot;);
    client.stop();
          }
 
       //STOPPE LA PREMIERE REQUETE
       client.stop();
 
   // ENVOIE LES VALEURS AU SCRIPT PHP
  Serial.begin(9600);
  Ethernet.begin(mac,ip); 

  if (client.connect(server, 80)) {
    Serial.println(&quot;connected TO SYNOLOGY PHP&quot;);
    
    //POWER COULOIR SUR CT1
    client.print(&quot;GET /enermon/emontxdata.php?emon_couloir=&quot;);
    client.print(emontx.power1); //POST CT1 VALUE
    client.print(&quot;&amp;&quot;);
    client.print(&quot;emon_prises=&quot;);
    client.print(emontx.power2); //POST CT2 VALUE
    client.println(&quot; HTTP/1.0&quot;);
    client.println(&quot;User-Agent: arduino-ethernet&quot;);
    client.println(&quot;Connection: close&quot;);
    client.println();
    Serial.println(&quot;POWERMON PHP POSTS COULOIR &amp; PRISES: VALUES SENT&quot;);
    delay(500);
    }
 
    else   {
    // kf you didn&#39;t get a connection to the server:
    Serial.println(&quot;connection failed TO SYNO PHP&quot;);
    client.stop();
          }
    
 }
</jeelib.h></ethernet.h></spi.h></pre><p>Guillaume</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7543"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="parbar&#039;s picture" title="parbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by parbar (not verified) on Thu, 22/11/2012 - 12:03.</div>
    <div class="content">
     <p>I have the 013-000 and my conclusions from &quot;report-yhdc-sct-013-000-current-transformer&quot; is that it should be out of saturation if Rb is under 200 ohms (for 30 A). I guess I will use something like 70 ohms and be in 50 A area. My mains fuse is 25 Amps. I have access to an variable current source so I will try doing some calibration later.&nbsp;</p>
<p>Am I thinking right here?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7544"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="parbar&#039;s picture" title="parbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by parbar (not verified) on Thu, 22/11/2012 - 12:06.</div>
    <div class="content">
     <p>gcarlier &nbsp;Thanks!!&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7545"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="parbar&#039;s picture" title="parbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by parbar (not verified) on Thu, 22/11/2012 - 12:32.</div>
    <div class="content">
     <p>I&#39;m not sure but maybe you should hide the API??</p>
<p>I have no RFM12 so I quess I can skip that part.</p>
<p>Are you sending data to 2 places?</p>
<p>EMONCMS first and then&nbsp;SYNOLOGY PHP</p>
<p>/P&auml;r</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7546"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gcarlier&#039;s picture" title="gcarlier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by gcarlier (not verified) on Thu, 22/11/2012 - 12:58.</div>
    <div class="content">
     <p>Hi,</p>
<p>The API key is fake.</p>
<p>I&#39;m sending two CT sensors values to 2 cms different inputs, and then the same values to a PHP script for further processing to others online services like thingspeak or open.sen.se</p>
<p>Guillaume</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7547"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1178.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1178.jpg" alt="alco&#039;s picture" title="alco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by <a href="../user/1178.html" title="View user profile.">alco</a> on Thu, 22/11/2012 - 13:10.</div>
    <div class="content">
     <p>Guillaume, do you mind to post an example of that php-script?</p>
<p>I&#39;m currently using COSM and emoncms and now I fetched both JSON strings in the arduino sketch. but that&#39;s not an really flexible sollution at all. Because I have to remove my nanodeRF basestation everytime that I wan&#39;t to change something for that processing to COSM. So a separate PHP script on my own server would be a nice work-a-round this.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7549"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 22/11/2012 - 13:37.</div>
    <div class="content">
     <p>I have the 013-000...&nbsp;</p>
<p>You might be OK in that case. The test will be to see how much the waveform distorts (both amplitude and phase) with your maximum current and chosen burden. If you are happy with the result, then all is well.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7550"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 22/11/2012 - 13:42.</div>
    <div class="content">
     <p>Sorry for the late reply, but there is a good guide to choosing a suitable sized burden resistor for the power given a certian CT and power monitoring range in the building blocks section here:&nbsp;<a href="https://learn.openenergymonitor.org/?redirect=ct-sensors-interface">http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface&nbsp;</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7552"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="parbar&#039;s picture" title="parbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by parbar (not verified) on Thu, 22/11/2012 - 14:28.</div>
    <div class="content">
     <p>Regarding burden size,&nbsp;I will go for max 50 A =&gt; 70 ohm burden (68 or 75 standard values); After calibration I might report it in the Forums, however it can take some time before I have the time.....</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7556"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gcarlier&#039;s picture" title="gcarlier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emontx Shield + Ethernet Shield</h3>

    <div class="submitted">Submitted by gcarlier (not verified) on Thu, 22/11/2012 - 15:44.</div>
    <div class="content">
     <p>@alco</p>
<p>Here&#39;s an exemple in php to post data from arduino to sen.se, using parameters from previous script</p>
<p>guillaume</p>
<pre>
<?php
	//VALUES FROM ARDUINO
	
 	$emontx_couloir = $_GET['emon_couloir'];
 	$emontx_prises = $_GET['emon_prises'];
 	
 	
	 //PUSH TO SENSE
 
$host='api.sen.se';
$feedId = 'myID';

$data = $emontx_couloir; //ARDUINO DATA

$senseKey = 'apikey';
$posturl= "/events/?sense_key=$senseKey"; //$posturl= "/events/";
$paramsToPostInJSON = '
{
    "feed_id": '.$feedId.',
    "value": '.$data.'

}';

  $header = array(
      "POST $posturl HTTP/1.0",
      "Host: $host",
      "User-Agent: T2NET",
      "Content-Type: application/json",
      "Connection: close"
      );

  $url = "http://".$host.$posturl;
  echo "<h3>sensePublishingEvent !</h3></br>";
  echo "<b>Header :</b></br>";
  print_r ($header);
  echo "<br/><b>Url :</b></br>".$url."</br>";
  echo "<br/><b>paramsToPostInJSON :</b></br>".$paramsToPostInJSON."</
br>";

  $ch = curl_init();
  curl_setopt ($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_VERBOSE, 1);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
  curl_setopt($ch, CURLOPT_POST, true);
  curl_setopt($ch, CURLOPT_FAILONERROR, false);
  curl_setopt($ch, CURLOPT_HEADER, true);
  curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $paramsToPostInJSON);
  $result = curl_exec($ch);
  curl_close($ch);	

 	?></pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/1239"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-rjlUjCBAS8O0MK7vcL2g_PcWklzdg-NneHzzvSlAcRI" value="form-rjlUjCBAS8O0MK7vcL2g_PcWklzdg-NneHzzvSlAcRI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
