<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2917 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:49:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Novice starting out | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Novice starting out</h3>
        <span class="submitted">Submitted by <a href="../user/4481.html" title="View user profile.">mikealynch</a> on Wed, 09/10/2013 - 21:06</span>
        <div class="content"><p>Earlier this year I&#39;ve&nbsp;set up&nbsp;a 9.6kW Solar PV system on my property here in New Zealand.&nbsp; The panels are mounted on four dual axis towers away from the house.&nbsp; The electrical part of the installation&nbsp;appears to be somewhat unique, and since commissioning it&nbsp;I&#39;ve been looking at systems and possibilities for being able to monitor what&#39;s going on with it.&nbsp; From the reading I&#39;ve done on this site I think this extremely adaptable system could be made to work for me.&nbsp; I&#39;ll try and explain the setup here, and what I would like to achieve, and then hopefully someone can confirm I&#39;m heading in the right direction - or not.</p>
<p>The grid tie solar PV is essentially a Type 2 setup, but it&#39;s split into two separate systems and connected to two phases.&nbsp; The two five KW inverters are located in a pool pump shed about 25 meters away&nbsp;on one side of the house.&nbsp; The AC from the inverters are connected to a sub board in the pool shed where there are loads on both phases as well (pool pump, spa, heat-pump etc).</p>
<p>The main feeds for the pump shed/PV are connected in the utility meter board which is located on a&nbsp;separate garage about 5 meters away on the&nbsp;opposite side of the house.&nbsp; Also from here, both phases&nbsp;are feed into the&nbsp;house distribution board.&nbsp; The sub board that is also in the garage is fed from the distribution board from inside the house.</p>
<p>Essentially what I would like to monitor is:</p>
<p>1) The real power being generated by the PV on both phases</p>
<p>2) The real power being imported/exported on both phases</p>
<p>3) The real power being consumed on both phases</p>
<p>4) Separately, the real&nbsp;power being consumed by the pool heat pump</p>
<p>5) Not so important, but if it could be incorporated, two temp readings (One for ambient temp in the pool shed and one for the pool water temp).</p>
<p>I think the way to do it&nbsp;will be to have&nbsp;two emontx units in the pump shed (one for each phase). I can connect voltage signals from both phases. A CT from&nbsp;both emontx&nbsp;units on&nbsp;each inverter AC line, and another CT on the Heat-pump line on the emontx of the same phase.&nbsp; This would give me the PV generated from each inverter, and the consumption from the pool heat pump.&nbsp; If I then have two more emontx units in the garage with a CT from each on both utility phase lines coming in.&nbsp; (Again I can connect voltage signals from both phases from the garage sub board)&nbsp; This would give me the import/export on both phases.&nbsp; I&#39;m hoping then that the consumption on both phases (including the pool heat pump) could simply be calculated by adding generated to imported/exported?</p>
<p>It would be really cool if I could set up two emonGLCD&#39;s like the one in the video with the green and red LEDs, one for each phase.&nbsp;</p>
<p>Hopefully if someone in the know can be bothered wading through all this reading (and hopefully it makes some sort of sense), and can offer a steer in the right direction it would be greatly appreciated.&nbsp;</p>
<p>Thanks very much - great site.</p>
<p>Mike L.</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10309.html" class="topic-previous" title="Go to previous forum topic">‹ SSD Drive Endurance</a>
              <a href="10291.html" class="topic-next" title="Go to next forum topic">Download libraries GitHub ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-15644"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 09/10/2013 - 22:12.</div>
    <div class="content">
     <p>I have waded through - I think I roughly understand, and yes I think it&#39;s do-able. (I&#39;d need to draw out your distribution in a single-line diagram and have you confirm it to be totally happy.)</p>
<p>Here&#39;s my breakdown: 4 emonTx&#39;s, two measuring generation and local loads; and two measuring nett import/export. One GLCD per phase.</p>
<p>Because all 4 emonTx&#39;s will almost certainly use the same radio band and channel channel, there would be a small chance of them blocking each other, the effect would be you lose the occasional reading. The RF protocol tags each message with its source, so the displays know where the measurements relate to.<br />
	Just one question: I assume you have a two- or three-phase supplier&#39;s energy meter, our understanding of multi-phase meters is the energy is summed across all the phases, so generation on one phase can be balanced (as far as your bill is concerned) by a load on another phase. If that&#39;s the case, would it make sense, provided there&#39;s enough screen space to display what you want,&nbsp; to know the nett power across both phases, as both GLCDs can and will receive all four emonTx&#39;s. The GLCD software will need customising to sort that out. If you choose the rather smart display with energy icons, the processor in the GLCD is tight on memory and you might find that you are limited in what extra you can squeeze in.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15646"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4481.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mikealynch&#039;s picture" title="mikealynch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4481.html" title="View user profile.">mikealynch</a> on Thu, 10/10/2013 - 03:11.</div>
    <div class="content">
     <p>Robert, thanks so much for taking a look at this.</p>
<p>I&#39;ve attached a schematic showing how things are connected - hope that makes sense.</p>
<p>Would it be necessary to measure the loads or could the consumption be calculated (generated + imported/exported)?&nbsp; It could be done with an extra CT on all four emonTx&#39;s, so it wouldn&#39;t be an issue if it would be better.&nbsp; I would then have to add the load from both locations to get the total load on each phase?</p>
<p>Regarding your question on metering:&nbsp; Nothing fancy here, just two separate single phase import/export meters. A condition on application was that the PV system had to be split to export on both phases wired to the property&nbsp;for balancing purposes.&nbsp; The silly part is that if I&#39;m running the pool heat pump (3.2kW single phase) I can still be importing on that phase, and at the same time exporting 3kW + on the other.&nbsp; They bill and reimburse on the sums of both the individual meter readings.&nbsp; As some very different condition&#39;s occur between the two phases I would like to have a separate display for both, rather than just having a nett of the two.</p>
<p>I didn&#39;t mention it in the first post but I was intending to run an emonBase as well so I could tinker with the emoncms.&nbsp; Would it be feasible to do it this way and run the GLCD&#39;s from the base?</p>
<p>Thanks again............Mike L.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15656"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 10/10/2013 - 22:04.</div>
    <div class="content">
     <p>Dealing with the simple part first, although it&#39;s not all that clear from the general illustrations, both the GLCDs and the base will receive the same information by radio from the emonTx&#39;s. The base will receive server time and transmit it to the GLCDs that will enable a display of time-of-day, and allow things like daily totals to be reset.</p>
<p>Unfortunately, I have had commitments today and have more tomorrow, I&#39;ll try to find time after that to take a serious look at your scheme.</p>
<p>Basically, for accuracy what you don&#39;t want to be doing is calculating a value that is the difference between two nearly equal quantities, so that will have a bearing on where you measure.</p>
<p>[Edit]</p>
<p>This appears to be the simplest way of doing it.&nbsp; You need to obtain the total consumed as the sum of generated + imported powers. It means there may be, unless you are very careful with the calibration, quite large errors in calculating it when it is small and there is significant generation (that is of course mostly exported).</p>
<p>If you don&#39;t like that, you can add 2 c.t&#39;s on the remaining loads of the pool shed board feeding into emonTx&#39;s 1 &amp; 2, and a further 2 on the feed into the house distribution board feeding into emonTx&#39;s 3 &amp; 4.&nbsp; Power consumed would then be the sum of a number of small(ish) positive powers, which stands a chance of being more accurate.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15665"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4481.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mikealynch&#039;s picture" title="mikealynch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4481.html" title="View user profile.">mikealynch</a> on Sat, 12/10/2013 - 02:56.</div>
    <div class="content">
     <p>Robert, that is great what you have done for me here - greatly appreciated.&nbsp; I think I will go with your second suggestion.&nbsp; I didn&#39;t realise at the time that is wasn&#39;t going to be that hard to actually measure the loads.&nbsp; And as the heat pump is the only load on that phase at the Pool shed sub board, for the cost of three more CT&#39;s it would be silly not to do it this way.</p>
<p>Well I better get some hardware and get busy.</p>
<p>Thanks again.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15684"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 13/10/2013 - 21:10.</div>
    <div class="content">
     <p>Like this then?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15685"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 13/10/2013 - 21:21.</div>
    <div class="content">
     <p>If each emonTx could measure real power on 4 channels simultaneously (something I&#39;ve been looking at recently), then only two of them would be required.&nbsp; With the V3 emonTx platform, the fourth CT channel would need to supplied on stripboard or similar, but that&#39;s easy enough to do.&nbsp; Code to follow shortly ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15687"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 14/10/2013 - 00:22.</div>
    <div class="content">
     <p>Robin:</p>
<p>But the c.t&#39;s would need very long cables - it&#39;s 30 m plus the house from one location to the other. By the time the cable is bought and installed, another emonTx and radio is possibly cheaper and certainly easier.</p>
<p>Or were you thinking of measuring two phases in one emonTx - which would imply a second voltage input as well, so all 6 analogue inputs would be in use, plus 2 temperature measurements on one? I think that would really stretch the processor.</p>
<p>(Sorry Mike, if we&#39;ve lost you there! - The emonTx is designed for single phase installations, so it has only one voltage input. But the ADC has 6 multiplexed inputs, 1 voltage and 3 current are used, leaving two unequipped spares coming out to ports on the pcb. By adding two lots of interface circuit externally, these can be used, which would give you 1 emonTx in each location.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15688"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4481.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mikealynch&#039;s picture" title="mikealynch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4481.html" title="View user profile.">mikealynch</a> on Mon, 14/10/2013 - 06:39.</div>
    <div class="content">
     <p>That &#39;s fine Robert.&nbsp; So far I understand all that.&nbsp; As I&#39;ve only had limited tinkering with electronics, I think your version 3 of the schematic will be the way to go for me.&nbsp; The only disadvantage being the number of transmitted signals.&nbsp; At least I can use hardware that already exists without modification, and firmware that will require a small tweak as opposed to a complete rewrite.</p>
<p>Thanks all the same Robin.&nbsp; Appreciate the input.&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15689"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Mon, 14/10/2013 - 07:54.</div>
    <div class="content">
     <p>OK Mike, I&#39;d not appreciated the distance aspect.&nbsp; I&#39;ve recently written some code which continuously monitors real power on four channels, and your project seemed a good opportunity to test it.&nbsp; It seems to work OK on the bench and will hopefully appear on Github soon for anyone who may be interested.</p>
<p>With appropriate care on the HV side, I see no reason why the functionality of emon TXs 1 &amp; 2 (and, separately, 3 &amp; 4) can&#39;t be combined.&nbsp; Is there any fundamental reason why voltage and current on different phases can&#39;t be sensed by one emonTx?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15694"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 14/10/2013 - 11:27.</div>
    <div class="content">
     <p><em>Is there any fundamental reason why voltage and current on different phases can&#39;t be sensed by one emonTx?</em></p>
<p>Not a fundamental one, but two practical ones - the signal conditioning interface must be added externally, and then there&#39;s the matter of processor load. If you&#39;re using emonLib and sampling the phases alternately, that&#39;s not a problem. If you are running the interrupt-driven code and sampling continuously, then the sample rate is going to suffer. OK, it&#39;s only one more than your 4+1, but it&#39;s still more - and don&#39;t forget the temperature measurement too.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15695"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Mon, 14/10/2013 - 14:39.</div>
    <div class="content">
     <p>With all six analogue inputs in operation and the ADC going flat out. the sampling rate would drop to 32 per 50 Hz mains cycle.&nbsp; My gut feeling is that this should be OK for this application.</p>
<p>Rather than having six pairs of reference dividers, each with its attendant 10 uF cap, this would seem an ideal opportunity to use the single buffered reference that I introduced for my Uno-based Mk2 router.&nbsp; A strip-board front end for all six channels should be easy enough to construct.</p>
<p>It would be important to ensure that the main processor has sufficient time to do all of its processing activities within the time that is available to it (i.e. 6 x 104 uS).&nbsp; Integer-based maths is much quicker, but FP maths would probably be OK.&nbsp; Time might be short at the moment when all the data is to be dispatched.&nbsp; Maybe it would be possible to process the data on some kind of rota basis, so that several channel&#39;s worth of infrequent data does not all have to be done at once.</p>
<p>Sounds an interesting project, I look forward to seeing how it develops.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15697"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 14/10/2013 - 23:56.</div>
    <div class="content">
     <p>Robin:</p>
<p>You&#39;re assuming Mike wants to go with your new software.</p>
<p>Mike:</p>
<p>The new software Robin mentions offers the advantage over the Github demonstration sketches and emonLib in that it measures the power continuously, whereas the latter, being originally intended for battery or mains operation, only takes a short sample of the voltage and current every 5 seconds (and we presume that sample is representative of the period).<br />
	Note: if you do add to the hardware, you won&#39;t be able to use the published sketches straight off - they will need to be customised.</p>
<p>By &quot;buffered reference&quot;, Robin is referring to the input circuitry. If you look at Building Blocks, the input has to be biased mid-way up the input voltage range (1.65 V for a 3.3 V emonTx) and in the emonTx this is done with a simple voltage divider and capacitor. In the software, that offset is removed by a high pass filter, one per channel because due to resistor tolerances, the offsets are never the same. Robin&#39;s Mk2 input had a common bias source provided by an op-amp, which meant a single low-pass filter could be used to extract the bias value, which is very simply subtracted from each input signal to remove the offset (thus speeding up the maths!).</p>
<p>If you have confidence in your building skills, knocking up a 6-way front end (even if you do attach it to a partially complete emonTx) would be fine; but if you have reservations, maybe you will be better sticking to the emonTx kit (2-off) and when it&#39;s proven, add a 2-way front-end via the headers. If you have even bigger reservations, it is four emonTx kits.</p>
<p>(Personally, I&#39;d go for 2 emonTx&#39;s with a 2-channel front end: 1 extra current &amp; 1 extra voltage.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15701"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Tue, 15/10/2013 - 09:21.</div>
    <div class="content">
     <p><em>Robin:&nbsp; You&#39;re assuming Mike wants to go with your new software.</em></p>
<p>&nbsp;</p>
<p>Robert:&nbsp; No, I&#39;m just making Mike aware that an alternative solution for his project may be available.</p>
<p>Mike:&nbsp; I&#39;ll send you a PM.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15740"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Thu, 17/10/2013 - 14:36.</div>
    <div class="content">
     <p>Mike, here is my suggested solution for your project.&nbsp; It requires two Arduino Unos, each of which deals with two voltage signals (one on each phase) and four CTs, two on each phase.&nbsp; The signal-conditioning circuits for all six channels are mounted on a single front-end board along with a single buffered-reference, diagram attached.&nbsp; The Uno operates over a 5V range rather than the 3.3V range that an emonTx uses, hence the various resistor values may need to be adjusted for optimal performance.</p>
<p>Each Arduino will also require an RF adapter.&nbsp; The one that I built yesterday follows the design on the BB page.&nbsp; The RFM12B chip that I used has had a difficult history because some months ago I unhelpfully soldered it onto an emonTx upside down. Having separated these components by brute force, both have now proved to be entirely serviceable.&nbsp; These days, electronic components can take an awful lot of abuse, much like cartoon characters that keep coming back for more!&nbsp; The attached photos show:</p>
<p>i) the Uno with its front-end and RF adapters;</p>
<p>ii) My voltage source, a twin secondary &#39;9V&#39; transformer;</p>
<p>iii) my 4 CTs, two with one coil passing through each, and two with two coils passing through them.&nbsp; Within each pair, their directions are reversed.&nbsp; By this means, I get to see 4 separate waveforms: two small, in anti-phase; and two at twice the size, also in anti-phase;</p>
<p>Three sketches are attached in the .zip file:</p>
<p>i) TwoPhaseFourChannel_RPmonitor_1.ino&nbsp;&nbsp; This is the main workhorse (sorry for the unweildy name!)</p>
<p>ii) RawSamplesTool_6chan_ino&nbsp;&nbsp; A variant of my existing tool, which uses all 6 analog inputs</p>
<p>iii) emonTxV3_4chan_Rx.ino&nbsp;&nbsp; A suitable receiver sketch with which to display the transmitted data.&nbsp; The payload has 5 integer fields: the first contains a message ID, the other four contain the Real Power in each of the four CTs.&nbsp;&nbsp; The on-board LED blinks in line with the LSB of the message ID.&nbsp; This sketch will hopefully be appearing on GitHub soon, and works fine for this application too.</p>
<p>The modified RawSamplesTool, as above,&nbsp; confirms that the front-end is working as expected.&nbsp; Here is a display when around 2 kW is flowing through my bank of CTs.&nbsp; As mentioned above, my CTs have been arranged to provide four distinct traces for current.&nbsp; My two voltage sources are identical and wired in anti-phase:</p>
<p>&gt;&gt;free RAM = 725<br />
	millis() now = 0<br />
	recordingMayStartAt 5000<br />
	4<br />
	3<br />
	2<br />
	1<br />
	0<br />
	No of cycles recorded = 1<br />
	cycleCount 252,&nbsp; samplesRecorded 28<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 235 0.14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp; 401&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; 01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp; 2&nbsp;&nbsp; 5&nbsp; .&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 25&nbsp; 1&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 41 0.&nbsp; 532&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10 4&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; . 5&nbsp;&nbsp; 2&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 1&nbsp; 52 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	&nbsp;</p>
<p>Note that the number of sample sets is only 28 whereas I have confidently predicted 32 per mains cycle for 6-channel operation.&nbsp; That&#39;s because this tool controls the ADC via the highly inefficient analogRead() routine.&nbsp;</p>
<p>In the main workhorse sketch, the ADC is running continuously.&nbsp; An Interrupt Service Routine tells it which of the six available inputs to service next.&nbsp; Because the next conversion has already started by the time that the ISR is run, the &#39;next&#39; channel is always two ahead of the one that has just finished.&nbsp; This can be seen in the switch() block in the ISR routine, ISR(ADC_vect).</p>
<p>To demonstrate that the main sketch is running at the predicted rate, I&#39;ve added a line which displays how many samples per mains cycle have been seen.&nbsp; The answer is indeed just over 32, its actual value depending on the local mains frequency:</p>
<p>Go!<br />
	samples per mains cycle = 49.53<br />
	0, 0, 0, 0, 0<br />
	samples per mains cycle = 32.06<br />
	0, 0, 0, 0, 1<br />
	samples per mains cycle = 32.06<br />
	0, 0, -97, 238, 2<br />
	samples per mains cycle = 32.06<br />
	1049, -1295, -699, 700, 3<br />
	samples per mains cycle = 32.06<br />
	1422, -1378, -698, 699, 4<br />
	samples per mains cycle = 32.07</p>
<p>The above snippet is from the results file, RP_4chan_results_2.txt, which is also included in the .ZIP file.&nbsp; Note the four power values (the fifth value is the message ID).&nbsp; For this run, the load was my room heater on its low-power setting, nominally 750 Watts.&nbsp; The 3rd and 4th CTs show around 700 Watts, their sense being opposite because their CTs are opposite ways around.&nbsp; The 1st and 2nd CTs show double this value because the cable goes&nbsp; around each of them twice.</p>
<p>An RF message is dispatched every 2 seconds (every 100 mains cycles at 50 Hz), the payload for each message being assembled in several stages.&nbsp; After 20 mains cycles, the average real power for CT1 during the last 2 seconds is calculated and lodged into the appropriate field in the payload.&nbsp; At 20 cycle intervals, the data for CTs 2, 3 and 4 are treated similarly.&nbsp; At mains cycle 100, the pre-assembled RF message is dispatched.&nbsp; By this means, workload that occurs infrequently is spread out rather than being all bunched together at one point.&nbsp; So how effective is this approach, when combined with integer maths throughout?</p>
<p>With no Serial display, and the RF message being assembled but not sent, Workload Check shows that the main processor is idle for around 480 uS out of&nbsp; every 624.&nbsp; That&#39;s a processor occupancy of just 25%! &nbsp; When the RF activity is reinstated, the displayed value falls greatly; I expect there is some interaction between all the various interrupts that are flying around the place.</p>
<p>This code has been optimised for monitoring real power on several channels.&nbsp; PowerCal and phaseCal can be individually set for each CT.&nbsp; I think the Uno platform is well suited for this particular project, but similar code could be run on an emonTx with additional front-end circuitry as required.&nbsp; I hope that it will be of use to anyone who has need of such a solution.&nbsp;&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16929"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Sat, 21/12/2013 - 06:33.</div>
    <div class="content">
     <p>Excellent work....!!!!</p>
<p>Just one question, what lines must be changed to 120V and 60Hz<br />
	Can we make a deal?. What would need to consider for this?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16932"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 21/12/2013 - 10:04.</div>
    <div class="content">
     <p>Jos&eacute;, As far as I can see, this code should work OK for you without requiring any changes.&nbsp; However, because of your lower mains voltage and higher currents, it may be useful to alter the component values in your input sensors.&nbsp;</p>
<p>For best performance, each of the signal sources should use most of the available range of the ADC.&nbsp; The 6-channel version of RawSamplesTool that I included will show you when this situation has been achieved.&nbsp;</p>
<p>Because this sketch measures power, rather than energy, I think it should work equally well at 50Hz or 60 Hz.</p>
<p>Is that a deal?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16941"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Sat, 21/12/2013 - 14:54.</div>
    <div class="content">
     <p>What values ​​are you referring to?</p>
<p>only I require measure a current signal (up to 100A) and voltage (120), at a frequency of 60Hz, for monophase installation, but I require the measurement of real power and energy, then send the data using a shiel wi-fi arduino to a server.</p>
<p>Is this code would be good?</p>
<p>I have the arduino Mega2560 and TFT&nbsp;where I will display the measured values.</p>
<p>In truth I have reviewed some codes here, but I failed to interpret. The codes that I understand are more accomplished, the Seller and the EmonLib the one in this post, I reviewed the one <a href="1535.html">here</a>, which is also very good, but I think for so many functions that I have had difficulty interpreting it.</p>
<p>What would be the most suitable for my requirements?</p>
<p>Thanks for reply ..!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16948"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 21/12/2013 - 17:30.</div>
    <div class="content">
     <p>Jos&eacute;, the 6-channel code that I have written is intended for use in New Zealand which has the same voltage and frequency as the UK.&nbsp; If you wish to use this code in Spain, then it is up to you to make any adjustments that are necessary.&nbsp;</p>
<p>In my last message, I explained that you may wish to change the values in your input circuits so that they use most of the available range of your ADC.&nbsp; These input circuits (or sensors) are fully explained in the Building Blocks sections.&nbsp; I can&#39;t tell you exactly what component values to use.&nbsp; You need to assemble and test a system for yourself, and then adjust these component values to suit your particular needs.</p>
<p>The ASCII display above shows that all six of the analogue channels in my test rig are using a reasonable proportion of the ADC&#39;s range.&nbsp; If a sensor is too sensitive, the output values will &quot;clip&quot; at the peaks of each waveform (your sine wave will look square).&nbsp; If it is not sensitive enough, your output values will be very small, and will suffer from quantisation distortion (i.e. granularity or lumpyness) when only small signals are present.</p>
<p>A 10-bit ADC has 1024 output values, from 0 to 1023.&nbsp; These values span a certain range of input voltage, which may be 5V or 3.3V or 1.1V depending on your system.&nbsp; It is up to you to adjust the signals from your sensors so that they are well suited to your ADC.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17503"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Fri, 10/01/2014 - 23:22.</div>
    <div class="content">
     <p>Hello, excuse me for not responding in due time been out of this a good time! ...<br />
	Thanks for the help, I advance a lot so far in my code.</p>
<p>Now I encounter a problem, because I want the energy consumed is stored for years. In code that is using review kwh calculated the millis () function, but this is restored in approximately 49.7 days, and my idea is to continue indefinitely measuring kwh.</p>
<p>I hope to finish soon and share my modified code, so that they serve those in need.</p>
<p>How do the calculation without the millis () function? or</p>
<p>What setting should I do to not be reestablished?</p>
<p>THANKS AGAIN..!!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17504"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 10/01/2014 - 23:57.</div>
    <div class="content">
     <p>You must change the size of the units you measure.</p>
<p>We humans count small amounts of time in seconds, larger amounts in minutes, still larger in hours, etc. Likewise we measure small amounts of energy in Joules, large amounts in MJ or kWh, larger still in MWh.</p>
<p>You must do the same. I have not looked again at calypso_rae&#39;s code, and it depends on the degree of accuracy and how many years you want to count, but if for example you have an unsigned long integer (max value 4,294,967,295), then you can use that to count seconds, and every second (using the millisec timer) you increment it and at the same time check your energy register. If it is more than 1 kWh, you subtract 1 kWh and add 1 to another &quot;kWh&quot; register. That way you have the exact time to 1 s, and the exact energy held in two registers, and you can carry on like that for approx. 136 years.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17505"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Sat, 11/01/2014 - 02:20.</div>
    <div class="content">
     <p>This is my code to calculate the energy in the variable (kwhDay) I store dirio consumption (it resets every day at noon) in the variable (kwhMonth) I store the monthly consumption (resets the 7th of each month) and the variable (kwhTotal) want the total consumption was stored for years. The problem that I have is when the millis () function is restored, my varible (Timems also will reset), and that all comes to low.</p>
<p>&nbsp;</p>
<pre>
ltmillis = tmillis;
  tmillis = millis();
  timems = tmillis - ltmillis;
  timems =0;
  //Calcular en  kwh de consumo.
   
kwhTotal = kwhTotal + ((realPower*timems/3600000)/1000);
costo = 0.08*kwhTotal;
kwhDay = kwhTotal;
kwhMonth = kwhTotal;
   DateTime now = RTC.now();
   int last_hour = hourReset;
   hourReset = now.hour();
   int last_day=dayReset;
   dayReset = now.day();
   // minute = now.minute();
  
  if (last_hour == 11 &amp;&amp; hourReset == 12) {kwhDay = 0 ;}
  if ((last_day == 10 &amp;&amp; dayReset == 11)&amp;&amp; (last_hour == 11 &amp;&amp; hourReset == 12) )
  {kwhMonth = 0 ;}</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17508"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 11/01/2014 - 09:28.</div>
    <div class="content">
     <p>The purpose of the code that I&#39;ve posted on this thread is to transmit (using RF) the real power on each channel.&nbsp; This data can then be received and processed by some other platform.&nbsp; That could be a pair of emonGLCDs or a nanodeRF which links in to emonCMS etc.</p>
<p>With all six analogue channels on the go, this code is fairly busy as a multi-channel data gatherer.&nbsp; Keeping track of cumulative energy flow totals for each channel as well seems an unnecessary overhead.&nbsp; Also, any accumulated values would be lost when the system restarts.</p>
<p>With my new Mk2 hardware, there is a second CT which can measure the actual flow of energy to the dump load; this data can be accumulated within the associated code.&nbsp; To keep the code efficient, energy flow is calculated using integer maths in linear units of high precision; there are several million of these per WattHour.&nbsp; Even when using a 4-byte long, such calculations could soon overflow.&nbsp;</p>
<p>To avoid this problem, I&#39;ve included a WattHour register which is incremented whenever the energy accumulator exceeds the 1 WH mark.&nbsp; The value in my (long) accumulator is then reduced by exactly 1 WH&#39;s worth.&nbsp; The content of the WattHour register is routinely displayed to the front-panel screen and/or transmitted by RF for use elsewhere.&nbsp;&nbsp; As an unsigned int, the WattHour register will record up to 63 kWh which is plenty for one day&#39;s worth, and it auto-resets each night.&nbsp; Longer term storage of data needs to be done elsewhere.</p>
<p>This arrangement is like recording &quot;now&quot; as being 25.123 seconds past 09:15 on 11/1/2014.&nbsp; By this means, millisecond accuracy can be provided for a unique moment in time without the need for a local millisecond clock that <strike>can run </strike>has been running for thousands of years.</p>
<p>[This arrangement appears to be just as RW had suggested :-) ]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17518"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 11/01/2014 - 13:36.</div>
    <div class="content">
     <p>Jos&eacute;:</p>
<p>If I understand you correctly, you have a problem when the millis() timer wraps round to zero?&nbsp; That is a well-known problem and it has a solution: <a href="http://playground.arduino.cc/Code/TimingRollover" title="http://playground.arduino.cc/Code/TimingRollover">http://playground.arduino.cc/Code/TimingRollover</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17521"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Sat, 11/01/2014 - 14:31.</div>
    <div class="content">
     <p>My idea is to be like a commercial accountant regarding the storage of measured kwh. That is my big problem, try to fix it, the idea of ​​<em>Robert Wall</em>, is very good (change the size of the variables), but as change these units without using milis (), to measure, ie as that has elapsed one hour, or 1 day, and this will continue to increase. Actually I&#39;m half confused, I need a lot of science, if someone understands me agradesco you greatly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17522"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 11/01/2014 - 15:27.</div>
    <div class="content">
     <div id="yass_top_edge_dummy" style="width: 1px; height: 1px; padding: 0px; margin: -9px 0px 0px; border-width: 0px; display: block;">
	&nbsp;</div>
<div id="yass_top_edge" style="background-image: url(_chrome_/yass/content/edgebgtop.html); background-attachment: scroll; background-position: center bottom; padding: 0px; margin: 0px 0px 8px -8px; border-width: 0px; height: 0px; display: block; width: 1px;">
	&nbsp;</div>
<p>I shall try to explain again. You have two problems: (1) millis() returns to zero every 50 days ( approximately) and (2) your numbers get too big. Here is a general idea for what you must do:</p>
<p>Inside your main loop:</p>
<p>You use millis() to measure a duration of exactly one minute. You must use the <em>TimingRollover</em> code to make sure everything happens correctly during the minute after millis() has returned to zero.</p>
<p>	You accumulate Joules each time you measure energy (2500 times per second?).</p>
<p>When 1 minute has passed:<br />
	&nbsp;&nbsp;&nbsp;&nbsp; Add 60,000 to the milliseconds to know when the next minute is due.<br />
	&nbsp;&nbsp;&nbsp;&nbsp; Add 1 to your count of minutes.<br />
	&nbsp;&nbsp;&nbsp;&nbsp; If the Joules accumulator is greater than 3,600,000 (= 1 kWh) then<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Add 1 to the kWh register and subtract 3,600,000 from the Joules register<br />
	&nbsp;&nbsp;&nbsp;&nbsp; else do nothing.<br />
	&nbsp;</p>
<p>At any time the total kWh is the number in the kWh register + (the number in the Joules register / 3600000).<br />
	Likewise the total time in minutes is the number of minutes + (the number of milliseconds / 60000)</p>
<p>If the maximum number in your Joules register is greater than the biggest number you can use, then you must do this in three steps and not two. (1) accumulate Joules, (2) Joules -&gt; Wh ( 1 Wh = 3600 J) , (3) Wh -&gt; kWh.<br />
	&nbsp;</p>
<p>&nbsp;</p>
<div id="yass_bottom_edge" style="background-image: url(_chrome_/yass/content/edgebgbot.html); background-position: 0px 0px; position: absolute; margin: 0px; padding: 0px; border-width: 0px; height: 0px; left: 0px; top: 385px; width: 100%; display: block;">
	&nbsp;</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17525"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Sat, 11/01/2014 - 19:35.</div>
    <div class="content">
     <p>Thanks, about the size of variables and I resolved to do what you mentioned, what time (millis ()), I&#39;ll fix now with your suggestions. I hope to solve it today.</p>
<p>Thanks Robert Wall.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17526"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 11/01/2014 - 20:40.</div>
    <div class="content">
     <p>The multi-channel code that I posted on this thread calculates the average power (in Watts) for each channel during a 2-second period.&nbsp; To convert this to energy (in Joules), just multiply each power value by two (because Energy = Power x Time).&nbsp;</p>
<p>If you want to know the total amount of energy that has been recorded, your energy accumulator variable will need to be updated every two seconds, not every millisecond.&nbsp; To prevent the accumulator from overflowing, you will need to keep track of whole WattHours separately, as Robert and I have both described.</p>
<p>Once the start-up period has passed, my code doesn&#39;t use millis().&nbsp; To keep track of time, e.g. for when an RF message should be transmitted, it uses cycleCount which increments once every mains cycle (20 mS in the UK).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17540"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Sun, 12/01/2014 - 13:58.</div>
    <div class="content">
     <p>After being trying all day not e able to solve it, I always toss and turn and came to the same thing, I have this code, but clearly I still have the same problem (when <em>startTime2</em> reach the limit) or is making me hard this apparently is simple.</p>
<p>&nbsp;</p>
<address>
	<em>startTime2=1000;</em></address>
<address>
	i=1;</address>
<address>
	j=1;</address>
<address>
	k=1;</address>
<address>
	if( (int)( millis() &gt;=&nbsp; startTime2 ) )</address>
<address>
	&nbsp; {</address>
<address>
	&nbsp; whDay = whDay + (realPower*i/3600); // (Wh)</address>
<address>
	if&nbsp; (whDay=1000*j)&nbsp; {</address>
<address>
	kwhMonth=k;</address>
<address>
	j++;</address>
<address>
	k++;</address>
<address>
	}</address>
<address>
	&nbsp; startTime2 += 1000;&nbsp; // do it again 1 second later<br />
	&nbsp;&nbsp; i++;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</address>
<blockquote><p>&quot;You use millis() to measure a duration of exactly one minute. You must use the TimingRollover code to make sure everything happens correctly during the minute after millis() has returned to zero.&quot; &nbsp;This is what I can not understand, apparently the language is again affecting me.</p>
</blockquote>
<p>Excuse me, could you give an example that tells me about it, I would infinitely thanked him.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17543"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 12/01/2014 - 19:30.</div>
    <div class="content">
     <p>Jos&eacute;,</p>
<p>Te di un enlace: <a href="http://playground.arduino.cc/Code/TimingRollover">http://playground.arduino.cc/Code/TimingRollover</a>.&nbsp; No puedo explicar nada mejor que eso.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17560"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Mon, 13/01/2014 - 09:29.</div>
    <div class="content">
     <p>I think that link needs an extra &#39;/&#39;</p>
<p><a href="http://playground.arduino.cc//Code/TimingRollover">http://playground.arduino.cc//Code/TimingRollover</a>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17567"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 13/01/2014 - 12:56.</div>
    <div class="content">
     <p>&lt;Sniff&gt;! I checked it, then the automatic formatter screwed up! I have changed it&nbsp; - I must learn to always write the HTML by hand, it is much safer!</p>
<p>&lt;p&gt;Te di un enlace: &lt;a href=&quot;http://playground.arduino.cc/Code/TimingRollover&quot;&gt;http://playground.arduino.cc/Code/TimingRollover&lt;/a&gt;.&amp;nbsp; No puedo explicar nada mejor que eso.&lt;/p&gt;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17585"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Tue, 14/01/2014 - 04:51.</div>
    <div class="content">
     <p>Thanks friends, I still have much to learn I&#39;m aware of that, that was very helpful.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17988"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Thu, 30/01/2014 - 01:09.</div>
    <div class="content">
     <p>Hi, With your help I managed to have my first version of the power meter and I make it public to your reviews .<br />
	This is based on the library &quot; EmonLib &quot; .</p>
<p>Necessary changes (calibration ) was performed at a voltage of 120V at 60Hz. The low values ​​of the current I miss that when no measure is unloaded ( unlikely because almost always will be a charge of the same prototype measurement) wrong values.</p>
<p>Power variables are displayed on the TFT, the power is calculated every second ( Joules ), three parameters enrg&iacute;a consumed ( Daily, &nbsp;Monthly, and Cumulative&nbsp;) is measured , also the cost per kWh is calculated for a month.</p>
<p>This is my first version I have not checked for a long time , but the few tests I&#39;ve done is satisfactory. Any criticism would be welcome.</p>
<p>Thank you ..! &nbsp;<a href="http://this is https://github.com/jdarduino/EnergyMeter/blob/master/.gitignore"><em>This Is&nbsp;https://github.com/jdarduino/EnergyMeter/blob/master/.gitignore</em></a></p>
<p>
	The next part is to send this data to the internet, I tried xively&nbsp;<a href="https://github.com/xively/xively_arduino">library</a>, but the display on the TFT , fell to low. This time delay in the connection, and no connection when the program stops unexpectedly .</p>
<p>I would very much if I recommend which is the best option for sending data to internet, quickly checked the &quot; emoncms &quot; page but I have absolute ignorance of their operation and as sending data from my ethernet shield Arduno .</p>
<p>I hope my program will be useful for someone.</p>
<p>Sorry for my weird English. :-)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17996"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 30/01/2014 - 11:17.</div>
    <div class="content">
     <p>The sketches for the NanodeRF on Github <a href="https://github.com/openenergymonitor/NanodeRF" title="https://github.com/openenergymonitor/NanodeRF">https://github.com/openenergymonitor/NanodeRF</a> might help you with your connection to the Ethernet.</p>
<p>You can try out EmonCMS with your web browser. Create an account, go to Input and Input API Help. You will find there the data formats that EmonCMS expects. There are two forms. The first (JSON) allows you to give a name to the input:</p>
<p>http://emoncms.org/input/post.json?json={power:200}&amp;apikey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</p>
<p>The second (CSV) only sends values:</p>
<p><a href="http://emoncms.org/input/post.json?csv=100,200,300&amp;%c2%a0" title="http://emoncms.org/input/post.json?csv=100,200,300&amp; ">http://emoncms.org/input/post.json?csv=100,200,300&amp; </a> apikey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx<br />
	On the Input page these are named automatically as &quot;1&quot;, &quot;2&quot;, &quot;3&quot; etc and you can add a &quot;Description&quot;, for example &quot;Power from Grid&quot;.</p>
<p>(You can see your personal APIkey on the Input API Help page - use that instead of xxxxx.....)</p>
<p>If you can send data from your Arduino in one of these forms, you can use EmonCMS.<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18065"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Fri, 31/01/2014 - 17:58.</div>
    <div class="content">
     <p>Thanks for responding, I am reviewing and trying to send <em>emoncms</em> damages. I see this <em>&lt;HttpClient.h&gt;</em> uses the library, this library has been giving me problems (there is something there, that achievement does not understand). Suppose I want to send data to emoncms every 30 seconds, and for a moment the connection is lost (may be a failure of router, cable etc..), There is that it gets stuck my program looking to establish a connection because I am calculating the energy every second (in Joules) if the time it takes trying to connect is greater than 1 second, give me erroneous energy values​​.</p>
<p>Here&#39;s how the energy calculation.</p>
<p>&nbsp;</p>
<address>
	//&nbsp; Calculo de la enrg&iacute;a Consumida<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</address>
<address>
	if ((millis()-fast_update)&gt;1000) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp; Evaluaco&oacute;n de potencia por cada segundo (Energ&iacute;a Juls)</address>
<address>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fast_update = millis(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; El tiempo actual se guarda en una variable para su posterio evaluaci&oacute;n<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DateTime now = RTC.now(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; Se inicializa el RTC para programar el tiempo la hora de reestablecimiento de la energ&iacute;a<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int last_hour = hourReset; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; Se guarda la hora actual en una variable para poder compararla<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hourReset = now.hour(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp; Se guarda la hora actual<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dayReset=now.day(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; Se guarda la fecha del d&iacute;a actual<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; whDay += (realPower * 1) / 3600; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp; C&aacute;lculo de la Energ&iacute;a diaria consumida (En Wh)<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kwhMonth += (realPower*1)/3600000; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; C&aacute;lculo de la Energ&iacute;a mensual consumida (En kWh)<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; kwhTotal += (realPower*1)/3600000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; C&aacute;lculo de la Energ&iacute;a total consumida (En kWh)<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp; //&nbsp; Se Programa una determinada hora y d&iacute;a para reestablecer los valores&nbsp;de energ&iacute;a medidos</address>
<address>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (last_hour == 23 &amp;&amp; hourReset == 00){ whDay = 0;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</address>
<p></p>
<address>
	//&nbsp; Se reestablee el conteo de Wh diario a la media noche<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (dayReset == 11 &amp;&amp; (last_hour == 23 &amp;&amp; hourReset == 00) ){kwhMonth=0;}&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp; Se reestablece el conteo de kWh mensual el 11 de cada mes a media noche<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</address>
<p></p>
<p>One more question. Can two-way communication from emoncms?, Would like to send messages (or to control the load from emoncms).</p>
<p>Gracias..!!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18066"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1741.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1741.jpg" alt="ukmoose&#039;s picture" title="ukmoose&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/1741.html" title="View user profile.">ukmoose</a> on Fri, 31/01/2014 - 19:09.</div>
    <div class="content">
     <p>This is a really badly titled thread and is no longer involving the person who initially posted the query. &nbsp;Any chance of renaming it?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18068"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Fri, 31/01/2014 - 21:03.</div>
    <div class="content">
     <p>Sorry, I could make as a new topic in forum ... Rename this is not how to do it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18069"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 31/01/2014 - 21:05.</div>
    <div class="content">
     <p>A better solution would be to transplant the inappropriate comments into a new, relevant, thread. Unfortunately, there&#39;s no mechanism in Drupal that I know of to allow that to happen. So we&#39;re pretty much stuck with it.</p>
<p>However, the thread can be renamed. If you&#39;d like to suggest a new name, I&#39;ll do that.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18071"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Fri, 31/01/2014 - 22:10.</div>
    <div class="content">
     <p>Well in this thread we talk a little of everything .. A general theme could be &quot;Measuring Energy to &nbsp;120V 60Hz&nbsp;and data sending with shield ethernet.&quot; &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18077"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4595.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4595.jpg" alt="José&#039;s picture" title="José&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/4595.html" title="View user profile.">José</a> on Sat, 01/02/2014 - 02:36.</div>
    <div class="content">
     <p>Ok. I answered myself, I was using the library xively, and this has features that spend time, communicate, if there is no connexon be trying some time. which does not suit me, because you can spend a few seconds and that is equivalent to an error in the calculation of energy (Wh), deveria add a condition that if there is no connection at any given time (about 100ms). No more trying to connect to it to continue executing the rest of the program.</p>
<p>I pose the question again. Can I establish two-way communication from emoncms?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18086"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 01/02/2014 - 13:57.</div>
    <div class="content">
     <p>I agree that this thread has drifted away from its original topic, and that this situation is not ideal.&nbsp; When this happens, the best approach is surely for someone to start a new thread with an appropriate title which can then head off in the new direction.&nbsp;</p>
<p>Changing the title and/or content of an existing thread does not seem a good idea to me.&nbsp; I spent several days creating and then posting a comprehensive solution which appears to satisfy all the requirements of the originator.&nbsp; It&#39;s hard enough to locate things in this system as it is; if titles were to be changed, it would become even more awkward.</p>
<p>My suggestion is that someone now adds a suitable message to terminate this thread and refer any interested reader to a new one.&nbsp; It won&#39;t be me.&nbsp; I can understood the first half, but get lost when anyone mentions &quot;apikey&quot; and the like!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18089"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 01/02/2014 - 14:36.</div>
    <div class="content">
     <p>Jos&eacute;: I think there is another active thread where commands back from emonCMS are being discussed <a href="3733%c2%a0.html" title="http://openenergymonitor.org/emon/node/3733 ">http://openenergymonitor.org/emon/node/3733 </a> though there does not seem to be a working scheme yet.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28600"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7818.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="slipery&#039;s picture" title="slipery&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/7818.html" title="View user profile.">slipery</a> on Thu, 12/03/2015 - 02:47.</div>
    <div class="content">
     <p>Hi Robin, I realize this is an old thread but it is exactly what I am looking for. I am new to the open energy monitor forum but have many years experience in electronics and computing and am now retired.&nbsp; I have made projects with PICs, beaglebones, arduinos and PI&#39;s and would like to take your project a little further if it hasn&#39;t already been done before.&nbsp; I would Like to make a PCB for the TwoPhase4chanMon_FrontEnd circuit that you came up with to tidy it up a bit an ot isd there a better way to handle this 2 phase monitoring with the solar pannels separate from the house main board&nbsp;on a sub board located about 50 meters away.</p>
<p>&nbsp;</p>
<p>Cheers Mal</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28607"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Novice starting out</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Thu, 12/03/2015 - 16:01.</div>
    <div class="content">
     <p>Hi Mal,</p>
<p>Yes, I was pleased with the way this code turned out.&nbsp; It was the first time that I&#39;d had all six of the analog IO ports in operation.&nbsp;</p>
<p>I now have a 3-phase PCB which supports a pair of V &amp; I sensors on each phase.&nbsp; If you wanted to only monitor two phases, with 2 CTs on each, I&#39;m sure that could be arranged with only minor changes to the PCB.&nbsp; This PCB includes the processor rather than just being the front end circuits.</p>
<p>Details of this board are at <a href="http://mk2pvrouter.co.uk/61101.html">http://mk2pvrouter.co.uk/61101.html</a>&nbsp;&nbsp; Send me a PM if you&#39;re interested, or there is an email address on my <a href="http://mk2pvrouter.co.uk/13779.html">Shop </a>page.</p>
<p>Robin (calypso_rae)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2917"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-2ZAEz7DuxcozkqJmmObUNWCQ6yMdXXs2spxy5CkX8O8" value="form-2ZAEz7DuxcozkqJmmObUNWCQ6yMdXXs2spxy5CkX8O8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
