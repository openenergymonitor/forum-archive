<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5656 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:40:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonTx V3 New Version Development | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonTx V3 New Version Development</h3>
        <span class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 29/08/2014 - 12:01</span>
        <div class="content"><p>Hello everyone,</p>
<p>We&#39;re currently working on a minor update to the emonTx V3.</p>
<p>The main changes planned are so far are:</p>
<ul>
<li>
		Laying down ATmega328 directly on the board as opposed to using RFu328, will make manufacture easier and allow support for RFm69CW using standard JeeLib library</li>
</ul>
<ul>
<li>
		Adding RJ45 temperature monitor connection to allow for easy connection of bus-string of DS18B20 temperature sensors for applications like heatpump monitoring. The Terminal block will stay and it&#39;s also easy to breakout the RJ45 onto terminal block using adapter in the shop [<a href="http://shop.openenergymonitor.com/rj45-to-terminal-block-breakout-for-ds18b20-temperature-sensors/">LINK</a>] or connect in a DS18B20 ready-made with RJ45 connector, also in shop [<a href="http://shop.openenergymonitor.com/rj45-encapsulated-ds18b20-temperature-sensor/">LINK</a>].</li>
</ul>
<p>I don&#39;t want to add features users don&#39;t want or wont use so here are a couple of things I would be interested to hear your thoughts on:</p>
<ul>
<li>
		DIP switches for quick node ID selection: 4-pole DIP switch to allow for 4 node ID selections to make adding an extra emonTx to your network quick and easy? Under &pound;0.30 cost in quantity</li>
</ul>
<ul>
<li>
		Battery monitor &ndash; adding a voltage divider into an ADC to allow for monitoring of 3 x AAA battery voltage?</li>
</ul>
<ul>
<li>
		Battery options &ndash; add lithium charge control circuit and connector to connect lithium battery back instead of 3 x AAA.?</li>
</ul>
<p>I keep swinging back and fourth on battery options, I think most users opt for using AC-AC adapter to power the unit as opposed to batteries since this gives more accurate Real Power measurements.</p>
<p>I would be interested to hear if you have any features or changes which you would like in the revision (dubbed V3.3 at the moment)?</p>
<p>This is what the board looks like so far:</p>
<p><a href="../sites/default/files/V3.3_dev_sch.png"><img alt="" src="../sites/default/files/V3.3_dev_sch.png" style="width: 600px; height: 333px;" /></a></p>
<p>&nbsp;</p>
<p>
	<img alt="" src="../sites/default/files/V3.3_dev.png" style="width: 500px; height: 439px;" /></p>
  <div class="forum-topic-navigation clear-block">
          <a href="5938.html" class="topic-previous" title="Go to previous forum topic">‹ transformer basics</a>
              <a href="5918.html" class="topic-next" title="Go to next forum topic">EmonTX Shield v3 - always getting non-sense values from CT ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-23427"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx V3 New Version Development</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 29/08/2014 - 13:20.</div>
    <div class="content">
     <p>There seems to be an ongoing trickle of interest for a serial connection to a RPi or whatever. Is it worth making provision on the PCB for a header/connector to be fitted? This might also facilitate interconnection of three emonTx&#39;s for 3-phase installations (like MartinR&#39;s stacked V2s - unless you have a 3-phase version of the emonTx in mind - and I&#39;m sure there&#39;s a market for that!)</p>
<p>What is the position regarding the aerial connector and the radio module? Questions were asked about the impedance matching of the link to the SMA connector on the V3.2 PCB. It&#39;s all a black art to me, all I know is it looks like a stripline and you can tailor the impedance thereof with the interaction between the dimensions and the PCB properties. How to do it, I don&#39;t know.</p>
<p>Node ID switch: How does that stack up against offering a custom-programmed V3? (i.e. the cost to re-program one prior to dispatch?) It&#39;s probably no less valid to ask for a 120/240 V switch as well.</p>
<p>What about a cut-able link to disconnect the 22 &Omega; burden resistors for those that want to substitute a higher value through-hole component for increased sensitivity?</p>
<p>And what&#39;s the betting that someone who sees the RJ45 connector will want Ethernet on it!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23436"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx V3 New Version Development</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 29/08/2014 - 16:00.</div>
    <div class="content">
     <p>Hi Robert,&nbsp;</p>
<p>Thanks for your thoughts.&nbsp;</p>
<p>I think the RPi connections you talk about are already available in form of the UART connection (Vdd, GND, Tx, Rx), as shown in the post:&nbsp;<a href="http://openenergymonitor.blogspot.com/2014/03/direct-connection-emontx-v3-raspberry.html">http://openenergymonitor.blogspot.com/2014/03/direct-connection-emontx-v3-raspberry.html</a>.&nbsp;Any further integration with the RPi can be handled by the emonPi&nbsp;Raspberry Pi shield.</p>
<p>Antenna matching is not something I am overly versed in either, I am aware that the current V3 with Rfu328 and RFM12B is not optimal. The antenna trace has to pass through several PCB connections and traces before reaching the whip / SMA ant. As far as I understand an optimal setup would be for the RF module ant pin to go directly onto the SMA&nbsp;pin but PCB layout constraints often necessitate a short PCB trace which should be as wide as straight as possible and be around 50 ohms to match the SMA&nbsp;connector (need to try and calculate this, although it will change depending on PCB manufacture and FR4 material). For the V3.3 design I&#39;ve changed the SMA connector to an edge mounted unit which is lower cost and lower RF loss (no 90 degree bend reflections). I&#39;m keen to keep option for a wire whip to keep cost down, in-order to allow for either wire-whip or SMA option I&#39;m using a low value cap as a link, the idea is that either C16 or C19 is placed on the board (not both) to allow for selection between the two. The low value cap (exact value to be decided, I plan to start with 22pF as this value is already used on the board). As well as working as a link the low value cap will provide another DC block for ESD directly into the antenna. I would be interested to hear if someone with more RF knowledge&nbsp;can validate my assumptions.&nbsp;</p>
<p><a href="../sites/default/files/V3.3_dev_ant.png"><img alt="" src="../sites/default/files/V3.3_dev_ant.png" style="width: 200px; height: 219px;" /></a></p>
<p>Jury is still out on DIP node ID selection switch. Yes it would be relatively easy to ship with node ID&#39;s ready set but a switch gives the user flexibility and gives option to more easily sell through distributors&nbsp;or installers.&nbsp;</p>
<p>Regarding 110V operation, have you heard much feedback from users who are using the new USA AC-AC plug adapter from the shop? Have calibration values been floated? This is something which is difficult for us to test and calibrate without a 110V&nbsp;system.&nbsp;</p>
<p>cut-able track is a good idea but it could be easier just to remove the SMT resistor , they flick off quite easy with a soldering iron giving way for thru-hole.</p>
<p>Indeed, RF45 will inevitably be mistaken for Ethernet! No damage should happen if this mistake is made. I&#39;ll try and make it clear!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23455"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4774.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4774.jpg" alt="bernamorillo&#039;s picture" title="bernamorillo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx V3 New Version Development</h3>

    <div class="submitted">Submitted by <a href="../user/4774.html" title="View user profile.">bernamorillo</a> on Sat, 30/08/2014 - 23:32.</div>
    <div class="content">
     <p>For me battery monitor and temperature sensor inputs are the most useful new features, in this order</p>
<p>:-)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23486"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx V3 New Version Development</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Mon, 01/09/2014 - 07:45.</div>
    <div class="content">
     <p>My wish list :</p>
<p>- RJ45 input connection for temperature <u>AND</u> pulse. The block port we have now is uneasy.</p>
<p>- being able to interconnect several emonTx by wire and use a single RF module(like <a href="1170.html">here</a>). It would be very interesting when using many many emontx in the same place. Now, we have data collisions whereas a RF connection is not needed in most of case. Moreover, it will decrease the total price for this kind of application. See discussion <a href="5640.html">here</a>.</p>
<p>In a ideal world, the interconnected TX could share a single AC-AC adapter and could handle 3-phase but I guess it would need some big changes in the emonTX V3 design.</p>
<p>- DIP switch to select the nodeID.</p>
<p>- a switch to make the CT4 work like the others one.</p>
<p>Regard,</p>
<p>Eric</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23505"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx V3 New Version Development</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 01/09/2014 - 16:27.</div>
    <div class="content">
     <p>Hi Eric and&nbsp;Berna</p>
<p>Thanks for your comments</p>
<p>RJ45 temperature and pulse counting, battery monitoring and node ID dip switches are all included in updated design :-)</p>
<p>emonTx&#39;s&nbsp;can be joined using RX and TX broken out on the UART header.&nbsp;</p>
<p>V3.3 prototype routing is coming together:&nbsp;</p>
<p><a href="../sites/default/files/emonTx_V.3.3_board_tracks_silk.png"><img alt="" src="../sites/default/files/emonTx_V.3.3_board_tracks_silk.png" style="width: 500px; height: 428px;" /></a></p>
<p><a href="../sites/default/files/emonTxV3.3_sch_BW.png"><img alt="" src="../sites/default/files/emonTxV3.3_sch_BW.png" style="width: 400px; height: 222px;" /></a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23506"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx V3 New Version Development</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 01/09/2014 - 19:08.</div>
    <div class="content">
     <p>Eric:</p>
<p>There&#39;s a problem with using one ac-ac adapter for multiple emonTx&#39;s - the current drawn from the ac adapter to operate the emonTx has been kept to an absolute minimum so that it does not spoil the wave shape for measurement. You could certainly use a common ac adapter provided that the operating power came from a common 5 V dc supply, and kept the ac adapter only for measuring the voltage. But that would not help in a 3-phase installation, you would still need three adapters for best accuracy.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23531"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx V3 New Version Development</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Tue, 02/09/2014 - 20:30.</div>
    <div class="content">
     <p>Thank you Robert for clarifying that point.<br />
	It brings me some new questions <a href="5512.html">here</a>.<br />
	Eric</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24507"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx V3 New Version Development</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 13/10/2014 - 09:39.</div>
    <div class="content">
     <p>Quick update, prorotype has been assembled and all seems to be working as expected :-)</p>
<p>New fascia for the case has been designed and proto laser cut and fits well.</p>
<p>BOM has been set off to suppliers and manufactures for quote.&nbsp;</p>
<p><a href="../sites/default/files/Byt2rfJIYAAcDck.jpg"><img alt="" src="../sites/default/files/Byt2rfJIYAAcDck.jpg" style="width: 500px; height: 281px;" /></a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5656"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-6IcOlvW3Xi75N3w-9NxDgW6I45aAAMr1sgLha78PLp0" value="form-6IcOlvW3Xi75N3w-9NxDgW6I45aAAMr1sgLha78PLp0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
