<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12248 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:47:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>MQTT Duplicate Inputs created after several reboots | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">MQTT Duplicate Inputs created after several reboots</h3>
        <span class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Fri, 26/02/2016 - 03:18</span>
        <div class="content"><p>When I reboot the Pi several times in succession I get extra MQTT Inputs created with the same name as the existing ones, and its the extra inputs that get updated whilst the original inputs stay static, meaning I need to apply the input processes that are on the old inputs to the new inputs otherwise the feeds don&#39;t get updated.<br />
I&#39;ve observed this several times now with both my EMONTX&#39;s. Is this a known bug or a new one?</p>
<p>The actual MQTT topics are still working as Openhab is still seeing the original EMONHUB topic being updated.</p>
<p>On a related note my EMONTX&#39;s are set to update every 4 seconds to make the dashboard more responsive, is there a limit on feed update times that won&#39;t let them update more than once every 10 seconds?</p>
<p>I&#39;m using EMONCMS&nbsp;low-write V9.31 13.02.2016 on a Pi2 with Jessie</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12225.html" class="topic-previous" title="Go to previous forum topic">‹ Is faster sampling firmware practicable?</a>
              <a href="12276.html" class="topic-next" title="Go to next forum topic">Migrating Dashboards? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-39834"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9544.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MrGlasspoole&#039;s picture" title="MrGlasspoole&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/9544.html" title="View user profile.">MrGlasspoole</a> on Fri, 26/02/2016 - 06:35.</div>
    <div class="content">
     <p>Hi,</p>
<p>i&#39;m new to the whole Emon thing but and started with questions about MQTT -&gt; Emon:</p>
<p>Sounds like the problems you have if a MQTT client is responsible of feeding the database.<br />
There is a nice article: The missing piece between MQTT and a SQL<br />
<a href="http://www.hivemq.com/blog/mqtt-sql-database" title="http://www.hivemq.com/blog/mqtt-sql-database">http://www.hivemq.com/blog/mqtt-sql-database</a></p>
<p>Look at Gotchas and Limitations:<br />
1. What happens if the wilcard subscriber disconnects? What happens if it reconnects?<br />
2. Is there a way to ensure that each message will be sent only once?<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39845"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 26/02/2016 - 12:00.</div>
    <div class="content">
     <p>Oh dear, I assumed you are running the new Beta / <a href="12212.html">RC emonPi / emonBase image</a> with the <a href="https://github.com/emoncms/emoncms/pull/466">new MQTT input service</a>.&nbsp;</p>
<p>The node names are created from the MQTT topic names. There must be a *slight* change of MQTT topic name after a reboot. Can you see any difference at all between the two input names? Is there a space in there or something?&nbsp;</p>
<p>Could you post s screen grab?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39881"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Fri, 26/02/2016 - 20:57.</div>
    <div class="content">
     <p>I&#39;m running the new MQTT input service, and a home built Jessie image based upon the emonpi build guide without the display / lightwave / node red and with my own openhab install in /home/pi/data/openhab</p>
<p>The only screen shot I have right now is where you can see the recreated topic appears at the end of the list, I&#39;d already reconfigured everything to use it and deleted the dead one, I&#39;ll screen grab it next time it happens before I reconfigure. This might not be for a few days as everything is working right now and I&#39;m too busy to intentionally&nbsp;poke it.</p>
<p>Its like things don&#39;t get properly saved when it reboots several times in sucession and it recovers from a corrupt input process setting by recreating the input, although the old non updating input process setttings can be read even though they don&#39;t update.</p>
<p>The Openhab&nbsp;item is&nbsp;Number HWCPower { mqtt=&quot;&lt;[mymosquitto:emon/emonTx_1/power3:state:default]&quot; }<br />
I can&#39;t see how that would still work if the topic changes even?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39915"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sat, 27/02/2016 - 22:07.</div>
    <div class="content">
     <p>It did it again this morning, and annoyingly it picked one of my more complex inputs! This happened after several reboots in succession caused by troubleshooting a relay debounce issue with Openhab, together with the usual occasional can&#39;t read rule file it seems to throw in to keep me interested. A problem that is usually cured by a couple of extra reboots.</p>
<p>In the picture power1&nbsp;at the top has stopped updating, with power1 reappearing as a new input at the bottom that is updating</p>
<p>see attached</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39922"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 27/02/2016 - 23:33.</div>
    <div class="content">
     <p>Could you try deleting the new input to see if emoncms&nbsp;resumes logging to the original input?</p>
<p>From the screen grab it looks like the Input name is identical, could you try and inspect the name carefully&nbsp;to see if there is something like a white space at the beginning or end?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39923"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sat, 27/02/2016 - 23:39.</div>
    <div class="content">
     <p>Highlighting inputs I know have reappeared and comparing them to ones that haven&#39;t doesn&#39;t show up anything. All of them have the input name and one space afterwards.</p>
<p>Next time it happens I&#39;ll delete the new input and see what happens.&nbsp;I&#39;ve already reentered the input information to get the system back up and running.</p>
<p>Where does it cache the mqtt inputs found information?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39929"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 28/02/2016 - 10:47.</div>
    <div class="content">
     <p>There shouldn't be any white spaces at the end of the input name. I think this could be where the issue is coming from. Do your mqtt topic names as shown in mqtt_sub also have the white spaces? I wonder where they are coming from? </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39940"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sun, 28/02/2016 - 20:59.</div>
    <div class="content">
     <p>I don&#39;t think they have spaces, I just fired up MQTT.fx which is a Java Windows MQTT&nbsp;Pub / Sub client and it doesn&#39;t show any spaces.</p>
<p>A direct copy from the log is below:</p>
<p>2016-02-29 09:56:16,662 &nbsp;INFO --- MqttFX ClientModel &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : messageArrived for: emon/emonTx_1/power1<br />
2016-02-29 09:56:16,663 &nbsp;INFO --- MqttFX ClientModel &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : messageArrived: 563<br />
2016-02-29 09:56:16,862 &nbsp;INFO --- MqttFX ClientModel &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : messageArrived for: emon/emonTx_1/power2<br />
2016-02-29 09:56:16,863 &nbsp;INFO --- MqttFX ClientModel &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : messageArrived: 564<br />
2016-02-29 09:56:16,864 &nbsp;INFO --- MqttFX ClientModel &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : messageArrived for: emon/emonTx_1/power3<br />
2016-02-29 09:56:16,865 &nbsp;INFO --- MqttFX ClientModel &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : messageArrived: 565</p>
<p>As Openhab subscribes to the same topics I&#39;m not suspecting whte spaces are in the topics, What error handing is there is the system goes down half way through a topic being received?</p>
<p>For example if it received a valid&nbsp;topic name but with rubbish in the payload due to a thread being terminated half way through the message transmission</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39982"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Tue, 01/03/2016 - 01:32.</div>
    <div class="content">
     <p>@glyn deleting the new copy of the topic makes the old copy work again, I&#39;ve had one topic recreate from Openhab on the same box so its not coming from EMONHUB</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39988"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Tue, 01/03/2016 - 08:42.</div>
    <div class="content">
     <p>Hi,</p>
<p>I&#39;m seeing the same behaviour with a customised local version of emonhub - which feeds data to emoncms&nbsp;with calls like:</p>
<p>http://emoncms.org//input/post.json?node=26&amp;json={&quot;L1Voltage&quot;:&quot;235.28&quot;,&quot;L1Current&quot;:&quot;8.76&quot;,&quot;L1VA&quot;:&quot;2060.48&quot;,&quot;L1Po ...</p>
<p>Deleting the new feeds puts the old ones back into use...</p>
<p><a href="../../../buttersideup.com/files/duplicated-inputs.png" title="http://buttersideup.com/files/duplicated-inputs.png">http://buttersideup.com/files/duplicated-inputs.png</a></p>
<p>HTH.</p>
<p>Cheers,</p>
<p>Tim.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39991"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 01/03/2016 - 11:27.</div>
    <div class="content">
     <p>Could this be related to MQTT <a href="http://www.hivemq.com/blog/mqtt-essentials-part-8-retained-messages">retained messages</a>?</p>
<p>If the MQTT retained flag is set somewhere, undelivered messages will continue to try and get an acknowledgement, even surviving reboots...</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39995"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 01/03/2016 - 13:09.</div>
    <div class="content">
     <p>@TimSmall&nbsp;are you reporting that you are getting duplicated inputs when posting data via HTTP API rather than MQTT? If so then maybe this issue is not related &nbsp;derectly&nbsp;to MQTT</p>
<p>​@Paul good point, however emonhub&nbsp;has retain turned off by default:</p>
<p><a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/src/interfacers/EmonHubMqttInterfacer.py#L148" title="https://github.com/openenergymonitor/emonhub/blob/emon-pi/src/interfacers/EmonHubMqttInterfacer.py#L148">https://github.com/openenergymonitor/emonhub/blob/emon-pi/src/interfacer...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40018"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Tue, 01/03/2016 - 19:22.</div>
    <div class="content">
     <p>@Paul I have&nbsp;persistence false in mosquitto.conf, which I haven&#39;t changed so hopefully this is off</p>
<p>@Glyn&nbsp;I also have&nbsp;log_dest file /var/log/mosquitto/mosquitto.log in mosquitto.conf, and looking at that file it has some old information in it. Is it worthwhile changing mosquitto.conf to point to something in /tmp with the read only file system?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40020"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Tue, 01/03/2016 - 20:39.</div>
    <div class="content">
     <p>> TimSmall are you reporting that you are getting duplicated inputs when posting data via HTTP API rather than MQTT?</p>
<p>Yep, just posting with the HTTP API - no MQTT.  Symptoms and issue look identical otherwise.</p>
<p>Noticed the issue this morning when trying to debug some non-updating inputs, and then found the thread via google...</p>
<p>Tim.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40021"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MQTT Duplicate Inputs created after several reboots</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 01/03/2016 - 21:36.</div>
    <div class="content">
     <p>@Kevin - That is the global setting, but I believe it is overwritten by the host software on a node by node basis.</p>
<p>@Glyn - I wondered if&nbsp;<a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/src/interfacers/EmonHubMqttInterfacer.py#L148"><strong>retain=False</strong></a>&nbsp;should&nbsp;be&nbsp;<strong>retain=false</strong>?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12248"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-5i4-EpnxMnYpT-fNRWzizgElA40CWfxpFmRMC9i77oE" value="form-5i4-EpnxMnYpT-fNRWzizgElA40CWfxpFmRMC9i77oE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
