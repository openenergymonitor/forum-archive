<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/6164 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:57:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>[solved] emonTH transmitting, emonBase not receiving | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">[solved] emonTH transmitting, emonBase not receiving</h3>
        <span class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Sun, 23/11/2014 - 22:38</span>
        <div class="content"><p>Hi all.</p>
<p>I just tried to setup a new emonTH.</p>
<p>I assembled it (if I had known it was so easy, no soldering and all, it would have been done a long time ago...) and I stuck two rechargeable AA batteries in it.</p>
<p>Unfortunately, the base does not seem to receive anything.</p>
<p>I plugged the UART &lt;-&gt; USB cable and here&#39;s the output :</p>
<pre>
emonTH
OpenEnergyMonitor.org
Node: 19 Freq: 433Mhz Network: 210
Detected DHT22 temp &amp; humidity sesnor
No DS18B20 detected
DHT22 Temperature: 22.50C, DHT22 Humidity: 70.30%, Battery voltage: 2.60V
DHT22 Temperature: 22.40C, DHT22 Humidity: 70.60%, Battery voltage: 2.60V
DHT22 Temperature: 22.30C, DHT22 Humidity: 70.80%, Battery voltage: 2.60V</pre><p>This confirms the frequency is 433 and the sensor is detected.</p>
<p>In the gateway, the config is :</p>
<pre>
[[RFM2Pi]]
    type = OemGatewayRFM2PiListenerRepeater
    [[[init_settings]]]
        com_port = /dev/ttyAMA0
        port_nb = 50012
    [[[runtime_settings]]]
        sgroup = 210
        frequency = 4
        baseid = 15
        sendtimeinterval = 0</pre><p>Both emonTH and gateway codes are a bit old. I was sent the TH in February. Ultimately, I may load a newer code, but I don&#39;t think it should make any difference, should it ?</p>
<p>The base receives the signal from a TX in another room through two walls, whereas the TH is sitting two meters away in direct sight.</p>
<p>Before changing the firmware, I was wondering : is that 2.6 V voltage enough ?</p>
<p>The screenshot in the <a href="../modules/emonTH.html">emonTH page</a> shows 2.90 V.</p>
<p>The <a href="https://learn.openenergymonitor.org/?redirect=rfm12b-wireless">RFM12B page</a> says 2.2-3.8V.</p>
<p>Thanks.</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="6144.html" class="topic-previous" title="Go to previous forum topic">‹ Emontx V3 - wrong data only on CT4</a>
              <a href="6149.html" class="topic-next" title="Go to next forum topic">kWh to kWhd phptimeseries feeds stopped updating. How do I get them to restart? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-25287"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Sun, 23/11/2014 - 23:28.</div>
    <div class="content">
     <p><span class="rangySelectionBoundary" id="selectionBoundary_1416785226080_7860331268362282" style="display:none; line-height:0">﻿</span>I just found a pair of non-rechargeable batteries. The voltage is higher, and still no result.</p>
<pre>
emonTH
OpenEnergyMonitor.org
Node: 19 Freq: 433Mhz Network: 210
Detected DHT22 temp &amp; humidity sesnor
No DS18B20 detected
DHT22 Temperature: 21.70C, DHT22 Humidity: 74.40%, Battery voltage: 2.80V

</pre><p>With the voltage issue ruled out, I suppose I need to try loading a new firmware.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25289"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Sun, 23/11/2014 - 23:48.</div>
    <div class="content">
     <p><span class="rangySelectionBoundary" id="selectionBoundary_1416786455929_8889012609871362" style="display:none; line-height:0">﻿</span>I recompiled the latest emonTH <a href="https://github.com/openenergymonitor/emonTH">firmware version</a> but no luck.</p>
<pre>
emonTH - Firmware V1.2
OpenEnergyMonitor.org
Node: 19 Freq: 433Mhz Network: 210
Detected DHT22 temp &amp; humidity sesnor
No DS18B20 detected
DHT22 Temperature: 22.40C, DHT22 Humidity: 72.10%, Battery voltage: 2.80V
DHT22 Temperature: 22.30C, DHT22 Humidity: 72.10%, Battery voltage: 2.80V
DHT22 Temperature: 22.40C, DHT22 Humidity: 72.00%, Battery voltage: 2.80V</pre><p>Still nothing coming in.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25290"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 23/11/2014 - 23:55.</div>
    <div class="content">
     <p>For what it's worth, I've had an emonTH working to a NanodeRF over 30 m (clear line of sight) at 868 MHz on two rechargeable cells.<br />
Have you checked that you really have <a href="https://learn.openenergymonitor.org/?redirect=rfm12b-wireless">a 433 MHz transmitter</a>? All "433 Mhz" means is the sketch is set to that, it does not mean the hardware is correct. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25291"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 24/11/2014 - 00:07.</div>
    <div class="content">
     <p>Hi Robert.</p>
<p>I had checked in the shipping list but I didn&#39;t know how to check physically. Thanks to your link, I could check it is indeed a 433 MHz.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25293"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 24/11/2014 - 00:06.</div>
    <div class="content">
     <p>Probably not much help, but a pair of 868 MHz units, emonTx and GLCD, both set in software to 433 MHz, can communicate over 200 mm only.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25296"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 24/11/2014 - 09:07.</div>
    <div class="content">
     <p>I just checked the soldering of each pin of the RF module with the ohmmeter: one wire on the motherboard, one wire on the RF board, to check the current passes through (not obvious by visual inspection, the SMT soldering is very thin (compared to my dirty hand solderings...)). All pins are fine.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25303"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 24/11/2014 - 15:22.</div>
    <div class="content">
     <p>Hi&nbsp;J&eacute;r&ocirc;me.</p>
<p>​see&nbsp;<a href="5819.html">http://openenergymonitor.org/emon/node/5819</a>&nbsp;for a &quot;similar&quot; issue&nbsp;except in that case&nbsp;the emonTH did manage to get some packets through although not as effectively as the emonTX.</p>
<p>Although you have ruled out the batteries if it were me, I would have the emonTH&nbsp;powered by FTDI lead and sat right next to the rfm2pi until I got it working and then work back.</p>
<p>In the emonTH&nbsp;sketch the LED pulse is also commented out, for testing I would have the LED enabled, in fact I would have the &quot;send&quot; code within the led code ie ledpin&nbsp;high -&gt; send data -&gt; ledpin low. if the led flashes rather than staying on or off I could probably assume the &quot;send&quot; code ran, I would also reduce the interval between sends whilst testing.</p>
<p>With this done if it still doesn&#39;t work I would try switching off the emonTx&nbsp;temporarily&nbsp;to check for clashing or blocking, assuming of cause that the led is flashing on the emonTH without a corresponding flash at the rfm2pi.</p>
<p>You could also try switching off quiet&nbsp;mode on the rfm2pi to see if anything is being received in time with the emonTH&nbsp;sends, that maybe being discarded as it&#39;s incomplete or corrupt.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25309"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 24/11/2014 - 16:03.</div>
    <div class="content">
     <p>Oh boy.</p>
<p>I&#39;m just realizing I changed the bitrate a while ago on both the base and the TX because I had range issues.</p>
<p>(I use the lowest possible. I never took the time to try all of them and see if I could pick a higher one.)</p>
<p>I even checked the bitrate recently as I was planning to use the emonTH, and then I totally forgot about it.</p>
<p>No wonder I was getting nothing at all...</p>
<p>Anyway, if someone has the same kind of trouble, the debugging steps proposed by Paul make perfect sense.</p>
<p>Thanks.</p>
<p>Sorry for the noise...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25310"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 24/11/2014 - 16:18.</div>
    <div class="content">
     <p>I&#39;m wondering if the bitrate should be added as a parameter, like Node ID and all. And reported in the logs.</p>
<p>I&#39;d like to do it for myself and propose a pull request. But maybe it brings too much confusion and serves too few people.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25322"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [solved] emonTH transmitting, emonBase not receiving</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 24/11/2014 - 23:41.</div>
    <div class="content">
     <p>Confirmation: I modified the bitrate in the emonTH sketch and it works as expected.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/6164"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-B1vmgk4eYaE4XrEjGq2WDwetDinxNIbiYOupX1JrUn0" value="form-B1vmgk4eYaE4XrEjGq2WDwetDinxNIbiYOupX1JrUn0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
