<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10210 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:37:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>RFM69CW on emonTx V3.4 Power Consumption | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">RFM69CW on emonTx V3.4 Power Consumption</h3>
        <span class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 23/02/2015 - 13:32</span>
        <div class="content"><p><strong>I&#39;ve just done a blog post on RFM69CW current consumption with scope data capture.</strong></p>
<p><strong>The motivation for this was to investigate if the increased current consumption of the RFM69CW&nbsp;might require modification to the emonTx 3.4 AC-DC half-wave power consumption circuit.&nbsp;</strong></p>
<p>Here&#39;s the post:</p>
<p><a href="http://openenergymonitor.blogspot.com/2015/02/rfm69cw-power-consumption.html" title="http://openenergymonitor.blogspot.com/2015/02/rfm69cw-power-consumption.html">http://openenergymonitor.blogspot.com/2015/02/rfm69cw-power-consumption....</a></p>
<p>---------------------------------------------------------------------------------------------------------------------------------------------</p>
<p>Following on from my <a href="http://openenergymonitor.blogspot.co.uk/2013/07/new-oscilloscope.html">post on RFM12B power consumption</a>&nbsp;here&#39;s the same measurements for the RFM69CW&nbsp;(<a href="http://openenergymonitor.blogspot.com/2014/12/introducing-rfm69cw.html">see RFM69CW intro blog post</a>).</p>
<p>Current consumption was measured in the same way as explained in the RFM12B post back in July 2013. Voltage drop was measured across 10R current shunt resistor.</p>
<p>A fully populated emonTx V3.4 with a 433Mhz RFM69CW running <a href="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3/RFM69CW/emonTxV3_RFM69CW_DiscreteSampling/emonTxV3_RFM69CW_DiscreteSampling.ino">discrete sampling code </a>with a single CT connected was used in the test. The V3.4 was powered directly with 3.3V DC from bench PSU.</p>
<div>&nbsp;</div>
<p>&nbsp;</p>
<table align="center" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td style="text-align:center"><a href="../../../2.bp.blogspot.com/-Fd6jJ1pPs_Q/VOslVFb2wcI/AAAAAAABERs/9c_dVWli9RY/s1600/IMG_5110.JPG" style="margin-left: auto; margin-right: auto;"><img src="../../../2.bp.blogspot.com/-Fd6jJ1pPs_Q/VOslVFb2wcI/AAAAAAABERs/9c_dVWli9RY/s1600/IMG_5110.JPG" style="height:266px; width:400px" /></a></td>
</tr>
<tr>
<td style="text-align:center">emonTx V3.4 with RFM69CW Test Setup</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<div>&nbsp;</div>
<table align="center" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td style="text-align:center"><a href="../../../3.bp.blogspot.com/-b4wYbIOje_A/Ul1TP5UF_WI/AAAAAAAAmIA/RmSSr9aFlKc/s320/scope_connection.jpg" style="margin-left: auto; margin-right: auto;"><img src="../../../3.bp.blogspot.com/-b4wYbIOje_A/Ul1TP5UF_WI/AAAAAAAAmIA/RmSSr9aFlKc/s320/scope_connection.jpg" /></a></td>
</tr>
<tr>
<td style="text-align:center">Test setup illustration</td>
</tr>
</tbody>
</table>
<div>&nbsp;</div>
<p>&nbsp;</p>
<table align="center" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td style="text-align:center"><a href="../../../4.bp.blogspot.com/-E_hA9Q7-fBQ/VOslVPS7eaI/AAAAAAABERw/xVOh1YMwvko/s1600/IMG_5111.JPG" style="margin-left: auto; margin-right: auto;"><img src="../../../4.bp.blogspot.com/-E_hA9Q7-fBQ/VOslVPS7eaI/AAAAAAABERw/xVOh1YMwvko/s1600/IMG_5111.JPG" style="height:266px; width:400px" /></a></td>
</tr>
<tr>
<td style="text-align:center">Test Bench</td>
</tr>
</tbody>
</table>
<p><em>Please excuse my photos of the scope traces rather than screen captures, for some reason the USB socket on the scope did not seem to be working today :-(</em></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table align="center" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td style="text-align:center"><a href="../../../3.bp.blogspot.com/-2Wu2PorjbP8/VOslZpRnB8I/AAAAAAABER8/Grnnv8rGeLM/s1600/IMG_5115.JPG" style="margin-left: auto; margin-right: auto;"><img src="../../../3.bp.blogspot.com/-2Wu2PorjbP8/VOslZpRnB8I/AAAAAAABER8/Grnnv8rGeLM/s1600/IMG_5115.JPG" style="height:426px; width:640px" /></a></td>
</tr>
<tr>
<td style="text-align:center">Full sample and RFM69CW transmit trace capture</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div>&nbsp;</div>
<div>When an AC-AC adapter is not connected the emonTx goes to sleep in between readings. The above current trace shows the ATmega328 waking up for 295ms to sample from one CT channel the spike at the end is the RFM69CW transmitting. The trace below is a zoomed in capture of the RFM69CW transmission and LED.&nbsp;</div>
<div>&nbsp;</div>
<table align="center" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td style="text-align:center"><a href="../../../3.bp.blogspot.com/-DAqTgCapHTI/VOslSJ_D4TI/AAAAAAABERc/BdFk7ecxuyw/s1600/IMG_5114.JPG" style="margin-left: auto; margin-right: auto;"><img src="../../../3.bp.blogspot.com/-DAqTgCapHTI/VOslSJ_D4TI/AAAAAAABERc/BdFk7ecxuyw/s1600/IMG_5114.JPG" style="height:426px; width:640px" /></a></td>
</tr>
<tr>
<td style="text-align:center">RFM69CW transmission current consumption&nbsp;</td>
</tr>
</tbody>
</table>
<div><strong>The trace above shows the RFM69CW transmission: 33mA for 4ms (132mW). The current spike at the end (up to 39mA) is the emonTx LED.&nbsp;</strong></div>
<div>&nbsp;</div>
<div>In comparison the RFM12B consumes 25.5mA for 3ms (76.5mW)</div>
<div>&nbsp;</div>
<div>My measurements pretty much agree with the datasheets, here&#39;s a comparison table compiled by Low Power Labs:</div>
<div>&nbsp;</div>
<div><a href="https://images-blogger-opensocial.googleusercontent.com/gadgets/proxy?url=http%3A%2F%2Fopenenergymonitor.org%2Femon%2Fsites%2Fdefault%2Ffiles%2FSelection_081.jpg&amp;container=blogger&amp;gadget=a&amp;rewriteMime=image%2F*" style="margin-left: 1em; margin-right: 1em;"><img src="https://images-blogger-opensocial.googleusercontent.com/gadgets/proxy?url=http%3A%2F%2Fopenenergymonitor.org%2Femon%2Fsites%2Fdefault%2Ffiles%2FSelection_081.jpg&amp;container=blogger&amp;gadget=a&amp;rewriteMime=image%2F*" style="height:142px; width:640px" /></a></div>
<div>&nbsp;</div>
<div>Even though the RFM69CW does consume more power while it&#39;s transmitting it does have a lower sleep consumption than the RFM12B. This increased transmission power should result in an increased transmission range.</div>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10137.html" class="topic-previous" title="Go to previous forum topic">‹ BoM for emonTx V3.4</a>
              <a href="10212.html" class="topic-next" title="Go to next forum topic">[SOLVED] How to diagnose dead emonTx ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-28081"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69CW on emonTx V3.4 Power Consumption</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Mon, 23/02/2015 - 20:12.</div>
    <div class="content">
     <p>Just wondering if there are plans to reduce the transmit power automatically (or manually) to maintain a &quot;good enough&quot; noise margin at the receiving node, and whether this is likely to&nbsp;have much impact on EmonTH battery life?</p>
<p>Tim.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28109"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69CW on emonTx V3.4 Power Consumption</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 24/02/2015 - 11:48.</div>
    <div class="content">
     <p>No plans, but yeah, interesting idea. Since the RFM69CW has got RSSI readings the RSSI value could be monitored while the RF power level is reduced. This would have to be done slowly through&nbsp;careful two way coms&nbsp;to avoid the loosing contact with the node if the power was turned down too low!&nbsp;</p>
<p>Fancy having a go?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28117"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69CW on emonTx V3.4 Power Consumption</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Tue, 24/02/2015 - 12:30.</div>
    <div class="content">
     <p>Does sound like an interesting project to tackle, sadly chances of me getting around to it this year are probably slim as I have to finish building my house (and I&#39;ve already run&nbsp;cat5e all over it, so will be using that to power and communicate with local temp,&nbsp;RH sensors etc.).</p>
<p>I think&nbsp;the OpenTRV devs&nbsp;may be planning&nbsp;something similar as they&#39;re going to be using the same radio, and they&#39;ll be keen to get the longest possible life out of their AA batteries.</p>
<p>I may be using some&nbsp;EmonTH&nbsp;shortly for another project, so you never know.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28130"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7218.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="emjay&#039;s picture" title="emjay&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69CW on emonTx V3.4 Power Consumption</h3>

    <div class="submitted">Submitted by <a href="../user/7218.html" title="View user profile.">emjay</a> on Tue, 24/02/2015 - 16:59.</div>
    <div class="content">
     <p>Doing TX power back off from user space works fine using RSSI as the metric (i.e. what the central node saw as your RSSI&nbsp; in the&nbsp;last few packets). &nbsp;Bear in mind that the RSSI&nbsp;estimate is done very quickly by the chip during preamble. &nbsp;It is consequently quite &quot;noisy&quot; and needs some damping down before using the reading as a control variable. &nbsp;Provided you leave a good 10-12db of signal poking out above the noise floor, that is more than enough for a successful packet decode (and more SNR is actually just a waste).</p>
<p>The battery saving is perhaps less than you might expect (the Tx current draw is a non-linear function of the Tx power level) but IMHO still worth the effort.</p>
<p>The difference in length for the current burst observed above is because the RFM69 needs a little more pre-amble to get set up for an incoming packet than the RFM12B.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28234"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM69CW on emonTx V3.4 Power Consumption</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 26/02/2015 - 21:21.</div>
    <div class="content">
     <p>Further discussion related to this post and info on how to adjust RFM69CW transmit power on the Jeelabs forums</p>
<p>&nbsp;</p>
<p><a href="http://jeelabs.net/boards/6/topics/6189" title="http://jeelabs.net/boards/6/topics/6189">http://jeelabs.net/boards/6/topics/6189</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10210"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-YyEaSeHyJsR0Tw-MVMEC5jQ9jGgC_zRw_fsUBjTgGWQ" value="form-YyEaSeHyJsR0Tw-MVMEC5jQ9jGgC_zRw_fsUBjTgGWQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
