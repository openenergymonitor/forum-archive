<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Wind speed and DC energy data logger | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/emon/sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/emon/modules/node/node.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/defaults.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system-menus.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/user/user.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/mollom/mollom.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/forum/forum.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/views/css/views.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/themes/emon3/style.css?r" />
<style type="text/css" media="all">@import "/emon/sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="/emon/" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="/emon/">Home</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
          <span class="submitted">Submitted by Guest on Fri, 08/04/2011 - 14:03</span>
      <div class="taxonomy"></div>
      <div class="content"><h1>
	Wind speed and DC energy data logger</h1>
<h3>
	<em>by Suneil Tagore</em></h3>
<p><strong>Contact:</strong>&nbsp;suneil dot tagore at googlemail dot com</p>
<p>April 2011</p>
<p><img alt="Energy and wind speed datalogger" height="225" src="http://openenergymonitor.org/emon/sites/default/files/DSC00337.JPG " width="300" /></p>
<p>Earlier this year the DIY renewable energy cooperative - <a href="http://www.v3power.co.uk/">V3 Power</a> commissioned me to build a wind speed and DC energy monitor for a wind turbine installation and workshop at <a href="http://bathwindturbine.tumblr.com/">Bath University</a>. &nbsp;The wind turbine is a <a href="http://www.scoraigwind.com/">Hugh Piggott design</a> with the following specifications:</p>
<p>48V DC</p>
<p>800W &nbsp;(3 metre diameter blades)</p>
<p>3 phase</p>
<h3>
	Main component parts used for this build were:</h3>
<p>Allegro Hall current sensor ACS715, 30A rating (on a pololu breakout board) &ndash; see&nbsp;<a href=" http://www.coolcomponents.co.uk/catalog/product_info.php?cPath=36_61&amp;products_id=474" name="current_sensor">coolcomponents.co.uk&nbsp;</a></p>
<p><a href="http://www.nuelectronics.com">Nuelectronics datalogging sheild</a> &ndash; with built in Real time Clock (RTC) and SD card slot</p>
<p><a href="http://www.arduino.cc/">Arduino 328</a></p>
<p><a href="http://uk.farnell.com/jsp/search/productdetail.jsp?SKU=1564788">60V regulator&nbsp;</a>&nbsp;- as the arduino requires approx. 7 - 12V supply, and the turbine will reach up to 58V when charging batteries.</p>
<p>Some LED indicators&nbsp;</p>
<p><a href="http://www.inspeed.com/">Vortex anemometer</a></p>
<p>Push switch to halt program execution</p>
<p>Software libraries used are&nbsp;<a href="http://www.arduino.cc/">SD.h</a>&nbsp;(which is built into the arduino IDE libraries)&nbsp;and <a href="http://DS1302.hhttp://www.henningkarlsen.com/electronics/a_l_ds1302.php">DS1302.h</a>&nbsp;Thanks to all the authors of those libraries.</p>
<p>The whole unit was encased in a water tight container rated at IP65, with water proof cable glands.</p>
<p>&nbsp;</p>
<h3>
	Calibration</h3>
<p>Calibration for wind speed was calculated according to the manufacturers datasheet for this anemometer. &nbsp;2.5mph per Hz. This was converted to metres per second. &nbsp;See <a href="http://openenergymonitor.org/emon/sites/default/files/wind_speed_energy_SD_RTC_logger.pde">source code</a> for this calculation. Note the the anemometer has a virtually linear characteristic, see <a href="http://www.inspeed.com/anemometers/Pole_Mount_Anemometer.asp">http://www.inspeed.com/anemometers/Pole_Mount_Anemometer.asp</a>&nbsp; for full specification. &nbsp;Apologies for the brief explanations of this design. &nbsp;Please comment on this page, and I&#39;ll do my best to get back to you.</p>
<p>Voltage sensing was done using a simple voltage divider circuit. &nbsp;Resistors used for this were 3.3K and 56K. &nbsp;The current sensor has a built in circuit which outputs 0 to 5V, thus did not not need any further external circuitry and could be attached directly to the arduino. &nbsp;Both voltage and current were then calibrated against a multimeter.</p>
<p>&nbsp;</p>
<h3>
	PINs used on the arduino were as follows:</h3>
<p>RX, TX of arduino: 0,1</p>
<p>Wind pulse counting on interupt : 2</p>
<p>RTC: 3,4,6</p>
<p>Jumper for SD shield: 10, 5 &nbsp;(chip select line)</p>
<p>SD shield: 11,12,13</p>
<p>Analog pins used:</p>
<p>0 &ndash; current</p>
<p>1 &ndash; voltage</p>
<p>3 &ndash; wind (but jumper to pin 2, as this is the way the JST plug on nuelectronic shield is wired)</p>
<p>2 &ndash; used to halt program execution and allow safe removal of SD card. &nbsp;see <a href="http://www.arduino.cc/en/Tutorial/Pushbutton">here</a> on how to implement a push button circuit.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>
	Further work/ improvements:</h3>
<p>The current sensor is rated at 30A which is 14A within our maximum operating current ( and 800W @ 50V would give 16A) &nbsp; It also has 5 times over current protection, so will handle well over 100A if need be, thus we are well within range. &nbsp;However, it is still a surface mount component, in the safety critical path of the circuit; &nbsp;a big heavy shunt resistor would probably feel much safer! For this build, we will be keeping a careful eye on this turbine, so should there be any problems, they will be diagnosed fast. &nbsp;A better alternative might be to non-invasively measure the AC current, thus there is a lower chance of a circuit failure. &nbsp; The sample rate and memory of the arduino might start becoming a constraint here, especially as we are writing to the SD card, thus a more powerful Atmega chip may be required. &nbsp;Another advantage of measuring AC is that we&#39;ll be able to derive RPM of the turbine, which will be interesting to measure and characterise the generator.</p>
<p>Another alternative is to use hall effect sensor, however these are known to have current offset problems, but could potentially be solved by filtering at the software level. &nbsp;It will depend on the hardware configuration for a particular sensor.</p>
<p>At the moment, data is logged at 10 second intervals. &nbsp;This will give a very large amount of data for a whole year. &nbsp;Ideally, the code needs to be improved to log each day or week in a separate file. &nbsp;I made &nbsp;a start on this (see <a href="http://openenergymonitor.org/emon/sites/default/files/wind_speed_energy_SD_RTC_logger.pde">source code</a> comments), but ran into a problem/bug converting an array of characters into a string. &nbsp;If you have any idea on how to improve this, please get in touch.Note: 10 second intervals were chosen to get some idea of gusts of wind. &nbsp;10 minute intervals I believe is the EU standard for windspeed logging, however gusts of wind that occur around the 3 second range will be missed) &nbsp;Also note that over this 10 second period, is an average of many samples over that period.</p>
<p>&nbsp;</p>
<p>Wiring Layout:</p>
<p><img alt="" src="http://openenergymonitor.org/emon/sites/default/files/DSC00016.JPG" style="width: 400px; height: 300px; " /></p>
<p>&nbsp;</p>
<h3>
	Conclusions:</h3>
<p>We will be getting wind speed and energy data from this project over the coming year, to build up a power curve of this turbine, thus helping us to understand how well the turbine performs. &nbsp;If the budget permits, we will also be able to web link the data in real time. &nbsp;Any questions you have about the design and implementation, please feel free to comment. &nbsp;I hope to add more information soon.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
    
    
      </div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org">https://community.openenergymonitor.org</a></p>
   
</div>

<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
