<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2748 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:08:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>First build questions - operating voltage and &#039;floating&#039; CT measurement | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">First build questions - operating voltage and &#039;floating&#039; CT measurement</h3>
        <span class="submitted">Submitted by <a href="../user/1582.html" title="View user profile.">elroc</a> on Wed, 28/08/2013 - 12:58</span>
        <div class="content"><p>I build my first emonTx&nbsp;over the weekend and running it with a Rasberry basestation. Firstly - what a nice system you guys have here, keep it up!</p>
<p>Now for the questions:</p>
<p>1) What is the lowest voltage level the emonTx would function at? I am currently powering the emonTx&nbsp;from two rechargable AA batteries, and after about 16 hours it stops functioning. After swapping batteries and fiddling with the (very low quality) battery compartment it starts up and keeps working again for about 16 hours. I&#39;ve narrowed the cause to either the low quality battery container, or voltage level from the batteries dropping too low (2.7v based on the output stream before emonTx stops functioning.)</p>
<p>2) One of my CT channels seems to have a shifted bias - when not connected, or connected to a CT on a 0 current line it keeps reporting values between 36 and 40 W. Is this acceptable - or where/how can I check if I made some soldering errors? My other two channels do not seem to have this problem (one channel, measuring power usage to my Water Heater reports between 1-10W when no current is flowing).</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2629.html" class="topic-previous" title="Go to previous forum topic">‹ Extra pulses and update time</a>
              <a href="1963.html" class="topic-next" title="Go to next forum topic">minicom trouble ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-14660"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First build questions - operating voltage and 'floating' CT measurement</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 28/08/2013 - 22:13.</div>
    <div class="content">
     <p>I cannot comment on (1) - but I think you&#39;ll find quite a bit of information on battery operation if you do a search (Google: &quot;[search term] site:openenergymonitor.org&quot;)</p>
<p>As for (2), your problem is quite likely to be noise picked up on that input. It may be mains pickup from the cable itself (can you put the c.t. on the neutral rather than the line?) or from adjacent cables, or digital noise from inside the processor. If you download the appropriate tool from <a href="1757.html">Robin&#39;s Mk2 Code variants and associated tools</a>, that will show whether the input is sitting in the middle of the range and what the input actually is.<br />
	40 W is a bit high if you&#39;re not measuring voltage, quite a bit higher than we normally expect if you are. There&#39;s a lot of reading you can do about this:<br />
	<a href="https://learn.openenergymonitor.org/?redirect=measurement-implications-of-adc-resolution-at-low-current-values" title="http://openenergymonitor.org/emon/buildingblocks/measurement-implications-of-adc-resolution-at-low-current-values">http://openenergymonitor.org/emon/buildingblocks/measurement-implication...</a><br />
	<a href="../emontx/accuracy.html" title="http://openenergymonitor.org/emon/emontx/accuracy">http://openenergymonitor.org/emon/emontx/accuracy</a><br />
	<a href="1385.html" title="http://openenergymonitor.org/emon/node/1385">http://openenergymonitor.org/emon/node/1385</a><br />
	<a href="2311.html" title="http://openenergymonitor.org/emon/node/2311">http://openenergymonitor.org/emon/node/2311</a><br />
	Trystan did some wonderful animated pages demonstrating how the errors vary here:&nbsp; <a href="http://vis.openenergymonitor.org/dev/adc/noiseless" title="http://vis.openenergymonitor.org/dev/adc/noiseless">http://vis.openenergymonitor.org/dev/adc/noiseless</a>, here: <a href="http://vis.openenergymonitor.org/dev/adc/noisy" title="http://vis.openenergymonitor.org/dev/adc/noisy">http://vis.openenergymonitor.org/dev/adc/noisy</a> and here: <a href="http://vis.openenergymonitor.org/dev/adc/noise.mp4" title="http://vis.openenergymonitor.org/dev/adc/noise.mp4">http://vis.openenergymonitor.org/dev/adc/noise.mp4</a>.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14669"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="elroc&#039;s picture" title="elroc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First build questions - operating voltage and 'floating' CT measurement</h3>

    <div class="submitted">Submitted by <a href="../user/1582.html" title="View user profile.">elroc</a> on Thu, 29/08/2013 - 10:02.</div>
    <div class="content">
     <p>Awesome, thanks for the detailed reply, will surely investigate. I&#39;m not measuring voltage at the moment, and the offset seems to be coming from on the board itself (said input shows the same offset regardless which CT is plugged in, or even when no CT is plugged in.</p>
<p>Now if I can just organise some spare time to properly debug :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14671"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3980.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jan&#039;s picture" title="jan&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First build questions - operating voltage and 'floating' CT measurement</h3>

    <div class="submitted">Submitted by <a href="../user/3980.html" title="View user profile.">jan</a> on Thu, 29/08/2013 - 10:42.</div>
    <div class="content">
     <p>On question (1), you can try with a step-up booster. It&#39;s only a suggestion, because I don&#39;t have any experience with them.</p>
<p>On question (2), I have the same problem, and, at the moment, I didn&#39;t find a solution.</p>
<p>After reading the posts that pointed Robert, I have ran Robin&#39;s RawSamplesTool sketch with the following results</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; average of voltage samples&nbsp; 508.43</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CT1 average current samples 510.85</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CT2 average current samples 512</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CT3 average current samples 514</p>
<p>I figure that differences are due <span class="short_text" id="result_box" lang="en"><span class="hps">to</span> <span class="hps">the two</span> <span class="hps">biasing resistors</span> <span class="hps">are not</span> <span class="hps">exactly equal, and that ideally the average reading should be 511 (512) on all channels</span></span>.</p>
<p>Using the only_current sketch, with nothing plugged as load, I measure CT1=0 W, CT2= 15 W, CT3= 43 W. The readings seems consistent to me.</p>
<p>But running the CT123_Voltage sketch, with no load, the readings are CT1 around 30 W and often changing (+/- 4 W),&nbsp; CT2 and CT3 exactly zero (and not varying at all).</p>
<p>My questions: are the bias resistors the problem? Would be a good practice to select pairs of resistors? Why not use a common 2.5 V DC line for all analog inputs?</p>
<p>If the problem is noise, how determine the source (wires, pcb, atmega)? And how solve it (if it&#39;s possible)?</p>
<p>Thanks in advance</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14676"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First build questions - operating voltage and 'floating' CT measurement</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 29/08/2013 - 11:46.</div>
    <div class="content">
     <p>If you read the first of the block of links, you&#39;ll see that if the bias sits in the middle of an ADC step, it needs a larger input (noise?) to switch levels and so create a change in the digital output. If it sits right on the edge of a step, it requires only a tiny change to switch. It&#39;s worse if you&#39;re not using the voltage input because the squaring process in rms turns all the changes into positive power. Nobody has found a certain solution yet. I think part of the problem might be that the digital and analogue supplies to the processor are common. Additional decoupling on the 3.3 V supply might help.</p>
<p>So, no, the bias resistors aren&#39;t <em>the</em> problem, but they can assist it!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2748"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-6jDJ8WjMENRFVHcz599jiCfZRBdZSFM8eTm8Mn2p3fI" value="form-6jDJ8WjMENRFVHcz599jiCfZRBdZSFM8eTm8Mn2p3fI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2748 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:08:34 GMT -->
</html>
