<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2014 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Input API documentation ? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Input API documentation ?</h3>
        <span class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Sun, 10/02/2013 - 19:23</span>
        <div class="content"><p>Hi.</p>
<p>Is there a place where the format of the data string that is sent to emoncms is documented ?</p>
<p>I mean the string that is added to the URL, like this :</p>
<p>Sending remote data<br />
	GET /emoncms/input/bulk.json?apikey=xxxxxxxxxxxxxx&amp;<strong>data=[[0,10,1806],[0,10,1806],[4,10,1806],[7,10,1806],[11,10,1806],[15,10,1800],[19,10,1800],[23,10,1800],[26,10,1806],[30,10,1806],[34,10,1800]]</strong> HTTP/1.1</p>
<p>This is what I got in the raspberrypi module. I just added an echo $com in getcontent().</p>
<p>My particular concern for today is the following :</p>
<p>I don&#39;t know why I got twice the [0,10,1806] but anyway, as I understand it, the first value of each [0,10,1806] sub-array is the time since last time $start_time was reset. In practice, it should be reset about every 30 seconds (apparently, in this case, it took&nbsp;a bit more).</p>
<p>I understand this time information is needed by target remote emoncms to associate each value with the right time in the past, as all those values are sent at once. What I don&#39;t understand is how remote emoncms knows what 0 accounts for. Basically, 0 is when $start_time was reset, which is something like 35 s before now, but when exactly ?</p>
<p>I hope I&#39;m making myself clear.</p>
<p>I&#39;ve got the feeling we&#39;re losing information, here.</p>
<p>Could it be every sample ends up delayed about 30s, sometimes 35 or 40 and we don&#39;t care ?</p>
<p>I would understand something like data=[[-30,10,1806],[-25,10,1806],[-20,10,1806],[-15,10,1806]] to indicate the time difference with now. Or better, an absolute time value.</p>
<p>Is there something I misunderstood ?</p>
<p>By the way, is there a data string that can be sent to set a particular value (or set of values) at a given time ?</p>
<p>Thanks.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1999.html" class="topic-previous" title="Go to previous forum topic">‹ Including a &quot;+&quot; in an emoncms text field?</a>
              <a href="2015.html" class="topic-next" title="Go to next forum topic">[solved] apikey reminder ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-9754"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Input API documentation ?</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 11/02/2013 - 10:21.</div>
    <div class="content">
     <p>There is a little bit of info in the API help.</p>
<p>Including a line</p>
<p>http://domain.tld/emoncms/input/post?<b>time=1360577239</b>&amp;node=1&amp;csv=100,200,300</p>
<p>that suggests an absolute time could be set in the string.</p>
<p>There seems to be several ways of doing the same thing (csv/json, for instance), I&#39;m a bit confused.</p>
<p>I&#39;m wondering if the time=12345678 could address the concern I expressed in the question above.</p>
<p>A string like this</p>
<p>GET /emoncms/input/bulk.json?apikey=xxxxxxxxxxxxxx<strong>&amp;time=123456789</strong>&amp;data=[[0,10,1806],[0,10,1806],[4,10,1806],[7,10,1806],[11,10,1806],[15,10,1800],[19,10,1800],[23,10,1800],[26,10,1806],[30,10,1806],[34,10,1800]]</p>
<p>where time would be the absolute time when $start_time was reset, would allow emoncms to know at what time each sample was received from emonTX.</p>
<p>Is there a place I can get more comprehensive information about the API than this page in emoncms, apart from the code itself (I may get to understand it more widely some day, but the learning curve is steep) ? I&#39;m afraid not.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2014"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-86n-CLhrFjlqc-z8K_Nl_GXhFetYrSpbnZiZ_bIfM4I" value="form-86n-CLhrFjlqc-z8K_Nl_GXhFetYrSpbnZiZ_bIfM4I"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
