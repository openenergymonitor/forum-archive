<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11966 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:49:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonhub hanging on boot | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonhub hanging on boot</h3>
        <span class="submitted">Submitted by <a href="../user/9178.html" title="View user profile.">derek_j</a> on Sun, 10/01/2016 - 16:25</span>
        <div class="content"><p>I am running the 22-12-15 Beta of 9.3 (and very nice it is too) , and find that emonhub hangs on boot with the exception</p>
<p>Jan 10 16:03:51 cloudserver emonhub[422]: SerialException: device reports readiness to read but returned no data (device disconnected?)<br />
Jan 10 16:03:51 cloudserver emonhub[422]: raise SerialException(&#39;device reports readiness to read but returned no data (device disconnected?)&#39;)<br />
Jan 10 16:03:51 cloudserver emonhub[422]: File &quot;/usr/lib/python2.7/dist-packages/serial/serialposix.py&quot;, line 460, in read<br />
Jan 10 16:03:51 cloudserver emonhub[422]: self._rx_buf = self._rx_buf + self._ser.readline()<br />
Jan 10 16:03:51 cloudserver emonhub[422]: File &quot;/home/pi/emonhub/src/interfacers/EmonHubJeeInterfacer.py&quot;, line 78, in read<br />
Jan 10 16:03:51 cloudserver emonhub[422]: rxc = self.read()<br />
Jan 10 16:03:51 cloudserver emonhub[422]: File &quot;/home/pi/emonhub/src/interfacers/emonhub_interfacer.py&quot;, line 73, in run<br />
Jan 10 16:03:51 cloudserver emonhub[422]: self.run()<br />
Jan 10 16:03:51 cloudserver emonhub[422]: File &quot;/usr/lib/python2.7/threading.py&quot;, line 810, in __bootstrap_inner<br />
Jan 10 16:03:51 cloudserver emonhub[422]: Traceback (most recent call last):<br />
Jan 10 16:03:51 cloudserver emonhub[422]: Exception in thread RFM2Pi:</p>
<p>If I restart emonhub it works fine.&nbsp; I have tried starting emonhub later in the boot by renaming /etc/rc5.d/S03emonhub but it makes no difference.</p>
<p>emonhub.conf includes</p>
<p>[[RFM2Pi]]<br />
&nbsp;&nbsp;&nbsp; Type = EmonHubJeeInterfacer<br />
&nbsp;&nbsp;&nbsp; [[[init_settings]]]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; com_port = /dev/ttyAMA0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; com_baud = 38400</p>
<p>&nbsp;</p>
<p>I notice there have been other reports of emonhub hanging at boot, but not with the same exception.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11967.html" class="topic-previous" title="Go to previous forum topic">‹ New Visualization - Timecompare</a>
              <a href="11281.html" class="topic-next" title="Go to next forum topic">Monitor energy usage of a generator in a Vehicle // Bad internet connection ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-38099"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub hanging on boot</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 10/01/2016 - 19:47.</div>
    <div class="content">
     <p>Hi, where are you seeing this log? I don&#39;t recognize the format.</p>
<p>What do you see in emonhub.log (DEBUG level) when it occurs?</p>
<p>What hardware are you using? eg an emonPi or a Pi and rfm69pi?</p>
<p>The only &quot;hanging&quot; I&#39;m aware of is due to the auto-baud detection not being as good as it should be, but that can be avoided by defining the baud in emonhub.conf, which I see you have done.&nbsp;</p>
<p>Does it do it using &quot; sudo&nbsp;shutdown -r now &quot; or just when you power cycle ?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38108"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9178.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="derek_j&#039;s picture" title="derek_j&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub hanging on boot</h3>

    <div class="submitted">Submitted by <a href="../user/9178.html" title="View user profile.">derek_j</a> on Sun, 10/01/2016 - 20:56.</div>
    <div class="content">
     <p>Hi Paul.&nbsp; Thanks for the response.</p>
<p>The log is from</p>
<p>journalctl -r _SYSTEMD_UNIT=emonhub.service</p>
<p>&nbsp;</p>
<p>I normally use distros which have had systemd longer than debian so have got used to using the systemd tools.&nbsp; The same exception appears in the rsyslogd log as well.</p>
<p>&nbsp;</p>
<p>I am using a Pi with rfm69pi 868MHz.</p>
<p>I get that exception consistently when doing a warm boot with &quot;shutdown -r now&quot;.</p>
<p>I just tried a cold boot and I did not get the exception, but emonhub still hung and had to be restarted.</p>
<p>&nbsp;</p>
<p>Derek</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38111"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub hanging on boot</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 10/01/2016 - 21:58.</div>
    <div class="content">
     <p>Most of us here are only just transitioning from Raspbian&nbsp;Wheezy to Jessie so systemd is still pretty new.</p>
<p>emonhub was built and tested with init&nbsp;so I cannot rule out a compatibility issue but i&#39;m led to believe systemd is backwards compatible with system V&nbsp;init. I have both a Pi 2 with an rfm69pi&nbsp;running Jessie&nbsp;and a emonPi&nbsp;&nbsp;running the latest emonSD&nbsp;image built on&nbsp;Minibian&nbsp;(minimal jessie)&nbsp;and cannot reproduce the issue.</p>
<p>Can you tell me what is logged in emonhub.log (using&nbsp;loglevel&nbsp;DEBUG) this may give us clues that are more familiar.</p>
<p>Have you made any other changes to the stock image?</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38112"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9178.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="derek_j&#039;s picture" title="derek_j&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub hanging on boot</h3>

    <div class="submitted">Submitted by <a href="../user/9178.html" title="View user profile.">derek_j</a> on Sun, 10/01/2016 - 22:35.</div>
    <div class="content">
     <p>I have not made any changes to the stock image.&nbsp; Jessie runs systemd and journalctl &#39;out of the box&#39;.</p>
<p>Both the journalctl and rsyslogd logs are enabled by default in Jessie. I did not have to do anything to enable it.&nbsp;</p>
<p>Here is the exception as seen in emonhub.log</p>
<p>2016-01-10 22:25:11,191 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread EmonHub emonHub &#39;emon-pi&#39; variant v1.1<br />
2016-01-10 22:25:11,198 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread Opening hub...<br />
2016-01-10 22:25:11,199 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread Logging level set to DEBUG<br />
2016-01-10 22:25:11,202 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread Creating EmonHubJeeInterfacer &#39;RFM2Pi&#39;<br />
2016-01-10 22:25:11,217 DEBUG&nbsp;&nbsp;&nbsp; MainThread Opening serial port: /dev/ttyAMA0 @ 38400 bits/s<br />
2016-01-10 22:25:13,236 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread RFM2Pi device firmware version: [RF12demo.12]<br />
2016-01-10 22:25:13,237 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread RFM2Pi device current settings:&nbsp; @ i0 g210 @ 868 MHz<br />
2016-01-10 22:25:13,239 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread Setting RFM2Pi quiet: 0 (0q)<br />
2016-01-10 22:25:14,242 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread Setting RFM2Pi baseid: 5 (5i)<br />
2016-01-10 22:25:20,286 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread Setting RFM2Pi calibration: 230V (1p)<br />
2016-01-10 22:25:21,289 DEBUG&nbsp;&nbsp;&nbsp; MainThread Setting RFM2Pi subchannels: [&#39;ToRFM12&#39;]<br />
2016-01-10 22:25:21,291 DEBUG&nbsp;&nbsp;&nbsp; MainThread Interfacer: Subscribed to channel&#39; : ToRFM12<br />
2016-01-10 22:25:21,293 DEBUG&nbsp;&nbsp;&nbsp; MainThread Setting RFM2Pi pubchannels: [&#39;ToEmonCMS&#39;]<br />
2016-01-10 22:25:21,295 DEBUG&nbsp;&nbsp;&nbsp; MainThread Interfacer: Subscribed to channel&#39; : ToRFM12<br />
2016-01-10 22:25:21,298 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread Creating EmonHubMqttInterfacer &#39;MQTT&#39;<br />
2016-01-10 22:25:21,301 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread MQTT Init mqtt_host=127.0.0.1 mqtt_port=1883 mqtt_user=emonpi<br />
2016-01-10 22:25:21,303 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &gt; 0q<br />
2016-01-10 22:25:21,312 DEBUG&nbsp;&nbsp;&nbsp; MainThread MQTT Subscribed to channel&#39; : ToEmonCMS<br />
2016-01-10 22:25:21,315 INFO&nbsp;&nbsp;&nbsp;&nbsp; MainThread Creating EmonHubEmoncmsHTTPInterfacer &#39;emoncmsorg&#39;<br />
2016-01-10 22:25:21,318 DEBUG&nbsp;&nbsp;&nbsp; MainThread emoncmsorg Subscribed to channel&#39; : ToEmonCMS<br />
2016-01-10 22:25:21,415 INFO&nbsp;&nbsp;&nbsp;&nbsp; MQTT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Connecting to MQTT Server<br />
2016-01-10 22:25:21,429 INFO&nbsp;&nbsp;&nbsp;&nbsp; MQTT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connection status: Connection successful<br />
2016-01-10 22:25:21,432 DEBUG&nbsp;&nbsp;&nbsp; MQTT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CONACK =&gt; Return code: 0<br />
2016-01-10 22:25:21,515 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &gt; 5i<br />
2016-01-10 22:25:21,535 INFO&nbsp;&nbsp;&nbsp;&nbsp; MQTT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on_subscribe<br />
2016-01-10 22:25:21,619 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; device settings updated: E i5 g210 @ 868 MHz<br />
2016-01-10 22:25:21,739 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 54 180 31 255 184 119 13 144 6 7 230 0 218 28 75 161 200 213 2<br />
23 159 183 (-87)<br />
2016-01-10 22:25:21,843 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &gt; 1p<br />
2016-01-10 22:25:22,206 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..30)<br />
2016-01-10 22:25:22,334 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
2016-01-10 22:25:22,441 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &lt;nnnn&gt; o&nbsp;&nbsp; - change frequency offset within the band (default 1600)<br />
2016-01-10 22:25:22,708 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
2016-01-10 22:25:22,873 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
2016-01-10 22:25:23,143 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, request ack<br />
2016-01-10 22:25:23,249 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
2016-01-10 22:25:23,366 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &lt;n&gt; q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set quiet mode (1 = don&#39;t report bad packets)<br />
2016-01-10 22:25:23,475 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &lt;n&gt; x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set reporting format (0: decimal, 1: hex, 2: hex+ascii)<br />
2016-01-10 22:25:23,850 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &lt;hchi&gt;,&lt;hclo&gt;,&lt;addr&gt;,&lt;cmd&gt; f&nbsp;&nbsp;&nbsp;&nbsp; - FS20 command (868 MHz)<br />
2016-01-10 22:25:23,956 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; acknowledged command: &lt;addr&gt;,&lt;dev&gt;,&lt;on&gt; k&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - KAKU command (433 MHz)<br />
2016-01-10 22:25:24,212 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; device settings updated: E i5 g210 @ 868 MHz<br />
2016-01-10 22:25:24,358 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 57 70 202 218 225 226 58 24 248 121 147 78 (-104)<br />
2016-01-10 22:25:24,468 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 51 43 169 144 149 177 27 249 80 236 113 165 245 171 137 242 49<br />
&nbsp;159 207 224 19 (-97)<br />
2016-01-10 22:25:24,574 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 8 NEW FRAME : OK 6 0 0 188 1 0 0 0 0 75 95 195 0 (-75)<br />
2016-01-10 22:25:24,578 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 8 Timestamp : 1452464724.57<br />
2016-01-10 22:25:24,579 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 8 From Node : 6<br />
2016-01-10 22:25:24,581 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp;&nbsp; Values : [0, 444, 0, 0, 243.95000000000002, 19.5]<br />
2016-01-10 22:25:24,583 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RSSI : -75<br />
2016-01-10 22:25:24,603 INFO&nbsp;&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Publishing: emonhub/rx/6/values 0,444,0,0,243.95,19.5<br />
2016-01-10 22:25:24,606 INFO&nbsp;&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Publishing: emonhub/rx/6/rssi -75<br />
2016-01-10 22:25:24,609 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 8 adding frame to buffer =&gt; [1452464724, 6, 0, 444, 0, 0, 243.95000000000002, 19.5, -75]<br />
2016-01-10 22:25:24,611 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 8 Sent to channel&#39; : ToEmonCMS<br />
2016-01-10 22:25:24,940 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 63 35 184 150 4 77 23 173 157 111 205 98 156 189 6 1 136 143 2<br />
35 202 131 (-97)<br />
2016-01-10 22:25:26,701 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 159 102 229 36 59 115 195 143 90 152 31 91 242 110 30 0 219 25<br />
3 63 10 161 (-95)<br />
2016-01-10 22:25:28,438 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 191 19 38 198 63 166 187 78 23 220 91 31 179 137 18 200 86 250<br />
&nbsp;92 245 252 (-96)<br />
2016-01-10 22:25:30,309 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 59 26 252 21 58 129 64 188 161 125 226 53 47 24 176 245 43 123<br />
&nbsp;139 255 24 (-98)<br />
2016-01-10 22:25:30,681 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 9 NEW FRAME : OK 6 0 0 189 1 0 0 0 0 74 95 195 0 (-75)<br />
2016-01-10 22:25:30,685 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 9 Timestamp : 1452464730.68<br />
2016-01-10 22:25:30,687 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 9 From Node : 6<br />
2016-01-10 22:25:30,689 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 9&nbsp;&nbsp;&nbsp; Values : [0, 445, 0, 0, 243.94, 19.5]<br />
2016-01-10 22:25:30,690 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RSSI : -75<br />
2016-01-10 22:25:30,693 INFO&nbsp;&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Publishing: emonhub/rx/6/values 0,445,0,0,243.94,19.5<br />
2016-01-10 22:25:30,696 INFO&nbsp;&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Publishing: emonhub/rx/6/rssi -75<br />
2016-01-10 22:25:30,700 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 9 adding frame to buffer =&gt; [1452464730, 6, 0, 445, 0, 0, 243.94, 19.5, -75]<br />
2016-01-10 22:25:30,702 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 9 Sent to channel&#39; : ToEmonCMS<br />
2016-01-10 22:25:42,204 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2016-01-10 22:25:42,467 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2016-01-10 22:25:42,730 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2016-01-10 22:25:43,014 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2016-01-10 22:25:43,282 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2016-01-10 22:25:43,534 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2016-01-10 22:25:43,816 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2016-01-10 22:25:44,073 WARNING&nbsp; MainThread RFM2Pi thread is dead</p>
<p>(Plus lots more &quot;thread is dead&quot; messages)</p>
<p>Interesting that it actually receives a good frame before dying.</p>
<p>If I restart emonhub, then it happily keeps running forever.</p>
<p>Hope that helps</p>
<p>Derek</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38126"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9178.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="derek_j&#039;s picture" title="derek_j&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub hanging on boot</h3>

    <div class="submitted">Submitted by <a href="../user/9178.html" title="View user profile.">derek_j</a> on Mon, 11/01/2016 - 08:25.</div>
    <div class="content">
     <p>OK I found the problem.&nbsp; I should have mentioned that one thing I had done was install fhem in order to control some smart radiator valves via a USB serial radio. When fhem starts it probes the serial ports and causes emonhub to fail.&nbsp; It does this even when configured not to probe the ports, and even when not a member of the dialout group (and not running as root).</p>
<p>I shall have to see if I can get Openhab to manage the valves instead.</p>
<p>Thanks for the help.</p>
<p>Derek</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11966"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-2odE9JXlpj4HqxLgatkljaYtc1uxDwY_a0dYO-1jytY" value="form-2odE9JXlpj4HqxLgatkljaYtc1uxDwY_a0dYO-1jytY"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
