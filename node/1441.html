<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/1441 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:46:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Another new user question: logging KWH vs power? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Another new user question: logging KWH vs power?</h3>
        <span class="submitted">Submitted by Guest on Sun, 25/11/2012 - 17:27</span>
        <div class="content"><p>I have a set of networked smart meters from EKM Metering in Berkely, CA, and I have my own version of an EMONCMS type software that reads them, logs them and displays the data (you can see it live at <a href="http://ecovillageithaca.org/evi_metering">http://ecovillageithaca.org/evi_metering</a>). &nbsp;These meters are capable of reporting both instantaneous power as well as running KWH accumulation.</p>
<p>I am interested in also experimenting with your interesting software (you have much richer functionality for web-based configuration and customization), but I am a bit puzzled by the way you track energy usage and wondered if someone could clarify.</p>
<p>As I understand it, EMONCMS generally uses regular writes of instantaneous power values, and then extrapolates energy usage (KWH) by looking at the difference in time between readings and assuming that power was constant during that time period. True?</p>
<p>It seems to me that this method is a decent approximation for simple meters which can only report instantaneous power, but I would think it would introduce a significant amount of inaccuracy over time when calculating KWH unless you log power readings with a very high frequency.</p>
<p>My question is, does EMONCMS&nbsp;have any way work directly with KWH data from KWH-capable meters instead of extrapolating power readings?</p>
<p>My system works this way; It reads the meters every minute or so and logs the current running accumulated KWH value. &nbsp;It then stores the <em>difference</em> between KWH readings to indicate energy used in that timespan. &nbsp;I store and graph this data on an hourly basis (KWH consumed per HOUR), which I think gives the time-based data most useful to my users, and I can easily aggregate it for larger time periods (days, months, years). &nbsp;</p>
<p>I also have a way for users to pop up a temporary self-updating graph (similar to your &quot;smoothie&quot; visualization) of running instantaneous power. &nbsp;This can be used to experiment by showing the relative power used by various appliances as things are turned on an off, and looking at vampire loads, but is generally not useful for tracking ongoing usage patterns or trends.</p>
<p>Anyway, I am both curious how much of this functionality I could replicate in EMONCMS as well as what folks think about the relative merits of the two approaches (power-centric vs energy-centric). &nbsp;I find that the power-centric approach you seem to use is the most common, and several people have recommended it to me, but I have always personally been more interested in tracking energy usage over time, so I tend to optimize&nbsp;for that.</p>
<p>Thoughts?</p>
<p>P.S. You might also find it interesting to look at the special display I have in my software for solar net-metered situations (bring up my website and click on &quot;SW&quot; in the left-hand tree control, for example. &nbsp;This display combines the data from 2 meters, one tracking solar output and one tracking the connection to the utility, and combines them into one graph and table of historical data. &nbsp;It extrapolates actual usage by summing the flows of the two meters. &nbsp;The cool thing is that it can show in real time how much you are using, generating and buying/selling from the utility, and it tracks the percentages over various historical time periods. &nbsp;For example, it shows that in this &quot;SW&quot; (i.e southwest cluster of 8 homes in my neighborhood) we have generated 59% of our power from our shared solar PV system so far this year.&nbsp;</p>
<p>This approach can be applied just as easily to an individual home with grid-tied PV, as long as the user has meters that can report independently on PV and utility flows, and might be something worth implementing in EMONCMS.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2546.html" class="topic-previous" title="Go to previous forum topic">‹ Debugging Raspberry Pi issues</a>
              <a href="2007.html" class="topic-next" title="Go to next forum topic">Emoncms timestamp problem ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-13532"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mlemos&#039;s picture" title="mlemos&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Another new user question: logging KWH vs power?</h3>

    <div class="submitted">Submitted by mlemos (not verified) on Tue, 09/07/2013 - 21:55.</div>
    <div class="content">
     <p>Hi, my name is Manoel I&#39;m building my own monitor based on the EMON project and also my own EMONCMS like app.</p>
<p>RIght now I got the monitor to monitor Irms and Apparent Power, both using the EmonLib, which I believe provides me instantaneous readings, correct?</p>
<p>Well, now I&#39;m puzzled on how to convert that to KWH. So I have 3 questions:</p>
<p>1. How to calculate that KWM from instantaneous Apparent Power readings (or Irms)? What is the math here?</p>
<p>2. Is it better to make this calculation on the Arduino or on the server?</p>
<p>3. Should I do that for 24 hours&nbsp;period and them sum all the periods to have my monthly consumption or there is any other way?</p>
<p>Thanks for any help!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13533"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Another new user question: logging KWH vs power?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 09/07/2013 - 22:39.</div>
    <div class="content">
     <p>There is a problem. You can not get an accurate measure of energy using apparent power. You should be measuring voltage and calculating real power. The reason is complicated and if you want to know more, look <a href="https://learn.openenergymonitor.org/?redirect=ac-power-introduction">here</a>.&nbsp; If you use apparent power, the energy &quot;kWh&quot; will always be too high, because apparent power can never be less than real power.</p>
<p>If you use 2 kW of power for 3 hours, you have consumed 6 kWh of energy. Mathematically, we say kWh is the integral of kW over time. That is equivalent to drawing a graph of power (kW) and then calculating the area underneath the graph. If you read power every (say) 1 minute, then the energy (kWh) during that minute is the average power x 1 minute, or</p>
<p>&nbsp;((reading at start + reading at end) / 2)&nbsp; x ( 1/60) kWh.</p>
<p>The shorter the time between readings, the more accurate your value for energy will be. It does not matter where you do the sum. But if you keep the total in the Arduino and it loses power or resets, the total energy up to that point is lost, and your server program will need to recognise that it has started again from zero and remember and add the last value it received before the loss so that the total from the beginning stays correct. emonCMS does the sum in the server.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13534"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3367.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3367.jpg" alt="Dan Woodie&#039;s picture" title="Dan Woodie&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Another new user question: logging KWH vs power?</h3>

    <div class="submitted">Submitted by <a href="../user/3367.html" title="View user profile.">Dan Woodie</a> on Tue, 09/07/2013 - 22:49.</div>
    <div class="content">
     <p>Guest,</p>
<p>I live nearby and work in the same building on campus as one of your residents. I have installed the Emoncms software on my own file server and should be finally hooking up the EmonTX this weekend. If you are interested we could meet sometime for lunch and discuss. I have not delved into the code much yet, but have been looking at and working with the software a bit for several months now, culminating in monitoring my usage and generation real time. Drop me a private message and we can exchange details.</p>
<p>Dan</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/1441"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-L5haFSvOEKhS5beaowgruZXTMhhyMfQMN7uyPEx-suA" value="form-L5haFSvOEKhS5beaowgruZXTMhhyMfQMN7uyPEx-suA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
