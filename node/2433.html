<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2433 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:57:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Adding temperature and humidity sensing to an existing standard setup | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Adding temperature and humidity sensing to an existing standard setup</h3>
        <span class="submitted">Submitted by <a href="../user/3734.html" title="View user profile.">PhilThy</a> on Mon, 03/06/2013 - 21:14</span>
        <div class="content"><p>Hi, I have managed to get the basic energy monitoring setup working, but I would now like to add humidity and temperature monitoring as well. I have followed this thread: <a href="2389.html" title="http://openenergymonitor.org/emon/node/2389">http://openenergymonitor.org/emon/node/2389</a> and made the suggested board changes, but I am now failing miserably as to what to do next. I have uploaded the example humidity sketch but I don&#39;t know if it&#39;s working as I don&#39;t know how to setup Emoncms to read the data (if there is any) From reading through the forum I believe that I would also need to merge sketches together if I wish to gather the info from all the sensors at the same time. Is there a guide on how to do this? I fear this is a little way beyond my ability. Any help would be appreciated.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2438.html" class="topic-previous" title="Go to previous forum topic">‹ Monitor Individual Circuits</a>
              <a href="2364.html" class="topic-next" title="Go to next forum topic">Possible to read pulses from Metrima F27 - Mbus / OPTO EN60870-5? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-12575"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Adding temperature and humidity sensing to an existing standard setup</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 03/06/2013 - 21:44.</div>
    <div class="content">
     <p>Which humidity example sketch are you using? And which sketch do you want to merge it with?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12578"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3734.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PhilThy&#039;s picture" title="PhilThy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Adding temperature and humidity sensing to an existing standard setup</h3>

    <div class="submitted">Submitted by <a href="../user/3734.html" title="View user profile.">PhilThy</a> on Mon, 03/06/2013 - 22:17.</div>
    <div class="content">
     <p>Hi Robert, thanks for your reply.</p>
<p>I tried the emontx_lowpower_temperature_humidity sketch, but I&#39;m beginning to think this might not be what I need. I would like to be able to measure power usage alongside temperature and humidity within my home, so I thought that the&nbsp; EmonTx CT123 + Voltage example and a suitable temperature/humidity sketch would need to merged.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12582"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Adding temperature and humidity sensing to an existing standard setup</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 03/06/2013 - 23:31.</div>
    <div class="content">
     <p>OK, I&#39;ll have a look at those <strike>tomorrow</strike> later today ( ! ). It should be fairly easy to merge the sketches: what needs to be done is start with the voltage &amp; current sketch, and add in the humidity part without duplicating anything that&#39;s already there. There are two ways to play this: either I can do it all for you - but I won&#39;t be able to test it as I haven&#39;t got a humidity sensor, or I can steer you through the process. The latter will be far better for you in learning how to do it yourself. Can you give me an honest guide to your knowledge of programming?</p>
<p>But first, you&#39;ll want to check that your sensor is working. In the humidity sketch, find the lines:</p>
<pre>
  emontx.humidity = dht.readHumidity();
  emontx.temp2 = dht.readTemperature();
</pre><p>&nbsp;</p>
<p>and add after them:</p>
<pre>
Serial.print(&quot;Humidity =  &quot;; Serial.print(emontx.humidity); 
Serial.print(&quot;   Temp = &quot;); Serial.println(emontx.temp2);</pre><p>That will display the two values on the serial monitor every few seconds.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12591"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3734.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PhilThy&#039;s picture" title="PhilThy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Adding temperature and humidity sensing to an existing standard setup</h3>

    <div class="submitted">Submitted by <a href="../user/3734.html" title="View user profile.">PhilThy</a> on Tue, 04/06/2013 - 10:12.</div>
    <div class="content">
     <p>Hi Robert, many thank for your offer of help.</p>
<p>My knowledge of programming is basically nil, however I can see the need for me to be able grasp the basics, so its probably best if do this myself with some help. I am a Linux (Slackware) user, so I can find my way around in console and I can do some basic (very) bash scripting.</p>
<p>&nbsp;</p>
<p>I&#39;ve had a look in the humidity sketch for those lines but I can&#39;t find an exact match. The lines I have are:</p>
<p>emontx.humidity = ((dht.readHumidity())*10);<br />
	emontx.temp = ((dht.readTemperature())*10);</p>
<p>Are we looking at different sketches?</p>
<p>&nbsp;</p>
<p>I will have to get back to this later today as work is demanding my attention!</p>
<p>&nbsp;</p>
<p>Phil T.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12592"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Adding temperature and humidity sensing to an existing standard setup</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 04/06/2013 - 11:36.</div>
    <div class="content">
     <p>Ah - found your sketch (I think). It is <a href="https://raw.github.com/openenergymonitor/emonTxFirmware/master/emonTx_temperature_examples/emontx_lowpower_DHT22humidity/emontx_lowpower_DHT22humidity.ino" title="https://raw.github.com/openenergymonitor/emonTxFirmware/master/emonTx_temperature_examples/emontx_lowpower_DHT22humidity/emontx_lowpower_DHT22humidity.ino">https://raw.github.com/openenergymonitor/emonTxFirmware/master/emonTx_te...</a></p>
<p>I was looking at <a href="https://raw.github.com/openenergymonitor/emonTxFirmware/master/emonTx_temperature_examples/emontx_lowpower_temperature_humidity/emontx_lowpower_temperature_humidity.ino" title="https://raw.github.com/openenergymonitor/emonTxFirmware/master/emonTx_temperature_examples/emontx_lowpower_temperature_humidity/emontx_lowpower_temperature_humidity.ino">https://raw.github.com/openenergymonitor/emonTxFirmware/master/emonTx_te...</a></p>
<p>We were looking at different sketches, then, but the lines are equivalent. In your sketch, you&#39;ve got a Serial.print already for humidity, is that not working?</p>
<p>As this might be a long drawn out process, it&#39;s probably best if we do it via PM or, considering attachments are not allowed in PMs, by private email. It might be helpful to get G&amp;T to put the end result onto Github.</p>
<p>(If anyone else reading this wants to join in, shout up now and I&#39;ll reconsider.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12614"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3734.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PhilThy&#039;s picture" title="PhilThy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Adding temperature and humidity sensing to an existing standard setup</h3>

    <div class="submitted">Submitted by <a href="../user/3734.html" title="View user profile.">PhilThy</a> on Tue, 04/06/2013 - 20:30.</div>
    <div class="content">
     <p>Hi Robert, I&#39;ve pm&#39;d you my email address.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2433"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-ER0z7TD_yzMsvpT74oKcFCIS4PJqrdPP8ZT9D2OQgK8" value="form-ER0z7TD_yzMsvpT74oKcFCIS4PJqrdPP8ZT9D2OQgK8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
