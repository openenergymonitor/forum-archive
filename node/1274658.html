<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/127?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:20:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emoncms overview | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
          <span class="submitted"></span>
      <div class="taxonomy"></div>
      <div class="content"><h2>Archived page - for new setup overview see <a href="339.html">home energy monitor build</a>&nbsp;step 5</h2>
<h2>Emoncms overview</h2>
<h2>Create an account</h2>
<p>Emoncms has multi-user functionality built in, so the first step after installation is to create/register your account via the GUI.</p>
<p><a href="../sites/default/files/register_emoncms.png"><img width="450" height="284" alt="" src="../sites/default/files/register_emoncms.png" /></a></p>
<h2>Inputs, input processing and feeds</h2>
<p>There are 3 parts to the flow of sensing data in emoncms. Rather than just log incoming data straight away, the idea is to have the option to process this input data as it comes in and then log/store it.&nbsp;</p>
<ol>
<li>Inputs</li>
<li>Input processing</li>
<li>Feeds</li>
</ol>
<p>At the moment using input processing you can:</p>
<ul>
<li>Multiply the input by a scalar</li>
<li>Add an offset</li>
<li>Multiply the input with another input</li>
<li>log the input to a feed</li>
<li>convert a power input to kwh per day and log to a feed</li>
<li>convert a kwh increment to kwh per day&nbsp;<br />
    <meta http-equiv="content-type" content="text/html; charset=utf-8">and log to a feed                                                                      </meta>
    </li>
<li>count the length of time an input is 1 or 0 per day (useful for counting the length of time a solar HW pump is on for)</li>
<li>convert accumulated kwh updates to kwh per day and log to a feed</li>
</ul>
<p>See full input processing descriptions <a href="297.html">here</a>.</p>
<h3>1)&nbsp;Sending a JSON string</h3>
<p>The first step is to send some data to emoncms, this is done by sending a HTTP request with the data in the url to the emoncms API. For example:</p>
<pre>
emoncms/api/post?apikey=YOURAPIKEY&amp;json={power:200.2}</pre><p>The data needs to be sent in json form with a tag for the variable you want to send and the variable value, for example: {testA:200} or 2 variables {testA:200,testB:400} and so on for as many variables as you want to send.</p>
<p><strong>You also need to include your apikey</strong> that can be found at the top of your feeds page.</p>
<p>Try copying the example URL at the top of the feeds page into your browser to see this stage in action.</p>
<p><a href="../sites/default/files/feeds01.png"><img width="600" height="216" alt="" src="../sites/default/files/feed_part1.png" /></a></p>
<h3>2) The variables should now appear in inputs:</h3>
<p><a href="../sites/default/files/feed_part2.png"><img width="600" height="186" alt="" src="../sites/default/files/feed_part2.png" /></a></p>
<h3>3) Click on the arrow to bring up the input configuration box.</h3>
<p>Lets create a log of the input (a feed). Click on the drop down menu and select log and in the arg edit box enter a name for the log you would like to create. Then click add.</p>
<p><a href="../sites/default/files/feed_part3.png"><img width="600" height="153" alt="" src="../sites/default/files/feed_part3.png" /></a></p>
<h3>4) The feed should now appear in the feeds list and the data will be logging.</h3>
<p><a href="../sites/default/files/feed_part4.png"><img width="600" height="156" alt="" src="../sites/default/files/feed_part4.png" /><br />
</a></p>
<h3>5) Standard Visualisations</h3>
<p>Once you have been logging for a little while, click on the drop down menu to see your feed visualised. The following options are available:</p>
<p>
<meta content="text/html; charset=utf-8" http-equiv="content-type">            </meta>
</p>
<div style="border-collapse: collapse; font-family: arial,sans-serif; font-size: 13px;"><strong>Raw data</strong> = level of detail, for viewing really large datasets (power data over long windows of time)</div>
<div style="border-collapse: collapse; font-family: arial,sans-serif; font-size: 13px;"><strong>Bar graph</strong></div>
<div style="border-collapse: collapse; font-family: arial,sans-serif; font-size: 13px;"><strong>realtime</strong> = the graph auto updates every 5s so that you can watch data coming in!</div>
<p><a href="../sites/default/files/bargraph.png"><img width="297" height="350" alt="" src="../sites/default/files/bargraph.png" /></a><a href="../sites/default/files/feedgraph01.png"><img width="281" hspace="10" height="350" alt="" src="../sites/default/files/feedgraph01.png" /></a></p>
<p>These visualisations can also be embedded outside of emoncms using the embedd link.</p>
<h3>6) Get at your data for external use via the API using the following API call:</h3>
<pre>
emoncms/api/getfeed?apikey=YOURAPIKEY&amp;feedid= &amp;start= &amp;end= &amp;resolution=<b><br /></b></pre></div>
    
    
      </div>
<div id="comments">
  <div class="indented"><a id="comment-1769"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Guest&#039;s picture" title="Guest&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Guest (not verified) on Wed, 18/05/2011 - 18:00.</div>
    <div class="content">
     <p>Hello Tristian,</p>
<p>when I try to insert a feed (fe your test):<br />
http://localhost/emoncms/api/api.php?apikey=f16aa42df1d43bd7f940c1c661294b93&amp;json={testA:200,testB:400}</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1771"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 18/05/2011 - 19:44.</div>
    <div class="content">
     <p>&nbsp;Aha, could the problem be the script name api.php, can you change it to post.php and see what happens. I did leave the old file name link in there by mistake and have fixed since.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1772"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Guest&#039;s picture" title="Guest&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Guest (not verified) on Wed, 18/05/2011 - 19:45.</div>
    <div class="content">
     <p>indeed. so simple. Thanks for the quick response</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
</div></div></div><a id="comment-1601"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Luis&#039;s picture" title="Luis&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Luis (not verified) on Tue, 15/03/2011 - 18:07.</div>
    <div class="content">
     <p>Hi Trystan:</p>
<p>I tried to configure a new feeds from inputs. First the page show two errors at any time:<br />
Notice: Undefined variable: out<br />
C:\wamp2\www\emoncms\components\feedComponent\feedComponent.php on line 145<br />
Notice: Undefined variable: input in<br />
C:\wamp2\www\emoncms\components\feedComponent\feedComponent.php on line 146</p>
<p>I think I have some wrong configuration.</p>
<p>The page seem to be ok (forgeting the errors) until I append the second Feed (when I have only one feed there isn't problem), then the feed page in step 2 don`t do anything and erease the feed selected from step 1.</p>
<p>I think this error is related to $input variable. But I haven`t idea where is the  real problem.</p>
<p>Thanks.<br />
Luis</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 16/03/2011 - 09:51.</div>
    <div class="content">
     <p>Hey Luis</p>
<p>Thanks for doing this bug flagging! I see the first problem with undefined variables. The quick fix is to remove the variable:</p>
<p>$input in &nbsp;$out .= '&lt;h3&gt;2) Input Configuration: '.$input.'&lt;/h3&gt;';</p>
<p>I will make a list of these changed that I will fix the next update, but that particular line is not your real problem and as you say the page works skipping that notice.</p>
<p>I will look at the main problem now</p>
<p>Trystan</p>
<p>&nbsp;</p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" /></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1603"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 16/03/2011 - 10:06.</div>
    <div class="content">
     <p>I've just re-tried feed creation here and it seems to work fine.</p>
<p>When you tried the API url did you see both testA and testB in the input list?</p>
<p>Then when you click on the &gt; button for testA you entered for log say: nameA. Did this created a feed called nameA?</p>
<p>Then when you click on the &gt; button for testB you entered for log say: nameB. What exactly happened at this point, did feed nameA just disappear?&nbsp;</p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" /></p>
<p>Thanks, Trystan</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1604"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Luis&#039;s picture" title="Luis&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Luis (not verified) on Wed, 16/03/2011 - 10:27.</div>
    <div class="content">
     <p>Hi Trystan:</p>
<p>When I tried the API url I see testA, testB, and 3 sensor that I have connected to Arduino board.I send data from python script this way:<br />
data = {'Tint':float(sensores[0]),'Text':sensores[1],'HR':sensores[2]}<br />
base_url =<br />
'http://192.168.1.60/emoncms/api/api.php?json='+json.dumps(data,separators=(',',':'))<br />
f = urllib2.urlopen(base_url)</p>
<p>Then, when I click on the > button for HR and enter for log "HR sensor" . This create a feed called HR sensor and all is OK.</p>
<p>Then, when I click on the > button for testA (or other sensor) and enter for log "nameA", the page reload, feed nameA isn't created and I see the page with list of sensors, and only one feed "HR sensor".</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1606"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 16/03/2011 - 13:46.</div>
    <div class="content">
     <p>Hmm, interesting, I wonder if this is a browser compatibility issue or something of that sort, Glyn tried creating a feed the other day but had trouble and then when I tried on my computer it was fine, I will try a couple of different browsers and on windows see if we can shed any light on this.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1608"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 16/03/2011 - 14:00.</div>
    <div class="content">
     <p>Aha! I get the problem in chrome and internet explorer on windows, so that must be it! Now I wonder how to fix it...</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1609"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Luis&#039;s picture" title="Luis&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Luis (not verified) on Wed, 16/03/2011 - 14:03.</div>
    <div class="content">
     <p>Yes, it works on Mozilla Firefox over Windows 7. But not in Chrome.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
</div></div></div></div></div></div><div class="item-list"><ul class="pager"><li class="pager-first first"><a href="127.html" title="Go to first page" class="active">« first</a></li>
<li class="pager-previous"><a href="1272679.html?page=1" title="Go to previous page" class="active">‹ previous</a></li>
<li class="pager-item"><a href="127.html" title="Go to page 1" class="active">1</a></li>
<li class="pager-item"><a href="1272679.html?page=1" title="Go to page 2" class="active">2</a></li>
<li class="pager-current">3</li>
<li class="pager-item"><a href="1279ba9.html?page=3" title="Go to page 4" class="active">4</a></li>
<li class="pager-next"><a href="1279ba9.html?page=3" title="Go to next page" class="active">next ›</a></li>
<li class="pager-last last"><a href="1279ba9.html?page=3" title="Go to last page" class="active">last »</a></li>
</ul></div></div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
