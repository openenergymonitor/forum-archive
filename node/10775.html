<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>monitoring PV string voltage | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/emon/sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/emon/modules/node/node.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/defaults.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system-menus.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/user/user.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/mollom/mollom.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/forum/forum.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/views/css/views.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/comment/comment.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/themes/emon3/style.css?r" />
<style type="text/css" media="all">@import "/emon/sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="/emon/" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="/emon/">Home</a> » <a href="/emon/forum">Forums</a> » <a href="/emon/forum/5">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">monitoring PV string voltage</h3>
        <span class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Mon, 01/06/2015 - 21:19</span>
        <div class="content"><p>Hi All</p>
<p>Scoured the forum for above but can&#39;t find any real reference to voltage monitoring, only current.</p>
<p>I want to be able to monitor the DC voltages of my 2 strings before the inverter, using CT&#39;s, to help identify a reduction in PV panel performance over time &amp; send the information wirelessly from an Arduino Uno to EmonGLCD (earliest version).</p>
<p>Each of my strings has 8 PV panels &amp; each panel produces approx 30V (245 Wp) dependent on ambient conditions.&nbsp; The idea being that should 1 panel go down I would see a marked volt drop from that string (12.5%).</p>
<p>Also, a comparison of the 2 strings over time should show a pattern under &#39;normal&#39; operating conditions ie although each string will no doubt show a difference in voltage output, both strings are subject to the same ambient conditions.</p>
<p>I would expect to see a change in this &#39;normal&#39; condition if a panel started to go &#39;bad&#39;.</p>
<p>Any suggestions about how best to tackle this would be appreciated (keep it simple, I&#39;m an OAP)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="/emon/node/10937" class="topic-previous" title="Go to previous forum topic">‹ oem_gateway stops sending</a>
              <a href="/emon/node/10293" class="topic-next" title="Go to next forum topic">Multigraph ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-30839"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 01/06/2015 - 22:16.</div>
    <div class="content">
     <p>Your big problem with monitoring the direct voltage before the inverter is isolation. It is not easy to make a safe voltage take-off that is not connected directly or indirectly to earth (i.e. your Arduino). Firstly, you need to know what the voltage is of your panels - not only the voltage across the string, but also the voltage at which the string sits with respect to earth. When we know that, we can look at the possibilities. Do please bear in mind that high direct voltages don't take prisoners, so be very, very careful when you're doing anything near the panels.</p>
<p>CTs of course don't work on direct current. Were you thinking of Hall effect devices?</p>
<p>There's a thread or two that might be worth reading: <a href="http://openenergymonitor.org/emon/node/837" title="http://openenergymonitor.org/emon/node/837">http://openenergymonitor.org/emon/node/837</a>, <a href="http://openenergymonitor.org/emon/node/10337" title="http://openenergymonitor.org/emon/node/10337">http://openenergymonitor.org/emon/node/10337</a>, <a href="http://openenergymonitor.org/emon/node/1995" title="http://openenergymonitor.org/emon/node/1995">http://openenergymonitor.org/emon/node/1995</a> and there might be more.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30849"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Tue, 02/06/2015 - 12:32.</div>
    <div class="content">
     <p>Sorry, I should have said Hall effect sensors not CT&#39;s, specifically the Honeywell CSLA2CD.</p>
<p>The most appropriate link you mentioned for my situation seems to be <a href="http://openenergymonitor.org/emon/node/10337" title="http://openenergymonitor.org/emon/node/10337">http://openenergymonitor.org/emon/node/10337</a> as this doesn&#39;t involve working with high DC voltages directly.</p>
<p>From your discussion in this link it appears you&#39;re using the negative current part of the attached graph, I assume to keep the voltage supplied to the Arduino within its analogue input limit?</p>
<p>Since this sensor is very susceptible to noise, as it only produces 32.7mV/A, I was proposing to use an L7808ACV voltage regulator producing 8V exclusively for this sensor which would produce an output voltage of between 4V @ 0V (Vcc/2) &amp; 3.5V @ -16A , is this OK or is there a more suitable one?</p>
<blockquote><p>&quot;If your signal is too weak or you are not getting the resolution you want, you can simply loop the wire through the current clamp as many times as you want to double, triple, or quadruple the sensitivity or resolution of your sensor.&nbsp; For example, if your current signal is only .03 Amps, you could loop the wire through the sensor 10 times and the signal would by 10X stronger and would appear as 0.3 Amps. &quot;</p>
</blockquote>
<p>In my case, 1 string from the PV panel would produce a max current of approx 8A @ 240V DC so I could better utilise the sensor&#39;s max current rating of 72A by the above technique to give a wider voltage range for the Arduino to measure, although the DC cable is not very flexible &amp; the sensor aperture for the DC cable is only 10.9mm diameter.</p>
<p>I plan to use one of these sensors on each of my 2 strings so I can make the comparisons I referred to earlier.</p>
<p>All comments appreciated</p>
<p>&nbsp;</p>
<p>Just found this diagram which some may find useful</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30851"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 02/06/2015 - 12:40.</div>
    <div class="content">
     <p>I don't know of (i.e. I haven't looked for) a more appropriate sensor, but using a 72 A sensor on 8 A max isn't a very good fit, and I'd be inclined to search out something more appropriate. I think you can see the design logic I used (it was to avoid the need for complicated biasing etc) but the situation might be completely different with a different sensor. Obviously what you need ideally is a unipolar one, giving you 0 - 5 V out for 0 - 8 A (maybe 0 - 10 A) in. If you have one something like the bipolar one Vaivavalo had, but it's 0 - 4 - 8V out for -10 - 0 - +10A in, then like him you use the negative half and 4 V out is zero current, putting it right in the software.</p>
<p>This <a href="http://uk.farnell.com/lem/hx-03-p-sp2/current-transducer-3a-pcb/dp/1617419?categoryId=700000005923" title="http://uk.farnell.com/lem/hx-03-p-sp2/current-transducer-3a-pcb/dp/1617419?categoryId=700000005923">http://uk.farnell.com/lem/hx-03-p-sp2/current-transducer-3a-pcb/dp/16174...</a> appears to be worth looking at - output is 2.5 V &plusmn;1.875V for 0 &plusmn; 9 A, so you get 512 at 0 A and 128 at -9 A, or 42.66 counts per Amp. This requires 12 V.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30853"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Tue, 02/06/2015 - 13:32.</div>
    <div class="content">
     <p>Sorry, I haven&#39;t made myself clear.</p>
<p>The Honeywell CSLA2CD sensor <em><u>is</u></em> the same one Vaivavalo is using.</p>
<p>I was asking if there was a more appropriate voltage regulator than the L7808ACV because of the problem of the susceptibility to noise when measuring 32.7mV/A</p>
<blockquote><p>This <a href="http://uk.farnell.com/lem/hx-03-p-sp2/current-transducer-3a-pcb/dp/16174" title="http://uk.farnell.com/lem/hx-03-p-sp2/current-transducer-3a-pcb/dp/16174">http://uk.farnell.com/lem/hx-03-p-sp2/current-transducer-3a-pcb/dp/16174</a>... appears to be worth looking at - output is 2.5 V &plusmn;1.875V for 0 &plusmn; 9 A, so you get 512 at 0 A and 128 at -9 A, or 42.66 counts per Amp. This requires 12 V.</p>
</blockquote>
<p>From what I can glean from the above, it would involve working with high DC voltages which I&#39;m not keen on</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30858"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Tue, 02/06/2015 - 16:54.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>You mentioned above it is not easy to make a safe voltage take-off that is not connected directly or indirectly to earth (i.e. your Arduino). Can you advise why. I am monitoring solar DC<strong> after</strong> an inverter. My emontx&nbsp;is powered by the same DC that I am monitoring. I take it that is safe. Would it have been different&nbsp;&nbsp;if the emontx ( or arduino)&nbsp; was powered by a mains connected power supply?</p>
<p>Regards</p>
<p>Ian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30861"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 02/06/2015 - 18:30.</div>
    <div class="content">
     <p>Let's come back to the original question: What voltage is each end of your string sitting at? If one end of the string is close to earth potential, then although for safety you need to treat the connection as being at a high direct voltage (i.e. you must observe the creepage distances, breakdown voltages etc and treat it as live at all times there's any light and the inverter is not isolated) it won't actually be at a high voltage unless something else goes wrong. It's then like the mains neutral, you need to respect it but under normal conditions it's relatively safe to work on.</p>
<p>That regulator is a reasonable workhorse, but the performance is nothing to write home about. If fed from an already regulated and smooth supply, it would probably be OK.</p>
<p>Let's look at the CSLA spec again. It's output is ratiometric, meaning that the output is proportional to the product of current and supply voltage. So the higher the supply voltage, the better. But it would be nice to have the quiescent point close to 5 V to suit your Arduino. Let's say a 9.5 V supply. The output is then 32.7 mV &times; 9.5 / 8 per turn per amp. Or in terms of counts for 1 turn and 8A, 63. So you have an output whose useful range is pathetically small, your resolution is 125 mA. If you can get 7 turns through the core, you will have 445 counts and the resolution has improved to 18 mA. Multiple turns is a noise-free and offset-free way to improve the measurement. </p>
<p>You could add an amplifier between the sensor output and the ADC input, but although it will improve the resolution, it will add to the offset drift and in the long run you might be no better off.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30862"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 02/06/2015 - 18:44.</div>
    <div class="content">
     <p>Ian, the problem there is earth loops. If your emonTx is powered by the supply you're measuring, that's fine - as far as it goes. But consider what happens if that supply has an earth connection somewhere, and the emonTx GND is not actually at earth potential. When you plug in to program it and your laptop also has an earth connection, you've got a current flowing, driven by an unknown voltage and maybe capable of a few tens of amps, which at best is likely to cause trouble and at worst damage. And if the laptop's connection to earth is via you, and there's enough current, it could easily prove fatal.</p>
<p>Unless you <b><i>know</i></b> that the dc side is solidly earthed and your emonTx is at a safe voltage to earth, you must treat it as "live", and not make any other connections to it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30875"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Tue, 02/06/2015 - 23:27.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>Been thinking over what you suggested earlier regarding the LEM HX 03-P/SP2 sensor &amp; it looks like this may be the best choice.</p>
<p>Can I set this up for voltage rather than current measurement?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30876"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 02/06/2015 - 23:47.</div>
    <div class="content">
     <p>Short answer - no. It's a current-operated device. The only likely contender from Farnell is a 200 mA one, and even that is going to dissipate a frightening amount of power in any multiplier resistor. (Say your chain voltage is 240 V, then that's dissipating 48 W in a 1.2 k&Omega; resistor.)</p>
<p>I'm afraid monitoring a dc voltage with adequate and safe isolation is hard.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30887"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/8226" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dockarl&#039;s picture" title="dockarl&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/8226" title="View user profile.">dockarl</a> on Wed, 03/06/2015 - 00:44.</div>
    <div class="content">
     <p>Dominator -</p>
<p>Does your inverter (or charge controller) have a serial port? If so you may be able to read the values directly from the inverter (or charge controller if you&#39;re offgrid) and leave the isolation problem in your dust.. That&#39;s the approach I&#39;ve taken with my system which is shown <a href="https://www.youtube.com/watch?v=U1SQeZjnR-8">here</a>&nbsp;</p>
<p>M</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30906"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Wed, 03/06/2015 - 15:51.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>How about this:-</p>
<p><a href="http://www.lem.com/docs/products/lv%2025-p.pdf" title="http://www.lem.com/docs/products/lv%2025-p.pdf">http://www.lem.com/docs/products/lv%2025-p.pdf</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30907"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Wed, 03/06/2015 - 21:49.</div>
    <div class="content">
     <p>Hi dockarl</p>
<p>my inverter is an SMA Sunny Boy 3800/V <s>&amp; there is an optional Bluetooth card that can be fitted but it involves opening the inverter case!!</s></p>
<p>
The following inverters can be retrofitted with the SMA Bluetooth Piggy-Back:<br />
&bull; SB3000US, SB4000US<br />
&bull; SB5000US, SB6000US, SB7000US<br />
&bull; SB8000TL-US, SB9000TL-US, SB10000TL-US<br />
&bull; WB3000US, WB3800US<br />
&bull; WB5000US, WB6000US, WB7000US, WB8000U</p>
<p>So that&#39;s me out!<br />
&nbsp;</p>
<p>The cost is also high at around $140 + shipping</p>
<p>regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30912"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 03/06/2015 - 21:22.</div>
    <div class="content">
     <p>That LV 25 transducer looks a much better bet - it&#39;s a good find, albeit fairly expensive. The downside is you need a split supply, &plusmn;12 V. I think I know how it works, but I&#39;ve only had a cursory look. If I&#39;ve read it right, you get 4.75 V out maximum across R<sub>M</sub>, so ADC resolution isn&#39;t an issue. A note says contact them for a unipolar version, so that might be worth pursuing. But you don&#39;t <i>need</i> a unipolar version. From a practical point of view, you will need to be very careful when designing your PCB to ensure you retain adequate creepage distances between the PV side and the Arduino/emonTx side. I would also split the multiplier resistor R1 (25 k&Omega; the one on the PV side) and have 2 x 12 k&Omega; in series, as most resistors are only rated at 250 V so you&#39;d be right on their maximum voltage rating with a single component - not good. And I&#39;d consider a pair of fuses too - also rated for dc and at least 300 V - which would allow you to isolate the input from the panels if necessary. (Make sure the fuse is rated for 300 V dc, the arc goes out every 10 ms for ac, not so for dc!)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30916"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Thu, 04/06/2015 - 20:15.</div>
    <div class="content">
     <p>Hi Robert</p>
<blockquote><p>The downside is you need a split supply, &plusmn;12 V</p>
</blockquote>
<p>Not easy to find above at sensible prices. Could I use +12V &amp; -12V voltage regulators with a common ground as per attachment?</p>
<blockquote><p>(Make sure the fuse is rated for 300 V dc, the arc goes out every 10 ms for ac, not so for dc!)</p>
</blockquote>
<p>Did you mean DC isolator switch?</p>
<p>regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30920"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 04/06/2015 - 09:16.</div>
    <div class="content">
     <p>1. Of course you can use two regulators - that's most likely what's inside the split supply!</p>
<p>2. No, I didn't mean a DC isolator switch, but as well as (and the same comment applies to both). You don't want to wire all the way to the resistors in 16 A cable, so fuses will allow you to down-rate the cable to a few amps (depending on the fuse rating. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30922"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/5443" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="billt&#039;s picture" title="billt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/5443" title="View user profile.">billt</a> on Thu, 04/06/2015 - 10:04.</div>
    <div class="content">
     <p>&quot;my inverter is an SMA Sunny Boy 3800/V &amp; there is an optional Bluetooth card that can be fitted but it involves opening the inverter case!!</p>
<p>The following inverters can be retrofitted with the SMA Bluetooth Piggy-Back:<br />
&bull; SB3000US, SB4000US<br />
&bull; SB5000US, SB6000US, SB7000US<br />
&bull; SB8000TL-US, SB9000TL-US, SB10000TL-US<br />
&bull; WB3000US, WB3800US<br />
&bull; WB5000US, WB6000US, WB7000US, WB8000U</p>
<p>So that&#39;s me out!&quot;</p>
<p>&nbsp;</p>
<p>I don&#39;t think so. The early SMA inverters of that class have an interface port that can accept either a serial or bluetooth interface (including the SB3800 - mine has one fitted). Might be a bit hard to find these days. If you really want to know the DC voltage, that&#39;s a much more sensible way to go. However, the SB3800 only has one string input; the three string connections are paralleled at the inverter, so you can&#39;t measure the string voltages separately anyway.</p>
<p>As you can&#39;t measure the strings separately it&#39;s a completely pointless exercise. The AC output accurately reflects the DC output from the panels and any panel output reduction will be shown in the AC power reduction.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30924"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Thu, 04/06/2015 - 20:17.</div>
    <div class="content">
     <p>I&#39;ve re-attached power supply diagram here</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30927"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Thu, 04/06/2015 - 23:17.</div>
    <div class="content">
     <blockquote><p>The following inverters can be retrofitted with the SMA Bluetooth Piggy-Back:<br />
&bull; SB3000US, SB4000US<br />
&bull; SB5000US, SB6000US, SB7000US<br />
&bull; SB8000TL-US, SB9000TL-US, SB10000TL-US<br />
&bull; WB3000US, WB3800US<br />
&bull; WB5000US, WB6000US, WB7000US, WB8000U</p>
</blockquote>
<p>The above is from the SMA website so I can&#39;t see it being wrong.</p>
<p>My SB3800/V grid tied inverter has 2 strings not 1</p>
<blockquote><p>As you can&#39;t measure the strings separately it&#39;s a completely pointless exercise. The AC output accurately reflects the DC output from the panels and any panel output reduction will be shown in the AC power reduction.</p>
</blockquote>
<p>AC voltage is adjusted by the inverter to match the grid voltage otherwise how could you export power from a grid tied inverter to the grid?&nbsp; My inverter shows DC voltages that are, as far as I know, always considerably lower than my mains AC voltage when I&#39;m actually exporting power to the grid.</p>
<p>Maybe you&#39;re referring to &#39;off grid&#39; inverters?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30928"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 04/06/2015 - 23:46.</div>
    <div class="content">
     <p>I think Billt was referring to power, not voltage. There should be no relationship between the dc voltage supplied to the inverter and the ac output voltage, which (on-grid) is by definition the grid voltage.</p>
<p>What Bill is saying about the number of strings is that because the PV panels are essentially current sources, strings can be connected in parallel. If that is done, he will always measure the same voltage across the ends of the strings, and he's suggesting that in all likelihood, you (Chris) will also have your two strings connected in parallel and therefore you too will always measure the same voltage across the ends of the strings, so there's no point in setting up to measure both. I can see what he intends to say, but his choice of words with <i>"so you can't measure the string voltages separately anyway"</i> is open to misinterpretation. You can measure the voltages separately, but they are forced to be the same because of the parallel connection, so it's pointless to do so. But of course if you do put your multimeter across each string and you do measure different voltages (by more than the possible error in your meter, under otherwise unchanging conditions), then it's likely that your strings aren't paralleled.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30940"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 05/06/2015 - 20:28.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>I see the point billt is making.</p>
<p>I don&#39;t know whether my 2 strings are &#39;paralleled&#39; as that information is not available from the SMA manual.</p>
<p>I have measured each string current, using a clamp meter, &amp; they were slightly different but I expected that to be the case since each panel varies in its output under the same conditions of insolation.</p>
<p>I think it might be interesting to measure each string voltage with a voltmeter just to see whether my 2 strings are &#39;paralleled&#39;.&nbsp; If so, then I&#39;ll monitor one string voltage using the LEM LV 25-P &amp; each string current using the LEM HX 03-P/SP2.</p>
<p>I re-attached the power supply sketch earlier for your opinion on its suitability (I propose running the PSU at 15v DC &amp; can use the same power supply for both LEM devices??)</p>
<p>To measure 250V @10mA on the primary side with R1 @ 25 k ohm &amp; Rm @ 190 ohm on the secondary side of the LEM 25-P, it should give me a max measured voltage range of 4.75V DC for use with the Arduino - if I understand correctly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30945"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 05/06/2015 - 21:27.</div>
    <div class="content">
     <p>I suspect that combination is about the best you will get - at least out of those we've considered. It should be OK to run both off the same power supply, and the one you attached the diagram for seems pretty run-of-the-mill. Just one thing surprised me a little was the use of a small electrolytic capacitor in parallel with the larger one. Normally, I'd have expected to see a plastic film one (with a substantially lower value) there, but I expect it'll be OK.</p>
<p>Your resistor values for the voltage device agree with mine, but bear in mind the voltage rating of the 25 k&Omega; resistor - that's why I suggested splitting it.</p>
<p>Probably a more reliable test for a parallel connection would be to try to measure the voltage difference between corresponding ends of the two strings. If you have millivolts only, I think you can be reasonably sure they're solidly in parallel.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30946"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 05/06/2015 - 23:02.</div>
    <div class="content">
     <blockquote><p>&quot;.............. LEM HX 03-P/SP2&nbsp; output is 2.5 V &plusmn;1.875V for 0 &plusmn; 9 A, so you get 512 at 0 A and 128 at -9 A, or 42.66 counts per Amp. This requires 12 V.&quot;</p>
</blockquote>
<p>Can you explain the &#39;512 at 0 A and 128 at -9 A, or 42.66 counts per Amp&#39; &amp; &#39;This requires 12 V&#39; requirement?</p>
<p>Thanks</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30947"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 05/06/2015 - 23:29.</div>
    <div class="content">
     <p>The device requires 12 - 15 V supply, so at least 12 V. If you're giving it 15 V, fine.</p>
<p>Now, the output is 2.5 V &plusmn; the active signal. If your Arduino is running at 5 V, then the ADC input range is 0 V to 5 V = 0 to 1023 counts. 2.5 V will give you 512 counts.</p>
<p>The active signal is 0.625 V at 3 A, so 1.875 V at 9 A input. A swing of 1.875 V gives you a swing of 1.875 &div; 5 &times; 1024 = 384 counts. So a swing of 9 A gives you a swing of 384 counts.</p>
<p>It's only ratios, with an offset thrown in for good measure.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30960"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sat, 06/06/2015 - 11:14.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>Thanks for the explanation; got it now.</p>
<p>One other question, there is no typical wiring diagram for the LEM HX 3-P/SP2 but I assume the string&nbsp;+ve connects to terminal 5 &amp; the string -ve to terminal 6 with a 2k ohm resistor in series with terminal 5?&nbsp; What is the purpose of this resistor?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30964"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 06/06/2015 - 13:32.</div>
    <div class="content">
     <p>I think you're mixed up there. The HX 3 is measuring current, so you've got to break into the connection between the PV String and the inverter and wire the sensor in series with the string. If you put it in the positive end of the string, the positive end of the string goes to terminal 5, terminal 6 goes to the positive input of the inverter. If you put it in the negative end of the string, the negative input of the inverter goes to terminal 5, terminal 6 goes to the negative end of the string. You don't have a series resistor, because that would limit your PV current to milliamps.</p>
<p>I've got to repeat my warning from a few posts back: you must maintain adequate creepage distance between the 250 V or so on the high voltage dc side, and the electronics and the input to your Arduino on the low voltage side. The price of getting it wrong could be a fatal shock, as there is almost certainly no RCD protection on the dc side. And when you're breaking into that dc feed, make sure it is dark and you are the right side of all isolators, and there's somebody around who knows what to do if you get into trouble.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30972"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sat, 06/06/2015 - 17:10.</div>
    <div class="content">
     <p>That&#39;s what I thought, a series connection to measure current &amp; a parallel connection to measure voltage but LEM labels pin 5 as +ve primary current &amp; pin 6 as -ve primary current; it would have been clearer to label pins 5 &amp; 6 as &#39;Primary current LOAD&#39; surely?</p>
<p>What&#39;s causing me confusion is the reference in the spec sheet to a load resistance R<sub>L</sub> of &gt;= 2K ohm?</p>
<p>Where is the resistance R<sub>L</sub> of 2k ohms in the circuit that I&#39;m measuring the 8A from the PV string?</p>
<p>Each string produces a max of 8A @ 240V DC; using V = I x R would give a string resistance of 30 ohms or am I missing something here?</p>
<p>I&#39;ve emailed LEM for clarification</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30973"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 06/06/2015 - 18:12.</div>
    <div class="content">
     <p>I think you're considering only your particular situation. Considering the device itself, it has no knowledge of what it's being used for. As far as it is concerned, current flows in the "primary" circuit and it generates a "secondary" output voltage proportional to that.</p>
<p><i>"Where is the resistance RL of 2k ohms in the circuit that I'm measuring the 8A from the PV string?"</i><br />
Nowhere! That is the load on the secondary circuit. The output amplifier has an internal resistance of 50 &Omega; maximum. If you put a load on that, it will lower the voltage you see due to the internal I&times;R drop. What they are saying is that if your load is less than 2 k&Omega; there will be an unacceptable error as a result. So your load resistance must be greater than 2 k&Omega;. The Arduino ADC input easily satisfies that requirement.</p>
<p><i>"Each string produces a max of 8A @ 240V DC; using V = I x R would give a string resistance of 30 ohms or am I missing something here?"</i>.<br />
That's a red herring. The PV string - to a first approximation - acts as a current source, so it generates whatever voltage it needs to in order to make the current it's generating flow into your inverter, but subject to a practical limit of course. Don't think in terms of the more familiar voltage sources that you can represent as a perfect voltage with an internal resistance in series (such as the transducer output).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30976"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sat, 06/06/2015 - 19:17.</div>
    <div class="content">
     <p>The primary conductor diameter of the LEM HX -3-P/SP2 is 0.6mm (0.28mm<sup>2</sup>). Can this carry 9A @ 240V?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30978"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 06/06/2015 - 19:48.</div>
    <div class="content">
     <p>The manufacturer seems to think so! </p>
<p>It depends totally on the cooling arrangements. According to a couple of websites, 10 A fuse wire - which carries 10 A indefinitely, not ruptures at 10 A - is 29 SWG = 0.345 mm diameter.<br />
20 A fuse wire is 23 SWG = 0.610 mm diameter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30993"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sat, 06/06/2015 - 23:30.</div>
    <div class="content">
     <p>I understand but still surprised at the small conductor size of 0.6mm.</p>
<p>I assumed the heating effect (I<sup>2</sup>xR) is acceptable because the resistance of the small diameter, short conductor is low but I measured my HX 03-P/SP2 &amp; it&#39;s around 2 ohms which would give 162W at 9A?</p>
<p>Sorry to keep pressing the point but I need to be sure I understand before I commit to adding this device to my system</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30994"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 07/06/2015 - 00:05.</div>
    <div class="content">
     <p>I don't believe your 2 &Omega;. How did you measure it? What is the claimed accuracy of your meter? It's normally specified as &plusmn;(x% + y digits), what are the two numbers? How many digits do you read?</p>
<p>The resistance of annealed copper is 1.72 &times; 10<sup>-8</sup> &Omega; m, so you'd need 33 m of wire inside the device, that measures 19 &times; 20 &times; 15.4 mm, to get that resistance. And by the way, there's going to be a ferromagnetic core and the electronics in there as well.</p>
<p>We know there are 20 turns, so estimating the core as being around 16 mm outside diameter, and the centre hole as one third of that, the length of 1 turn is about 25 mm. That gives a total length of wire of about 500 mm, so my estimate of the resistance is nearer 30 m&Omega;, dissipating 2.45 W.</p>
<p>2.45 W dissipated in a box that's a bit less than 1" cube means it's going to get just warm (think of a tungsten torch bulb - that's roughly the same power dissipation).</p>
<p>You really need to check that the numbers you read are sensible before jumping to conclusions.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31005"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sun, 07/06/2015 - 12:38.</div>
    <div class="content">
     <p>I&#39;ve switched to another meter UNI-T UT50A rated at (0.8%+1) best accuracy for resistance measurement. This meter shows 99.4&Omega; for a nominal 100&Omega; resistor &amp; across HX 03-PSP2 pins 5 &amp; 6 shows 00.2&Omega; not 2&Omega; as previously mentioned but that still doesn&#39;t square with your comments of 30m&Omega;?</p>
<p>I&#39;ve attached some photos &amp; the coil looks like a standard wire wound core with no other connections other than pins 5 &amp; 6.</p>
<p>I&#39;m trying not to jump to conclusions but as a mechanical engineer not electrical/electronic this area is not as clear to me as someone with your expertise.</p>
<p>I&#39;ve just done a bit of &#39;digging&#39; &amp; found that most Digital Multi Meters can&#39;t measure low resistances accurately below 1&Omega; &amp; some below 10&Omega; so this could explain why there is such a big difference between what I &#39;measured&#39; &amp; you calculated.&nbsp; Knowing this limit of DMM&#39;s earlier could have saved much discussion but then we learn something new everyday</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31008"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 07/06/2015 - 13:03.</div>
    <div class="content">
     <p>That's pretty much what I'd expect to see inside there, there can't be another connection to the coil as it needs to remain isolated. There's a Building Blocks page about multimeters that you might like to read. As you point out, it requires a specialist instrument to get any sort of accuracy at resistances like that. My 30 mΩ was an estimate, if you can get a better guess at the length of wire, you should be able to improve on it. The way I'd go about measuring the resistance is pass a known current as close to 9 A as I could manage through it, then measure the voltage. At 9 A dc you should get 270 mV, or with a car battery &amp; headlight bulb - 60 W = 5 A would give you 150 mV, and that's within the capabilities of most DMMs. </p>
<p>Looking at the manual for your meter, it actually says for the 200 &Omega; range: "Resolution: 0.1&Omega;, Accuracy &plusmn;(0.8%+3). So you'll only ever read 0.0, 0.1 or 0.2, and the final digit could be in error by 3. Another example: if the resistance was actually 300 m&Omega;, the meter would be within spec if it read 0.0, 0.6 or anything in between.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31013"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sun, 07/06/2015 - 17:07.</div>
    <div class="content">
     <p>Just calculated the resistance across pins 5 &amp; 6 of the HX 03-P/SP2, using the voltage divider method, &amp; obtained a value of 29m&Omega;; just as you predicted.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31015"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 07/06/2015 - 17:38.</div>
    <div class="content">
     <p>You need not worry about dissipation inside the device, then.</p>
<p>But I'm surprised I was that close. I did think I was estimating on the high side, I'd have been happy if it had been anywhere between 15 and 45 mΩ. At 45 mΩ the dissipation would be a little over 3.5 W and that's getting significant in a box of that size.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31051"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Mon, 08/06/2015 - 10:31.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>Find attached response from LEM that you &amp; others may find interesting</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31506"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 19/06/2015 - 11:50.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>Before I go &#39;live&#39; could you cast a glance at my proposed schematic?</p>
<p>Any observations/criticisms would be welcome</p>
<p>&nbsp;</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31509"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 19/06/2015 - 12:54.</div>
    <div class="content">
     <p>For a start, your mains transformer is wired wrongly on the secondary side. The two secondaries should be linked 15 - 0 (not 0 - 0) so that you get 30 V across the ends. Then the centre tap of the two windings is your GND.</p>
<p>After that, I'm finding it hard to read as the resolution is so poor. Can you post a higher resolution image, and change the colours to use black (not pale blue and pale pink)?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31512"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 19/06/2015 - 13:47.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>How is this one?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31513"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 19/06/2015 - 13:58.</div>
    <div class="content">
     <p>or this one</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31518"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 19/06/2015 - 16:25.</div>
    <div class="content">
     <p>But those are still the same resolution! I can only just read the component values. It's OK for you, you know what they are, but you're making it difficult for me to help you if I can't read it clearly <u><b>and easily</b></u>.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31522"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 19/06/2015 - 20:36.</div>
    <div class="content">
     <p>Is this any better?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31527"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 19/06/2015 - 20:44.</div>
    <div class="content">
     <p>It is slightly better, but it still hurts my eyes. Why could you not post a twice size version, 1090 x 1536 pixels, that would be a lot better. </p>
<p>The power supply is still wrong. You must wire the transformer to end up with something like this <a href="http://www.circuitstoday.com/regulated-dual-power-supply-circuit" title="http://www.circuitstoday.com/regulated-dual-power-supply-circuit">http://www.circuitstoday.com/regulated-dual-power-supply-circuit</a> (i.e. reverse one of the windings).</p>
<p>I think you're in trouble with the LV25. Its output is a current (it says), so you need the 190 &Omega; resistor to work like a CT burden, i.e. wired from M to the transformer 0V (GND), not in series with the Arduino input, and the latter then goes directly to M (but you could insert a series resistor (not greater than 10 k&Omega;) before the ADC input to limit the current and protect the input should 'M' go above 5 V or below 0 V.</p>
<p>Is the Arduino's adjustable power supply output isolated from its input? - I have no means of knowing, but it must be for your circuit to work.</p>
<p>The two HX 03s need to move onto the +15 V supply, so that their output goes from +2.5 V to +4.375 V as current increases. The ADC output will go from 512 or thereabouts at zero current up to 896 at 9 A. It's not brilliant but without adding op-amps to give gain and a level shift, there's little you can do about it. (As you have it, their output at zero current is -12.5 V, and remains below the Arduino 0 V at all times. I think you got confused because in the other thread I did a fiddle to save adding an electronic level shifter/signal inverter.)</p>
<p>If your string voltage is anywhere close to the voltage rating of R1, I'd split that into two equal resistors, just so that your electronics has a fighting chance should the resistor flash over or get damp (though the power dissipated should keep it nice and warm and dry).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31531"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 19/06/2015 - 22:53.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>I&#39;m still struggling with exporting an image file from &#39;TinyCad&#39; as I&#39;ve only just started to use the software; hopefully the one I&#39;ve attached is better.&nbsp; The best I can export from TinyCad is an EMF file but it&#39;s nearly 6MB so it&#39;s too big to attach</p>
<p>I can&#39;t see where the power supply is wrong! I&#39;ve linked the 0V lines &amp; the +15V &amp; the -15V seem to agree with the web link you suggested - I&#39;m a retired mechanical engineer not electrical/electronic so be patient with me :)</p>
<blockquote><p>you could insert a series resistor (not greater than 10 k&Omega;) before the ADC input to limit the current and protect the input should &#39;M&#39; go above 5 V or below 0 V.</p>
</blockquote>
<p>Could I use zener diodes to limit any over or under voltage from the LV 25-P&#39;s connection &#39;M&#39; instead of the</p>
<p>10 k&Omega; resistor?</p>
<p>I&#39;ve amended the wiring of the LV 25-P hopefully correctly!</p>
<p>&nbsp;</p>
<blockquote><p>Is the Arduino&#39;s adjustable power supply output isolated from its input?</p>
</blockquote>
<p>I don&#39;t know myself either as it&#39;s still en route from China.</p>
<p>&nbsp;</p>
<p>I agree there was some confusion on my part carried over from the original Honeywell CSLA2CD current sensor where we had to use the negative part of its output to avoid overvolting the Arduino.</p>
<p>I sourced resistor R1 (460V &amp; 5W) to ensure it was nowhere near my PV string voltage of approx 240V &amp; the current draw of the HX 03-P/SP2 of 2.35W</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31533"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 19/06/2015 - 23:51.</div>
    <div class="content">
     <p><i>"I can't see where the power supply is wrong!"</i></p>
<p>You need to reverse one of the windings. The two ends of each winding are labelled "0" and "15". In order to add the voltages together, which is what you want because there's 30 V between the outputs of the two regulators, you need to have the one sitting on top of the other. So connect the "0" end of the right-hand winding to the right-hand side of the bridge rectifier, the "15" end of the same winding to the "0" end of the left-hand and to the GND common rail, and the "15" end of the left-hand winding to the left-hand side of the bridge rectifier.</p>
<p>dBC advocates both external diodes and a series resistor. The argument is complicated but what you need to do is limit the current into the inbuilt protection diodes in the AVR's analogue input. I think that in most cases, a series resistor of 1 k&Omega; should be enough, because the ATmega 328 data sheet says that all inputs can handle 20 mA, therefore the diodes are protected for voltages between -20 V and + 25 V. dBC says you need an external high current diode to clamp the input to 0.7 V above 5 V (or 0.7 V below 0 V) and a resistor to limit to current after that, because the built-in diodes start to turn on at 0.5 V.</p>
<p>The HX 03s are still wrong, they need to be supplied by the positive rail (the 78L15).</p>
<p>I wouldn't start building until you get and check that power supply. If the output isn't isolated (and surely the data should tell you but Chinese data sheets tend to a bit nebulous!), then it's back to the drawing board.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31544"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sat, 20/06/2015 - 13:07.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>I understand a zener for +5.7V but not for -0.7V can you explain how tu use a zener for -ve voltages?</p>
<p>I was trying to power the Arduino from th 15V psu but if it&#39;s a major stumbling block to find an isolated 5V DC-DC converter then I&#39;ll just use a standard &#39;wall wart&#39;</p>
<p>New adjustable psu specs: (doesn&#39;t mention &#39;isolated&#39; or not as far as I can see; is there a clue here below?)</p>
<p>DC-DC Auto Boost Buck adjustable step down Converter Module</p>
<p>Features: Auto step down step up(SEPIC)</p>
<p>Input: 3-35V</p>
<p>Output: 1.25V-30V</p>
<p>Biggest current 2A</p>
<p>Conversion efficiency 92%</p>
<p>Frequency 50KHz</p>
<p>Output ripple 40mV</p>
<p>Temperature: -40℃ to +85℃</p>
<p>Advantage: low ESR Sanyo filter capacitance, plus another LC filter unit Low voltage ripple to 40 mV, suitable for all kinds of use. good for solar.</p>
<p>&nbsp;</p>
<p>Chris<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31548"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 20/06/2015 - 15:59.</div>
    <div class="content">
     <p>You wouldn't use a Zener for protecting against negative voltages - remember (not, perhaps, the right word for a MechE!) that a Zener diode is an ordinary diode operated in the reverse breakdown region, so it exhibits a "normal" forward drop of about 0.65 V in what to it is the "reverse" direction - if you see what I'm getting at!</p>
<p>Sorry, there are no clues there about the power supply. I'd assume it is not isolated until proven otherwise.</p>
<p>The schematic as you now have it looks as if it stands a chance. I can't spot anything obviously wrong. One possible 'gotcha' is that power supply, because if part of the filtering is in the 0V leg between input and output, that will create circulating ground currents as you have two "0 V" connections to the Arduino. If you get a lot of noise on the analogue inputs, that could be a cause. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31552"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sat, 20/06/2015 - 20:48.</div>
    <div class="content">
     <p>Thanks for the help Robert</p>
<p>I&#39;ve attached an article on diode clipping; could this method be used as suggested by dbc?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31553"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3016" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3016" title="View user profile.">dBC</a> on Sat, 20/06/2015 - 23:13.</div>
    <div class="content">
     <p>I think the main take-home message from AVR182&nbsp;(<a href="http://www.atmel.com/Images/doc2508.pdf">http://www.atmel.com/Images/doc2508.pdf</a>) is that you shouldn&#39;t pump more than 1mA into the internal protection diodes regularly and continuously (see page 4). &nbsp;In that application note they&#39;re designing something that is going to see excessive voltage excursions every half cycle so I can imagine they&#39;re leaving plenty of safety margin. &nbsp;There&#39;s plenty of anecdotal &quot;I&#39;ve been over-volting my AVR for years and it&#39;s still working fine&quot; stories around, so where you want to live on that risk curve is a personal choice.</p>
<p>My take on&nbsp;Robert&#39;s 20mA quote from the datasheet is that&#39;s the maximum current you can pump into a pin when you&#39;re&nbsp;<strong>not</strong>&nbsp;exceeding the voltage limits specified in the datasheet, but your interpretation may vary.</p>
<p>When searching these forums for the old thread on this, I came across this thread: &nbsp;<a href="http://openenergymonitor.org/emon/node/171">http://openenergymonitor.org/emon/node/171</a>. &nbsp;It seems Glyn discovered the 1mA limit long before I did.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31554"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 20/06/2015 - 23:21.</div>
    <div class="content">
     <p>Not really, because you want to make sure that the input does not go significantly beyond the supply rails.<br />
I think you should be OK as you are, but here's dBC's diagram <a href="http://openenergymonitor.org/emon/node/10203#comment-28398" title="http://openenergymonitor.org/emon/node/10203#comment-28398">http://openenergymonitor.org/emon/node/10203#comment-28398</a> and his explanation. But note you'll need one more resistor in series with the current transducer output and before this to protect the current transducer from excess current. Again, 1 k&Omega; should be enough - that will limit the output current to 15 mA worst case. (Why? - because that diagram was for a CT output, which is a current source, not a voltage source, which is what your current transducers are.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31555"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 20/06/2015 - 23:42.</div>
    <div class="content">
     <p>My take on the data sheet is that V<sub>CC</sub> + 0.5 V assumes a voltage source of unlimited current. If by some external means you limit the current into those protection diodes, the voltage limit ceases to apply and the thermal rating of the diodes, i.e. their current rating, becomes relevant.</p>
<p>The place where we disagree is dBC quotes an application note that recommends a current limit of 1 mA. I quote the absolute maximum rating from the device data sheet that says DC Current per I/O Pin is 40.0 mA, and I contend, because the data sheet does not say otherwise, that it applies equally to the digital driver as a source/sink and to the protection diodes.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31556"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3016" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3016" title="View user profile.">dBC</a> on Sat, 20/06/2015 - 23:49.</div>
    <div class="content">
     <p>Excellent&nbsp;synopsis.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31557"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3016" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3016" title="View user profile.">dBC</a> on Sun, 21/06/2015 - 07:38.</div>
    <div class="content">
     <p>Seems it&#39;s quite a recurring topic over at avrfreaks. &nbsp;For what it&#39;s worth (and I know you can&#39;t trust everything you read on the interweby) this guy claims:</p>
<p><em>No, this is wrong. Maximum current through the protection diodes is 1mA (confirmed by Atmel by email). So you need a very high R. &nbsp;</em></p>
<p>Source: &nbsp;<a href="http://www.avrfreaks.net/comment/446671#comment-446671">http://www.avrfreaks.net/comment/446671#comment-446671</a>, shame he didn&#39;t include the email, but&nbsp; I guess you could always ask them yourself.</p>
<p>And according to this guy: &nbsp;<a href="http://www.avrfreaks.net/comment/460502#comment-460502">http://www.avrfreaks.net/comment/460502#comment-460502</a>&nbsp;it&#39;s all down to SCR latch-up in CMOS devices. &nbsp;It&#39;s getting well out of my depth, but I think I&#39;ll be sticking with the conservative 1mA number myself.</p>
<p><strong>[EDIT]</strong>&nbsp;here you go: &nbsp;<a href="http://atmel.force.com/support/articles/en_US/FAQ/I-O-protection-in-XMEGA-devices">http://atmel.force.com/support/articles/en_US/FAQ/I-O-protection-in-XMEGA-devices</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31562"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sun, 21/06/2015 - 13:44.</div>
    <div class="content">
     <p>I&#39;m not sure I followed most of the discussion between yourself &amp; dbc. I&#39;ve attached a modified circuit to see if I&#39;ve understood what was being suggested!!</p>
<p>I&#39;ve looked around for an isolated, regulated DC-DC converter to replace the questionable one shown in the schematic but can&#39;t seem to find one with a 15V input &amp; a 5V output; any suggestions?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31563"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 21/06/2015 - 14:14.</div>
    <div class="content">
     <p>Your Zeners are the wrong way round, and you can't buy a 4 V one, which would clip before 9 A (= +4.375 V) anyway. 4.7 V though should be OK, as even at + 5% it's below 5 V, and at -5% it's above 4.375 V (worst case tolerances).</p>
<p>I wouldn't do anything about a power supply until the one that's coming has landed on your doormat.</p>
<p>dBC: Atmel need to edit their data sheet.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31566"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sun, 21/06/2015 - 14:39.</div>
    <div class="content">
     <p>Oops!</p>
<p>Do I need to do a similar addition to the LV 25-P voltage transducer M output to the arduino?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31570"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 21/06/2015 - 15:45.</div>
    <div class="content">
     <p>If I remember correctly, that should only go up to 4.75 V anyway, unless your 190 &Omega; resistor falls off. So probably not necessary but you could fit a zener (5.1 V) 'in case'.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31850"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Thu, 02/07/2015 - 13:20.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>This (I think) is the final draft but I have a question about the 4 10A 300V fuses (1 to 4); are 4 fuses necessary or would 2 be OK on the +ve inputs from the PV isolator?</p>
<p>Also, if 4 are recommended, is there an easy way to monitor if any of the 4 fuses fail?&nbsp; I have mains neon indicators wired across the +ve &amp; -ve of each string (NE3 &amp; NE5) to indicate when either of these fuses (fuse 1 &amp; fuse 4) blow but if fuse 2 or fuse 3 blows the relevant neon indicator would still be lit because the current would flow to the -ve terminal through the associated HX 03-P/SP2 sensor.</p>
<p>Any suggestions?</p>
<p>I&#39;ve also decided to use a &#39;wall wart&#39; to power the Arduino Uno so as to avoid the possible analogue noise from a non-isolated psu</p>
<p>&nbsp;</p>
<p>Chris</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31857"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 02/07/2015 - 19:03.</div>
    <div class="content">
     <p>You're trying to measure the current in the two strings, and those are connected in parallel to feed into your inverter. I presume the parallel connection is made at the inverter. This could be important: is "PV Isolator" two double-pole isolators or a single 4-pole (or two linked 2-pole ones)?</p>
<p>Consider what happens if there is an earth fault (say) on your sensor wiring. There are two sources of fault current - the two strings by virtue of the parallel connection. Because the sensor can be fed from both strings, you do need two fuses, one on the input side and one on the output side, one string will blow the input fuse and the other string will blow the output fuse, that way both strings will be disconnected from the fault. This assumes that the PV string is capable of generating an overcurrent fault - if it cannot, the fuses are redundant as protective devices but you still need a means of disconnection for your safety while working on the sensors or your wiring. That's where knowing how the DC isolator is arranged becomes important.</p>
<p>And I think you may have tags 5 &amp; 6 transposed on the current sensors.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31867"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Thu, 02/07/2015 - 22:37.</div>
    <div class="content">
     <p>I&#39;m still not clear (MechE remember!) are you saying my fuse arrangement is NOT OK?</p>
<p>Tags 5 &amp; 6 on the HX 03 sensors are marked + (5) &amp; - (6) with an arrow between them pointing from 5 to 6; I assume this arrow shows the desired direction of current for the sensor to work but since 5 &amp; 6 are in series of the -ve (0V) DC leg then I would need to change the wiring connection as shown in my latest schematic 2.3, is that correct?</p>
<p>I&#39;ve also moved fuse 2 to the input of the HX 03 if I understand you correctly</p>
<p>&quot;is &quot;PV Isolator&quot; two double-pole isolators or a single 4-pole (or two linked 2-pole ones)?&quot;</p>
<p>I haven&#39;t checked yet but will investigate.</p>
<p>&quot;I presume the parallel connection is made at the inverter&quot;</p>
<p>I assume this to be the case, since there is MPP tracking active on each string, then any parallel connection must be made after MPP optimisation, if I understand MPP correctly?</p>
<p>I&#39;ve chosen external access panel mount fuses so they can be removed before my &#39;box&#39; is opened</p>
<p>NB any thoughts on the original question of detecting which of the -ve leg fuses had blown using neon indicators?</p>
<p>Chris</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31869"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 03/07/2015 - 00:04.</div>
    <div class="content">
     <p>I'm still really struggling to read your diagram, the resolution is so poor that it hurts my eyes. I'll redraw the power side how I think it needs to be wired.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31882"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 03/07/2015 - 09:45.</div>
    <div class="content">
     <p>Is this one any better?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31883"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 03/07/2015 - 15:56.</div>
    <div class="content">
     <p>Nope.</p>
<p>Here&#39;s the DC side redrawn how I&#39;d like it wired. Note I&#39;ve shown a 4-pole isolator for safety, so that you will competely isolate both strings from the monitor and the inverter. If that is not possible, <strong>two separate isolators do not protect you unless you isolate BOTH strings</strong>. That is because of the possibility of a reverse feed. Also because of that, I&#39;ve drawn in 4 main fuses, but if you requre indication you should probably replace those with MCBs as discussed above, and I&#39;ve put a fuse in series with the voltage monitor too.</p>
<p>Without knowing which side if the PV strings is &#39;earthy&#39;, or whether they are completely floating, I can&#39;t say which possible faults you have protection against.</p>
<p>Also, looking back I see your string voltage is 30 V. Your neon indicator won&#39;t work at 30 V, a neon requires at least 70 V to strike.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31888"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 03/07/2015 - 21:48.</div>
    <div class="content">
     <p>Thanks Robert for the wiring diagram.</p>
<p>&quot;..looking back I see your string voltage is 30 V. Your neon indicator won&#39;t work at 30 V, a neon requires at least 70 V to strike&quot;</p>
<p>Each of my PV panels is approx 30V DC, with 8 of these in a series string that makes approx 240V DC per string &amp; I have 2 strings or am I missing something here?</p>
<p>I notice you don&#39;t show any fuses on the +ve string legs that pass through the new enclosure; would it be prudent to include these 2 extra fuses?</p>
<p>I&#39;ve attached my take on your wiring diagram for your perusal &amp; included the extra fuses on the +ve leg</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31892"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 03/07/2015 - 22:25.</div>
    <div class="content">
     <p>No, it's me who missed the 8 panels in series bit, and didn't work back from the voltage transducer to cross-check!</p>
<p>Fuses:<br />
What are you trying to protect against? We come back to the question I asked above - which side of the PV strings is 'earthy', or are they completely floating?  If one point of the dc loop is earthed, directly or indirectly, then you have the possibility of an earth fault from any other point on the circuit, so a fuse is needed and must be positioned to disconnect the fault. If the loop is floating, you need two earth faults, or one line-line fault, before you can have an over-current, so it's a completely different scenario and I'd be inclined to think that you could dismiss the 'two faults' case as being highly improbable and worry about the line-line fault only, in which case a fuse close to the string, or even part-way along the string, would be appropriate.</p>
<p>There's always a danger with multiple fuses that, should one rupture and leave part of the circuit live but the circuit as a whole not working, someone maybe not as familiar with the arrangements as you are will believe it is safe if the fuse has blown and get a very nasty surprise when they find part of the circuit is still live. This is the same danger that you can find in some very old properties that have both line and neutral fused - if the neutral fuse opens on a line-neutral fault, the circuit remains live - and it's why the neutral fuse must always be removed.</p>
<p>If you could replace the fuses with a 4-pole linked circuit breaker, which you'd wire in series with the isolator with a pole in each line fron the PV array, then that would disconnect everything in the event that any one pole was subjected to an over-current. It would be a much more satisfactory solution, Schneider Electric do a PV range with a 800 V dc rating, so worth looking there.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31893"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sat, 04/07/2015 - 22:02.</div>
    <div class="content">
     <p>I thought the original suggestion of fusing my &#39;LEM transducer box&#39; was from a safety standpoint to ensure I wouldn&#39;t be exposed to high voltages when working on the installation.</p>
<p>Doesn&#39;t the DC isolator provide sufficient protection, along with the AC isolator at the output side of the inverter? ie if BOTH of these isolators are switched OFF then my &#39;LEM transducer box&#39; is completely isolated from any high voltages, DC &amp; AC, &amp; is safe to work on?</p>
<p>The introduction of my &#39;LEM transducer box&#39; in series with my existing PV setup shouldn&#39;t compromise electrical safety if sufficient &#39;creepage&#39; is incorporated between the high &amp; low voltage side of the box.&nbsp; I don&#39;t envisage the need for an &#39;earth&#39; connection inside my &#39;LEM transducer box&#39; unless you suggest the need for one (my &#39;LEM transducer box&#39; is plastic &amp; all transducers &amp; the Camdenboss transformer are fully isolated).</p>
<p>&quot;What are you trying to protect against?&quot;</p>
<p>This seems to be somewhat of an unknown since we don&#39;t know how &#39;earthy&#39; the strings are.</p>
<p>Since the high voltage side of the LEM HX 03 is&nbsp; just a coil, with adequate &#39;creepage&#39; from the low voltage side, I can&#39;t see a failure in this device causing any catastrophic problems.</p>
<p>Equally, I can&#39;t see that a failure of the LEM LV 25 would result in any catastrophic problems, however the inclusion of a 500mA fuse might be a sensible idea.</p>
<p>It seems to me that the only issue for concern is a failure in the separation of the high voltage side from the low voltage side &amp; proper design will eliminate this threat, hence the reason I&#39;m calling on your expertise to avoid this issue</p>
<p>&quot;There&#39;s always a danger with multiple fuses that, should one rupture and leave part of the circuit live but the circuit as a whole not working, someone maybe not as familiar with the arrangements as you are will believe it is safe if the fuse has blown and get a very nasty surprise when they find part of the circuit is still live&quot;</p>
<p>Maybe the safest option is to proceed with good design of the &#39;LEM transducer box&#39; without the fuses 1 to 6 &amp; rely on the DC &amp; AC isolators for personal safety &amp; the consumer unit 20A MCB for overload protection?</p>
<p>I was also thinking of using a 4 pole changeover switch to allow me to switch my &#39;LEM transducer box&#39; in &amp; out of circuit if a problem arose rather than shutting down the PV array to allow for repair/removal of the &#39;LEM transducer box&#39;.&nbsp; What do you think?</p>
<p>I&#39;ve pasted&nbsp; links to what looks like a suitable candidates.</p>
<p><a href="http://www.ebay.co.uk/itm/SCL-IC420-20-Amp-4-Pole-Enclosed-Change-Over-Switch-3-Position-on-off-on-/181790054477" title="http://www.ebay.co.uk/itm/SCL-IC420-20-Amp-4-Pole-Enclosed-Change-Over-Switch-3-Position-on-off-on-/181790054477">http://www.ebay.co.uk/itm/SCL-IC420-20-Amp-4-Pole-Enclosed-Change-Over-S...</a></p>
<p><a href="http://www.ebay.co.uk/itm/32-AMP-ROTARY-CAM-CHANGEOVER-SWITCH-3-POSITION-4-POLE-ALUMINIUM-NEW-PTA10-/331117046146" title="http://www.ebay.co.uk/itm/32-AMP-ROTARY-CAM-CHANGEOVER-SWITCH-3-POSITION-4-POLE-ALUMINIUM-NEW-PTA10-/331117046146">http://www.ebay.co.uk/itm/32-AMP-ROTARY-CAM-CHANGEOVER-SWITCH-3-POSITION...</a></p>
<p>I&#39;m aware of proper PV shutdown procedure to minimise switch contact arcing of DC</p>
<p>I&#39;m sorry to labour this point but I want to ensure I cover every possible fault scenario without over complication.</p>
<p>I really appreciate your assistance with the project of mine &amp; hope it will be of benefit to other readers.</p>
<p>Chris</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31911"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 04/07/2015 - 20:11.</div>
    <div class="content">
     <p><em>I thought the original suggestion of fusing my &#39;LEM transducer box&#39; was from a safety standpoint to ensure I wouldn&#39;t be exposed to high voltages when working on the installation.</em></p>
<p><em>Doesn&#39;t the DC isolator provide sufficient protection, along with the AC isolator at the output side of the inverter? ie if BOTH of these isolators are switched OFF then my &#39;LEM transducer box&#39; is completely isolated from any high voltages, DC &amp; AC, &amp; is safe to work on?</em></p>
<p>Indeed, that is the purpose of the isolator. You would probably be safe even with the output not isolated, but with it isolated from the mains supply, you would be doubly sure.</p>
<p><em>The introduction of my &#39;LEM transducer box&#39; in series with my existing PV setup shouldn&#39;t compromise electrical safety if sufficient &#39;creepage&#39; is incorporated between the high &amp; low voltage side of the box.&nbsp; I don&#39;t envisage the need for an &#39;earth&#39; connection inside my &#39;LEM transducer box&#39; unless you suggest the need for one (my &#39;LEM transducer box&#39; is plastic &amp; all transducers &amp; the Camdenboss transformer are fully isolated).</em></p>
<p>I wasn&#39;t suggesting that at all.&nbsp;</p>
<p><em>&quot;What are you trying to protect against?&quot;</em></p>
<p><em>This seems to be somewhat of an unknown since we don&#39;t know how &#39;earthy&#39; the strings are.</em></p>
<p>Then, for safety, we must assume that any part of the circuit is at an undefined high voltage - it&#39;s possible (but most unlikely) that the inverter strings are sitting on top of the mains, so the peak voltage to earth might be close to 600 V (340 V peak ac +&nbsp;240 V dc). I think you should assume the highest voltage you might encounter is 350 V, but it is probably lower. I would not be surprised if the dc loop were floating and you could only measure a &#39;phantom&#39; voltage to earth arising from leakage paths and capacitance.</p>
<p><em>Since the high voltage side of the LEM HX 03 is&nbsp; just a coil, with adequate &#39;creepage&#39; from the low voltage side, I can&#39;t see a failure in this device causing any catastrophic problems.</em></p>
<p>Agreed.</p>
<p><em>Equally, I can&#39;t see that a failure of the LEM LV 25 would result in any catastrophic problems, however the inclusion of a 500mA fuse might be a sensible idea.</em></p>
<p>This is dependent on the integrity of one resistor - hence the fuse.</p>
<p><em>It seems to me that the only issue for concern is a failure in the separation of the high voltage side from the low voltage side &amp; proper design will eliminate this threat, hence the reason I&#39;m calling on your expertise to avoid this issue.</em></p>
<p>This is a case where the mounting and wiring arrangements become important. If the devices are mounted on a pcb, then you must ensure that you have 5.5 mm along the surface between the high voltage and low voltage sides. The easy way to ensure this is to mill a slot underneath and a couple of mm out beyond&nbsp;the&nbsp;edge at each side. And in the case of the HX03, I would solder wires directly to the pins and use the pcb for pins 5 &amp; 6 only as a mechanical fixing.</p>
<p><em>&quot;There&#39;s always a danger with multiple fuses that, should one rupture and leave part of the circuit live but the circuit as a whole not working, someone maybe not as familiar with the arrangements as you are will believe it is safe if the fuse has blown and get a very nasty surprise when they find part of the circuit is still live&quot;</em></p>
<p><em>Maybe the safest option is to proceed with good design of the &#39;LEM transducer box&#39; without the fuses 1 to 6 &amp; rely on the DC &amp; AC isolators for personal safety &amp; the consumer unit 20A MCB for overload protection?</em></p>
<p>Is there no protection already in the dc loop? If there is, it&nbsp;should be adequate; if not, the manufacturer deems it&nbsp;to be unnecessary. Either way, I don&#39;t really see a need to add fuses. So I&#39;d be happy not adding fuses (except that little one on the voltage sensor).</p>
<p><em>I was also thinking of using a 4 pole changeover switch to allow me to switch my &#39;LEM transducer box&#39; in &amp; out of circuit if a problem arose rather than shutting down the PV array to allow for repair/removal of the &#39;LEM transducer box&#39;.&nbsp; What do you think?</em></p>
<p>I think that would be prudent - maybe in its own box so that shrouding it isn&#39;t an issue. The two you cite are in their own box, but they don&#39;t have a dc rating, so you must always isolate before operating the changeover and&nbsp;never switch &#39;on load&#39;. At least the 20 A version is English and CE marked, all I can find for the 32 A one is a fuzzy data sheet in Chinese, so it&#39;s a total unknown.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31920"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sun, 05/07/2015 - 00:15.</div>
    <div class="content">
     <p>Many thanks Robert</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31931"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 05/07/2015 - 10:03.</div>
    <div class="content">
     <p><strike>Now if you could get a 5-pole switch, you could do it with one switch, not two (because you only need 1 more pole to isolate the voltage sensor).</strike> </p>
<p>You can&#39;t even do it then. You need a 5-pole and a 2-pole; the 5-pole to isolate your monitor and the 2-pole to bypass it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31939"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sun, 05/07/2015 - 18:08.</div>
    <div class="content">
     <p>I use 2No. 4PDT changeover switches to allow complete removal of LEM box if necessary for maintenance rather than trying to maintain box in situ in low headroom attic.&nbsp; Also, with only 1 changeover switch I could not remove DC power from the LEM box completely because if the 1st changeover switch was switched to position 1 then DC power would still be applied to the LEM box from the reverse direction via the SMA inverter to the lower LEM box connections or am I missing something here?</p>
<p>Since the LEM LV 25 is connected to string 2 +ve &amp; -ve, then it will be isolated when string 2 is isolated, yes?</p>
<p>&nbsp;</p>
<p>When I saved this post I noticed your response posted before! Sorry about that</p>
<p>I also feel that sourcing a 5PDT could be tricky (and expensive) so that was the reasoning behind 2No. 4PDT switches.</p>
<p>I also notice your circuit only requires ST not DT switches would should be a cheaper option</p>
<p>&nbsp;</p>
<p>I prefer your circuit to mine so attached is my variation of your circuit using 4PDT changeover switches I already have; I thinks it&#39;s OK</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31954"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 05/07/2015 - 21:24.</div>
    <div class="content">
     <p>I don't know whether you noticed, but if you operate the switches in the correct sequence, it is possible to take the monitor in and out of circuit on load with no worries about the contact rating on dc, because there is either no current flowing or no (or very little) voltage as the switch opens because there's a parallel path. Putting the monitor in circuit, you close up the bottom isolator first (position 2) and the parallel path through HX03s makes the contacts of the upper isolator at nearly equal voltages, so that can be changed over without breaking the current flow and there is only a very small voltage appearing across the contacts so very little chance of a damaging arc.</p>
<p>Taking the monitor out of circuit is the reverse. Change over the top isolator first and that shorts the HX03s - no problem there - then you can put the bottom isolator into position 1 and again, there now exists a parallel path which should be carrying most of the current anyway, but even if not, there will be no appreciable voltage appearing across the contacts so no real chance of an arc.</p>
<p>(The worry with switching dc of course is the arc tends not to extinguish naturally, which an ac arc does every 10 ms as the current reverses every half cycle, so you tend to need arc chutes and magnets to draw the arc out to extinguish it. Typically, an ordinary switch will have a dc rating - if it has one at all - that is a small fraction of the ac rating.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31965"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/7515" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-7515.jpg" alt="KWells&#039;s picture" title="KWells&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/7515" title="View user profile.">KWells</a> on Mon, 06/07/2015 - 03:45.</div>
    <div class="content">
     <p>This problem is one reason why Enphase and Solar Edge micro-inverter systems rock. (i apologize this commentary doesn&#39;t add much to the circuit discussions) Determining the health of every panel on an array with multiple series strings is not simple, even more difficult to troubleshoot once a problem is suspected. For isolated DC voltage sensing the Avago ACPL-C870 Optically Isolated Voltage Sensor is really sweet. I&#39;ve used these to isolate sensing of DC bus voltages in inverters and 480V3P power supplies.</p>
<p>I think the DC current of your two strings is the easiest parameter to monitor the health of your array. The individual panel voltages on a long string can vary quite a bit while they operate at the same current due to temperature differences - panels put out different power levels right out of the box. One more reason why micro-inverters can be worth the extra cost, they MPPT each panel to their operating point. Have fun and always be careful.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31967"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3016" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3016" title="View user profile.">dBC</a> on Mon, 06/07/2015 - 04:10.</div>
    <div class="content">
     <p>I don&#39;t think SolarEdge do micro-inverters as such. &nbsp;Rather they have a power optimiser under each panel, which as you say does local MPTT and reporting, all of which is great for monitoring. &nbsp; The difference being it&#39;s still DC all the way to the one big inverter on the wall.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31968"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3426" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3426" title="View user profile.">Bill Thomson</a> on Mon, 06/07/2015 - 04:56.</div>
    <div class="content">
     <p><em>This problem is one reason why Enphase micro-inverter systems rock.</em></p>
<p>Along with the scalability they give you. i.e start small. and grow the system as time/budget allows.<br />
(I started with 4 Enphase micros, and now have 40 of them)</p>
<p>But, this thread <em><strong>has</strong></em> been a good read, and definitely worth knowing. Especially where safety is concerned.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31973"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Mon, 06/07/2015 - 22:05.</div>
    <div class="content">
     <p>Hi Guys</p>
<p>Back in 2011 when I was planning the installation of my 3.92kW 16 panel array I too was planning on using micro inverters (Enecsys) but due to delay problems with the supply from Enecsys AND the impending FIT&#39;s rate cut planned in December 2011 I had to take the series string inverter route.&nbsp; Incidentally, I&#39;m glad I did because Enecsys have recently gone into administration both here in the UK &amp; the USA, leaving their customers without any micro-inverter monitoring facility. At that time I did look at Enphase micro-inverters but decided Enecsys were a better choice.</p>
<p>I even planned my PV installation so that the 16No. micro-inverters would be situated in my attic space for ease of maintenance rather than outside on the roof; so that is how my current system is installed with all PV panel DC cables routed into th attic &amp; connected in series there.</p>
<p>Hence the reason for this topic; to be able to run some kind of monitoring of the 2 string array.&nbsp; It won&#39;t tell me which panel is under performing but it should tell me which string is.</p>
<p>In due course, when my current string inverter needs replacing I shall look again at fitting micro-inverters.</p>
<p>Glad you found it an interesting read &amp; I must thank Robert again for his advice &amp; patience (with a MechE!)</p>
<p>Attached is final schematic (I hope!)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32113"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Fri, 10/07/2015 - 22:07.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>Referring back to discussion on the Bypass &amp; Monitor switches, I thought I&#39;d try a visual method of showing the &#39;state&#39; of the switches using neon indicators to make sure everything <strong><em><u>was</u></em></strong> switched off &amp; safe before carrying out any work on the installation.</p>
<p>I&#39;ve attached a part schematic for your perusal &amp; comments.&nbsp; I think it looks OK but a second opinion would be useful before committing to my PV setup.</p>
<p>Would it be prudent to fit 500mA fuses in series with the neons in case of failure (shorting out) of any neon?</p>
<p>I intend testing this circuit using 5V DC &amp; temporarily substituting LED&#39;s in place of the neons to check visual output state of the changeover switches</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32115"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 10/07/2015 - 23:55.</div>
    <div class="content">
     <p>Your drafting program has a really weird way of drawing switches! I misread those first time round.</p>
<p>Neon 6 is the wrong side of the resistor R1 - there won't be enough voltage there to light it, but apart from that I can't see anything obviously wrong. As part of your operating procedure, you need to make sure that the neons are lit and unlit as expected both before you start and after you finish, else you are relying in part on a non-indication for safety. That's not good, even though you're only confirming the switch positions. I take it that both switches will operate in the same direction for normal use, i.e to the left or up for bypass in use, monitor isolated; and to the right or down for monitor in use</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32119"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Sat, 11/07/2015 - 11:55.</div>
    <div class="content">
     <p>It&#39;s not the drafting program that supplied the switch diagram but me since the program didn&#39;t have a suitable representation of my type of switch!</p>
<p>The switches are a rotary type slide switch ON-OFF-ON that came supplied with wire links to mimic a SPDT type switch so I created the switch diagram that best represents the changeover switch.</p>
<p>&quot;Neon 6 is the wrong side of the resistor R1 - there won&#39;t be enough voltage there to light it&quot; - well spotted</p>
<p>The idea behind the neon indicators is that if any one of the six is ON there is live 240V (AC or DC) present &amp; all 6 neons ON mean the system if fully operational &amp; <strong><em><u>LIVE</u></em></strong> but I take your point that all neons OFF shouldn&#39;t be indicative that all circuits are safe unless all relevant switches are visually OFF.&nbsp; I don&#39;t trust even circuit breakers for safety since they only break the live not neutral (the neon circuit tester comes in handy here!)</p>
<p>As mentioned in the notes on the schematic, both changeover switches in the 2 position means system is fully operational &amp; both in position 1 means LEM transducer box is out of PV circuit.</p>
<p>I intend to fully document the operational procedure for switching monitor in &amp; out of use next to the monitor &amp; SMA inverter in much the same way as the PV shutdown procedure is detailed at the relevant site locations (inverter &amp; consumer unit).&nbsp; Obviously, the &#39;0&#39; position on the changeover switches does not mean OFF in a safety sense but a mid point between positions 1 &amp; 2 (ON-ON); there is still PV DC voltage there from the PV isolator</p>
<p>Could I have your comment on the use of 500mA fuses in series with the neons, as mentioned in the previous post?</p>
<p>regards</p>
<p>Chris</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32120"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 11/07/2015 - 12:05.</div>
    <div class="content">
     <p>Sorry, I intended to add something about the fuses and forgot. </p>
<p>If the leads are short and contained wholly within the boxes, I wouldn't bother. The possibility of a fault is remote.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32181"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Mon, 13/07/2015 - 21:35.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>Am I understanding the voltage transducer LEM LV 25-P correctly?</p>
<p>Nominal voltage to be measured = 250V with an optimum primary current of 10mA&nbsp; gives a value for R1 of 250/0.01 = 25k&Omega;</p>
<p>Power rating of R1 = 0.01*0.01*25000 = 2.5W</p>
<p>For secondary Vc of +15V DC &amp; Rm max of 190&Omega; &amp; secondary nominal current of 25mA gives voltage measuring max of 0.025*190= 4.75V</p>
<p>1024 &#39;counts&#39; of the Arduino analogue input to measure 5V would be given by 1024*4.75/5 = 972.8 &#39;counts&#39; to measure 250V gives 3.89 &#39;counts&#39; per volt or 1 &#39;count&#39; = 0.26V</p>
<p>regards</p>
<p>Chris</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32186"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 13/07/2015 - 22:37.</div>
    <div class="content">
     <p>That all looks reasonably familiar. The series resistor is the value I first thought of, and everything follows from there looks right. </p>
<p>Clearly, because your resistors have tolerances and so does the transducer, and (if the transducer is ratiometric as I think it is) so does your power supply, you'll need to tweak the calibration in software (and this goes for the current channels too).</p>
<p>Bear in mind when commissioning that you need to check the polarity of the output before you connect it to the Arduino, because it can go to -4.75 V if you've got it wrong, and while the zener should catch it and hold it at -0.65 V or so, it's best not to push your luck and rely on the protection.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32191"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3208" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dominator99&#039;s picture" title="dominator99&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3208" title="View user profile.">dominator99</a> on Tue, 14/07/2015 - 15:27.</div>
    <div class="content">
     <p>Thanks for the info Robert</p>
<p>If you recall, I&#39;m not so much interested in wholly accurate values of currents but more in changes in the values of the currents from one of the 2 strings to indicate a problem with one of the strings, since both strings are operating under the same insolation (barring any shading issues). Similarly, voltage changes of around 1/8 (approx 30V)&nbsp; would indicate a problem with 1 of the 8 panels in either string (if strings are parallel wired at the inverter)</p>
<p>In a previous post you quoted:</p>
<p>&quot;<em>I don&#39;t know whether you noticed, but if you operate the switches in the correct sequence, it is possible to take the monitor in and out of circuit on load with no worries about the contact rating on dc, because there is either no current flowing or no (or very little) voltage as the switch opens because there&#39;s a parallel path. Putting the monitor in circuit, you close up the bottom isolator first (position 2) and the parallel path through HX03s makes the contacts of the upper isolator at nearly equal voltages, so that can be changed over without breaking the current flow and there is only a very small voltage appearing across the contacts so very little chance of a damaging arc.</em></p>
<p><em>Taking the monitor out of circuit is the reverse. Change over the top isolator first and that shorts the HX03s - no problem there - then you can put the bottom isolator into position 1 and again, there now exists a parallel path which should be carrying most of the current anyway, but even if not, there will be no appreciable voltage appearing across the contacts so no real chance of an arc.</em></p>
<p><em>(The worry with switching dc of course is the arc tends not to extinguish naturally, which an ac arc does every 10 ms as the current reverses every half cycle, so you tend to need arc chutes and magnets to draw the arc out to extinguish it. Typically, an ordinary switch will have a dc rating - if it has one at all - that is a small fraction of the ac rating.)</em>&quot;</p>
<p>Is it safe to assume that because of the above, the changeover switches I use are OK even though they don&#39;t officially have a DC rating?</p>
<p>These rotary switches appear, by their &#39;snap&#39; action, to be rapid make &amp; rapid break but I can&#39;t get a definitive answer on that.</p>
<p>It would appear to me that the safest use of these changeover switches is to switch them &#39;off load&#39; by switching the PV isolator OFF first.&nbsp; In fact, my PV shutdown procedure calls for the AC isolator to be switched OFF first before the PV DC isolator, hence there is no load on the DC isolator when it is switched OFF.</p>
<p>I&#39;ve read some discussions of manufacturers of DC switchgear which also discusses switch contact corrosion, inadequate &#39;wetting&#39; current &amp; subsequent overheating of the switch contacts.&nbsp; Would it be prudent to incorporate thermal &amp; smoke sensors within the changeover switch boxes that the Arduino could monitor, especially since the -ve current of each string will be passing through an extra 3 switch contacts before returning to the -ve contact of the PV DC isolator ? (bearing in mind the remote location of these switches in the attic), if so, could you suggest a suitable smoke sensor for the Uno?</p>
<p>regards</p>
<p>Chris</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32201"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: monitoring PV string voltage</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 14/07/2015 - 09:22.</div>
    <div class="content">
     <p>It's always a good idea to be working with accurate values if you can. If you don't calibrate and you're like me, one day you'll forget and treat the values as genuine. As you're more interested in the balance, you could wire the two current sensor in series on one string (temporarily) and adjust the calibration so that both read the same.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="/emon/node/10775"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-wB6jcGvoxPyvCCtSdo0UzGm3j_nLCTP2ifOqXoPnzMs" value="form-wB6jcGvoxPyvCCtSdo0UzGm3j_nLCTP2ifOqXoPnzMs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>

</html>
