<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5239 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:52:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emonhub sending to localhost grinds to a halt [SOLVED] | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emonhub sending to localhost grinds to a halt [SOLVED]</h3>
        <span class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Wed, 28/05/2014 - 19:22</span>
        <div class="content"><p>I&#39;m having trouble getting a fresh wheezy/&nbsp;emonhub setup to post data from emontxv3 to localhost/ emoncms v8.2.4 setup on the same raspberry pi. It starts off posting ok with the update time on the Node page showing ca. 6secs but after 2- 3 minutes the update time is very erratic. It jumps about between 7-8 secs to 190 secs&nbsp;and back and eventually &nbsp;stops altogether.&nbsp;</p>
<p>The values recorded seem to get out of sync as well. The realtime&nbsp;graph produced from a Wh&nbsp; feed jumps up and down instead of steadily&nbsp;increasing.</p>
<p>These problems are only occurring on my localhost emoncms. The same emonhub&nbsp;posting to emoncms.org carries on working faultlessly while the local one is stopped.</p>
<p>Can anybody help figure out what&#39;s causing this as I have tried everything I can think of.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5813.html" class="topic-previous" title="Go to previous forum topic">‹ Emoncms - Feed addition and subtraction</a>
              <a href="5564.html" class="topic-next" title="Go to next forum topic">Selection &quot; Power to Kwh/d &quot; ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-21657"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 29/05/2014 - 07:28.</div>
    <div class="content">
     <p>Interesting, of the two test systems we have here testing the emonhub, mine posting to emoncms.org has stable timing but Glyn&#39;s is showing this similar erratic timing posting to another emoncms instance (not local but not emoncms.org). Im not sure why that&#39;s happening at the moment.</p>
<p>Are you using this build guide? <a href="https://github.com/openenergymonitor/documentation/blob/master/Modules/RaspberryPI/Gateway/gateway.md" title="https://github.com/openenergymonitor/documentation/blob/master/Modules/RaspberryPI/Gateway/gateway.md">https://github.com/openenergymonitor/documentation/blob/master/Modules/R...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21658"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Thu, 29/05/2014 - 07:39.</div>
    <div class="content">
     <p>Yes I followed that guide to the letter except &nbsp;I&#39;m running rw on usb&nbsp;hdd.</p>
<p>I git pulled your latest updates this morning and temporarily disabled emonhub&nbsp;from posting to emoncms.org but the localhosts timing still turned unstable.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21667"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 29/05/2014 - 11:37.</div>
    <div class="content">
     <p>Been trying to test this this morning, I&#39;ve got another pi up and running posting to a local server, so far it seems to be quite stable. Regular 10s updates from the emontx as expected. Il leave it running for a while.</p>
<p>I made a change to emoncms on the 16th of May that is needed for correct timing <a href="https://github.com/emoncms/emoncms/commit/607079d289ab8af7a36a9f863595c3f63a703e84" title="https://github.com/emoncms/emoncms/commit/607079d289ab8af7a36a9f863595c3f63a703e84">https://github.com/emoncms/emoncms/commit/607079d289ab8af7a36a9f863595c3...</a>, is your local emoncms v 8.2 or more recent?</p>
<p>This still doesnt explain what is effecting Glyn&#39;s as the emoncms server his is posting to is v 8.2.4</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21685"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Thu, 29/05/2014 - 20:14.</div>
    <div class="content">
     <p>I&#39;m using v8.2.4 &nbsp;as well.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21688"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Thu, 29/05/2014 - 21:54.</div>
    <div class="content">
     <p>I &nbsp;have just taken out the V8.2.4 changes you linked to above and the local server seems to be behaving now.</p>
<p>&nbsp;</p>
<p>edit: &nbsp;The feeds are reporting as updated 2- 3 secs ago and figures look reasonable at the moment, I think, but the nodes have reverted to being 20mins behind and the message no. is jumping backwards and forwards again.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21701"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 30/05/2014 - 12:26.</div>
    <div class="content">
     <p>Since both your localhost and Glyn&#39;s are using v8.2.4 and have issues whilst both Trystans and your .org account&#39;s using v8.0.9 are ok the &quot;difference&quot; has to be within the changes made between v8.0.9 and v8.2.4.</p>
<p><a href="https://github.com/emoncms/emoncms/compare/8.0.9...8.2.4">https://github.com/emoncms/emoncms/compare/8.0.9...8.2.4</a></p>
<p>There are quite a few changes so unless something obvious can be spotted it maybe easier to git checkout the different versions to narrow the search to one revision or set of changes.</p>
<p>That&#39;s not to say&nbsp;emonCMS&nbsp;is necessarily at fault, but something that has changed causes a different result. once that change is found one or other can be modified to suit.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21706"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 30/05/2014 - 13:20.</div>
    <div class="content">
     <p>That&#39;s strange, Glyn&#39;s monitor is posting more regularly now as of early this morning, the system hasnt been changed in any way.</p>
<p>The test pi (forwarder-only) I setup yesterday is still posting regularly and being logged correctly in to emoncms v8.2.4 here on a test server in the lab.</p>
<p>The changes I made here <a href="https://github.com/emoncms/emoncms/commit/607079d289ab8af7a36a9f863595c3f63a703e84" title="https://github.com/emoncms/emoncms/commit/607079d289ab8af7a36a9f863595c3f63a703e84">https://github.com/emoncms/emoncms/commit/607079d289ab8af7a36a9f863595c3...</a> should actually improve the timing as it allows for the timing to be set by the raspberrypi rather than the packet receive time in emoncms. Without this change if you bulk upload several hours of data it will try and insert it all at one point in time rather than use the timing given by the raspberrypi.</p>
<p>Il keep investigating..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21707"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 30/05/2014 - 13:28.</div>
    <div class="content">
     <p>@nrgbod, It would be interesting to look at your emonhub log to see what the timing given to the packets are there.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21708"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 30/05/2014 - 13:45.</div>
    <div class="content">
     <p>If you could also pull in the latest version that would be great as it has an easier to read and debug log format for the bulk data.</p>
<p>Once logged in to the pi the steps are:</p>
<p>ipe-rw</p>
<p>cd emonhub</p>
<p>git pull</p>
<p>sudo service emonhub restart</p>
<p>ipe-ro</p>
<p>&nbsp;</p>
<p>To view the log</p>
<p>tail -f /var/log/emonhub.conf</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21710"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 30/05/2014 - 14:01.</div>
    <div class="content">
     <p><a href="https://github.com/TrystanLea/emonhub/tree/threading">https://github.com/TrystanLea/emonhub/tree/threading</a></p>
<p>Just added a link for anyone following the discussion and I think those steps should be rpi not ipe :-)</p>
<blockquote><p><strong>rpi-rw</strong></p>
<p>cd emonhub</p>
<p>git pull</p>
<p>sudo service emonhub restart</p>
<p><strong>rpi-ro</strong></p>
</blockquote>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21711"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 30/05/2014 - 14:06.</div>
    <div class="content">
     <p>I&#39;ve just added another improvement. I did have a time.sleep(5) in the dispatcher loop but thinking about it, its better to run the dispatcher on a &#39;timed&#39; basis: so rather than:</p>
<p>while 1:</p>
<p>&nbsp;&nbsp;&nbsp; # dispatch</p>
<p>&nbsp;&nbsp;&nbsp; time.sleep(5)</p>
<p>it now checks the time:</p>
<p>while 1:</p>
<p>&nbsp;&nbsp;&nbsp; if ((time.time() - lastposttime)&gt;5.0):</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lastposttime = time.time()</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # dispatch</p>
<p>&nbsp;&nbsp;&nbsp; time.sleep(0.1)</p>
<p>with the first method: say dispatching takes 2 seconds&nbsp; the next dispatch will be 7seconds from the start of the first dispatch. With the second method the 2nd dispatch will be happen at 5s as long as the dispatch time of the first is less than 5s.</p>
<p>I dont think this will fix the problem though because the actual packet timing is independent of this.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21712"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Fri, 30/05/2014 - 16:20.</div>
    <div class="content">
     <blockquote><p>There are quite a few changes so unless something obvious can be spotted it maybe easier to git checkout the different versions to narrow the search to one revision or set of changes.</p>
</blockquote>
<p>A bit off-topic: git has a &quot;git bisect&quot; command that does the checkouts until the guilty commit is found.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21715"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Fri, 30/05/2014 - 18:12.</div>
    <div class="content">
     <p>I pulled in the latest changes to emonhub but the local server nodes page update times are still slowing down and jumping about. The message numbers are also jumping backwards and forwards on the nodes page, or is that a result of buffering?</p>
<p>I previously thought the times on the feeds page looked normal at 4- 5 secs but now they are matching the nodes page more or less.</p>
<p>Attached are some screenshots of log outputs with emonhub only posting to the local server. ie. with remote server sending disabled in&nbsp; emonhubnode.conf</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21767"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Mon, 02/06/2014 - 15:50.</div>
    <div class="content">
     <p>Over the weekend I reinstalled the software to another HDD. This time I used Trystans Emonhub/ raspberry image and installed the latest emoncms (v8.2.4) via git.</p>
<p>The ever increasing node times where still happening so I updated to the latest Emonhub version on Trystans Git page.</p>
<p>This time I could see the local host buffering being recorded in the emonhub.log when I first fired up the new version. Then after about 40 minutes the log recorded the buffer had reached it&#39;s 1000 item limit and items where being discarded (see screenshots). The buffer reaching it&#39;s limit coincided with when the nodes page stopped updating.</p>
<p>Is the Emonhub forwarder meant to be able to forward from the same machine it&#39;s forwarding to? ie. I&#39;m running Emonhub on my localhost rpi forwarding to emoncms also on my localhost rpi.</p>
<p>Also is emonhub.conf not used? Trystans instructions only detail modifying emonhubnode.conf</p>
<p>My emonhubnode.conf file contents......</p>
<p>####################<br />
	# Hub settings #<br />
	####################<br />
	[hub]</p>
<p># log file path<br />
	logfile = /var/log/emonhub/emonhub.log</p>
<p># loglevel must be one of DEBUG, INFO, WARNING, ERROR, and CRITICAL<br />
	# see here : <a href="http://docs.python.org/2/library/logging.html" title="http://docs.python.org/2/library/logging.html">http://docs.python.org/2/library/logging.html</a><br />
	loglevel = DEBUG</p>
<p>
	#############<br />
	# Listeners #<br />
	#############<br />
	[listeners]</p>
<p># This listener manages the RFM2Pi module<br />
	[[RFM2Pi]]<br />
	&nbsp;&nbsp;&nbsp; type = EmonHubRFM2PiListener<br />
	&nbsp;&nbsp;&nbsp; [[[init_settings]]]<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; com_port = /dev/ttyAMA0<br />
	&nbsp;&nbsp;&nbsp; [[[runtime_settings]]]<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sgroup = 210<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; frequency = 4<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; baseid = 15<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sendtimeinterval = 0<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; defaultDecoding = byte</p>
<p># This listener gets data from a socket<br />
	[[Socket]]<br />
	&nbsp;&nbsp;&nbsp; type = EmonHubSocketListener<br />
	&nbsp;&nbsp;&nbsp; [[[init_settings]]]<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; port_nb = 50011<br />
	&nbsp;&nbsp;&nbsp; [[[runtime_settings]]]</p>
<p>###############<br />
	# Dispatchers #<br />
	###############<br />
	[dispatchers]</p>
<p># The two following dispatchers instantiate the same class,<br />
	# that formats the data for an emoncms instance.<br />
	# One sends the data to a local instance, the other one<br />
	# to a distant one.<br />
	# If active is set to False, the dispatcher neither records nor sends any data,<br />
	# but it buffers unsent data until active becomes True.</p>
<p>[[emoncms_local]]<br />
	&nbsp;&nbsp;&nbsp; type = EmonHubEmoncmsDispatcher<br />
	&nbsp;&nbsp;&nbsp; [[[init_settings]]]<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bufferMethod = memory<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bufferSize = 1000<br />
	&nbsp;&nbsp;&nbsp; [[[runtime_settings]]]<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; url = <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; interface = /node/multiple<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; apikey =xxxxxxxxxxxxxxxxxxxxxxxxxxxx<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; active = True<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxItemsPerPost = 100</p>
<p>[[emoncms_remote]]<br />
	&nbsp;&nbsp;&nbsp; type = EmonHubEmoncmsDispatcher<br />
	&nbsp;&nbsp;&nbsp; [[[init_settings]]]<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bufferMethod = memory<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bufferSize = 1000<br />
	&nbsp;&nbsp;&nbsp; [[[runtime_settings]]]<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; url = <a href="http://emoncms.org/" title="http://emoncms.org">http://emoncms.org</a><br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; interface = /node/multiple<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; apikey = xxxxxxxxxxxxxxxxxxxxxxxxxxxxx<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; active = True<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxItemsPerPost = 100</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21773"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 02/06/2014 - 22:32.</div>
    <div class="content">
     <p>@ngbod, thanks for the info on the logs. that suggests that emonhub cant reach or isnt getting the right reply from emoncms. I wonder if there&#39;s some error in the reply from emoncms. Do you see this line in the logs:</p>
<p>Send failure: wanted &#39;ok&#39; but got ...</p>
<p>If you do what does it say it got?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21789"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Tue, 03/06/2014 - 12:41.</div>
    <div class="content">
     <p>Thanks for helping Trystan, I have been seeing the send failure message all along but the reason has always&nbsp;been &nbsp;empty. &nbsp;Send failure: wanted &#39;ok&#39; but got &nbsp;&quot;blank&quot;</p>
<p>2014-05-31 14:03:42,653 DEBUG Append item to buffer: <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a>, time: 1401541420, data: [33, 0, 0, 0, 0, 0, ,0,0,0,0,0,0,0,0],[1401540243,10,254,35,1,0,180,255,248,3,180,2,0,0,214,48,0,0,78,3,0,0,202,63,0,0,75,0,0,0,255,33,0,0,239,81,0,0,25,33,0,0,0,0,0,0,0,0,0,0],0,0,0,0,0,0],[1401540259,10,6,36,1,0,173,255,247,3,172,2,0,0,214,48,0,0,78,3,0,0,207,63,0,0,75,0,0,0,2,34,0,0,241,81,0,0,27,33,0,0,0,0,0,0,0,0,0,0],,0,0,0,0,0,0],[1401540274,19,200,10,14,6,95,7]]&amp;sentat=1401541422<br />
	2014-05-31 14:03:43,084 WARNING Send failure: wanted &#39;ok&#39; but got<br />
	2014-05-31 14:03:44,162 INFO Serial RX:&nbsp; 10 75 38 1 0 175 255 249 3 83 2 0 0 214 48 0 0 104 3 0 0 252 64 0 0 75 0 0 0 192 34 0 08 1 0 177 255 250 3 83 2 0 0 214 48 0 0 104 3 0 0 253 64 0 0 75 0 0 0 192 34 0 0 123 82 0 0 165 33 0 0 0 0 0 0 0 0 0 0<br />
	2014-05-31 14:03:44,178 DEBUG Node: 10</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21797"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 03/06/2014 - 16:33.</div>
    <div class="content">
     <p>It seems like there is some strange going on there, your data is very long and seems to have an incorrect pattern of brackets:</p>
<p>[1401540259,10,6,36,1,0,173,255,247,3,172,2,0,0,214,48,0,0,78,3,0,0,207,63,0,0,75,0,0,0,2,34,0,0,241,81,0,0,27,33,0,0,0,0,0,0,0,0,0,0<strong>],,0,0,0,0,0,0]</strong></p>
<p>That could be causing the reply to be false.. rather than true. I wonder if its combining packets into one line.</p>
<p>How fast are the radio packets coming in?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21798"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 03/06/2014 - 16:38.</div>
    <div class="content">
     <p>Looking at your logs above, it looks like there could be data coming in every 0.6 of a millisecond or am I reading incorrectly?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21800"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Tue, 03/06/2014 - 19:08.</div>
    <div class="content">
     <p>Sorry, I deleted a few lines in the middle to condense the post down. Here&#39;s the full section of log as it should have read....</p>
<p><span style="font-size: 12px;">2014-05-31 14:03:42,673 INFO Sending: http://</span>localhost<span style="font-size: 12px;">/</span>emoncms<span style="font-size: 12px;">/node/multiple | data=[[1401540144,10,203,35,1,0,172,255,249,3,174,2,0,0,214,48,0,0,76,3,0,0,173,63,0,0,75,0,0,0,235,33,0,0,228,81,0,0,14,33,0,0,0,0,0,0,0,0,0,0],[1401540145,10,204,35,1,0,175,255,247,3,178,2,0,0,214,48,0,0,76,3,0,0,174,63,0,0,75,0,0,0,236,33,0,0,228,81,0,0,14,33,0,0,0,0,0,0,0,0,0,0],[1401540145,19,200,10,32,6,114,7],[1401540145,10,205,35,1,0,175,255,247,3,176,2,0,0,214,48,0,0,76,3,0,0,174,63,0,0,75,0,0,0,236,33,0,0,228,81,0,0,14,33,0,0,0,0,0,0,0,0,0,0],[1401540147,10,206,35,1,0,173,255,248,3,173,2,0,0,214,48,0,0,76,3,0,0,175,63,0,0,75,0,0,0,237,33,0,0,228,81,0,0,14,33,0,0,0,0,0,0,0,0,0,0],[1401540149,10,207,35,1,0,175,255,246,3,171,2,0,0,214,48,0,0,76,3,0,0,176,63,0,0,75,0,0,0,237,33,0,0,229,81,0,0,15,33,0,0,0,0,0,0,0,0,0,0],[1401540150,19,200,10,26,6,114,7],[1401540151,10,208,35,1,0,173,255,250,3,174,2,0,0,214,48,0,0,76,3,0,0,176,63,0,0,75,0,0,0,237,33,0,0,229,81,0,0,15,33,0,0,0,0,0,0,0,0,0,0],[1401540153,10,209,35,1,0,176,255,251,3,177,2,0,0,214,48,0,0,76,3,0,0,177,63,0,0,75,0,0,0,238,33,0,0,229,81,0,0,15,33,0,0,0,0,0,0,0,0,0,0],[1401540155,10,210,35,1,0,176,255,249,3,174,2,0,0,214,48,0,0,76,3,0,0,177,63,0,0,75,0,0,0,238,33,0,0,229,81,0,0,15,33,0,0,0,0,0,0,0,0,0,0],[1401540155,18,47,10,114,8,15,11,163,27,215,11,249,23],[1401540156,19,200,10,26,6,120,7],[1401540157,10,211,35,1,0,176,255,249,3,170,2,0,0,214,48,0,0,76,3,0,0,178,63,0,0,75,0,0,0,239,33,0,0,229,81,0,0,15,33,0,0,0,0,0,0,0,0,0,0],[1401540161,10,213,35,1,0,173,255,249,3,173,2,0,0,214,48,0,0,76,3,0,0,179,63,0,0,75,0,0,0,239,33,0,0,230,81,0,0,16,33,0,0,0,0,0,0,0,0,0,0],[1401540163,10,214,35,1,0,172,255,252,3,174,2,0,0,214,48,0,0,76,3,0,0,180,63,0,0,75,0,0,0,240,33,0,0,230,81,0,0,16,33,0,0,0,0,0,0,0,0,0,0],[1401540165,10,215,35,1,0,172,255,249,3,172,2,0,0,214,48,0,0,76,3,0,0,180,63,0,0,75,0,0,0,240,33,0,0,230,81,0,0,16,33,0,0,0,0,0,0,0,0,0,0],[1401540167,19,200,10,20,6,120,7],[1401540167,10,216,35,1,0,174,255,250,3,169,2,0,0,214,48,0,0,76,3,0,0,181,63,0,0,75,0,0,0,240,33,0,0,231,81,0,0,17,33,0,0,0,0,0,0,0,0,0,0],[1401540169,10,217,35,1,0,173,255,250,3,174,2,0,0,214,48,0,0,76,3,0,0,181,63,0,0,75,0,0,0,241,33,0,0,230,81,0,0,16,33,0,0,0,0,0,0,0,0,0,0],[1401540169,10,218,35,1,0,173,255,250,3,174,2,0,0,214,48,0,0,76,3,0,0,181,63,0,0,75,0,0,0,241,33,0,0,230,81,0,0,16,33,0,0,0,0,0,0,0,0,0,0],[1401540171,10,218,35,1,0,176,255,250,3,169,2,0,0,214,48,0,0,76,3,0,0,182,63,0,0,75,0,0,0,241,33,0,0,231,81,0,0,17,33,0,0,0,0,0,0,0,0,0,0],[1401540172,19,200,10,26,6,120,7],[1401540173,10,219,35,1,0,172,255,251,3,179,2,0,0,214,48,0,0,76,3,0,0,182,63,0,0,75,0,0,0,242,33,0,0,230,81,0,0,16,33,0,0,0,0,0,0,0,0,0,0],[1401540175,10,220,35,1,0,172,255,251,3,180,2,0,0,214,48,0,0,76,3,0,0,183,63,0,0,75,0,0,0,242,33,0,0,231,81,0,0,17,33,0,0,0,0,0,0,0,0,0,0],[1401540177,10,221,35,1,0,177,255,251,3,178,2,0,0,214,48,0,0,76,3,0,0,184,63,0,0,75,0,0,0,242,33,0,0,232,81,0,0,18,33,0,0,0,0,0,0,0,0,0,0],[1401540178,19,200,10,32,6,120,7],[1401540179,10,222,35,1,0,176,255,251,3,141,2,0,0,214,48,0,0,77,3,0,0,184,63,0,0,75,0,0,0,243,33,0,0,232,81,0,0,18,33,0,0,0,0,0,0,0,0,0,0],[1401540179,10,223,35,1,0,176,255,251,3,141,2,0,0,214,48,0,0,77,3,0,0,184,63,0,0,75,0,0,0,243,33,0,0,232,81,0,0,18,33,0,0,0,0,0,0,0,0,0,0],[1401540181,10,223,35,1,0,174,255,250,3,117,2,0,0,214,48,0,0,77,3,0,0,185,63,0,0,75,0,0,0,243,33,0,0,233,81,0,0,19,33,0,0,0,0,0,0,0,0,0,0],[1401540183,10,224,35,1,0,174,255,249,3,168,2,0,0,214,48,0,0,77,3,0,0,185,63,0,0,75,0,0,0,243,33,0,0,233,81,0,0,19,33,0,0,0,0,0,0,0,0,0,0],[1401540184,19,200,10,26,6,120,7],[1401540185,10,225,35,1,0,176,255,251,3,177,2,0,0,214,48,0,0,77,3,0,0,186,63,0,0,75,0,0,0,244,33,0,0,233,81,0,0,19,33,0,0,0,0,0,0,0,0,0,0],[1401540187,10,226,35,1,0,173,255,253,3,181,2,0,0,214,48,0,0,77,3,0,0,186,63,0,0,75,0,0,0,244,33,0,0,233,81,0,0,19,33,0,0,0,0,0,0,0,0,0,0],[1401540189,10,227,35,1,0,172,255,252,3,177,2,0,0,214,48,0,0,77,3,0,0,187,63,0,0,75,0,0,0,245,33,0,0,233,81,0,0,19,33,0,0,0,0,0,0,0,0,0,0],[1401540189,10,228,35,1,0,172,255,252,3,177,2,0,0,214,48,0,0,77,3,0,0,187,63,0,0,75,0,0,0,245,33,0,0,233,81,0,0,19,33,0,0,0,0,0,0,0,0,0,0],[1401540191,10,228,35,1,0,178,255,251,3,183,2,0,0,214,48,0,0,77,3,0,0,188,63,0,0,75,0,0,0,245,33,0,0,234,81,0,0,20,33,0,0,0,0,0,0,0,0,0,0],[1401540193,10,229,35,1,0,174,255,251,3,181,2,0,0,214,48,0,0,77,3,0,0,188,63,0,0,75,0,0,0,245,33,0,0,234,81,0,0,20,33,0,0,0,0,0,0,0,0,0,0],[1401540195,19,200,10,26,6,114,7],[1401540195,10,230,35,1,0,173,255,251,3,179,2,0,0,214,48,0,0,77,3,0,0,189,63,0,0,75,0,0,0,246,33,0,0,234,81,0,0,20,33,0,0,0,0,0,0,0,0,0,0],[1401540197,10,231,35,1,0,173,255,251,3,170,2,0,0,214,48,0,0,77,3,0,0,189,63,0,0,75,0,0,0,246,33,0,0,234,81,0,0,20,33,0,0,0,0,0,0,0,0,0,0],[1401540199,10,232,35,1,0,174,255,250,3,117,2,0,0,214,48,0,0,77,3,0,0,190,63,0,0,75,0,0,0,246,33,0,0,235,81,0,0,21,33,0,0,0,0,0,0,0,0,0,0],[1401540199,10,233,35,1,0,174,255,250,3,117,2,0,0,214,48,0,0,77,3,0,0,190,63,0,0,75,0,0,0,246,33,0,0,235,81,0,0,21,33,0,0,0,0,0,0,0,0,0,0],[1401540201,19,200,10,20,6,108,7],[1401540201,10,233,35,1,0,172,255,250,3,138,2,0,0,214,48,0,0,77,3,0,0,190,63,0,0,75,0,0,0,247,33,0,0,234,81,0,0,20,33,0,0,0,0,0,0,0,0,0,0],[1401540203,10,234,35,1,0,174,255,252,3,181,2,0,0,214,48,0,0,77,3,0,0,191,63,0,0,75,0,0,0,247,33,0,0,235,81,0,0,21,33,0,0,0,0,0,0,0,0,0,0],[1401540205,10,235,35,1,0,174,255,251,3,187,2,0,0,214,48,0,0,77,3,0,0,191,63,0,0,75,0,0,0,248,33,0,0,234,81,0,0,20,33,0,0,0,0,0,0,0,0,0,0],[1401540206,19,200,10,26,6,101,7],[1401540207,10,236,35,1,0,179,255,252,3,182,2,0,0,214,48,0,0,77,3,0,0,192,63,0,0,75,0,0,0,248,33,0,0,235,81,0,0,21,33,0,0,0,0,0,0,0,0,0,0],[1401540209,10,237,35,1,0,177,255,251,3,181,2,0,0,214,48,0,0,77,3,0,0,193,63,0,0,75,0,0,0,248,33,0,0,236,81,0,0,22,33,0,0,0,0,0,0,0,0,0,0],[1401540209,10,238,35,1,0,177,255,251,3,181,2,0,0,214,48,0,0,77,3,0,0,193,63,0,0,75,0,0,0,248,33,0,0,236,81,0,0,22,33,0,0,0,0,0,0,0,0,0,0],[1401540211,10,238,35,1,0,173,255,252,3,182,2,0,0,214,48,0,0,77,3,0,0,193,63,0,0,75,0,0,0,249,33,0,0,235,81,0,0,21,33,0,0,0,0,0,0,0,0,0,0],[1401540212,19,200,10,26,6,101,7],[1401540213,10,239,35,1,0,176,255,251,3,182,2,0,0,214,48,0,0,77,3,0,0,194,63,0,0,75,0,0,0,249,33,0,0,236,81,0,0,22,33,0,0,0,0,0,0,0,0,0,0],[1401540215,10,240,35,1,0,175,255,252,3,181,2,0,0,214,48,0,0,77,3,0,0,194,63,0,0,75,0,0,0,250,33,0,0,235,81,0,0,21,33,0,0,0,0,0,0,0,0,0,0],[1401540217,10,241,35,1,0,175,255,251,3,176,2,0,0,214,48,0,0,77,3,0,0,195,63,0,0,75,0,0,0,250,33,0,0,236,81,0,0,22,33,0,0,0,0,0,0,0,0,0,0],[1401540217,19,200,10,26,6,95,7],[1401540218,18,47,10,120,8,15,11,169,27,221,11,255,23],[1401540219,10,242,35,1,0,176,255,251,3,173,2,0,0,214,48,0,0,77,3,0,0,195,63,0,0,75,0,0,0,250,33,0,0,236,81,0,0,22,33,0,0,0,0,0,0,0,0,0,0],[1401540219,10,243,35,1,0,176,255,251,3,173,2,0,0,214,48,0,0,77,3,0,0,195,63,0,0,75,0,0,0,250,33,0,0,236,81,0,0,22,33,0,0,0,0,0,0,0,0,0,0],[1401540221,10,243,35,1,0,175,255,250,3,178,2,0,0,214,48,0,0,77,3,0,0,196,63,0,0,75,0,0,0,251,33,0,0,236,81,0,0,22,33,0,0,0,0,0,0,0,0,0,0],[1401540223,10,244,35,1,0,173,255,252,3,177,2,0,0,214,48,0,0,78,3,0,0,197,63,0,0,75,0,0,0,251,33,0,0,238,81,0,0,24,33,0,0,0,0,0,0,0,0,0,0],[1401540223,19,200,10,20,6,95,7],[1401540225,10,245,35,1,0,180,255,253,3,176,2,0,0,214,48,0,0,78,3,0,0,197,63,0,0,75,0,0,0,251,33,0,0,238,81,0,0,24,33,0,0,0,0,0,0,0,0,0,0],[1401540227,10,246,35,1,0,177,255,250,3,176,2,0,0,214,48,0,0,78,3,0,0,198,63,0,0,75,0,0,0,252,33,0,0,238,81,0,0,24,33,0,0,0,0,0,0,0,0,0,0],[1401540229,19,200,10,20,6,95,7],[1401540229,10,247,35,1,0,172,255,251,3,176,2,0,0,214,48,0,0,78,3,0,0,198,63,0,0,75,0,0,0,252,33,0,0,238,81,0,0,24,33,0,0,0,0,0,0,0,0,0,0],[1401540230,10,248,35,1,0,176,255,251,3,176,2,0,0,214,48,0,0,78,3,0,0,198,63,0,0,75,0,0,0,252,33,0,0,238,81,0,0,24,33,0,0,0,0,0,0,0,0,0,0],[1401540231,10,248,35,1,0,176,255,247,3,179,2,0,0,214,48,0,0,78,3,0,0,199,63,0,0,75,0,0,0,253,33,0,0,238,81,0,0,24,33,0,0,0,0,0,0,0,0,0,0],[1401540233,10,249,35,1,0,174,255,250,3,173,2,0,0,214,48,0,0,78,3,0,0,199,63,0,0,75,0,0,0,253,33,0,0,238,81,0,0,24,33,0,0,0,0,0,0,0,0,0,0],[1401540235,19,200,10,14,6,95,7],[1401540235,10,250,35,1,0,175,255,249,3,175,2,0,0,214,48,0,0,78,3,0,0,200,63,0,0,75,0,0,0,253,33,0,0,239,81,0,0,25,33,0,0,0,0,0,0,0,0,0,0],[1401540237,10,251,35,1,0,174,255,250,3,174,2,0,0,214,48,0,0,78,3,0,0,201,63,0,0,75,0,0,0,254,33,0,0,239,81,0,0,25,33,0,0,0,0,0,0,0,0,0,0],[1401540239,10,252,35,1,0,173,255,249,3,177,2,0,0,214,48,0,0,78,3,0,0,201,63,0,0,75,0,0,0,254,33,0,0,239,81,0,0,25,33,0,0,0,0,0,0,0,0,0,0],[1401540240,10,253,35,1,0,173,255,249,3,177,2,0,0,214,48,0,0,78,3,0,0,201,63,0,0,75,0,0,0,254,33,0,0,239,81,0,0,25,33,0,0,0,0,0,0,0,0,0,0],[1401540240,19,200,10,20,6,95,7],[1401540241,10,253,35,1,0,173,255,247,3,171,2,0,0,214,48,0,0,78,3,0,0,202,63,0,0,75,0,0,0,254,33,0,0,240,81,0,0,26,33,0,0,0,0,0,0,0,0,0,0],[1401540243,10,254,35,1,0,180,255,248,3,180,2,0,0,214,48,0,0,78,3,0,0,202,63,0,0,75,0,0,0,255,33,0,0,239,81,0,0,25,33,0,0,0,0,0,0,0,0,0,0],[1401540245,10,255,35,1,0,177,255,248,3,170,2,0,0,214,48,0,0,78,3,0,0,203,63,0,0,75,0,0,0,255,33,0,0,240,81,0,0,26,33,0,0,0,0,0,0,0,0,0,0],[1401540246,19,200,10,20,6,95,7],[1401540247,10,0,36,1,0,175,255,248,3,170,2,0,0,214,48,0,0,78,3,0,0,203,63,0,0,75,0,0,0,0,34,0,0,239,81,0,0,25,33,0,0,0,0,0,0,0,0,0,0],[1401540249,10,1,36,1,0,173,255,249,3,173,2,0,0,214,48,0,0,78,3,0,0,204,63,0,0,75,0,0,0,0,34,0,0,240,81,0,0,26,33,0,0,0,0,0,0,0,0,0,0],[1401540250,10,2,36,1,0,172,255,249,3,173,2,0,0,214,48,0,0,78,3,0,0,204,63,0,0,75,0,0,0,0,34,0,0,240,81,0,0,26,33,0,0,0,0,0,0,0,0,0,0],[1401540251,10,2,36,1,0,172,255,247,3,171,2,0,0,214,48,0,0,78,3,0,0,204,63,0,0,75,0,0,0,0,34,0,0,240,81,0,0,26,33,0,0,0,0,0,0,0,0,0,0],[1401540253,10,3,36,1,0,173,255,247,3,173,2,0,0,214,48,0,0,78,3,0,0,205,63,0,0,75,0,0,0,1,34,0,0,240,81,0,0,26,33,0,0,0,0,0,0,0,0,0,0],[1401540255,10,4,36,1,0,174,255,245,3,178,2,0,0,214,48,0,0,78,3,0,0,206,63,0,0,75,0,0,0,1,34,0,0,241,81,0,0,27,33,0,0,0,0,0,0,0,0,0,0],[1401540257,19,200,10,14,6,95,7],[1401540257,10,5,36,1,0,177,255,248,3,176,2,0,0,214,48,0,0,78,3,0,0,206,63,0,0,75,0,0,0,2,34,0,0,240,81,0,0,26,33,0,0,0,0,0,0,0,0,0,0],[1401540259,10,6,36,1,0,173,255,247,3,172,2,0,0,214,48,0,0,78,3,0,0,207,63,0,0,75,0,0,0,2,34,0,0,241,81,0,0,27,33,0,0,0,0,0,0,0,0,0,0],[1401540260,10,7,36,1,0,175,255,247,3,172,2,0,0,214,48,0,0,78,3,0,0,207,63,0,0,75,0,0,0,2,34,0,0,241,81,0,0,27,33,0,0,0,0,0,0,0,0,0,0],[1401540261,10,7,36,1,0,175,255,245,3,170,2,0,0,214,48,0,0,78,3,0,0,207,63,0,0,75,0,0,0,2,34,0,0,241,81,0,0,27,33,0,0,0,0,0,0,0,0,0,0],[1401540263,19,200,10,14,6,95,7],[1401540263,10,8,36,1,0,173,255,244,3,172,2,0,0,214,48,0,0,78,3,0,0,208,63,0,0,75,0,0,0,3,34,0,0,241,81,0,0,27,33,0,0,0,0,0,0,0,0,0,0],[1401540265,10,9,36,1,0,175,255,245,3,171,2,0,0,214,48,0,0,78,3,0,0,208,63,0,0,75,0,0,0,3,34,0,0,241,81,0,0,27,33,0,0,0,0,0,0,0,0,0,0],[1401540267,10,10,36,1,0,174,255,243,3,177,2,0,0,214,48,0,0,79,3,0,0,209,63,0,0,75,0,0,0,3,34,0,0,243,81,0,0,29,33,0,0,0,0,0,0,0,0,0,0],[1401540268,19,200,10,14,6,101,7],[1401540269,10,11,36,1,0,178,255,244,3,173,2,0,0,214,48,0,0,79,3,0,0,210,63,0,0,75,0,0,0,4,34,0,0,243,81,0,0,29,33,0,0,0,0,0,0,0,0,0,0],[1401540270,10,12,36,1,0,173,255,244,3,173,2,0,0,214,48,0,0,79,3,0,0,210,63,0,0,75,0,0,0,4,34,0,0,243,81,0,0,29,33,0,0,0,0,0,0,0,0,0,0],[1401540271,10,12,36,1,0,173,255,242,3,168,2,0,0,214,48,0,0,79,3,0,0,210,63,0,0,75,0,0,0,4,34,0,0,243,81,0,0,29,33,0,0,0,0,0,0,0,0,0,0],[1401540273,10,13,36,1,0,175,255,242,3,174,2,0,0,214,48,0,0,79,3,0,0,211,63,0,0,75,0,0,0,5,34,0,0,243,81,0,0,29,33,0,0,0,0,0,0,0,0,0,0],[1401540274,19,200,10,14,6,95,7]]&amp;</span>sentat<span style="font-size: 12px;">=1401541422</span></p>
<p>2014-05-31 14:03:43,084 WARNING Send failure: wanted &#39;ok&#39; but got<br />
	2014-05-31 14:03:44,162 INFO Serial RX:&nbsp; 10 75 38 1 0 175 255 249 3 83 2 0 0 214 48 0 0 104 3 0 0 252 64 0 0 75 0 0 0 192 34 0 08 1 0 177 255 250 3 83 2 0 0 214 48 0 0 104 3 0 0 253 64 0 0 75 0 0 0 192 34 0 0 123 82 0 0 165 33 0 0 0 0 0 0 0 0 0 0<br />
	2014-05-31 14:03:44,178 DEBUG Node: 10</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21801"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 03/06/2014 - 20:23.</div>
    <div class="content">
     <p>Aha, I now realise why it was giving a blank reply for got, I&#39;ve just fixed it, If you pull the latest change and try restarting emonhub it should give some information on the errors</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21802"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Tue, 03/06/2014 - 21:46.</div>
    <div class="content">
     <p>Pulled the changes but this is all the log is producing now.....</p>
<p>2014-06-03 22:14:30,226 DEBUG Opening socket on port 50011<br />
	2014-06-03 22:40:00,368 DEBUG SIGINT received.<br />
	2014-06-03 22:40:00,372 DEBUG Closing serial port<br />
	2014-06-03 22:40:00,375 DEBUG Closing socket<br />
	2014-06-03 22:40:00,377 INFO Exiting hub...<br />
	2014-06-03 22:40:02,366 INFO Logging level set to DEBUG<br />
	2014-06-03 22:40:02,369 INFO EmonHub v1.0.0<br />
	2014-06-03 22:40:02,371 INFO Opening hub...<br />
	2014-06-03 22:40:02,374 INFO Creating dispatcher emoncms_local<br />
	2014-06-03 22:40:02,381 INFO Set up dispatcher &#39;emoncms_local&#39; (buffer: memory)<br />
	2014-06-03 22:40:02,383 INFO Creating dispatcher emoncms_remote<br />
	2014-06-03 22:40:02,389 INFO Set up dispatcher &#39;emoncms_remote&#39; (buffer: memory)<br />
	2014-06-03 22:40:02,392 INFO Creating listener RFM2Pi<br />
	2014-06-03 22:40:02,395 DEBUG Opening serial port: /dev/ttyAMA0<br />
	2014-06-03 22:40:02,399 INFO Setting send time interval to 0<br />
	2014-06-03 22:40:02,402 INFO Setting RFM2Pi | frequency: 4<br />
	2014-06-03 22:40:03,406 INFO Setting RFM2Pi | sgroup: 210<br />
	2014-06-03 22:40:04,409 INFO Setting RFM2Pi | baseid: 15<br />
	2014-06-03 22:40:05,413 INFO Setting defaultDecoding to byte<br />
	2014-06-03 22:40:05,415 INFO Creating listener Socket<br />
	2014-06-03 22:40:05,418 DEBUG Opening socket on port 50011</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21803"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 03/06/2014 - 22:07.</div>
    <div class="content">
     <p>might be worth restarting it again, it looks like the rfm12pi isnt responding, if restarting it doesnt work try pulling out and re-inserting the rfm12pi then restarting emonhub again,</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21816"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Wed, 04/06/2014 - 19:29.</div>
    <div class="content">
     <p>After restarting I got the undefined offset error the same as below.</p>
<p>I then&nbsp;decided to reinstall everything from an image I saved when I very first set the system up last time ie.with blank databases before I started logging. &nbsp;Low and behold this ran perfectly, error free for about five hours.</p>
<p><span style="font-size: 12px;">Thinking the problem was solved I tried to reinstall again from the same image but this time the undefined offset errors returned and the localhost system stopped within 20 minutes, but as usual the emoncms.org postings carried on without problems.</span></p>
<p><span style="font-size: 12px;">The undefined offset lines below where repeated hundreds of times so I&#39;ve taken most of them out to stop the post being too long.</span></p>
<p>2014-06-04 19:56:33,487 WARNING Send failure: wanted &#39;ok&#39; but got &lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 48 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;166&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 9 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;157&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 10 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;157&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 11 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;157&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 48 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;166&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 49 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;166&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 50 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;166&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 51 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;166&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 52 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;166&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 53 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;166&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 54 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;166&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Notice&lt;/b&gt;:&nbsp; Undefined offset: 55 in &lt;b&gt;/var/www/emoncms/Modules/node/node_model.php&lt;/b&gt; on line &lt;b&gt;166&lt;/b&gt;&lt;br /&gt;<br />
	&lt;br /&gt;<br />
	&lt;b&gt;Warning&lt;/b&gt;:&nbsp; Cannot modify header information - headers already sent by (output started at</p>
<p>/var/www/emoncms/Modules/node/node_model.php:166) in &lt;b&gt;/var/www/emoncms/index.php&lt;/b&gt; on line &lt;b&gt;131&lt;/b&gt;&lt;br /&gt;<br />
	true</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21821"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 04/06/2014 - 21:32.</div>
    <div class="content">
     <p>Fantastic, I think this explains the reason why this only affected particular configurations and not others! and why emoncms.org works and not the local install..</p>
<p>The error is caused by the decoder specification in the nodes module being longer than the number of bytes received for that node. Ie if a node is sending 4 integers but the decoder has 6 integers set then that causes this bug, which I should really catch rather than leaving it to happen - I will fix that.</p>
<p>The error does not appear in the emoncms.org output because of the way there is a redis worker queue between the HTTP api and the processing of the data.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21822"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 04/06/2014 - 22:00.</div>
    <div class="content">
     <p>Ok fix implemented version is now: 8.2.6</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21829"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Thu, 05/06/2014 - 07:46.</div>
    <div class="content">
     <p>Trystan, thanks for the quick response. I&#39;ve had V8.2.6 running for a couple of hours now and all seems well my local server is matching the emoncms.org version exactly and the logs are error free.</p>
<p>OT but could you add the fix for the kWh to kWhd processor not updating to the emoncms.org version. I don&#39;t think it restarts on v809 but was ok on my local install with later versions.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21848"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Fri, 06/06/2014 - 05:40.</div>
    <div class="content">
     <p>V8.2.6 still running fine. kWh to kWhd&nbsp;also now working on both local server and emoncms.org.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21849"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 06/06/2014 - 07:52.</div>
    <div class="content">
     <p>Fantastic good to hear that the v8.2.6 changes are working, I havent made any kwh_to_kwhd related modifications but good to hear its working. Il mark this thread as solved</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24105"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Mon, 22/09/2014 - 18:17.</div>
    <div class="content">
     <p>I&#39;ve just reinstalled emoncms on my local server and this problem has reappeared. I installed the latest buffered write version then switched it to the master branch full emoncms&nbsp;v8.3.6 running on HDD with the latest Emonhub&nbsp;v1.0 rc sending to the inputs page. It is sending to emoncms.org fine but the update intervals to the local server get progressively longer and longer until they stop.</p>
<p>I think I have emonhub.conf configured correctly with the correct&nbsp;datacodes but would appreciate any pointers where to look for a solution.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24110"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 23/09/2014 - 08:05.</div>
    <div class="content">
     <p>What log messages are you getting in /var/log/emonhub/emonhub.log ? You can make the logs more detailed by changing the loglevel in emonhub.conf to DEBUG.</p>
<p>If you receiving the data correctly at emoncms.org the configuration of emonhub&nbsp;and the datacodes should be ok, only the url and apikey&nbsp;differ between targets.</p>
<p>Did you do all the steps in the &quot;<a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/switchtofull.md">switch to full emoncms</a>&quot; guide?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24112"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Tue, 23/09/2014 - 09:54.</div>
    <div class="content">
     <p>Yes I followed that guide to the letter.</p>
<p>I&#39;ve just switched to DEBUG mode and the log is attached but I&#39;m not sure what to make of it.</p>
<p>The api&nbsp;key and url must be correct if the local emoncms receives some data before locking up, shouldn&#39;t it?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24114"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub sending to localhost grinds to a halt [SOLVED]</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 23/09/2014 - 12:01.</div>
    <div class="content">
     <p>Yes the apikey and the url must be good, as you say things start off ok which confirms they were correct and see no reason to suspect they changed. the log shows the identical data string being sent to both remote and local emoncms, For some unknown reason the local emoncms response changes from &quot;ok&quot; to</p>
<blockquote><p>&lt;br /&gt;<br />
		&lt;b&gt;Warning&lt;/b&gt;:&nbsp; fopen(emoncms.log): failed to open stream: Permission denied in &lt;b&gt;/usr/share/php/log4php/appenders/LoggerAppenderFile.php&lt;/b&gt; on line &lt;b&gt;99&lt;/b&gt;&lt;br /&gt;<br />
		&lt;br /&gt;<br />
		&lt;b&gt;Warning&lt;/b&gt;:&nbsp; log4php: [LoggerAppenderFile:myAppender]: Failed opening target file. Closing appender. in &lt;b&gt;/usr/share/php/log4php/LoggerAppender.php&lt;/b&gt; on line &lt;b&gt;283&lt;/b&gt;&lt;br /&gt;<br />
		ok</p>
</blockquote>
<p>I cannot explain why, but since the remote emoncms didn&#39;t object to the same data, the issue is probably something that is particular to the local emoncms install but not the remote.</p>
<p>There are &quot;warnings&quot; in the rogue response that suggest a permission issue with log4php opening emoncms.log, maybe that&#39;s a starting point, if emoncms was able to log a message that should help.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5239"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form--M6Hr5exWKJNti2ck_aPvgMZ10QKgPmOU0wd3JWPRtk" value="form--M6Hr5exWKJNti2ck_aPvgMZ10QKgPmOU0wd3JWPRtk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
