<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/319 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:42:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3 | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>
        <span class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 27/12/2011 - 13:19</span>
        <div class="content"><h3>Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>
<p><strong>A ready configured sketch can be downloaded from our github:&nbsp;</strong><a href="https://github.com/openenergymonitor/NanodeRF/blob/master/NanodeRF_singleCT/NanodeRF_singleCT.ino">https://github.com/openenergymonitor/NanodeRF/blob/master/NanodeRF_singleCT/NanodeRF_singleCT.ino</a></p>
<p>What you will need:</p>
<ul>
<li><a href="http://arduino.googlecode.com/files/arduino-1.0-linux.tgz">Arduino 1.0</a></li>
<li><a href="https://github.com/jcw/ethercard">JeeLabs EtherCard Library&nbsp;</a></li>
</ul>
<p>Goto: File -&gt; Examples -&gt; etherCard -&gt; webClient</p>
<p>Change line 12 from:</p>
<pre>
char website[] PROGMEM = &quot;www.google.com&quot;;</pre><p>to:</p>
<pre>
char website[] PROGMEM = &quot;www.vis.openenergymonitor.org&quot;;
<br type="_moz" /></pre><p>Change line 48 from:</p>
<pre>
ether.browseUrl(PSTR(&quot;/foo/&quot;), &quot;bar&quot;, website, my_callback);</pre><p>to:</p>
<pre>
ether.browseUrl(PSTR(&quot;/emoncms3/api/post.json?apikey=53c13213f301f6427c857a9426ce0efa&amp;json=&quot;), &quot;{power:252.4,temperature:15.4}&quot;, website, my_callback);</pre><p>Upload sketch</p>
<p>Check Serial Monitor window for successfull DHCP, DNS and server reply.</p>
<p>Goto&nbsp;<a href="http://vis.openenergymonitor.org/emoncms3">http://vis.openenergymonitor.org/emoncms3</a>&nbsp;and log in as: demo: demo to see the result</p>
<p>Note these instructions are for posting to a server with a domain name. For posting to a server with only an IP address see the example on out Github under NanodeRF. Some changes are required, noted in the code comments.&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="371.html" class="topic-previous" title="Go to previous forum topic">‹ emonBase not sending same data as emonTX</a>
              <a href="365.html" class="topic-next" title="Go to next forum topic">Emoncms: retrieving data ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-2550"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="roedfjel&#039;s picture" title="roedfjel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by roedfjel (not verified) on Tue, 27/12/2011 - 16:39.</div>
    <div class="content">
     <p>hello trystian.</p>
<p>&nbsp;</p>
<p>thanks for a wonderfull solution.</p>
<p>but can you make an example sketch for posting data to emoncms and pachub?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2563"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ian Barton&#039;s picture" title="Ian Barton&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by Ian Barton (not verified) on Wed, 28/12/2011 - 12:55.</div>
    <div class="content">
     <p>&nbsp;I have just tried compiling some examples from the EtherCard development branch, both downloaded from here and cloned from Github. I am getting loads of compiler errors like this:</p>
<p>/usr/share/arduino/libraries/EtherCard/tcpip.cpp: In function 'word www_client_internal_datafill_cb(byte)':</p>
<p>/usr/share/arduino/libraries/EtherCard/tcpip.cpp:458:20: error: variable 'c' must be const in order to be put into read-only section by means of '__attribute__((progmem))'</p>
<p>/usr/share/arduino/libraries/EtherCard/tcpip.cpp:467:20: error: variable 'c' must be const in order to be put into read-only section by means of '__attribute__((progmem))'</p>
<p>I am using Adruino 1.0 on Arch Linux. Am I doing something simple wrong, or do I need to go through the library code and try and fix this? I am not a C programmer, so it might take me a while:)</p>
<p>Ian.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2567"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 28/12/2011 - 14:12.</div>
    <div class="content">
     <p>Mmm thats strange, I've just tested it now and it still works fine. Others have reported succes&nbsp;<a href="318.html#comment-2553">http://openenergymonitor.org/emon/node/318#comment-2553</a>.</p>
<p>Can you compile the examples which come with the EtherCard library. Did you downlod the EtherCard library from here:&nbsp;<a href="https://github.com/jcw/ethercard/tree/development">https://github.com/jcw/ethercard/tree/development</a>&nbsp;? Make sure you have the latest one. The dev branch will soon be merged into the master in the new few days/weeks.&nbsp;</p>
<p>Are you using Arduino 1.0? and can you compile standard Arduino 1.0 examples such as Blink?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2574"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ian Barton&#039;s picture" title="Ian Barton&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by Ian Barton (not verified) on Thu, 29/12/2011 - 09:53.</div>
    <div class="content">
     <p>&nbsp;I have just pulled the latest updates from github and switched to the development branch. Still get the same errors. I am using Arduino 1.0 and other stuff works fine. I am getting lots of errors like:</p>
<p>/usr/share/arduino/libraries/EtherCard/tcpip.cpp: In function 'word www_client_internal_datafill_cb(byte)':</p>
<p>/usr/share/arduino/libraries/EtherCard/tcpip.cpp:458:20: error: variable 'c' must be const in order to be put into read-only section by means of '__attribute__((progmem))'</p>
<p>/usr/share/arduino/libraries/EtherCard/tcpip.cpp:467:20: error: variable 'c' must be const in order to be put into read-only section by means of '__attribute__((progmem))'</p>
<p>Unfortunately, the function doesn't have a variable named 'c', so my attempts at debugging have ground to a halt. I expect it's a fairly simple C++ syntax problem. However, I haven't used C for about 25 years and anyway I hate it :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2633"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="xotet&#039;s picture" title="xotet&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by xotet (not verified) on Tue, 03/01/2012 - 18:45.</div>
    <div class="content">
     <p>&nbsp;I&acute;m trying to test the emoncms v3, but can&acute;t compile the <a href="https://github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_singleCT">github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_singleCT</a></p>
<p>&nbsp;</p>
<p>&nbsp; I&acute;ve got this errors</p>
<p>&nbsp; NanodeRF_singleCT.cpp: In function 'void my_callback(byte, word, word)':<br />
&nbsp; NanodeRF_singleCT:104: error: 'get_header_line' was not declared in this scope<br />
&nbsp; NanodeRF_singleCT:107: error: 'get_reply_data' was not declared in this scope</p>
<p>&nbsp;</p>
<p>&nbsp; I have the ethercard lib and jeelib on libraries folder. of course runing arduino IDE ver 1.0</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;Thanks in advance <br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2634"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="xotet&#039;s picture" title="xotet&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by xotet (not verified) on Tue, 03/01/2012 - 19:43.</div>
    <div class="content">
     <p>&nbsp;Sorry I solved just missed to include the reply skecth. Now is Working WOW!!!!!!!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2636"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="segu&#039;s picture" title="segu&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by segu (not verified) on Tue, 03/01/2012 - 21:50.</div>
    <div class="content">
     <p>Hello</p>
<p>Please can you explain a little more what you did. I can contact the emoncms server but do not see changes in the dashboard. That is why I am asking for some help.</p>
<p>Thank you in any case.<img src="../sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/regular_smile.html" alt="" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2694"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Wed, 11/01/2012 - 22:04.</div>
    <div class="content">
     <p>&nbsp;anyone use this sketch on their own 'localhost' emoncms server? I'm able to post to the vis.openenergymonitor.org site, but can't 'see' my own server. I'm using a Nanode 5 and Arduino 1.0 IDE. Ubuntu 11.10 [Desktop distro, not server though]. Emoncms is in the /var/www dir.</p>
<p>I have enabled mod rewrite and clean urls. I don't have drupal installed.</p>
<p>I get past the DHCP/DNS section, and then the sketch fails as you can see below.</p>
<p>Tomorrow, I'll clean install ubuntu on another machine [server edition] and try again.</p>
<p>&lt;&lt;&lt; REQ GET /emoncms3/api/post.json?apikey=481363b81db11b0c762e7323c0f80d52&amp;json={power_EOB:252.4,temperature_EOB:15.4} HTTP/1.1</p>
<p>Host: localhost</p>
<p>Accept: text/html</p>
<p>Connection: close</p>
<p>&gt;&gt;&gt;</p>
<p>HTTP/1.1 404 Not Found</p>
<p>Content-Type: text/html</p>
<p>Transfer-Encoding: chunked</p>
<p>Server: Allegro-Software-RomPager/4.03</p>
<p>Connection: close</p>
<p>...</p>
<p>&gt;&gt;&gt;</p>
<p>0cc</p>
<p>&lt;html&gt;</p>
<p>&lt;head&gt;</p>
<p>&lt;title&gt;Object Not Found&lt;/title&gt;</p>
<p>&lt;/head&gt;</p>
<p>&lt;body&gt;</p>
<p>&lt;h1&gt;Object Not Found&lt;/h1&gt;</p>
<p>The requested URL '/emoncms3/api/post.json' was not found.&lt;p&gt;</p>
<p>&lt;SNIP&gt;.........................</p>
<p>&lt;&lt;&lt; REQ GET /emoncms3/api/post.json?apikey=481363b81db11b0c762e7323c0f80d52&amp;json={power_EOB:252.4,temperature_EOB:15.4} HTTP/1.1</p>
<p>Host: localhost</p>
<p>Accept: text/html</p>
<p>Connection: close</p>
<p>&nbsp;page&lt;/A&gt;&lt;p&gt;</p>
<p>&lt;/body&gt;</p>
<p>&lt;/html&gt;</p>
<p>0</p>
<p>&gt;&gt;&gt;</p>
<p>HTTP/1.1 404 Not Found</p>
<p>Content-Type: text/html</p>
<p>Transfer-Encoding: chunked</p>
<p>Server: Allegro-Software-RomPager/4.03</p>
<p>Connection: close</p>
<p>...</p>
<p>&gt;&gt;&gt;</p>
<p>0cc</p>
<p>&lt;html&gt;</p>
<p>&lt;head&gt;</p>
<p>&lt;title&gt;Object Not Found&lt;/title&gt;</p>
<p>&lt;/head&gt;</p>
<p>&lt;body&gt;</p>
<p>&lt;h1&gt;Object Not Found&lt;/h1&gt;</p>
<p>The requested URL '/emoncms3/api/post.json' was not found.&lt;p&gt;</p>
<p>&lt;SNIP&gt;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2695"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Wed, 11/01/2012 - 22:04.</div>
    <div class="content">
     <p>&nbsp;anyone use this sketch on their own 'localhost' emoncms server? I'm able to post to the vis.openenergymonitor.org site, but can't 'see' my own server. I'm using a Nanode 5 and Arduino 1.0 IDE. Ubuntu 11.10 [Desktop distro, not server though]. Emoncms is in the /var/www dir.</p>
<p>I have enabled mod rewrite and clean urls. I don't have drupal installed.</p>
<p>I get past the DHCP/DNS section, and then the sketch fails as you can see below.</p>
<p>Tomorrow, I'll clean install ubuntu on another machine [server edition] and try again.</p>
<p>&lt;&lt;&lt; REQ GET /emoncms3/api/post.json?apikey=481363b81db11b0c762e7323c0f80d52&amp;json={power_EOB:252.4,temperature_EOB:15.4} HTTP/1.1</p>
<p>Host: localhost</p>
<p>Accept: text/html</p>
<p>Connection: close</p>
<p>&gt;&gt;&gt;</p>
<p>HTTP/1.1 404 Not Found</p>
<p>Content-Type: text/html</p>
<p>Transfer-Encoding: chunked</p>
<p>Server: Allegro-Software-RomPager/4.03</p>
<p>Connection: close</p>
<p>...</p>
<p>&gt;&gt;&gt;</p>
<p>0cc</p>
<p>&lt;html&gt;</p>
<p>&lt;head&gt;</p>
<p>&lt;title&gt;Object Not Found&lt;/title&gt;</p>
<p>&lt;/head&gt;</p>
<p>&lt;body&gt;</p>
<p>&lt;h1&gt;Object Not Found&lt;/h1&gt;</p>
<p>The requested URL '/emoncms3/api/post.json' was not found.&lt;p&gt;</p>
<p>&lt;SNIP&gt;.........................</p>
<p>&lt;&lt;&lt; REQ GET /emoncms3/api/post.json?apikey=481363b81db11b0c762e7323c0f80d52&amp;json={power_EOB:252.4,temperature_EOB:15.4} HTTP/1.1</p>
<p>Host: localhost</p>
<p>Accept: text/html</p>
<p>Connection: close</p>
<p>&nbsp;page&lt;/A&gt;&lt;p&gt;</p>
<p>&lt;/body&gt;</p>
<p>&lt;/html&gt;</p>
<p>0</p>
<p>&gt;&gt;&gt;</p>
<p>HTTP/1.1 404 Not Found</p>
<p>Content-Type: text/html</p>
<p>Transfer-Encoding: chunked</p>
<p>Server: Allegro-Software-RomPager/4.03</p>
<p>Connection: close</p>
<p>...</p>
<p>&gt;&gt;&gt;</p>
<p>0cc</p>
<p>&lt;html&gt;</p>
<p>&lt;head&gt;</p>
<p>&lt;title&gt;Object Not Found&lt;/title&gt;</p>
<p>&lt;/head&gt;</p>
<p>&lt;body&gt;</p>
<p>&lt;h1&gt;Object Not Found&lt;/h1&gt;</p>
<p>The requested URL '/emoncms3/api/post.json' was not found.&lt;p&gt;</p>
<p>&lt;SNIP&gt;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2696"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 11/01/2012 - 23:09.</div>
    <div class="content">
     <p>Hello <span class="Apple-style-span" style="font-family: Verdana, Arial, Helvetica, sans-serif; ">Eamonn,&nbsp;</span>Have you modified the sketch to point to the ip address of your local server rather than a dns address? Could this be the issue?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2697"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Thu, 12/01/2012 - 06:49.</div>
    <div class="content">
     <p>&nbsp;Trystan,</p>
<p>&nbsp;thanks ; I am using 'localhost' as the address; 127.0.0.1 returns a DNS fail.</p>
<p>Eamonn</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2698"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Thu, 12/01/2012 - 09:58.</div>
    <div class="content">
     <p>I&nbsp;am not sure localhost or 127.0.0.1 will resolve to the correct address, you need to specifiy the IP of the server that is running emoncms on, whats happening at the moment I think is the card is trying to send packets to itself, I got mine working by assigning a fixed IP address to the emoncms server, (192.168.1.200), then changing the software to point to that address, I am using Ubuntu desktop edition btw and it's working fine.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2701"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Thu, 12/01/2012 - 16:31.</div>
    <div class="content">
     <p>&nbsp;Thanks ; I think you're right and changed my IP address to 192.168.1.100. but I still get a DNS error.&nbsp;</p>
<p>I think it shouldn't even get as far as DNS lookup, if my /etc/hosts entry had a valid match, so I'm doing something odd here I think. I notice that having assigned a static IP the ethercard returns&nbsp;﻿an IP of 192.168.1.24 in the serial window....would have expected it to be the new static IP...</p>
<p>I'm including the basic info below ....</p>
<p>&nbsp;</p>
<p><strong>This is what I use in the sketch</strong></p>
<p>char website[] PROGMEM = &quot;192.168.1.100&quot;;</p>
<p><strong>This is my /etc/hosts file where 'laptop' is the hostname....</strong></p>
<p class="rteleft rteindent3">127.0.0.1<span class="Apple-tab-span" style="white-space:pre">	</span>localhost.localdomain &nbsp;<span class="Apple-tab-span" style="white-space:pre">	</span>localhost</p>
<p class="rteleft rteindent3">::1<span class="Apple-tab-span" style="white-space:pre">	</span>laptop<span class="Apple-tab-span" style="white-space:pre">	</span>localhost6.localdomain6<span class="Apple-tab-span" style="white-space:pre">	</span>localhost6</p>
<p class="rteleft rteindent3">192.168.1.100<span class="Apple-tab-span" style="white-space:pre">	</span>laptop</p>
<p class="rteleft rteindent3"># The following lines are desirable for IPv6 capable hosts</p>
<p class="rteleft rteindent3">::1 &nbsp; &nbsp; localhost ip6-localhost ip6-loopback</p>
<p class="rteleft rteindent3">fe00::0 ip6-localnet</p>
<p class="rteleft rteindent3">ff00::0 ip6-mcastprefix</p>
<p class="rteleft rteindent3">ff02::1 ip6-allnodes</p>
<p class="rteleft rteindent3">ff02::2 ip6-allrouters</p>
<p><strong>This is my /etc/network/interfaces file</strong></p>
<p class="rteindent3">auto lo﻿</p>
<p class="rteindent3">iface lo inet loopback</p>
<p class="rteindent3">auto eth0</p>
<p class="rteindent3">iface eth0 inet static</p>
<p class="rteindent3">address 192.168.1.100</p>
<p class="rteindent3">netmask 255.255.255.0</p>
<p class="rteindent3">network 192.168.1.0</p>
<p class="rteindent3">broadcast 192.168.1.255</p>
<p>I also tried changing my loopback IP to be 192.168.1.100 in /etc/hosts, but ifconfig still showed 127.0.0.1. as the lo IP address.</p>
<p>any thoughts appreciated.....</p>
<p>Eamonn</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2705"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Thu, 12/01/2012 - 18:26.</div>
    <div class="content">
     <p>ok, I think I see where you have gone wrong, you shouldnt need to change your etc/config, mine is just the default, I think you have changed the wrong line in the sketch.</p>
<p>Change the line you have changed back to blank, i.e. char website[] PROGMEM = &quot;&quot;;</p>
<p>and then put your IP address into the line static byte hisip[] = {192.168.1.100};</p>
<p>it should be about 6 line up in the sketch.</p>
<p>You also need to change the sketch in a further 2 places, line 132-135 which does the DNS look up needs commenting out and the line ether.copyIp(ether.hisip hisip); at line 137 needs to be included, so remove the // at the beginning of the line.</p>
<p>All the line numbers above are based on the 2CT version of the sketch.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2706"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Thu, 12/01/2012 - 20:01.</div>
    <div class="content">
     <p>Thanks a lot for your input; &nbsp;Interesting ;I was using the webclient example, so no mention of static IP option.</p>
<p>I can't find the 2CT sketch you're referring to anywhere, but used the single CT example xotet mentions above. That works great, so I'll 'kick on from here'. Thanks again for the ideas/input.</p>
<p>Thanks. Eamonn</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2709"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 12/01/2012 - 21:51.</div>
    <div class="content">
     <p>&nbsp;Hi Eamonn,</p>
<p>How are you getting on? I have updated the insuructions at the top of this page to also cater for posting to a server without a domina name (IP address only) in this case DNS is not used. I use this to post to a remote server that does not have a domain name, it's not been tested posting to local host. Please let us know how you get on.</p>
<p>All the best,&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2710"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Thu, 12/01/2012 - 22:11.</div>
    <div class="content">
     <p>&nbsp;Glyn,</p>
<p>&nbsp;It's working, using the single CT example; which is great. I'll use that as a base and link in my live gas/electricity . Tomorrow I go and get myself a water meter as well :-) so that'll be interesting.&nbsp;</p>
<p>What confused me was that the web client sketch referenced at the top of the page, doesn't have any DNS or hisip variable, so it was only when I started looking at the single CT sketch, I started to make progress :-)</p>
<p>I'm didn't break ubuntu though - what an OS. I really thought I have a config problem.</p>
<p>Thanks a lot,</p>
<p>Eamonn&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2807"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sat, 21/01/2012 - 17:21.</div>
    <div class="content">
     <p>&nbsp;Hi</p>
<p>&nbsp;</p>
<p>I have the same error, sorry but I do not understand the fix?</p>
<p>&nbsp;</p>
<p>What do I need to do to resolve this?</p>
<p>&nbsp;</p>
<p>I am so close!</p>
<p>&nbsp;</p>
<p>Mark</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2808"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sat, 21/01/2012 - 17:23.</div>
    <div class="content">
     <p>&nbsp;Just in case it was not clear, I get this error:</p>
<p>NanodeRF_singleCT_ino.cpp: In function 'void my_callback(byte, word, word)':</p>
<p>NanodeRF_singleCT_ino:106: error: 'get_header_line' was not declared in this scope</p>
<p>When uploading NanodeRF_singleCT&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2809"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sat, 21/01/2012 - 17:32.</div>
    <div class="content">
     <p>&nbsp;Okay, I fixed it now.,</p>
<p>I added the decode_reply.ino routine to the bottom of the NandoRF_singleCT.ino sketch,</p>
<p>Mark</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2810"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sat, 21/01/2012 - 17:49.</div>
    <div class="content">
     <p>&nbsp;Yikes! It works!</p>
<p>I can post to my local home server, but I am getting some funky figures:</p>
<p>{rf_fail:0,ct1:15372,battery:16419}</p>
<p>{rf_fail:0,ct1:-31081,battery:16424}</p>
<p>{rf_fail:0,ct1:24728,battery:16421}</p>
<p>Any ideas before I start to debug?</p>
<p>Mark</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2813"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sat, 21/01/2012 - 21:03.</div>
    <div class="content">
     <p>Okay, as far as I can tell the emonTX (v1.4) is transmitting correctly. The NanodeRF is recieving data. &nbsp;However it would&nbsp;appear that the voltage ADC on the emonTX is simply floating up and down. &nbsp;The values being recieved vary from huge negatives to huge pluses from one data burst to the next.</p>
<p>I have tried using CT1 and CT2, moving the tap from one socket to the other, and recompliing the code, but nothing changes. I have even tried messing with some of the code, line 116 in particular.</p>
<p>I have double checked my soldering, all seems fine.</p>
<p>Is the version of emonTx_1CT_Voltage on GITHUB complatible with the v1.4 hardware?</p>
<p>Any advice would be appreciated!</p>
<p>TIA</p>
<p>Mark</p>
<p>Typical data burst:</p>
<p>RF recieved</p>
<p>{rf_fail:0,ct1:13180,battery:14215}</p>
<p>0</p>
<p>Date: Sat, 21 Jan 2012 21:02:21 GMT</p>
<p>ok recieved</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2814"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sat, 21/01/2012 - 21:24.</div>
    <div class="content">
     <p>&nbsp;One thing that I forgot to write is that I cannot get the emonTx code to upload when I set the Arduuno board type to &quot;Uno&quot;. If I choose this board type I get a 'AVR not responding&quot; message or similar. However if I select &quot;Nano with 328&quot; or &quot;Duemilanove with 328&quot; the code uploads fine.</p>
<p>Again any ideas?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2820"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 22/01/2012 - 10:32.</div>
    <div class="content">
     <p>I rewrote the 1CT+voltage code the other day but am yet to push to git hub I will do that now.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2822"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sun, 22/01/2012 - 10:43.</div>
    <div class="content">
     <p>&nbsp;Great, I look forward to it.</p>
<p>Mark</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2823"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 22/01/2012 - 10:56.</div>
    <div class="content">
     <p>Ok, If you use the sketch here:&nbsp;<a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTx_CT123_Voltage">https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTx_CT123_Voltage</a>, its the latest version, the old one should have worked, but I know this one worked for me a couple of days ago when I did this test:&nbsp;<a href="361.html">http://openenergymonitor.org/emon/node/361</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2824"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 22/01/2012 - 11:00.</div>
    <div class="content">
     <p>I see you say your atmega is a&nbsp;Duemilanove so you will need to comment the line&nbsp;<strong>#define UNO</strong> for it to work, It should not make any difference to the strange readings issue though. It may be worth trying the sampler program to just see if the voltage and current waveforms are of the expected shape: <a href="110.html">http://openenergymonitor.org/emon/node/110</a>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2825"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sun, 22/01/2012 - 11:21.</div>
    <div class="content">
     <p>&nbsp;Good morning,</p>
<p>I have loaded the new code emonTX_CT123_Voltage and now I get:</p>
<p>{rf_fail:0,ct1:2,battery:3}</p>
<p>{rf_fail:0,ct1:2,battery:3}</p>
<p>{rf_fail:0,ct1:2,battery:3}</p>
<p>{rf_fail:0,ct1:3,battery:9}</p>
<p>{rf_fail:0,ct1:2,battery:4}</p>
<p>{rf_fail:0,ct1:3,battery:8}</p>
<p>{rf_fail:0,ct1:1,battery:9}</p>
<p>I have left out some repeat values, but basically ct1 remain low, while battery has incremented a little.</p>
<p>If I put the tap into ct2 the values remain at 0, as expected.</p>
<p>Ideas?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2826"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sun, 22/01/2012 - 11:37.</div>
    <div class="content">
     <p>&nbsp;Now I am getting confused. I thought that Atmega was the name of the microcontroller, either a 328 or 168. The only difference being the amount of RAM they have. With &quot;Uno&quot; and &quot;Duemilanove&quot; being variations of the board made by Arduino.</p>
<p>The only significant difference being that the Uno now longer uses the FTDI interface.</p>
<p>So I am puzzeled as to why commenting out the #define would make any difference. &nbsp;Regardless I am using the emonTX 1.4 hardware. I get an aavrdude: stk500_getsync(): not in sync: resp=0x00 error if I select Uno as the board type.</p>
<p>I will try and run the sampler code now and see what happens.</p>
<p>I may also swap the ATMega out for a spare I have, just in case the ADC are fired.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2827"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 22/01/2012 - 11:57.</div>
    <div class="content">
     <p>The significance of Dumenlinove vs Uno is not do do with the actuall board but to do with which bootloader is uploaded to the atmega chip itself:&nbsp;<a href="http://arduino.cc/en/Main/Bootloader">http://arduino.cc/en/Main/Bootloader</a>. This is why you can only upload with the&nbsp;Dumenlinove option.</p>
<p>Could you uncomment line 139 in the emontx sketch:&nbsp;<strong>emon1.serialprint(); </strong>and also line 160 and 161:&nbsp;Serial.println();&nbsp;delay(100);</p>
<p>and let me know what you see?</p>
<p>In the serial window of the emontx, rather than the nanoderf that is.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2828"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 22/01/2012 - 12:47.</div>
    <div class="content">
     <p>&nbsp;Hi Mark,&nbsp;</p>
<p>The emonTx firmware examples with 'voltage' in the title are for use when using an AC-AC to make RMS voltage measurements and therefore measure real power. You are just using a single CT, I know this becasure the emonTx V1.4 does not contain the option for voltage measurement. You need to use emonTx_singleCT_example:&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTx_SingleCT_Example_watchdog">https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTx_SingleCT_Example_watchdog</a></p>
<p>Remember to comment out #define UNO towards the beginning of the sketch if not using the UNO optiboot bootlaoder.&nbsp;</p>
<p>Sorry for the confusion.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2831"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sun, 22/01/2012 - 13:05.</div>
    <div class="content">
     <p>&nbsp;BINGO!</p>
<p>It works, thanks for that.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2833"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MetPhoto&#039;s picture" title="MetPhoto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Basic configuration of ethercard library and arduino 1.0 for posting to emoncms3</h3>

    <div class="submitted">Submitted by MetPhoto (not verified) on Sun, 22/01/2012 - 13:06.</div>
    <div class="content">
     <p>&nbsp;Ah, I see now. Thanks for the explantion. &nbsp;As you can see from my post below, using the correct Sketch has made all the difference! &nbsp;:-)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/319"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-VoMnw_AYNaXPdhRQPU4ISoMkd9FniWGXZIxa32YYQDY" value="form-VoMnw_AYNaXPdhRQPU4ISoMkd9FniWGXZIxa32YYQDY"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/319 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:42:19 GMT -->
</html>
