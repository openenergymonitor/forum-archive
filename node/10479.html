<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10479 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:47:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Create Feed to control LED widget | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Create Feed to control LED widget</h3>
        <span class="submitted">Submitted by <a href="../user/8012.html" title="View user profile.">bruce_miranda</a> on Sat, 18/04/2015 - 18:24</span>
        <div class="content"><p>I need a simple LED widget on my dashboard to show if I am in a Solar Import or Export situation.&nbsp;</p>
<p>How do I create a feed that outputs a value of 1&nbsp;if my grid power is negative and 0&nbsp;if my grid power is positive. I can then feed that into the LED widget.&nbsp;</p>
<p>I have a Type 2 Solar installation, so I need the grid power to compute my house consumption. I have all that working fine.&nbsp;</p>
<p>I can obviously compute this and send down a new input to emoncms, but it seems like a post input processing that I need, that I should be able to do in emoncms.&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2387.html" class="topic-previous" title="Go to previous forum topic">‹ Viewing public dashboard on emoncms.org</a>
              <a href="10477.html" class="topic-next" title="Go to next forum topic">String that data in mysql database ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-29741"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Create Feed to control LED widget</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 18/04/2015 - 19:15.</div>
    <div class="content">
     <p>There are probally several ways to tackle what you are asking but if you want to do it in the input processing you could do it with the allow neg and allow pos processes, try</p>
<p>(+feed ?) &quot;grid power&quot;<br />
allow positive<br />
-feed &quot;grid power&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;should take you back to zero<br />
log to feed &quot;exporting&quot;<br />
reset2zero<br />
allow negative&nbsp;&nbsp;<br />
+1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />
-feed &quot;grid power&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; should give you 1<br />
&nbsp;log to feed&nbsp;&nbsp;&quot;exporting&quot;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29745"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8012.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bruce_miranda&#039;s picture" title="bruce_miranda&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Create Feed to control LED widget</h3>

    <div class="submitted">Submitted by <a href="../user/8012.html" title="View user profile.">bruce_miranda</a> on Sat, 18/04/2015 - 20:56.</div>
    <div class="content">
     <p>Interestingly on the 3rd step it doesn&#39;t take me back to 0. See my results instead.&nbsp;</p>
<p>&nbsp;</p>
<p>+ feed Node:20: grid_power (feedvalue:820.00)<br />
Allow positive<br />
- feed Node:20: grid_power (feedvalue:820.00)<br />
Log to feed Node:20: exporting_power (feedvalue:-819.00)<br />
Reset to ZERO<br />
+ 1<br />
- feed Node:20: grid_power (feedvalue:820.00)<br />
Log to feed Node:20: exporting_power (feedvalue:-819.00)</p>
<p>&nbsp;</p>
<p>Could this be because my grid_power is being logged with&nbsp;PHPFIWA?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29746"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Create Feed to control LED widget</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 18/04/2015 - 23:18.</div>
    <div class="content">
     <p><em>&quot;Could this be because my grid_power is being logged with&nbsp;PHPFIWA? &quot;</em></p>
<p>Probably not, as looking at it again I can see the logic isn&#39;t right but the math is correct for the processes used. I&#39;ll take another look in the morning,</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29749"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8012.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bruce_miranda&#039;s picture" title="bruce_miranda&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Create Feed to control LED widget</h3>

    <div class="submitted">Submitted by <a href="../user/8012.html" title="View user profile.">bruce_miranda</a> on Sun, 19/04/2015 - 08:54.</div>
    <div class="content">
     <p>There was someone who posted a method and then deleted it. That seems to atleast get the LED to Red when importing and Black when exporting. But really wanted to be able to make it Red or Green.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29754"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Create Feed to control LED widget</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 19/04/2015 - 10:37.</div>
    <div class="content">
     <p>I think the trick is to use an&nbsp;&quot;imported_power&quot;&nbsp;feed rather than using just &quot;grid_power&quot;&nbsp;feed.</p>
<p>Starting with 820w (importing)</p>
<blockquote><p>Allow Positive (=820)</p>
<p>log to feed &quot;import_power&quot;</p>
<p>/ feed&nbsp;&nbsp;&quot;import_power&quot; (=1)</p>
</blockquote>
<p>the&nbsp;same processes&nbsp;starting with -820w (exporting) result in</p>
<blockquote><p>Allow Positive (=0)</p>
<p>log to feed &quot;import_power&quot;</p>
<p>/ feed&nbsp;&nbsp;&quot;import_power&quot; (=0)</p>
</blockquote>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29761"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8012.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bruce_miranda&#039;s picture" title="bruce_miranda&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Create Feed to control LED widget</h3>

    <div class="submitted">Submitted by <a href="../user/8012.html" title="View user profile.">bruce_miranda</a> on Sun, 19/04/2015 - 13:13.</div>
    <div class="content">
     <p>Thanks pb66. I changed Allow Positive to Allow Negative so that in an Export I would get Green and vice versa.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10479"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-qi4yvqpL7a9gs4wJR3p_E-EBlR4CaW8pL2Y2-6eAWLk" value="form-qi4yvqpL7a9gs4wJR3p_E-EBlR4CaW8pL2Y2-6eAWLk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/10479 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:47:18 GMT -->
</html>
