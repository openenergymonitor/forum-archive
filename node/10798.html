<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10798 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed</h3>
        <span class="submitted">Submitted by <a href="../user/8238.html" title="View user profile.">sub3marathonman</a> on Fri, 05/06/2015 - 15:40</span>
        <div class="content"><p>Hello, and obviously my first post here.&nbsp; I thought it was straightforward, Emoncms but on my home computer, getting data from a Brultech GEM.</p>
<p>The instructions here <a href="https://github.com/emoncms/emoncms/blob/master/docs/WindowsInstall.md">https://github.com/emoncms/emoncms/blob/master/docs/WindowsInstall.md</a> are fairly straightforward.&nbsp; I managed to get the WAMP installed, I think I got it to accept mod rewrite and the gettext was already enabled.&nbsp; I created the database, and downloaded version 8.5 of the Emoncms.&nbsp; I did manage to set the emoncms settings.php, but it didn&#39;t explain how to see what a comment was in the file (yes, basic knowledge and I eventually guessed correctly) and in reality it wasn&#39;t necessary to delete any comments in the version I downloaded.&nbsp; It was subtle having to change a &#39; (single quote) to &quot; (double quote) for the locations of the folders on the computer, but I caught that.</p>
<p>And yes, that works!!&nbsp; I have the &quot;Test&quot; database, I can send the data to it.&nbsp; I don&#39;t know what the csv=100,200,300 means, but it will graph at least the first data point if I vary it to 50 or 120 and then back to 100.&nbsp; It gives an error warning that I&#39;m not sure about, but hopefully at some point it will be fixed once I learn something more about this.&nbsp; At that point the instructions stop, and the next steps are unknown.</p>
<p>So, the next step is getting the Brultech GEM to send data to the database for the Emoncms.&nbsp; And that&#39;s where it all gets confusing.&nbsp; I think the API key is just &quot;API Key&quot; but I&#39;m not&nbsp;sure.&nbsp; I&#39;ve gotten the btmon.py script to somehow do something, but it ends up with &quot;expected START_HEADER0 0fxe, got nothing&quot; so I&#39;m not able to figure out the next step and hopefully one of the knowledgeable people here will take pity and help.</p>
<p>Thanks.</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10779.html" class="topic-previous" title="Go to previous forum topic">‹ Emonhub/Emoncms failing from time to time?</a>
              <a href="10790.html" class="topic-next" title="Go to next forum topic">emonhub not starting automatically on boot (Ubuntu 15.04) ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-30943"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Fri, 05/06/2015 - 17:38.</div>
    <div class="content">
     <p>Hi Kevin,</p>
<p>Have you had a look at: <a href="http://lancet.mit.edu/mwall/projects/power/btmon-howto.html">http://lancet.mit.edu/mwall/projects/power/btmon-howto.html</a>? (btmon.py config guide)</p>
<p>There is some configuration help regarding OEM, inside btmon.py, but it&#39;s outdated. e.g. one line with emoncms config info reads OEM_URL = &#39;https://localhost/emoncms/api/post&#39;</p>
<p>Emoncms now expects to see something like this:<br />
<a href="http://localhost/emoncms/input/post.json?node=1&amp;csv=100,200,300" title="http://localhost/emoncms/input/post.json?node=1&amp;csv=100,200,300">http://localhost/emoncms/input/post.json?node=1&amp;csv=100,200,300</a></p>
<p><em>I don&#39;t know what the csv=100,200,300 means</em></p>
<p>CSV means Comma Separated Values. It&#39;s one of the data formats emoncms can accept.</p>
<p>You can find your API keys, and examples of how to post your data to emoncms, on the emoncms &quot;Input API Help&quot; screen. There&#39;s a link to it in the top right corner of your emoncms &quot;Inputs&quot; page.</p>
<p><em>I think the API key is just &quot;API Key&quot; but I&#39;m not&nbsp;sure.</em></p>
<p>The API key is a 32 character string that looks similar to this: 9d37f182446ad5bb767a90e2bee7281f<br />
emoncms generates two of them. A read-only key, and a read-write key.<br />
(The key above isn&#39;t real, it&#39;s just a string of random characters)</p>
<p>Regards,</p>
<p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30949"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 06/06/2015 - 00:18.</div>
    <div class="content">
     <p>And you must use the read-write key when sending data to emoncms - it's the equivalent of a password to let the data in.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30950"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sub3marathonman&#039;s picture" title="sub3marathonman&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed</h3>

    <div class="submitted">Submitted by <a href="../user/8238.html" title="View user profile.">sub3marathonman</a> on Sat, 06/06/2015 - 02:40.</div>
    <div class="content">
     <p>Thank you both Bill and Robert!&nbsp; I think this will help me make some progress.</p>
<p>The outdated instructions are definitely a problem.&nbsp; And while I did see those strings of numbers and letters, I really didn&#39;t pay any attention to them at all since I didn&#39;t know what to look for.&nbsp;So the help is appreciated.</p>
<p>But, now after trying to substitute the correct key value, I&#39;m still getting &quot;expected START_HEADER0 0fxe, got nothing&quot; so there must be other steps I need to get it working.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30951"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sat, 06/06/2015 - 03:36.</div>
    <div class="content">
     <p>Have you configured your GEM?</p>
<p>There are three tools for configuring a GEM:</p>
<ul>
<li>web browser directly to GEM (only for GEM with ethernet option)</li>
<li>Green-Eye Monitor Setup - this is a Java application from Brultech</li>
<li>btcfg.py - Python script</li>
</ul>
<p>Does your GEM have the built-in ethernet interface?</p>
<p>When communicating via TCP/IP (ethernet), the GEM can be in either client or server mode. When the GEM is in server mode, it responds to requests - the computer running btmon must initiate the request for communication. When the GEM is in client mode, the GEM initiates the communication.</p>
<p>&nbsp;</p>
<p>Polling vs Blocking (btmon)</p>
<p>btmon can accept real-time packets from the GEM (the GEM must be in real-time (client) mode) or it can poll for data (the GEM must *not* be in real-time mode, i.e it must be in server mode).</p>
<p>In most cases btmon should be in blocking (client) mode, accepting real-time packets from the GEM.</p>
<p>&nbsp;</p>
<p>Installing on Windows</p>
<p>Install Python 2.6 or 2.7. btmon will not work with Python 3.<br />
<a href="http://python.org/download/windows" title="http://python.org/download/windows">http://python.org/download/windows</a><br />
Create a directory in which to keep btmon and any configuration file(s):<br />
md c:\btmon copy &lt;your download path name here&gt;\btmon.py c:\btmon</p>
<p>That&#39;s it! Depending on the configuration, you might have to install other Python modules. If btmon complains about a missing module, install that module using easy_install.</p>
<p>&nbsp;</p>
<p>Here&#39;s a link to a post on the on the Brultech forum about the same error message you&#39;re getting:<br />
<a href="https://www.brultech.com/community/viewtopic.php?f=11&amp;t=1112">https://www.brultech.com/community/viewtopic.php?f=11&amp;t=1112</a></p>
<p>and a link to some posts on the Brultech forum on configuring btmon for use with emoncms 8.4<br />
Only the first two posts are relevant. The rest are dated 2011 and older.</p>
<p><a href="https://www.brultech.com/community/viewtopic.php?f=11&amp;t=1288">https://www.brultech.com/community/viewtopic.php?f=11&amp;t=1288</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30954"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sub3marathonman&#039;s picture" title="sub3marathonman&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed</h3>

    <div class="submitted">Submitted by <a href="../user/8238.html" title="View user profile.">sub3marathonman</a> on Sat, 06/06/2015 - 04:16.</div>
    <div class="content">
     <p>Thanks again Bill.</p>
<p>Yes, there is apparently progress!!</p>
<p>For the GEM, real time status is OFF. I think the GEM is set to Client, but I&#39;m not sure if somehow the config.cfg for the btmon.py changes that.</p>
<p>Somehow by looking on the Brultech forum at <a href="https://www.brultech.com/community/viewtopic.php?f=11&amp;t=535" title="https://www.brultech.com/community/viewtopic.php?f=11&amp;t=535">https://www.brultech.com/community/viewtopic.php?f=11&amp;t=535</a> mwall gave an example of a btmon.py startup command (12/3/2012 @ 8:33 a.m.) and I modified it into a config.cfg file for the btmon.py.</p>
<p>Here is the config.cfg file:</p>
<p>[source]<br />
device_type = gem<br />
ip_read = true<br />
ip_mode = client<br />
ip_host=192.168.X.Y (the address of the GEM)</p>
<p>ip_port = xxxx (the port of the GEM)<br />
ip_poll_interval = 10<br />
packet_format = gem48ptbin</p>
<p>[openenergymonitor]<br />
oem_url = <a href="http://localhost/emoncms/input/post.json" title="http://localhost/emoncms/input/post.json">http://localhost/emoncms/input/post.json</a><br />
oem_out = true<br />
oem_token = xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx<br />
oem_node = 1</p>
<p>And I can now see this data in the Inputs for the emoncms &quot;Test&quot; file I have. It looks like everything is on Node 1, each channel/data from the GEM gets a &quot;key&quot; and then ... that&#39;s it.</p>
<p>Now somehow with this data in the &quot;Test&quot; file, I&#39;ll hopefully start being able to learn how to graph a channel and do a &quot;dashboard&quot; at some point.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30955"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sat, 06/06/2015 - 04:31.</div>
    <div class="content">
     <p><em>For the GEM, real time status is OFF. I think the GEM is set to Client</em></p>
<p>Real-time mode <strong><em>on</em></strong> is client mode, so if you have it set to OFF, your GEM is in server mode...</p>
<p>But, that being said, it&#39;s good to hear you&#39;re making progress!</p>
<p>Sounds like your inputs are working correctly. Clicking on the wrench icon on the Inputs screen will enable you to set up your feeds, and configure emoncms to do things like make kWh and kWh per day calculations that you can then use to drive the various graphs and widgets on your dashboard.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30956"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sub3marathonman&#039;s picture" title="sub3marathonman&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed</h3>

    <div class="submitted">Submitted by <a href="../user/8238.html" title="View user profile.">sub3marathonman</a> on Sat, 06/06/2015 - 04:37.</div>
    <div class="content">
     <p>Thanks, I didn&#39;t know that the real time choice influenced the client/server choice, but I do remember that there seemed to be an emphasis on having real time status set to OFF.</p>
<p>I think I&#39;ve got enough now to at least gather some data, maybe an entire day, and then start to learn about displaying the data.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30957"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms version 8.5 on localhost with Windows 8 Newbie Help Needed</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sat, 06/06/2015 - 04:40.</div>
    <div class="content">
     <p>The btmon.py config page says: <em>In most cases btmon should be in blocking (client) mode, accepting real-time packets from the GEM,</em> which makes sense as you normally would want your GEM to be sending data to emoncms. (which, in that respect, mimics emonTX operation)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10798"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Pfmn4_C7V90fvEjLIlZTmyv1MN6pQz_NF2R7TzzJVtE" value="form-Pfmn4_C7V90fvEjLIlZTmyv1MN6pQz_NF2R7TzzJVtE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/10798 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:14 GMT -->
</html>
