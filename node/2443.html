<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2443 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:50:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Event Module - Update | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Event Module - Update</h3>
        <span class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 06/06/2013 - 08:54</span>
        <div class="content"><p>As for the Event plugin, sorry for not being more responsive, but between work, kids and trying to finish my energy monitor project I am always a couple of days behind in reading the forum. (I&#39;m the one that did the modifications and then left Paul to handle all the details :) )</p>
<p>&nbsp;</p>
<p>Anyway ... I am working on some improvements to the event plugin and I guess this is as good a place as another to discuss them.</p>
<p>&nbsp;</p>
<p>What I am planning to add:</p>
<ul>
<li>
		Event types: handle events in case of manual feed update: the idea is to have a simple way to react to dashboard events like a button push</li>
<li>
		Notification systems:</li>
<li>
		Add an option for executing a shell script : together with the manual</li>
<li>
		Add support for notify my android</li>
<li>
		General: add the notion of &#39;Clearing&#39; an event: the idea is to have the possibility to request a notification when an event that was previously triggered gets back to normal (event on temp &gt; 25 degrees, clear when temp goes back to &lt; 25 degrees or, in my case, event when a pump switches on, clear when it turns off). I know it is cosmetic, but I think it would help in having a quicker way other than looking at the feed graphs to monitor what happened.</li>
</ul>
<p>Before starting hacking at it it would make sense to gather also other requests and try and organize them in a coherent fashion, so if anyone has some wishes about adding things to the event module I think this would be the best moment to speak them out. I&#39;ll try to put ll things together and hopefully to start working on it shortly</p>
<p>&nbsp;</p>
<p>Regards</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2881.html" class="topic-previous" title="Go to previous forum topic">‹ Help needed raspberry pi emoncms stopped working. Settings.php error</a>
              <a href="2904.html" class="topic-next" title="Go to next forum topic">Emoncms: Calculations on Daily Figures &amp; Daily pulse count ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-12700"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 06/06/2013 - 19:48.</div>
    <div class="content">
     <p>Thanks Mattia</p>
<p>My thoughts for development are;</p>
<ol>
<li>
		At the present time, repeat alerts are muted by selecting a &#39;mute time&#39; from a drop-down list, but if this mute time is exceeded AND the event still remains TRUE, then repeat alerts are sent. Also if long mute times are selected, then new events are disregarded. A more sophisticated trigger reset would be helpful, &nbsp;so for example, the trigger not be reset until such time as the event has returned FALSE. This would result in just <strong>one alert</strong> being dispatched for each time the event status changed from FALSE to TRUE, with no repeat alerts until it&#39;s status had changed back from TRUE to FALSE. It may be beneficial to combine this with a small fixed mute time, say 1 minute, to prevent instability.</li>
<li>
		&#39;Notify my Android&#39; - would this be compatible with iOS (iphones)? There are many Prowl services available for Android &amp;&nbsp;iOS users, Howl, NMA, Prowl &amp; Boxcar to name just a few. It would be good if there were user configuration options so that the URL and Postdata can be changed to accommodate the different services.</li>
</ol>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12706"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3329.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3329.jpg" alt="lobolobo&#039;s picture" title="lobolobo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3329.html" title="View user profile.">lobolobo</a> on Fri, 07/06/2013 - 05:17.</div>
    <div class="content">
     <p>Thank you very much Mattia.</p>
<p>How about one checkbox to activate or deactivate&nbsp;the notification? Sometimes you want &nbsp;to deactivate the notification temporarily&nbsp;instead of delete it.</p>
<p>&nbsp;</p>
<p>Regards.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12716"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Fri, 07/06/2013 - 13:33.</div>
    <div class="content">
     <p>@lobolobo:</p>
<p>The checkbox for temporarily disabling the event won&#39;t be a problem.</p>
<p>@Paul:</p>
<p>1.I agree, once the concept of &nbsp;clearing an event is introduced the mute option could be extended with a &#39;Warn only once&#39; feature that would avoid repetitions. Don&#39;t know about the fixed mute time .. maybe leaving that as an option initially set to 0 since it would cause questions from people who don&#39;t read the docs (or the code in this case) and expect multiple notices&nbsp;</p>
<p>2.I think Notify my android is what you call NMA, and I haven&#39;t done a thorough research but from what I understand prowl only has an ios client &nbsp;and I wouldn&#39;t have any way to test it.. anyway I think you already can successfully use the &#39;call url&#39; action, that could be extended to accept placeholders like {feed_id},{feed_value},{timestamp} to access whatever service.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12759"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sat, 08/06/2013 - 22:41.</div>
    <div class="content">
     <p>Well, as I wrote it selfishly as I only had an iPhone, I&#39;d suggest adding in NMA support for Android. (Perhaps utilising&nbsp;https://github.com/snider/php-notifyMyAndroid) .. Oh, and my iPhone has bust and I&#39;ve bought an Android Samsung phone!</p>
<p>May try and add some time into this tomorrow to add. So, current status? I need to add in the stuff that was posted to Martin to get events running again? At the moment it seems quite broken.</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12768"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 09/06/2013 - 11:13.</div>
    <div class="content">
     <p>I&#39;ve added in a test of the NMA into the repo. Anyone with a working system fancy testing it for me?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12777"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 09/06/2013 - 15:19.</div>
    <div class="content">
     <p>In terms of shell scripts, I just put a PHP container script in a difficult to guess folder. Then just use the URL caller.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12809"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Mon, 10/06/2013 - 09:06.</div>
    <div class="content">
     <p>Ok, elyobelyob&nbsp;is much quicker than me and added a working version of the NMA notifier</p>
<p>Just remember to run the database check and update in the admin tab since a new column in the event_settings table must be created</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12837"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 10/06/2013 - 22:32.</div>
    <div class="content">
     <p><em>....I just put a PHP container script in a difficult to guess folder. Then just use the URL caller. </em>&nbsp;- &nbsp;elyobelyob</p>
<p>Good idea Nick, I&#39;m trying to use a free&nbsp;iOS&nbsp;&#39;push&#39; service - <a href="http://boxcar.io/"><strong>Boxcar</strong>,</a> and have a script (attached as a *.txt file - php&nbsp;uploads not allowed in OEM) which I&#39;ve added in &nbsp;..event/scripts/boxcar/boxcar_send.php &nbsp;(plus an&nbsp;api file both of which came from <a href="https://github.com/boxcar/Boxcar-PHP-Provider">here</a>.)</p>
<p>To call the script <strong>$ php boxcar_send.php</strong> sends a push alert to my phone - Success!!</p>
<p>I want to make the alert more informative, and include the current feed reading that originated the event, etc, but not sure how to do it, so any advice would be great.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12841"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Tue, 11/06/2013 - 08:05.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>you could change feed_model.php, function check_feed_event and add support for using a placeholder in the curl url:</p>
<p>&nbsp;</p>
<p>&nbsp;(in check_feed_event, second switch):</p>
<p>case 2:<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // call url</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $body = str_replace(&#39;{value}&#39;, $value, $row[&#39;callcurl&#39;]);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ch = curl_init();<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // set URL and other appropriate options<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; curl_setopt($ch, CURLOPT_URL, $body);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; curl_setopt($ch, CURLOPT_HEADER, 0);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; curl_setopt($ch, CURLOPT_TIMEOUT, 1);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // grab URL and pass it to the browser<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; curl_exec($ch);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // close cURL resource, and free up system resources<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; curl_close($ch);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error_log(&quot;Curl Log:&quot;.$row[&#39;callcurl&#39;]);</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>and then create an event with the path to the php script, with some parameters:</p>
<p>&lt;path&gt;/event/scripts/boxcar/boxcar_send.php?msg=Feed Value is {Value}&amp;title=Feed Myfeed Title - {Value}</p>
<p>&nbsp;</p>
<p>and modify your script to process input parameters:</p>
<p>&lt;?php<br />
	/**<br />
	* Sample file for the boxcar php provider client<br />
	*<br />
	* @author Russell Smith &lt;russell.smith@ukd1.co.uk&gt;<br />
	* @copyright UKD1 Limited 2010<br />
	* @license licence.txt ISC license<br />
	* @see <a href="https://github.com/ukd1/Boxcar" title="https://github.com/ukd1/Boxcar">https://github.com/ukd1/Boxcar</a><br />
	*/</p>
<p>define(&#39;API_KEY&#39;, &#39;J2FXXXXXXXXXXFm&#39;);<br />
	define(&#39;API_SEC&#39;, &#39;QcFfxXXXXXXXXXXXXXXXXXXXXXXImI&#39;);<br />
	define(&#39;YOUR_EMAIL&#39;, &#39;myemail@gmail.com&#39;);</p>
<p>$msgTitle = &#39;Test Message&#39;;<br />
	$msgBody = &#39;Test Body&#39;;</p>
<p>if(isset($_GET[&quot;msg&quot;])){<br />
	$msgBody = $_GET[&quot;msg&quot;];<br />
	}<br />
	if(isset($_GET[&quot;title&quot;])){<br />
	$msgTitle = $_GET[&quot;title&quot;];<br />
	}</p>
<p>
	if (!function_exists(&#39;curl_init&#39;)) {<br />
	trigger_error(&#39;CURL must be enabled for boxcar_api to function&#39;, E_USER_ERROR);<br />
	}</p>
<p>// load the api class<br />
	require_once &#39;boxcar_api.php&#39;;</p>
<p>// this is needed to stop warnings when using the date functions<br />
	date_default_timezone_set(&#39;Europe/London&#39;);</p>
<p>// send alert<br />
	boxcar_api::factory(API_KEY, API_SEC, &#39;http://store.ukd1.co.uk.s3.amazonaws.com/ukd1_small.png&#39;)-&gt;broadcast($msgTitle, $msgBody);</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Please keep in mind that I haven&#39;t tested any of this so you will have to proof it for syntax errors ... hope it helps ..</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12843"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 11/06/2013 - 08:37.</div>
    <div class="content">
     <p>Thanks Mattia, I&#39;ll try that tonight.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12844"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 11/06/2013 - 09:07.</div>
    <div class="content">
     <p>I&#39;ve just merged the pull request to enable events in the feed module, sorry for the slow merge, thanks for the nudging tweet and email Paul. I&#39;m&nbsp;wondering whether to have a setting in settings.php with something like $enable_events = true; rather than calling&nbsp;if (is_dir(realpath(dirname(__FILE__)).&#39;/../event/&#39;)) &nbsp;each time?</p>
<p>This all looks like great work on the event module, particularly interested in the notify my android.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12848"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Tue, 11/06/2013 - 09:50.</div>
    <div class="content">
     <p>I&#39;ve just added my latest changes to events repo (and fixed my mqtt module, to allow me to test). So definitely working, now. I did work blind over the weekend, thanks to madmatt for checking it.</p>
<p>Am happy for the feeds method to be altered. Personally though, events should be a standard module ;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12863"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 11/06/2013 - 13:19.</div>
    <div class="content">
     <p>Im thinking it might be good to make email global and if we use the swift mailer library installed via pear globally (not included in emoncms repo but an installation step requirement) that will keep the repository clean, the installation steps for swift mailer on linux are:</p>
<pre>
pear channel-discover pear.swiftmailer.org

pear install swift/swift</pre><p>In settings.php you then have</p>
<p>$email = array(<br />
	&nbsp;&nbsp;&nbsp; &#39;server&#39; =&gt; &quot;mail.emoncms.org&quot;,<br />
	&nbsp;&nbsp;&nbsp; &#39;port&#39; =&gt; 26,<br />
	&nbsp;&nbsp;&nbsp; &#39;username&#39; =&gt; &quot;notify@emoncms.org&quot;,<br />
	&nbsp;&nbsp;&nbsp; &#39;password&#39; =&gt; &quot;notrealpass&quot;,<br />
	&nbsp;&nbsp;&nbsp; &#39;fromaddress&#39; =&gt; &quot;notify@emoncms.org&quot;,<br />
	&nbsp;&nbsp;&nbsp; &#39;fromtitle&#39; =&gt; &quot;emoncms.org&quot;</p>
<p>&nbsp; );</p>
<p>from which any module in emoncms can use to send emails, such as implementing a forgotten password feature.</p>
<p>What do you think?</p>
<p>Just got a NMA event to fire, worked great!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12865"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Tue, 11/06/2013 - 13:43.</div>
    <div class="content">
     <p>Is that enough info for Google Apps mail? Won&#39;t it need secure connection or something, or is that just port info?</p>
<p>Anyway, I&#39;m not fussed if it gets moved, but reckon this could trip up a few people who blindly update in future (as I just learnt!). The current setup was used quickly to supply myself with a quick Google Apps solution. I wouldn&#39;t go down the road of hosting the mail server on your own servers for us to proxy through.</p>
<p>Yeah, the NMA thing is cool. Got so used to Prowl on iPhone, it was a must have within minutes of moving phones.</p>
<p>The event module could do with some javascript tidying, if anyone is good at that. e.g. making sure the &quot;add new event&quot; has the correct fields showing as default. Would be nice to edit the existing event (e.g. move from prowl to NMA). Perhaps allow manually editing of the NMA/Prowl/etc messages .. .</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12866"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 11/06/2013 - 14:36.</div>
    <div class="content">
     <p>I&#39;ve just got the event settings module to save using js here in same way as the raspberrypi module saves its settings with the saved label appearing after a successful update. Il test gmail as the mail server.</p>
<p>A global email account would be installation specific so you can set it to gmail if its a your own installation, yes not thinking of hosting a mail server for all local/remote emoncms installations to use. Just something quite similar to the way drupal or wordpress arrange notification emails, do you think that&#39;s&nbsp;the right way to be thinking about it? or would there be advantages to each of us say on the hosted install at emoncms.org entering our own email server details?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12868"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Tue, 11/06/2013 - 15:29.</div>
    <div class="content">
     <p>In a hosted environment like emoncms.org that would shift the burden of successfully delivering a message from the provider chosen by each user to the provider chosen by you .. all messages for all the users would originate from a single domain / possibly from a single user &nbsp;unless you have a smtp server installed, configured and willing to forge the sender address with a custom sender address per emoncms user ...</p>
<p>Also, in your hosted environment the event module could easily become a cpu intensive task since it will execute at least one query per feed update &nbsp;....</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12880"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Tue, 11/06/2013 - 19:40.</div>
    <div class="content">
     <p>Just got this working on my setup and NMA&nbsp;and gmail notifications are working great for the set value triggers but I can&#39;t get the inactive trigger to work. Is this trigger broken or have I missed something in the setup?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12884"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Tue, 11/06/2013 - 21:07.</div>
    <div class="content">
     <p>Hi ngbod,</p>
<p>in the current version the inactive check is disabled.</p>
<p>I do have a version with the inactive check working I&#39;m almost ready to push, but it is together with a bunch of stuff that I still have to test.</p>
<p>&nbsp;</p>
<p>If you feel like applying a patch this one</p>
<p>diff --git a/event_model.php b/event_model.php<br />
	index 93711da..9b10bdb 100644<br />
	--- a/event_model.php<br />
	+++ b/event_model.php<br />
	@@ -124,16 +124,17 @@ class Event<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; global $user,$session,$feed;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $userid = $session[&#39;userid&#39;];</p>
<p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $result = $this-&gt;mysqli-&gt;query(&quot;SELECT * FROM event WHERE eventfeed = $feedid&quot;);<br />
	+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $result = $this-&gt;mysqli-&gt;query(&quot;SELECT * FROM event WHERE eventfeed = $feedid or eventtype=3&quot;);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // check type<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while ($row = $result-&gt;fetch_array()) {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($row[&#39;lasttime&#39;]+$row[&#39;mutetime&#39;] &gt; time() ) {<br />
	-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br />
	+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $sendAlert = 0;<br />
	+<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch($row[&#39;eventtype&#39;]) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 0:<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // more than<br />
	@@ -157,6 +158,13 @@ class Event<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // inactive<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // not sure this can be called as no feed updated<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //if (((time()-$row[&#39;lasttime&#39;])/3600)&gt;24) {}<br />
	+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $feedData = $feed-&gt;get($row[&#39;eventfeed&#39;]);<br />
	+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //error_log(&quot;Feeddata: &quot; .$feedData-&gt;time);<br />
	+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $t = time()- strtotime($feedData-&gt;time);<br />
	+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //error_log(&quot;t: &quot; .$t);<br />
	+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($t &gt; $row[&#39;eventvalue&#39;]){<br />
	+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $sendAlert = 1;<br />
	+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 4:<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // updated</p>
<p>&nbsp;</p>
<p>applied to feed_model.php will enable the inactive detection, and you can choose after how many seconds of inactivity the alert should be raised.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12886"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 11/06/2013 - 21:43.</div>
    <div class="content">
     <p>Madmatt</p>
<p>I&#39;ve tried the changes above to try and get Boxcar working, and if I use the curl url;</p>
<p>..../event/scripts/boxcar/boxcar_send.php?msg=Feed%20Value%20is%20{Value}&amp;title=Feed%20Myfeed%20Title%20-%20{Value}</p>
<p>I get a push message;</p>
<p><strong>Feed Myfeed Title - {Value}</strong><br />
	Feed Value is {Value}</p>
<p>ie It does not retrieve the {Value}</p>
<p>also, the blue &#39;last true&#39; box is missing from the event page.</p>
<p>You mentioned changing feed_model.php in your post, what changes are needed.</p>
<p>Thanks</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12889"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 12/06/2013 - 07:23.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>the correct syntax for the placeholder is {value} (not {Value}) otherwise it won&#39;t get substituted, but I finally had the time to look at the javascript and as it is it won&#39;t work. The javascript logic to create a new event is flawed, and no email/curl link and anything that is not an integer in the notification field gets saved (also the last true display logic isn&#39;t working for fields difefrent from email).</p>
<p>Will try and have a look at it today.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12893"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 12/06/2013 - 08:23.</div>
    <div class="content">
     <p>I stand corrected .. the javascript&nbsp;logic doesn&#39;t work in chrome, while it works in firefox (don&#39;t have access to IE so can&#39;t test on that)</p>
<p>also, in order for curl to work you must have installed php5-curl&nbsp;(apt-get install php5-curl)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12897"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Wed, 12/06/2013 - 10:43.</div>
    <div class="content">
     <p>Just merged in MadMatt&#39;s changes. Thanks Mattia.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12900"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 12/06/2013 - 11:38.</div>
    <div class="content">
     <p>@Paul: The changes I pushed include an updated version of the curl mods, and a fix for the last true field not showing</p>
<p>@Ngbod: The changes also include support for the inactive feed&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12906"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 12/06/2013 - 13:28.</div>
    <div class="content">
     <p>@All:</p>
<p>I just pushed another changeset that adds a test button and an enable/disable button to the event list.</p>
<p>As soon as elyobelyob&nbsp;is able to approve it it will be available for everyone to test</p>
<p>Enjoy</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12909"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Wed, 12/06/2013 - 13:49.</div>
    <div class="content">
     <p>Merged .. don&#39;t forget to update your db schemas all ...&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12913"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Wed, 12/06/2013 - 14:09.</div>
    <div class="content">
     <p>madmatt .. I have a few cURL scripts that run on local IP and port e.g. <a href="http://192.168.1.55:5151/script.php" title="http://192.168.1.55:5151/script.php">http://192.168.1.55:5151/script.php</a> .. are you sure the changes to cURL will allow this? Just checking before I investigate my own scripts (that have been fine until now .. )</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12914"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 12/06/2013 - 14:18.</div>
    <div class="content">
     <p>.. They should, I only added the logic to split the parameters (if any) from the url and apply space escaping and value substitution to the parameters part.</p>
<p>If the url in question does not have parameters no harm should come from it (I have checked a standard url like htttp://localhost/a.php ) ...</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12918"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Wed, 12/06/2013 - 14:47.</div>
    <div class="content">
     <p>OK, ignore me .. I think there is a problem on my own script .. as it hasn&#39;t been notifying me from there .. however the emonCMS&nbsp;event trigger is fine!</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12920"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Wed, 12/06/2013 - 14:57.</div>
    <div class="content">
     <p>Thanks for all the changes Mattia, but it&#39;s a little embarrassing when you fix all the whitespace I left around ;) Ha ha.</p>
<p>My excuse is that I was coding mostly over Christmas, generally intoxicated to a degree the whole time .. and when everyone else had passed out. :)</p>
<p>How easy would it to create an &quot;edit&quot;? I sometimes just want to change the mute time or something, minor changes that I hack the db directly for.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12927"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 12/06/2013 - 18:52.</div>
    <div class="content">
     <p>@elyobelyob: the edit button shouldn&#39;t be much harder than the enable/disable button</p>
<p>&nbsp;As for the whitespaces&nbsp;i cheat and use sublime text, that automatically removes trailing spaces when you save the file...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12935"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 12/06/2013 - 21:58.</div>
    <div class="content">
     <p>Great work, the disable/enable &amp; test buttons are welcome additions to this module.</p>
<p>I&#39;ve again tried to send push iOS messages via Boxcar, with a degree of success. If I call the URL;</p>
<p>&lt;path&gt;/event/scripts/boxcar/boxcar_send.php?msg=Feed%20Value%20is%20{value}&amp;title=Feed%20Myfeed%20Title%20-%20{value}</p>
<p>I get a push message;</p>
<p><strong>Feed Myfeed Title - 703</strong><br />
	Feed Value is 703</p>
<p>So it is now successfully reproducing the feed value but not the name of the feed, which isn&#39;t so much a problem as I can edit the URL to identify individual events.</p>
<p>Again, many thanks Mattia&nbsp;&amp; Nick.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12939"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3329.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3329.jpg" alt="lobolobo&#039;s picture" title="lobolobo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3329.html" title="View user profile.">lobolobo</a> on Thu, 13/06/2013 - 05:08.</div>
    <div class="content">
     <p>Thanks for the work men. Great.!!! :-)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12943"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Thu, 13/06/2013 - 09:49.</div>
    <div class="content">
     <p>Thanks again Mattia, edit functionality merged in ...&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12944"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 13/06/2013 - 09:50.</div>
    <div class="content">
     <p>Hi all, just pushed a request that adds the edit feed functionality and also adds the {feed} placeholder in the curl url call.</p>
<p><strike>As soon as Elyobelyob integrates it it will be available for download. </strike>Elyobelyob already pulled it ... man I hope he&#39;s at least giving it a look before hitting the merge button ;)</p>
<p>&nbsp;</p>
<p>Right now my to do list has pretty much exhausted, except for the CLEAR functionality that I&#39;m still waiting for inspiration to begin tackling and the shell script option is pretty much covered by the call url option, I think. So if anyone has some more ideas I should be up for some other changes, I really like how both the backend and the frontend code is structured and it is really easy to add functionality (If you know what you&#39;re doing, I guess)</p>
<p>Enjoy and please test the edit thing .. I did some tests but they are by no mean exhaustive.</p>
<p>&nbsp;</p>
<p>Regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12946"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Thu, 13/06/2013 - 10:10.</div>
    <div class="content">
     <p>I read through the source changes and it looked sensible enough. :) Thought to myself, glad I don&#39;t mess about with JS&nbsp;in my day job :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12951"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Thu, 13/06/2013 - 12:05.</div>
    <div class="content">
     <p>@madmatt I am wondering about the inactive method. Is it currently checking against the &#39;idle&#39; time? To me, the inactive time is the time when it displays as inactive on the feeds page .. which I think is hard coded to 24 hours. (This should be user adjustable, TBH). So, for me, when a major sensor is inactive, I would want to be updated after 24 hours (or another pre-determined time), but would want to keep the mute time so that I don&#39;t get swamped by messages. (is this even possible?) ..&nbsp;</p>
<p>I have created a test, which is currently telling me that my lounge temp sensor is inactive, however I watched the feed, and it only went for 1 minute or so between updates.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12952"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 13/06/2013 - 12:12.</div>
    <div class="content">
     <p>Hmm, that&#39;s because in my version of the inactive check you should specify the time after which you want the alert to be sent in the value field .. but I didn&#39;t enable the field to write the value in, so I guess it just kicks the alert as soon as the first new feed update comes in.</p>
<p>I am pushing a fix right now, and if you want the inactive event to kick after 24 hours you should put 86400 in the value field.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12957"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Thu, 13/06/2013 - 13:48.</div>
    <div class="content">
     <p>Thanks have also made a couple of changes. Firstly I allowed that field to show in the front end, as well. I also renamed &quot;not-prowl&quot; to &quot;not-priority&quot; as it was misleading in the code .. I think the priority works fine with NMA too.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12967"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 13/06/2013 - 20:36.</div>
    <div class="content">
     <p><u><strong>Boxcar for iOS</strong></u></p>
<p>Thanks to Mattia &amp; Nick, I&#39;ve now got push alerts being sent to my iPhone, via the free app - <a href="https://itunes.apple.com/app/boxcar/id321493542?ign-mpt=uo%3D6&amp;mt=8">Boxcar </a>so I thought that I&#39;d add a few bits &amp; pieces if anyone else wants to try it.</p>
<p>1) Make sure that you are up to date with the current event&nbsp;module in Github, as many changes have taken place recently, and this will only work with the new version.</p>
<p>2) Create a <a href="http://boxcar.io/site/providers">free &#39;Provider&#39; account </a>at Boxcar and make a note of your API key and API Secret. Also install Boxcar on your phone via iTunes.</p>
<p>3) Navigate to the .../emoncms/Modules/event/scripts folder and create a new folder beneath &#39;scripts&#39;. Use an obscure name to stop visitors from guessing and making false alerts, but for now I&#39;ll call it &#39;boxcar&#39;. Copy the attached 2 files from the attached zip into the directory.</p>
<p>4) Install php-curl&nbsp;<strong>$&nbsp;apt-get install php5-curl</strong></p>
<p>5) Edit the boxcar_send.php file and add your email address, API key &amp; API secret, where indicated.</p>
<p>6) In emoncms&nbsp;&gt; Extras &gt; Event set up your alert, and select the &#39;call url&#39; option. In the next field add the full http address to your boxcar_send.php file, and followed by the msg &amp; title information, using this as an example;</p>
<p>http://www.yourdomain.com/emoncms/Modules/event/scripts/boxcar/boxcar_send.php?msg=The%20{feed}%20feed%20is%20currently%20{value}%20degC&amp;title={feed}%20Alert</p>
<p>Once added, try a &nbsp;test and hopefully, almost instantly, you should receive something like the screenshot below (if using the url I&#39;ve used as a demo above).</p>
<p>I think that&#39;s about it, but if I&#39;ve missed anything, PM me and I&#39;ll correct/add it.</p>
<p>Paul</p>
<p>PS - Just remembered!, the placeholder{feed} retrieves your feed name, so ensure that you don&#39;t have any spaces in it (that&#39;s why my example is &#39;Greenhouse_temp&#39; and not &#39;Greenhouse temp&#39;.&nbsp;</p>
<p><img alt="" src="../sites/default/files/photo_1.png" style="width: 320px; height: 480px;" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12978"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Fri, 14/06/2013 - 08:37.</div>
    <div class="content">
     <p>Sounds like it&#39;d be easier to add native boxcar support to the event module. However, I was always a fan of Prowl when on iPhone.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12979"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 14/06/2013 - 09:22.</div>
    <div class="content">
     <p><em>....Sounds like it&#39;d be easier to add native boxcar support to the event module</em></p>
<p>You are probably right Nick. I wish I had the skills to do it!</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12980"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Fri, 14/06/2013 - 09:32.</div>
    <div class="content">
     <p>Just pushed in some changes to add {feed} to other types as well. In fact, the whole message creator could do with a review to standardise it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12981"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Fri, 14/06/2013 - 09:32.</div>
    <div class="content">
     <p>@Paul Reed .... we&#39;re all cutting and pasting this stuff ourselves ;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12982"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Fri, 14/06/2013 - 09:48.</div>
    <div class="content">
     <p>Hmm, the email seems to be triggering constantly .. investigating ..&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12983"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Fri, 14/06/2013 - 10:12.</div>
    <div class="content">
     <p>Ignore last one .. managed to create a test event .. never having used the email before, I seem to receive two emails on that event .. weird. Is that usual behaviour?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12987"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Fri, 14/06/2013 - 11:36.</div>
    <div class="content">
     <p>@paul reed ... Native boxcar support added. &nbsp;Not tested ... can you have a play and let me know .. you&#39;ll need to run the admin db update first ...</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12988"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Fri, 14/06/2013 - 11:44.</div>
    <div class="content">
     <p>Small, but necessary, fix just pushed ..&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12992"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 14/06/2013 - 19:18.</div>
    <div class="content">
     <p>Hi Nick, just tried the latest, and I think that the boxcar email field is missing from the &#39;Event Settings&#39; page.<br />
	It presently won&#39;t save the settings and returns the error;</p>
<p>Notice: Undefined variable: boxcaremail in /var/www/emoncms/Modules/event/event_model.php on line 77</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13000"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 16/06/2013 - 12:05.</div>
    <div class="content">
     <p>Did you run the db update?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13001"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 16/06/2013 - 12:38.</div>
    <div class="content">
     <p>No, you were right. I left email in there as was in the sample, realised later it was a bad example. Updated and pushed.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13003"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 16/06/2013 - 13:04.</div>
    <div class="content">
     <p>Somethings not right..</p>
<p>I&#39;ve just updated your latest commit and all of my feeds have suddenly stopped updating!</p>
<p>They were working fine until I ran the&nbsp;git pull &amp;&nbsp;updated the database, but now they arent working at all.</p>
<p>I&#39;ve done a reboot - still not working</p>
<p>Doesn&#39;t Boxcar need the &#39;Boxcar email address&#39; as well as the API key &amp; API secret?</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13005"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 16/06/2013 - 13:30.</div>
    <div class="content">
     <p>Digging out my old iPhone testing .. will test and update shortly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13006"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 16/06/2013 - 15:02.</div>
    <div class="content">
     <p>It&#39;s weird. Boxcar is returning a 401 error, despite me using their API documented code. I can still send the other messages. What&nbsp; do you mean by &#39;stopped updating&#39;?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13010"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 16/06/2013 - 19:05.</div>
    <div class="content">
     <p>Hi Nick, sorry had visitors all afternoon..</p>
<p>When I updated to your git merge of about 1pm today, all of my feeds stopped updating, ie&nbsp;despite my emontx&#39;s sending data, they were not recorded in emoncms.<br />
	So something was definitely&nbsp;amiss.</p>
<p>A few moments&nbsp;ago, I did another git pull from the event master, and now all of my feeds have again started updating emoncms - Phew! &nbsp;but it&#39;s still not sending alerts, I don&#39;t know if it&#39;s working on your system?</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13012"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 16/06/2013 - 19:37.</div>
    <div class="content">
     <p>I think the boxcart files didn&#39;t get imported into git previously. Not sure why not. Anyway, they are there now. I&#39;ve also added in the email in case that needs to be there (I was trying to use broadcast method at first).</p>
<p>&nbsp;</p>
<p>So, when I test the &#39;test&#39;, it calls a URL like event/test.json?id=46&amp;feedid=1 .. in there the boxcar comes with an error ..</p>
<p><b>Fatal error</b>: Uncaught exception &#39;boxcar_exception&#39; with message &#39;Request failed (Probably your fault)&#39; in /var/www/emoncms/Modules/event/scripts/boxcar/boxcar_api.php:200 Stack trace: #0 /var/www/emoncms/Modules/event/scripts/boxcar/boxcar_api.php(171): boxcar_api-&gt;default_response_handler(Array) #1 /var/www/emoncms/Modules/event/scripts/boxcar/boxcar_api.php(110): boxcar_api-&gt;do_notify(&#39;notifications&#39;, &#39;email@email.com&#39;, &#39;EmonCMS&#39;, &#39;TEST - Feed is ...&#39;, 999, NULL, NULL, NULL) #2 /var/www/emoncms/Modules/event/event_model.php(409): boxcar_api-&gt;notify(&#39;email@email.com&#39;, &#39;EmonCMS&#39;, &#39;TEST - Feed is ...&#39;, 999) #3 /var/www/emoncms/Modules/event/event_model.php(125): Event-&gt;check_feed_event(46, 1371404574, 1371404574, &#39;18.6&#39;, NULL, true) #4 /var/www/emoncms/Modules/event/event_controller.php(82): Event-&gt;test(&#39;1&#39;, 46, 1) #5 /var/www/emoncms/core.php(66): event_controller() #6 /var/www/emoncms/index.php(78): controller(&#39;event&#39;) #7 {main} thrown in <b>/var/www/emoncms/Modules/event/scripts/boxcar/boxcar_api.php</b> on line <b>200</b></p>
<p>As far as I can see, this should be working .. I have not a lot of boxcar experience, and thought I had created a provider correctly. It looks like the same version you were running via the curl method. All a bit confusing. Am also trying to figure out why the message doesn&#39;t&#39;always replace the {feed} and {value} ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13013"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 16/06/2013 - 19:39.</div>
    <div class="content">
     <p>Yes, I&#39;ve noticed that whenever the condition becomes TRUE, all of my feeds stop updating, so presumably the error above is causing this.</p>
<p>PS, I&#39;ve edited out your email address from the &#39;Fatal error&#39; log above.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13015"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 16/06/2013 - 19:50.</div>
    <div class="content">
     <p>I have just pushed in a try/catch which should handle the fatal error. I can&#39;t see why boxcar isn&#39;t working, though.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13016"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 16/06/2013 - 19:55.</div>
    <div class="content">
     <p>I&#39;m afraid it doesn&#39;t - just crashed again.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13017"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 16/06/2013 - 20:07.</div>
    <div class="content">
     <p>If you don&#39;t use the boxcar method, everything works ok? I may remove the boxcar method, as something with their API clearly doesn&#39;t work.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13018"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 16/06/2013 - 20:14.</div>
    <div class="content">
     <p>Agree.</p>
<p>Would have been nice to have it integrated, but I had it working using the &#39;call url&#39; OK which will suffice.</p>
<p>Can you roll back Git to the 13th June?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13020"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sun, 16/06/2013 - 20:39.</div>
    <div class="content">
     <p>I think I&#39;ve rolled back okay.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13026"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 16/06/2013 - 22:15.</div>
    <div class="content">
     <p>Afraid not;</p>
<p>pi@emoncmspi /var/www/emoncms/Modules/event $ git pull origin master<br />
	From <a href="https://github.com/emoncms/event" title="https://github.com/emoncms/event">https://github.com/emoncms/event</a><br />
	* branch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; master&nbsp;&nbsp;&nbsp;&nbsp; -&gt; FETCH_HEAD<br />
	Auto-merging event_model.php<br />
	CONFLICT (content): Merge conflict in event_model.php<br />
	Automatic merge failed; fix conflicts and then commit the result.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13047"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Mon, 17/06/2013 - 20:33.</div>
    <div class="content">
     <p>Sorry, been away all day. Have you made changes to event_model? It&#39;s the merge that&#39;s failing. More than likely deleting it via &#39;rm event_model.php&#39; will allow it to come back in fully. (Don&#39;t do a git rm though!) ..</p>
<p>Or check the changes that it&#39;s asking you to merge manually. Another method is to &#39;git checkout e7bc597283d475&#39; .. this should put it back to that earlier merge.</p>
<p>Personally, I&#39;d try the &#39;rm&#39; first. It should allow you to put it back to origin master.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13048"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Mon, 17/06/2013 - 20:38.</div>
    <div class="content">
     <p>Paul, yeah, sorry about that. Glad you got it going. That last thing was a git merge issue, the db was still fine. But, yeah, will try and be more careful ... really confused with boxcar. (Personally, Prowl on iPhone is much better :) )</p>
<p>I do notice that the {feed} doesn&#39;t always replace. Strange issue, as it works sometimes, but not every time. I&#39;ve tried moving the &#39;message&#39; replace method to a single place. Any ideas Mattia??</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13049"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 17/06/2013 - 20:39.</div>
    <div class="content">
     <p>Nick,&nbsp;</p>
<p>I took the cowards way out this evening and deleted the event folder in emoncms&nbsp;, and the 2 &#39;event&#39; tables in the database. Re-installed the event module from scratch via Git and everything back as normal, so your rollback has worked OK, and we still have a fully functioning event module in Git.</p>
<p>Thanks for your efforts yesterday, I could sense your frustration!</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13052"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Mon, 17/06/2013 - 21:31.</div>
    <div class="content">
     <p>Hi, haven&#39;t really looked at the source since saturday as it was changing all the time. Will try to sort out tomorrow the logic for the feed placeholder. Any hint about when it gets and when it doesn&#39;t get substituted ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13056"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Tue, 18/06/2013 - 07:34.</div>
    <div class="content">
     <p>The logic in the code looks good, are you sure that the placeholder is {feed} and not {Feed} or {feed } ?</p>
<p>Since the string replacement is case sensitive and isn&#39;t fuzzy that could be the case, if you relaly can come up with an example of when it works and when it doesnt (with a mysql&nbsp;select of the two event rows) that would definitely help in finding it out.</p>
<p>&nbsp;</p>
<p>Regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13060"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 18/06/2013 - 08:45.</div>
    <div class="content">
     <p>{feed} seems to work fine for me using a URL call to Boxcar <a href="2443.html#comment-12967">(as per this)</a>, however the feed name cannot contain spaces (because it&#39;s part of a URL), so I have renamed some of my feeds;</p>
<p>e.g. &nbsp;&#39;Greenhouse temp&#39; has become &#39;Greenhouse_temp&#39;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13062"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Tue, 18/06/2013 - 09:09.</div>
    <div class="content">
     <p>Hi Paul, in theory the latest version of the code should be able to understand a space in the feed name, the space to %20 substitution is the last operation performed on the parameters.</p>
<p>If that&#39;s not the case, please give me a couple of examples (I have no feeds with spaces to test them with) and will see what I can do</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13063"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 18/06/2013 - 10:03.</div>
    <div class="content">
     <p>You are correct Mattia, I changed my feed names when you first introduced {feed} and had not noticed that you had changed the code.</p>
<p>Works good for me, thanks</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13075"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Tue, 18/06/2013 - 21:24.</div>
    <div class="content">
     <p>OK, I have been through it loads testing and writing. Finally gave up hacking on command line. Rebooted my Pi and brought in a clean copy of event module. Seems fine now! Weird ... but not touching it again for a while now ;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13141"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 21/06/2013 - 18:44.</div>
    <div class="content">
     <p>Just noticed that there is a an hour&#39;s time difference between the time recorded in the &#39;Last True&#39; &nbsp;blue box, and the actual time the trigger took place.</p>
<p>It appears that emoncms&nbsp;takes account of &#39;British Summer Time&#39; and plots graphs etc according to the local time, whilst the blue &#39;Last True&#39; box <strike>obtains</strike>&nbsp;displays the time according&nbsp;to UTC.</p>
<p>Example, I set a trigger whose condition was met at 14:59 (BST) today, but the blue box recorded:<br />
	<strong>Last true: 2013-6-21 13:59:52 (UTC)</strong></p>
<p>Yet if I check the database, I see that the condition was met at&nbsp;1371823191 (Unix time) and the Last True is recorded as&nbsp;1371823192 - so both are pretty much the same time (in the database).</p>
<p>Paul.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13195"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Tue, 25/06/2013 - 10:01.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>sorry for the late answer .. shouldn&#39;t really read the forum on weekends because my brain resets on monday .... (and having the basement flooded on sunday evening doesn&#39;t help ...)</p>
<p>&nbsp;</p>
<p>Anyway, the code that sets the lasttime field on the event hasn&#39;t changed and it is pretty simple:</p>
<p>$this-&gt;mysqli-&gt;query( &quot;UPDATE event SET lasttime = &#39;&quot;.time().&quot;&#39; WHERE id=&#39;&quot;.$row[&#39;id&#39;].&quot;&#39;&quot; )</p>
<p>and the code that shows the time hasn&#39;t changed either:</p>
<p>echo &quot;&lt;span class=&#39;label label-info&#39; &gt;Last true: &quot;.date(&quot;Y-n-j H:i:s&quot;, $item[&#39;lasttime&#39;]).&quot;&lt;/span&gt;&quot;;</p>
<p>the time() &nbsp;function returns an epoch with no time zone, while the date() function uses that epoch and applies the default timezone&nbsp;set for the php&nbsp;environment. You can check which timezone you are using by creating a file named info.php:</p>
<p>&lt;? phpinfo(); ?&gt;</p>
<p>and opening it in the browser. Look for a configuration section named &quot;date&quot; where you can see which timezone your system is using</p>
<p>If you could post a couple of examples that include the time shown in the browser, &nbsp;actual timestamp on the database (select timestamp from event where event_id=xx) &nbsp;and the result of the &quot;date&quot; command on the raspberry command line it should be enough to sort out what&#39;s happening..</p>
<p>&nbsp;</p>
<p>Regards</p>
<p>&nbsp;</p>
<p>Mattia</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13219"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 25/06/2013 - 21:04.</div>
    <div class="content">
     <p>OK, well I set an event on feed_11 to trigger when &#39;power &gt;1000&#39;.<br />
	When I switched on a 2.2kW&nbsp;load at 21:17 (local time), the event triggered, and an alert was sent.<br />
	All charts in emoncms&nbsp;correctly show that the event triggered at 21:17;</p>
<p><img alt="" src="../sites/default/files/Charttime.png" style="width: 200px; height: 381px;" /></p>
<p>However, the &#39;last true&#39; blue box shows 20:17:50</p>
<p><img alt="" src="../sites/default/files/bluebox.png" /></p>
<p>Database entries - The lasttime entry in the &#39;event&#39; table is 1372191470 and the&nbsp;entry in the feed_11 table is timed at 1372191469.</p>
<p>The &#39;date&#39; command was run a few minutes later and returned;<br />
	<strong>pi@emoncmspi ~ $ </strong>date<br />
	Tue Jun 25 20:19:47 UTC 2013</p>
<p>phpinfo&nbsp;provided the following information;</p>
<p><img alt="" src="../sites/default/files/phpinfo.png" style="width: 500px; height: 194px;" /></p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13231"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 26/06/2013 - 08:26.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>your raspberry is set to UTC time zone, the graphs display the correct time because they use the time zone set in your browser/operating system.</p>
<p>The lasttime value&nbsp;1372191470 is correct and it&#39;s date value is: GMT: Tue, 25 Jun 2013 20:17:50 GMT (GMT is the same as UTC)</p>
<p>What you can do to have the lasttrue&nbsp;value show the correct time</p>
<p>1 - Change the timezone&nbsp;in the raspberry to your time zone (dpkg-reconfigure tzdata)</p>
<p>2 - have me change the lasttime display to take into account the locale settings for the current user: can do, nut you&#39;ll have the same problem whenever a date() function is used in any other module</p>
<p>3 - add to settings php&nbsp;this function call:</p>
<p>date_default_timezone_set ( &#39;Europe/London&#39;);</p>
<p>and see whether it works ;)</p>
<p>&nbsp;</p>
<p>Regards</p>
<p>&nbsp;</p>
<p>Mattia</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13261"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 26/06/2013 - 21:19.</div>
    <div class="content">
     <p>Many Thanks Mattia.&nbsp;</p>
<p>Option 1, followed by a reboot has resolved the issue. Now I get exactly the same &#39;alert time&#39; on both graphs and the &#39;Last True&#39; box.</p>
<p>Perhaps the <a href="http://emoncms.org/site/docs/raspberrypiimage">&#39;Ready to go image&#39; installation guide</a> needs updating to ensure that users change their timezone to ensure this issue is not repeated.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13688"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sjee&#039;s picture" title="sjee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by sjee (not verified) on Thu, 18/07/2013 - 14:15.</div>
    <div class="content">
     <p>Is there a possibility to hide the &#39;event settings&#39; link to non admin users? I tried to add something like &#39;if ($session[&#39;admin&#39;]==1)&#39; to the event_list.php but I can&#39;t get it to work.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13698"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Fri, 19/07/2013 - 08:08.</div>
    <div class="content">
     <p>Hi, you mean you changed this line:</p>
<p>&lt;div style=&quot;float:right;&quot;&gt;&lt;a href=&quot;&lt;?php echo $path; ?&gt;event/settings&quot;&gt;Event Settings&lt;/a&gt;&lt;/div&gt;</p>
<p>to&nbsp;</p>
<p>&lt;?php</p>
<p>if ($session[&#39;admin&#39;]==1){</p>
<p>?&gt;</p>
<p>&lt;div style=&quot;float:right;&quot;&gt;&lt;a href=&quot;&lt;?php echo $path; ?&gt;event/settings&quot;&gt;Event Settings&lt;/a&gt;&lt;/div&gt;</p>
<p>&lt;?php</p>
<p>}</p>
<p>?&gt;</p>
<p>and it didn&#39;t work ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13729"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sjee&#039;s picture" title="sjee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by sjee (not verified) on Sat, 20/07/2013 - 07:53.</div>
    <div class="content">
     <p>Hi,</p>
<p>Nope it did not work. But I just changed it to&nbsp;$_SESSION[&#39;admin&#39;]==1 which works. Thanks for your help.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13774"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Tue, 23/07/2013 - 10:26.</div>
    <div class="content">
     <p>Thanks to Mattia&nbsp;and other&#39;s hard work this is working great on my system now. A few times so far it has notified me via push gmail&nbsp;and NMA that my emontx&nbsp;has frozen, when I&#39;ve been at the other end of the country, so that I could get the wife to power cycle the emontx before too much data was missed.</p>
<p>Has anyone looked into taking the event module further to control household appliances say?</p>
<p>I was thinking that if the event module could be set to run a specific sketch when a defined feed reached a set value I could use, for example, 433mhz&nbsp;OOK rf controlled power sockets to switch from the top immersion to the bottom immersion on my PV diverter when the top tank sensor reached say 70C&nbsp;(or alternatively switch on a destrat&nbsp;pump for instance).</p>
<p>I was looking at Martin Harizanovs&nbsp;experiments with the rf&nbsp;socket controllers here. &nbsp;http://harizanov.com/2013/02/433mhz-ook-with-funky-v2-to-remotely-control-power-sockets/</p>
<p>I can think of&nbsp;several other uses these sockets could be put to in conjunction with the event module like switching on dishwashers etc when PV generation is above a certain level.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13937"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Tue, 30/07/2013 - 11:55.</div>
    <div class="content">
     <p>I would like to have something like this controlling my BBSB plugs, which could operate the lights etc. However, I&#39;d likely use the &#39;call a script&#39; functionality and build that myself.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13938"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Tue, 30/07/2013 - 12:23.</div>
    <div class="content">
     <p>I have thought a little bit about the possibility of expanding the capabilities of the event module other than the &nbsp;&#39;call a url an pray you obtain the result you expected&#39; &nbsp;it already has, and I think it&#39;s just not worth it.</p>
<p>What I mean is that for simple things the capability is already there:</p>
<ul>
<li>
		react to an event</li>
<li>
		set a feed / call an url</li>
<li>
		use a dashboard to show a led/button/state and display the result .. eventually use the same dasboard to control (with buttons/sliders) the feeds to which the event module reacts</li>
</ul>
<p>Other than that and you really need a two way communication to be able to handle anomalies, speed up response times ... and the event module (and emocms at the moment) just isn&#39;t the right tool for that job .. forwarding the events to a home automation system .. yes, acting as the home automation system ... no</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13987"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Thu, 01/08/2013 - 19:45.</div>
    <div class="content">
     <p>Hi Guys,</p>
<p>Thanks for all the work your doing around this great feature, I can&#39;t wait to get it working. Hope you can guide me or direct me to instructions on how to activate same. So far I&#39;ve registered with nma and have a key. The nma key is now in event settings and I&#39;ve set up notification to nma. Is that it or am I missing something else?&nbsp; I&#39;m using latest event module on hosted server so not sure about loading &quot;apt-get install php5-curl&quot; or it this only relevant when using RPI.</p>
<p>Cheers</p>
<p>Peter</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13989"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 01/08/2013 - 21:20.</div>
    <div class="content">
     <p>Hi Peter,</p>
<p>The php-curl&nbsp;module is needed only when you use the call url notify method ... And it is needed independently of the platform on which emoncms is installed. Is nma working for you? Please remember that unless you subscribe to the premium service you have a limit of 5 notifications per day...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14005"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PeterN&#039;s picture" title="PeterN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by PeterN (not verified) on Fri, 02/08/2013 - 07:23.</div>
    <div class="content">
     <p>Thanks for reply. Just to be sure I upgraded to latest event and emoncms today. I sent one test using nma send notification which was received on my phone ok.</p>
<p>Found the issue, I changed nma key at some stage during testing yesterday but didn&#39;t update to new key&nbsp; in emoncms event settings. It is working - excellent feature.&nbsp;</p>
<p>Thanks Peter</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14024"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Fri, 02/08/2013 - 21:28.</div>
    <div class="content">
     <p>In my previous comment I wasn&#39;t &nbsp;thinking of the event module controlling a full home automation system I was just thinking what if the event module could be made to run a simple OOK script as well as email/ NMA when a feed went above or below a certain value or when no data was received for a set time. This script could turn on or off or off then back on a RF plug socket and could be used for things like power cycling a frozen Emontx. Instead of just notifying you the emontx&nbsp;was not transmitting, the module could restart the emontx automatically without the user having to be present.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15574"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Fri, 04/10/2013 - 08:42.</div>
    <div class="content">
     <p>Hi,</p>
<p>I have found a need with this module that I think would be a great add on.</p>
<p>	More recently I have found a requirement to be notified when 2 things are true such as light level is low and Time is after 12PM.</p>
<p>	Currently due to the way that the system is built you can select only one of these to show as true and an action happen then, which means that when it gets dark, it turns my light on, then I have to wait the mute time. In the summer this was fine, but now I am finding my lights coming on at 6AM, not too bad at the moment as I am just getting up then, but this is only going to get earlier, and earlier until feb / march time.</p>
<p>The other situation I have found is I want to make a call to a notification system when the light levels of one room is high and the house consumption is high. Think workshop/loft lighting being left on accidentally after being called in.</p>
<p>How hard would it be to have something like this added, I am not famillular with OOP / MVC so this is a little outside my league...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15611"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="AngeloSala&#039;s picture" title="AngeloSala&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by AngeloSala (not verified) on Sun, 06/10/2013 - 21:13.</div>
    <div class="content">
     <p>Hi,</p>
<p>I have successfully installed and configured the EVENT module (no error).</p>
<p>I set up an allert and if i TEST it a mail has been sent successfully, but it doesn&#39;t work when the threshold is reached&nbsp;( no email ).</p>
<p>Any suggestions?</p>
<p>Any log file to read?</p>
<p>I am using emoncmspiv5avr0205_13</p>
<p>thank you</p>
<p>Angelo</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15615"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4424.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4424.gif" alt="fringui&#039;s picture" title="fringui&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by <a href="../user/4424.html" title="View user profile.">fringui</a> on Sun, 06/10/2013 - 23:10.</div>
    <div class="content">
     <p>I do some test with event...</p>
<p>i do a 60% of code for my house with arduino.. il work like a slave.. read all 1wire sensor and pub to oem..&nbsp;</p>
<p>if i add a sensor it work correctly and put sensor and value on OEM.. it&#39;s fantastic.</p>
<p>Now i need to do the rules to set the relays...&nbsp;</p>
<p>if a sensorX is greater of sensorY the on relays 1..</p>
<p>if a sensorX is greater of sensorY&nbsp;+Z the on relays 2..</p>
<p>etc etc...</p>
<p>With this system i have divide the logic of work to the reading of sensor.. it&#39;s simple and expandable without touch arduino code ;) it&#39;s FANTASTIC!!!</p>
<p>Arduino read sensor, write in OEM</p>
<p>-&gt;&gt;EVENT&lt;&lt;-</p>
<p>Arduino read OEM and set relays</p>
<p>Now i need to modify the event to do my program.. i try to do it...</p>
<p>if someone do that befone.. all ideas are FANTASTIC ;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15627"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="AngeloSala&#039;s picture" title="AngeloSala&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Event Module - Update</h3>

    <div class="submitted">Submitted by AngeloSala (not verified) on Mon, 07/10/2013 - 20:27.</div>
    <div class="content">
     <p>solved</p>
<p><a href="2448.html" title="http://openenergymonitor.org/emon/node/2448">http://openenergymonitor.org/emon/node/2448</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2443"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-L_2x-bAU1wQjDg89TFseZqIMk5UTo_CYOqmnti7SUbo" value="form-L_2x-bAU1wQjDg89TFseZqIMk5UTo_CYOqmnti7SUbo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
