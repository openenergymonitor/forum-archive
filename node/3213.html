<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3213 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:24:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonCMS and power outage | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonCMS and power outage</h3>
        <span class="submitted">Submitted by <a href="../user/4277.html" title="View user profile.">warlock</a> on Thu, 21/11/2013 - 08:18</span>
        <div class="content"><p>I hope someone can help out here,</p>
<p>So today our utility has a scheduled power outage from 08:00 to 16:00, just before the power went down the one feed had a reading of 457w, now when the power returns and say the first reading captured is for this discussion 457w emonCMS&nbsp;will average the power usage for the entire day and effectively record that I consistently used 457w throughout the day were in fact I was not using any power ? Surly the system should read 0&#39;s if no data it supplied rather than an average ?</p>
<p>So to that end, when the power does return and emonCMS averages out my usage how do I &nbsp;go about deleting the averaged out data ? and submitting zeros instead ?</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3215.html" class="topic-previous" title="Go to previous forum topic">‹ Back Building kWhd feeds.</a>
              <a href="3214.html" class="topic-next" title="Go to next forum topic">Multigraph viz always starts at the same historic date in time ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-16391"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonCMS and power outage</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 21/11/2013 - 10:42.</div>
    <div class="content">
     <p>Interesting case, If your using timestore you could go to vis &gt; editrealtime select your last datapoint before the outage and use the scale by box to multiply it by 0. If you then repeat this for the first data point after the outage it should correct that period.</p>
<p>It would be difficult to correct for this automatically as im not sure how you would distinguish from a monitor going offline where a higher average would be better than 0 and a power outage.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16398"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4277.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4277.jpg" alt="warlock&#039;s picture" title="warlock&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonCMS and power outage</h3>

    <div class="submitted">Submitted by <a href="../user/4277.html" title="View user profile.">warlock</a> on Thu, 21/11/2013 - 16:27.</div>
    <div class="content">
     <p>Thanks Trystan,</p>
<p>Ok so we have just had our power turned back on and a few second after it returned I see that the kWhd&nbsp;for my power consumption is reporting -96kw. these are SQL data points, interestingly the TIMESTORE&nbsp;feeds seem to be correct.</p>
<p>Can you please take a look at my feeds the user is rolfbartels feeds &nbsp;are 23444 and 23445</p>
<p>These I can fix with the API but I don&#39;t really want to have to do this every time I have a power failure. I just have mention that I am using Jeromes&nbsp;oem_gateway</p>
<p>&nbsp;</p>
<p>Thanks</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16399"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4277.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4277.jpg" alt="warlock&#039;s picture" title="warlock&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonCMS and power outage</h3>

    <div class="submitted">Submitted by <a href="../user/4277.html" title="View user profile.">warlock</a> on Thu, 21/11/2013 - 17:43.</div>
    <div class="content">
     <p>Ok I seem to have found a problem, I have been blaming emonCMS, but as it turns out it seems to be the oemgateway</p>
<p>I have attached 3 log files, bacically from what I can tell, when the power returns the oem_gateway is up before the internet connection, for that period while the internet is not contactable&nbsp;the gateway collects data, but the time stamp that it uses it the time stamp from the last ipe-rw ntp update. in my case it was the 29th Oct 2013. as soon as the gateway get&#39;s an ntp update it then starts posting data with the correct date, I am not sure why the data is in the negatives&nbsp;</p>
<p>&nbsp;</p>
<p>The 3 logs I have attached&nbsp;</p>
<p>1. the log file after the power returned you&#39;ll see for about 10 instances it tried to post with the date&nbsp;1383021372</p>
<p>2. the log file is were I disabled the ADSL connection and powered the gateway on to prove my theory,</p>
<p>3. Is where I re-enabled the ADSL and then powered on the gateway and would only see 1 post to&nbsp;1383021372</p>
<p>I will post this up on git hub.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3213"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-xFofQ0Ja2rQouqr17W1gx8BQicWvYb122LZb7gl4C0k" value="form-xFofQ0Ja2rQouqr17W1gx8BQicWvYb122LZb7gl4C0k"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
