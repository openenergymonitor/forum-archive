<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12150 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:47:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>New emoncms backup module | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">New emoncms backup module</h3>
        <span class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 08/02/2016 - 15:45</span>
        <div class="content"><p>Glyn and I have been working on a new emoncms backup/restore module. Modularising the backup feature recently added to the emoncms admin module and adding the ability to upload and import a backup file from a web browser.</p>
<p>The picture below shows what it looks like. When the create backup or import button is clicked, it triggers a backup script or import script to run in the background via a&nbsp; service-runner script. The output of the script is recorded to a log file which is shown in the log viewers so that it&#39;s possible to check on progress.</p>
<p>This is currently built for the emonpi and has paths hard coded for the emonpi. In time, we would like to make it generic for different installation environments.</p>
<p>For anyone interested in testing, the installation documentation can be found in the repository here: <a href="https://github.com/emoncms/backup">https://github.com/emoncms/backup</a> and involves installing the module in the home folder and symlinking a subfolder into emoncms. The module contains quite a few files that would be best not placed in a public html folder, in particular the mysql authentication extractor: <a href="https://github.com/emoncms/backup/blob/master/get_emoncms_mysql_auth.php" title="https://github.com/emoncms/backup/blob/master/get_emoncms_mysql_auth.php">https://github.com/emoncms/backup/blob/master/get_emoncms_mysql_auth.php</a>. Symlinking the required files into emoncms seemed like a good approach in this instance although I&#39;m not sure whether it&#39;s the best long-term solution given it&#39;s not the standard approach used with other modules.</p>
<p>A small change is needed to emoncms to make it possible for emoncms to detect the menu file, see: <a href="https://github.com/emoncms/emoncms/compare/symlinked_modules" title="https://github.com/emoncms/emoncms/compare/symlinked_modules">https://github.com/emoncms/emoncms/compare/symlinked_modules</a></p>
<p><img alt="" src="../sites/default/files/Emoncms%20backup%20module.png" style="width: 720px; height: 608px;" />https://github.com/emoncms/backup</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12450.html" class="topic-previous" title="Go to previous forum topic">‹ RTL AMR - Scripts</a>
              <a href="6258.html" class="topic-next" title="Go to next forum topic">Static coheating module ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-39414"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8783.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Beire&#039;s picture" title="Beire&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emoncms backup module</h3>

    <div class="submitted">Submitted by <a href="../user/8783.html" title="View user profile.">Beire</a> on Sun, 14/02/2016 - 17:56.</div>
    <div class="content">
     <p>This looks really great.<br />
Will try this on my ubuntu install when i got the time.</p>
<p>Is phpfiWa data nog backupped? </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39417"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emoncms backup module</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 14/02/2016 - 20:50.</div>
    <div class="content">
     <p><em>Is phpfiWa data nog backupped?</em></p>
<p>No because phpfiwa&nbsp;feeds are not compatible with emoncms in low-write mode, therefore there&#39;s none to be backed up.</p>
<p>Hopefully, further work may be done to ensure that we can use it in emonbase&#39;s&nbsp;as well as emonpi&#39;s.</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39422"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emoncms backup module</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sun, 14/02/2016 - 22:08.</div>
    <div class="content">
     <p>This is a great addition to the system, thanks for all the hard work!</p>
<p>One suggestion for the future, would it be possible to add in a daily backup to a USB memory stick maybe with a 14 day rotation to ensure it doesn&#39;t get full. It could be useful for that deep and distant day&nbsp;when the SD Card finally decides its had enough, and the system has been fully setup and left alone for a while.</p>
<p>Thinking a little further maybe it could&nbsp;check every so often to see if a USB stick is plugged in, and if it is start the timed backup, possibly with a disable button in the backup screen.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40719"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8948.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smitt1979&#039;s picture" title="smitt1979&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emoncms backup module</h3>

    <div class="submitted">Submitted by <a href="../user/8948.html" title="View user profile.">smitt1979</a> on Wed, 30/03/2016 - 10:18.</div>
    <div class="content">
     <p>Hi Trystan</p>
<p>Not sure if this is a bit out of scope for the module, but would it be possible to include node-red in with the backup</p>
<p>Thanks Steve</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40735"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emoncms backup module</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 30/03/2016 - 16:13.</div>
    <div class="content">
     <p>+1 - I&#39;d like to see this also!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40800"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="borpin123&#039;s picture" title="borpin123&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emoncms backup module</h3>

    <div class="submitted">Submitted by <a href="../user/4638.html" title="View user profile.">borpin123</a> on Fri, 01/04/2016 - 14:10.</div>
    <div class="content">
     <p>Could I suggest a config option to automate a backup strategy.&nbsp; For instance if daily was an option, a file would be created with the day instead of the date in the file name and so these would overwrite.&nbsp; You could also have a weekly (week of the year as the name, day of week in config) or monthly (month number, day of month in config) option that could run consecutively (by copying the file as appropriate).&nbsp; This would help if you were backing up to cloud storage and had limited space.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12150"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-YiuynNhhmAQx_aAw2REfd4YmTiNurysFqR4Fv6z8DfM" value="form-YiuynNhhmAQx_aAw2REfd4YmTiNurysFqR4Fv6z8DfM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/12150 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:47:18 GMT -->
</html>
