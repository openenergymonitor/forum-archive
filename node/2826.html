<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2826 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Input on-time question | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Input on-time question</h3>
        <span class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Sat, 14/09/2013 - 21:21</span>
        <div class="content"><p>Can anyone help me to understand this feed processor better please.&nbsp; I have an input feed that varies between 0 and 1.&nbsp; I wish to calculate the number of hours in a day that the feed was set to 1.&nbsp; The documentation says that the on-time processor is used to calculate the number of hours a pump was on each day, but it seems to be calculating the number of seconds?&nbsp; Is there something I am missing please?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2836.html" class="topic-previous" title="Go to previous forum topic">‹ Raspi image download dead?</a>
              <a href="2824.html" class="topic-next" title="Go to next forum topic">emoncms json api ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-15147"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Input on-time question</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 14/09/2013 - 22:05.</div>
    <div class="content">
     <p>Is your &quot;input feed&quot; restricted to the values 0 and 1, or can it have in-between values such as 0.123?</p>
<p>Which documentation are you referring to?</p>
<p>Converting from seconds to hours is no problem ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15153"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Input on-time question</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Sun, 15/09/2013 - 07:26.</div>
    <div class="content">
     <p>Hi - My input is either 0 or 1.&nbsp; It reflects the state of the boiler (on or off).&nbsp; I send an update to emoncms every 10 minutes, and whenever the state changes.</p>
<p>I was reading this documentation: <a href="http://emoncms.org/site/docs/inputprocessing" title="http://emoncms.org/site/docs/inputprocessing">http://emoncms.org/site/docs/inputprocessing</a></p>
<p>The documentation suggests that input on-time measures the time that the value is high (which I assume means non-zero)? I did try multiplying the input by 0.00027777 (1/3600) but it didn&#39;t seem to make any difference.</p>
<p>I would like to be able to have a chart that shows the number of hours each day that the boiler is switched on.</p>
<p>Thanks for any help.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15159"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Input on-time question</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 15/09/2013 - 10:33.</div>
    <div class="content">
     <p>OK, I think I now understand what you&#39;re wanting to do, but I have never made any use of emoncms.&nbsp;</p>
<p>I feel sure that someone else will be able to help ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15161"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Input on-time question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 15/09/2013 - 12:26.</div>
    <div class="content">
     <p>I&#39;ve just been looking at it, and it seems that the &quot;input on-time&quot; process doesn&#39;t behave the same way as the rest, i.e. it leaves its input available to the next process rather than making its output available. I&#39;ve changed line 426 in process_model.php to &quot;return $ontime;&quot;</p>
<p>&nbsp;</p>
<p>In Inputs, I have:</p>
<p><img alt="" src="data:image/png;base64,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" /></p>
<p>&nbsp;</p>
<p>and in Feeds, I get this:</p>
<p><img alt="" src="data:image/png;base64,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" /></p>
<p>&nbsp;</p>
<p>I don&#39;t know why it was done that way, maybe Trystan had good reason or maybe it was just that this situation was not envisaged. In fairness, the documentation <u>doesn&#39;t</u> say &quot;Result is passed back for further processing by the next processor in the input processing list.&quot; so the original behaviour is technically correct.</p>
<p>[N.B. Changed only in my local copy! ]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15166"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Input on-time question</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Sun, 15/09/2013 - 17:23.</div>
    <div class="content">
     <p>Hi - many thanks for your suggestion.&nbsp; I have now looked at process_model.php, and have a better idea of what is going on.&nbsp; I made the change you suggested (to line 446 in the latest version).</p>
<p>However, I think that there is a problem with the logic (ignoring that it measures the time in seconds), but I can&#39;t see an obvious solution.&nbsp; I will try to explain with an example:</p>
<p>17:00&nbsp; Boiler is off.&nbsp;&nbsp; on-time = 0</p>
<p>	17:10 Boiler is off.&nbsp; on-time = 0</p>
<p>17:18 Boiler is on.&nbsp; on-time = 8*60 seconds</p>
<p>17:19 Boiler is off.&nbsp; on-time = 8*60 seconds</p>
<p>So even though the boiler is only on for one minute, the input processor calculates this as 8 minutes.&nbsp; I think the logic needs to know the last input value, (rather than the current input value) but I can&#39;t see a way to easily get this.&nbsp; Any ideas?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15168"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Input on-time question</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 15/09/2013 - 20:23.</div>
    <div class="content">
     <p>I think your problem is it was assumed that updates were frequent compared to the duration of the on and off times, so that the error would even out. This could still happen if you <u>didn&#39;t</u> send the state when a switching event occurred and the error would average out over time.</p>
<p>The obvious easy way around this is, when the boiler changes state, to send the transition, i.e. if going from off to on, send &quot;0&quot; then immediately afterwards send &quot;1&quot; - and vice versa.</p>
<p>If you can&#39;t or don&#39;t want to do that, then I think you need to have the last state stored in the database (as a static variable inside the PHP script isn&#39;t good enough).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15172"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Input on-time question</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 15/09/2013 - 21:19.</div>
    <div class="content">
     <p>I think that you would have to add code to&nbsp;<strong>/Modules/input/process_model.php </strong>to do this calculation, possibly using &#39;convert kwh to kwh/d&#39; as a template to determine the daily time that the value is set to &#39;1&#39;.</p>
<p>This would create a MySQL DAILY table to hold the accumulated data &nbsp;- as Robert described above.</p>
<p>If you add a new section in the process_model.php file, you will also need to create a corresponding entry in<strong>&nbsp;Lib/tablejs/custom-table-fields.js</strong></p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15199"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Input on-time question</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Mon, 16/09/2013 - 20:43.</div>
    <div class="content">
     <p>Hi - thanks for the suggestions.</p>
<p>I think I have a workaround for the two problems:</p>
<p>To get round the problem of the error when switching from on to off (and vice-versa), I have used Robert&#39;s suggestion and amended my code so that when I switch from on to off, I first send an on, then an off.&nbsp; Similarly, when I switch from off to on, I first send an off, then an on.</p>
<p>Rather than use Input on-time, I have now multiplied my input (which is either 0 or 1) by 1000, and then used Power to kWhd which luckily gives the answer that I want (i.e. the number of hours in the day that the boiler is on for).</p>
<p>Thanks for the helpful suggestions.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2826"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form--p3IyaJSXLPuPhoUBcPFdLA3eC6F5PI2yCTLkQGYSh8" value="form--p3IyaJSXLPuPhoUBcPFdLA3eC6F5PI2yCTLkQGYSh8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
