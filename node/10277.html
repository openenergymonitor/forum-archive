<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10277 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:03:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>3 phase serial-only incorrect voltage reading etc. | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">3 phase serial-only incorrect voltage reading etc.</h3>
        <span class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Fri, 06/03/2015 - 14:00</span>
        <div class="content"><p>Hello,</p>
<p>I&#39;ve got a couple of emonTx Shields connected to an Arduino&nbsp;Leonardo, and linked with a USB cable to a Linux box (which runs emonHub).</p>
<p>I&#39;ve used</p>
<pre>
https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxShield/Shield_CT1234_Voltage_SerialOnly</pre><p>and got sensible looking numbers out.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>So I then hacked on</p>
<pre>
https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxShield/Shield_CT1234_3Phase_Voltage</pre><p>a bit, and took out the radio tx parts (but adding back in a delay).</p>
<p>&nbsp;</p>
<p>But can&#39;t seem to get very useful results (see below), and the contents of the voltage sample array look a bit broken.</p>
<p>Before I started trying to work out what&#39;s up with it, I was wondering if anyone was doing 3 phase with serial-only and/or a Leonardo (or similar)? &nbsp;Unfortunately the box isn&#39;t where I am, so debugging is a bit tricky...</p>
<p>I can try another emonTxShield on an Uno here, but I only have to CTs, and no 3 phase supply to experiment with.</p>
<p>Cheers,</p>
<p>Tim.</p>
<p>&nbsp;</p>
<pre>
Total Samples: 281 Power Samples: 267 Time: 233 Crossings: 22
-205.61 
-246.62 
-255.60 
-256.57 
-250.56 
-217.69 
-171.00 
-100.60 
-26.49 
33.38 
90.02 
221.68 
171.99 
99.59 
27.48 
-31.39 
-88.04 
-149.44 
Voltage: -0.04
 Current 1: -0.00 Power 1: 0.00 VA 1: 0.00 PF 1: 0.85
 Current 2: -0.00 Power 2: -0.00 VA 2: 0.00 PF 2: -0.26
 Current 3: -0.00 Power 3: 0.00 VA 3: 0.00 PF 3: 0.53

Total Samples: 281 Power Samples: 267 Time: 234 Crossings: 22
-193.99 
-240.03 
-255.00 
-256.97 
-253.95 
-225.05 
-185.30 
-119.82 
-44.64 
18.28 
75.98 
229.74 
186.99 
117.52 
45.34 
-16.60 
-73.30 
-132.77 
Voltage: 530.95
 Current 1: 1.78 Power 1: 796.06 VA 1: 946.52 PF 1: 0.84
 Current 2: 3.37 Power 2: -475.44 VA 2: 1789.61 PF 2: -0.27
 Current 3: 5.40 Power 3: 1485.20 VA 3: 2868.22 PF 3: 0.52

Total Samples: 279 Power Samples: 268 Time: 231 Crossings: 22
-225.07 
-253.05 
-256.03 
-256.00 
-237.05 
-204.23 
-146.64 
-72.35 
-2.34 
262.31 
240.35 
205.52 
144.94 
69.66 
1.65 
-55.13 
-112.67 
-173.97 
Voltage: 47.66
 Current 1: 0.16 Power 1: 6.45 VA 1: 7.61 PF 1: 0.85
 Current 2: 0.30 Power 2: -3.92 VA 2: 14.26 PF 2: -0.27
 Current 3: 0.49 Power 3: ovf VA 3: 23.51 PF 3: -216141504.00

Total Samples: 291 Power Samples: 266 Time: 242 Crossings: 22
-168.35 
-98.95 
-25.84 
278.33 
273.23 
241.27 
196.48 
125.97 
53.75 
-7.22 
-63.96 
-126.45 
-184.71 
-229.79 
-242.81 
-243.83 
-240.87 
-210.02 
Voltage: 854.52
 Current 1: 35.72 Power 1: 7486.85 VA 1: 30526.38 PF 1: 0.25
 Current 2: 35.75 Power 2: 3531.29 VA 2: 30549.89 PF 2: 0.12
 Current 3: 36.56 Power 3: 8737.51 VA 3: 31241.95 PF 3: 0.28

</pre>  <div class="forum-topic-navigation clear-block">
          <a href="10436.html" class="topic-previous" title="Go to previous forum topic">‹ EmonTH Hardware consideration</a>
              <a href="10379.html" class="topic-next" title="Go to next forum topic">Voltage testing/monitoring ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-28422"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Fri, 06/03/2015 - 14:53.</div>
    <div class="content">
     <p>The same sketch gives sensible voltage readings&nbsp;on an Uno, so must be the 3 phase code not liking the&nbsp;Leonardo...</p>
<p>Tim.</p>
<pre>
Total Samples: 297 Power Samples: 282 Time: 232 Crossings: 22
254.61&nbsp;
254.59&nbsp;
233.65&nbsp;
181.92&nbsp;
123.43&nbsp;
55.20&nbsp;
-10.75&nbsp;
-64.49&nbsp;
-122.00&nbsp;
-147.65&nbsp;
-79.33&nbsp;
-11.29&nbsp;
42.54&nbsp;
103.13&nbsp;
157.49&nbsp;
211.64&nbsp;
246.65&nbsp;
253.64&nbsp;
Voltage: 237.61
&nbsp;Current 1: 0.10 Power 1: 1.05 VA 1: 24.88 PF 1: 0.04
&nbsp;Current 2: 0.00 Power 2: 0.00 VA 2: 0.00 PF 2: nan
&nbsp;Current 3: 0.00 Power 3: 0.00 VA 3: 0.00 PF 3: nan
</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28433"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sat, 07/03/2015 - 04:43.</div>
    <div class="content">
     <p>I wonder if you might be suffering from the problem discussed in this thread: &nbsp;<a href="10089.html">http://openenergymonitor.org/emon/node/10089</a>. &nbsp; If you are, and you&#39;re not using the RF stuff, that could well be another useful clue. &nbsp;Robert&#39;s last post there said he was off to investigate if it might be in JeeLib, but if you&#39;re not using that, &nbsp;and your problem is the same, you may save him some effort.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28434"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Sat, 07/03/2015 - 11:51.</div>
    <div class="content">
     <p>Here&#39;s a graph of the above set of samples, plus another couple from the Uno. &nbsp;Computed voltage is in brackets in the key. &nbsp;Uno 2 voltage is missing sorry, but I&#39;m pretty sure it was about the same as Uno 3 (233&nbsp;or so), and was taken a few minutes apart at a higher load time for this area vs. the Uno 1 samples which were from yesterday).</p>
<p>I haven&#39;t had time to look at the algorithm to see what it&#39;s trying to do, but the graphs basically look pretty funky to me, and I&#39;d hope they&#39;re not an accurate representation of my mains voltage waveform (perhaps they&#39;re not intended to be tho)! :o)</p>
<p><img alt="" src="../../../buttersideup.com/files/3phase-samples.png" style="height:418px; width:600px" /></p>
<p>Tim.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28436"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 07/03/2015 - 13:56.</div>
    <div class="content">
     <p>The waveforms don't look obviously wrong! Bear in mind that it's only necessary to record one sample more than <strike>120&deg;</strike> 240 &deg; so you will never have a complete cycle recorded.</p>
<p>[And I'm still trying to find time to track down that problem!]<br />
When you wrote <i>"...must be the 3 phase code not liking the Leonardo..."</i> I stopped looking at your particular problem as I know nothing about the Arduino range, so I'd be most unlikely to be able to help you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28438"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Sat, 07/03/2015 - 14:56.</div>
    <div class="content">
     <p>If you suspect it&#39;s something related to memory allocation, then the differences between the Uno and Leonardo may be relevant. &nbsp;The Leonardo uses the Atmel&nbsp;ATmega32u4 with built-in USB functionality.</p>
<p>As a result, when the sketch I&#39;m using is complied for the Uno (which has a separate&nbsp;USB &lt;-&gt; serial chip), the code size is 9134 bytes. &nbsp;The same sketch compiled for the Leonardo comes in at 11788 bytes.</p>
<p>I&#39;d guess the difference is the USB serial code (or maybe some&nbsp;boot loader code or something)&nbsp;which the Arduino IDE is including.</p>
<p>I just modified the sketch to allocate a static string (like this char *spacewaster = &quot;blahblahblah [...] blah&quot;;)&nbsp;to push the Uno&nbsp;code size up to the same Leonardo. &nbsp;The static string isn&#39;t referenced anywhere else in the code.</p>
<p>The Uno version now outputs garbage and sometimes chunks of the static string instead, but no useful output.</p>
<p>So the bug is&nbsp;memory related by the look of it.</p>
<p>Tim.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28441"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 07/03/2015 - 16:19.</div>
    <div class="content">
     <p>That's useful to know, thank you. I was fairly certain that was indeed what was happening, But I haven't had time to even check what's happened between the emonTx V2 with the old libraries, which worked fine, and the emonTx V3 with the new libraries, which appears to fall over for some people and not for others. I have only the emonTx here, I can't comment about the Arduino platform. What I'm looking to do is rework the sketch so as to reduce the memory demand, if that's possible.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28443"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Sat, 07/03/2015 - 17:09.</div>
    <div class="content">
     <p>I&#39;ve done a bit of that, and shaved about 1k off the one I&#39;ve got here. &nbsp;I managed to restore the uno one to operation (whilst still having the big useless string in), but haven&#39;t got the Leonardo working yet (resolutely gives rubbish Vrms&nbsp;output).</p>
<p>FWIW, just turning off the LED blink stuff saved a chunk, once the number of&nbsp;digitalWrite() calls fell to zero...</p>
<p>Also worth making all the pin declarations, and calibration values&nbsp;etc. at the top of the sketch&nbsp;consts I think.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28444"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Sat, 07/03/2015 - 17:19.</div>
    <div class="content">
     <p>Doh, just realised I&#39;ve been trying to minimise code size, instead of SRAM size (which is what&#39;s going to be in short supply).</p>
<p>Oh well, back to the drawing board. &nbsp;Still the const thing is probably still a good bet I suppose.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28454"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sat, 07/03/2015 - 23:07.</div>
    <div class="content">
     <p><em>Still the const thing is probably still a good bet I suppose.</em></p>
<p>That should help quite a bit, although obviously&nbsp;not as much as it does on a machine with an MMU. &nbsp;The compiler treats pre-initialised constant scalar variables much like a #define. &nbsp;Each time you reference it, the generated code loads up the original&nbsp;literal again, so regardless of what&#39;s happened to the RAM location, the original value will be used.&nbsp;</p>
<p>You can see in the example below, I did&nbsp;manage to corrupt an element in a const array, although I had to work pretty hard to do it. &nbsp;It was only when I finally randomised the index, that compiler stopped loading up literals, and was forced to use the corrupt RAM location.</p>
<pre>
const uint32_t test_array[] = {
  0x1000,
  0x1001,
  0x1002,
  0x1003,
  0x1004,
  0x1005,
  0x1006,
  0x1007,
  0x1008,
  0x1009,
  0x100a,
  0x100b,
  0x100c,
  0x100d
};
const uint32_t *cp;
uint32_t *p;
int index;

void setup()
{
  Serial.begin(115200);
  Serial.println(&quot;Hello world&quot;);
  index = random(0,13);
  Serial.print(&quot;index: &quot;);
  Serial.println(index);
  Serial.print(&quot;test_array[index]: &quot;);
  Serial.println(test_array[index], HEX);
}

void loop()
{
  cp = &amp;test_array[index];
  p = (uint32_t*)cp;
  *p = 0xcafebabe;
  Serial.print(&quot;test_array[index]: &quot;);
  Serial.println(test_array[index], HEX);
  delay(1000);
}</pre><p>produces:</p>
<pre>
Hello world
index: 11
test_array[index]: 100B
test_array[index]: CAFEBABE</pre><p>​</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>By contrast, on a unix&nbsp;machine with an MMU, the constant variables in the .rodata section are mapped to read only pages of memory, then you get instant notification of who&#39;s doing the corruption:</p>
<pre>
#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;

const uint32_t test_var = 0xdeadbeef;
const uint32_t *cp;
uint32_t *p;

main () {
  printf(&quot;Hello world\n&quot;);
  cp = &amp;test_var;
  p = (uint32_t*)cp;
  *p = 0xcafebabe;
  printf(&quot;test_var: %x\n&quot;, test_var);
}</pre><p>produces:</p>
<pre>
(gdb) r
Starting program: test 
Hello world

Program received signal SIGSEGV, Segmentation fault.
0x0000000000400572 in main () at test.c:12
12      *p = 0xcafebabe;
(gdb) </pre><pre>
&nbsp;</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29388"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7665.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7665.jpg" alt="TimSmall&#039;s picture" title="TimSmall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/7665.html" title="View user profile.">TimSmall</a> on Sat, 04/04/2015 - 16:47.</div>
    <div class="content">
     <p>Looks like the cause of the bug is the readVcc() code, which doesn&#39;t work on the&nbsp;ATmega32u4 (and returns incorrect and fluctuating values).</p>
<p>In looking for the bug I made out a few other minor changes to the code to fix some compile warnings and reduce the SRAM footprint too. &nbsp;I&#39;ll publish updated code when I get a chance -&nbsp;probably next week some point...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29396"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 3 phase serial-only incorrect voltage reading etc.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 04/04/2015 - 19:47.</div>
    <div class="content">
     <p>I'm not surprised, that (readVcc( ) ) has had many tweaks as new variants of the Arduino range have appeared.</p>
<p>The easy work-around, if you're using a mains supply, is to forget readVcc( ) and put the correct constant in its place for your dc supply voltage - given that the 5 V (?) regulator is stable. If it isn't, you'll need Plan A and add a patch to readVcc( ), because while the initial value of the internal reference is unknown to better than 10% (so a lot worse than most regulators), its stability, both long-term and under load and temperature changes, should be very much better than most regulators.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10277"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-nzCaGhoP6B3NPPc3zD2VVabjr8GRAMd6Tc00iDi02qY" value="form-nzCaGhoP6B3NPPc3zD2VVabjr8GRAMd6Tc00iDi02qY"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
