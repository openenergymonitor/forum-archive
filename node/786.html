<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/786 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:29:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Cheap current sensors | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Cheap current sensors</h3>
        <span class="submitted">Submitted by Guest on Thu, 28/06/2012 - 18:35</span>
        <div class="content"><p>&nbsp;Apologies if this has been answered elsewhere but I couldn't find any references.</p>
<p>I have two energy monitors which were supplied by electricity suppliers, one from British gas the other from Npower.</p>
<p>They both use clip on sensors which look identical, I would like to recycle these sensors and interface then to an arduino.</p>
<p>They produce an output in the AC millivolt range and from research are Hall effect devices?</p>
<p>If anyone has successfully interfaced these I would be V interested in how they did it.</p>
<p>I have tried a voltage divider to bias the signal as suggested for a CT sensor but this does not seem to work maybe because the signal is too weak?</p>
<p>I have some LM358N op amps on order which I was going to have a play with.</p>
<p>Any suggestions?</p>
<p>Thanks</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1367.html" class="topic-previous" title="Go to previous forum topic">‹ Emontx Shield + Ethernet Shield: Help with Code</a>
              <a href="1295.html" class="topic-next" title="Go to next forum topic">NanodeRF hangs again :-( ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-5027"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 29/06/2012 - 00:50.</div>
    <div class="content">
     <p>I've not come across one of those. The best suggestion I have to find out what is inside is to open it up - carefully.</p>
<p>Alternatively, if it is a Hall Effect transducer, it's very likely you will get no output if you connect it to only a multimeter on an a.c current range (because the Hall IC needs a supply!), whereas a current transformer without an inbuilt burden resistor will typically read about 50 mA output at max current (usually 30 - 100 A).&nbsp; A c.t. with a built-in burden resistor will typically give 1 V at max current.</p>
<p>Once we know what is inside, we might be able to take it further. (And don't worry about short-circuiting a c.t. - that's how they're designed to work).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5028"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Andygodber&#039;s picture" title="Andygodber&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by Andygodber (not verified) on Fri, 29/06/2012 - 09:45.</div>
    <div class="content">
     <p>&nbsp;Kalamgish - can you post pictures?</p>
<p>&nbsp;</p>
<p>Ive successfully used 're-purposed' clamps from EDF and Biritsh Gas meters, but these were of the CurrentCost branded versions.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5031"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kalamgish&#039;s picture" title="kalamgish&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by kalamgish (not verified) on Fri, 29/06/2012 - 17:09.</div>
    <div class="content">
     <p>I have actually got this reading now with a bit of tweaking the voltage divider and aref values.</p>
<p>here is a link to the product anyway.</p>
<p>&nbsp;<a href="http://www.greenenergyoptions.co.uk/assets/media/smartpower_piccolo_manual.pdf">www.greenenergyoptions.co.uk/assets/media/smartpower_piccolo_manual.pdf</a></p>
<p>&nbsp;</p>
<p>Looks like a split ferrite ring which goes round the cable, is that what an ordinary CT sensor uses?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5032"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 29/06/2012 - 18:03.</div>
    <div class="content">
     <p>It does sound like a standard split-core current transformer. Does it loook like the ones here <a href="https://learn.openenergymonitor.org/?redirect=report-yhdc-sct-013-000-current-transformer" title="http://openenergymonitor.org/emon/buildingblocks/report-yhdc-sct-013-000-current-transformer">http://openenergymonitor.org/emon/buildingblocks/report-yhdc-sct-013-000...</a> and here <a href="476.html" title="http://openenergymonitor.org/emon/node/476">http://openenergymonitor.org/emon/node/476</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5035"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kalamgish&#039;s picture" title="kalamgish&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by kalamgish (not verified) on Fri, 29/06/2012 - 21:13.</div>
    <div class="content">
     <p>&nbsp;Yes looking at those images I'm pretty sure that my sensors are of the same design.</p>
<p>I am only looking to use these for an immersion switching application (what else...) so as long as I can get a reasonably accurate reading I'll be happy.</p>
<p>I will have to do some testing to try and calibrate (if we get any sun this summer !).</p>
<p>Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5036"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 29/06/2012 - 21:42.</div>
    <div class="content">
     <p>Frankly, I would have been very surprised had it been other than a normal split-core c.t. Your next problem will be to get some idea of the maximum current (the manual <strike>implies around 100 A</strike> [edit] states 75 A ) and the ratio; and the maximum output voltage that it is capable of before distortion becomes too great.</p>
<p>You can get an approximate calibration of your c.t. using known loads. If you are intending to control towards zero current (rather than accurately measuring consumption), then calibration is not particularly important - you only need to know that current is not close enough to zero and in which direction. If however you feel you need greater accuracy, you might find some hints in the <a href="https://learn.openenergymonitor.org/?redirect=report-yhdc-sct-013-000-current-transformer">Report: Yhdc SCT-013-000 Current Transformer</a> (though of course you are unlikely to have the equipment to replicate many of the measurements!).</p>
<p>Many contributors to these forums are working on similar schemes to the one you propose. I do know that Calypso_Rae in particular is working towards measuring the nett current (the intake current) and looking to  burst-fire control his immersion heater so as to balance exactly the  generated power.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5038"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kalamgish&#039;s picture" title="kalamgish&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by kalamgish (not verified) on Sat, 30/06/2012 - 07:17.</div>
    <div class="content">
     <p>&nbsp;Well I am only really interested if my output - input is &gt; a threshhold value, the values I am getting although fairly crude (+/- 100Watts) should be good enough as I will leave at least that as a margin for error.</p>
<p>I have bought a 1kW immersion and have a 4kW PV system.</p>
<p>I have a working prototype now albeit just turning on an LED.</p>
<p>Two main concerns.</p>
<p>1. Can I get the blanking screw off the cylinder!</p>
<p>2. Will the inevitable continual cycling of a relay to control the immersion have any long term implications.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5041"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 30/06/2012 - 10:20.</div>
    <div class="content">
     <p>1. I can't help you with the blanking screw.</p>
<p>2. I would not use a relay - you will need to replace it quite frequently due to contact wear. It will be far better to use a solid-state solution, i.e. a triac. My recommendation would be to burst-fire the triac on zero crossings so that you switch when voltage and current are close to zero and always send complete cycles of mains to the heater.&nbsp; It will give you much closer control (i.e. less probability of buying power you don't need and of selling power that you could otherwise use) because you can control down to one cycle on or off. You could have a 4 kW immersion heater with that sort of control. Burst firing avoids having to include bulky and expensive filtering components that you would otherwise need to suppress the interference that phase control would give. I've asked <a href="../messages/new/956121a.html?destination=user%2F956">Calypso-rae</a> to contact you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5047"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 30/06/2012 - 14:13.</div>
    <div class="content">
     <p>I have successfully used a LF358 op amp to buffer the 2.5V reference point, as per <a href="673.html">http://openenergymonitor.org/emon/node/673</a> .&nbsp; It runs nicely from the Arduino's on-board +5V supply.</p>
<p>As I understand it, one point of the standard sensor loop needs to be anchored to Vref, and the AC voltage at a different point is then measured by the Arduino.&nbsp; The voltage between these two points is caused by an AC current flowing through a burden resistor.&nbsp; If the resulting voltage were to be very small, then I suppose it could be pre-amplified by an LM358 before being fed to the Arduino.&nbsp; But with the ADC having 1024 levels, just a few mV apart, I doubt whether this should be necessary.</p>
<p>My system only measures current at the supply point, and I am only really interested at low levels of power.&nbsp; If my current-detector saturates when our household consumption is high, that's not a problem thanks to Glynn's protection diodes!&nbsp; But when a controlled amount of power is being dumped to the immersion, and just 50W or so is being exported (my chosen margin of safety), then I trust that my current-measuring system is behaving linearly, as intended.</p>
<p>Most PV control systems to date appear to have used a 3rd party device with which to distribute surplus power.&nbsp; Mine uses a Carlo Gavazzi controller at around &pound;79, and others use a Crydom which may be a little cheaper.&nbsp; Each of these devices can distribute power evenly within the 'energy window' that modern supply meters appear to allow.&nbsp;</p>
<p>A relay may be OK&nbsp;if you're just switching something on and off fairly infrequently, but it would not be able to track the amount of spare power during changing conditions.&nbsp; You may be interested in a set of videos that I posted at</p>
<p><a href="176fdb0.html?page=4">http://openenergymonitor.org/emon/node/176?page=4</a>&nbsp; on 8th, 9th and 27th May this year.&nbsp;</p>
<p>PS. If you're anywhere near M62, J7, I have one of those big octagonal spanners which I believe you're looking for.&nbsp; :)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5061"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kalamgish&#039;s picture" title="kalamgish&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by kalamgish (not verified) on Sun, 01/07/2012 - 08:58.</div>
    <div class="content">
     <p>Calypsoe_rae &gt; Your set up looks very impressive, the ability to continuously variable output is attractive.</p>
<p>I think I will get my system working as is first then consider refinements.</p>
<p>&nbsp;The way I have got my sensors working is to have a voltage divider with the output fed into analog pin 1 and adjusted so I get a reading of approx 512.</p>
<p>One wire from the CT is then sent to the divider output and the other to analog pin 2, this will give the AC signal the maximum +/- range. I then have a procedure to sample pin2 and take the max value over a set of readings (500 seems to work).</p>
<p>Re the immersion cap, what a nighmare! I ended up drilling it out and came close to needing a new cylinder but I am actually powering the immersion with the sun as I write this....</p>
<p>&nbsp;</p>
<div>&nbsp;</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5066"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 01/07/2012 - 11:55.</div>
    <div class="content">
     <blockquote><p>&quot;One wire from the CT is then sent to the divider output and the other to  analog pin 2, this will give the AC signal the maximum +/- range. I  then have a procedure to sample pin2 and take the max value over a set  of readings (500 seems to work).&quot;</p>
</blockquote>
<p>I see what you're doing there, but unless you subtract the pin 1 reading, I think your readings are susceptible to drift, which will give you large time, temperature  or age-dependent errors at low currents. The 'standard' approach is to use a high pass filter in software to remove the offset, then obtain the average power by taking a few cycles' worth of instantaneous readings of voltage and current at the rate of about 50 per cycle, multiplying them in pairs to give the instantaneous power, then average that. If you're only measuring the peak current, you are open to errors resulting from interference (possibly) or a distorted current waveform generated by switched-mode power supplies.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5077"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 01/07/2012 - 19:16.</div>
    <div class="content">
     <p>&nbsp;kalamgish &gt;<em>One wire from the CT is then sent to the divider output and the other to  analog pin 2, this will give the AC signal the maximum +/- range. </em></p>
<p>Hi, is there any resistance across your CT?&nbsp; As posted on a separate thread, I've just found that my current waveform is way too small for my needs, so increasing the burden resistor would seem an obvious way to go.&nbsp; When I removed my external 39R burden entirely a month or to ago, the monitor software gave huge readings which suggested that no internal burden was fitted.&nbsp; But when I checked inside, a pair of internal resistors were definitely there, so it all seemed to be very confusing.</p>
<p>Given the high impedance of the Arduino's analogue inputs, I would have thought that the C/T's signal amplitude could be increased more or less as much as desired by simply increasing the resistance of the burden .&nbsp; But if there is no burden at all, the sinusoidal readings are likely to turn into a 50Hz square wave.</p>
<p>I like your approach for removing the dc-offset without any extra hardware or high-pass filters.&nbsp; When measuring both voltage and current to determine real power, the standard approach has two sets of readings, each with its own high-pass filter in software to remove the dc-offset that's introduced by its front-end circuitry.&nbsp; I only use one (buffered) 2.5V reference, so the dc-offset will always be the same in both cases.&nbsp; Routinely taking a third set of measurements for the reference, and then subtracting this value from each of the other two is an interesting idea.&nbsp; </p>
<p>I wonder whether this alternative approach would have any pitfalls that I've failed to consider?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5078"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 01/07/2012 - 19:38.</div>
    <div class="content">
     <h1><strong>&nbsp;&nbsp;&nbsp;&nbsp; NEVER&nbsp;OPERATE&nbsp;A CURRENT&nbsp;TRANSFORMER&nbsp;WITHOUT&nbsp;A&nbsp;BURDEN</strong></h1>
<p><a href="../user/956.html" title="View user profile.">calypso_rae</a>&nbsp; - read my report on the yhdc c.t. and you'll see what happens. The core will saturate and you will get very high voltage spikes if you operate the c.t. without a burden. You cannot get what voltage you like out of a current transformer - just as you cannot get what current you like out of an (ordinary) voltage transformer. Duality?</p>
<h2>&nbsp;</h2>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5079"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 01/07/2012 - 20:07.</div>
    <div class="content">
     <p>Pitfalls in the alternative approach:</p>
<p>I see two:</p>
<p>1. It takes a lot longer to read an analogue input than it does to process the filter equation,</p>
<p>2. The number out of the filter equation is a float, which means that if the centre point happens to lie on the boundary of two LSBs and there's a bit of noise, it will average to a number much closer to the true voltage. Reading the midpoint voltage will only ever give you the nearest integer.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5094"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Mon, 02/07/2012 - 21:20.</div>
    <div class="content">
     <div>Sorry, folks, if my previous posting was ambiguous.</div>
<div>&nbsp;</div>
<div>I was never intending that a C/T should be operated without any burden at all.&nbsp; Rather, I was suggesting that the amplitude of my current-sensor's waveform could be usefully increased by raising the value of the burden somewhat.&nbsp; I'm using an external burden resistor of 39R, and there may or may not already be a resistor inside.&nbsp;&nbsp;</div>
<div>&nbsp;</div>
<div>With appropriate care, I will experiment and report back in due course :)</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5186"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dickielightbar&#039;s picture" title="dickielightbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by dickielightbar (not verified) on Wed, 11/07/2012 - 08:27.</div>
    <div class="content">
     <p>&nbsp;Hi&nbsp;</p>
<p>I am working on a Solar PV diverter with some great results.</p>
<p>Could sombody explain what is meant by &quot;energy window&quot; of a modern meter. I think I know what you are getting at, I just want to understand what your definition of that window is.</p>
<p>Many thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5187"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Wed, 11/07/2012 - 09:59.</div>
    <div class="content">
     <p>As I understand it, modern meters have a 'sweet zone' of 0.001kWh within which no permanent data is recorded.&nbsp; Once the grid-supplied energy strays outside that band, the customer is either billed for the energy that they've consumed (pulse seen at meter), or energy is permanently lost to the grid (LED stays on).&nbsp; Within this zone, energy can be bounced in &amp; out of the grid without cost (or loss) to the user.&nbsp; Simple experiments with a kettle or similar should demonstrate the principle.&nbsp;</p>
<p>The term, &quot;energy window&quot; is not an official one.&nbsp; It was just a convenient way of describing what was going on when the topic was being debated a month of two back.&nbsp; </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5191"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dickielightbar&#039;s picture" title="dickielightbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by dickielightbar (not verified) on Wed, 11/07/2012 - 16:46.</div>
    <div class="content">
     <p>&nbsp;Thanks for clearing that up, I have a nice old analogue meter so I can clearly see the &quot;window&quot; before a little ratchet stops the dial going backwards. :-(</p>
<p>When I get the inevitable change to a digital meter I now know what code will need changing. Thanks again for the info.</p>
<p>PS i like the choice &quot;sweet zone&quot; very clear.</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5197"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 11/07/2012 - 22:02.</div>
    <div class="content">
     <p>I think you need to make sure you know how you will get paid for exported energy if it is not registered on your meter. <img alt="" src="../sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/whatchutalkingabout_smile.html" />.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5210"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dickielightbar&#039;s picture" title="dickielightbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by dickielightbar (not verified) on Fri, 13/07/2012 - 12:31.</div>
    <div class="content">
     <p>Robert :-I don’t think you understand...<br />
I am meaning the "energy window" on my household meter, I have a separate generation meter for the P.V. generation.<br />
Most domestic solar P.V. installations are like this, with a "use it or lose it" on the generated electricity. With a FIT for 100% of the generation and a pittance (currently about 3p per Kwh) on the assumed export of 50%.<br />
Hence the whole point of diverting excess to the immersion heater.<br />
Even if I had a true digital import/export meter I would rather divert/use it at a 3p value than buy it in later at an 8p value.<br />
I hope you understand:-  that’s why solar P.V. was a no brainer until the government started to lower the tariffs.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5212"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 14/07/2012 - 06:32.</div>
    <div class="content">
     <p><em>dickielightbar:-&nbsp;&nbsp; Most domestic solar P.V. installations are like this, with a &quot;use it or  lose it&quot; on the generated electricity. With a FIT for 100% of the  generation and a pittance (currently about 3p per Kwh) on the assumed  export of 50%.<br />
Hence the whole point of diverting excess to the immersion heater.</em></p>
<p>A nice, succinct explanation of the strange way that FITs have been set up :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5214"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 14/07/2012 - 12:58.</div>
    <div class="content">
     <p><a href="../user/1322.html" title="View user profile.">dickielightbar</a></p>
<p>I didn't understand because you didn't even say which country you were in. You should not assume we all have a crystal ball - I sometimes forget to clean mine, then it doesn't work too well.</p>
<p>[And if you read up on digital meters, you'll find that they can be (and I think for many it is the default) set up so that energy in either direction is registered as consumption - it's an anti-fraud measure. So if you had one of those installed to replace your analogue meter, you'd have been paying (8-3=5p on your numbers) for the privilege of exporting your energy to the grid. Yes that shouldn't happen but there are reports that it has].</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5218"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kalamgish&#039;s picture" title="kalamgish&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by kalamgish (not verified) on Sat, 14/07/2012 - 20:37.</div>
    <div class="content">
     <p>&nbsp;I have got a working system now however I am a bit confused (not unusual).</p>
<p>I have got the output from the CT sensors going into a precision rectifier which I found some designs for (see attachments).</p>
<p>These﻿ can rectify signals whose amplitude is smaller than the 0.7v needed to forward bias a diode and they definitely work.</p>
<p>When I measure the output with a multimeter (no scope unfortunately) &nbsp;I am getting a d/c output but also an a/c voltage.</p>
<p>I presume the a/c reading is because the output is a half wave and not really a/c i.e. +/-?</p>
<p>Is there any way to confirm this without a scope?</p>
<p>I was thinking of buying one of those cheap usb scopes on e-bay but they all seem to be restricted to 3kHz maximum frequency which would be ok for this I suppose but maybe a bit limited for other uses.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5219"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 14/07/2012 - 21:33.</div>
    <div class="content">
     <p>Have you considered using your computer sound card? That's how I produced the &quot;scope&quot; pictures in the reports on the <a href="https://learn.openenergymonitor.org/?redirect=report-yhdc-sct-013-000-current-transformer">YHDC c.t.</a> and the <a href="https://learn.openenergymonitor.org/?redirect=report-mascot-9v-acac-adaptor">Mascot a.c. adapter.</a></p>
<p>Your input voltage is limited to around 1 V p-p, and most likely referenced to mains earth (so beware earthing problems), but given the probability that you have one and its range can be extended fairly simply, it's worth looking at. If you use the <a href="http://www.zeitnitz.de/Christian/scope_en">software 'scope</a> that I used, beware that the internal Y calibration is wrong by a factor of 2 (the author is aware, a new release is promised). Calibration is a real issue and depends on your sound card, so you need to be aware of that.</p>
<p>Returning to your original question, it depends very much on your meter. Most budget meters read on the a.c ranges the average value, but are calibrated to indicate rms of a sine wave. As your waveform is not a sine wave, the answer is wrong. If you know what the shape of the wave is, you can apply a correction factor.</p>
<p>And the explanation for the rectifiers working: it's the feedback loop around the op. amp. The op.amp. provides a voltage to offset the foward drop of the diode.</p>
<p>Should I ask why you want to rectify the c.t. output? In the reference sketches, rectification is done in the software; and in the VI sketches, it's phase sensitive so you know the direction of power flow. It may not be important to you, but if you rectify the current externally, you lose the ability to know the direction of power flow.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5220"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kalamgish&#039;s picture" title="kalamgish&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by kalamgish (not verified) on Sun, 15/07/2012 - 08:50.</div>
    <div class="content">
     <p>&nbsp;Brilliant!</p>
<p>Thanks very much for the scope link, definitely a square wave, see below.</p>
<p>The reason for rectification... my understanding is that the atmega/arduino analog inputs only like +ve inputs.</p>
<p>Direction of power seems to be sorted out by the placement of the sensors, again I'm not sure why but one is giving a reading proportional to the PV generation the other proportional to the usage, this seems counter intuitive to me as they both seem attached to the same wire, this was achieved by luck more than anything as there are only some wires the sensor will fit round.</p>
<p>Anyway.. I have a working system.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5221"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 15/07/2012 - 10:34.</div>
    <div class="content">
     <p><em>kalamgish: ... my understanding is that the atmega/arduino analog inputs only like +ve inputs.</em></p>
<p>Yes, that's correct.&nbsp; If an AC signal based around 0V were fed into the Arduino, then only the upper half of the waveform would be seen.&nbsp; To get around this problem, the standard approach is to bias the AC signal at 2.5V using a voltage-divider reference circuit.&nbsp; </p>
<p>The voltage and current sensors both work in the same way; they create a small AC signal that is floating. &nbsp; By tying one end of these circuits to 2.5V, the Arduino then receives signals that are centred at the mid-point of its input range.</p>
<p>I recently posted a tool which records and displays the raw values that are generated by my Arduino for mains voltage and current.&nbsp; These waveforms are both centred around 512, that being mid way in the ADC's range of 0 - 1023.&nbsp; By using this sketch, you would be able to check that the values that your Arduino is creating look OK.&nbsp; You can vary the magnitude of the waveforms by changing your input components.&nbsp; This tool, and a couple of images of my own results, are at <a href="824.html">http://openenergymonitor.org/emon/node/824</a></p>
<p>Hope this helps.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5222"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 15/07/2012 - 11:48.</div>
    <div class="content">
     <p><a href="../user/1264.html" title="View user profile.">kalamgish</a></p>
<p>Your 'scope picture <em>isn't</em> what I call a square wave! It's obviously a current waveform that's been half-wave rectified. If you measure this in the Arduino using our sketches, you will get a reading that is roughly proportional to current but it won't be totally accurate. I think you might find a simpler solution by copying the input circuitry and software that is used in the emonTx.</p>
<p>Read this <a href="https://learn.openenergymonitor.org/?redirect=ac-power-introduction" title="http://openenergymonitor.org/emon/buildingblocks/ac-power-introduction">http://openenergymonitor.org/emon/buildingblocks/ac-power-introduction</a> which explains the relationship between voltage and current and how these are used together to measure power. Then read&nbsp; <a href="https://learn.openenergymonitor.org/?redirect=measuring-voltage-with-an-acac-power-adapter" title="http://openenergymonitor.org/emon/buildingblocks/measuring-voltage-with-an-acac-power-adapter">http://openenergymonitor.org/emon/buildingblocks/measuring-voltage-with-...</a> and <a href="https://learn.openenergymonitor.org/?redirect=ct-sensors-interface" title="http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface">http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface</a> which explain in detail how the signals get in to the Arduino (as Calypso_rae mentioned above). Come back to me if you have any questions.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5226"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dickielightbar&#039;s picture" title="dickielightbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by dickielightbar (not verified) on Sun, 15/07/2012 - 12:57.</div>
    <div class="content">
     <p>&nbsp;</p>
<p><span style="font-family: Arial, sans-serif; font-size: 8pt; ">Apologies, I should have made it clearer, I have read up on digital meters and they have a very small window that we can exploit, typically 0.001 kwh (like 3kw for a fifteenth of a second).</span></p>
<p><span style="font-size: 8pt; font-family: Arial, sans-serif; ">Think about it...some capacitive and inductive loads would be seen as consumption if the meter was utterly unforgiving regarding the direction of power.<o:p></o:p></span></p>
<p><span style="font-size: 8pt; font-family: Arial, sans-serif; ">I have a digital export meter that is separate to my household meter so I think I will always be safe. But I do see your point.<o:p></o:p></span></p>
<p>Kind regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5228"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 15/07/2012 - 13:34.</div>
    <div class="content">
     <p><a title="View user profile." href="../user/1322.html">dickielightbar</a></p>
<p><em><span style="font-family: Arial, sans-serif; font-size: 8pt; ">they have a very small window that we can exploit, typically 0.001 kwh (like 3kw for a fifteenth of a second)</span></em></p>
<p><span style="font-family: Arial,sans-serif; font-size: 8pt;">Ex</span>actly. One fifteenth of a second is sufficiently longer than 1 cycle (1/50th) to allow us to exploit that property. Which is how and why <a title="View user profile." href="../user/956.html">calypso_rae</a>'s design works and has a pretty much instantaneous response to load changes.</p>
<p>With your analogue meter, you are much more likely to be exploiting stiction and inertia in the moving parts. I think the only way you would be able to quantify that would be to burst fire a known (resistive) load and watch for movement of the disk given various combinations of burst length and power (and then it would be meaningful only for your particular meter). And even better, if you could alternately burst-fire a known generated reverse power into the meter as well .... !</p>
<p><em><span style="font-size: 8pt; font-family: Arial, sans-serif; ">some  capacitive and inductive loads would be seen as consumption if the meter  was utterly unforgiving regarding the direction of power.</span></em></p>
<p>I don't think you said quite what you meant there, but yes, for part of the cycle a reactive load is returning energy to the supply (we call it 'circulating VArs') and if that were to be ignored, the (digital) meter would be capable of giving very wrong readings.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5229"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 15/07/2012 - 16:30.</div>
    <div class="content">
     <p><em><span style="font-family: Arial,sans-serif; font-size: 8pt;">dickielightbar: Apologies, I  should have made it clearer, I have read up on digital meters and they  have a very small window that we can exploit, typically 0.001 kwh (like  3kw for a fifteenth of a second).</span></em></p>
<p>If you've managed to locate this information in an official manual, then well done!&nbsp; No-one else has.&nbsp; We've just found out by observation that 0.001W of ebb and flow appears to be permitted without charge or loss to the customer.</p>
<p>0.001kWh is 3600 Joules.&nbsp; A 3kW load will take 1.2 seconds to consume this amount of energy, so any power-distribution algorithm needs to keep its activities to within this timescale.&nbsp; The code that I've just posted at <a href="841.html">http://openenergymonitor.org/emon/node/841 </a>operates within an energy window of around 100J and has a response time of &lt;50mS.&nbsp; </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5233"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kalamgish&#039;s picture" title="kalamgish&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by kalamgish (not verified) on Fri, 20/07/2012 - 16:56.</div>
    <div class="content">
     <p>&nbsp;I meant to say half wave.... but funnily enough when my PV system is outputting &gt;3kW the scope IS showing a square wave, or maybe a truncated half wave because the signal is overloading the input?</p>
<p>I have played about with the e-mon software etc but it seemed a bit of an overkill for my purposes. I have just transferred the circuit to veroboard, and incorporated the control system to run my hot water panels so I'm not going to be altering anything for a while.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5234"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 15/07/2012 - 21:57.</div>
    <div class="content">
     <p><a title="View user profile." href="../user/1264.html">kalamgish</a></p>
<p>It does seem probable that you are overloading something. My sound card input says &quot;2dBv&quot;, so about 3.5 V p-p. The reason for the multi-turn pot in my test rig was to turn the input down to prevent overloading, and the resistor and diodes are there to prevent damage whatever happens. If you put a pot in between what you are measuring and the sound card, and turn it down and the peak does not move, you're overloading it!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5235"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dickielightbar&#039;s picture" title="dickielightbar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by dickielightbar (not verified) on Sun, 15/07/2012 - 22:30.</div>
    <div class="content">
     <p>Guys, I did not want to create an argument. We are all trying to achieve the same goal.</p>
<p>I did indeed find  the energy window as described in a Landis &amp; Gyr meter document.<br />
Quote</p>
<p>3.4 Reverse / Export Energy registration<br />
Three factory configurable reverse energy modes can be set as follows:<br />
Export Energy Registration<br />
A reverse / export energy register stores the value of kWh recorded by the meter in a reverse direction. The register may be configured as part of the display cycle of the meter. Alternately the register is held in memory and can be read from the meter via the IEC 1107 port. The Reverse energy register can be displayed with 0, 1 or 2 decimal places. Export energy will be recorded in the same way as forward (Import) flowing energy using identical starting currents etc. </p>
<p>Total Reverse<br />
Reverse Energy Detection<br />
A configurable option within the meter will alternate a warning message on the display should a fraud attempt be made by running current backwards  through the meter. The reverse energy warning message is triggered when the reverse power exceeds a programmable threshold level of between 1- 10 Amps for a period of 10Wh. Once this level is reached the message below will be displayed which can only be reset via the IEC 1107 port. Whilst in this mode the LED will remain lit whilst there is reverse energy detected.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5236"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 16/07/2012 - 00:11.</div>
    <div class="content">
     <p><a href="../user/1322.html" title="View user profile.">dickielightbar</a></p>
<p>Sorry, but that's actually what I was on about regarding fraud detection, it isn't the parameter that we're talking about when we say &quot;energy window&quot;. The way I got to understand it was to go through the code that accompanies the Atmel application note (AVR465) that the emonTx is based on. In that, the accumulated power readings over a period are added up and the result transferred to the energy registers. It's that period that we're interested in - Atmel I think (from memory) used something like 200 ms. I'd need to check again. From what you said about reactive loads, it clearly needs to be more than 1 cycle, and it clearly needs to be as close as possible to an integral number of cycles. MrSharkey (who's since left the forums) got hold of a meter and did bench tests, and by driving known amounts of power over carefully timed periods backwards and forwards through the meter, he came to the conclusion that the lower limit for the energy to be transferred to the registers was 1 Wh, below that value it was ignored and discarded. He concluded that the time over which this happened was immaterial.&nbsp; It is an assumption - but probably a very reasonable one - that most models of digital meter will behave similarly. But probably not identically.</p>
<p>A summary by MrSharkey (&quot;anonymous&quot;) of his findings is here: <a href="696.html#comment-4558" title="http://openenergymonitor.org/emon/node/696#comment-4558">http://openenergymonitor.org/emon/node/696#comment-4558</a> and that links to the thread with the main discussion.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5238"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Mon, 16/07/2012 - 08:23.</div>
    <div class="content">
     <p>If the LED on the supply meter were to be monitored, that information could conceivably be fed into the algorithm to reset/adjust/calibrate its data.&nbsp; By this means, it should be possible for a virtual energy meter to be synchronised with the physical one.&nbsp; Every Joule of surplus energy could then be safely utilised as required without need for a minimum level of export.&nbsp;&nbsp; </p>
<p>I rather like the idea of a hardware latch which is set whenever a meter event occurs.&nbsp; This could be polled every so often by the sketch, or maybe it should trigger an interrupt routine.&nbsp; If the latch can be reset, then it must have been set by a pulse (when importing power); if it can't be reset, this means that the LED is still on (when exporting power).</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7366"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kalamgish&#039;s picture" title="kalamgish&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by kalamgish (not verified) on Sat, 17/11/2012 - 10:36.</div>
    <div class="content">
     <p>I&#39;m just tacking this onto the thread I started, my monitor/controller is working fine however I want to add another sensor and output to the arduino.</p>
<p>The problem is I am using an 8 core cable to carry data and I have used 7 of the wires which leaves me one short.</p>
<p>My question is if I was to use the mains earth instead of my 0v line would that have any implications?</p>
<p>Thanks.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7372"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cheap current sensors</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 17/11/2012 - 13:44.</div>
    <div class="content">
     <p>I have two concerns.</p>
<ol>
<li>
		It is quite possible that you will get totally wrong readings from the sensor if you do that.&nbsp;</li>
<li>
		In the event of an earth fault somewhere, the mains earth could end up at an elevated voltage while the fuse blows or the circuit breaker trips, damaging your Arduino and anything connected to it.</li>
</ol>
<p>When you write &quot;I am using an 8 core cable to carry data and I have used 7 of the wires...&quot; what is the data and how are the wires used, i.e inputs from what sort of sensor, outputs driving what?&nbsp; Is it possible to share another wire? (There might be another way).</p>
<p>But by far the best way is to run another cable, or use the old cable to pull in a new one with more cores.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/786"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-TZWbqqYXBeZ16cu2hLF455Ksg9PrqFQRkCnP090eTs0" value="form-TZWbqqYXBeZ16cu2hLF455Ksg9PrqFQRkCnP090eTs0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/786 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:29:35 GMT -->
</html>
