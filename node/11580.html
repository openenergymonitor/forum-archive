<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11580 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:57:39 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>SCT-013-030 always 0V | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">SCT-013-030 always 0V</h3>
        <span class="submitted">Submitted by <a href="../user/8990.html" title="View user profile.">laryzbyszko</a> on Thu, 12/11/2015 - 22:48</span>
        <div class="content"><p>I am creating a wireless&nbsp;Energy Meter using XBee Radio and SCT-013-030 sensor. The problem I experience is that the sensor always gives me 0V - no matter on what cable i put it on. I have it connected on 1 cable only (i&#39;ve&nbsp;opened the power cord, so that I have access to separate cables). My meter looks like this:</p>
<p><img alt="XBee Enrgy Meter" src="../../../i1309.photobucket.com/albums/s634/6franek/Energy%20meter_bb_zpsevjhu2ia.png" style="width: 512px; height: 226px; float: left;" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>SCT-013-030 should give me 0-1V&nbsp;DC at the output. Analog input of XBee radio reads a range from 0V to 1.2V, so there should be no problem in reading the value, but it is still 0V. Am I doing something wrong or the sensor is broken?</p>
<p>Many thanks in advance for your help.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11386.html" class="topic-previous" title="Go to previous forum topic">‹ Editing ino file</a>
              <a href="11485.html" class="topic-next" title="Go to next forum topic">EmonCMS My Solar Broken ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-35852"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: SCT-013-030 always 0V</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Thu, 12/11/2015 - 23:21.</div>
    <div class="content">
     <p>Your CT will only give a 1V signal when it is clipped around a wire that is carrying 30A.&nbsp; At 230 V AC, that&#39;s a lot of power (~ 7.5 kW).&nbsp; When a smaller current is flowing, the CT will still generate a usable output signal but its amplitude will be correspondingly smaller.&nbsp;&nbsp;</p>
<p>Between the CT and the processor, there needs to be an interface circuit as explained here:</p>
<p><a href="https://learn.openenergymonitor.org/?redirect=ct-sensors-interface">http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35853"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: SCT-013-030 always 0V</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 12/11/2015 - 23:24.</div>
    <div class="content">
     <p><i>"SCT-013-030 should give me 0-1V DC at the output."</i></p>
<p>No, it should not, and it will not. It will give you 1 V <b>a.c.</b> for 30 A <b>a.c.</b> primary current. Transformers work on magnetic induction and that requires something to be continuously changing. They do not work on direct currents and voltages.</p>
<p>You cannot connect the radio directly to the C.T. output like that. The easy, but inaccurate, way is to rectify and average the C.T. output and feed that to the radio. Then, after applying the correct scaling factor, it will read the rectified average current, which is what budget multimeters read - but they are calibrated to indicate rms on the assumption that the waveform is a true sinusoid.</p>
<p>But you will need to use a 'perfect rectifier'. (Google it!)</p>
<p>[ Robin: the data sheet says "configuring the modem to sample at rates greater than once every 20ms is not recommended" - so precious little chance of getting the 50 Hz mains through that ADC!]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35856"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8990.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="laryzbyszko&#039;s picture" title="laryzbyszko&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: SCT-013-030 always 0V</h3>

    <div class="submitted">Submitted by <a href="../user/8990.html" title="View user profile.">laryzbyszko</a> on Fri, 13/11/2015 - 01:18.</div>
    <div class="content">
     <p>Thanks for your help. From the link I got from you I calculated that in order to obtain max. 1.2V (which is the max. value for XBee Radio)&nbsp;I would need two resistors - 470kOhm as R1 and 2.2MOhm as R2. Am I right? Which capacitor should I use as C1?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35859"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: SCT-013-030 always 0V</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 13/11/2015 - 02:29.</div>
    <div class="content">
     <p>I think Robin (calypso_rae) didn't know about the maximum sample rate: "configuring the modem to sample at rates greater than once every 20ms is not recommended".</p>
<p>You can do as he suggested, but it still won't work - at least, not in the way that I think you are expecting. Take a look at "precision rectifier" (sorry, I had forgotten what Google called it) circuits, because you'll need to put the bias circuit and that in between your CT output and the XBee before it stands a chance of working. You'll need to be careful and adjust the bias resistors and the rectifier gain together in order to get the correct zero and scale factor.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35872"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8990.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="laryzbyszko&#039;s picture" title="laryzbyszko&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: SCT-013-030 always 0V</h3>

    <div class="submitted">Submitted by <a href="../user/8990.html" title="View user profile.">laryzbyszko</a> on Fri, 13/11/2015 - 13:34.</div>
    <div class="content">
     <p>I&#39;ve read a little bit about precision rectifier and I understand the main idea of the circuit, but have no idea which particular circuit would best&nbsp;suit my needs&nbsp;(I&#39;ve found at least a few implementations of precision rectifier&nbsp;which seem to do&nbsp;exaclty&nbsp;the same thing)&nbsp;and how to adjust the resistors. Moreover, even if I would learn more about precision rectifier, didn&#39;t&nbsp;you suggest in your last post that this solution may still&nbsp;not work correctly?</p>
<p>Having said that, what do you think of using 3.3V version of Arduino Trinket as a &quot;bridge&quot; between the sensor and the&nbsp;XBee radio? It seems that I could connect the sensor to Trinket using calypso_rae&#39;s solution and then send the data from Trinket to XBee easily.</p>
<p>What would you suggest me to do?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35878"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: SCT-013-030 always 0V</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 13/11/2015 - 14:41.</div>
    <div class="content">
     <p>Back to basics.</p>
<p>The emonTx works by sampling the current at the rate of about 2500 times per second. That's about 50 samples for each cycle of mains. It needs the input to the ADC to be in the range 0 - 3.3 V so the bias circuit (explained in Building Blocks) is used to "condition" - add an offset to - the input voltage that the ADC measures. That offset is later removed in the software. The software then calculates the rms average current and sends it as a number via the radio.</p>
<p>Your XBee, according to the data sheet, can only measure one sample every 20 ms. That is one sample, not 50, every mains cycle. That won't work, so you need to do it another way. That is why I suggested a rectifier circuit. That does in hardware what the sketch does in software.</p>
<p>What you really need to do is understand the problems you are facing, and decide how those are best solved by what is available:<br />
1. The input normally accepts 0 - 3.3 V or 0 - 5 V, but your CT gives you -1.5 V &ndash; +1.5 V (roughly).<br />
2. The input oscillates at 50 Hz, you must sample it at least 10 times faster than that to calculate the average in the way that the emonTx does.<br />
3. If you cannot do that, you must use electronics to rectify the signal and produce an unchanging (or slowly changing) d.c. signal that your input can handle.</p>
<p>I don't know the Arduino Trinket, but it might do what you need, which is roughly the same as a one-channel emonTx! I think if you look at the emonTx V3.2 (data on GitHub &amp; the Wiki), that might give you some guidance on how to go about it. You could even make a one-channel emonTx with an ATmega 329P and a few external components, using the emonTx V3.2 circuit as your guide.</p>
<p>If you do use the Trinket, then you must condition the input, sample it and calculate the rms value, then ideally you send the resulting number to the XBee via the serial data bus. If you can't do that, you could try sending it to a PWM output and then reading it via the XBee's analogue input, but that is a very messy way to do it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11580"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-CENUv6UH6McACekPy3UIcU0F6rptXPOreCbeKe3Y-jo" value="form-CENUv6UH6McACekPy3UIcU0F6rptXPOreCbeKe3Y-jo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
