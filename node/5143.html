<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5143 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:46:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Backup / Migration tool? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Backup / Migration tool?</h3>
        <span class="submitted">Submitted by <a href="../user/5386.html" title="View user profile.">darrepac</a> on Tue, 06/05/2014 - 11:37</span>
        <div class="content"><p>Hi,</p>
<p>&nbsp;</p>
<p>My emoncms instance is working fine on my RPi + HDD. Goal is to forget it and make it work for months.</p>
<p>For sure, one day, it will crash and I would like to know the best procedure to backup everything regularly in order to restore easily in case of crash. I want to backup all: database but also emoncms application.</p>
<p>Is it enough, If I copy to my NAS all the files from the HDD + make an image of the SD card?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5798.html" class="topic-previous" title="Go to previous forum topic">‹ kwh/d</a>
              <a href="5844.html" class="topic-next" title="Go to next forum topic">save inputs ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-21255"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 06/05/2014 - 16:32.</div>
    <div class="content">
     <p>Try the &quot;Search&quot; box. Or the emonCMS documentation.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21260"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5386.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="darrepac&#039;s picture" title="darrepac&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/5386.html" title="View user profile.">darrepac</a> on Wed, 07/05/2014 - 09:35.</div>
    <div class="content">
     <p>Obviously, I already did it but unless I miss it, I did not find a complete solution to backup and restore everything. Some talks about having an other emoncms instance + some scripts, some store only the SQL database, some only the files...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21263"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 07/05/2014 - 11:26.</div>
    <div class="content">
     <p><em>&quot;Obviously, I already did it&quot;</em>&nbsp; No, not obvious at all.</p>
<p>When I read the instuctions, it seemed quite clear that the method described was intended to provide a complete backup. Have you done that and tested it? Are you saying it does not backup everything?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21268"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5386.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="darrepac&#039;s picture" title="darrepac&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/5386.html" title="View user profile.">darrepac</a> on Wed, 07/05/2014 - 15:45.</div>
    <div class="content">
     <p>Which instructions?</p>
<p>I read tens of forum posts but none seems 100% clear and complete to me. In the manual (<a href="http://emoncms.org/site/docs/backup" title="http://emoncms.org/site/docs/backup">http://emoncms.org/site/docs/backup</a>) the instructions need to have another machine running an instance of emoncms&nbsp;which is not trivial to have when you have it running on one RPi</p>
<p>I may have missed such instructions you are talking about, so can you point me to the &quot;right&quot; link?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21270"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 07/05/2014 - 18:56.</div>
    <div class="content">
     <p>Are you saying you want to use the RPi to make the backup on the NAS?</p>
<p>The first part of the instructions - yes you were in the correct place - assume you are making the backup on a connected machine. Approach 2 gives the default locations of the databases, it should be adequate to copy those.</p>
<p>However, as much effort goes into setting up the RPi in the first place, you probably need an image of the complete HDD and of your boot SD card in any case, in addition to making regular copies of the data files.</p>
<p>(If you can, it would be a good idea to set up emoncms on another machine anyway, and &#39;restore&#39; your backup up data to that, thus proving your backup.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21299"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5386.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="darrepac&#039;s picture" title="darrepac&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/5386.html" title="View user profile.">darrepac</a> on Fri, 09/05/2014 - 15:09.</div>
    <div class="content">
     <p>Well...</p>
<p>Other idea I got was to use emoncms.org as a backup... copying all my input/feeds to emoncms.org</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21329"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5386.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="darrepac&#039;s picture" title="darrepac&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/5386.html" title="View user profile.">darrepac</a> on Sun, 11/05/2014 - 10:44.</div>
    <div class="content">
     <p>I did a mysqldump of my database... the resulting files is quite small (47kB). Does it mean that all the data are store in /var/lib/phpfiwa (phpfina, timestore)? or there is an issue with my dump?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22187"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4312.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hendersoniain&#039;s picture" title="hendersoniain&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/4312.html" title="View user profile.">hendersoniain</a> on Wed, 25/06/2014 - 19:35.</div>
    <div class="content">
     <p>Hi,</p>
<p>I&#39;m trying to upgrade my emoncms on my Pi using the following documentation: <strong>http://emoncms.org/site/docs/upgrading</strong></p>
<p>When I try to do any of the mysqlbackup commands: <strong>mysqldump -u root -p emoncms &gt; emoncms_backup.sql</strong></p>
<p>I always get permission denied:<strong> -bash: emoncms_backup.sql: Permission denied</strong></p>
<p>I have not changed any passwords as far as I know. Any ideas?</p>
<p>Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22220"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3514.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Simonk695&#039;s picture" title="Simonk695&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/3514.html" title="View user profile.">Simonk695</a> on Fri, 27/06/2014 - 16:23.</div>
    <div class="content">
     <p>Where are you running the script from?&nbsp; What directory?&nbsp; You may not have &#39;write&#39; permissions on that.&nbsp; Try...</p>
<p>mysqldump -u root -p emoncms &gt; /home/pi/emoncms_backup.sql</p>
<p>That way you are writing to your home directory.&nbsp; Better still an attached USB drive?</p>
<p>/mnt/usb etc</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22263"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4312.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hendersoniain&#039;s picture" title="hendersoniain&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/4312.html" title="View user profile.">hendersoniain</a> on Wed, 02/07/2014 - 18:54.</div>
    <div class="content">
     <p>Hi,</p>
<p>Thanks. Got it now - I was using the wrong root password for my pi!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22273"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4268.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="threldor&#039;s picture" title="threldor&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/4268.html" title="View user profile.">threldor</a> on Thu, 03/07/2014 - 06:35.</div>
    <div class="content">
     <p>Hi,&nbsp;</p>
<p>I have found a few methods to backup/migrate/restore a local emoncms&nbsp;database and have been using them effectively. I am interested in a way to backup/export a local database and import this to emoncms.org as darrepac&nbsp;suggested.<br />
	Any help would be great.</p>
<p>cheers</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22276"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 03/07/2014 - 08:10.</div>
    <div class="content">
     <p>Hello threldor, unfortunately there&#39;s no easy way to do that at the moment, you can send bulk historic data to emoncms.org using the input/bulk api:</p>
<p>http://localhost/emoncms/input/bulk.json?data=[[520,16,1137],[530,17,1437,3164],[535,19,1412,3077]]&amp;sentat=543</p>
<p>- The first number of each node is the time offset (see below).<br />
	- The second number is the node id, this is the unique identifer for the wireless node.<br />
	- All the numbers after the first two are data values. The second node here (node 17) has two data values: 1437 and 3164.</p>
<p>This is documented on the input api helper page in emoncms.</p>
<p>But backing up configuration data is more difficult. The main challenge with migrating data like this is that a local emoncms install will have different unique ID&#39;s for nodes/feeds/dashboards etc to the target emoncms server and so there needs to be a mechanism that remaps all these unique ID&#39;s.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22280"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 03/07/2014 - 13:18.</div>
    <div class="content">
     <p>I realise the emoncms.org backup to a local emoncms tool is out of date, Im working on bringing it up to date now.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22312"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 04/07/2014 - 09:11.</div>
    <div class="content">
     <p>I&#39;ve updated the emoncms.org backup tool to use the new engines, its also possible to download the data to your computer without a local installation of emoncms, documentation and link to backup script is up here: <a href="http://emoncms.org/site/docs/backup" title="http://emoncms.org/site/docs/backup">http://emoncms.org/site/docs/backup</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24214"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="borpin123&#039;s picture" title="borpin123&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Backup / Migration tool?</h3>

    <div class="submitted">Submitted by <a href="../user/4638.html" title="View user profile.">borpin123</a> on Wed, 01/10/2014 - 14:10.</div>
    <div class="content">
     <p>Just looking at this as I need to update an old version.</p>
<p>At the bottom of the page is the warning;</p>
<p><em>Important Make sure you disable oem_gateway/emonhub or raspberrypi_run and any posting to the http api&#39;s (stop apache) before copying the data files so that when you make the copy the data is in a state where its not being written to.</em></p>
<p>How exactly do you do this? &nbsp;I am not using the OEM gateway (but others might). &nbsp;Could this backup page and the upgrade page be updated to tell those less familiar with the inner workings how to do this please.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5143"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-xDGUJlHmgMdS9Iao89j9GVyZXH84v8rzyBO9BXqYxW8" value="form-xDGUJlHmgMdS9Iao89j9GVyZXH84v8rzyBO9BXqYxW8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
