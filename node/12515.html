<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12515 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:16:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>How to - read EmonPI / Nodes module API? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">How to - read EmonPI / Nodes module API?</h3>
        <span class="submitted">Submitted by <a href="../user/9784.html" title="View user profile.">Paul-B</a> on Sat, 16/04/2016 - 17:36</span>
        <div class="content"><p>Hi all,</p>
<p>I have done a search and can&#39;t find a clear answer to my question. I have just purchased a EmonPI and would like my existing home-automation system to be able to read the real-time consumption feed.</p>
<p>In the API documentation I see that I can GET <a href="http://emonpi/emoncms/nodes/5/rx/1">http://emonpi/emoncms/nodes/5/rx/1</a> and return a JSON object in the form :</p>
<p>{&quot;name&quot;:&quot;power1&quot;,&quot;value&quot;:&quot;100&quot;,&quot;unit&quot;:&quot;W&quot;}</p>
<p>But this only works if I am logged in and have an existing authenticated session. I therefore assume I need to add my read API key but I can&#39;t determine the syntax to do this. Can someone help or point me at a wiki / doc?</p>
<p>Many thanks</p>
<p>Paul<br />
&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10771.html" class="topic-previous" title="Go to previous forum topic">‹ All nodes Inactive</a>
              <a href="12529.html" class="topic-next" title="Go to next forum topic">EmonCMS Inputs disconnected from Feeds ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-41196"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to - read EmonPI / Nodes module API?</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 16/04/2016 - 18:06.</div>
    <div class="content">
     <p>If you look at your &#39;Feed API Help&#39; link on your feeds page, it will give you details of how to format your API syntax.</p>
<p>To authenticate, add <strong>&amp;apikey=YOURAPIKEY</strong>&nbsp;to the URL.</p>
<p>eg</p>
<p><a href="http://yourdomain.co.uk/emoncms/feed/value.json?id=13&amp;apikey=c76354Fggdf637HffhhhH" title="http://yourdomain.co.uk/emoncms/feed/value.json?id=13&amp;apikey=c76354Fggdf637HffhhhH">http://yourdomain.co.uk/emoncms/feed/value.json?id=13&amp;apikey=c76354Fggdf...</a></p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41212"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9784.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9784.jpg" alt="Paul-B&#039;s picture" title="Paul-B&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to - read EmonPI / Nodes module API?</h3>

    <div class="submitted">Submitted by <a href="../user/9784.html" title="View user profile.">Paul-B</a> on Sun, 17/04/2016 - 10:41.</div>
    <div class="content">
     <p>Paul,</p>
<p>Thanks for the info. I wanted to use Nodes rather than Feeds although I could re-write to a feed. My limited understanding is the API in Feeds is part of the core code, whilst the API for Nodes has been added as part of EmonView. If I try to add apikey=MyAPIReadKey for a node query it doesn&#39;t work so I assume it needs to be in a different syntax?</p>
<p>Paul</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41219"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to - read EmonPI / Nodes module API?</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 18/04/2016 - 08:07.</div>
    <div class="content">
     <p>Hello Paul, can your home automation system subscribe to MQTT messages? that might be a better approach if you have the option. Before the data gets into the emoncms nodes interface it is first read from the emonpi serial port using emonhub, this then forwards the data on to the local emoncms using MQTT and it can also forward the data to a remote emoncms such as emoncms.org via HTTP.</p>
<p>We are actually moving away from the nodes interface in the next emonpi image update (<a href="12437.html" title="https://openenergymonitor.org/emon/node/12437">https://openenergymonitor.org/emon/node/12437</a>) - to the input module with the node data posted there from emonhub via mqtt. So perhaps if your going to setup something more complex you might be interested in downloading the pre-release image there.</p>
<p>Third option, I&#39;ve found the bug in the emoncms nodes module and have fixed it, If you run the emonpi update tool it will bring in the latest changes. You will then be able to access to read values with the api:</p>
<p><a href="http://emonpi/emoncms/nodes/5/rx/1?apikey=READ_APIKEY" title="http://emonpi/emoncms/nodes/5/rx/1?apikey=READ_APIKEY">http://emonpi/emoncms/nodes/5/rx/1?apikey=READ_APIKEY</a></p>
<p>PS the nodes module is different from emonview which was an experimental attempt to create a simplified python implementation of emoncms which has been discontinued for now. To avoid confusion I will change EmonView to Nodes module in the subject line.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41250"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9784.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9784.jpg" alt="Paul-B&#039;s picture" title="Paul-B&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to - read EmonPI / Nodes module API?</h3>

    <div class="submitted">Submitted by <a href="../user/9784.html" title="View user profile.">Paul-B</a> on Tue, 19/04/2016 - 08:46.</div>
    <div class="content">
     <p>Trystan,</p>
<p>Thanks for the quick fix and explanation. I have updated my EmonPi and can now access the Nodes module. I&#39;ll use this for now whilst I explore and discuss moving to MQTT with the home automation vendor. Appreciate the explanation and help as I get up to speed with the whole ecosystem</p>
<p>Paul</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12515"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-l4dk2r8zUtjldad437xnK_Q-RN7ROzOZj5aBfaJqwt8" value="form-l4dk2r8zUtjldad437xnK_Q-RN7ROzOZj5aBfaJqwt8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
