<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11015 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:03:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>ESP8266  and Emoncms | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node sticky">

    
    
          <div class="comment" >
                <h3 class="title" style="">ESP8266  and Emoncms</h3>
        <span class="submitted">Submitted by <a href="../user/1894.html" title="View user profile.">Ian Eagland</a> on Tue, 21/07/2015 - 11:37</span>
        <div class="content"><p>Hi</p>
<p>There seems to be a lot of interest in the ESP8266 and emoncms.</p>
<p>I have started this thread as a resource&nbsp;for any one interested.</p>
<p>Esp8266&nbsp;forum&nbsp; <a href="http://www.esp8266.com/" title="http://www.esp8266.com/">http://www.esp8266.com/</a></p>
<p>Very useful blog&nbsp; <a href="http://tech.scargill.net/" title="http://tech.scargill.net/">http://tech.scargill.net/</a></p>
<p>I have emoncms monitoring my central heating, rain fall and a&nbsp;garden shed mounted DC solar system. (We live in a listed cottage and have a very small roof so grid connected PV is tricky) I use the rain fall to control a solar powered remote irrigation system locally controlled by an&nbsp;Arduino. I use SMS messages to monitor and control the water. The whole system is tied together using mqtt&nbsp;(my own broker -&nbsp;mosquitto) and node red running on a Pi. My emoncms is locally hosted also on a PI.&nbsp;(At the moment 2 Pi are used mainly for historical reasons, now I have everything pretty well debugged I think it could all run happily on a Pi2)&nbsp;I can control most things over the internet using thing studio:- &nbsp; &nbsp; &nbsp;&nbsp; <a href="http://www.thingstud.io/" title="http://www.thingstud.io/">http://www.thingstud.io/</a></p>
<p>I am working on using an ESP8266&nbsp;as the local control for the irrigation and controlling via the Internet as there&nbsp;is now a public wifi&nbsp;connection I can pick up.</p>
<p>Regards</p>
<p>Ian</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12492.html" class="topic-previous" title="Go to previous forum topic">‹ Future of OpenEnergyMonitor Forums &amp; website </a>
              <a href="11528.html" class="topic-next" title="Go to next forum topic">HELP US TO HELP YOU ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-32433"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Tue, 21/07/2015 - 12:40.</div>
    <div class="content">
     <p>Ian,</p>
<p>there seem to be at least four different ways to use the ESP8266:</p>
<p>- use as a slave controller with the AT command set</p>
<p>- use NodeMCU firmware and LUA script programming</p>
<p>- write native code with the ARDUINO IDE and environment</p>
<p>- write native code with the Espressif SDK</p>
<p>Which way will you be going?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32436"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5908.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rbreuss&#039;s picture" title="rbreuss&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/5908.html" title="View user profile.">rbreuss</a> on Tue, 21/07/2015 - 13:32.</div>
    <div class="content">
     <p>I just tested first scenario mentioned by Jorg - ESP8266&nbsp;as a AT command slave for Arduino Due and it is really impressive powerfull and flexible set.</p>
<p>Radek</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32438"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1894.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1894.html" title="View user profile.">Ian Eagland</a> on Tue, 21/07/2015 - 14:22.</div>
    <div class="content">
     <p>Hi Jorg</p>
<p>I ended up using this :-&nbsp;http://www.esp8266.com/viewtopic.php?f=9&amp;t=820</p>
<p>It meant learning how to use basic eclipse functions but I did not find it too difficult (after a lot of google searching). The main reason was because it had the best mqtt support I could find when I first started. It uses this library:- &nbsp;http://www.esp8266.com/viewtopic.php?f=6&amp;t=1031&amp;start=40</p>
<p>I must admit it was mainly because that is what Peter Scargill is using and he seems to know what he is doing and he is also using the ESP8266&nbsp;for&nbsp;a very similar application to mine.</p>
<p>Regards</p>
<p>Ian&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32443"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 21/07/2015 - 15:12.</div>
    <div class="content">
     <p>If on your travels you should find any info on how to make a serially connected&nbsp;esp8266&nbsp;replicate a &quot;normal usb&nbsp;wifi&nbsp;dongle&quot; for normal internet usage,&nbsp;I would be very pleased to hear about it, I did search extensively but the general consensus seems to be &quot;yes it&#39;s capable but why bother when a usb dongle costs the same&quot;.</p>
<p>What the esp8266&nbsp;method can do that the standard dongle cannot is power&nbsp;down&nbsp;AND power up the Pi (or reboot) and put itself to sleep, and it has a single adc that could monitor it&#39;s own battery voltage and (something you may be interested in Ian) when operating from battery it can shut down the Pi when battery voltage is low and start it again when battery voltage comes back up, whilst providing&nbsp;a manual override and notifications/updates in it;&#39;s &quot;sleep&quot; state (ie Pi off &amp; esp sleep 90% of the time)</p>
<p>Plus the esp8266&nbsp;is capable of starting in AP&nbsp;mode and switching function, which could make a very easy WiFi configuration method, plug it on =&gt;&nbsp;connect&nbsp;to network &quot;esp&quot; using a smartphone&nbsp;=&gt; enter ssid and password =&gt;&nbsp;exit ap-mode so the pi can connect to your lan, job done.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32461"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Wed, 22/07/2015 - 10:33.</div>
    <div class="content">
     <p>I have so far done a quick test with a USB adapter and ESP8266 using the AT command set. Very impressive! Two simple commands and I had the chip&nbsp;connected to my WLAN, wow. But in the end I do not want to use a second microcontroller.</p>
<p>I have also set everything up for the Arduino environment. Sample programs compile, so there is a good chance it works if I get my final hardware (today?).</p>
<p>Not so much success with the setup Ian uses (<a href="http://www.esp8266.com/viewtopic.php?f=9&amp;t=820" title="http://www.esp8266.com/viewtopic.php?f=9&amp;t=820">http://www.esp8266.com/viewtopic.php?f=9&amp;t=820</a>). Everything is set up successfully, but I am not able to compile sample projects from others. Not sure about the reason, but has something to do with the makefile and location of files.</p>
<p>BR, J&ouml;rg.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32484"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7605.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="craigfryer&#039;s picture" title="craigfryer&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/7605.html" title="View user profile.">craigfryer</a> on Thu, 23/07/2015 - 01:03.</div>
    <div class="content">
     <p>I am looking at using the ESP8266 to operate as temperature and humidity sensor plus IR remote control for an air conditioner. However it is looking more complicated than I thought it would be, mainly because of the way in which the IR commands work for the air conditioner. I really wish I had bought an air conditioner with wifi remote control. That however wouldn&#39;t have solved the problem with the older air conditioner unit.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32529"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 23/07/2015 - 16:19.</div>
    <div class="content">
     <p>For anyone interested in using Arduino environment for programming of ESP8266:</p>
<p>I tried to program the NodeMCU hardware using the setup described here:</p>
<p><a href="https://github.com/esp8266/Arduino">https://github.com/esp8266/Arduino</a></p>
<p>It has cost me some hours now to find out that the &#39;stable&#39; version to use the boardmanager:</p>
<p>http://arduino.esp8266.com/<strong>stable</strong>/package_esp8266com_index.json</p>
<p>does <strong>not </strong>work. The NodeMCU hardware uses a different layout/addressing of the flash and some variants of the ESPxx chips might do so too.</p>
<p>So, always use the &#39;staging&#39; version:</p>
<p>http://arduino.esp8266.com/<strong>staging</strong>/package_esp8266com_index.json</p>
<p>This one works like a charm &#39;out of the box&#39;.</p>
<p>J&ouml;rg.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32572"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rogerclark&#039;s picture" title="rogerclark&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by rogerclark (not verified) on Thu, 23/07/2015 - 23:59.</div>
    <div class="content">
     <p>Just as a matter of interest, has anyone got eMonLib working with an ESP8266?</p>
<p>I know they only have one ADC, so could only be used for monitoring current. However with the addition of an external analog mux it may be possible to read both voltage and current. I don&#39;t know how fast the ADC is on the ESP8266 (I can&#39;t seem to find a very good datasheet for this device), but if it was fast enough and the mux was fast enough, it may be possible to switch the mux and sample both voltage and current on the same ADC input.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32744"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Tue, 28/07/2015 - 16:41.</div>
    <div class="content">
     <p>Just for info:</p>
<p>I am now using the NodeMCU hardware (very convenient to use) in combination with the Arduino IDE. First project was to measure voltage and current of my PV storage battery and send this data via Wifi to EmonCMS running on a Raspberry Pi. I am using an external Microchip 18 bit I&sup2;C ADC (MCP3424 on Jeelabs Analog plug).&nbsp;</p>
<p>This is so simple, it is really amazing ....</p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33195"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Mon, 10/08/2015 - 16:56.</div>
    <div class="content">
     <p>Hi Jorg,</p>
<p>I am interested in your NodeMCU implementation, this sounds very interesting! &nbsp;How are you sending the data to EmonCMS?</p>
<p>Jeff</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33197"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Mon, 10/08/2015 - 18:40.</div>
    <div class="content">
     <p>+1 to that. Which version of emoncms and how have you linked the data into emoncms?</p>
<p>Must admit I&#39;ve also found it incredibly easy to get things up and running with the arduino ide. I&#39;ve been using Nathan Chantrell&#39;s dev board with the esp03, sending temperatures to an mqtt server.</p>
<p>For anyone wanting to play around you could also look at the simple web server demo that Pete Scargill published in the last couple of days.</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33225"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Tue, 11/08/2015 - 08:51.</div>
    <div class="content">
     <p>Jeff, Simon,</p>
<p>I use the NodeMCU hardware with the normal &#39;Arduino&#39; firmware.</p>
<p>Attched my small sketch. It reads voltage and current from an MCP3424 and sends this data to the EmonCMS running on a Raspberry Pi. (Wifi and EmonCMS keys deleted).</p>
<p>Hope it helps.</p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33226"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8520.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="SnaxMuppet&#039;s picture" title="SnaxMuppet&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/8520.html" title="View user profile.">SnaxMuppet</a> on Tue, 11/08/2015 - 09:48.</div>
    <div class="content">
     <p>I am hoping to use some ESP8266 devices on my home automation. The first project is to use one with a DHT22 to report temperature and humidity back to emoncms.</p>
<p>In fact, where I can I will use an ESP8266&nbsp;instead of an Arduino. They have limited cpacity but for simple tasks where an Arduino isn&#39;t needed they are perfect.</p>
<p>The general principle I am hoping to use on my home network is to expose sensor data from an ESP8266 as json or a simple web page. The ESP8266 acts as a simple web server very easily so creating a kinda&nbsp;API for other nodes on the Wifi network&nbsp;to interrogate&nbsp;should be straightforward.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33228"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Tue, 11/08/2015 - 09:58.</div>
    <div class="content">
     <p>Thank you Jorge! &nbsp;Your code cleared up some mysteries for me.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33232"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Tue, 11/08/2015 - 10:39.</div>
    <div class="content">
     <p>Jorge. Much appreciated!!</p>
<p>Just an FYI, you missed blanking one of the api keys. There is one at the end of the code. You might want to blank this and resubmit.</p>
<p>But very many thanks, this has really helped me. Would have taken hours of searching for the info and debugging it until it was running.</p>
<p>Simon.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33238"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Tue, 11/08/2015 - 11:24.</div>
    <div class="content">
     <p>Simon,</p>
<p>oh yes, missed that apikey (I had made a test with variable and &#39;hard coded&#39; strings). Not a big issue though as the Raspi is on my internal network only. Would have been worse if I had published my WIFI key ;-)))</p>
<p>When I wrote that sketch I had just begun to play around with the Arduino ESP8266. There might be places in the code where things can be done in a better way. But this setup is running since some weeks now without any problems. It is reading the voltage and current of my PV storage battery. Next amendment will be to read the charge and discharge currents separately with two individual shunts (battery is charged via an MPPT charge controller and discharged by a controllable AEconversion grid tie inverter). And then I want to add an RS485 for communication with the inverter. The software changes will be easy, it takes more time to do the hardware part.</p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33752"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8651.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8651.jpg" alt="whatnick&#039;s picture" title="whatnick&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/8651.html" title="View user profile.">whatnick</a> on Tue, 01/09/2015 - 02:31.</div>
    <div class="content">
     <p>I have been using an ESP8266 with an ADS1115 ADC to read data off a current clamp and approximately monitor my power usage. Here is the set-up: <img alt="ESP8266 + ADS1115" src="../../../pbs.twimg.com/media/CNthpo4UAAA8RqC.jpg" style="width: 599px; height: 337px;" /></p>
<p>There is a free differential channel for reading the voltage using a transformer as well.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33782"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7605.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="craigfryer&#039;s picture" title="craigfryer&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/7605.html" title="View user profile.">craigfryer</a> on Tue, 01/09/2015 - 22:29.</div>
    <div class="content">
     <p>Which&nbsp;ESP8266&nbsp;board you are using?</p>
<p>Do you have a circuit diagram for this?</p>
<p>What code are you using?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33819"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8651.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8651.jpg" alt="whatnick&#039;s picture" title="whatnick&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/8651.html" title="View user profile.">whatnick</a> on Thu, 03/09/2015 - 08:33.</div>
    <div class="content">
     <p>I am using a NodeMCU v1.0 board like this one - <a href="https://github.com/nodemcu/nodemcu-devkit-v1.0" title="https://github.com/nodemcu/nodemcu-devkit-v1.0">https://github.com/nodemcu/nodemcu-devkit-v1.0</a> . It is slim and fits nicely on the breadboard. The ADS1115 is attached to pins 1,2 of the NodeMCU via the I2C bus. The code I am using is a modified version of the Irms method in emonLib for Arduino. I will upload my sketch to gist tonight and update this.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33823"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8651.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8651.jpg" alt="whatnick&#039;s picture" title="whatnick&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/8651.html" title="View user profile.">whatnick</a> on Thu, 03/09/2015 - 13:14.</div>
    <div class="content">
     <p>Here is the gist with the code - <a href="https://gist.github.com/whatnick/73c244694466355f6a14" title="https://gist.github.com/whatnick/73c244694466355f6a14">https://gist.github.com/whatnick/73c244694466355f6a14</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33840"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7605.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="craigfryer&#039;s picture" title="craigfryer&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/7605.html" title="View user profile.">craigfryer</a> on Thu, 03/09/2015 - 21:37.</div>
    <div class="content">
     <p>Thanks.</p>
<p>With the ADS1115, would it be able to monitor a total of 4 currents since it is a four channel system?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33843"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8651.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8651.jpg" alt="whatnick&#039;s picture" title="whatnick&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/8651.html" title="View user profile.">whatnick</a> on Fri, 04/09/2015 - 05:23.</div>
    <div class="content">
     <p>I am using the ADS1115 in differential mode to avoid having to add the bias voltage resistors and have a voltage reference. So my set-up is limited to 2 channels. You have the choice of setting it up in single ended mode with voltage dividers and using all the 4 channels separately, or you can put 2 ADS1115 sensors on the I2C bus with different addresses as shown here. I am going to get Fritzing and redraw this with Node MCU.</p>
<p><img alt="Wiring multiple ADS1115" height="465" src="../../../cdn-learn.adafruit.com/assets/assets/000/002/677/medium800/sensors_FourBoards_bb-10246425.jpg?1396785716" width="558" /></p>
<p>Here is how the ADS1115 is connected to the NodeMCU:</p>
<p><img alt="" height="314" src="../../../pbs.twimg.com/media/COCQRV4U8AAyYYs.png" width="563" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33844"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7605.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="craigfryer&#039;s picture" title="craigfryer&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/7605.html" title="View user profile.">craigfryer</a> on Fri, 04/09/2015 - 02:51.</div>
    <div class="content">
     <p>Thanks for all the information.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35265"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8651.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8651.jpg" alt="whatnick&#039;s picture" title="whatnick&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/8651.html" title="View user profile.">whatnick</a> on Fri, 23/10/2015 - 12:12.</div>
    <div class="content">
     <p>I have put my project together on a PCB and it is available here - <a href="https://www.tindie.com/products/whatnick/nodemcu-energy-monitor-pcbkit/" title="https://www.tindie.com/products/whatnick/nodemcu-energy-monitor-pcbkit/">https://www.tindie.com/products/whatnick/nodemcu-energy-monitor-pcbkit/</a> . Please let me know if you are interested.</p>
<p>The full story of its development is here - <a href="http://whatnicklife.blogspot.com.au/2015/09/experimenting-with-energy-monitors.html" title="http://whatnicklife.blogspot.com.au/2015/09/experimenting-with-energy-monitors.html">http://whatnicklife.blogspot.com.au/2015/09/experimenting-with-energy-mo...</a> .</p>
<p>Tisham.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35352"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8519.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="helianto&#039;s picture" title="helianto&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/8519.html" title="View user profile.">helianto</a> on Sun, 25/10/2015 - 21:36.</div>
    <div class="content">
     <p>You are publishing your api key...</p>
<p>&nbsp;</p>
<p>look:</p>
<p>
client.print(&quot;GET /emoncms/input/post.json?apikey=b53ec1abe610************9e&amp;node=20&amp;csv=&quot;);</p>
<p>&nbsp;</p>
<p>correct it if you can<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39364"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8675.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="chris1howell&#039;s picture" title="chris1howell&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: ESP8266  and Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/8675.html" title="View user profile.">chris1howell</a> on Sat, 13/02/2016 - 02:56.</div>
    <div class="content">
     <p>Here&#39;s firmware for&nbsp;ESP8266/EmonCMS code I wrote to get data from an Electric Vehicle charging station and send it to the server.</p>
<p><a href="https://github.com/chris1howell/OpenEVSE_RAPI_WiFi_ESP8266" title="https://github.com/chris1howell/OpenEVSE_RAPI_WiFi_ESP8266">https://github.com/chris1howell/OpenEVSE_RAPI_WiFi_ESP8266</a></p>
<p>The firmware boots up as an Access Point in configuration mode to enter SSID, Password, EMON Key and Node which is stores in EEPROM.</p>
<p>Then it boots into client mode, connects to your AP and sends data to EmonCMS. The web server is active in client mode to edit configuration.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11015"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-BFt803LtuFESqPCxr-vjKR56l6mMb9Z1vbmBCvBaaG8" value="form-BFt803LtuFESqPCxr-vjKR56l6mMb9Z1vbmBCvBaaG8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
