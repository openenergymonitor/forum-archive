<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5283 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:06:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Oil Boiler Control Problem | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Oil Boiler Control Problem</h3>
        <span class="submitted">Submitted by <a href="../user/6478.html" title="View user profile.">jimboozle</a> on Fri, 06/06/2014 - 11:32</span>
        <div class="content"><p>Hi Chaps,</p>
<p>So I&rsquo;m entirely new to Arduino / Raspberry Pi, and don&rsquo;t know where to start. I do, however, know where I want to get to.</p>
<p>My home central heating system is fairly complex &ndash; I&rsquo;ve got a woodburning boiler stove downstairs hooked into a thermal store in the attic. I&rsquo;ve also got an oil fired boiler in the garage (no mains gas) which is controlled by a thermostat on the thermal store. Currently, every time the thermal store dips below 70degC, the boiler kicks in and burns for about 10 minutes. This is inefficient.</p>
<p>What I would like to do is for the boiler to kick in when the thermal store gets down to 50degC and keep burning until the temperature is back to 70. Beyond this, I&rsquo;d also like to log the thermal store temperature so I can get some idea of how much my wife&rsquo;s penchant for hot baths and 40min showers is costing me in kerosene!&nbsp; There may also be some scope later for a flowmeter on the boiler, but not yet...</p>
<p>I might also be able to tweak the threshold temperatures to really nail an efficient burn time for the oil boiler. May also look at splitting the upstairs into a separate heating zone, but not worried about that at the moment.&nbsp; What is definitely outside the scope of this project is messing with the control I have set up for the woodburner, heatsink radiator and associated valves, as they have been designed to failsafe on power outage and dump all excess heat into the heatsink. This means I don&rsquo;t have to worry about my woodburner blowing up.</p>
<p>It would be interesting to log the contribution the woodburner makes to the house heating, but I think that can come later. I realise I&rsquo;ll need a base unit, a relay board and a temperature monitoring thingy. I&rsquo;ve got a degree in electronics (unused for the last 15 years) but I reckon I&rsquo;m ok with the build and installation. I am however, completely at a loss when it comes to programming.</p>
<p>Has anyone done a similar project / able to point me in the direction of some suitable literature?</p>
<p>Much obliged.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3584.html" class="topic-previous" title="Go to previous forum topic">‹ [SOLVED?] Feeds not updating after random time</a>
              <a href="5304.html" class="topic-next" title="Go to next forum topic">Raspberry Pi + HDD build with IP Arduino nodes ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-21866"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Oil Boiler Control Problem</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 06/06/2014 - 22:59.</div>
    <div class="content">
     <p>I think you should be able to do your control with an emonTx, either the V2 or the V3. As you won&#39;t apparently be using the electrical inputs, either version will work well for you.&nbsp; The V2 has many more IO available for use, but requires assembly - and I&#39;m not sure that kits are still available (but that can easily be checked). Rather than relays - assuming you&#39;re switching mains to control the oil-burning boiler - I&#39;d suggest using an opto-isolated trigger IC and a triac, as per Robin&#39;s MK2 diverter.</p>
<p>If you do that, for parts you&#39;d need an emonTx V2, 5 V usb power supply + lead, opto-trigger, triac, heatsink, stripboard and a few more components, and a programmer and lead. Plus a suitable enclosure. Personally, I&#39;d dispense with the heatsink and use a diecast box as a combined heatsink and enclosure.</p>
<p>If you want to control zone valves, you&#39;d need use more digital outputs and add more trigger ICs and triacs.</p>
<p>That would give you control, but no logging. For logging, you can use a NanodeRF and send the data to emoncms.org; or you can have a Raspberry Pi&nbsp; and the Gateway card and send the data to emoncms.org; or you can have a Raspberry Pi and a local hard disk and log to a copy of emonCMS running on the Pi - no Internet required. Logging to an SD card is strongly not recommended.</p>
<p>You can connect the emonTx via a serial data connection directly to the RPi, or probably more conveniently equip the RPi with a RFM12Pi radio and use the radio facility of the emonTx to transmit the logging data.</p>
<p>Control software can initially be fairly simple: You use one of our standard sketches as a starting point for the temperature and radio parts, and for control (initially at least) you require to define the pin the boiler is connected to, then in the main control loop you add little more than:</p>
<p>&nbsp;if (temp &lt; 50) digitalWrite(OILBOILER, ON);<br />
	&nbsp;if (temp &gt; 70) digitalWrite(OILBOILER, OFF);</p>
<p>and throw away all the voltage and current measuring parts (i.e. most of the sketch!).</p>
<p>For learning to program the emonTx, you&#39;ve got to learn the rudiments of C and C++. My bible for C is of course &quot;Kernigan &amp; Ritchie&quot; <a href="http://www.amazon.co.uk/C-Programming-Language-2nd/dp/0131103628/ref=sr_1_3?s=books&amp;ie=UTF8&amp;qid=1292502807&amp;sr=1-3" title="http://www.amazon.co.uk/C-Programming-Language-2nd/dp/0131103628/ref=sr_1_3?s=books&amp;ie=UTF8&amp;qid=1292502807&amp;sr=1-3">http://www.amazon.co.uk/C-Programming-Language-2nd/dp/0131103628/ref=sr_...</a>. This is the standard text book.&nbsp; The normal place I point people at who want to move up to C++ is <a href="http://www.relisoft.com/book/index.htm" title="http://www.relisoft.com/book/index.htm">http://www.relisoft.com/book/index.htm</a> and that assumes you know C. Because the Arduino environment normally uses a very small subset of the language, neither are the best place for a beginner to start, nor are many of the other on-line tutorials. I&#39;d still suggest you have both of those, and maybe Bruce Eckel&#39;s &quot;Thinking in C++&quot; <a href="http://www.planetpdf.com/developer/article.asp?ContentID=6634" title="http://www.planetpdf.com/developer/article.asp?ContentID=6634">http://www.planetpdf.com/developer/article.asp?ContentID=6634</a> available for reference.</p>
<p>However, there is this: <a href="http://www.me.umn.edu/courses/me2011/arduino/arduinoGuide.pdf" title="http://www.me.umn.edu/courses/me2011/arduino/arduinoGuide.pdf">http://www.me.umn.edu/courses/me2011/arduino/arduinoGuide.pdf</a> which does look to be a good starting place for a beginner. It does not go as far as classes and methods that are used here, though.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22075"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jimboozle&#039;s picture" title="jimboozle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Oil Boiler Control Problem</h3>

    <div class="submitted">Submitted by <a href="../user/6478.html" title="View user profile.">jimboozle</a> on Fri, 20/06/2014 - 07:40.</div>
    <div class="content">
     <p>fantastic, thanks for the comprehensive reply - I&#39;ll do some reading up as you suggest and then crack on - hopefully the next question will be a bit more informed!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5283"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-g-3e4raH5r_9Swz-FFE5N2JFLWCpv2a3WiMnEgrRkRs" value="form-g-3e4raH5r_9Swz-FFE5N2JFLWCpv2a3WiMnEgrRkRs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/5283 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:06:26 GMT -->
</html>
