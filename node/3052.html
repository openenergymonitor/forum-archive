<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3052 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:51:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emoncms auto-update and RESTful service using JSON questions | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emoncms auto-update and RESTful service using JSON questions</h3>
        <span class="submitted">Submitted by <a href="../user/2765.html" title="View user profile.">casestudies</a> on Tue, 29/10/2013 - 23:52</span>
        <div class="content"><p>Hi,</p>
<p>This isn&#39;t concerning a problem with emoncms. I had some questions on how the software all functions together to get the end result. I&#39;m in the process of creating my own RESTful service using Flask (Python). I&#39;m trying to create a webpage that will auto-update values on the page. The Flask script is setup to query some values and then create JSON which is sent back to the client. The client in this case will be a kiosk display.</p>
<p>After many attempts, I did get the client to read the JSON from the Flask server. However, I think after running the browser on the page for a day, it may have crashed the browser. I&#39;m using Chrome for development. I noticed in the Web Tools &gt; Resources under Scripts that each time the client queries the Flask server, it creates a new JSON file. Not sure if this could be the issue I&#39;m having or if this is bad for memory, etc.</p>
<p>I&#39;m having to use JSONP to return data from the server as I kept getting errors related to <a href="http://en.wikipedia.org/wiki/Same_origin_policy" title="http://en.wikipedia.org/wiki/Same_origin_policy">http://en.wikipedia.org/wiki/Same_origin_policy</a> if I didn&#39;t. If I don&#39;t use JSONP, I get an</p>
<p class="rteindent1"><strong>Uncaught SyntaxError: Unexpected token :</strong></p>
<p>errors at the second line in the json file. JSON file looks like the following:</p>
<p>{</p>
<p class="rteindent1">&quot;pvs&quot;: {</p>
<p class="rteindent2">&quot;index1&quot;: {</p>
<p class="rteindent3">&quot;keyname&quot;: 1</p>
<p class="rteindent3">...</p>
<p class="rteindent2">},</p>
<p class="rteindent2">.....</p>
<p class="rteindent1">}</p>
<p>}</p>
<p>&nbsp;</p>
<p>Looking at EMONCMS in the Resources window, the JSON file is simply replaced (updated) when new data is displayed. How is this behavior achieved? What files, and parts of files, should I look at to try to make my service work? This system will be part of a kiosk where a few computers connected to monitors will load the webpage that contains the CSS and Javascript. The Javascript will send requests to the RESTful server. The returned data will then be placed into the DOM of the webpage. The javascript will also change the display kiosk as needed (such as changing colors of divs depending on returned values). In otherwords, I&#39;m concerned that adding files to the browser resources will crash the browser/computer. The monitors will run 24/7. I&#39;d like to make it so that they are stable and can stay running without having to worry about them.</p>
<p>Thanks in advance!</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3055.html" class="topic-previous" title="Go to previous forum topic">‹ emoncms upgrade v5 to v6 - using MySql as database engine - running on Ubuntu</a>
              <a href="3022.html" class="topic-next" title="Go to next forum topic">Installing Emoncms on Window 2008 server ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
