<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12460 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:04:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emoncms &#039;cloud&#039; backup to Dropbox - Updated 23/4 | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emoncms &#039;cloud&#039; backup to Dropbox - Updated 23/4</h3>
        <span class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 03/04/2016 - 21:03</span>
        <div class="content"><p>I&#39;ve spent a little time and prepared a script which will;</p>
<ul>
<li>copy your emoncms feed data&nbsp;and obtain a dump of your emoncms MYSQL database</li>
<li>create a datestamped tar.gz compressed archive of the data</li>
<li>upload the archive to your Dropbox cloud account</li>
<li>each time the script is run, it will delete both local and cloud archives which are older that 7 days (number of days can&nbsp;be changed in script)</li>
</ul>
<p>I&#39;ve now <a href="https://github.com/Paul-Reed/dropbox-archive">uploaded the script&nbsp;to&nbsp;Github</a>&nbsp;if anyone would like to try it, and as always any feedback would be appreciated.</p>
<p><em>This script hasn&#39;t been tested on an emonpi!</em></p>
<p><em>DISK SPACE! You will need sufficient free disk space to use this script, as it will need at least the size of your total feed size free PLUS the space occupied by each archive. So for example;<br />
Total feed size (calculated from your feeds page) is 50Mb, so you would need 50Mb&nbsp;free disk space plus 12.5Mb for each archive (each archive is about 25% the size of the feed data).&nbsp;If you are storing 7 days of archives, then you would need in total,&nbsp;150Mb of writeable free disk space. As archives will be weeded after 7 days, no additional disk space will be needed thereafter.</em></p>
<p>Paul</p>
<p><em>Edit 15/4/2016 - Updated version now added to git - see below</em></p>
  <div class="forum-topic-navigation clear-block">
          <a href="12463.html" class="topic-previous" title="Go to previous forum topic">‹ Water meter for water consumption monitoring</a>
              <a href="10737.html" class="topic-next" title="Go to next forum topic">Vaillant VC430  Boiler Controller ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-40919"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1894.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/1894.html" title="View user profile.">Ian Eagland</a> on Tue, 05/04/2016 - 16:42.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>Tried your script. I have a file in my dropbox <em>emoncms-2016-04-05_173205.tar.gz</em>&nbsp;</p>
<p>The only thing that I can report is I had the following message presumably because I am not using emonhub:-</p>
<p>&nbsp;Setup completed!<br />
emonhub: unrecognized service<br />
emonhub: unrecognized service<br />
tar: Removing leading `/&#39; from member names</p>
<p>Regards,</p>
<p>Ian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40928"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 05/04/2016 - 19:31.</div>
    <div class="content">
     <p>The reason why you are getting that error is because the script attempts to momentarily stop emonhub, to ensure that when the data directories are copied while they are not being updated by emonhub.<br />
The first error is when it tries to stop it, and the second when it tries to start it again.</p>
<p>You could always comment out the references to emonhub, ie;</p>
<p># sudo service emonhub stop<br />
#&nbsp;sudo service emonhub start</p>
<p><u>I&#39;m open to suggestions of how best to handle this, as data could also be written to the data folders via MQTT.</u>&nbsp;</p>
<p>Also, I&#39;ve found a typo in the script which prevented the weeding of old archives and have just updated it.<br />
Probably the easiest way to update is just delete the dropbox-archive directory, and git clone it again, (add&nbsp;your emoncms password to&nbsp;dropbox_filemanager.sh again).<br />
You won&#39;t have to authorize the script with Dropbox again, as the script has already saved the authorization in a hidden file, saved at /home/pi/.dropbox_uploader</p>
<p>​I&#39;ve also added an option (disabled by default) to&nbsp;backup node-red flows, credentials and configuration. To activate it, just select (Y)es in the configuration section of&nbsp;dropbox_filemanager.sh</p>
<p>Paul</p>
<p><em>Edit 15/4/2016 - now fixed</em></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40948"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1894.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/1894.html" title="View user profile.">Ian Eagland</a> on Wed, 06/04/2016 - 16:51.</div>
    <div class="content">
     <p>Hi Paul</p>
<p>As I am not using emonhub&nbsp;do I need a way of stopping data being posted during the backup run or is it not likely to be an issue.</p>
<p>Regards</p>
<p>Ian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40958"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 06/04/2016 - 22:37.</div>
    <div class="content">
     <p>Hi Ian</p>
<p>You&nbsp;may have seen my <a href="12479.html">other recent post</a> regarding this issue, and to try and overcome the possibility of a corrupted&nbsp;archive, I&#39;ve found a solution, which doesn&#39;t involve stopping services, yet will secure a snapshot of the&nbsp;emoncms data.</p>
<p>I&#39;m going to rewrite the script in php (if I can!), but it may take a week or so to complete.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40962"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Wed, 06/04/2016 - 23:30.</div>
    <div class="content">
     <p><em>I&#39;m open to suggestions of how best to handle this, as data could also be written to the data folders via MQTT.</em></p>
<p>Hi Paul,</p>
<p><a href="http://askubuntu.com/questions/157779/how-to-determine-whether-a-process-is-running-or-not-and-make-use-it-to-make-a-c">Here&#39;s</a> some info about a method to determine, via a bash script, whether or not a process is running.<br />
Perhaps the logic flow can be of some help if/when you rewrite the script.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40991"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 07/04/2016 - 21:44.</div>
    <div class="content">
     <p>Thanks Bill, I've now found a way to get the feeds data without stopping any of the services, which seems the safest and most resilient option.<br />
I'll update this thread when I've updated the github repo.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40995"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Thu, 07/04/2016 - 23:40.</div>
    <div class="content">
     <p>Sounds good! Looking forward to seeing what you&#39;ve come up with.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41187"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 15/04/2016 - 20:10.</div>
    <div class="content">
     <p>I&#39;ve just <a href="https://github.com/Paul-Reed/dropbox-archive.git">updated git with a new version</a>, which should deal with the issue described by Ian.</p>
<p>The main changes are;</p>
<ul>
<li>Script now uses some code written by Trystan&nbsp;to obtain the feed data by using emoncms&#39;s&nbsp;API, which&nbsp;avoids stopping and starting the&nbsp;emoncms&nbsp;services to back up the data, and therefore avoids data loss and greater compatibility with different user configurations.</li>
<li>Main script now written in php</li>
<li>Can be installed or run from&nbsp;any location in a pi</li>
<li>Now uses a config file to save user settings. This will now allow fixes, enhancements, etc to be updated&nbsp;by doing a git pull from the installation directory from this version onwards.</li>
</ul>
<p>I&#39;ve been testing the new version for over&nbsp;3 days now, running the script every 30 minutes via node-red, so have created almost 150 archives, which were&nbsp;automatically weeded after 12 hours. All of the archives were&nbsp;checked for consistency of file size, and have used 5 archives chosen at random to perform full backups onto a 2nd pi, all of which were successful for both emoncms &amp; node-red. Just remember to check the file ownership when using the backups, ie $chown&nbsp;-R pi:pi .node-red (same for emoncms data directories).<br />
Each backup comprised of 29 emoncms feeds, MYSQL dump and the essential node-red files, and was just over 60Mb in size, but was compressed before uploading to just 13Mb.</p>
<p>To update from the previous&nbsp;version, delete the original installation directory, and git clone the latest version as per the <a href="https://github.com/Paul-Reed/dropbox-archive.git">readme</a>. (you won&#39;t have to re-authorize your dropbox&nbsp;API).</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41200"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8797.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="M0n0wall&#039;s picture" title="M0n0wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/8797.html" title="View user profile.">M0n0wall</a> on Sat, 16/04/2016 - 22:44.</div>
    <div class="content">
     <p>Hi,</p>
<p>Thank you for sharing your code, though I am having issues with backing up. At the end of the script, i get the following:</p>
<p>Dumping MYSQL data<br />
Backing up node-red data<br />
An error has occurred, details:tar-based phar &quot;/home/pi/dropbox-archive/backups/archive.tar&quot; cannot be created, contents of file &quot;phpfina/44.dat&quot; could not be written Checking for expired archives...<br />
Uploading new archive to Dropbox, this may take a while...<br />
find: `*.gz&#39;: No such file or directory</p>
<p>I presume there is a permissions issue?</p>
<p>Kind Regards,</p>
<p>Dave</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41208"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 17/04/2016 - 08:21.</div>
    <div class="content">
     <p><em>I presume there is a permissions issue?</em></p>
<p>Doubtful as the script will be running as Root. Can you check how much free space you have left on your pi pls;</p>
<pre>
$ df -h</pre><p>Also, from your feeds page, can you tell me what is reported when you&nbsp;&#39;Refresh Feed Size&#39;.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41210"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8797.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="M0n0wall&#039;s picture" title="M0n0wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/8797.html" title="View user profile.">M0n0wall</a> on Sun, 17/04/2016 - 09:25.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>the output is:</p>
<pre>
pi@emonpi:~ $ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/root       3.4G  1.9G  1.4G  59% /
devtmpfs        459M     0  459M   0% /dev
tmpfs           463M     0  463M   0% /dev/shm
tmpfs           463M   13M  451M   3% /run
tmpfs           5.0M  4.0K  5.0M   1% /run/lock
tmpfs           463M     0  463M   0% /sys/fs/cgroup
/dev/mmcblk0p3  194M   66M  119M  36% /home/pi/data
tmpfs            40M  6.6M   34M  17% /var/lib/openhab
tmpfs           1.0M     0  1.0M   0% /var/lib/dhcp
tmpfs            50M  8.4M   42M  17% /var/log
tmpfs            30M   40K   30M   1% /tmp
/dev/mmcblk0p1   60M   20M   41M  34% /boot</pre><p>Kind Regards,</p>
<p>Dave</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41211"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 17/04/2016 - 10:33.</div>
    <div class="content">
     <p>Hi Dave</p>
<p>As I said in my first post,it hasn&#39;t been tested on an emonpi (as I don&#39;t have one).<br />
Presumably, you&#39;ve installed the script in your writeable&nbsp;/home/pi/data directory which shows that you have 119Mb free.<br />
I don&#39;t know how large your feed data is (check by running&nbsp;&#39;Refresh Feed Size&#39; from your feeds page), but the script will need at least that amount of free space to create the archive PLUS enough space to store the archives locally (which compressed are about a quarter of the size of the feed data each).<br />
So if your feed data size is 100Mb, you would need approx 125Mb&nbsp;free to create the first archive, and an additional 25Mb&nbsp;for each archive.<br />
If you were keeping 7 days worth of archives, then you would need 300Mb&nbsp;of free space. After 7 days, the older archives are weeded, so won&#39;t increase further thereafter.</p>
<p>Does this appear to be the issue? If so, it&#39;s a shame that you&#39;ve 1.4G unused in your root partition.</p>
<p>It will probably be a good idea for me to add something in my first post to check for free space before installing...</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41359"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 23/04/2016 - 22:12.</div>
    <div class="content">
     <p>Dropbox changed&nbsp;it&#39;s API format 2 days which caused the script to fail.<br />
I&#39;ve now updated the script in Github, and it&#39;s back working!</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41513"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms 'cloud' backup to Dropbox - Updated 23/4</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 30/04/2016 - 20:29.</div>
    <div class="content">
     <p>Still working well! 7 days worth of emoncms&nbsp;&amp; nodered&nbsp;archives safely stored in Dropbox. Archives older than 7 days are automatically weeded.</p>
<p><img alt="" src="../sites/default/files/archives.png" style="width: 720px; height: 430px;" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12460"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-j_SdDuOWJaf99zV1yFmPWK-6JZRZueg_zUH7g36USxE" value="form-j_SdDuOWJaf99zV1yFmPWK-6JZRZueg_zUH7g36USxE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
