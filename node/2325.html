<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2325 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Multigraph not displaying correctly on Android | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Multigraph not displaying correctly on Android</h3>
        <span class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Fri, 03/05/2013 - 06:29</span>
        <div class="content"><p>Having upgraded to V5, I have a problem displaying a multigraph in a dashboard on my Android device - 4.1.1 using the stock Android browser.</p>
<p>If I clear the browser cache, it loads correctly.&nbsp; However, if I then refresh the screen, the page loads, but the multigraph does not appear.&nbsp; This is repeatable every time I have tried it.&nbsp; This was not a problem in V4.&nbsp; Everything appears to be OK on my desktop (IE 10).</p>
<p>I notice that the spacing of the black menu bar at the top seems to be different - it seems to be narrower than before?</p>
<p>Can anyone help with this please?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2894.html" class="topic-previous" title="Go to previous forum topic">‹ Multigraph not showing details</a>
              <a href="2889.html" class="topic-next" title="Go to next forum topic">Query about kWh from W calculation in emonGLCD ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-11982"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Thu, 09/05/2013 - 18:09.</div>
    <div class="content">
     <p>Does anyone have any pointers as to what might be causing this&nbsp;please?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11997"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Fri, 10/05/2013 - 12:23.</div>
    <div class="content">
     <p>I have a clue:&nbsp; the problem seems to only occur when I use a wi-fi connection.&nbsp; If I use a 3G connection (which is presumably slower), the graph displays correctly.&nbsp; I am guessing that this means that there is a timing issue somewhere?&nbsp; Any ideas?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12236"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Sat, 18/05/2013 - 13:36.</div>
    <div class="content">
     <p>I&#39;m still&nbsp;struggling with this and don&#39;t really have any pointers.&nbsp; Here is the dashboard that doesn&#39;t display when refreshed:</p>
<p><a href="http://emoncms.org/engeeaitch">http://emoncms.org/engeeaitch</a>&nbsp;&nbsp;</p>
<p>Does anyone have any suggestions please?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12300"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 22/05/2013 - 10:34.</div>
    <div class="content">
     <p>Hello engeeaitch, I can confirm it loads first time and then for me a refresh crashes the page and the browser exits. Are you viewing it on a tablet? its a wide dashboard for a phone?!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12301"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 22/05/2013 - 10:43.</div>
    <div class="content">
     <p>I can also confirm it crashes on one of my own multigraphs&nbsp;and at a smaller size.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12302"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 22/05/2013 - 12:06.</div>
    <div class="content">
     <p>Checked with the android debugger, this is the log on page refresh:</p>
<p>&nbsp;</p>
<p>05-22 13:50:26.498&nbsp; 2337&nbsp; 2337 E browser : Console: Uncaught ReferenceError: jQuery is not defined <a href="http://mydomain/emoncms/Lib/flot/jquery.flot.min.js:27" title="http://mydomain/emoncms/Lib/flot/jquery.flot.min.js:27">http://mydomain/emoncms/Lib/flot/jquery.flot.min.js:27</a><br />
	05-22 13:50:26.545&nbsp; 2337&nbsp; 2337 E browser : Console: Uncaught ReferenceError: jQuery is not defined <a href="http://mydomain/emoncms/Lib/flot/jquery.flot.selection.min.js:79" title="http://mydomain/emoncms/Lib/flot/jquery.flot.selection.min.js:79">http://mydomain/emoncms/Lib/flot/jquery.flot.selection.min.js:79</a><br />
	05-22 13:50:26.545&nbsp; 2337&nbsp; 2337 E browser : Console: Uncaught ReferenceError: jQuery is not defined <a href="http://mydomain/emoncms/Lib/flot/jquery.flot.time.min.js:424" title="http://mydomain/emoncms/Lib/flot/jquery.flot.time.min.js:424">http://mydomain/emoncms/Lib/flot/jquery.flot.time.min.js:424</a><br />
	05-22 13:50:26.545&nbsp; 2337&nbsp; 2337 E browser : Console: Uncaught ReferenceError: $ is not defined <a href="http://mydomain/emoncms/vis/multigraph?embed=1&amp;mid=1:46" title="http://mydomain/emoncms/vis/multigraph?embed=1&amp;mid=1:46">http://mydomain/emoncms/vis/multigraph?embed=1&amp;mid=1:46</a></p>
<p>&nbsp;</p>
<p>Adding&nbsp;</p>
<p>&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;?php echo $path;?&gt;/Lib/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt;</p>
<p>in vis/visualizations/multigraph.php on line 16 (before the other jquery includes) fixes the error, the graph is still displayed with full width, but it is better than nothing.</p>
<p>It does not happen with chrome as far as I can tell, so it must be a problem specific to the android browser. Adding the jquery&nbsp;reference does not break the visualization on my main pc, as far as I can tell</p>
<p>&nbsp;</p>
<p>Regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12303"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 22/05/2013 - 12:24.</div>
    <div class="content">
     <p>on a second thought, maybe adding&nbsp;</p>
<p>&lt;?php if ($embed) { ?&gt;<br />
	&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;?php echo $path;?&gt;/Lib/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt;<br />
	&lt;?php } ?&gt;</p>
<p>instead of including it even when not embedding it in an Iframe&nbsp;would be better ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12306"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 22/05/2013 - 14:12.</div>
    <div class="content">
     <p>Thanks a lot Mattia,&nbsp;how do you get the android debugger?</p>
<p>&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;?php echo $path;?&gt;/Lib/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt;</p>
<p>is defined in Theme/embed.php which is the theme that anything that is embedded is wrapped in. I wonder how its missing that reference?</p>
<p>I thought Id sorted this issue before by using a slightly older version of jquery but it seems to be affecting all visualization&nbsp;types, strange.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12308"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 22/05/2013 - 14:29.</div>
    <div class="content">
     <p>Hi Trystan</p>
<p>you have to connect the phone to a pc with the usb&nbsp;cable, enable usb debugging on the phone, and then run (after installing the android sdk)</p>
<p>adb logcat (for all logs)</p>
<p>or&nbsp;</p>
<p>adb logcat -s &quot;browser&quot;</p>
<p>to filter only browser related messages</p>
<p>You can then read all the messages that would normally be output on the browser console</p>
<p>and if I check from a real browser, when I hit refresh I can see that jquery is loaded corerctly&nbsp;even without the hack .... the only thing that comes to mind is that there&#39;s a bug in the android browser that prevents it to load the jquery lib when it is included in the headers .... or that because of some race condition the other scripts are loaded and evaluated before it ... running a quick &nbsp;google search did not turn up any meaningful answer though ... I guess it should be a fairly common problem though ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12337"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Fri, 24/05/2013 - 21:47.</div>
    <div class="content">
     <p>Hi all - thanks for your efforts.&nbsp; I am using this on a mobile phone - landscape.&nbsp; It serves my purpose well (when it works). So is there a recommended solution?&nbsp; Just a reminder - I don&#39;t think that this was a problem in emoncms V4.</p>
<p>Nick</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13327"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Mon, 01/07/2013 - 06:22.</div>
    <div class="content">
     <p>Hi - just wondering if there was any chance of&nbsp;a fix for this please?</p>
<p>&nbsp;</p>
<p>Nick</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13332"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Mon, 01/07/2013 - 11:43.</div>
    <div class="content">
     <p>Hi Nick,</p>
<p>I thought it was already evident from the previous posts ... anyway ... until Trystan&nbsp;commits a fix on the main emoncms&nbsp;code tree, you&#39;ll have either to use another browser (if your phone supports it I&#39;d go with Chrome) or edit&nbsp;emoncms / Modules / vis / visualisations / multigraph.php and add on line 16 these lines:</p>
<p>&lt;?php if ($embed) { ?&gt;<br />
	&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;?php echo $path;?&gt;/Lib/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt;<br />
	&lt;?php } ?&gt;</p>
<p>This should fix the problem (that apparently is in the android browser, not emoncms&nbsp;....</p>
<p>&nbsp;</p>
<p>Regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13350"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Mon, 01/07/2013 - 22:20.</div>
    <div class="content">
     <p>Hi - thanks for the reply.</p>
<p>I have added this fix&nbsp;to my local copy of emoncms, but it doesn&#39;t seem to make any difference.&nbsp; I did a bit of looking around using Chrome Inspect Element on the desktop to make sure that I had added the lines correctly - I think that there should not be a / before the Lib directory?&nbsp; With the forward slash removed, the line appeared OK in the browser on the desktop, but on testing on Android, the problem was still there - i.e. if I clear the cache, it loads fine, but then on doing a refresh, the graph does not load.</p>
<p>Any ideas as to where to go next?</p>
<p>Nick</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15549"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3052.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="engeeaitch&#039;s picture" title="engeeaitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Multigraph not displaying correctly on Android</h3>

    <div class="submitted">Submitted by <a href="../user/3052.html" title="View user profile.">engeeaitch</a> on Wed, 02/10/2013 - 19:50.</div>
    <div class="content">
     <p>If anyone&#39;s interested - this problem went away with the upgrade to Android 4.2.2</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2325"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form--EnPzyBsFoHQNyAhUHx5eEujqrNbi-b9MmCYAhr671Y" value="form--EnPzyBsFoHQNyAhUHx5eEujqrNbi-b9MmCYAhr671Y"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2325 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:43 GMT -->
</html>
