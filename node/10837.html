<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10837 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:46:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>EmonPi, Solar and diverter | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">EmonPi, Solar and diverter</h3>
        <span class="submitted">Submitted by <a href="../user/6181.html" title="View user profile.">hapless</a> on Thu, 11/06/2015 - 10:37</span>
        <div class="content"><p>Morning all,</p>
<p>&nbsp;</p>
<p>I have my EmonPi High Accuracy, got it plugged in and all connected.</p>
<p>However, there doesn&#39;t appear to be anyway of measuring the diversion (I have a <a href="http://solarimmersion.co.uk/">Solarimmersion MKIII</a>), without adding further CT?</p>
<p>If that is the case, what is the simplest/cheapest way of doing so, as the EmonPi can&#39;t add any more?</p>
<p>Ultimately, what I&#39;d like to do is be able to show the import, export, diversion and cost, with now, daily and historical stats. I&#39;d also like to extend the coverage to include gas, but that is a long way off for me</p>
<p>I&#39;m struggling with the apps and the dashboards, is there a simple user guide that explains the logic?</p>
<p>The Solar app currently displays import and generation, with the balance adding the 2 together, rather than subtracting?!</p>
<p><img alt="" height="93" src="../../../i60.tinypic.com/14c8hhh.png" width="644" /></p>
<p>Any guidance/help would be very much appreciated!!</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10871.html" class="topic-previous" title="Go to previous forum topic">‹ HELP with sensing voltage and current(circuit schematic)!!</a>
              <a href="10152.html" class="topic-next" title="Go to next forum topic">measuring &quot;power&quot; in water heated systems ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-31194"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi, Solar and diverter</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 11/06/2015 - 11:02.</div>
    <div class="content">
     <p>I think you will struggle to add a 3rd CT without another device (emonTx), The diverter you use doesn&#39;t appear to have a interface to extract data, does your inverter? or even your supply meter?</p>
<p>Try rotating the &quot;house CT&quot; 180&deg; the above data indicates the appliances in you house are generating 2721w, if they were using 2721 the export would be 287w.</p>
<p>​Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31211"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6181.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hapless&#039;s picture" title="hapless&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi, Solar and diverter</h3>

    <div class="submitted">Submitted by <a href="../user/6181.html" title="View user profile.">hapless</a> on Thu, 11/06/2015 - 19:55.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>thanks for the reply.</p>
<p>That&#39;s what I thought. Does it have to be an emontx though? Is there a simple (!)&nbsp; rfm69 board with ct capability that could feed the existing emonpi?</p>
<p>&nbsp;</p>
<p>If not, then I may as well just get an emontx and shield and bin the emonPI? I have 2 Pi&#39;s here that were part of another hobby project going spare.</p>
<p>I&#39;ve just been in the shop and with an emonbase, emontx v3, 4 ct&#39;s, ac-ac psu and programmer, it comes to less than the kickstarter and it should meet my needs with the extra ct&#39;s?</p>
<p>&nbsp;</p>
<p>The setup for the EmonPi guide says to ensure that if generating a surplus, then the import should be negative.</p>
<p>I&#39;ve just looked again and this is what I see now (you can see the gen and import graph looks spot on, but it&#39;s the balance when gen exceeds import that seems wrong?):</p>
<p><img alt="" src="../../../i58.tinypic.com/25gtr9y.png" /></p>
<p>&nbsp;</p>
<p>Thanks again for the help!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31214"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi, Solar and diverter</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 11/06/2015 - 21:59.</div>
    <div class="content">
     <p>For &quot;off the shelf&quot; the emonTx v3 is the only easy solution until the new &quot;v2?&quot; hits the shop,</p>
<p>Other options could include either buying a emonTx v2 PCB and partially populating it, since the emonPi is occupying the serial uart&nbsp;of the Pi you will need to add a usb to serial adapter or include a rfm and connect it via RF. There is also the AC adapter to consider.</p>
<p>Or if you feel a little more adventurous, there is ADC&nbsp;6 broken out to the RL45&nbsp;connector on the emonPi along with vcc and ground, you could create a &quot;3rd CT sub board&quot; with just a hand&nbsp;full of passive components. Then you wouldn&#39;t need to worry about power supply, AC supply, communication etc just edit the emonPi sketch to include a 3rd CT.</p>
<p>I cannot predict the accuracy of a add-on board, mainly because of possible noise. but it has to be worth a try the components would cost pennies and the circuit is not complex. it has to be the cheapest and easiest option.</p>
<p>Maybe Robert will&nbsp;confirm if it&#39;s a viable option or not ?</p>
<p>Regards your graph, it looks ok to me, if you generate surplass&nbsp;the import will be negative. if you have a surplus of 1kw that is being exported, you are, in other words,<em>&nbsp;importing</em> <strong>-</strong>1kw.&nbsp;&nbsp;</p>
<p>Paul</p>
<p>EDIT - Just to add a note (&nbsp;I know you have a diverter already) As there is also Dig3 available there to control a triac,&nbsp;a MK2 style&nbsp;diverter in a box&nbsp;with a built-in ct and a RJ45&nbsp;socket to link to the emonPi&nbsp;(or emonTx v3.4) via a cat5&nbsp;cable&nbsp;could be a nice add-on device (possible 5th CT on a v3.4?)&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31217"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi, Solar and diverter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 11/06/2015 - 22:09.</div>
    <div class="content">
     <p>I don't have (yet) an emonPi and I know little about it, but if there's an analogue input, V<sub>CC</sub> and GND available on a connector and the analogue input is readable, then adding a CT "front-end" copied from the emonTxV3/V4, or indeed from the emonP itself, would cost a minimal sum - 4 resistors, one capacitor, (one diode), connectors and a piece of stripboard. If it's only diverted power you're measuring, and you can break the circuit to fit a ring type CT, so much the better and I'd choose the one Robin uses, I believe this is either the 20 A version here: <a href="http://www.yhdc.com/en/product/425/" title="http://www.yhdc.com/en/product/425/">http://www.yhdc.com/en/product/425/</a> or this 20A:10mA one <a href="http://eppep.com/?action-viewnews-itemid-140364" title="http://eppep.com/?action-viewnews-itemid-140364">http://eppep.com/?action-viewnews-itemid-140364</a> from <a href="http://www.ebay.co.uk/itm/281436762683?_trksid=p2059210.m2749.l2649&amp;ssPageName=STRK%3AMEBIDX%3AIT" title="http://www.ebay.co.uk/itm/281436762683?_trksid=p2059210.m2749.l2649&amp;ssPageName=STRK%3AMEBIDX%3AIT">http://www.ebay.co.uk/itm/281436762683?_trksid=p2059210.m2749.l2649&amp;ssPa...</a> You'll need to recalculate the burden resistor for either of these.<br />
(Note: there is only one burden resistor fitted - the second is not used and is drawn to make provision for holes for a wire-ended component, should you want to change the value.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31348"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6181.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hapless&#039;s picture" title="hapless&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi, Solar and diverter</h3>

    <div class="submitted">Submitted by <a href="../user/6181.html" title="View user profile.">hapless</a> on Tue, 16/06/2015 - 11:24.</div>
    <div class="content">
     <p>Thank you both Paul and Robert for your input - getting technical now so it&#39;s taken me a couple of days to digest!</p>
<p>Looking at it from another angle, how about adding a pulse sensor to the mix? For either the gen or import (both pulse), gen meter is more accessible and closer to EmonPi so would be easier to add?</p>
<p>Gen meter is L&amp;G E110 Type 5235B (1000 pulse rate), Import is Itron ACE1000 SM0 (800 pulse rate)</p>
<p>I understand that it&#39;s not as accurate as the clamp, but as a simple workaround?</p>
<p>It also happens that I have an optical sensor from my GEO Solo PV, sat on my gen meter, doing diddly at the moment as the Solo PV died 13 months after installation. As I had the kickstarter on order, I haven&#39;t bothered hassling GEO!</p>
<p>Could I reuse the GEO pulse sensor, fitting rj45 connector to the necessary as stated in OEM Shop:<br />
RJ45 Pin 2 - VCC<br />
RJ45 Pin 5 - GND<br />
RJ45 Pin 6 - TTL Data<br />
&nbsp;</p>
<p>On the graphing front, your comment Paul</p>
<blockquote><p>Regards your graph, it looks ok to me, if you generate surplass&nbsp;the import will be negative. if you have a surplus of 1kw that is being exported, you are, in other words,&nbsp;importing -1kw.&nbsp;</p>
</blockquote>
<p>is what I&#39;m seeing, so that&#39;s all good.</p>
<p>But if you look at the Balance figure in the first pic, it shows Solar PV of 3008W, Power Now of -2721W but the balance in the middle says I&#39;m Exporting 5729W, which is the sum of both but ignores that the import is a negative?!</p>
<p>The later picture shows what I would be expecting, import-gen=balance?</p>
<p>Is the fact the that there is a diverter in place that is not being measured throwing the calculation or is it just my perception of what I expect to see?!</p>
<p>Thanks again all...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31366"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi, Solar and diverter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 16/06/2015 - 14:33.</div>
    <div class="content">
     <p>You're confusing what you're measuring when you say the pulse input is not as accurate as a CT. Actually, by definition, your energy supplier's meter is totally accurate (even if it isn't), but it only tells you energy consumption after the event in 1 Wh-sized lumps, whereas the CT gives you near-instantaneous current measurements. With careful calibration, you can make the emonPi read the same as your supplier's meter. So accuracy isn't really the issue, it should be decided by what you want to know and how you want the information to come in. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31395"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6181.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hapless&#039;s picture" title="hapless&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi, Solar and diverter</h3>

    <div class="submitted">Submitted by <a href="../user/6181.html" title="View user profile.">hapless</a> on Wed, 17/06/2015 - 08:31.</div>
    <div class="content">
     <p>OK, let me condense my post earlier...</p>
<p>&nbsp;</p>
<p>can I repurpose the optical sensor, by fitting it with an rj45, to measure generated power (Solar PV), thus freeing up the ct clamp currently used for that to measure the diverted power?</p>
<p>So with ct on import, ct on diverted and optical on gen I would be able to measure all 3, but with reduced resolution on generated?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31409"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonPi, Solar and diverter</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 17/06/2015 - 10:15.</div>
    <div class="content">
     <p>Yes, you can use an optical pulse counter to count the led pulses of your gen meter, whether the optical sensor you have can be used depends on what it is as to whether it or the emonPi&nbsp;need anything else.</p>
<p>Using the led pulse can be absolutely accurate as Robert points out it is counting metered units, any inaccuracy with pulse counting is&nbsp;from dropped pulses when using a RF link&nbsp;(which you are not) or unrecognized&nbsp;pulses, which&nbsp;is where the compatibility of the sensor is important to get right.</p>
<p>The resolution shouldn&#39;t be a big factor as 0.001kwh is the usual accuracy but the realtime&nbsp;instantaneous power observations could be inaccurate as the timing of pulses is altered by the AVR send interval, but the running total generated&nbsp;will be as accurate as is possible to a max of 1wh every 10s.</p>
<p>The &quot;Exporting 5729W&quot; could well be the effect of the diverter depending on where you have your ct&#39;s, the &quot;grid&quot; ct must be at a point that includes all your services including the diverter and then if the orientation&nbsp;of the ct&#39;s is correct on the cables you should see the correct import/export and the correct pv, from that the difference will be the total consumption including diversion. When you can measure another channel actual use will be the total consumption minus the diverted.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10837"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-pxyYpZ86HdEoPEUXskWSgbBusGbcEMC2xg1d6PO9zps" value="form-pxyYpZ86HdEoPEUXskWSgbBusGbcEMC2xg1d6PO9zps"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/10837 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:46:51 GMT -->
</html>
