<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10733 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:59:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Difference between Solar Generation meter and emonTX values | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Difference between Solar Generation meter and emonTX values</h3>
        <span class="submitted">Submitted by <a href="../user/8057.html" title="View user profile.">Ian Davies</a> on Wed, 20/05/2015 - 22:47</span>
        <div class="content"><p>Hi folks, not sure if this is the right forum, so please move if required.</p>
<p>I&#39;ve got the emonTX v3.4 with two CT&#39;s, one on the grid cable and one on the PV generation, and my PV is type 2, so I have the AC adaptor from the shop. I have a Raspberry Pi with&nbsp;RFM69Pi running emonbase 3.18.7+ #755 and posting to emoncms.org.</p>
<p>I&#39;ve had this for a few weeks, and have enjoyed playing and learning (and reading lots of forum posts) and solved most of the problems and questions, but I am still stuck with this one - emoncms calculates the daily PV generation around 6-8% higher than my PV generation meter. This equates to between 0.5 and 1 kWh extra depending on how much is generated that day.</p>
<p>I also have the &#39;issue&#39; that apparently my PV is generating power at night, usually between 4-8 watts. I know that the inverter will consume some power at night, and so I would expect this reading to be negative, but it&#39;s always positive. Could this indicate that something is causing the PV reading to always be higher than it should be, enough to convert a negative value at night into a positive value?</p>
<p>I was wondering if this could be caused by &#39;crosstalk&#39; from the CT on the grid cable, as the two cables run alongside each other. My consumer unit is located inside a kitchen wall-cupboard, and the cables from the two CT&#39;s are routed together through a gap in the cupboard up to the emonTX which sits on top of the cupboard, out of sight (and hard to reach). Could this be the issue?</p>
<p>Final disclosure - the CT on my grid feed is the wrong way round - i.e. it reports negative when importing. However, due to the very tight cables and restricted access caused by the cupboard, I was not able to get the CT on the other way around. Therefore in the Inputs section in emoncms, I start by multiplying the grid value by -1 as the first process step to reverse the grid value. Hopefully this isn&#39;t causing the problem?</p>
<p>Appreciate any suggestions.</p>
<p>Ian</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10557.html" class="topic-previous" title="Go to previous forum topic">‹  Bug? &quot;Allow Positive&quot; breaks feed on  v8.4.0, bufferedwrite:0.0.2</a>
              <a href="10769.html" class="topic-next" title="Go to next forum topic">Can I use emon Pi to monitor/analyze 3 phase generator output? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-30669"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8057.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8057.jpg" alt="Ian Davies&#039;s picture" title="Ian Davies&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Difference between Solar Generation meter and emonTX values</h3>

    <div class="submitted">Submitted by <a href="../user/8057.html" title="View user profile.">Ian Davies</a> on Tue, 26/05/2015 - 22:28.</div>
    <div class="content">
     <p>Update - and help still needed please:</p>
<p>I have just used the USB&nbsp;UART&nbsp;connection to connect to the emonTXv3&nbsp;and monitor the output, and found something interesting. When the emonTX was only powered by the USB UART connection, the values from the CT&#39;s were significantly different than when I switched on the AC adaptor:</p>
<p>(CT1 is PV, CT2 is grid, test was at night so PV was not generating, and so CT1 is presumably the Inverter&nbsp;consumption)</p>
<p>When powered only via the USB UART:</p>
<p>emonTx V3 Discrete Sampling V1.60 RFM69CW<br />
OpenEnergyMonitor.org<br />
POST.....wait 10s<br />
CT 1 Calibration: 90.90<br />
CT 2 Calibration: 90.90<br />
CT 3 Calibration: 90.90<br />
CT 4 Calibration: 16.67<br />
RMS Voltage on AC-AC Adapter input is: ~1V<br />
AC-AC adapter NOT detected - Apparent Power measurements enabled<br />
Assuming VRMS to be 230V<br />
Assuming powering from batteries / 5V USB - power saving mode enabled<br />
CT 1 detected<br />
CT 2 detected<br />
Unable to detect DS18B20 temperature sensor<br />
RFM69CW Initiated:&nbsp;<br />
Node: 10 Freq: 433Mhz Network: 210<br />
CT1 CT2 CT3 CT4 VRMS/BATT PULSE&nbsp;<br />
82 398 0 0 530 0 &nbsp;<br />
80 403 0 0 530 0 &nbsp;<br />
78 403 0 0 533 0 &nbsp;<br />
79 397 0 0 523 0 &nbsp;<br />
79 395 0 0 532 0 &nbsp;<br />
79 402 0 0 525 0 &nbsp;<br />
79 367 0 0 525 0 &nbsp;<br />
79 369 0 0 528 0 &nbsp;<br />
79 367 0 0 525 0 &nbsp;<br />
79 370 0 0 529 0 &nbsp;</p>
<p>&nbsp;</p>
<p>Then I switched on the AC socket, and reset the emonTX:</p>
<p>emonTx V3 Discrete Sampling V1.60 RFM69CW<br />
OpenEnergyMonitor.org<br />
POST.....wait 10s<br />
CT 1 Calibration: 90.90<br />
CT 2 Calibration: 90.90<br />
CT 3 Calibration: 90.90<br />
CT 4 Calibration: 16.67<br />
RMS Voltage on AC-AC Adapter input is: ~247V<br />
AC-AC adapter detected - Real Power measurements enabled<br />
assuming powering from AC-AC adapter (jumper closed)<br />
Vcal: 268.97<br />
Phase Shift: 1.70<br />
CT 1 detected<br />
CT 2 detected<br />
Unable to detect DS18B20 temperature sensor<br />
RFM69CW Initiated:&nbsp;<br />
Node: 10 Freq: 433Mhz Network: 210<br />
CT1 CT2 CT3 CT4 VRMS/BATT PULSE&nbsp;<br />
6 -263 0 0 24866 0 &nbsp;<br />
9 -262 0 0 24786 0 &nbsp;<br />
9 -262 0 0 24805 0 &nbsp;<br />
7 -266 0 0 24872 0 &nbsp;<br />
6 -264 0 0 24812 0 &nbsp;<br />
6 -265 0 0 24895 0 &nbsp;<br />
7 -263 0 0 24918 0 &nbsp;<br />
5 -265 0 0 24924 0 &nbsp;<br />
5 -263 0 0 24785 0 &nbsp;<br />
8 -259 0 0 24707 0 &nbsp;<br />
6 -261 0 0 24786 0 &nbsp;</p>
<p>CT1 (PV) has now dropped by factor of 10, and CT2 (grid) has also dropped alot. We are currently importing from grid, but CT2 is negative because the CT&nbsp;faces the wrong way due to lack of space, so in emoncms I invert the value by multiplying by -1.&nbsp;</p>
<p>The RMS is ~247, and I have now connected a <a href="http://www.maplin.co.uk/p/15a-plug-in-energy-saving-monitor-l61aq">Maplin power monitor</a>&nbsp;which&nbsp;shows ~240 volts. This is the same socket, as the AC adaptor uses, and it was done straight away so I doubt much has changed in the house. Should there be this much difference in the&nbsp;voltage?&nbsp;&nbsp;The AC adaptor is the Ideal Power DB-06-09&nbsp;and it came from the OEM shop at the same time as the emontx3 and the two CT&#39;s</p>
<p>I have been logging VRMS&nbsp;for over a month and it&#39;s always been around 248 (before the Maplin monitor was in place). If the voltage is being detected incorrectly and affecting the calculations, presumably that could explain why the results are so different to the&nbsp;generation meter ? Do I need to calibrate the system ?</p>
<p>Ian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30670"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Difference between Solar Generation meter and emonTX values</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 26/05/2015 - 23:01.</div>
    <div class="content">
     <p>You certainly should calibrate the system if you need accurate values. All the components are subject to normal manufacturing tolerances, and there's no trimming or calibration done prior to shipment.</p>
<p>You are seeing different values when you're powering the emonTx via the programmer because without the ac adapter, like it says, it is "Assuming VRMS to be 230V" (and the "power" is VA, not Watts, so you don't know the direction), whereas with the adapter it's using the 247 V it measured.</p>
<p>In any case, measurements below about 1% are subject to increasing errors - due to the 10-bit ADC used, so at 300 W or so you should not be expecting great accuracy.</p>
<p>Going back to your earlier questions, adding the (-1) multiplier in emonCMS is a perfectly valid way to change the sign. And there might well be some crosstalk from an adjacent cable. I did some measurements - they're in the report on the CT.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30701"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8057.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8057.jpg" alt="Ian Davies&#039;s picture" title="Ian Davies&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Difference between Solar Generation meter and emonTX values</h3>

    <div class="submitted">Submitted by <a href="../user/8057.html" title="View user profile.">Ian Davies</a> on Wed, 27/05/2015 - 21:23.</div>
    <div class="content">
     <p>Hi Robert, thanks for your response.&nbsp;</p>
<p>Perhaps I had been mislead, or just misunderstood the line from the&nbsp;<a href="http://wiki.openenergymonitor.org/index.php/EmonTx_V3.4">emontx&nbsp;page</a>&nbsp;&quot;This is the main firmware for the emonTx V3 and has been tested and calibrated.&quot; which lead me to think I didn&#39;t need to calibrate.</p>
<p>Now I&#39;ll start reading those pages about calibration - Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30708"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Difference between Solar Generation meter and emonTX values</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 27/05/2015 - 22:13.</div>
    <div class="content">
     <p>Hmmm. I think that needs editing. The sketch has been fully tested, i.e. it does what it should, and doesn't do anything it shouldn't, and the calibration constants are set for the nominal centre values of all the (applicable) components.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30815"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8057.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8057.jpg" alt="Ian Davies&#039;s picture" title="Ian Davies&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Difference between Solar Generation meter and emonTX values</h3>

    <div class="submitted">Submitted by <a href="../user/8057.html" title="View user profile.">Ian Davies</a> on Sun, 31/05/2015 - 16:15.</div>
    <div class="content">
     <p>Success !! - I think ...</p>
<p>I think I have now calibrated the voltage - need to run it for a bit and see, but it took me a while as I got tripped up by the instructions on the calibration page (please remember, I am a newbie, and not an electrician so this more challenging for me than you might expect!)</p>
<p>Step 1&nbsp;of the <a href="https://learn.openenergymonitor.org/?redirect=calibration">calibration page</a>&nbsp;says that if using the emonTX v3 (which I am) that I can use the default sketch, but need to add some print statements. I hoped the print statements might already be in the sketch and commented out, and I was going to make this as a suggestion for improvement, but, with the programmer connected, the console includes a value for VRMS, so I wasn&#39;t sure what else I should need to print? In the end I&nbsp;used this value and it seems to be working, so maybe additional print statement is no longer required? (or I have messed up!)</p>
<p>Step 2 says to measure the Voltage and adjust the constant. After a while&nbsp;I worked out that I needed to only adjust Vcal as I am using AC adaptor, and so VRMS is not relevant. Assuming that&#39;s correct, perhaps the notes&nbsp;could be clarified?&nbsp;</p>
<p>But then what also caught me out in step 2 was that it said to update Vcal so that emonTX shows same voltage as the meter, and so&nbsp;I tried to update the Vcal using the formula from inside the sketch - i.e. <strong>Vcal =</strong> &nbsp;<strong>(230V x 13) / (9V x 1.2) </strong>replacing 230 with the reading from my Maplin plug in power meter, but the values&nbsp;never got close. But then I wondered if I should have done the next step first - to use the formula for &quot;New calibration&quot; in the grey box? I tried that, updated Vcal using the new value,&nbsp;and then&nbsp;my emontx&nbsp;showed VRMS values that are very close to the volts on the Maplin power meter !! So, assuming this is correct, perhaps a tweak to step 2 to make it clear to use the &quot;New calibration&quot; formula before expecting emontx to match the meter ?&nbsp;</p>
<p>You may think I&#39;m just being picky (or plain dumb), but in my 30 years in IT, I know that you can always rely on end-users to finds way of misunderstanding&nbsp;instructions, and it can be hard to write fool-proof guidance until you have a fool to test them. So I am hoping my feedback might help others in the future (unless what I have done is still wrong !!)</p>
<p>P.S. I&#39;ve only calibrated voltage so far - and will see how the PV readings compare with my PV Generation&nbsp;meter over a couple of days. If I need to calibrate the current, I need to find a device where I can get a CT around just one wire.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30816"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Difference between Solar Generation meter and emonTX values</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 31/05/2015 - 16:55.</div>
    <div class="content">
     <p>The major problem is, that calibration page was written when there was only the V2, and no "continuous" sketches that use an entirely different calibration procedure. So it's been "patched" in an attempt to keep up with all the variants. Provided the sketch gives the same answers as your meter, whichever way you got there is correct!</p>
<p>When I get time, I'll try to remember to go back and check the whole thing - maybe it needs to be split into several procedures for different hardware.</p>
<p>The normal way to get at the wires to hang a CT on is to wire a plug to a socket using three single-core wires. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10733"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-hOJ8E16-qBMXu6A4pVLDoJMVllEGSgnelgITnrMdcgo" value="form-hOJ8E16-qBMXu6A4pVLDoJMVllEGSgnelgITnrMdcgo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
