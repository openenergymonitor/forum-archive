<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10234 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>HDD Setup, Creating a local EmonCMS installation on a Raspberry Pi with HDD | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">HDD Setup, Creating a local EmonCMS installation on a Raspberry Pi with HDD</h3>
        <span class="submitted">Submitted by <a href="../user/689.html" title="View user profile.">tgmaxx</a> on Sun, 01/03/2015 - 00:10</span>
        <div class="content"><p>The HDD Setup instructions, referenced here:</p>
<p><a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/hddsetup.md" title="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/hddsetup.md">https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/hddsetup.md</a></p>
<p>Are referencing an older image,&nbsp;emonSD-21-7-14.img.zip</p>
<p>Can I follow the&nbsp;instructions when using the latest image,&nbsp;emonSD-23-02-15.img.zip &nbsp;?</p>
<p>In those instructions, it references an &quot;alternative guide&quot; as noted:</p>
<p>Paul (pb66) from the OpenEnergyMonitor forums has written an alternative guide for setting up the Pi with file system on a hard drive which should be easier for those running Windows, see forum post:http://openenergymonitor.org/emon/node/5092</p>
<p>However, the guide includes instructions to install emoncms from a repro. That doesn&#39;t make sense, because I believe the SD card already&nbsp;has&nbsp;the latest emoncms?</p>
<p>Where can I find&nbsp;the instructions to install the&nbsp;local only,&nbsp;low-write&nbsp;emoncms on a Raspi with a HDD?</p>
<p>Thanks</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="6223.html" class="topic-previous" title="Go to previous forum topic">‹ Dial widget not getting data?</a>
              <a href="6403.html" class="topic-next" title="Go to next forum topic">Help ... I can not set RTC - module with DS1302 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-28302"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: HDD Setup, Creating a local EmonCMS installation on a Raspberry Pi with HDD</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 01/03/2015 - 03:21.</div>
    <div class="content">
     <p>That&nbsp;&quot;alternative guide&quot; was written before emoncms was included&nbsp;in a SDcard image.Some would say that it makes more sense to install a full version of emoncms fresh from the repo rather than take a &quot;low-write&quot; version of emoncms&nbsp;that has been&nbsp;optimised&nbsp;for&nbsp;installation&nbsp;to a&nbsp;&quot;read-only&quot;&nbsp;&nbsp;SD card and install it to a hdd that doesn&#39;t require any of the restrictions imposed by a SDcard&nbsp;whilst giving a full feature set.</p>
<p>However if you wish to install the pre-built SDcard image to a hdd, you can, Just install the image to the hdd like you would normally to a SDcard (using win32diskimager), when you boot up the Pi it will still be running off the sd card and you will need to implement at&nbsp;some changes to the image installed to the hdd before you can boot to it. to do that you must mount it to the OS, use the following taken from the &quot;alternative guide&quot;</p>
<p>If the SDcard you are currently running on is Read-only you will need to exit read-only mode to be able to do the changes which is done by running <strong>rpi-rw</strong> first,&nbsp;</p>
<blockquote><p><strong>sudo tune2fs -U random -L hdd&nbsp; /dev/sda2</strong></p>
<p><strong>sudo mkdir /media/hdd</strong></p>
<p><strong>sudo mount /dev/sda2 /media/hdd</strong></p>
</blockquote>
<p>then edit the hdd&#39;s fstab</p>
<blockquote><p><strong>sudo nano /media/hdd/etc/fstab</strong></p>
</blockquote>
<p>change &quot; /dev/mmcblk0p2 &quot; to &quot; /dev/sda2 &quot; and&nbsp;&quot; /dev/mmcblk0p3&nbsp;&quot; to &quot; /dev/sda3&nbsp;&quot; then&nbsp;Ctrl+x, y, enter,</p>
<p>The first command is optional but recommended as it gives the partition a new UUID. The rest is essential. You will also need to &quot;point&quot; the SDcard at the hdd for it to boot to the hdd and restart</p>
<blockquote><p><strong>sudo sh -c &#39;echo &quot;dwc_otg.lpm_enable=0 console=tty1 root=/dev/sda2 rootfstype=ext4 elevator=deadline rootwait&quot; &gt; /boot/cmdline.txt&#39;</strong></p>
<p><strong>sudo shutdown -r now</strong></p>
</blockquote>
<p>When the Pi boots up it will be running the &quot;Pre-built&nbsp;SDcard image&quot;&nbsp;read-only on the hdd&nbsp;and will need emoncms enabled as per the &quot;SDcard guide&quot;.</p>
<p>You will need to remember any future edits or amendments&nbsp;you use that are intended for the &quot;SD card image&quot; will need &quot;redirecting&quot; whenever a &quot;mmcblk0p&nbsp;&quot; is used you need &quot;sda &quot;. You will also need to use rpi-rw to make any changes whilst running read-only.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28340"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/689.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-689.jpg" alt="tgmaxx&#039;s picture" title="tgmaxx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: HDD Setup, Creating a local EmonCMS installation on a Raspberry Pi with HDD</h3>

    <div class="submitted">Submitted by <a href="../user/689.html" title="View user profile.">tgmaxx</a> on Mon, 02/03/2015 - 17:06.</div>
    <div class="content">
     <p>Paul,</p>
<p>I decided to install&nbsp;the full version of emoncms from the Master branch.</p>
<p>​Thank you!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10234"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-0g_Zd1pIwIJAjNloUh4HajDbLb575KPgg_lLgox6EGk" value="form-0g_Zd1pIwIJAjNloUh4HajDbLb575KPgg_lLgox6EGk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
