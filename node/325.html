<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/325 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:42:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Programing the emonTX | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Programing the emonTX</h3>
        <span class="submitted">Submitted by Guest on Fri, 30/12/2011 - 19:42</span>
        <div class="content"><p>I have just put together a two CT emonTX and I am now trying to program it</p>
<p>I have plugged in a USB cable to supply the power and have plugged in the FTDI cable.</p>
<p>I have the Blue RXD light on now, I&nbsp;have downloaded the Arduino 1.0 software and the Firmware for the emonTX, but now I appear to be stuck.</p>
<p>When I load up emonTx_2CT_Voltage.pde and do a verify/complie I get an error message Boolean lastVcross, CheckVcross; does not have a name ?</p>
<p>Is there a quick way to check if I&nbsp;have even built the emonTX correctly ?</p>
<p>Is the Blue light on a good sign ?</p>
<p>Neil</p>
  <div class="forum-topic-navigation clear-block">
          <a href="316.html" class="topic-previous" title="Go to previous forum topic">‹ Sending data to econcms2 via Python</a>
              <a href="288.html" class="topic-next" title="Go to next forum topic">How to specify different datastream in ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-2599"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/532.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-532.jpg" alt="Tailzer&#039;s picture" title="Tailzer&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Programing the emonTX</h3>

    <div class="submitted">Submitted by <a href="../user/532.html" title="View user profile.">Tailzer</a> on Fri, 30/12/2011 - 22:05.</div>
    <div class="content">
     <p>&nbsp;Hi Neil</p>
<p>Ive just finished putting mine together and had some fun programming it, if your getting errors when doing a verify/compile then its not getting near the emonTX yet, in fact you should get the same error even with it not plugged in yet. There are a couple variants on the libraries that are needed, make sure you have all those in place, also there is a big change in the way the Arduino software is working for the new Version 1.0, so it might be better to program with an earlier version (I had best success with 0023).&nbsp;</p>
<p>Depending on how much youve played with Arduino's the following may help or be teaching you to suck eggs!:</p>
<p>When you put a libary into the folder you sometimes need to delete the begining and ending of the download name, ie if you download the ethershield library and it extracts to a folder called&nbsp;thiseldo-EtherShield-3793b4c you would need to rename it to EtherShield</p>
<p>The program also only looks for new librarys when starting up so you may have to restart.</p>
<p>There are a couple posts on here already about what are the best library to use with which version of software etc.</p>
<p>Lastly the thing that tripped me up a couple times and I thought i'd broken it was that the TX and Base have to be selected as different boards when trying to upload a program but I am not sure it makes a difference when compiling (but I would set it correct to be sure just in case)</p>
<p>&nbsp;</p>
<p>As far as I remember (and last night seems a distance away now) a blue light when turning on not programmed is ok.</p>
<p>When proigrammed it should flash roughly every 10 secs (depending on the sample rate in the sktech).</p>
<p>&nbsp;</p>
<p>Gary</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Programing the emonTX</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Sat, 31/12/2011 - 11:42.</div>
    <div class="content">
     <p>I changed to build 0023 and renamed the libraries as&nbsp;you suggested and&nbsp;it worked first time with the emonTX_1CT_Voltage script, well, the green light flashed on and off every couple of seconds :-)</p>
<p>I tried to load the 2CT version as my emonTX is the 2 lead version but that wont complie.</p>
<p>emonTx_2CT_Voltage.cpp: In function 'void loop()':<br />
emonTx_2CT_Voltage:124: error: 'struct Payload' has no member named 'apparent1'<br />
emonTx_2CT_Voltage:125: error: 'struct Payload' has no member named 'vrms1'<br />
emonTx_2CT_Voltage:126: error: 'struct Payload' has no member named 'irms1'<br />
emonTx_2CT_Voltage:136: error: 'struct Payload' has no member named 'apparent2'<br />
emonTx_2CT_Voltage:137: error: 'struct Payload' has no member named 'vrms2'<br />
emonTx_2CT_Voltage:138: error: 'struct Payload' has no member named 'irms2'<br />
emonTx_2CT_Voltage.cpp: In function 'void serial_output()':<br />
emonTx_2CT_Voltage:211: error: 'struct Payload' has no member named 'apparent1'<br />
emonTx_2CT_Voltage:213: error: 'struct Payload' has no member named 'vrms1'<br />
emonTx_2CT_Voltage:215: error: 'struct Payload' has no member named 'irms1'<br />
emonTx_2CT_Voltage:220: error: 'struct Payload' has no member named 'apparent2'<br />
emonTx_2CT_Voltage:222: error: 'struct Payload' has no member named 'vrms2'<br />
emonTx_2CT_Voltage:224: error: 'struct Payload' has no member named 'irms2'<br />
&nbsp;</p>
<p>Any ideas ?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2604"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/532.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-532.jpg" alt="Tailzer&#039;s picture" title="Tailzer&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Programing the emonTX</h3>

    <div class="submitted">Submitted by <a href="../user/532.html" title="View user profile.">Tailzer</a> on Sat, 31/12/2011 - 15:07.</div>
    <div class="content">
     <p>&nbsp;I didnt have the 2ct voltage sketch in my downloads, so looks like its been added in the last few days, i have downloaded and it wont compile on mine either, I will try and look through it tonight but hopefully someone else will see this and have a solution faster for you.</p>
<p>If its any help to get started the 2ct example compiles fine on 0023 but obviously dosnt have the voltage sensor.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2605"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Programing the emonTX</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 31/12/2011 - 15:12.</div>
    <div class="content">
     <p>Hi Gary,</p>
<p>We'r planning on merging all the emontx examples and porting them to Arduinio 1.0 soon, this should make it easier.</p>
<p>In the meantime if just tested emonTx 2CT voltage example and have fixed the problem. It should now compile for you:&nbsp;<a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTx_2CT_Voltage">https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTx_2CT_Voltage</a></p>
<p>Sorry about that,&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2606"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Programing the emonTX</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 31/12/2011 - 16:00.</div>
    <div class="content">
     <p>You will need to re-download the emonTx 2CT example again, I've just (hour ago) fixed the problem and pushed the new fixed sketch to github. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2607"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Programing the emonTX</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Sat, 31/12/2011 - 16:58.</div>
    <div class="content">
     <p>Just uploaded the new 2CT-Voltage example and it worked.</p>
<p>Thanks</p>
<p>Neil</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/325"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-51AW15vR3jogFp0r0FJHQjQ4w5vUpwiXPyVcQkLztAI" value="form-51AW15vR3jogFp0r0FJHQjQ4w5vUpwiXPyVcQkLztAI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
