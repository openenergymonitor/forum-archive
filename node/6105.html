<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/6105 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:25:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Using arduino as circuit breaker | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Using arduino as circuit breaker</h3>
        <span class="submitted">Submitted by <a href="../user/7190.html" title="View user profile.">Gary_P</a> on Wed, 12/11/2014 - 11:17</span>
        <div class="content"><p>HI guys, hope you are well.</p>
<p>Apologies for novice questions, I am new to this.</p>
<p>I would like to use my arduino uno to make a type of circuit breaker for 230V loads. &nbsp;I have got an emontx shield and some CTs and am in the process of creating the test rig.</p>
<p>Where can I find some code to take the current I am measuring with the CTs and set a limit, that when passed sends a signal to a digitl i/o and then to a relay to turn off the supply?</p>
<p>&nbsp;</p>
<p>Any other help is most appreciated.</p>
<p>&nbsp;</p>
<p>Thanks</p>
  <div class="forum-topic-navigation clear-block">
          <a href="6149.html" class="topic-previous" title="Go to previous forum topic">‹ kWh to kWhd phptimeseries feeds stopped updating. How do I get them to restart?</a>
              <a href="6122.html" class="topic-next" title="Go to next forum topic">emonTx V3 Voltage ok but no CT1-4 signal ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-25088"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using arduino as circuit breaker</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 12/11/2014 - 13:10.</div>
    <div class="content">
     <p><b>If there is the slightest possibility of the safety of any person or property being put at risk should your project fail to operate as intended, DON'T DO IT</b>.</p>
<p>In any case, you <b>must</b> have a proper protection, a circuit breaker or fuse, in place. You also probably need to make your device 'fail-safe' - in other words, you have to evaluate whether failing to turn off the supply is better or worse that turning it off, insofar as you can predict the failure mode of your device.</p>
<p>Having written all that, a demo sketch on Github for the Shield is your starting point. You need to add a relay board driven by one of the I/O ports, and you need (presumably) a pushbutton to turn on the output and the relay, and you need to detect that the rms (or the peak - remember polarity) is greater than some limit and use that to turn the output off. You might well want to start with one of Robin's (calypso_rae) 'continuous' sketches so that your sketch can react immediately (meaning after only 1 cycle). Or you might decide that it's possible to accept a short-term overload (mimicking a standard circuit breaker), in which case you'll need to accumulate the 'overcurrent' value and only trip the output when a predetermined value of that is exceeded.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25122"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Gary_P&#039;s picture" title="Gary_P&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using arduino as circuit breaker</h3>

    <div class="submitted">Submitted by <a href="../user/7190.html" title="View user profile.">Gary_P</a> on Fri, 14/11/2014 - 10:00.</div>
    <div class="content">
     <p>Brill, thank you very much.</p>
<p>I must stress this is only experimental and will not be controlling genuine circuits, it&#39;s just a thought I had. &nbsp;The test rig is set to run at approx 2A with a 3A fuse and RCD back up with all cables and connections adequately protected and covered, I was an electrician many years ago so the safety aspect is something I take seriously. The arduino will be set to operate at 1A, when the load bank exceeds that I hope to isolate supply.</p>
<p>Cheers, this gives me a good starting point.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25132"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using arduino as circuit breaker</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 15/11/2014 - 01:14.</div>
    <div class="content">
     <p><i>"I was an electrician many years ago so the safety aspect is something I take seriously."</i><br />
I had no means of knowing that, and let's just say that some individuals can have a cavalier attitude to safety, so I was urging caution for reasons obvious to you, but possibly not to others.</p>
<p>There's an interesting bit of software coming if you want "thermal" trips. And make sure you have a fairly low ratio CT if you want 2 or 3 A max scale - the split-core YHDC-013-000 with the standard burden is barely reliable at 1 A.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25136"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7218.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="emjay&#039;s picture" title="emjay&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using arduino as circuit breaker</h3>

    <div class="submitted">Submitted by <a href="../user/7218.html" title="View user profile.">emjay</a> on Sat, 15/11/2014 - 06:05.</div>
    <div class="content">
     <p>Or since the fault current is limited upstream, pass the load wire n times through the core to get a scaling factor of ~n.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25181"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Gary_P&#039;s picture" title="Gary_P&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using arduino as circuit breaker</h3>

    <div class="submitted">Submitted by <a href="../user/7190.html" title="View user profile.">Gary_P</a> on Mon, 17/11/2014 - 09:24.</div>
    <div class="content">
     <p>Thanks for the feedback, the YHDC CT is a starting point but is not too effective at low amps, unfortunately that is what I am starting with so will have to see where I get! &nbsp;Have already thought of looping the wire to scale up the current, which seems a simple way to improve accuracy.</p>
<p>The &#39;thermal&#39; software sounds interesting, would be good to see.</p>
<p>Found interesting using the openenergy.org method in different way</p>
<p><a href="http://www.homautomation.org/2013/09/17/current-monitoring-with-non-invasive-sensor-and-arduino/ " title="http://www.homautomation.org/2013/09/17/current-monitoring-with-non-invasive-sensor-and-arduino/ ">http://www.homautomation.org/2013/09/17/current-monitoring-with-non-inva...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/6105"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-xr5C_yQ5SmRRc4nxSwiy_rIafBH1p7mGv_i-1owQksI" value="form-xr5C_yQ5SmRRc4nxSwiy_rIafBH1p7mGv_i-1owQksI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
