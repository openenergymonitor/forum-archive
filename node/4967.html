<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/4967 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:39:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>&#039;PHP Fatal error:  Class EmonLogger not found&#039; when starting rfm12piphp | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">&#039;PHP Fatal error:  Class EmonLogger not found&#039; when starting rfm12piphp</h3>
        <span class="submitted">Submitted by <a href="../user/6143.html" title="View user profile.">andy_l</a> on Tue, 08/04/2014 - 22:26</span>
        <div class="content"><p>Hello,</p>
<p>It seems the introduction of basic logging is causing an issue which prevents rfm12piphp from starting:</p>
<p><strong>PHP Fatal error:&nbsp; Class &#39;EmonLogger&#39; not found in /var/www/emoncms/Modules/user/user_model.php on line 34</strong></p>
<p>EmonLogger.php is already included in index.php; by including EmonLogger in user_model and process_model (with an explicit path) it can be made to work. Not sure if that suggests a path issue - I&#39;ve never done any PHP. The easier thing to is to remark out references to EmonLogger but either way it creates a git conflict which makes updating a pain.</p>
<p>Any ideas?</p>
<p>Cheers,</p>
<p>&nbsp;</p>
<p>Andy</p>
  <div class="forum-topic-navigation clear-block">
          <a href="4356.html" class="topic-previous" title="Go to previous forum topic">‹ Problems with packetgen</a>
              <a href="4971.html" class="topic-next" title="Go to next forum topic">Where to input calibration values ? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-20622"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'PHP Fatal error:  Class EmonLogger not found' when starting rfm12piphp</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 09/04/2014 - 00:40.</div>
    <div class="content">
     <p>This issue may relate to some changes made to the raspberrypi module and then only partially removed, see the last ~10 posts on&nbsp;<a href="4908.html">http://openenergymonitor.org/emon/node/4908</a>. it looks like those changes have now been fully reverted this evening, so if you last updated from git&nbsp;before this try updating emoncms and raspberrypi module from git again.</p>
<p>If you still have an issue you could try the instruction in that thread&nbsp;<strong>git checkout 8.0.9 </strong>purely as a diagnosis check and post&nbsp;back your results along with what you updated and when etc.</p>
<p>Did the install previously work or&nbsp;is it a fresh install?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20623"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'PHP Fatal error:  Class EmonLogger not found' when starting rfm12piphp</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Wed, 09/04/2014 - 05:46.</div>
    <div class="content">
     <p>Of course, I completely missed the fact that the rfm12piphp script uses the same files as emoncms but is a separate process... urgh</p>
<p>There should be a simple fix for this within the raspberrypi module, I&#39;ll make a pull request presently.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20624"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'PHP Fatal error:  Class EmonLogger not found' when starting rfm12piphp</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Wed, 09/04/2014 - 06:12.</div>
    <div class="content">
     <p>OK - see&nbsp;<a href="https://github.com/emoncms/raspberrypi/pull/42/files">https://github.com/emoncms/raspberrypi/pull/42/files</a></p>
<p>It would be good to confirm that someone can make that change manually and it works for them too?</p>
<p>The logging won&#39;t work while running the rfm12piphp script (there&#39;s no log configuration going on) but it should now be silently bypassed, which was the aim.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20633"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'PHP Fatal error:  Class EmonLogger not found' when starting rfm12piphp</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Wed, 09/04/2014 - 10:12.</div>
    <div class="content">
     <p>Thanks to @Bra1nK, we&#39;ve got confirmation that that fix works for APT-based installs. I&#39;ll update the APT repository as soon as the pull request is accepted and the module gets a new version tag.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20651"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6143.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="andy_l&#039;s picture" title="andy_l&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'PHP Fatal error:  Class EmonLogger not found' when starting rfm12piphp</h3>

    <div class="submitted">Submitted by <a href="../user/6143.html" title="View user profile.">andy_l</a> on Wed, 09/04/2014 - 19:32.</div>
    <div class="content">
     <p>Many thanks for this. I have made the change manually to test - all working ok.</p>
<p>Cheers,</p>
<p>&nbsp;</p>
<p>Andy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20657"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'PHP Fatal error:  Class EmonLogger not found' when starting rfm12piphp</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Wed, 09/04/2014 - 20:17.</div>
    <div class="content">
     <p>No worries. Unfortunately the exact same thing happened to me as to everyone else - I made the changes, checked everything was running OK, but of course I hadn&#39;t restarted rfm12piphp&nbsp;on that box... doh!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20662"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'PHP Fatal error:  Class EmonLogger not found' when starting rfm12piphp</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Wed, 09/04/2014 - 21:26.</div>
    <div class="content">
     <p>I&#39;ve just tried to update via git from&nbsp;v7 image to v 8.1.1 and am still unable to get the rfm12piphp service running.....</p>
<p>pi@raspberrypi ~ $ sudo service rfm12piphp start log<br />
	Log is turned on<br />
	Starting RPI<br />
	pi@raspberrypi ~ $ PHP Notice:&nbsp; Use of undefined constant _ENABLE_PASSWORD_RESET_ - assumed &#39;_ENABLE_PASSWORD_RESET_&#39; in /var/www/emoncms/settings.php on line 51<br />
	PHP Fatal error:&nbsp; Class &#39;EmonLogger&#39; not found in /var/www/emoncms/Modules/user/user_model.php on line 34</p>
<p>I tried yesterday to update via apt to v8.0.9 but although the rfm12piphp service ran other things such as node module and replication would not work. I think v 8.0.8 was the newest Working git version I have tried, but how would I update a v7 image to v8.0.8 via git?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20666"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'PHP Fatal error:  Class EmonLogger not found' when starting rfm12piphp</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Thu, 10/04/2014 - 06:22.</div>
    <div class="content">
     <p>Thanks Dave, this mod seems have fixed my git&nbsp;install. &nbsp;https://github.com/emoncms/raspberrypi/pull/42/files</p>
<p>I still get the (unrelated) password reset error but that doesn&#39;t seem to cause any problems.....</p>
<p>pi@raspberrypi ~ $ sudo service rfm12piphp stop<br />
	Log is turned off<br />
	Stopping RPI: stopped<br />
	pi@raspberrypi ~ $ sudo service rfm12piphp start log<br />
	Log is turned on<br />
	Starting RPI<br />
	pi@raspberrypi ~ $ PHP Notice:&nbsp; Use of undefined constant _ENABLE_PASSWORD_RESET_ - assumed &#39;_ENABLE_PASSWORD_RESET_&#39; in /var/www/emoncms/settings.php on line 51<br />
	sudo service rfm12piphp status<br />
	Log is turned off<br />
	running<br />
	pi@raspberrypi ~ $</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20667"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'PHP Fatal error:  Class EmonLogger not found' when starting rfm12piphp</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Thu, 10/04/2014 - 07:20.</div>
    <div class="content">
     <p>That setting should be either true or false, depending on what you want to do. Probably the docs need to be updated to make that clear, when replacing the other placeholder fields (DB credentials etc).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/4967"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-fF8y57ifWY6ZGFP_uPkH1g0WLB6NM0t1iAbnxCwiETg" value="form-fF8y57ifWY6ZGFP_uPkH1g0WLB6NM0t1iAbnxCwiETg"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
