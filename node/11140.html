<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11140 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:46:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Using Martin R&#039;s solar diverter for remote load switching | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Using Martin R&#039;s solar diverter for remote load switching</h3>
        <span class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 19/08/2015 - 11:57</span>
        <div class="content"><p>I&#39;ve just ordered one of <a href="http://shop.openenergymonitor.com/three-channel-wifi-relay-thermostat/">Martin Harizanov&#39;s&nbsp;three-channel&nbsp;wifi&nbsp;relays</a> from the OEM shop, and was considering using it (amongst other things) to remotely divert unused solar power to an immersion heater.<br />
At home I currently use a emonTX loaded with Martin R&#39;s sketch which drives a Triac&nbsp;to switch the load, however, with this format it is necessary to run 2.5mm cable from the Immersion Heater to the Triac - which is always at the opposite end of the house!!<br />
Using the wi-fi relay would alleviate this, as power could be sourced nearer the immersion heater, (and the unit is ready built!) but was looking at options to get the emonTX and Wi-Fi relay to talk to each other, as one of course is Wi-Fi and the other RF.<br />
The relay&#39;s mechanical endurance shouldn&#39;t present a problem as its rated &gt;30x10<sup>6 </sup>operations.</p>
<p>Anybody got any thoughts?</p>
<p>Paul</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11160.html" class="topic-previous" title="Go to previous forum topic">‹ Solar panel monitoring system project</a>
              <a href="11135.html" class="topic-next" title="Go to next forum topic">Current only diverter. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-33446"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 19/08/2015 - 12:28.</div>
    <div class="content">
     <p>For what it's worth, if you split Martin's (or Robin's) diverter at the input to the opto-trigger, leaving the current-limiting resistor at the sending end, you can drive the trigger over about 70 m of "telephone pair" (a light gauge unscreened twisted pair). I did it with the cable on a drum, I wouldn't expect any problems unless you run it parallel to a mains cable with a really nasty load on the end. (You've got to get enough interference to light up the IR LED, and that requires some!)<br />
70 m isn't the limit, it's what was on the reel.</p>
<p>Then you can have the triac right next to the load.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 19/08/2015 - 12:47.</div>
    <div class="content">
     <p>I would agree extending the triac trigger would be better, I have a working version of this using some standard (really skinny) bt socket&nbsp;extn wire and it works perfectly. I did consider&nbsp;using (and may again) a rfm remote device based on the work Robin has done in this area, but I&#39;m not convinced on the idea of relying on an rf signal for modulating, any error costs or losses me&nbsp;money via the meter.&nbsp;</p>
<p>I&#39;m even less sold on the idea of wifi for this purpose (unless perhaps a direct non networked connection) but aside from all that, the relay would need something else to control it based on the data from the emontx&nbsp;and would not follow the grid CT so well.</p>
<p>The relay is perfect for a 2nd load that can be easily controlled via some PV vs consumtion logic, including a manual override, seasonal or environmental influences etc&nbsp;(eg node-red) to consume the PV first and the triac&#39;d&nbsp;load can mop up&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33453"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 19/08/2015 - 14:18.</div>
    <div class="content">
     <p>I was trying to avoid running wire/cable at all, and as I intend to use the Wi-Fi&nbsp;relay to control my heating programming&nbsp;it would be a natural progression to use it for diversion too. Also from a safety point of view, as it&#39;s pre-built and runs cool, it may be a better option for less confident/qualified users??</p>
<p><em>&nbsp;...the relay would need something else to control it based on the data from the emontx&nbsp;and would not follow the grid CT so well</em>.<br />
The Wi-Fi&nbsp;relay (ESP8266)&nbsp;has been pre-programmed to accept a MQTT&nbsp;message or http call to change and hold the state of each relay (<a href="https://harizanov.com/wiki/wiki-home/three-channel-wifi-relaythermostat-board/">Martin Harizanov&#39;s&nbsp;blog</a> is currently down which gives details), so in theory once the diverter decides to dump excess power, it should take milliseconds for the relay to actuate.</p>
<p>The problem is that emoncms is&nbsp;only updated every 6 or 7 seconds, and that time delay could take me out of the &#39;sweet spot&#39;, rolling into a watt hour so I need to somehow use the output from the emontx.<br />
I could of course use the output from the emontx&nbsp;(removing the opto trigger) and use it to activate a ESP8266 module (<a href="http://www.ebay.co.uk/itm/ESP8266-Serial-WIFI-Wireless-TransceiveR-Module-Send-Receive-LWIP-AP-STA-UKFL-/111745979341?hash=item1a049453cd">&pound;1.82 from Ebay</a>) which would then talk to both&nbsp;node-red and the wi-fi&nbsp;relay&nbsp;via MQTT....</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33455"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Wed, 19/08/2015 - 15:47.</div>
    <div class="content">
     <blockquote><p>The relay&#39;s mechanical endurance shouldn&#39;t present a problem as its rated &gt;30x106 operations.</p>
</blockquote>
<p>This is the mechanical endurance. If you switch a significant load with it, the electrical endurance will be more in the range of a few 10^4 or 10^5 cycles.</p>
<p>I don&#39;t think its a good idea to use a relay for a purpose like this.</p>
<p>BR, J&ouml;rg.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33459"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Wed, 19/08/2015 - 20:47.</div>
    <div class="content">
     <p>I do remote load control via MQTT over hard wired&nbsp;ethernet (not WIFI). I am switching a SSR&nbsp;which is controlled via a little Arduino + ethernet shield running a simple sketch which monitors an MQTT topic and switches a digital pin accordingly. My emon is running a modified version of Robin&#39;s sketch and publishes on/off messages as it decides whether or not we have any excess.</p>
<p>Using *anti-flicker* mode the load is being switched a couple of times a second and my MQTT broker/Arduino+SSR&nbsp;seems to have no trouble handling this.&nbsp;</p>
<p>Not sure I would like to try it over WIFI however, although it may well work just fine.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33462"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 19/08/2015 - 22:04.</div>
    <div class="content">
     <p>@Ben - I presume that you are using the &#39;Arduino&nbsp;Client for MQTT&#39; for the Arduino/Ethernet Shield, are you using the same client for the emonTX to publish the on/off messages or something&nbsp;different.</p>
<p>@Robert,&nbsp;@Paul, @J&ouml;rg&nbsp;- Thanks for the posts, the consensus is this may be problematic for energy diversion especially where switching may occur every few seconds causing relay fatigue and more suited to a 2nd load, but it would be interesting to test the viability of using MQTT&nbsp;to control a Triac as per Ben&#39;s post - except over Wi-Fi, ending the reliance on wired systems, but also creating opportunities to create &#39;safe&#39; pre-built modules to control loads.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33464"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Wed, 19/08/2015 - 22:21.</div>
    <div class="content">
     <p>@Paul - you can find the Arduino sketches I am using on my GitHub page;</p>
<p><a href="https://github.com/sumnerboy12/hardwicke/blob/master/emontx_pvrouter/emontx_pvrouter.ino" title="https://github.com/sumnerboy12/hardwicke/blob/master/emontx_pvrouter/emontx_pvrouter.ino">https://github.com/sumnerboy12/hardwicke/blob/master/emontx_pvrouter/emo...</a></p>
<p><a href="https://github.com/sumnerboy12/hardwicke/blob/master/mqtt_heating3/mqtt_heating3.ino" title="https://github.com/sumnerboy12/hardwicke/blob/master/mqtt_heating3/mqtt_heating3.ino">https://github.com/sumnerboy12/hardwicke/blob/master/mqtt_heating3/mqtt_...</a></p>
<p>The heating node has the SSR connected to it, but it also does a load of other things, such as monitor 3 temp probes in my HWC and control some other home automation devices. The only bit you are really interested in is the mqtt_callback function, which simply switches a digital output pin when a message arrives on the&nbsp;/openhab/heating/in/&lt;pin&gt; topic.&nbsp;</p>
<p>So the emon publishes to mqttTopicPvrTrigger (/openhab/heating/in/2) which is picked up on the receiving Arduino and switches digital output pin 2 high/low. This pin&nbsp;is wired directly to my SSR.</p>
<p>Feel free to ask any questions if any of that is not very clear!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33465"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 19/08/2015 - 22:28.</div>
    <div class="content">
     <p>I don't know how <a href="http://arstechnica.com/gadgets/2015/08/googles-onhub-is-a-200-wi-fi-router-and-smart-home-hub/">Google's very recent offering</a> might interest you - if indeed it does.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33480"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8590.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8590.png" alt="Cancelor&#039;s picture" title="Cancelor&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/8590.html" title="View user profile.">Cancelor</a> on Thu, 20/08/2015 - 16:25.</div>
    <div class="content">
     <p>Does frequent switching reduce the life of the immersion heater?</p>
<p>Is there much heat loss by the SSR?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33481"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using Martin R's solar diverter for remote load switching</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 20/08/2015 - 18:01.</div>
    <div class="content">
     <p>Yes and Yes.</p>
<p>The rapid cycling of&nbsp;heating and cooling of the element causes fatigue which will affect the life expectancy of the element, however, mine is over 2 years old and is still working ok.</p>
<p>The SSR will create quite a bit of heat, and therefore heat dissipation&nbsp;needs to be carefully accounted for when designing a system - heatsinks etc.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11140"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-FwekjBUA7DcCWD9hZbHKkP_e-b9tSxH-KTzSlhQsGCs" value="form-FwekjBUA7DcCWD9hZbHKkP_e-b9tSxH-KTzSlhQsGCs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
