<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11851 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:49:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonhub rc1.2 &#039;non-numerical content&#039; | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonhub rc1.2 &#039;non-numerical content&#039;</h3>
        <span class="submitted">Submitted by <a href="../user/9160.html" title="View user profile.">hschroyen</a> on Tue, 22/12/2015 - 13:40</span>
        <div class="content"><p>Hi,</p>
<p>I have been using the following set-up since begin 2014 with success:</p>
<p>1 emontx v2 in the attic</p>
<p>1 emontx v2 in the cellar</p>
<p>1 ubuntu v14.04</p>
<p>1 jeenode USB</p>
<p>Suddenly the set-up stopped receiving information from the attic and as I was still running the old oem_gate way software I decided to &quot;upgrade&quot; to the newer emonhub rc1.2. After installing this and with a lot of problems configuring the emonhub.conf I managed to get the jeenode USB set-up to work.&nbsp; My next step would be to switch to the newer Jeelink (v3c) with the new RFM69CW as the receiver is better.&nbsp; And here my problem begins.&nbsp; The new Jeelink is running the rf12demo.12 version and as such is sending &quot;ok&quot; and the module number and the information.&nbsp; But emonhub does not like that :(</p>
<p>2015-12-22 12:16:37,014 DEBUG 43 NEW FRAME : 1450782997.01 OK 10 97 0 0 0 0 0 1 1 143 93 171 0 (-47)<br />
2015-12-22 12:16:37,014 WARNING 43 Discarded RX frame &#39;non-numerical content&#39; : [&#39;OK&#39;, &#39;10&#39;, &#39;97&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;1&#39;, &#39;1&#39;, &#39;143&#39;, &#39;93&#39;, &#39;171&#39;, &#39;0&#39;, &#39;(-47)&#39;]<br />
2015-12-22 12:16:46,072 DEBUG 44 NEW FRAME : 1450783006.07 OK 11 240 0 0 0 0 0 3 0 196 94 0 0 (-93)<br />
2015-12-22 12:16:46,073 WARNING 44 Discarded RX frame &#39;non-numerical content&#39; : [&#39;OK&#39;, &#39;11&#39;, &#39;240&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;0&#39;, &#39;3&#39;, &#39;0&#39;, &#39;196&#39;, &#39;94&#39;, &#39;0&#39;, &#39;0&#39;, &#39;(-93)&#39;]</p>
<p>I have searched the forum a lot and found several users reporting the same problem and the solution was to use the emonhub rc1.2...but...that is the version I am using...or...at least this is reported in emonhub.log each time the soft is started.</p>
<p>To give you full details find below my emonhub config :</p>
<p>[SerialDirect]]<br />
&nbsp;&nbsp;&nbsp;&nbsp; Type = EmonHubSerialInterfacer<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [[[init_settings]]]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; com_port = /dev/ttyUSB0 #USB<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; com_baud = 57600<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [[[runtimesettings]]]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #pubchannels = ToEmonCMS,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #subchannels = ToRFM12,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #basetopic = emonhub/<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #calibration = 230V #(UK/EU: 230V, US: 110V)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #baseid = 10 #(emonPi default:5)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #quiet = false #(default:true)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #datacode = h</p>
<p>[nodes]</p>
<p># List of nodes by node ID<br />
# &#39;datacode&#39; is default for node and &#39;datacodes&#39; are per value data codes.<br />
# if both are present &#39;datacode&#39; is ignored in favour of &#39;datacodes&#39;<br />
#[[99]]<br />
[[10]]<br />
&nbsp;&nbsp;&nbsp; nodename = emonTxShield1<br />
&nbsp;&nbsp;&nbsp; firmware = emonTxShield<br />
&nbsp;&nbsp;&nbsp; hardware = emonTxShield<br />
&nbsp;&nbsp;&nbsp; [[[rx]]]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; names = CT1, CT2, CT3, CT4, Volt, Temp<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; datacode = h<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #datacodes = h, h, h, h, h, h #RFM2Pi<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scales = 1,1, 1, 1, 1, 0.1 #RFM2Pi<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; units = W, W, W, W, V, C #RFM2Pi</p>
<p>So please help as this &quot;simple&quot; upgrade is taking way to much time and I do not know what to do next.</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11868.html" class="topic-previous" title="Go to previous forum topic">‹ Problem with power to kWh</a>
              <a href="11867.html" class="topic-next" title="Go to next forum topic">Can No Longer Login to Emoncms ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-37372"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub rc1.2 'non-numerical content'</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 22/12/2015 - 14:50.</div>
    <div class="content">
     <p>Sorry to hear to are having troubles, emonhub v1.2 is indeed a direct&nbsp;replacement for oemgateway&nbsp;and had you been using the OEM RFM2Pi&nbsp;board the transition would have involved installing emonhub and editing your apikey, that&#39;s it, done!</p>
<p>Emonhub is also totally able to use either a jeenode or jeelink&nbsp;without problem, however I do not know how easy the transition could be as I do not know exactly how the JeeNode was previously configured. If it is using a standard rf12demo&nbsp;sketch v11 or v12 then again the transition should also be straightforward and painless, only the additional edit of the &quot;com_port = /dev/ttyAMA0&quot; to the correct ref eg /dev/ttyUSB0&nbsp;depending on how&nbsp;the jeenode is connected.</p>
<p>There is/was no mandatory need to define any nodes (you can but don&#39;t have to)</p>
<p>The main source of your troubles could be the use of the &quot;serial-direct&quot; method of connecting non-rf&nbsp;OEM nodes and other &quot;non-Jee&quot; type devices&nbsp;directly via the EmonHubSerialInterfacer rather than the&nbsp;EmonHubJeeInterfacer&nbsp;which is recommended for all Jee (RFdemo) based devices as it has the ability to manage the settings and more importantly it understands the payload returned by the Jee devices using the RFdemo.&nbsp;</p>
<p>The non-numeric content warnings you see are because of the &quot;OK&quot; and the bracketed rssi value at the end, these are normally handled appropriately&nbsp;by the &quot;Jee&quot; interfacer prior to confirming everything else is numeric only.</p>
<p>The EmonHubJeeInterfacer&nbsp;is the direct equivalent of the oemgateway&#39;s&nbsp;rfm2pi listener, renamed Jee to include the JeeNode and JeeLink.</p>
<p>Be wary of the JeeLink&nbsp;firmware, even if it does report v12 it may be a very late &quot;different&quot; v12, When I ordered my own JeeLink for testing emonhub, they were not yet available with the rfm69 fitted but I contacted the shop and got one by special order, that arrived with v13 installed which when I enquired was installed to all JeeLinks at that time, since then I have found v13 has vanished from the JeeLab repo and there are conversations on their forum about the latest JeeLink firmware and what version it (v12)&nbsp;actually is. If there is any doubt just reinstall the latest v12 RFdemo or the RFM2Pi&nbsp;firmware to be confident of what you have.</p>
<p>So start with changing the interfacer&nbsp;&quot;Type =&quot; to revert to the &quot;stock&quot; emonhub.conf, using the correct port ref and report back with some log if it doesn&#39;t work as expected.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37518"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9160.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hschroyen&#039;s picture" title="hschroyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub rc1.2 'non-numerical content'</h3>

    <div class="submitted">Submitted by <a href="../user/9160.html" title="View user profile.">hschroyen</a> on Sat, 26/12/2015 - 17:59.</div>
    <div class="content">
     <p>Thanks Paul,</p>
<p>Btw Merry Christmas to you all.</p>
<p>I got it working now.&nbsp; I removed all I could find on emonhub and did a clean reinstallation.&nbsp;</p>
<p>So that is solved...now for the next step...I configured also the emonhubmqttinterface but I get an Error Unable to create &#39;MQTT&#39; interfacer : &#39;Module&#39; object has no attribute &#39;emonhubmqttinterfaces&#39;</p>
<p>Is this due to the fact that RC1.2 has no MQTT?</p>
<p>Any idea to get this working?</p>
<p>Can I install RC2.0 on my ubuntu server?</p>
<p>Thanks in advance</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37534"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub rc1.2 'non-numerical content'</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 27/12/2015 - 00:02.</div>
    <div class="content">
     <p>Merry Xmas to you :-)</p>
<p>You are right v1.2 doesn&#39;t have MQTT, there is a skeleton&nbsp;MQTT&nbsp;&quot;reporter&quot; out there somewhere, It was actually the need for bi-directional and routable data streams to fully utilize&nbsp;MQTT&nbsp;that instigated the v2.0 emonhub&nbsp;branch, since v1.2 is a simple single stream design sending everything to all the reporters without any configurable routing.</p>
<p>However although the v2.0 &quot;experimental&quot; branch did tackle both those requirements,&nbsp;ironically&nbsp;there is a bit of a hole in the MQTT code in that branch as that was where the development lost traction when deciding&nbsp;the best format for the MQTT&nbsp;topic trees and payloads.</p>
<p>emonhub is intended to be cross-platform and that branch&nbsp;should definitely&nbsp;run &quot;ok&quot; on ubuntu, &quot;ok&quot; meaning there should be no platform issues, but it is a rough &quot;proof of concept&quot; hence the &quot;experimental&quot; label and&nbsp;at best, a bit rough round the edges. I cannot say it will definitely be trouble free but the &quot;emon-pi&quot; variant is heavily based on it and that seems ok. If you do use it I would be keen to hear&nbsp;any feedback as I hope to get back into it in the new year.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37539"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9160.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hschroyen&#039;s picture" title="hschroyen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub rc1.2 'non-numerical content'</h3>

    <div class="submitted">Submitted by <a href="../user/9160.html" title="View user profile.">hschroyen</a> on Sun, 27/12/2015 - 09:29.</div>
    <div class="content">
     <p>Hi,</p>
<p>Sure I want to help to test.&nbsp; I am not a linux guru but I am willing to experiment and help.</p>
<p>Can you give me a link to start from as for me the information and branches seems scattered around?</p>
<p>Herbert</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37543"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonhub rc1.2 'non-numerical content'</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 27/12/2015 - 10:46.</div>
    <div class="content">
     <p>What is the end goal for which you need MQTT?</p>
<p>The &quot;emon-pi&quot; variant does have MQTT&nbsp;but it is not a direct replacement for oemgateway, think of it as &quot;emonhub&#39;s&nbsp;cousin&quot;, simplicity, reliability and buffering are the trade off for MQTT, whereas&nbsp;v1.2&nbsp;is a direct replacement with improved features and reliability but MQTT is not integral,&nbsp;</p>
<p>v2.0 was never completed and I cannot really recommend it&#39;s use, if it better suited your needs and were able to &quot;fix it up&quot; you are welcome to use it but it was never intended for production and there are no guides or discussions to help you. My comment re feedback was out of interest for any useful info that may help development of the next version, it doesn&#39;t strictly need &quot;testing&quot; as that&nbsp;version won&#39;t get&nbsp;released.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11851"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-qqMhxddfW8Ub7lG1o_Rb-Wblf28NqMRuPmGtZMHCTTU" value="form-qqMhxddfW8Ub7lG1o_Rb-Wblf28NqMRuPmGtZMHCTTU"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
