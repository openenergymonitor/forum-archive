<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3559 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:29:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonGLCD - how to show actual time | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonGLCD - how to show actual time</h3>
        <span class="submitted">Submitted by Guest on Tue, 07/01/2014 - 15:54</span>
        <div class="content"><p>Hi, I received a kit today and have successfully assembled. The LCD is a bit wonky (my fault) but otherwise works great.</p>
<p>I am left over with the 3 push button switches which don&#39;t get mentioned in the assembly details at all. Now that I look, it&#39;s obvious where they go. But now impossible to install as the LCD is in the way. Any ideas ? Would like to have them in, ideally but not at all obvious now .. suggest they are added into the (otherwise fantastic) instructions.</p>
<p>While I am here .. I am running (for now) the HomeEnergyMonitor sketch .. the time in the bottom RHS of the LCD is displaying the *time* since boot (so currently 0:17) ..&nbsp;</p>
<p>A comment in the sketch says ..</p>
<p>// RTC to reset Kwh counters at midnight is implemented is software.<br />
	// Correct time is updated via NanodeRF which gets time from internet</p>
<p>So my question is, what else do I have to do to get the actual time shown on the display ?</p>
<p>*so* impressed with all of this. Really fantastic work. Congratulations !</p>
<p>&nbsp;</p>
<p>Pat</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3582.html" class="topic-previous" title="Go to previous forum topic">‹ No devices found on emontx v3 when DS18B20 connected to terminal block</a>
              <a href="3520.html" class="topic-next" title="Go to next forum topic">USB&gt;UART - Broken connections? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-17385"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - how to show actual time</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 08/01/2014 - 02:37.</div>
    <div class="content">
     <p>Sorry, Pat, but I draw your attention to step 19B in the instructions.</p>
<p>I think with a very fine soldering iron you might be able to solder the switches in. The contacts are the pair of pins nearest the edge, and they should just be accessible without touching the backlight. The back pins are the frame for stability and though they would be very hard to get at on the solder side, I think you could solder those from the top.</p>
<p>If you have a NanodeRF or OKG Base connected to the internet, or (I think) an RPi Base running a real-time clock, your emonGLCD should be getting the time from there. Do you have one of those? If not, I&#39;d suggest you could use a switch or combination of switches to set the time, or maybe it is easier to change the sketch to reset the time at power-on to a convenient time when you&#39;re available, and power it (or cycle the power) then. But that would lose the history and the daily total.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17388"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - how to show actual time</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Wed, 08/01/2014 - 07:09.</div>
    <div class="content">
     <p>Yes, a Rasberry Pi base running emoncms v5, 6 or 7, will send the time to an emonGLCD. The interval is set from the emoncms Raspberry Pi menu.</p>
<p>Setting the interval to zero, (the default) disables the time broadcast.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17389"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="patmolloy&#039;s picture" title="patmolloy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - how to show actual time</h3>

    <div class="submitted">Submitted by patmolloy (not verified) on Wed, 08/01/2014 - 08:37.</div>
    <div class="content">
     <p>Damn, I somehow missed 19B. I expect I was looking for a picture !</p>
<p>In mitigation (!) none of the subsequent photos show the switches in place, and even the more-or-less final photos with the enclosure attached at step 25 don&#39;t have the switches in.</p>
<p>Not a huge deal, will have a go with a fine soldering iron when I am feeling brave.</p>
<p>I am running RPi Base .. so will have a go at getting that to work.</p>
<p>Thanks so much for the help.</p>
<p>Cheers</p>
<p>&nbsp;</p>
<p>Pat</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17403"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="patmolloy&#039;s picture" title="patmolloy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - how to show actual time</h3>

    <div class="submitted">Submitted by patmolloy (not verified) on Wed, 08/01/2014 - 16:30.</div>
    <div class="content">
     <p>I am actually running &quot;Rock-solid RFM2Pi gateway solution&quot; (<a href="http://harizanov.com/2013/08/rock-solid-rfm2pi-gateway-solution/" title="http://harizanov.com/2013/08/rock-solid-rfm2pi-gateway-solution/">http://harizanov.com/2013/08/rock-solid-rfm2pi-gateway-solution/</a>) .. from the shop here&nbsp;http://shop.openenergymonitor.com/pre-loaded-raspberry-pi-gateway-4gb-sd-card/</p>
<p>Which seems to work extremely well.&nbsp;</p>
<p>The oemgateway.conf file contains the following, where sendtimeinterval is set to 60, but this *does not* appear to be doing the trick - the emonGLCD is not displaying the actual time. The Pi itself *is* OK and reports the time correctly.</p>
<pre>
# This listener manages the RFM2Pi module
[[RFM2Pi]]
    type = OemGatewayRFM2PiListener
    [[[init_settings]]]
        com_port = /dev/ttyAMA0
    [[[runtime_settings]]]
        sgroup = 210
        frequency = 4
        baseid = 19
        sendtimeinterval = 60</pre><p>&nbsp;</p>
<p>Anyone have any idea what might not be working ?</p>
<p>Thanks</p>
<p>&nbsp;</p>
<p>Pat</p>
<p>(ps managed to get the switches in and working .. when I first looked it seemed impossible, but a super fine soldering iron tip and a steady hand has done the trick!)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17457"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="patmolloy&#039;s picture" title="patmolloy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - how to show actual time</h3>

    <div class="submitted">Submitted by patmolloy (not verified) on Thu, 09/01/2014 - 16:21.</div>
    <div class="content">
     <p>Incidentally, this &quot;missing time&quot; issue was solved &nbsp;... take a look here</p>
<p><a href="3578.html">http://openenergymonitor.org/emon/node/3578</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3559"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-omZjT23t1OgMFM346tQDjKfT8P0UbbqZ4DOcbzwjnnY" value="form-omZjT23t1OgMFM346tQDjKfT8P0UbbqZ4DOcbzwjnnY"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
