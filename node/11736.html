<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11736 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:51:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>4x Multiplexed RTD Temperature sensor module | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">4x Multiplexed RTD Temperature sensor module</h3>
        <span class="submitted">Submitted by <a href="../user/9069.html" title="View user profile.">R0b3r7</a> on Wed, 02/12/2015 - 21:23</span>
        <div class="content"><p>Hello everyone, this is my first post on this forum :).</p>
<p>I was inspired by the project <a href="https://learn.openenergymonitor.org/?redirect=rtd-temperature-sensing">4x Multiplexed RTD Temperature sensor modules</a>, so I build my own circuit and connected it to the Arduino Mega r3 2560. I&#39;ve had changed the RTD example sketch so that I can read all 4 RTD temperature probes. Instead of RTD probes I used 1kOhm resistor&rsquo;s (0&deg;C) to see what values I receive on the serial port. Unfortunately the values that I&rsquo;m receiving are strange (with or without the probes connected to input), even if I change the value of the variable resistor of the OpAmp. The first value is changing between 200.00 and 500.00, while the other three values are 1024.00 which is strange because it was stated that the maximum value was 1023.00? I have attached pictures of my circuit, bottom and top side so you can see if I have done something wrong with the soldering, and I attached the sketch that I changed. I checked several times the connections and it seems to me all right but maybe I&#39;m wrong? Could you help me with advice or if you have had a similar situation.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11752.html" class="topic-previous" title="Go to previous forum topic">‹ git checkout 9.x</a>
              <a href="11727.html" class="topic-next" title="Go to next forum topic">emonTH with DHT22 doesn&#039;t transmit temperature and humidity values every 60 sec. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-36603"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 4x Multiplexed RTD Temperature sensor module</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Thu, 03/12/2015 - 00:11.</div>
    <div class="content">
     <p>I&#39;d not seen that design before. &nbsp;One issue I notice with it is the 220K series resistor into the ADC input. &nbsp;There&#39;s a paragraph about why that was needed in your link above, entitled &quot;220k output resistor&quot; but I think it&#39;s misguided. &nbsp; It really should be &quot;10k or less&quot; as stated in that pargraph.</p>
<p>But I doubt that&#39;s the cause of all of your problems. &nbsp;The best bet is probably to debug the h/w first with a voltmeter. &nbsp;Have the f/w select a single channel and repeatedly read and display that channel. &nbsp;While that&#39;s running,&nbsp;make sure all the voltages are correct at the various stages and see if that voltage is consistent with what&#39;s being displayed. &nbsp;Then repeat for each of the other channels.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36604"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 4x Multiplexed RTD Temperature sensor module</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 03/12/2015 - 00:46.</div>
    <div class="content">
     <p>I strongly suspect that either your circuit isn't what you think it is, or those blobs of solder have a whisker somewhere to an adjacent blob.</p>
<p>My first suggestion is to measure the voltages at all the multiplexer pins, and check that they are what you expect. If they are not, and of that I'm fairly certain, then:</p>
<p>Second is to use a continuity meter to check for shorts - everywhere that you have used pads adjacent to one another.</p>
<p>Third, reverse the 'bottom' photo, trace the 'tracks' and overlay that on the top photo, then check that against the circuit diagram. (Actually, it may be better to draw the diagram from what you actually have and compare that with the original.) I'm not at all convinced that you've got the correct pins for the multiplexer IC. Where do you think pin 1 is? I think it's nearest the op.amp, and that doesn't seem to fit your connections.</p>
<p>Fourth, next time you should invest in a roll of tinned copper wire and use that instead of all that solder, tacking it down at the ends and every 4th or 5th pad elsewhere where there isn't a component. I'd have used stripboard rather than what you have done.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36605"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 4x Multiplexed RTD Temperature sensor module</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 03/12/2015 - 00:57.</div>
    <div class="content">
     <p>I concur about the 220 k&Omega;. I think increasing noise when the value was reduced is a symptom of other problems - possibly power supply noise - that should be tackled. My analysis is that resistor plus strays were behaving as a low-pass RC filter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36619"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9069.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="R0b3r7&#039;s picture" title="R0b3r7&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 4x Multiplexed RTD Temperature sensor module</h3>

    <div class="submitted">Submitted by <a href="../user/9069.html" title="View user profile.">R0b3r7</a> on Thu, 03/12/2015 - 12:23.</div>
    <div class="content">
     <p>Thank you for your prompt reply and advices. I&#39;ll try to apply all that to discover what is the problem. I tried to measure the voltage at the input of the multiplexer while the &ldquo;probes&rdquo; 1KOhm resistors are attached to input. Power source for the circuit is 5V, and every input of the multiplexer is showing me 0.45V, while the output from the multiplexer is showing me between 0.10V - 0.13V, like at the common output, so at each separate output. I have attached pictures for the mux and OpAmp. I am using ARTSCHIP CD4052BE M 0825 mux and TI 12CJ8YP LM324N OpAmp. I tried manually to select channels for the multiplexer, for example, I brought A channel to 5V, and B to GND, I tried all combinations. I noticed when I connect A and B to GND to get values for all 4 inputs between 200.00 and 500.00. For other combinations of A and B channels the value are 1024.00.</p>
<p>Links for <a href="http://www.mouser.com/ds/2/405/cd4052b-557795.pdf">mux</a> and <a href="http://www.ti.com/lit/ds/symlink/lm324-n.pdf">OpAmp</a> that I&#39;m using.</p>
<p>From the attached picture of the mux and OpAmp IC, you can see how I made the connections from the inputs to the mux inputs, and from the mux outputs to the OpAmp. From the mux pin 13 I went to OpAmp 3. I used OpAmp 2, and with OpAmp 3 went to the OpAmp 4, I did&rsquo;t used the OpAmp 1 from the LN324N IC. I will try one more time to trace the &quot;tracks&quot; and go through the optical exam of the circuit.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36663"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9069.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="R0b3r7&#039;s picture" title="R0b3r7&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 4x Multiplexed RTD Temperature sensor module</h3>

    <div class="submitted">Submitted by <a href="../user/9069.html" title="View user profile.">R0b3r7</a> on Thu, 03/12/2015 - 21:23.</div>
    <div class="content">
     <p>Hy, thank You all for the answers. It&#39;s interesting that now my first &quot;probe&quot; is getting some values between 150.00 and 500.00, and other 3 &quot;probes&quot; are 1024.00. I tried with optical check of the traces and it is looking like there is no contact with neighbor track. I have measured the multiplexer input 0.45V, while the output from the multiplexer is showing me between 0.10V - 0.13V, like at the common output, so at each separate output. &ldquo;probes&rdquo; are 1KOhm resistors attached to input, power source for the circuit is 5V. The first problem, perhaps the only one begins from the mux output, because it does not follow input values.</p>
<p>Unfortunately I do not have a continuity tester. I have reversed the photos and analyzed the &quot;tracks&quot; and it seem to me that its ok, and I analyzed the connection (tracks) of my board with the shematic diagram. I think that the pin&#39;s for the mux are ok. I have attached pictures for the mux and OpAmp. I am using ARTSCHIP CD4052BE M 0825 mux and TI 12CJ8YP LM324N OpAmp. I tried manually to select channels for the multiplexer, for example, I brought A channel to 5V, and B to GND, I tried all combinations. I noticed when I connect A and B to GND to get values for all 4 inputs between 200.00 and 500.00. For other combinations of A and B channels the value are 1024.00.</p>
<p>Next time I will definitely use copper wire or the stripboard.</p>
<p>I will try to put all this together on a protoboard and see if I can get some values. I will post the pictures, and try to recycle the components from this board that I have soldered.</p>
<p>Of course any other advice is welcome.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36680"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 4x Multiplexed RTD Temperature sensor module</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 04/12/2015 - 00:07.</div>
    <div class="content">
     <p>Please read the page that the link "Read this before posting" points to. I've deleted all your posts except the ones above.</p>
<p><i>"Unfortunately I do not have a continuity tester."</i><br />
If you want my honest opinion, you are wasting your time, and probably money too, without a reasonable multimeter. You will <b>really</b> struggle without one. There is a page in Resources|Building Blocks that should give you a guide. I would caution against buying a very cheap one, because you will soon find it is not good enough, one similar to the cheapest one in the table will be adequate for most things you need to do. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11736"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-btZQz5Sd1fmbTHIAaEkXr9xVURjoQszq5SydEcOg-28" value="form-btZQz5Sd1fmbTHIAaEkXr9xVURjoQszq5SydEcOg-28"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
