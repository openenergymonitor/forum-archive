<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10329 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:01:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Local Emoncms and multiple Esp8266 | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Local Emoncms and multiple Esp8266</h3>
        <span class="submitted">Submitted by <a href="../user/7359.html" title="View user profile.">rmtucker</a> on Mon, 16/03/2015 - 14:32</span>
        <div class="content"><p>I realise that this idea would not be possible with emoncms.org But,</p>
<p>If i were using a local emoncms server Is it possible to have multiple Esp8266,sending data to the local server at there own free will.</p>
<p>I would imagine that if i did this with emoncms.org it would not work due to the rate limiter?</p>
<p>So basically there would be no server in between putting all the data together and sending it via api in 1 line to emoncms?</p>
<p>For instance:-</p>
<p>Esp8266 1 : sending Consumption data every 6secs</p>
<p>Esp8266&nbsp;2&nbsp;: sending Temprature&nbsp;data every 6secs</p>
<p>Esp8266&nbsp;1 : sending Generation&nbsp;data every 6secs</p>
<p>But they all might send at the same time.</p>
<p>So hard to explain so i hope you can grasp what i am asking</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5979.html" class="topic-previous" title="Go to previous forum topic">‹ Mk 1 RFMPi source code ?</a>
              <a href="10304.html" class="topic-next" title="Go to next forum topic">emoncms install problems ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-28716"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Local Emoncms and multiple Esp8266</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Mon, 16/03/2015 - 15:35.</div>
    <div class="content">
     <p>There is absolutely no problem to do that.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28718"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Local Emoncms and multiple Esp8266</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 16/03/2015 - 15:48.</div>
    <div class="content">
     <p>I'm not sure what your question is. If the WiFi module can handle the protocol correctly, which it should do, it will wait until the channel is clear before trying to send, therefore you won't have a collision that might otherwise occur when two attempt to transmit at the same time. Therefore there should not be a problem.</p>
<p>And <i>"there would be no server in between putting all the data together and sending it"</i> - I can't think what/which server you're thinking of there. There's only one in the system, either emoncms.org or your own (RPi?) running emoncms, not normally both (though you can do both). If you're thinking of your RPi running emonhub and forwarding data to emoncms.org, that's functioning as a base node, not as a server.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28720"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7359.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rmtucker&#039;s picture" title="rmtucker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Local Emoncms and multiple Esp8266</h3>

    <div class="submitted">Submitted by <a href="../user/7359.html" title="View user profile.">rmtucker</a> on Mon, 16/03/2015 - 16:23.</div>
    <div class="content">
     <p>Yes emonhub&nbsp;is what i was thinking of.</p>
<p>It is taking the data from different nodes but then sending it as one line to emoncms.</p>
<p>But am i right to assume that emoncms.org would not accept the data from multiple nodes in the scenario i describe?</p>
<p>&nbsp;</p>
<p>So it looks like i will have to set an image up for the raspi,The existing one includes emonhub and i did not find the image&nbsp;to be very stable during my last tryout,Also missing quite a lot of new stuff.</p>
<p>Any way i think i will set it up on a hard drive this time.(so maybe a full install)</p>
<p>I have been using the esp8266 and emoncms.org for months without any problems and at &pound;3.50ea it saves on all the electronics used normally.Emontx,Base etc.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28723"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Local Emoncms and multiple Esp8266</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/03/2015 - 17:18.</div>
    <div class="content">
     <p>You can post direct to emoncms&nbsp;but the pro&#39;s and cons tip in favor of not sending directly (IMO) Aside from making the server work harder by rapid firing small data packets at it, you are also prone to losing data if it can&#39;t be posted due to network outage, server down or just increased server workload etc etc</p>
<p>using emonhub will not only buffer the data until&nbsp;it&#39;s receipt&nbsp;is acknowledged by emoncms&nbsp;but also allow you to set an interval on the reporter so no matter how much data you through at it emonhub will only&nbsp;&quot;bulk&nbsp;post&quot; to emoncms every 5 or 10 seconds for example,&nbsp;</p>
<p>Posting via emonhub&nbsp;will also allow either or both a remote and local emoncms, Whilst managing the IP&#39;s, url&#39;s and api keys for you. Currently to change any of these will involve you re-configuring every device individually and leave you open to issues with changing IP address as per&nbsp;<a href="10288.html">http://openenergymonitor.org/emon/node/10288</a>.</p>
<p>I&#39;m all in flavor&nbsp;of these devices I think they have fantastic potential&nbsp;but I don&#39;t think they can wholly replace the existing hardware just yet&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28725"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7359.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rmtucker&#039;s picture" title="rmtucker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Local Emoncms and multiple Esp8266</h3>

    <div class="submitted">Submitted by <a href="../user/7359.html" title="View user profile.">rmtucker</a> on Mon, 16/03/2015 - 17:31.</div>
    <div class="content">
     <p>Paul</p>
<p>Yes i agree on all of your points.</p>
<p>My intention&nbsp;was eventually to only post to emoncms every 60secs&nbsp;or so.</p>
<p>The above statements were just an example to get my question across .</p>
<p>It would be nice if emonhub could work with these devices as they are so easy to program and so cheap.</p>
<p>The esp8266&nbsp;can be set up as a server and only serve data to emoncms when requested??</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28727"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Local Emoncms and multiple Esp8266</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 16/03/2015 - 17:38.</div>
    <div class="content">
     <p>Yes, I think that we are still scratching the surface with the ESP8266, and there is a lot of potential still to be explored.<br />
I'm surprised that there hasn't been more discussions about them here in the forum, so your post is very timely.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28745"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Local Emoncms and multiple Esp8266</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 17/03/2015 - 13:40.</div>
    <div class="content">
     <p>I think it would be quite easy to change your code to point the esp8266 at emonhub. On the LAN no apikey is needed, just a string of &quot;nodeid val1 val2 val3.....&quot; sent to a fixed LAN IP for the emonhub host (pi) at the port number defined in emonhub.conf.</p>
<p>The serving of data on request will be of great use on very large installs to synchronize&nbsp;RF traffic (although less necessary&nbsp;with wifi) or when continuous data is not required and can be sought on-demand.</p>
<p>For what we do the socket interfacer&nbsp;listening out&nbsp;for any&nbsp;transmissions&nbsp;is probally&nbsp;the better solution currently.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28746"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7359.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rmtucker&#039;s picture" title="rmtucker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Local Emoncms and multiple Esp8266</h3>

    <div class="submitted">Submitted by <a href="../user/7359.html" title="View user profile.">rmtucker</a> on Tue, 17/03/2015 - 14:32.</div>
    <div class="content">
     <p>That sounds like just the ticket!</p>
<p>But i can not find any details about this or any help files,Are these features documented anywhere?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28748"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Local Emoncms and multiple Esp8266</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 20/03/2015 - 14:23.</div>
    <div class="content">
     <p>If you search for <a href="../search/node/socket%20interfacer.html">&quot;socket interfacer&quot;</a>&nbsp;you may&nbsp;find some useful info. basically if you add something along the lines of</p>
<blockquote><p>[[sockets]]</p>
<p>&nbsp; &nbsp; Type = EmonHubSocketInterfacer</p>
<p>&nbsp; &nbsp; [[[init_settings]]]</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; port_nb&nbsp;= 50011</p>
<p>&nbsp; &nbsp; [[[runtimesettings]]]</p>
</blockquote>
<p>to the [interfacers] section of emonhub.conf (if you have a firewall enabled you may need to add the port to the &quot;enabled&quot; list) the name &quot;sockets&quot; can be any unique name and the com port can be any unused port.</p>
<p>Then each esp8266&nbsp;will need to be configured to send nodeid val1 val2.....&nbsp;to the IP:PORT.</p>
<p>I&#39;ve attached a socket_test.txt (replace&nbsp;the &#39;.txt&#39;&nbsp;with &#39;.py&#39; renamed&nbsp;to permit upload)&nbsp;for testing the interfacer, but with regard to the esp8266 I can&#39;t help you much as I have not played with one yet.</p>
<p>Paul</p>
<p>PS edit the &quot;socket_test.py&quot; data frame for an unused node during tests (I used node 10)</p>
<p>corrected - should of been &quot;port_nb&quot; not &quot;port_no&quot;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10329"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-3uMMNXOKXqV1QM75QJtyHEra-3ZBUCycZW8V9yDqbLE" value="form-3uMMNXOKXqV1QM75QJtyHEra-3ZBUCycZW8V9yDqbLE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
