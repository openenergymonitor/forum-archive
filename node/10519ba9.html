<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonGLCD - Not responding. | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/emon/sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/emon/modules/node/node.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/defaults.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system-menus.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/user/user.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/mollom/mollom.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/forum/forum.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/views/css/views.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/comment/comment.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/themes/emon3/style.css?r" />
<style type="text/css" media="all">@import "/emon/sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="/emon/" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="/emon/">Home</a> » <a href="/emon/forum">Forums</a> » <a href="/emon/forum/4">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonGLCD - Not responding.</h3>
        <span class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Sat, 15/09/2012 - 19:23</span>
        <div class="content"><p>Anyone else noticing that the unit freezes on the new code.. (This appeard when the icons appeared)</p>
<p>The display is on but its frozen in time.. LEDs not working / fixed on, Time not updating and the temp not being sent back to&nbsp;http://emoncms.org/, buttons dont work, only a removing of power and reapplying it make it work again.. Seem to happen after 24hrs / 36Hrs.. &nbsp;But im&nbsp;looking at seeing if this is true.</p>
<p>Thanks</p>
<p>Rob</p>
  <div class="forum-topic-navigation clear-block">
          <a href="/emon/node/2576" class="topic-previous" title="Go to previous forum topic">‹ Solved - Problem with Nanode RF reaching personal Emoncms server - 403 Forbidden error</a>
              <a href="/emon/node/2578" class="topic-next" title="Go to next forum topic">Arduino UNO + emonTx Shield + Raspberry Pi ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-7162"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1749" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="tontonsam&#039;s picture" title="tontonsam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1749" title="View user profile.">tontonsam</a> on Sun, 11/11/2012 - 20:49.</div>
    <div class="content">
     <p>I have the same issue,</p>
<p>my newbie status doesn&#39;t help, cannot find the issue.</p>
<p>buttons don&#39;t work...</p>
<p>Unit freezes at random times</p>
<p>I ordered a second unit for a friend and same issue appears... so i guess it&#39;s code as you said!</p>
<p>Anyone else had this issue?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7163"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1747" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1747" title="View user profile.">Petrik</a> on Sun, 11/11/2012 - 20:51.</div>
    <div class="content">
     <p>Added watchdog first activation in setup routine and then reset towards the end of the ccoid function - now been running several days witout problems - fingers crosed.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7185"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1936" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="mad_dad&#039;s picture" title="mad_dad&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1936" title="View user profile.">mad_dad</a> on Mon, 12/11/2012 - 12:47.</div>
    <div class="content">
     <p>I had similar issues. Added a flashing heatbeat icon to display to give visibility that s/w is still running.</p>
<p>It would randomly freeze.</p>
<p>I have modified my SolarPV sketch and now runs continuously, also created new sketch to display 3 solar water panels temps and 2 hots tanks temps</p>
<p>I will have a look when i get home as to the changes</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7187"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1749" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="tontonsam&#039;s picture" title="tontonsam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1749" title="View user profile.">tontonsam</a> on Mon, 12/11/2012 - 13:24.</div>
    <div class="content">
     <p>Could you elaborate on, what exactly you did? :-)&nbsp;</p>
<p>thx</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7188"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 12/11/2012 - 15:21.</div>
    <div class="content">
     <p>What is &quot;the ccoid function&quot;? File &amp; line no?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7190"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1747" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1747" title="View user profile.">Petrik</a> on Mon, 12/11/2012 - 18:13.</div>
    <div class="content">
     <p>void() + ipad&nbsp;keyboard -&gt; ccoid ;-)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7191"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Mon, 12/11/2012 - 19:05.</div>
    <div class="content">
     <p>Where&#39;s the like button ;)</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7202"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 12/11/2012 - 20:25.</div>
    <div class="content">
     <p><em>Where&#39;s the like button ;)</em></p>
<p>Probably next to the &#39;any&#39; key.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7214"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1936" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="mad_dad&#039;s picture" title="mad_dad&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1936" title="View user profile.">mad_dad</a> on Mon, 12/11/2012 - 22:39.</div>
    <div class="content">
     <p>If i remember correctly i added a few lines of code to report received data on the serial port and the sketch size got near the 32,256 byte max.</p>
<p>In the end i changed the code to remove the history page, as i never used it, sketch size reduced and problem went away. Also removed the serial reporting too later.</p>
<p>Added my own code to display 3 heartbeat pulses on the LCD,&nbsp;</p>
<p>1. every second to show it still running</p>
<p>2. when data received from emontx</p>
<p>3. when time received from NanodeRF</p>
<p>This code necessitated removing the history page</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7216"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1936" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="mad_dad&#039;s picture" title="mad_dad&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1936" title="View user profile.">mad_dad</a> on Mon, 12/11/2012 - 22:46.</div>
    <div class="content">
     <p>I also had problems with emontx RF transmissions keep failing( i have two senders on different &nbsp;channels)</p>
<p>This was because of sending debug messages to the serial port and then send RF data. I assume the serial transmission uses some from of interrupt driven device driver and returns system control before data is sent complete allowing interrupts to interfere with the RF call. &nbsp;So this could also affect the LCD RF&nbsp;transmission if used before hand.</p>
<p>Correct me if i am wrong.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7220"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 12/11/2012 - 23:45.</div>
    <div class="content">
     <p>I took the same basic sketch, but modified it somewhat (making the LEDs and backlight track ambient lighting a bit better to give a more constant perceived brightness) and in doing so I too ran out of memory. I recovered sufficient simply by tidying up the code, introducing &#39;for&#39; loops rather than repeating code, etc, - all simple little things that added up.</p>
<p>Taking out <u>all</u> Serial commands helps enormously.</p>
<p>I loaded the standard sketch this evening and it locked up after an hour. I didn&#39;t see any problems with my slimmed-down version while I had it on test for several days continuously (it&#39;s built for a friend, so not actually in use yet).&nbsp; It says:<br />
	Binary sketch size: 32,064 bytes (of a 32,256 byte maximum).</p>
<p>On the RF matter, I believe I read somewhere in JeeLabs that there is a limit on the channel occupancy by any one transmitter, and this is enforced in the library. It&#39;s possible that you have hit this. I don&#39;t know how the limit is implemented - my guess is it blocks until the appropriate period has elapsed based on the length of the last transmission.<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7301"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1936" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="mad_dad&#039;s picture" title="mad_dad&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1936" title="View user profile.">mad_dad</a> on Thu, 15/11/2012 - 13:28.</div>
    <div class="content">
     <p>I have 2 GLCDs running and have both been running for over&nbsp; week now, until last night the Solar PV one locked up.</p>
<p>Strangely this is the one with the code size very near the maximum.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7303"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Thu, 15/11/2012 - 14:19.</div>
    <div class="content">
     <p>Maybe one can code a &#39;daily reboot&#39; function for the emonGLCD? To avoid lock-ups?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7305"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 15/11/2012 - 14:47.</div>
    <div class="content">
     <p><em>Strangely this is the one with the code size very near the maximum.</em></p>
<p>I don&#39;t think it&#39;s all that strange, IIRC the stack grows downwards towards the top of program space, and if there isn&#39;t room, something&#39;s got to give. The compiler doesn&#39;t warn you.</p>
<p>Try slimming the code down a bit! (That&#39;s the best suggestion I can make at the moment).</p>
<p>Take out <strong>all</strong> Serial.***** statements unless you absolutely need them for debugging.<br />
	Take out the SolarPV_type that you don&#39;t use.<br />
	Reduce the size of the str[ ]&nbsp; array where possible.<br />
	Take out the 5 lines or so that write the time, and are repeated several times, and make them a function and call that instead.<br />
	Do the same with writing Power. (If the position changes, pass it in as a parameter).<br />
	Take out constants like</p>
<pre>
 int MINTEMP = -15;</pre><p>and make them preprocessor directives instead (on the basis that the compiler is usually better at optimising than you are!).<br />
	Replace repeated strings (like &quot;n days ago&quot;) with a loop.<br />
	Pre-calculate any maths (e.g&nbsp; * 0.2 / 3600000&nbsp; becomes&nbsp; * 5.555556e-8).</p>
<p>And anything else you can find like the above. Compile and check the size each time you make a change, just to make sure you&#39;re going in the right direction.</p>
<p>&nbsp;</p>
<p><em>Maybe one can code a &#39;daily reboot&#39; function for the emonGLCD? To avoid lock-ups?</em></p>
<p>Surely it is better to remove the cause of the problem rather than fix with a fiddle? And how will the reboot work if it locks up before the 24 hours? And how do you deal with the history, write it to EEPROM before you reboot, I presume? But you can&#39;t do that inside the watchdog, and if you write the EEPROM too frequently, it will wear out.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7306"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Thu, 15/11/2012 - 14:56.</div>
    <div class="content">
     <p>Also, are the people with units locking up running V1.3 or 1.4 boards? Just in case it makes a difference?</p>
<p>&nbsp;</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7307"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Thu, 15/11/2012 - 15:45.</div>
    <div class="content">
     <p>Hi guys,</p>
<p>Thanks for debugging this, it seems like it&#39;s a case of at ATmega running out of memory. For the time being I have disabled the &#39;history&#39; page on the default emonGLCD&nbsp;home energy monitor and solar PV examples. Please could you give the examples a go an let me know if this increases stability.</p>
<p>I will further look into the problem when I&#39;m back from holiday.&nbsp;</p>
<p>Cheers!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7310"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 15/11/2012 - 17:08.</div>
    <div class="content">
     <p>I have been meaning to understand how the icons get drawn - I suspect it might be possible to save some bytes there too.</p>
<p>(Glyn: If the Solar_PV switch was done on a preprocessor #ifdef / #ifndef , then the unused one isn&#39;t even compiled, of course)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7396"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1936" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="mad_dad&#039;s picture" title="mad_dad&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1936" title="View user profile.">mad_dad</a> on Sun, 18/11/2012 - 17:12.</div>
    <div class="content">
     <p>Both mine are &nbsp;V1.4 models.</p>
<p>One has a code size of 24K&nbsp;and has never froze</p>
<p>The other SolarPV one has 31K+ occasionally freezes</p>
<p>I have now removed history page and pared it down to 30.8K. Will try this for a week.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7451"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/2221" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-2221.png" alt="alpav&#039;s picture" title="alpav&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/2221" title="View user profile.">alpav</a> on Mon, 19/11/2012 - 21:26.</div>
    <div class="content">
     <p>Hi everybody. I&#39;ve built up an emonGLCD v1.4 that has been running with the sketch got from github (just translated to Italian) for the first 6 days of its life.</p>
<p>On Sunday morning I have found it stuck, not responding to anything, time frozen at 01:04. Rebooted and still up and running. During the night the emoncms has been updated.</p>
<p>I then found this thread and I&#39;ve spent some time to optimize the code following the suggestions above. I didn&#39;t want to remove any screen so I&#39;ve gained not so much and my sketch is now something more than 31 kb. Better than before, anyway.</p>
<p>After 25 hours it stuck again, tonight.</p>
<p>At the same time, I&#39;ve got an error from emoncms.org (I was checking my dasboards). The ADSL has been unstable for few minutes. The base failed to get the time and I&#39;ve found the emonGLCD&nbsp;frozen with the&nbsp;baseFail error string displayed.</p>
<p>I am not sure that this is related to the problem, but I am pretty sure that also before the first stuck the baseFail error appeared. This evening I had to restart the base (OKG with W5200) too because despite the two leds&nbsp;were blinking apparently in the normal way, the time on the GLCD was not updated.</p>
<p>After that everything is working again but I&#39;ve noticed a weird thing on the emoncms. All the data already present there have been shifted back of one day. For example: the GLCD&nbsp;frozen at 20:04. Till then the PV power logged on the 19th of November was 6.61 kWh. After the base reboot I can read the PV power for the 19th of November is zero and the power for the 18th of November is 6.61 kWh. And all the previous data are shifted back of one day.</p>
<p>Hope it helps.</p>
<p>Alberto</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7635"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Sat, 24/11/2012 - 22:45.</div>
    <div class="content">
     <p>Well im still getting the crashing even with the new code..</p>
<p>Iv tried removing the icons as a trial and this so far has given me 3 days and counting with out a crash..</p>
<p>Iv been trialing the use of this code from Jeelabs.<a href="http://jeelabs.org/2011/05/22/atmega-memory-use/"> <a href="http://jeelabs.org/2011/05/22/atmega-memory-use/" title="http://jeelabs.org/2011/05/22/atmega-memory-use/">http://jeelabs.org/2011/05/22/atmega-memory-use/</a> </a>&nbsp;&nbsp;</p>
<p>Will let you know how i get on.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-7637"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 24/11/2012 - 23:11.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/2221" title="View user profile.">alpav</a></p>
<p><em>&quot;This evening I had to restart the base (OKG with W5200) too because despite the two leds&nbsp;were blinking apparently in the normal way, the time on the GLCD was not updated.&quot;</em></p>
<p>It is possible for the Wiznet module to fail to initialise. On that basis, I think it is quite probable that it can crash, and leave the OKG still running. Glyn and I have developed a modification to allow the Wiznet to be reset under software control. If you do that, you will be able to reset and reconnect if, for example, you do not receive an acknowledgement from the server.</p>
<p>The details are here: <a href="http://wiki.openenergymonitor.org/index.php?title=Open_Kontrol_Gateway#Wiznet_Reset_Fix" title="http://wiki.openenergymonitor.org/index.php?title=Open_Kontrol_Gateway#Wiznet_Reset_Fix">http://wiki.openenergymonitor.org/index.php?title=Open_Kontrol_Gateway#W...</a></p>
<p>(My fix was slightly different, so the software is different but the result is identical).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8111"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/2221" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-2221.png" alt="alpav&#039;s picture" title="alpav&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/2221" title="View user profile.">alpav</a> on Tue, 11/12/2012 - 22:12.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>I&#39;ve been away for a bit (sickness + business travel) and I&#39;ve had to leave my investigation.</p>
<p>I&#39;ve definitely built the modification as per the detailed instructions at&nbsp;http://wiki.openenergymonitor.org/index.php?title=Open_Kontrol_Gateway#W... and I am running the sketch from github. I don&#39;t fully understand if something peculiar is needed in order &quot;to allow the Wiznet to be reset under software control&quot;. I mean: does the sketch need to be modified?</p>
<p>There has been no need to reset the base anymore since my last post (Nov 25) and looking at the emoncms logs (I am using the emoncms.org) it seems it didn&#39;t crash during this period. Still experiencing some difference between what is logged by the emoncms and what is logged by the emonGLCD. I suppose that this is due to a different success rate in getting the readings from the emonTx: it can be either the emonbase&nbsp;getting less samples than the emonGLCD (I don&#39;t think so as they&#39;re located in the very same place) or an high failure rate of the posting activity. Moreover, at morning - every morning - the emonGLCD&nbsp;displays the basefail error even though I can see both the display and the emoncms.org showing the correct data. The error disappears around 10 o&#39;clock. I couldn&#39;t collect more information so far so I&#39;ll postpone the analysis.</p>
<p>What I am more concerned of is about the emonGLCD&nbsp;freezing quite regularly. It works for approx. 7 days then it stuck up, completely frozen, display, leds, everything. It needs to be powered off and on. Then it goes for another week. I would like to avoid the solution of putting an automatic reset on a timer as I actually prefer to understand the problem and solve it.</p>
<p>I&#39;ve surfed the idea of the size of the executable so I&#39;ve been working on make it smaller optimizing the code at first (passing from around 32k&nbsp;to 31k) then just cutting out almost everything. Now my temporary sketch is just showing the first template and I&#39;ve cut out everything else, getting to 21k. Still freezing in 7 days.</p>
<p>So I came to the conclusion that the size of the executable is not the problem. I suspect that the issue might be related to the RAM usage and the size of heap and stack. I&#39;m afraid that some memory leakage may corrupt the sketch runtime and make the GLCD crash. But I don&#39;t really know how to investigate this.</p>
<p>Any idea? Am I out of track?</p>
<p>Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8112"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 12/12/2012 - 00:26.</div>
    <div class="content">
     <p>It does indeed sound like a memory leak or an overflow somewhere. There&#39;s a library function that Trystan posted about here <a href="http://openenergymonitor.org/emon/node/1370#comment-7422 " title="http://openenergymonitor.org/emon/node/1370#comment-7422 ">http://openenergymonitor.org/emon/node/1370#comment-7422 </a> that might help. I guess you&#39;d need to call it regularly and see if the number changed. I think that would tell you if you have a leak. But if you do have a leak, finding where it is it might be an entirely different matter!</p>
<p>Do you still have the History page? That runs on a weekly cycle. Something that happens every 10 s is close to overflowing an unsigned integer after 7&frac12; days. Those are the kinds of things that I would look for.</p>
<p>Going back to the first question, now that you have the Wiznet reset on an IO pin, you can trigger a reset if (say) you get no response from the server after <em>n</em> retries, or whatever you wish. What I did was reset the Wiznet during startup after the Arduino had settled, then I enabled the watchdog and arranged it so that the watchdog did <u>not</u> get reset if network comms failed. That way, the watchdog would reset the OKG sketch,&nbsp; the sketch would reset the Wiznet inside setup( ) as it restarted. But if you can determine that you only need to reset the Wiznet module, then it&#39;s possible to do only that by driving the pin it&#39;s connected to low for a short period. Copy the lines from the standard sketch:</p>
<pre class="rteindent1">
  pinMode(WizResetPin, OUTPUT);        // Reset the Wiznet module
  digitalWrite(WizResetPin, LOW);               
  delay(5);
  digitalWrite(WizResetPin, HIGH);
</pre><p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8196"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Fri, 14/12/2012 - 09:50.</div>
    <div class="content">
     <p>Same here, will try to reduce the code to avoid lock-ups.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8200"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Fri, 14/12/2012 - 12:33.</div>
    <div class="content">
     <p>Hi</p>
<p>I have an emonGLCD. I have tried most of the example sketches over the last month or so. Every one apart from the tester sooner or later freezes. I have removed all references to serial but it makes no difference. Has any one a sketch they are willing to share (that includes radio function) that runs continuously which I could use as a base for my requirement which is very simple. I want to display the temperature from just one of my temperature nodes.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8213"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Fri, 14/12/2012 - 17:44.</div>
    <div class="content">
     <p>I have a theory that emonGLCD locks up due to problems with the JeeLib library.</p>
<p>Transmission systems, particular radio ones with multiple transmitters are very tricky to code for because you can never guarantee what will be received. This is made worse in this case because of the high bit rate used (another bugbear of mine!) and the way there is nothing to prevent 2 nodes transmitting at the same time.</p>
<p>The code needs to be written defensively to take account of&nbsp;&nbsp;all possible transmission errors, I&#39;m not sure the JeeLib code is.</p>
<p>One bit that concerns me is in the interrupt routine...</p>
<p>if (rxstate == TXRECV) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uint8_t in = rf12_xferSlow(RF_RX_FIFO_READ);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (rxfill == 0 &amp;&amp; group != 0)<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rf12_buf[rxfill++] = group;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rf12_buf[rxfill++] = in;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rf12_crc = _crc16_update(rf12_crc, in);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (rxfill &gt;= rf12_len + 5 || rxfill &gt;= RF_MAX)<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rf12_xfer(RF_IDLE_MODE);<br />
	&nbsp;&nbsp;&nbsp; } else {....</p>
<p>This bit of code puts received characters into a buffer until rf12_len bytes are received or the buffer fills.</p>
<p>The problem is that rf12_len is one of the received characters in the buffer, which may itself be corrupted during transmission (remember this is before the CRC check) or some characters may simply be lost and there aren&#39;t enough received to ever reach rf12_len.</p>
<p>I think that in this situation the code will simply wait forever&nbsp;or until enough&nbsp;bytes come along to reach the rf12_len count, but then the next message will be corrupted too and so on.</p>
<p>Happy to be proved wrong about this but it doesn&#39;t look ideal to me.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8225"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 15/12/2012 - 02:04.</div>
    <div class="content">
     <p>I haven&#39;t studied the library, so I didn&#39;t want to sling mud without justification, however I&#39;d go along with the notion that the problem is more likely to be in a library. However, I&#39;m not sure you are correct with &quot;there is nothing to prevent 2 nodes transmitting at the same time&quot;. I understood there was - transmission only happens if the channel is &#39;clear&#39; - but that of course depends on both transmitters being able to hear one another!</p>
<p>The big problem as I see it is that the library cannot do much else because it tries to be totally universal and keep to a minimum size of packet. And in doing so some robustness has been sacrificed.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8271"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Sun, 16/12/2012 - 10:27.</div>
    <div class="content">
     <p>There is a test to see if anything is being received before transmission is initiated as you say but sooner or later you&#39;re going to get 2 nodes that both see a clear channel at the same time and consequently both transmit at the same time.</p>
<p>I don&#39;t think this is the main issue though, I think the more common problem will be bytes being lost or corrupted from a single transmitter.</p>
<p>I don&#39;t agree that there&#39;s not much the library can do though. A simple timeout in the receiver could prevent locking up. I have one in my own code and I haven&#39;t had any lockups.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8272"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 16/12/2012 - 11:35.</div>
    <div class="content">
     <p>In that case, would a fork of the library be our best option? Or should the suggestion be put to JeeLIb?</p>
<p>(I agree with the timeout - I meant there&#39;s little the library can do if it can&#39;t detect the other transmission).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8294"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Mon, 17/12/2012 - 09:40.</div>
    <div class="content">
     <p>This is all fairly new to me. I understood &nbsp;that the library is used in nearly all&nbsp;emon nodes but the only one I have any trouble with is emonGLCD. Is there something unique about the way the&nbsp;emonGLCD&nbsp;sketch uses the library? Or something different about the way the sketch is coded?</p>
<p>MartinR&nbsp;- Are you willing to share the code you are using. I would really like to get my emonGLCD working reliably.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8295"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Mon, 17/12/2012 - 10:43.</div>
    <div class="content">
     <p>That&#39;s indeed a good remark! My emonTx always works and sends data every 10s and I have almost never a lost packet.<br />
	I think that this happens because emonGLCD does sending and receiving. The emonTx is only sending.</p>
<p>EDIT: is the JeeLib based on this lib: <a href="http://www.das-labor.org/wiki/RFM12_library/en">http://www.das-labor.org/wiki/RFM12_library/en</a> or is it a completely from scratch written library?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8296"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Mon, 17/12/2012 - 11:08.</div>
    <div class="content">
     <p>Don&#39;t forget that there&#39;s loads of other Jeenode based projects out there (not just openenergymonitor), working successfully.&nbsp;</p>
<p>I&#39;ve got a little project running on a JeeLink which sends and receives, and which has been running for a few weeks now.</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8297"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Mon, 17/12/2012 - 11:48.</div>
    <div class="content">
     <p><em>Quote: There is a test to see if anything is being received before transmission.....</em></p>
<p>From a discussion in another forum it is clear that this test does not work (this is at least correct for the status of the Jeelib library 1 week ago). The library uses a byte read function for accessing the RFM12B chip status which does not assert chip select. Even when changing this to the working word read, the DRSSI bit in the RFM12 is reacting so slow that the information is not very useful.</p>
<p>But I do not think that this causes the problem with the emonGLCD.</p>
<p>The stack (in RAM) has nothing to do with program size (FLASH), so it is also not very likely that increasing program size will lead to stack problems.</p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8300"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Mon, 17/12/2012 - 14:45.</div>
    <div class="content">
     <p>Ian Eagland - my code won&#39;t be much use to you as it stands as it&#39;s written for my 3-phase system and uses a different bit rate, data format etc.</p>
<p>fluppie007 - that library looks interesting but it isn&#39;t written for Arduino, just generic AVR. It is different from the JeeLabs one but may need some work before it can be used as a substitute</p>
<p>What this really needs is for someone to run a hardware debugger on an emonGLCD that regularly locks up to see where the code gets stuck.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8301"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Mon, 17/12/2012 - 14:51.</div>
    <div class="content">
     <p>I just realised&nbsp;the NanodeRF also sends and receives. I have one and as far as I know it has never hung up. The main difference in the code I can see with my limited knowledge is that it has a watchdog enabled. Is adding this to the emonGLCD&nbsp;a way of solving the freezing problem?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8302"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Mon, 17/12/2012 - 15:01.</div>
    <div class="content">
     <p>Brownout detection and watchdog should always be enabled. Watchdog especially so if while loops without timeout are used in the code. And the Jeelib library code for RFM12 uses while loops in some places.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8303"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Mon, 17/12/2012 - 15:17.</div>
    <div class="content">
     <p>A watchdog should only really be used to recover from catastrophes like power glitches or atomic particle hits. They shouldn&#39;t be used&nbsp;to cover up fixable&nbsp;bugs.</p>
<p>I&#39;d be more inclined to turn the watchdog off on the NanodeRF and then see if that locks up.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8378"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Tue, 18/12/2012 - 21:37.</div>
    <div class="content">
     <p>Does this have anything to do with this: <a href="http://jeelabs.net/pub/docs/jeelib/deprecated.html">http://jeelabs.net/pub/docs/jeelib/deprecated.html</a> or <a href="http://jeelabs.net/pub/docs/jeelib/todo.html">http://jeelabs.net/pub/docs/jeelib/todo.html</a>&nbsp;?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8385"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Wed, 19/12/2012 - 01:18.</div>
    <div class="content">
     <p>Just built a script (Sunday) stripped down to the bare minimum, single screen reads and displays output from two emonTX&#39;s each with 3 CT&#39;s on them, it has now been running for 2 days without a hitch - that&#39;s 1 1/2 days longer than it&#39;s ever run before :)</p>
<p>One emomTX is monitoring consumed power and generated power (PV ) the other is monitoring the output from each of the three Solar PV inverters (14kW system :) )&nbsp; I&#39;ve included the LED colour change bit of the script.</p>
<p>emonGLCD no longer freezes, however occasionally it loses / doesn&#39;t get / ignores the input from the 2nd emonTX monitoring the individual inverters, - sometimes for up to 8 hours, rest is running fine, and then suddenly it gets a reading and starts updating regularly.</p>
<p>So, a small script (22k) appears to be &#39;stable&#39; though still not reliably reading multiple emonTX&#39;s</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8386"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1747" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1747" title="View user profile.">Petrik</a> on Wed, 19/12/2012 - 05:00.</div>
    <div class="content">
     <p>With wdt my emonglcd has been running over a month without hanging. Currently 3xEmonTX including several 1-wire sensors and 2xFunky are messured. This did not remove the potential problems, but improved usability.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8387"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Wed, 19/12/2012 - 07:08.</div>
    <div class="content">
     <p>Spoke too soon, stopped / hung / froze 2 hours later ....</p>
<p>@Petrik, how have you got / kept yours running would you be prepared to share your script?&nbsp;<br />
	Also what are the dates of the libraries?<br />
	What do you mean by &#39;With wdt&#39;?</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8388"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Wed, 19/12/2012 - 08:14.</div>
    <div class="content">
     <p>I think he means the watchdog timer. I&#39;m also interested in the modified code.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8390"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Wed, 19/12/2012 - 08:25.</div>
    <div class="content">
     <p><em>Quote: A watchdog should only really be used to recover from catastrophes like power glitches or atomic particle hits. They shouldn&#39;t be used&nbsp;to cover up fixable&nbsp;bugs.</em></p>
<p>Ok, then I just have a very different sight on the use of a watchdog (even if I am absolutely sure to get up in time every morning, I <strong>can</strong> use an additional alarm clock. If I than wake up due to the ringing, I know that something &#39;strange&#39; has happened). I think it is not very clever to not use a safeguard, if it is available (clearly not meant to offend you, Martin!). The reset cause can be read out after startup of the program and a watchdog reset can be flagged to the user or stored in EEPROM for later analysis. Why not use this additional method to find a possible reason for the freezes?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8391"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Wed, 19/12/2012 - 08:44.</div>
    <div class="content">
     <p>I bet it turns out to be an if (a=b) problem (as opposed to ==). Seems to be the main cause of most of my bugs ;)</p>
<p>&nbsp;</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8411"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Wed, 19/12/2012 - 14:15.</div>
    <div class="content">
     <p>I wasn&#39;t trying to say you shouldn&#39;t use a watchdog J&ouml;rg. What I was trying to say was that if you&#39;ve got a design fault in either software or hardware, which I think we clearly have here, then masking it by resetting the processor every time it occurs isn&#39;t the answer. Although I can fully understand why people want to use it so that their particular system keeps going.</p>
<p>Your example of using the watchdog to track down a problem is fine, you should use every tool you have available. (I wasn&#39;t offended at all by the way).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8489"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Thu, 20/12/2012 - 13:43.</div>
    <div class="content">
     <p>Something stupid probably, but could it be that the LCD controller gives &#39;bad&#39; signals to the Atmel MCU and as a result, it freezes?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8493"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Thu, 20/12/2012 - 15:03.</div>
    <div class="content">
     <p>Hi guys, I&#39;ve just dipped back into this thread. Thanks for continuing to debug this. It&#39;s only recently since the addition of the icons that the freezing seems to have started. I have had an emonGLCD&nbsp;running for 6 months or so in my house without a reset before the icons were introduced. Since running the sketch with the icons I too have experienced lockups every week or so. This is a shame since the icons are very nice!&nbsp;</p>
<p>&nbsp;</p>
<p>It sounds like we have hit the upper ceiling of the atmega328. In the future maybe a&nbsp;more powerful micro could be used. In the meantime I would be happy to sacrifice the history page and power view pages in return for having the icons, hopefully this will be stable. I&#39;ll implement it on my home emonGLCD when I get home next week and see how it goes. Maybe it would be possible to optimise the way the icons ore implemented or simplify them.&nbsp;Expect an update in the new year. Have a good Christmas!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8512"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1747" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1747" title="View user profile.">Petrik</a> on Thu, 20/12/2012 - 20:59.</div>
    <div class="content">
     <p>Here is a simple way how to add WDT to emonglcd... just these three bolded lines needs to be added...</p>
<p>&nbsp;</p>
<p>#include &lt;JeeLib.h&gt;<br />
	#include &lt;GLCD_ST7565.h&gt;<br />
	<strong>#include &lt;avr/wdt.h&gt;&nbsp;</strong></p>
<p>....</p>
<p>void setup()<br />
	{<br />
	<strong>wdt_enable(WDTO_8S);</strong></p>
<p>....</p>
<p>void loop()<br />
	{</p>
<p>....</p>
<p><strong>wdt_reset();</strong><br />
	if ((millis()-slow_update)&gt;10000)<br />
	&nbsp; {</p>
<p>...</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8519"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 21/12/2012 - 00:03.</div>
    <div class="content">
     <p>Yes, but as MartinR says, it is better to solve the problem than to cover it up. If you have daily totals stored and displayed in your emonGLCD, resetting via the watchdog destroys those.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8526"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Fri, 21/12/2012 - 09:27.</div>
    <div class="content">
     <p>Iv been playing around for the last few weeks with my GLCD.. &nbsp;It seems if you disable the LDR&nbsp;/ PWM LEDs&nbsp;it stays up for longer... Iv still get lockups just not as many..</p>
<p>I did experence&nbsp;these lockups when i first tested the PWM of the leds.. I wonder if other could test this.</p>
<p>Im still running the extra page and the icons in my version at the mo.. will try to remove more later to see if i can get it never to crash.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8533"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Fri, 21/12/2012 - 12:18.</div>
    <div class="content">
     <p>Last night I took Glyn&#39;s advise and removed the icons from the functions and also removed&nbsp;the icons.ino file. I&#39;m curious now&nbsp;how long it will stay up :-).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8723"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Thu, 27/12/2012 - 20:50.</div>
    <div class="content">
     <p>Sadly, it still locks up. I&#39;m going to add the Watchdog timer in the code.</p>
<p>EDIT: Watchdog code added and I discovered something weird. When I touch the emonGLCD&#39;s&nbsp;&nbsp;crystal or 2 ceramic capacitors next to the crystal. The arduino resets or shows really strange behaviour (display artefarcts, backlight falls out). Could this be the reason why emonGLCD locks up from time to time?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8749"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Sat, 29/12/2012 - 23:14.</div>
    <div class="content">
     <p>I&#39;ve now got a small code running that monitors two emonTX&#39;s each with 3 CT&#39;s monitoring a solar PV installation (3 inverters), it has still been locking up, so I&#39;ve just removed the LED code as well. (single screen, no history or power screens)</p>
<p>No Watchdog running as yet.</p>
<p>My emonGLCD was one of those where I let the two capacitors reconfigure themselves as I had a &#39;fading&#39; LCD.</p>
<p>When I reprogram it, it won&#39;t properly reboot by powering down and up. Doing that via the usb power, it starts up and then hangs after 10 seconds (I&#39;ve got a small counter in the sketch), to restart it properly I have to attach the programming header (connected to the USB port PC or not doesn&#39;t matter) as I attach it it reboots, remove the header it then runs OK (save the locking up after about 24 - 36 hours) I&#39;ll leave it running to see how long it goes for without &#39;hanging&#39;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8788"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 31/12/2012 - 10:32.</div>
    <div class="content">
     <p><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--></p>
<p><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
</style>
<![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
</style>
<![endif]--></p>
<p class="MsoNormal">I have two emonGLCD. Unit A has been in continuous operation for a couple of weeks and has never crashed. Unit B was assembled on 29/12/2012 and crashed overnight. It was power cycled and within one hour had crashed again.</p>
<p class="MsoNormal">These units are identical build states running the same software which is the standard code with nothing removed but some stuff added. The only difference I could see was in the power supply. Unit A was using an old switch mode Alcatel phone charger that gave an output on load of 5.09V. Unit B was using an Emerson switch mode PSU from OEM shop which gave an output of 5.1V on load.</p>
<p class="MsoNormal">Checking the noise on the 5V rail the Alcatel has a very small noise floor which a &lsquo;scope at 50mV/div could not resolve. The OEM PSU has a 50mV 500Hz component which really should not be a problem but on the other hand should not be there.</p>
<p class="MsoNormal">Looking at the emonGLCD schematic there is no large input cap on the 5V rail. Checking the emonTx it is the same circuit.</p>
<p class="MsoNormal">The obvious test was to run unit A on unit B&rsquo;s PSU. This was done last night and this morning unit A had crashed.</p>
<p class="MsoNormal">As an experiment I added a 47uF electrolytic to the 5V rail on both units and measured the noise level. It is now a flat line using either PSU.</p>
<p class="MsoNormal">Fortunately next to the mini USB connector there is a very small space with available pads for a small electrolytic.<span style="mso-spacerun:yes">&nbsp; </span>I don&rsquo;t know if this is the answer to the GLCD crashing problem and I only have a sample of two units to play with but if anyone else wishes to try this I would be interested to hear the result.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8791"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Mon, 31/12/2012 - 12:23.</div>
    <div class="content">
     <p>That&#39;s very interesting! I have to say, with the watchdog code it&#39;s running 4 days in a row now. But as stated, it resets the kwh from that day. So I&#39;m very keen to try out the 47&micro;F cap on the 5V rail. A bigger cap (100/470 &micro;F)&nbsp;is no problem I guess?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8792"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 31/12/2012 - 12:34.</div>
    <div class="content">
     <p>Fluppie said:</p>
<p><em>A bigger cap (100/470 &micro;F)&nbsp;is no problem I</em> guess?</p>
<p>No problem electrically but you may have a problem finding room for it.</p>
<p>I thought my findings worth posting but we have yet to prove if this is really the problem. Your contribution will be a great help.</p>
<p>Both units still OK here.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8794"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Mon, 31/12/2012 - 14:43.</div>
    <div class="content">
     <p>Appears that I have +- 50 47&micro;F caps left from a DIY amplifier a few years ago. The mod was easy for me because I soldered female headers to the Jeeport and the PWR/SER/I2C &quot;port&#39;. So, just a&nbsp;male header with the 47&micro;F cap soldered to it and plug it in the emonGLCD :-). I&#39;m very curious if it will solve the freezes!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8795"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Mon, 31/12/2012 - 21:23.</div>
    <div class="content">
     <p>Im not sure the cap is going to solve it.. Iv added one to mine (only got a 25v 10uF so this may not be enough) just to test but mine is powered by a lipo battery and still crashes..&nbsp;</p>
<p>iv added some delays in, in places to see if this helps.. Will report back later.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8796"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 31/12/2012 - 21:55.</div>
    <div class="content">
     <p>My guess is that the cap will not fix the problem&nbsp; but now we have four units running the same test which is good.</p>
<p>Let&#39;s see what tomorrow brings.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8799"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Tue, 01/01/2013 - 02:41.</div>
    <div class="content">
     <p>I&#39;ve just added the 47&micro;F capacitor across the power and ground connections on the JeePort, - we&#39;ll see.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8800"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Tue, 01/01/2013 - 08:35.</div>
    <div class="content">
     <p>Last night my wife&#39;s unit (unit A) crashed twice and was locked up again this morning. The new unit was still working this morning.</p>
<p>Given that my wife&#39;s unit never crashed before she blames the little blue thing that I added :(</p>
<p>Unit A was running on the Alcatel PSU and unit B on the Emerson PSU.</p>
<p>I now have the two units in the same room&nbsp; running from the same wall socket but there is no evidence so far to support the 5V noise idea. However, unit A went for about two weeks without ever crashing and now it crashed three times in 24 hours. If it continues to do that I have no choice but to remove the cap.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8801"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Tue, 01/01/2013 - 08:53.</div>
    <div class="content">
     <p>If one of your units crashes again it might be worth trying switching the other one off and then seeing if it happens again just to see if it&#39;s transmission related as I suggested above.</p>
<p>Are both your emonGLCDs still on the same node ID?</p>
<p>oh - and Happy New Year everyone :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8802"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Tue, 01/01/2013 - 09:06.</div>
    <div class="content">
     <p>my unit crashed at 0:59 as reported on the LCD.</p>
<p>Still running from a battery (lipo) and had the added cap 25V&nbsp;10uF</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8803"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Tue, 01/01/2013 - 09:17.</div>
    <div class="content">
     <p>Is it worth trying one with a WRONG group ID (i.e. so it gets no data).&nbsp;</p>
<p>This would prove whether it&#39;s related to the processing of the data received.</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8804"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Tue, 01/01/2013 - 09:36.</div>
    <div class="content">
     <p>Just crashed again. &nbsp;Less than 10 mins of use.&nbsp;</p>
<p>What type of solar has everyone got.&nbsp;</p>
<p>Eg type 1 or type 2. This may help if its related to one set of code</p>
<p>I&#39;m type 2. &nbsp;No time date being sent to the glcd just power from the tx.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8805"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Tue, 01/01/2013 - 10:17.</div>
    <div class="content">
     <p>Type 2 here.</p>
<p>Both GLCD running same code so I guess same node ID. I will look into that later today.</p>
<p>I ran an un-calibrated noise injection test this morning. Both GLCD plugged into an extension socket with about 1m of cable. The extension socket plugged into a 30m extension socket and a 12V Weller soldering iron (which has a transformer) was plugged into the long extension lead. The mains side of the Weller was then repeatedly switched on and off.</p>
<p>This test has been known to bring susceptible equipment to it&#39;s knees fairly quickly but in this case neither GLCD crashed although there did appear to be the very occasional loss of comm&#39;s.</p>
<p>I think the PSU idea is a red herring but I need to get more data on how often either or both units are crashing before I make further changes otherwise I won&#39;t know what the effect is.</p>
<p>Incidentally, when the crashes occur I check that the backlight control is not working, LED control is not working, LCD is frozen and buttons are not responded to.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8807"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Tue, 01/01/2013 - 10:50.</div>
    <div class="content">
     <p>I&#39;m running &#39;Type 1&#39; solar, - I&#39;ve also got three Inverters, so run two emonTX&#39;s though the code I&#39;m running is stripped right down - single screen only display total gen, total consumption, calculated difference, plus the output from each of the three inverters.</p>
<p>If you want to have a look it the code - it&#39;s here: <a href="http://worcesterrenewables.com/openenergymonitor/HomeEnergyMonitor_868_dev_all_emontx_solar_sm_noled.zip" title="http://worcesterrenewables.com/openenergymonitor/HomeEnergyMonitor_868_dev_all_emontx_solar_sm_noled.zip">http://worcesterrenewables.com/openenergymonitor/HomeEnergyMonitor_868_d...</a></p>
<p>(On the Display, CT3 on Node 10 currently displays the &#39;difference&#39; )</p>
<p>Been going for 8 hours so far, though that is not uncommon..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8808"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Tue, 01/01/2013 - 11:28.</div>
    <div class="content">
     <p>Here&#39;s an interesting phenomenon, one of the pieces of code in my script is a timer that simply starts from zero when rebooted, before I installed the capacitor, i had occasionally rebooted it by plugging and unplugging the programming&nbsp; usb adaptor onto the emonGLCD (it didn&#39;t need to be connected to the pc, just the bare adaptor), on some occasions it brought it back to lfe without resetting the timer, on others it did reset.</p>
<p>Also if I just power it up from the USB power supply it ALWAYS gets to 10 seconds and then hangs, I either have to start it connected to the PC and then swap supplies &#39;live&#39; or power it up and reboot as above.</p>
<p>I saw a similar effect by putting the capacitor across the programming header before soldering it to the JeePort, however it still needs the reboot with the soldered in capacitor....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8811"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Tue, 01/01/2013 - 12:42.</div>
    <div class="content">
     <p>That may be a different problem as they don&#39;t normally hang after exactly 10s. Should be a lot easier to debug though if it is repeatable.</p>
<p>Are you transmitting temperature every 10 seconds as in the standard code? &nbsp;If so I would think that is the first place to look.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8815"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Tue, 01/01/2013 - 15:33.</div>
    <div class="content">
     <p>Martin said:</p>
<p><em>If one of your units crashes again it might be worth trying switching the other one off and then seeing if it happens again just to see if it&#39;s transmission related as I suggested above.</em></p>
<p>This test (one switched off) has now been running for four hours without a problem but more importantly I realise now that I have only ever seen a failure when two units are running. When one of the pair crashes the other seems to keep going OK.</p>
<p>I think Martin could be on to something here. - Test continues.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8820"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Tue, 01/01/2013 - 21:27.</div>
    <div class="content">
     <p>Mine is still running. approx. 30 hours now. My RFM2Pi base station doesn&#39;t send out time. So my emonGLCD only transmits the temperature and receives from emonTx.</p>
<p>Standard power+temperature sketch, group id 210 and node id 20.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8821"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Tue, 01/01/2013 - 22:57.</div>
    <div class="content">
     <p>Hanging at 10 secs on start up &#39;fixed&#39; temporarily by remarking out the transmission of temperature from emonGLCD, however it still doesn&#39;t find / read the data from the emonTX&#39;s when started up that way. It doesn&#39;t;t matter which power supply I use, so long as it has the USB programming interface dongle and powers via the programming header, i.e. I can use the usual USB power supply and it starts up properly., a straight through cable and it doesn&#39;t....</p>
<p>Still going string 4 hours after reboot we&#39;ll see in the morning..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8825"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Wed, 02/01/2013 - 08:10.</div>
    <div class="content">
     <p><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--></p>
<p><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
</style>
<![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
</style>
<![endif]--></p>
<p class="MsoNormal">I have a &lsquo;reliable&rsquo; failure condition. If both GLCD units are running then one but never both will fail within a few hours. The GLCD&rsquo;s now have different node ID&rsquo;s (20 &amp; 25)</p>
<p class="MsoNormal">Yesterday I removed the temperature transmission code from both GLCD. Now both units have run for 10 hours without failing. They have not done that before.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8826"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Wed, 02/01/2013 - 08:46.</div>
    <div class="content">
     <p>Everything I&#39;ve heard so far still seems to point to a problem with the JeeLib library. As fluppie007 has confirmed you can still get problems with a single transmission, as&nbsp;it can still be corrupted, it&#39;s just more likely with multiple transmitters. I have a test running which will hopefully prove this one way or the other.</p>
<p>Avontech - your problem sounds like a reset issue since the reset line is connected to the header but not the USB socket. It may be that the fuses in the ATmega328 aren&#39;t programmed correctly for the internal reset.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8827"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Wed, 02/01/2013 - 08:50.</div>
    <div class="content">
     <p>Is anyone friends with&nbsp;Jean-Claude Wippler? If JeeLib&nbsp;is the current prime suspect it might be worth getting his input.</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8829"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Wed, 02/01/2013 - 09:33.</div>
    <div class="content">
     <blockquote><p><em>Quote: When I touch the emonGLCD&#39;s&nbsp;&nbsp;crystal or 2 ceramic capacitors next to the crystal.The arduino resets or shows really strange behaviour.</em></p>
</blockquote>
<p>I do not know how the fuses are normally set for arduino hardware, but such a behavior is typical for ATmegas if the fuses are <strong>not</strong> set to &#39;full swing&#39; crystal (which will increase the drive and therefore amplitude of the crystal oscillations).</p>
<p>But this has nothing to do with this threads main problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8831"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Wed, 02/01/2013 - 10:53.</div>
    <div class="content">
     <p>Just to add my experience. I have tried every thing suggested in this thread except adding the capacitor. My emonGLCD always freezes after random periods. Three days ago I commented out the transmit code in the GLCD firmware. Still running without any problems and I think this is the longest it has ever run. Way back I think&nbsp;Glyn or Trystan&nbsp;said they had an earlier version of the code working for months prior to adding the icons. Does any one know if this earlier version include the transmit code?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8833"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/998" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="DaveLloyd&#039;s picture" title="DaveLloyd&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/998" title="View user profile.">DaveLloyd</a> on Wed, 02/01/2013 - 11:31.</div>
    <div class="content">
     <p>Just to confirm these observations. My two emonGLCDs (one v1.3 and one V1.4) had been working reliably for many months. I updated them to new sketches including the icons and templates and now they are both suffering from this freeze issue. If&nbsp;I don&#39;t restart the frozen emonGLCD the other emonGLCD will run for several days. They have different node IDs.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8861"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Thu, 03/01/2013 - 21:25.</div>
    <div class="content">
     <p>Right iv managed to get mine to now to run for 3+ days straight.. A record, It seems to manage a max of 1.5days and that was once.</p>
<p>I tried paying around with icons. As this for me seems to be the time it lost the stability. No real success though even removing them.. But when looking at the code there are lots of variables&nbsp;of int;s where most can be byte.. (well i think they can. eg why is the hr and min and int, a byte (0-255) should be fine) so iv changed them and removed some dupe code see below for an example.</p>
<p>all changes are commented (i hope) // RW&nbsp;ADD should you just want to look</p>
<p>eg</p>
<p>&nbsp; &nbsp; if (SolarPV_type==1){<br />
	&nbsp;&nbsp;&nbsp; usekwh += (emontx.power1 * 0.2) / 3600000;<br />
	&nbsp;&nbsp;&nbsp; //genkwh += (emontx.power2 * 0.2) / 3600000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //See Below<br />
	&nbsp;&nbsp;&nbsp; }<br />
	&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp; if (SolarPV_type==2){<br />
	&nbsp;&nbsp;&nbsp; usekwh += ((emontx.power1 + emontx.power2) * 0.2) / 3600000;<br />
	&nbsp;&nbsp;&nbsp; //genkwh += (emontx.power2 * 0.2) / 3600000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //See Below<br />
	&nbsp;&nbsp;&nbsp; }<br />
	&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp; genkwh += (emontx.power2 * 0.2) / 3600000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // moved from solarpv type</p>
<p>anyway if anyone else wants to take a look or even try my hack at it please do.. (you will need to change the solar type and maxgen</p>
<p><a href="https://github.com/rob-walker/EmonGLCD/tree/master/emonGLCD_SolarPV" title="https://github.com/rob-walker/EmonGLCD/tree/master/emonGLCD_SolarPV">https://github.com/rob-walker/EmonGLCD/tree/master/emonGLCD_SolarPV</a></p>
<p>Please ignore&nbsp;display.ino and serial.ino &nbsp;I&#39;m not great at github and cant work out how to delete files..</p>
<p>rob</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8867"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Thu, 03/01/2013 - 21:54.</div>
    <div class="content">
     <p>Rob, does this modification really decrease the code size for you? This certainly is redundant code, but the compiler should recognize this and optimize it.</p>
<p>I think that this code is written for clarity and is not really optimal.</p>
<p>It does not make sense to test SolarPV_type for equality with different values, you would normally use an else if instead (a define would be even better).&nbsp;</p>
<p>Then the multiplication by 0.2 and subsequent division by 3600000 could be replaced by a single division by (5*3600000). This should really decrease code size.</p>
<p>Then a few lines further down there are two for loops which can be replaced by one.</p>
<p>And, and, and. But does this really help to increase the stability of the code?</p>
<p>There are at least two real &#39;bugs&#39; in the code (even if they might not be very serious):</p>
<p>- After commenting the code for page 4, the variable page should only be increased to three when a button is pressed.</p>
<p>- After reception of a message from node 15, emontx still points to the receive buffer and if evaluated (e.g. emontx.power1) can give completely wrong results.</p>
<p>But all this should not really be the reason for freezing.</p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8869"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Fri, 04/01/2013 - 00:19.</div>
    <div class="content">
     <p>Sadly the 47&micro;F doesn&#39;t solve the problem. So far only adding the watchdog timer worked. So maybe as stated above, it could be due to a change in JeeLib.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8874"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Fri, 04/01/2013 - 08:22.</div>
    <div class="content">
     <p>Yes it does but not by much..I&#39;m not sure reducing the size of the code is the problem. If it fits on the chip, its fine as it would not upload otherwise.</p>
<p>It was more of when going through it to look for variables&nbsp;of type int to change to byte to reduce the ram size, as if it runs out of ram you get some very weird results. Looking at&nbsp;http://jeelabs.org/2011/05/22/atmega-memory-use/ showed were close to using it all so i gave it a try.&nbsp;</p>
<p>In this section were using 18 bytes of ram. where my version were using 10... &nbsp;<em><u><strong> I THINK.!!!!</strong></u></em></p>
<pre>
/*#define emonGLCDV1.3              // un-comment if using older V1.3 emonGLCD PCB - enables required internal pull up resistors. Not needed for V1.4 onwards
const int SolarPV_type=2;           // Select solar PV wiring type - Type 1 is when use and gen can be monitored seperatly. Type 2 is when gen and use can only be monitored together, see solar PV application documentation for more info
const int maxgen=1800;              // peak output of soalr PV system in W - used to calculate when to change cloud icon to a sun
const int PV_gen_offset=5;          // When generation drops below this level generation will be set to zero - used to force generation level to zero at night
const int greenLED=6;               // Green tri-color LED
const int redLED=9;                 // Red tri-color LED
const int LDRpin=4;                 // analog pin of onboard lightsensor
const int switch1=15;               // Push switch digital pins (active low for V1.3, active high for V1.4)
const int switch2=16;
const int switch3=19;
*/</pre><pre>
// Changed most from Int to Byte.  RW ADD</pre><pre>
//#define emonGLCDV1.3              // un-comment if using older V1.3 emonGLCD PCB - enables required internal pull up resistors. Not needed for V1.4 onwards
const byte SolarPV_type=2;          // Select solar PV wiring type - Type 1 is when use and gen can be monitored seperatly. Type 2 is when gen and use can only be monitored together, see solar PV application documentation for more info
const int maxgen=1800;              // peak output of soalr PV system in W - used to calculate when to change cloud icon to a sun
const byte PV_gen_offset=5;         // When generation drops below this level generation will be set to zero - used to force generation level to zero at night
const byte greenLED=6;              // Green tri-color LED
const byte redLED=9;                // Red tri-color LED
const byte LDRpin=4;                // analog pin of onboard lightsensor
const byte switch1=15;              // Push switch digital pins (active low for V1.3, active high for V1.4)
const byte switch2=16;
const byte switch3=19;</pre><p>I&#39;m not a programmer so that&#39;s why i&#39;m asking. There may well be good reasons to use ints. but so far the code runs and works for me at least and has not hung. Running 4 days now. That is real progress for me.</p>
<p>Iv also changed varables in other places but again it would be best to have some one else look over it and give it a once over..&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8876"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Fri, 04/01/2013 - 08:55.</div>
    <div class="content">
     <p>If it was a code size issue I&#39;d normally expect the crash timing to be repeatable, not random.</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8877"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Fri, 04/01/2013 - 09:09.</div>
    <div class="content">
     <p>Paul i agree, &nbsp;if&nbsp;&nbsp;it was code size it would not upload or crash at the same time.. But with RAM you really dont know whats going on..&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8878"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Fri, 04/01/2013 - 09:39.</div>
    <div class="content">
     <p>Hi</p>
<p>I am sure it is not the firmware code size (although it may be lack of RAM) . I am using a very small sketch as I am only displaying outside temperature from one emonTX. It was always locking up. I removed transmit code from the GLCD firmware as mentioned a couple of days ago. Still running.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8879"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Fri, 04/01/2013 - 09:41.</div>
    <div class="content">
     <p>@ Rob: All these values are declared as const, so should not normally use RAM but Flash!</p>
<p>This might be the reason why your code size decreased.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8880"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Fri, 04/01/2013 - 10:04.</div>
    <div class="content">
     <p>The transmit code is very kludgy, and it calls sendStart() when it shouldn&#39;t because of a horrible hack loop detection. This is something that Brian D pointed out to me the other day.</p>
<p>Perhaps if someone sorted this mess out the problems might go away?</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8881"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Fri, 04/01/2013 - 10:12.</div>
    <div class="content">
     <p>Paul,</p>
<p>are you talking about the cansend() function? This can (and should finally!) be solved by commenting out the RFM12 byte read. But this does not have any deeper impact on memory usage and should not freeze the unit!?!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8882"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Fri, 04/01/2013 - 10:42.</div>
    <div class="content">
     <p>@JBecker</p>
<p>Ahh thanks. That would explain the code side..</p>
<p>Iv also changed some in the main code also.. so these must me for the RAM.</p>
<pre>
//int hour = 0, minute = 0;
byte hour = 0, minute = 0;          // RW ADD

//int node_id = (rf12_hdr &amp; 0x1F);
byte node_id = (rf12_hdr &amp; 0x1F);      // RW ADD

//int i; for (i=6; i&gt;0; i--) gen_history[i] = gen_history[i-1];
byte i; for (i=6; i&gt;0; i--) gen_history[i] = gen_history[i-1];    // RW ADD

//Int LDRbacklight=map(LDR, 0, 1023, 25, 250);
byte LDRbacklight=map(LDR, 0, 1023, 25, 250);</pre><p>There are others as well but maybe this is just enough to get it stable..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8887"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 04/01/2013 - 13:54.</div>
    <div class="content">
     <p>A long while ago, I read somewhere that the size of the stack isn&#39;t checked, and it grows downwards from the top of RAM towards the heap/global data. Now if the stack overwrites the data on the heap, you get junk data. If the data overwrites the stack, methinks a crash is inevitable.</p>
<p>I&#39;ve just hit Google with the problem. This <a href="http://blog.wickeddevice.com/?p=359" title="http://blog.wickeddevice.com/?p=359">http://blog.wickeddevice.com/?p=359</a> isn&#39;t the original source, but it clearly explains the potential problem and it might help.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8888"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Fri, 04/01/2013 - 14:35.</div>
    <div class="content">
     <p>The whole thing definitely &#39;smells&#39; like a stack problem. There are some suggestions on the Arduino site to check the available RAM space at runtime. This should give a clear hint.</p>
<p>Passing loads of parameters to functions like in draw_solar_page() eats up a lot of stack space (here more than 40 bytes). It would help to use only the variable size needed (hours and minutes fit into bytes and do not need to be float). Better still to pass a pointer to a structure with all the values.</p>
<p>In draw_solar_page() and the other template functions, a char array with 50 bytes (char str[50]) is reserved for the string functions. This is also much more than needed ( I think) and could also be decreased (not clear if it helps, depends a bit on how the compiler handles this).&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8890"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 04/01/2013 - 15:37.</div>
    <div class="content">
     <p><em>(char str[50])</em> ... <em>is also much more than needed</em>. Correct. It seems as if 50 has been used throughout simply because it is &quot;safe&quot; and there&#39;s no risk of a string overflow. 30 is enough in most cases, even less in some others. All that needs to be done is find the maximum number of characters written in each function and add one. Even better, as many of these are purely temporary and only for display formatting, it doesn&#39;t need to be a local string anyway and one common global temporary string could be used, given a little care.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8893"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Sat, 05/01/2013 - 17:20.</div>
    <div class="content">
     <p>Added the capacitor AND removed the temperature transmit data code, been running constantly now for just under 5 days with no lockups.</p>
<p>[However (and I&#39;ll start another thread on this) I can&#39;t get my OKG with ENC28J60<span style="display: none;">&nbsp;</span> base to work at all now I&#39;ve got two emonTX&#39;s running consistently. Stop one of them and it runs fine...Base code is the NanodeRF_mutinode ]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8901"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sun, 06/01/2013 - 09:15.</div>
    <div class="content">
     <p><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--></p>
<p><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
</style>
<![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
</style>
<![endif]--></p>
<p class="MsoNormal">This emonGLCD bug has proved difficult to trace because as MartinR indicated way back in the thread we really required someone to put a hardware analyser on and establish exactly what happens. The popular speculation is that the processor crashes and the proposed reason is a stack overflow. This could be true or there may simply be a routine that fails to return if called in the wrong way. My guess is that the latter is true.</p>
<p class="MsoNormal">To test all of this I built a test platform that was capable of demonstrating problems associated with the use of the rfm12. This led me to realise that the frequency at which errors occurred were related to the combined frequency at which my units are programmed to transmit. Let me explain.</p>
<p class="MsoNormal">My emonTx is set to transmit once every 3 sec and my two GLCD transmit temperature once every 10 sec. If only one GLCD is running then there are no lockup problems. If both GLCD and the emonTx are running then one or other of the GLCD will lockup fairly quickly but after that the second GLCD will continue without lockup.</p>
<p class="MsoNormal">Using the above timings on my test platform I have demonstrated that the two GLCD will eventually become aligned with their transmission times. They do not synchronise but they simply drift into alignment because they are running at the same repetition frequency and there is a small difference in their components. When this happens the call to rf12_canSend() will not return true until the two units have drifted apart again and this can take minutes.</p>
<p class="MsoNormal">This should not be a problem because at first glance the code is written to deal with this. But is it? This is the significant line:</p>
<p class="MsoNormal">int i = 0; while (!rf12_canSend() &amp;&amp; i&lt;10) {rf12_recvDone(); i++;}<span style="mso-spacerun:yes">&nbsp; </span>// if ready to send + exit loop if it gets stuck as it seems to</p>
<p class="MsoNormal">Clearly the original author realised there was some sort of problem here and put in the i++ kludge but instead of providing a break the code is allowed to fall through to the next line which is:</p>
<p class="MsoNormal">rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// send emonglcd data</p>
<p class="MsoNormal">Now we are in trouble because we are violating the following JeeLabs statement:</p>
<p>The <a href="http://oldred.jeelabs.net/projects/cafe/wiki/Rf12_sendStart%28%29">rf12_sendStart()</a> function may only be called in two very specific situations:</p>
<p style="margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo1;<br />
tab-stops:list 36.0pt"><span style="font-size:10.0pt;<br />
mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:Symbol;<br />
mso-bidi-font-family:Symbol"><span style="mso-list:Ignore">&middot;<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span>right after <a href="http://oldred.jeelabs.net/projects/cafe/wiki/Rf12_recvDone%28%29">rf12_recvDone()</a> returns true - used for sending replies / acknowledgements</p>
<p style="margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo1;<br />
tab-stops:list 36.0pt"><span style="font-size:10.0pt;<br />
mso-bidi-font-size:12.0pt;font-family:Symbol;mso-fareast-font-family:Symbol;<br />
mso-bidi-font-family:Symbol"><span style="mso-list:Ignore">&middot;<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span>right after <a href="http://oldred.jeelabs.net/projects/cafe/wiki/Rf12_canSend%28%29">rf12_canSend()</a> returns true - used to send requests out</p>
<p>As a test I changed the frequency of transmission for my three units to reduce the chance of repetitive alignment of transmissions. The best way to achieve this is to set each unit to a different prime number so I set the emonTx to 3, GLCD a to 5 and GLCD b to 7.</p>
<p>Last night using those numbers my system ran all night with no problems for the first time and with temperature sending restored.</p>
<p>This is good convincing stuff but has not dealt with the fr12_recvDone(); kludge above.</p>
<p>I decided to stop here because if someone else can confirm that this is indeed the correct explanation of the problem then it will make sense for the kludge to be dealt with properly and an up issue of the code made.</p>
<p>It would make sense for the code to have a #define that will allow for multiple GLCD&rsquo;s and allocate node ID&rsquo;s and transmission intervals according to GLCD identity. This may be tricky as the base and the emonTx rates should be considered.</p>
<p>Sorry it&#39;s a bit long.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8902"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Sun, 06/01/2013 - 10:47.</div>
    <div class="content">
     <p>Great work Brian.</p>
<p>Even with your prime numbers you are still going to get occasional clashes, although the frequency (and thus time between hangs) should be greatly reduced.</p>
<p>As for the kludge, I suggest:</p>
<p>int i = 0; while (!rf12_canSend() &amp;&amp; i&lt;10) {rf12_recvDone(); i++;}<br />
	rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	rf12_sendWait(0);</p>
<p>Should become:</p>
<p>int i = 0;&nbsp;<br />
	while (!rf12_canSend() &amp;&amp; i&lt;10) {<br />
	&nbsp; &nbsp; &nbsp; rf12_recvDone();<br />
	&nbsp; &nbsp; &nbsp; i++; }</p>
<p>if (i&lt;10) {<br />
	&nbsp; &nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	&nbsp; &nbsp; rf12_sendWait(0); }</p>
<p>&nbsp;</p>
<p>That way the send only happens if the &#39;kludge&#39; has exited normally.</p>
<p>This should even (hopefully) stop the crashes even without the prime numbers, although this will of course result in data being lost because of the send clashes.</p>
<p>
	P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8905"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Sun, 06/01/2013 - 13:45.</div>
    <div class="content">
     <p>Good findings, Brian!</p>
<p>So the major problem seems to be that two nodes try to or are really transmitting simultaneously....</p>
<p>One of the unsolved problems of the jeelib RFM12 code is, that rf12_canSend() does not really work as intended. It should actually look for RF &#39;in the air&#39; and prevent that a transmission is started when another node is already transmitting. But this test simply does not work (this is known since quite some time but has not yet been solved or cannot be solved easily). So rf12_canSend() does <strong>not </strong>really test if another node is already sending and therefore does <strong>not </strong>prevent two nodes from sending simultaneously (which will at least destroy both messages with very high probability).</p>
<p>One of the big questions is still why this situation will result in freezing one of the two nodes code execution!?!</p>
<p>What you and Paul have done is a good workaround, but it would still be interesting to know the underlying reason for the freeze.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8906"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 06/01/2013 - 13:57.</div>
    <div class="content">
     <p>I&#39;ve not experimented nor studied the protocol in detail, but Brian, it sounds as if you&#39;ve got a good explanation there.</p>
<p>Putting my systems engineer&#39;s hat on, I think there&#39;s a case for retaining the existing protocol for &quot;simple&quot; (and battery powered) systems, but I think a completely new approach is called for when you have a &quot;complex&quot; system.</p>
<p>The problem isn&#39;t a new one. One technique that is generally used in situations like this is to delay a small random interval and then retry.&nbsp; However, this depends on every unit that transmits being able to hear every other one. If this is not the case, then whatever you do, the problem will remain.</p>
<p>The only solution that I know of introduces a master controller in the system, which every node can hear, and you must then turn the whole protocol upside down and have the controller (which might be a base or a GLCD) poll the transmitters to request data. This of course raises many more problems: battery operation of the emonTx becomes impractical because it must either remain listening at all times, or turn on and listen when it expects to be polled; and having two incompatible protocols (&quot;simple&quot; and &quot;complex&quot;) and two sets of sketches will introduce all manner of confusion and complication.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8908"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Sun, 06/01/2013 - 14:22.</div>
    <div class="content">
     <p><em>it would still be interesting to know the underlying reason for the freeze.</em></p>
<p>Surely calling a function in a way that JeeLabs&nbsp;specifically say not to do is a good pointer. I wouldn&#39;t be at all surprised if this was the cause of the lockups.</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8909"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Sun, 06/01/2013 - 14:45.</div>
    <div class="content">
     <p><em>Surely calling a function in a way that JeeLabs&nbsp;specifically say not to do is a good pointer.</em></p>
<p>Yes, absolutely agreed! Now that you write it, I can recall that this is said &#39;expressis verbis&#39; in the jeelib documentation. Just forgot about that :-(.</p>
<p>Seems it is possible to mix up the complete receive/transmit state machine if the correct sequence is not adhered to. Would still be nice if this situation would not result in a freeze, but using functions in a wrong way is clearly a bug that can be (and has to be) avoided.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8910"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sun, 06/01/2013 - 14:47.</div>
    <div class="content">
     <p><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--></p>
<p><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
</style>
<![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
</style>
<![endif]--></p>
<p class="MsoNormal">Paul</p>
<p class="MsoNormal">&nbsp;I agree with that although we can probably take it a step further.</p>
<p class="MsoNormal">Flow control through the RFM12B is achieved via the Jeelabs library call. <span style="mso-spacerun:yes">&nbsp;</span>Presumably a call to rf12_canSend() simply results in the library routine testing a software flag which is handled by an interrupt routine.</p>
<p class="MsoNormal">My guess is that rf12_canSend() will return very quickly and this is also probably true for rf12_recvDone() consequently the improved kludge will rattle through very quickly indeed compared to the time it will take for the rfm12 to send whatever is in its buffer or (more likely) whatever the conflicting station is doing.</p>
<p class="MsoNormal">What I am getting at here is that if &#39;i&#39; ever becomes &gt;0 then it will probably become &gt; 10 because you are waiting for some slow process to finish so you may as well not use the kludge and simply have:</p>
<p>if (!rf12_canSend() )</p>
<p><span style="mso-spacerun:yes">&nbsp;</span>{<br />
	&nbsp; &nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	&nbsp; &nbsp; rf12_sendWait(0);</p>
<p><span style="mso-spacerun:yes">&nbsp;</span>}</p>
<p class="MsoNormal">If the transmissions are not aligned then a send should occur OK on the next call. If alignment continues because the units timers are harmonically related then transmission will fail for a while but the unit will not lockup.</p>
<p class="MsoNormal">When my current test has completed 24 Hours I shall try the above.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8911"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Sun, 06/01/2013 - 14:55.</div>
    <div class="content">
     <p>Do we know who wrote this original code (the i loop kludge, I mean?). Might be good to know if there was a particular reason for coding it this way...</p>
<p>&nbsp;</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8915"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Sun, 06/01/2013 - 19:57.</div>
    <div class="content">
     <p>Although I did <strong>not</strong> write the emonGLCD code, I came to a very similar solution for another project.</p>
<p>There are three reasons, why rf12_canSend() will return with false:</p>
<p>- the state machine is not in TXRECV state</p>
<p>- the receive buffer is not empty</p>
<p>- there is RF in the air, means another node is transmitting</p>
<p>The first two cases are depending on he internal state machine and will be true after calling rf12_recvDone() (similar as Brian described, it will sort of &#39;fall through&#39;). But the RF in the air is depending on something that is not influenced by these calls. It might take some milliseconds until the other node stops sending. And the &#39;i-loop&#39; is a timeout for waiting until this happens.</p>
<p>The problem is, that due the bug in rf12_canSend(), the RF check will always show &#39;no RF&#39;, so this will never block rf12_canSend().</p>
<p><strong>EDIT: correction</strong>: rf12_recvDone() will <strong>not </strong>fall through, if a reception of a message from another node is just in progress. So this is another reason for an &#39;i-loop&#39; timeout!</p>
<p><strong>EDIT2:</strong> ok Brian and Paul, now I finally understand what you mean. The &#39;i-loop&#39; as in the emonGLCD code will not work as planned (?), because it will timeout within a few hundred processor cycles and this will in most cases not be enough time for any ongoing transmission from other nodes to complete. This is the difference to my code, where I use a 1ms wait&nbsp; inside the loop (waiting for a 1ms flag supplied by an interrupt routine)!</p>
<p>But I still do not understand Brians proposal:</p>
<p>if (!rf12_canSend() )</p>
<p><span style="mso-spacerun:yes">&nbsp;</span>{<br />
	&nbsp; &nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	&nbsp; &nbsp; rf12_sendWait(0);</p>
<p><span style="mso-spacerun:yes">&nbsp;</span>}</p>
<p>wouldn&#39;t it make more sense to do:</p>
<p>rf12_recvDone();</p>
<p>if (rf12_canSend() )</p>
<p><span style="mso-spacerun:yes">&nbsp;</span>{<br />
	&nbsp; &nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	&nbsp; &nbsp; rf12_sendWait(0);</p>
<p><span style="mso-spacerun:yes">&nbsp;</span>}</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8916"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sun, 06/01/2013 - 18:24.</div>
    <div class="content">
     <p>JBecker &gt;</p>
<p><em>wouldn&#39;t it make more sense to do:</em></p>
<p><em>rf12_recvDone();</em></p>
<p><em>if (rf12_canSend() )</em></p>
<p><em><span style="mso-spacerun:yes">&nbsp;</span>{<br />
	&nbsp; &nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	&nbsp; &nbsp; rf12_sendWait(0);</em></p>
<p><em><span style="mso-spacerun:yes">&nbsp;</span>}</em></p>
<p>Yes, well done. Silly me.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8917"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Sun, 06/01/2013 - 20:20.</div>
    <div class="content">
     <p>Good work guys.. But not one to complain .</p>
<p>But why has this suddenly&nbsp;happened to the code on the GLCD?&nbsp;<br />
	surely if this was a problem with rfm12b code we would of seen this with the old code also?&nbsp;</p>
<p>Iv not changed anything to do with the rfm12b code, i have how ever changed the main code and iv managed to get it stable now running 5 days its never made it past 36hrs before. (Since the icons)</p>
<p>Rob,</p>
<p>(ps not saying it is or is not just asking questions, Trying to understand my self.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8919"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sun, 06/01/2013 - 21:25.</div>
    <div class="content">
     <p>robw said:</p>
<p><em>But why has this suddenly&nbsp;happened to the code on the GLCD?&nbsp;</em></p>
<p>Good question Rob. My test code gives a good demonstration of the extreme marginality of this problem. If anyone wishes to replicate the tests that I ran I will put the sketch somewhere accessible.</p>
<p>What surprised me was the fact that I could alter the test script in seemingly insignificant ways and yet change the behaviour from failing regularly to failing extremely rarely. In the case of the real software the kludge required 10 consecutive errors for a possible lockup and a small software change could prevent that.</p>
<p>This is a difficult problem to solve and there is always the danger that a fix may merely hide the real problem so it&#39;s right to question the validity of a proposed solution.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8920"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Sun, 06/01/2013 - 22:14.</div>
    <div class="content">
     <p>Something else, does anyone have the old non-locking sketch? Then we all could load that one, run it for a time and then start to add code to &quot;replicate&quot; the current sketch. Or am I talking crap?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8936"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Mon, 07/01/2013 - 15:33.</div>
    <div class="content">
     <p>Hi Guys,&nbsp;</p>
<p>I&#39;ve just dipped back into this thread. It looks like some good discoveries have been made. The insight into how the RF12 lib function calls work is very interesting. Trystan added in the i++ loop a while back after we discovered it was getting stuck.&nbsp;</p>
<p>It seems I was wrong about the icons causing this problem, that may have been a contributor but a few of you have realized even taking the icons out does not solve the issue. I had no luck with my cut down example, it did crash after a few days.&nbsp;</p>
<p>I&#39;ve gone through the tread as best I can and have compiled&nbsp;most suggestions to optimise the code into an example. It&#39;s up on github called SolarPV_LowMem_Dev:&nbsp;<a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev">https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev</a></p>
<p>I&#39;ve implemented the following&nbsp;</p>
<ul>
<li>
		Removed all pages apart from the main solar PV page</li>
<li>
		Use byte instead of int where values are under 255</li>
<li>
		Removed duplication of code in solarPV&nbsp;type section, removed gen calculations to be outside as suggested by robw</li>
<li>
		Converted Kwh calculation to consist of one multiplication instead&nbsp;of a multiplication and division as suggested by JBecker</li>
<li>
		Changed&nbsp;RF12 Tx code as suggested by JBecker</li>
</ul>
<p>For me it compiles to 28.8KB on Arduino 1.02, Ubuntu 12.10. If you can see another code optimisations/bug fixes we can make to the code please send me a github&nbsp;pull request and I&#39;ll merge the changes.&nbsp;</p>
<p>The code has been un-tested. When I get home tomorrow I&#39;ll set it running on an emonGLCD. If anyone has another suggestions I have several spare emonGLCD I can setup running different code setups to evaluate stability. Once we have a stable setup it would be a good ideas to implement a watchdog time as backup. I agree, a watchdog should not be used to fix solvable problem with the code, besides it would not be great to have a random reboot as the Kwh/d totals would be lost.&nbsp;</p>
<p>Thanks again for helping to solve this. Stability is very important and should come before running ahead to add new functions. Once we have a stable example I shall make a stable &#39;release&#39; branch on github and make another &#39;dev&#39; branch where new features (yet to be tested for stability) can be implemented.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8942"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Mon, 07/01/2013 - 19:02.</div>
    <div class="content">
     <p>Glyn,</p>
<p>there are another two or three (or more) things that could be done:</p>
<p>- after receiving a DateTime message from node 15, emontx still points to the receive buffer and will give completely wrong values if evaluated (every 200ms) before another message from node 10 arrives</p>
<p>- LCDbacklight does not have to be evaluated between hours 22 and 5</p>
<p>- <span class="n">genkwh</span> <span class="o">+=</span> <span class="p">(</span><span class="n">emontx</span><span class="p">.</span><span class="n">power2</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3600000</span><span class="p">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; still has this unneeded divide/multiply</span></p>
<p>The first one is really nasty (and much harder to correct :-) )</p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8948"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Mon, 07/01/2013 - 20:37.</div>
    <div class="content">
     <p>Glyn</p>
<p>Nice work.. &nbsp;There are a few more doubles or ints you could change also.. See below or git pull&nbsp;</p>
<p><strong>Main file....</strong></p>
<p>Line 103</p>
<p>double temp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Need for full resolution<br />
	byte&nbsp;maxtemp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Dont need the full resolution we only show full numbers<br />
	int&nbsp;mintemp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//&nbsp;May be Negitive</p>
<p>​Line 119</p>
<p>//Serial.begin(9600); &nbsp; &nbsp; &nbsp; &nbsp;// Were not using it so why bother...</p>
<p>Line 199 &nbsp;We can do it all in one so we dont need an int&nbsp;for LDR the varable.</p>
<p>//int LDR = analogRead(LDRpin);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Read the LDR Value so we can work out the light level in the room.<br />
	&nbsp;byte LDRbacklight = map(analogRead(LDRpin), 0, 1023, 50, 250);&nbsp;&nbsp;&nbsp; // Map the data from the LDR from 0-1023 (Max seen 1000) to var GLCDbrightness min/max</p>
<p><strong>Templates</strong></p>
<p>Line 41</p>
<p>-void draw_temperature_time_footer(double temp, double mintemp, double maxtemp, double hour, double minute)<br />
	+void draw_temperature_time_footer(double temp, byte mintemp, byte maxtemp, byte hour, byte minute)</p>
<p>Line 78</p>
<p>-void draw_solar_page(double use, double usekwh, double gen, double maxgen, double genkwh, double temp, double mintemp, double maxtemp, double hour, double minute, unsigned long last_emontx, unsigned long last_emonbase)&nbsp;<br />
	+void draw_solar_page(double use, double usekwh, double gen, double maxgen, double genkwh, double temp, byte mintemp, byte maxtemp, byte hour, byte minute, unsigned long last_emontx, unsigned long last_emonbase)<br />
	&nbsp;</p>
<p>Rob</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8957"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Tue, 08/01/2013 - 08:41.</div>
    <div class="content">
     <p>It&#39;s good that the code is being tidied up but there is a risk here that the problem is going to get buried again and forgotten about only to come back to bite in the future.</p>
<p>It would be better at this stage to stick with the code that fails most often and track down the real cause of the locking up.</p>
<p>I have one more snippet of information that may help in this regard. When locked up the interrupt signal from the RF12B is permanently high. This means that the RF12B cannot be in it&#39;s normal idle state because if it were then the interrupt would go low the next time the emonTX transmitted</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8959"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Tue, 08/01/2013 - 09:00.</div>
    <div class="content">
     <p><em>It would be better at this stage to stick with the code that fails most often and track down the real cause of the locking up.</em></p>
<p>That&#39;s exactly what Brian D did - see above.</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8962"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Tue, 08/01/2013 - 09:26.</div>
    <div class="content">
     <p><em>It would be better at this stage to stick with the code that fails most often and track down the real cause of the locking up.</em></p>
<p>For those guys who want to locate and fix the bug, yes. But there might also be a number of people around who just want a working solution in the meantime. And testing of the new code can be done in parallel by this (majority ?) of users. If we have only one freeze with the modified code, this would be an very strong indication that there is still something wrong.<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8965"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Tue, 08/01/2013 - 10:17.</div>
    <div class="content">
     <p><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--></p>
<p><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
</style>
<![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
</style>
<![endif]--></p>
<p>Martin R said:</p>
<p><em>It&#39;s good that the code is being tidied up but there is a risk here that the problem is going to get buried again and forgotten about only to come back to bite in the future.</em></p>
<p>I think it already has!</p>
<p>Let me clarify my findings:</p>
<p>1. The fundamental reason for the lockup is a violation of the Jeelabs rule:</p>
<p>The <a href="http://oldred.jeelabs.net/projects/cafe/wiki/Rf12_sendStart%28%29">rf12_sendStart()</a> function may only be called in two very specific situations:</p>
<p style="margin-left:36.0pt;text-indent:-18.0pt;&lt;br /&gt;<br />
tab-stops:list 36.0pt"><span style="&lt;br /&gt;<br />
mso-bidi-font-size:12.0pt;&lt;br /&gt;<br />
mso-bidi-font-family:Symbol"><span style="font-size:10.0pt;font-family:Symbol;mso-fareast-font-family:Symbol">&middot;</span><span style="font-size:7.0pt;mso-fareast-font-family:Symbol">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>right after <a href="http://oldred.jeelabs.net/projects/cafe/wiki/Rf12_recvDone%28%29">rf12_recvDone()</a> returns true - used for sending replies / acknowledgements</p>
<p style="margin-left:36.0pt;text-indent:-18.0pt;&lt;br /&gt;<br />
tab-stops:list 36.0pt"><span style="&lt;br /&gt;<br />
mso-bidi-font-size:12.0pt;&lt;br /&gt;<br />
mso-bidi-font-family:Symbol"><span style="font-size:10.0pt;font-family:Symbol;mso-fareast-font-family:Symbol">&middot;</span><span style="font-size:7.0pt;mso-fareast-font-family:Symbol">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>right after <a href="http://oldred.jeelabs.net/projects/cafe/wiki/Rf12_canSend%28%29">rf12_canSend()</a> returns true - used to send requests out</p>
<p style="margin-left:18.0pt;text-indent:-18.0pt">2. The reason the standard code violates this rule is a kludge in this line of the standard code:</p>
<p style="margin-left:18.0pt;text-indent:-18.0pt">int i = 0; while (!rf12_canSend() &amp;&amp; i&lt;10) {rf12_recvDone(); i++;}<span style="mso-spacerun:yes">&nbsp; </span>// if ready to send + exit loop if it gets stuck as it seems to</p>
<p style="margin-left:18.0pt;text-indent:-18.0pt">3. The condition that initiates the failure sequence is when transmissions<span style="mso-spacerun:yes">&nbsp; </span>from multiple units become aligned.</p>
<p style="margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo1">The fix is not one silver bullet and as Robert Wall explained above this is a complex problem however, my personally acceptable solution is:</p>
<p style="margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo1"><span style="mso-list:Ignore">(a)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span>Avoid transmission alignment by setting transmission intervals on different units to different prime numbers</p>
<p style="margin-left:36.0pt;text-indent:-18.0pt;mso-list:l0 level1 lfo1"><span style="mso-list:Ignore">(b)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp; </span></span>Fix the kludge with this:</p>
<p>&nbsp; rf12_recvDone();<br />
	&nbsp; if (rf12_canSend() )</p>
<p>	&nbsp;{<br />
	&nbsp;&nbsp;&nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	&nbsp;&nbsp;&nbsp; rf12_sendWait(0);<br />
	&nbsp;}</p>
<p>Implementing the above works for me (one emonTx two emonGLCD). If it does not work in all cases then I have got something wrong so if anyone can show where it fails I will be interested hear about it. Alternatively, if this is considered an acceptable solution then hearing a few more reports confirming that it works would be a good idea before further changes are made.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8997"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Tue, 08/01/2013 - 21:01.</div>
    <div class="content">
     <p>@robw thanks for the pull request, it&#39;s been merged.&nbsp;</p>
<p>@MartinR - I&#39;m taken the &#39;back to basics&#39; approach this should give us a stable example as soon as &nbsp;possible which I think is best for the project. General users can then use this stable example. Advance users can then set about building back in all the features that were removed like the multi page views and the history page and experimenting on a &#39;dev&#39; Github branch which will be labeled as un-tested for stability.&nbsp;</p>
<p>@Brian D - Thanks a lot for your insight, your &#39;fix&#39; has been incorporated into the latest build. See below.&nbsp;</p>
<p>As of 8pm today (8/1/13) I have set my home emonGLCD running the LowMen Dev optimised example. I&#39;ve created a GitHub &#39;tag&#39; on the emonGLCD repo to mark this point. You can be sure that your running the same code as me by downloading tag V01 from :<a href="https://github.com/openenergymonitor/EmonGLCD/tags">https://github.com/openenergymonitor/EmonGLCD/tags </a>even if the example is updated in the meantime. The latest code can be viewed here:&nbsp;<a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev">https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev</a>. <em>I&#39;m still learning how to use GitHub and am continually amazed by how powerful it is. This is the first time I&#39;ve used the tagged feature, I&#39;m impressed. I think we&#39;ll try and make use of this feature more in the future to mark strategic points in software development.&nbsp;</em></p>
<p>Now all that&#39;s left is to sit back, it will hopefully by several months before we know that we&#39;ve been successful or not. It will probably be a case of <em>&quot;A watched emonGLCD&nbsp;never crashes&quot;</em>! &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8999"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="john-h&#039;s picture" title="john-h&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by john-h (not verified) on Tue, 08/01/2013 - 23:38.</div>
    <div class="content">
     <p>I&#39;ve been following this thread&nbsp;with interest ever since I built&nbsp;my GLCD&nbsp;(mid October) and found&nbsp;it was hanging every few days. I really want to log the daily usage and generation figures, so obviously am interested in a solution -- and the discovery of the problem with the JeeLib calls seems very relevant.&nbsp;I will shortly make the suggested change.</p>
<p>But I&#39;ve also noticed something else that I believe will cause a lock-up in the GLCD and the Nanode. The value returned by millis() is an unsigned long, and according to the documentation rolls over about every 50 days. This means that code such as</p>
<p>if ((millis()-fast_update)&gt;200)<br />
	&nbsp; {<br />
	&nbsp;&nbsp;&nbsp; fast_update = millis();</p>
<p>will cease working if the roll-over does not occur between these two lines of code.</p>
<p>There is also a possible loop timing error:&nbsp;if the if is not executed until more than 200ms have elapsed, the additional milliseconds will be ignored. This will make the accumulation&nbsp;of energy slightly inaccurate as that assumes 200ms loops. Replacing the</p>
<p>&nbsp;&nbsp;&nbsp; fast_update =&nbsp;millis();</p>
<p>with</p>
<p>&nbsp;&nbsp;&nbsp; fast_update += 200;</p>
<p>should fix that, but is still problematical at the roll-over. (fast_update will now roll over in the same way as millis(), but the roll-overs will happen at slightly different times so the comparison will go wrong). I cannot yet think of a clean way of overcoming this.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9000"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1747" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1747" title="View user profile.">Petrik</a> on Wed, 09/01/2013 - 05:44.</div>
    <div class="content">
     <p>&nbsp;</p>
<p>If the lockout is because of receiving errors - would like to ask how much background air traffic you have ? With using jeenode rf12 test script I was surprised to notice that some of the houses nearby seem to have systems transmitting a lot of data at 868Mhz.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9013"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Wed, 09/01/2013 - 21:41.</div>
    <div class="content">
     <p>@Petrik good point, it would be good to get someone else running&nbsp;<a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev">https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev</a>&nbsp;tag V01 in a place with lots of RF&nbsp;noise on the ISM bands. My house is probably not very noisy, the nearest neighbor is about three miles away!&nbsp;</p>
<p>All is well so far, my emonGLCD running the LowMem_Dev example has been running nicely since 10pm yesterday :-)</p>
<p>It&#39;s too early to draw any conclusions though.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9024"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1894" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1894" title="View user profile.">Ian Eagland</a> on Thu, 10/01/2013 - 12:49.</div>
    <div class="content">
     <p>Hi</p>
<p>One thing puzzles me in all this discussion of the problem being in the rf12 transmit (Although I agree, since removing the transmit code which I do not need in my particular setup, I have not had a single lock up).</p>
<p>I have 3 emonTx that are battery powered and all transmit plus an emonTx mains powered that also transmits. As far as I know they do not lock up. The transmit code all looks very similar to me but I am no expert. So can some one explain the difference between an&nbsp;emonTx&nbsp;transmitting and an&nbsp;emonGLCD transmitting. Or perhaps explain where I am being foolish!</p>
<p>One thing I just realised is that the emonTx&nbsp;never receive, only transmit. Also I confirm I have no watch dog on the battery powered&nbsp;emonTx.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9025"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Pcunha&#039;s picture" title="Pcunha&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Pcunha (not verified) on Thu, 10/01/2013 - 13:57.</div>
    <div class="content">
     <p>I think i can test it. I&acute;m on a very very high noise environment at 433 Mhz. I&acute;ve temporarily solved this issue implementing an watchdog on the emonGLCD (ugly solution). But that resets my data every time it restarts (-+ 6 hours to 1 day).</p>
<p>I&acute;ll try implement these changes in the code and see if it will continue to reset. Since the reset rate is very high here, i&acute;ll probably report back soon.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9034"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Fri, 11/01/2013 - 00:19.</div>
    <div class="content">
     <p>My test emonglcd has just crashed running the v01 lowMem&nbsp;Dev code (see above) has crashed after less Ia&nbsp;day. Last night I changed the solar pv type to type 2 (to match my setup), it had been running for 24hrs without a crash as type 1. After changing to type 2&nbsp;in the morning it had frozen, I&#39;m not sure if this was just a coincide.&nbsp;</p>
<p>The v01 code was highly optimised and&nbsp;incoperated&nbsp;most of the suggestions on this thread. Has anyone else had any luck with v01? Or any further insight. I&#39;m busy for next next few days, I&#39;ll pick this up next week.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9051"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Sat, 12/01/2013 - 09:52.</div>
    <div class="content">
     <p>Type 1 solar PV, I tried the low mem dev code and it kept either continuously power cycling or froze... back to my own code with the transmit rem&#39;d out and it appears stable even with LEDs though no history.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9144"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Tue, 15/01/2013 - 19:01.</div>
    <div class="content">
     <p>Has this thread gone quiet because the suggested mod&#39;s have fixed (or hidden) the problem for everyone? My two GLCD have been running without lockup now for about 10 days. The only &#39;fix&#39; changes are the two that I identified above.</p>
<p>Has anyone else a result to share?</p>
<p>Avontech has added weight to the theory that the lockup relates to the transmit code so maybe he/she could try the two mod&#39;s that I have mentioned.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9145"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Tue, 15/01/2013 - 19:55.</div>
    <div class="content">
     <p>Hi Brian</p>
<p>Iv been working on trying to figure out why its still happening on the old sketch..&nbsp;</p>
<p>I thought i had it sorted as its been working fine for 9 days.. Then iv had 2 lockups in the last 24hrs with out changing a thing.. CAN YOU BELIEVE IT.. &nbsp;So back to the drawing board.. &nbsp;</p>
<p>Rob</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9150"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Tue, 15/01/2013 - 23:28.</div>
    <div class="content">
     <p>Hi Brian,</p>
<p>I implemented your changes in the lowMem Dev example:&nbsp;<a href="https://github.com/openenergymonitor/EmonGLCD/blob/master/SolarPV_lowMem_Dev/SolarPV_lowMem_Dev.ino">https://github.com/openenergymonitor/EmonGLCD/blob/master/SolarPV_lowMem_Dev/SolarPV_lowMem_Dev.ino</a>&nbsp;but I have still experienced a lockup, often several in 24hrs which is worse than before! Do you think you could post your code exactly what your currently running so we can see how you&#39;ve implemented the changes.&nbsp;</p>
<p>Do you think you could have a look over the LowMem Dev example and try it out for yourself.</p>
<p>Cheers,&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9161"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Wed, 16/01/2013 - 14:42.</div>
    <div class="content">
     <p>I have attached the script that I am running plus the associated template and icon files which are special.</p>
<p>Looking at your LowMem example you have the transmit delay set to 10s:</p>
<pre>
<span class="k">if</span> <span class="p">((</span><span class="n">millis</span><span class="p">()</span><span class="o">-</span><span class="n">slow_update</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">10000</span><span class="p">)</span></pre><p>This is not a prime number. The second change that I am using is to set all system transmission intervals to different prime numbers. This is more of a test than a fix. My experience suggests that lockups only occur when transmissions become aligned and that cannot happen if all units use different primes for their transmission intervals.</p>
<p>Even if the use of primes stops the lockups there is still a problem but at least we have another clue to the cause.</p>
<p>There is not much point in me trying the lowmem sketch as anything I try without the primes and the kludge removed produces lockups.</p>
<p>There is another fix that seemed to work for me and that was to remove all the rfm12 code and use Martin Roberts code which does not use the library. This proved to be completely stable which was interesting but it&#39;s a bit radical and hopefully will not be necessary.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9163"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Wed, 16/01/2013 - 15:01.</div>
    <div class="content">
     <p>I haven&#39;t had any lockups with my code either Brian but until the real cause of these lockups is found I can&#39;t really be sure that the same issue isn&#39;t present, but just much less likely. That&#39;s why I keep suggesting that the right way to debug this is to stick with the code that is most likely to fail and make a concerted effort to find the problem. I lost interest in this thread once it was clear that the consensus was different.</p>
<p>I have a similar function to your prime number solution (which is very neat BTW) in my own system. I use a series of&nbsp;timeslots, where the emonTx is the master, which all the other nodes listen to, and then they each transmit in their&nbsp;allocated timeslot 100ms apart. In addition to the emonTx I have 2 emonGLDs and 2 temperature nodes on my hot water cylinders. This does rely on all nodes being able to receive the emonTx transmission though which your idea doesn&#39;t.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9165"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 16/01/2013 - 15:14.</div>
    <div class="content">
     <p>I agree with you there, Martin. With any bug like this, the objective is to get it to fail on command with the absolute minimal sketch, and then it&#39;s all but problem solved.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9166"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Wed, 16/01/2013 - 15:40.</div>
    <div class="content">
     <p>Martin said:</p>
<p><em>&gt; That&#39;s why I keep suggesting that the right way to debug this is to stick with the code that is most likely to fail and make a concerted effort to find the problem.</em></p>
<p>I entirely agree - my problem is that having reached my own conclusion regarding the area where the problem is I don&#39;t really know what the next step should be.</p>
<p>What I am sure of is that after commenting out the rf12 send commands the lockups stopped. Also, after adding the two mods that I have identified above the lockups stopped.</p>
<p>	The difficulty is the library code is used in lots of applications and yet others have not reported the same problem. I know that you referred to a potential library problem way back in this thread so that should be worth looking at.</p>
<p>	It&#39;s worth mentioning that I don&#39;t have a base station (yet) therefore like you this GLCD transmit stuff is redundant as far as I am concerned but when I realised that the original code was violating the Jellab library rule I thought a fix would be easy so I tried it and it seemed to work.</p>
<p>	If we look at Glyn&#39;s comments he has implemented the kludge removal change but not the prime number change and he continues to get problems. Unfortunately he has a bucket load of other changes as well which does not help but my guess is that the use of prime numbers as transmit intervals prevents the error condition and the kludge removal improves or changes the susceptibility but neither are true fixes.</p>
<p>	I am happy to try some more experiments because I now have a stable sketch that I can return to so if you have any suggestions on what to try next I am all ears.</p>
<p>Incidentally, the neat prime number idea was Paul Ockenden&#39;s</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9167"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Wed, 16/01/2013 - 16:43.</div>
    <div class="content">
     <p>Thanks Robert &amp; Brian - it&#39;s good to know I&#39;m not a lone voice!</p>
<p>I do have a base station Brian, in fact I have 2, a Raspberry Pi running emonCMS and an OKG running as a very simple server but I didn&#39;t mention them above because neither of them transmit.</p>
<p>I did make an attempt at cracking this when I built my second emonGLCD. I set it running the standard SolarPV code and listening to an emonTx&nbsp;separate from my normal system (they don&#39;t interfere because my normal system runs a non-standard baud). My first problem was that it took 3 days before it locked up but when it eventually did I ascertained that there was no activity on any ATMEGA pin other than the backlight (which is toggled by hardware). I also noticed that the RFM12 interrupt was permanently high so I concluded that it wasn&#39;t in receive mode.</p>
<p>My next step was to try to determine where the code was when it locked up and my first suspicion was the rf12_sendWait function in RF12.cpp because it has a while loop - while (rxstate != TXIDLE)...</p>
<p>My strategy was to toggle an unused bit while in this loop so I&#39;d know if it was stuck there. This time it took 4 days before it stopped but when it did the test output wasn&#39;t toggling so I&#39;m pretty sure it doesn&#39;t get stuck there. This is the point at which I lost interest.</p>
<p>The ATMEGA328 does&nbsp;support DebugWire&nbsp;and I do have an AVR Dragon debugger, although I&#39;ve only played with it once to see if it worked. It looks like a great bit of kit and good value but I&#39;m not sure I want to lock my PC up for 4+ days waiting for GLCD to crash!</p>
<p>edited to say: sorry Paul O - still a neat idea though!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9170"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Wed, 16/01/2013 - 19:27.</div>
    <div class="content">
     <p><em>The difficulty is the library code is used in lots of applications and yet others have not reported the same problem.&nbsp; </em></p>
<p>I am not using the emonGLCD at all (sorry, but I do not have an application for it), but I had a very similar problem in one of my projects. This uses an MSP430, RFM12B and (more or less, see below) the same Jeelib library. I thought that it might help me and others (with emonGLCD) if I dig deeper into the subject. Last Sunday, I put a lot of time into this (plus logic analyzer and oscilloscope). I prepared two identical nodes with different node addresses and set them up to send a message every 200ms. One of them always stopped after maximum 1 minute runtime. To make it short, there was an additional while loop in rf12_control(), which made the units freeze. This while loop is <strong>not</strong> there in the original Jeelibs library (and I don&#39;t know who added it to the MSP430 version of the library).</p>
<p>After removing this while loop I had the two nodes running for &gt;20 hours without any freeze (still at 200ms send interval). What do I want to tell you with this little story? I just want to say that the Jeelib code itself <strong>seems</strong> to be ok (yes, different hardware, different timing, different code, I know).</p>
<p>Wouldn&#39;t it be an idea to set two emonGLCD with a &#39;freezing&#39; version of the code to a much faster send interval and try to catch the freeze with a logic analyzer? This has at least helped me a lot to fix it.</p>
<p>&nbsp;</p>
<p>&nbsp; &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9208"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Pcunha&#039;s picture" title="Pcunha&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Pcunha (not verified) on Thu, 17/01/2013 - 23:48.</div>
    <div class="content">
     <p>I just fixed my code with:</p>
<p class="rteindent1">rf12_recvDone();</p>
<p class="rteindent1">&nbsp; if (rf12_canSend() )</p>
<p class="rteindent1">&nbsp;</p>
<p class="rteindent1">{<br />
	&nbsp;&nbsp;&nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	&nbsp;&nbsp;&nbsp; rf12_sendWait(0);<br />
	}</p>
<p>and its now working without a crash for almost one week. I thik&nbsp;at least this issue is solved for me.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9210"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="TheBluProject&#039;s picture" title="TheBluProject&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by TheBluProject (not verified) on Fri, 18/01/2013 - 07:52.</div>
    <div class="content">
     <p>Hi @ll.</p>
<p>I&#39;ve been experiencing random &nbsp;lock-ups as well (I&#39;ve built my GLCD&nbsp;@ the beginning of Dec).</p>
<p>Around 2,5 weeks ago I&#39;ve decided to add the ACK support to my system (1xEmonTX + Martin&#39;s Funky with&nbsp;DHT22, and RasPi&nbsp;base station), and it has been working for 13 days straight without any problems at all ..</p>
<p>Here&#39;s the modified data sending proc, if someone is interested.</p>
<p><a href="https://github.com/TheBluProject/EmonGLCD/blob/Devel/HEMFunky/senddata_ack_lib.ino" title="https://github.com/TheBluProject/EmonGLCD/blob/Devel/HEMFunky/senddata_ack_lib.ino">https://github.com/TheBluProject/EmonGLCD/blob/Devel/HEMFunky/senddata_a...</a></p>
<p>This is &nbsp;not a fully finished and polished code yet, but hey ... my EmonGLCD&nbsp;has never been working for almost 2 weeks without a lockup before ;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9221"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/380" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/380" title="View user profile.">mharizanov</a> on Fri, 18/01/2013 - 12:39.</div>
    <div class="content">
     <p>These screens look cool, I will try your code :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9231"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Fri, 18/01/2013 - 23:10.</div>
    <div class="content">
     <p>This afternoon at about&nbsp;1pm I set my emonGLCD&nbsp;up running the lowMem_Dev&nbsp;code (<a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev" title="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev">https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem...</a>) with Brian D&#39;s ingenious prime number transmission delay. I went for a delay between temperature and light level transmissions of 17s.&nbsp;</p>
<p>It&#39;s now 11:00pm and the emonGLCD is still running...time will tell.&nbsp;</p>
<p>Thanks Brian for this simple but rather clever idea.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9284"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 21/01/2013 - 18:58.</div>
    <div class="content">
     <p>Two weeks after implementing my GLCD fix one unit has locked up. This suggests that as predicted the mod dramatically reduces the occasions when the failure condition arises but&nbsp; it&#39;s still a workaround not a fix. It&#39;s possible that the various devices on 433MHz around here have something to do with the problem but again the fault lies with the GLCD in its susceptibility to whatever causes the lock-up.</p>
<p>	Martin identified a lack of interrupts from the RFM12 when the lock-up condition occurs. I can confirm that was also true on my locked-up unit today.</p>
<p>	The summary of my experiments is that I know how to make the problem worse and I know how to improve it. What I don&#39;t know is how to completely fix it.</p>
<p>	My next test will be to remove the GLCD temperature transmission from both units as I don&#39;t use it and it does not represent room temperature anyway. The last time I tried this test it appeared to be successful although now I think it will take many weeks running without error to be totally convincing.<br />
	&nbsp;<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9294"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Tue, 22/01/2013 - 10:55.</div>
    <div class="content">
     <p>Still useful information Brian. As you say, it&#39;s consistent with the theory that the problem is connected with transmission collisions and you have simply reduced the likelihood of that happening.</p>
<p>One thing I noticed while looking through the ATmega328 data sheet is that you can set the watchdog timer to call an interrupt routine instead of resetting the CPU. Using this it should be possible to write a watchdog&nbsp;interrupt handler which displays various system variables on the LCD and then halts. This may give some clues as to where &amp; why lockup occurs.</p>
<p>If you are really ambitious you could also trace back through the stack to see what the CPU was doing when the lockup occured.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9325"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Wed, 23/01/2013 - 12:48.</div>
    <div class="content">
     <p>I&#39;m afraid to report that even with Brian&#39;s prime number idea implemented my emonGLCD running the low_mem dev code still crashes in a few hours of use :-(</p>
<p>Like Brian, I think the next think to do is to remove the transmitting code. I will set a test running tonight.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9330"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1399" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1399.jpg" alt="Series530&#039;s picture" title="Series530&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1399" title="View user profile.">Series530</a> on Wed, 23/01/2013 - 16:56.</div>
    <div class="content">
     <p>If its of any use , I can vouch for the fact that my fusion sketch seems to be rock solid with my GLCD. When I was developing the code initially I had issues with weird characters being displayed and an occasional freeze. I opted for a different USB power supply and this addressed the freezing. Cutting down the code with compile directives and removing redundancy addressed the weird character issue. My code has been running reliably for many weeks now.&nbsp;</p>
<p>it will expect a certain payload content so really needs to be run with the emonTX sketch to be properly tried out. If nothing else, take a look and see how it is put together.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9332"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Wed, 23/01/2013 - 17:38.</div>
    <div class="content">
     <p>Series 530:</p>
<p><em>If its of any use , I can vou</em>ch for the fact that my fusion sketch seems to be rock solid with my GLCD.</p>
<p>But do you have two GLCD units?</p>
<p>My experience is that the lockup only happens when I have two GLCD units running. There is no base station and one emonTx. I think the problem arises when the two GLCD units align transmission.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9334"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Wed, 23/01/2013 - 19:36.</div>
    <div class="content">
     <p>Brian</p>
<p>Iv had lockups with one GLCD, A Pi as a base station and the TX.. So im not sure the two GLCD&#39;s are a cause, Or may be this accelerates the lockups?</p>
<p>I can rule out power supply as I&#39;m using a lipo battery and still get lockups.</p>
<p>Rob</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9343"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Thu, 24/01/2013 - 08:42.</div>
    <div class="content">
     <p>Is everybody absolutely sure that this is <strong>not</strong> a power supply problem?</p>
<p>There is still this nasty setting in the original jeelib RF12M initialization which sets the battery threshold comparator to 3.1V and allows battery low interrupts. A small dip in supply voltage (LEDs on, backlight on, transmission running) could be enough to trip the threshold and lockup the transmit state machine.</p>
<p>This problem should be known to everyone using the original jeelib code and battery supply!?! I I don&#39;t know why this setting has never been &#39;corrected&#39; (AFAIK). But maybe this leads into a wrong direction.</p>
<p>Would perhaps still be worthwhile trying to modify the jeelib code (disable battery low interrupts or set threshold to 2.2V):</p>
<pre>
// RF12 command codes
#ifdef USE_BATT_THRESH
#define RF_RECEIVER_ON         0x82DD
#define RF_XMITTER_ON          0x823D
#define RF_IDLE_MODE           0x820D
#define RF_SLEEP_MODE          0x8205
#define RF_WAKEUP_MODE         0x8207
#else
#define RF_RECEIVER_ON         0x82D9
#define RF_XMITTER_ON          0x8239
#define RF_IDLE_MODE           0x8209
#define RF_SLEEP_MODE          0x8201
#define RF_WAKEUP_MODE         0x8203
#endif
</pre><p>and/or change:</p>
<pre>
    rf12_xfer(0xC049); // 1.66MHz,3.1V
to:

  rf12_xfer(0xC040); // 1.66MHz,2.2V</pre><p>(in rf12.cpp)<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9344"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Thu, 24/01/2013 - 08:18.</div>
    <div class="content">
     <p>JBecker</p>
<p>You may be correct..</p>
<p>The original code i did to dim the leds biased on power import / export did cause the lockups but i put this down at the time to me not knowing what i was doing. Or thought it was also something to do with reading the LDR,</p>
<p>So im not one to rule it out. just saying i can rule out a dodgy power supply not able to keep up. I get lockups even with a full battery 4.2V all the way down to 3.2V.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9373"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Thu, 24/01/2013 - 16:35.</div>
    <div class="content">
     <p><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:TrackMoves/>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--></p>
<p><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:10.0pt;
	mso-para-margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;}
</style>
<![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:10.0pt;
	mso-para-margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;}
</style>
<![endif]--></p>
<p class="MsoNormal">I like Martin&rsquo;s idea of using the watchdog as a trap instead of simply resetting the CPU.</p>
<p class="MsoNormal">Rather than getting into heavy stuff like analysing the stack content I have simply used a variable to identify each function call so that the content of the variable can be displayed in the watchdog trap.</p>
<p class="MsoNormal">Example:</p>
<p class="MsoNormal">function_number = 1;</p>
<p class="MsoNormal">this_function();</p>
<p class="MsoNormal">function_number=2;</p>
<p class="MsoNormal">that_function();</p>
<p class="MsoNormal">display function_number</p>
<p class="MsoNormal">Testing <span style="mso-spacerun:yes">&nbsp;</span>is easy enough with one or two of these:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(digitalRead(switch1));</p>
<p class="MsoNormal">If I press and hold switch1 for more than a few seconds I can test that the trap is working. The LED&rsquo;s are used to confirm that the ISR(WDT_vect) is invoked correctly.&nbsp; There is a while(1); at the end of the trap.</p>
<p class="MsoNormal">Now all I have to do is output the content of function_number somehow and I can see which is the last function to be called. Serial.print can&rsquo;t be used in an interrupt service routine so I have tried using the LCD display but without success. I used draw_solar_page but although it returns OK nothing changes on the screen.</p>
<p class="MsoNormal">Is there an obvious way to drive the LCD from inside an interrupt service routine?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9375"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Thu, 24/01/2013 - 17:08.</div>
    <div class="content">
     <p>good work Brian.</p>
<p>Did you call glcd.refresh() ?</p>
<p>draw_solar_page() just writes to the frame buffer</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9376"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Thu, 24/01/2013 - 17:34.</div>
    <div class="content">
     <p>Thanks Martin - that works.</p>
<p>Test now running.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9427"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Sun, 27/01/2013 - 00:20.</div>
    <div class="content">
     <p>Brian, if your test is working, would you mind sharing your sketch? Then more people can load it to their emonGLCD&#39;s :-).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9432"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sun, 27/01/2013 - 09:33.</div>
    <div class="content">
     <p>A zip file is attached but be aware that my sketch expects a special emonTx. All three files are special.</p>
<p>I expected a lock up within a few hours but have not yet seen one after nearly 3 days!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9465"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Mon, 28/01/2013 - 14:22.</div>
    <div class="content">
     <p>If this is a problem with RAM, wouldn&#39;t it be an alternative to start looking at driving the display from the base instead? Has anyone tried that?&nbsp;</p>
<p>It seems to me that you would be able to be a lot more flexible in configuring the display, as well as using all available data in emoncms. It looks like glcdlib got support for this kind of setup as well (glcd_proxy.cpp).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9585"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Sun, 03/02/2013 - 12:52.</div>
    <div class="content">
     <p>I think I have seen the same problem (node freezing during transmission) now also with an emontx. I am using my own sketch with timer 1 interrupts there and the original jeelibs library for RFM12B. The emontx transmits power values exactly every 10 seconds. A second node with an MSP430 and an RFM12B driver very similar to jeelibs sends temperature values every ~27 seconds (using the voltage and temperature dependant MSP430 internal low frequency oszillator).</p>
<p>All these power and temperature data is recorded using emoncms on a raspberry pi.</p>
<p>The last power values from the emontx recorded in the database were at Unix time 1359883034. The next temperature data from the MSP430 node came in at 1359883044. This is exactly the time when the next transmission from the emontx was expected (ok, only with 1 second accuracy). The emontx stopped during transmission (LED was burning and this LED is switched on directly before starting transmission and switched off after transmission has completed).</p>
<p>Does this mean that the freezing has nothing to do with the particular emonGLCD code but is a generic &#39;feature&#39; of the jeelibs driver? Has anybody else seen this happen on other nodes than the emonGLCD?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9587"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sun, 03/02/2013 - 15:55.</div>
    <div class="content">
     <p>The argument against a jeelib library error has been that this problem will have occurred elsewhere and be reported. This may or may not be true.</p>
<p>My tests with two emonGLCD and one emonTx have shown that the problem is extremely variable in its behaviour and tests to trap an occurrence to provide new evidence have so far failed to deliver. The emonTx code that I am running was written by Martin and does not use the jeelib library. Interestingly this code does not appear to suffer from the lockup problem. Also, when I modified the emonGLCD to use Martin&#39;s code that also failed to lockup.</p>
<p>If you dig way back into this thread you will see that Martin suggested the following:</p>
<p>*******************************************************************************************</p>
<p>I have a theory that emonGLCD locks up due to problems with the JeeLib library.</p>
<p>	Transmission systems, particular radio ones with multiple transmitters are very tricky to code for because you can never guarantee what will be received. This is made worse in this case because of the high bit rate used (another bugbear of mine!) and the way there is nothing to prevent 2 nodes transmitting at the same time.</p>
<p>	The code needs to be written defensively to take account of&nbsp; all possible transmission errors, I&#39;m not sure the JeeLib code is.</p>
<p>	One bit that concerns me is in the interrupt routine...</p>
<p>	if (rxstate == TXRECV) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uint8_t in = rf12_xferSlow(RF_RX_FIFO_READ);</p>
<p>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (rxfill == 0 &amp;&amp; group != 0)<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rf12_buf[rxfill++] = group;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rf12_buf[rxfill++] = in;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rf12_crc = _crc16_update(rf12_crc, in);</p>
<p>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (rxfill &gt;= rf12_len + 5 || rxfill &gt;= RF_MAX)<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rf12_xfer(RF_IDLE_MODE);<br />
	&nbsp;&nbsp;&nbsp; } else {....</p>
<p>	This bit of code puts received characters into a buffer until rf12_len bytes are received or the buffer fills.</p>
<p>	The problem is that rf12_len is one of the received characters in the buffer, which may itself be corrupted during transmission (remember this is before the CRC check) or some characters may simply be lost and there aren&#39;t enough received to ever reach rf12_len.</p>
<p>	I think that in this situation the code will simply wait forever or until enough bytes come along to reach the rf12_len count, but then the next message will be corrupted too and so on.</p>
<p>	Happy to be proved wrong about this but it doesn&#39;t look ideal to me.</p>
<p>********************************************************************************************</p>
<p>My tests with two emonGLCD and one emonTx have shown that the problem is extremely variable in its behaviour and tests to trap an occurrence to provide new evidence have so far failed to deliver.</p>
<p>We all appear to have ignored Martin&#39;s suggestion so maybe it&#39;s time to have a closer look at what he has proposed.</p>
<p>JBecker&#39;s software skills are better than mine so if you are happy to lead the way - what do you think?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9588"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1014" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="DaveF&#039;s picture" title="DaveF&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1014" title="View user profile.">DaveF</a> on Sun, 03/02/2013 - 15:55.</div>
    <div class="content">
     <p>I have the normal set up&nbsp; plus&nbsp;a LP emontx temp node and a battery operated JNode - data recorded on Raspberry PI x2.&nbsp; The raspberry PI&#39;s to date has been faultless - the emocmd works fine</p>
<p>The Jnode has locked 3 time in the last 30 days and also I note the pressure reading flips its sign +/- 30,000 units and I am wondering why?</p>
<p>I have an old emonGLCD v1.2 with old software this has not locked in the last 40 days of continuous use.</p>
<p>Hope this helps</p>
<p>Dave</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9589"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Sun, 03/02/2013 - 16:28.</div>
    <div class="content">
     <p><em>We all appear to have ignored Martin&#39;s suggestion so maybe it&#39;s time to have a closer look at what he has proposed.</em></p>
<p>Brian, Martin,</p>
<p>I have not really ignored Martins remark, I can clearly follow him and I also think that this part of the code makes the receive routine vulnerable to transmission and reception errors. But I still think that the freeze always (?) happens during transmission. This is at least what I have found until now.</p>
<p>Hmmm, next thing I will try will be to set up two Arduino compatible nodes with &#39;orignal&#39; jeelibs code to transmit in very fast intervals and wait for lockups. If this happens often enough (at least every few minutes), then it should be possible to catch the event with a logic analyzer. (I have already tried this with two of my MSP430 nodes but did not get any lockups)</p>
<p>BR, J&ouml;rg.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9604"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Mon, 04/02/2013 - 15:23.</div>
    <div class="content">
     <p>Looking at&nbsp;<a href="http://jeelabs.org/2011/05/07/rf12-skeleton-sketch/">http://jeelabs.org/2011/05/07/rf12-skeleton-sketch/</a> the code for emonGLCD does things a bit different. Has anyone tried adapting the &quot;official&quot; way, including checking rf12_len and using memcpy?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9607"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/783" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-783.gif" alt="Lloyd&#039;s picture" title="Lloyd&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/783" title="View user profile.">Lloyd</a> on Mon, 04/02/2013 - 17:47.</div>
    <div class="content">
     <p>Apologies if this is totally irelvant, but my emonGLCD&nbsp;(I think it is v1.3) has run continuously since about July. &nbsp;It receives from 2 x emonTX and 1 x emonBase, and I have done nothing to tweak when each transmits. &nbsp;But I have disabled the transmit from the emonGLCD, and I can&#39;t remember why I did that. &nbsp;I have modified the code somewhat to suit the data I want to display, but nothing fundamental in the way the rf library is called.</p>
<p>Hope this helps,</p>
<p>Lloyd</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9608"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Mon, 04/02/2013 - 19:09.</div>
    <div class="content">
     <p><em>Hmmm, next thing I will try will be to set up two Arduino compatible nodes with &#39;orignal&#39; jeelibs code to transmit in very fast intervals and wait for lockups.</em></p>
<p>Just to keep you informed, I did what I said above. One node sending every 400ms, the other every ~2s. No lockups during &gt;24 hours so far!!! This is using stripped down code, so it seems to have something to do with the parts omitted !?!</p>
<p>BR, J&ouml;rg.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9609"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 04/02/2013 - 19:44.</div>
    <div class="content">
     <p>J&ouml;rg said:</p>
<p><em>Just to keep you informed, I did what I said above. One node sending every 400ms, the other every ~2s. No lockups during &gt;24 hours so far!!! This is using stripped down code, so it seems to have something to do with the parts omitted !?!</em></p>
<p>I have made the mistake of jumping to conclusions with this problem. It usually comes back to bite you !</p>
<p>The test I have been running for the last week or so uses code that used to fail regularly but has the watchdog trap (not reset) added and has not yet failed.</p>
<p>I have noticed before that sometimes you add some code and the problem appears to change - then it comes back again.</p>
<p>I suggest you leave it for a couple of weeks before you reach a conclusion.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9620"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Barry Broom&#039;s picture" title="Barry Broom&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Barry Broom (not verified) on Tue, 05/02/2013 - 20:46.</div>
    <div class="content">
     <p>Hi all. I have a similar problem. My emonGLCD v1.4 freezes up approximately every five days. Prior to the firmware update with four screens and icons it ran faultlessly. I have loaded Glyn&#39;s new low memory sketch and I will feedback results (hopefully not for a couple of weeks of problem free running!)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9709"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sat, 09/02/2013 - 19:55.</div>
    <div class="content">
     <p>Good news!</p>
<p>The test that I have been running since 24 Jan finally produced a lockup today and the watchdog trap activated where it dumped the function code on the LCD.</p>
<p>I have attached&nbsp; a screen shot of the locked up display plus the sketch that is was running on both emonGLCD units.</p>
<p>The important bit of information is that the function code showing on the LCD is 6 and the important section from the sketch is this:</p>
<p>&nbsp; emonglcd.temperature = (int) (temp * 100);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // set emonglcd payload<br />
	&nbsp;&nbsp;&nbsp; function=5;<br />
	&nbsp;&nbsp;&nbsp; rf12_recvDone();<br />
	&nbsp;&nbsp;&nbsp; function=6;<br />
	&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp; if (rf12_canSend())</p>
<p>	&nbsp;&nbsp;&nbsp; {<br />
	&nbsp;&nbsp;&nbsp;&nbsp; function=7;<br />
	&nbsp;&nbsp;&nbsp;&nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	&nbsp;&nbsp;&nbsp;&nbsp; function=8;<br />
	&nbsp;&nbsp;&nbsp;&nbsp; rf12_sendWait(0);</p>
<p>You can see that the function which failed to return was rf12_canSend() because this comes next:</p>
<p>void loop()<br />
	{<br />
	&nbsp;&nbsp; wdt_reset();&nbsp; // Service the dog<br />
	&nbsp;&nbsp; function=1; // This is the function call identifier<br />
	&nbsp; if (rf12_recvDone())</p>
<p>I think this is what we were looking for - so what do we do now?</p>
<p>Brian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9710"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sat, 09/02/2013 - 20:05.</div>
    <div class="content">
     <p>I should add that the function code is displayed in place of Voltage and appears in the bottom left corner of the LCD screen.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9711"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sat, 09/02/2013 - 20:13.</div>
    <div class="content">
     <p>I have only just noticed - if you look at the diverted power quadrant (bottom right) you will see that I am sending the real time and maximum temperature of the triac used to control the dump load. The maximum figure looks OK but the real time figure is 0.2 which is wrong and I have never seen that before. This could be a coincidence but if so it&#39;s surprising.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9712"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Sat, 09/02/2013 - 20:20.</div>
    <div class="content">
     <p>Hmmm.... The hang could be in canSend, but unless I&#39;m mistaken it could equally be in the start of&nbsp;sendStart, up until the point where the display interrupt gets called.<span style="font-size: 12px;">&nbsp;</span></p>
<p><span style="font-size: 12px;">Unless I&#39;m being thick.</span></p>
<p><span style="font-size: 12px;">P.</span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9713"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sat, 09/02/2013 - 21:24.</div>
    <div class="content">
     <p>Paul O:</p>
<p><em>Hmmm.... The hang could be in canSend, but unless I&#39;m mistaken it could equally be in the start of&nbsp;sendStart, up until the point where the display interrupt gets called.<span style="font-size: 12px;">&nbsp;</span></em></p>
<p>I think this is true:</p>
<p>If rf12_canSend() returns true function will = 7</p>
<p>if rf12_canSend() returns false function will = 1</p>
<p>if rf12_canSend() fails to return function will = 6</p>
<p>Hopefully one of the software gurus will check this as it&#39;s crucial to the test.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9714"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Sat, 09/02/2013 - 21:30.</div>
    <div class="content">
     <p>Well done Brian!</p>
<p>That&#39;s pretty conclusive that the problem is in rf12_canSend(). Now all we need to do is work out where. There are some unchecked while loops that path (e.g in rf12_byte()).</p>
<p>Paul - it can&#39;t be in sendStart. Once the variable &#39;function&#39; is set to 7 then that value would be displayed once the watchdog tripped.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9715"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Barry Broom&#039;s picture" title="Barry Broom&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Barry Broom (not verified) on Sat, 09/02/2013 - 21:47.</div>
    <div class="content">
     <p>Just following up from my post on Tuesday. I trialed Glyn&#39;s low memory GLCD sketch and found that it crashed consistently in under two hours. Unlike the standard emonGLCD sketch with icons, the low memory sketch blanks the screen and switches off the LEDs. I have moved back to the standard sketch with icons which typically freezes up after a week. I can confirm that prior to the icons change, the old emonGLCD ran reliably for weeks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9719"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Sat, 09/02/2013 - 23:50.</div>
    <div class="content">
     <p>Yes, well done Brian! That&#39;s a good bit of debugging. We know have more of a focus.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9721"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Sun, 10/02/2013 - 08:21.</div>
    <div class="content">
     <p>I just had a quick look at rf12_byte(), which is called from rf12_canSend() and it does indeed look vulnerable.</p>
<p>This is the what it looks like without all the #ifdefs...</p>
<p>static uint8_t rf12_byte (uint8_t out) {<br />
	&nbsp;&nbsp;&nbsp; SPDR = out;<br />
	&nbsp;&nbsp;&nbsp; // this loop spins 4 usec with a 2 MHz SPI clock<br />
	&nbsp;&nbsp;&nbsp; while (!(SPSR &amp; _BV(SPIF)))&nbsp;;<br />
	&nbsp;&nbsp;&nbsp; return SPDR; }</p>
<p>All it does is write the value &#39;out&#39; to the SPI and then wait for the SPIF bit to be set in the SPSR register, which happens when the SPI transfer is complete. It then reads the SPI data register, SPDR, which clears the SPIF bit.</p>
<p>The immediate problem I can see is that this function is also called by the RFM12 interrupt routine so if an RFM12 interrupt occurs when this function is waiting in the while loop then the SPIF will be cleared in the interrupt routine&nbsp;and the outer loop&nbsp;will wait forever for it to be set. As the comment in the code says this window is only a few microseconds which could explain why it doesn&#39;t happen very often.</p>
<p>There may also be other areas in the code where this can happen too.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9723"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Sun, 10/02/2013 - 08:46.</div>
    <div class="content">
     <p>That is looking good Martin.</p>
<p>I guess that the next step is a tiny piece of code that focuses on this vulnerability and quickly produces &#39;reliable&#39; errors. If we can reach that stage then the problem can be passed to jeelabs for the necessary changes to be made.</p>
<p>I am game for more testing. Who is going to write this &#39;nasty&#39; bit of code? :)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9729"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Sun, 10/02/2013 - 14:49.</div>
    <div class="content">
     <p>Brian: Why is there a rf12_recvDone() before rf12_canSend(), which isn&#39;t being checked for its return value? It seems unnecessary and as far as I know, the examples from JCW doesn&#39;t do this:&nbsp;http://jeelabs.org/2011/05/07/rf12-skeleton-sketch/</p>
<p>No clue if it would be possible for it to cause hangs, but you never know (although Martins suggestion is probably more likely).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9730"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Sun, 10/02/2013 - 16:43.</div>
    <div class="content">
     <p><em>Why is there a rf12_recvDone() before rf12_canSend()</em></p>
<p>It&#39;s what JeeLabs recommend. There&#39;s a couple of blog posts on their website about this.</p>
<p>Incidentally, does anyone here know JCW? It would be good to get him involved now we&#39;re suspecting bugs in his code.</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9731"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Sun, 10/02/2013 - 17:04.</div>
    <div class="content">
     <blockquote><p>It&#39;s what JeeLabs recommend. There&#39;s a couple of blog posts on their website about this.</p>
</blockquote>
<p>Care to point out one for me? Can&#39;t find anything about doing things like that, when there already is one loop polling rf12_recvDone() like here.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9733"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1774" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1774" title="View user profile.">PaulOckenden</a> on Sun, 10/02/2013 - 17:59.</div>
    <div class="content">
     <p>Here:&nbsp;http://oldred.jeelabs.net/projects/cafe/wiki/Rf12_canSend()</p>
<p>I found a blog post which went into this in more detail earlier, but I can&#39;t find it now.</p>
<p>P.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9734"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Sun, 10/02/2013 - 18:25.</div>
    <div class="content">
     <blockquote><p>Note that even if you only want to send out packets, you still have to call rf12_recvDone() periodically, because it keeps the RF12 logic going.</p>
</blockquote>
<p>My point exactly, we are not only sending packets, we are sending and receiving. In Brians code, there is already a call to&nbsp;rf12_recvDone() at the beginning of loop() which keeps the logic going. The one before rf12_canSend() could return true without the code acting appropriate, but I&#39;m not sure it would have any ill effects other than missing a packet(?).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9736"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1747" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1747" title="View user profile.">Petrik</a> on Sun, 10/02/2013 - 20:25.</div>
    <div class="content">
     <p>Just out of curiosity: does everyone who has a hang up problem have an 1-wire sensor connected ?... or is there someone with this problem without an 1-wire sensor ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9741"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Sun, 10/02/2013 - 23:21.</div>
    <div class="content">
     <p>Cool that we&#39;re heading in a certain direction. But what I still don&#39;t understand is, why does my emonTx never lock up and my emonGLCD within 24h? EmonTx uses the same function calls, right?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9744"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Mon, 11/02/2013 - 07:14.</div>
    <div class="content">
     <p>Because of RX and TX, not just TX?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9745"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Mon, 11/02/2013 - 07:21.</div>
    <div class="content">
     <p>Another interesting thing to try: <a href="http://jeelabs.net/boards/6/topics/167" title="http://jeelabs.net/boards/6/topics/167">http://jeelabs.net/boards/6/topics/167</a> Look at the link back to the old forum also. Seems like a partly rewritten RFM12b driver, maybe it addresses the potential issues Martin saw? Haven&#39;t had time to compare the code myself yet.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9748"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Mon, 11/02/2013 - 09:30.</div>
    <div class="content">
     <p><em>I just had a quick look at rf12_byte(), which is called from rf12_canSend() and it does indeed look vulnerable.</em></p>
<p>Yes, and it does not only look vulnerable, it is also completely useless!. I think I repeat this, but the rf12_byte() call does not assert the chip select of the RFM12B. So it will never read valid data from the chip! So the function call is at least useless. And I think it might be dangerous, too (see Martins explanation above. Could it be that asserting CS of the RFM12B will keep it from generating interrupts?).</p>
<p>First thing should be to either remove this call or replace by the (correct) call to rf12_xfer(). Somebody out there who wants to try that (I do not own an emonGLCD)?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9749"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Mon, 11/02/2013 - 09:50.</div>
    <div class="content">
     <p><em>First thing should be to either remove this call or replace by the (correct) call to rf12_xfer(). Somebody out there who wants to try that (I do not own an emonGLCD)?</em></p>
<p>I think we should try and prove this really is the problem area first.</p>
<p>How about this....</p>
<p>Make a copy of rf12_byte() and call it something like rf12_byte_copy(). Then change rf12_canSend() to call this new version.</p>
<p>In the new version add a bit of delay before the while statement. This will create a much longer window where SPIF may get cleared by an interrupt. You could also toggle an unused pin or LED in the while loop so you could prove that is where the CPU is stuck. Something like this should do it...</p>
<p>static uint8_t rf12_byte_copy (uint8_t out) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp; SPDR = out;<br />
	&nbsp;&nbsp;&nbsp;&nbsp; // this loop spins 4 usec with a 2 MHz SPI clock<br />
	&nbsp;&nbsp;&nbsp; delay(1);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; while (!(SPSR &amp; _BV(SPIF))) digitalWrite(TESTPIN,digitalRead(TESPIN)?LOW:HIGH)&nbsp;;<br />
	&nbsp;&nbsp;&nbsp;&nbsp; return SPDR; }</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9751"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Mon, 11/02/2013 - 10:07.</div>
    <div class="content">
     <p>This is a good idea to find if this is the critical point.</p>
<p>You can also set a flag (volatile variable) in the ISR which is cleared entering your modified rf12_byte_copy() routine and checked just after the delay(1).</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9753"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 11/02/2013 - 10:09.</div>
    <div class="content">
     <p>Martin</p>
<p>Thanks for that. I shall have a look at this tonight. My current test platform is ideal for this because the lock-up happens so rarely and if your idea seriously aggravates the&nbsp; problem then we are getting much closer.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9781"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 11/02/2013 - 16:11.</div>
    <div class="content">
     <p>I believe in small increments so the only change I have made initially is this:</p>
<p>	static uint8_t rf12_byte (uint8_t out) {<br />
	#ifdef SPDR<br />
	&nbsp;&nbsp;&nbsp; SPDR = out;<br />
	&nbsp;&nbsp;&nbsp; // this loop spins 4 usec with a 2 MHz SPI clock<br />
	&nbsp;&nbsp;&nbsp; delay(1); // BD test code<br />
	&nbsp;&nbsp;&nbsp; while (!(SPSR &amp; _BV(SPIF)))<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;<br />
	&nbsp;&nbsp;&nbsp; return SPDR;</p>
<p>	The result is the LCD display is initialised correctly and the simple test of covering the light sensor continues to control the backlight but no data appears to be recieved from the emonTx. This continues for about 1 minute and then the watchdog trap activates with function code 7 displayed.</p>
<p>	This is the code 7 part of the sketch:</p>
<p>	&nbsp;&nbsp;&nbsp;&nbsp; function=7;<br />
	&nbsp;&nbsp;&nbsp;&nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);<br />
	&nbsp;&nbsp;&nbsp;&nbsp; function=8;<br />
	&nbsp;&nbsp;&nbsp;&nbsp; rf12_sendWait(0);</p>
<p>	Clearly 1mS is too long so I tried this:</p>
<p>	static uint8_t rf12_byte (uint8_t out) {<br />
	#ifdef SPDR<br />
	&nbsp;&nbsp;&nbsp; SPDR = out;<br />
	&nbsp;&nbsp;&nbsp; // this loop spins 4 usec with a 2 MHz SPI clock</p>
<p>	for(int test_delay = 0; test_delay &lt; 100; test_delay++)<br />
	{<br />
	__asm__ __volatile__ (&quot;nop\n\t&quot;);<br />
	}</p>
<p>	&nbsp;&nbsp;&nbsp; while (!(SPSR &amp; _BV(SPIF)))<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;<br />
	&nbsp;&nbsp;&nbsp; return SPDR;</p>
<p>	That was also too long but the loop reduced to 50 is now running on both GLCD:</p>
<p>	for(int test_delay = 0; test_delay &lt; 50; test_delay++)<br />
	{<br />
	__asm__ __volatile__ (&quot;nop\n\t&quot;);<br />
	}</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9782"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Mon, 11/02/2013 - 16:19.</div>
    <div class="content">
     <p>Brian: remember that rf12_byte is called from other functions as well, so do as Martin wrote and create a copy of it which is only called from rf12_canSend. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9783"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Mon, 11/02/2013 - 16:22.</div>
    <div class="content">
     <p>Did you change the rf12_byte function&nbsp;in the library Brian, rather than make a copy?</p>
<p>The reason I suggested a copy is because the function is also called from the interrupt routine and we don&#39;t want to disturb the timing there.</p>
<p>If the code is running with the delay you&#39;ve added though it should still fail slightly more often than before if this is indeed the problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9784"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Mon, 11/02/2013 - 16:23.</div>
    <div class="content">
     <p>I&#39;m too slow :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9787"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 11/02/2013 - 17:05.</div>
    <div class="content">
     <p>Ahh! more to this than I thought!</p>
<p>I have now added a copy --- static uint8_t rf12_byte_copy (uint8_t out) {</p>
<p>Which is only called from rf12_canSend()</p>
<p>The delay is now delay(1); as suggested.</p>
<p>Both running at the moment - thanks guys.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9794"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 11/02/2013 - 18:45.</div>
    <div class="content">
     <p>Running with the delay at 1mS on both units there were no problems after 1 Hour so I put the delay up to 100mS on one unit only. The longer delay trapped after 20 minutes with function code 6 displayed but prior to the trap everything was working normally.</p>
<p>I could add the testpin stuff etc but it&#39;s not entirely convenient and it probably will not change things much. I was hoping that when we are reasonably convinced this is the problem area we can cook up a tiny bit of code that jeelabs can run to see the problem for themselves. Alternatively is this enough?</p>
<p>Anyhow this is just an update and the test is running again. I shall set the delay to 10mS for the overnight run.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9796"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 11/02/2013 - 19:38.</div>
    <div class="content">
     <p>OK, both units - one with delay(1); and the other delay(100); are locking up reliably now with function code 6.</p>
<p>The thing that really puzzles me is that the temperature display is always shown as 0.2. This occurs in this bit of code:</p>
<p>&nbsp;// Display the current and maximum temperature of the Triac<br />
	&nbsp;<br />
	&nbsp; dtostrf((controllertemp/100),0,1,str);</p>
<p>	&nbsp; glcd.drawString_P(68,58,PSTR(&quot;Tp &quot;));<br />
	&nbsp; glcd.drawString(78,58,str);<br />
	&nbsp;<br />
	&nbsp;// Now display maximum temperature<br />
	&nbsp;<br />
	&nbsp; if(controllertemp&gt;maxcontrollertemp)<br />
	&nbsp; {<br />
	&nbsp;&nbsp;&nbsp; maxcontrollertemp=controllertemp;<br />
	&nbsp; }<br />
	&nbsp; dtostrf((maxcontrollertemp/100),0,1,str);</p>
<p>	&nbsp; glcd.drawString_P(100,58,PSTR(&quot;Mx &quot;));<br />
	&nbsp; glcd.drawString(110,58,str);</p>
<p>I don&#39;t understand how that can happen.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9801"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Mon, 11/02/2013 - 21:09.</div>
    <div class="content">
     <p>I&#39;m not even sure we need test code for this, it&#39;s quite obvious that this can go wrong when the interrupt comes at the wrong time. The rf12mods branch seems to handle things a bit differently, it might already be addressed there.</p>
<p>It&#39;s also interesting to see the comments in the code on rf12_canSend(): &quot;no need to test with interrupts disabled&quot; Seems like there has been a check earlier, but then removed. Can&#39;t see any history of this on GitHub though. Disabling interrupts there should fix this problem as far as I understand, not sure what it could mess up though.</p>
<p>Another interesting part in the code:&nbsp;rf12_control() disables interrupts &quot;to avoid clashes on the SPI bus&quot;. The function calls rf12_xfer(), which calls rf12_byte().</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9807"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Tue, 12/02/2013 - 08:12.</div>
    <div class="content">
     <p>Brian said:</p>
<p><em>The thing that really puzzles me is that the temperature display is always shown as 0.2.&nbsp; </em></p>
<p>OK you can all stop worrying now :)</p>
<p>It&#39;s a trivial error on my part which I have fixed and&nbsp; is not worth explaining.</p>
<p>Brian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9809"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="o_cee&#039;s picture" title="o_cee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by o_cee (not verified) on Tue, 12/02/2013 - 09:08.</div>
    <div class="content">
     <p>Brian: Could you try to add cli() in the beginning of&nbsp;rf12_byte copy, and sei() at the end? Even with the delay, that should work if our hypothesis is correct.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9816"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jcw&#039;s picture" title="jcw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by jcw (not verified) on Tue, 12/02/2013 - 10:53.</div>
    <div class="content">
     <p>Whoa, great detective work - thx Oscar for the email.</p>
<p>I&#39;m considering the following change to rf12.cpp - could someone here verify that it does indeed solve the problem?</p>
<pre>
/// rf12_recvDone() periodically, because it keeps the RFM12B logic going. If
/// you don&#39;t, rf12_canSend() will never return true.
uint8_t rf12_canSend () {
-    // no need to test with interrupts disabled: state TXRECV is only reached
-    // outside of ISR and we don&#39;t care if rxfill jumps from 0 to 1 here
+    // need interrupts off to avoid a race (and enable the RFM12B, thx Jorg!)
+    // see <a href="http://openenergymonitor.org/emon/node/1051?page=3" title="http://openenergymonitor.org/emon/node/1051?page=3">http://openenergymonitor.org/emon/node/1051?page=3</a>
     if (rxstate == TXRECV &amp;&amp; rxfill == 0 &amp;&amp;
-            (rf12_byte(0x00) &amp; (RF_RSSI_BIT &gt;&gt; 8)) == 0) {
+            (rf12_control(0x0000) &amp; RF_RSSI_BIT) == 0) {
         rf12_xfer(RF_IDLE_MODE); // stop receiver
-        //XXX just in case, don&#39;t know whether these RF12 reads are needed!
-        // rf12_xfer(0x0000); // status register
-        // rf12_xfer(RF_RX_FIFO_READ); // fifo read
         rxstate = TXIDLE;
         return 1;
     }</pre><p>-jcw</p>
<p>PS. Now added as issues on the JeeLib issue tracker -&nbsp;https://github.com/jcw/jeelib/issues</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9817"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1824" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1824" title="View user profile.">MartinR</a> on Tue, 12/02/2013 - 10:45.</div>
    <div class="content">
     <p><em>It&#39;s a trivial error on my part which I have fixed and&nbsp; is not worth explaining.</em></p>
<p>That&#39;s a relief, didn&#39;t fancy another treasure hunt - interesting journey though it was!</p>
<p>I agree with o_cee&#39;s comment above, disabling interrupts in rf12_byte_copy would be the final proof if any were needed. After proving this you could then remove the delay and you should have a temporary solution with&nbsp;no more lockups if this is the only problem.</p>
<p>Well done for sticking with the problem Brian and not getting distracted by temporary fixes.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9818"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Tue, 12/02/2013 - 11:05.</div>
    <div class="content">
     <p>Jean-Claude Wippler</p>
<p>Your suggested mod is now running here on two units but the test does contain the delay(1); described above otherwise it will take weeks to see a result. This way if no lock-up is seen within say 24 Hours then things will look promising.</p>
<p>I shall update the group tomorrow or before if it fails.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9820"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Tue, 12/02/2013 - 11:52.</div>
    <div class="content">
     <p>JC,</p>
<p>would still be interesting to know if rf12_control() (with interrupts disabled) is really needed or if rf12_xfer() would also work due to asserting the CS (which might keep the RFM12B from generating an interrupt while being &#39;selected&#39;) !?!</p>
<p>Do you (or anyone else) know this from your experience with the RFM12B?</p>
<p>BR, J&ouml;rg.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9823"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jcw&#039;s picture" title="jcw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by jcw (not verified) on Tue, 12/02/2013 - 14:18.</div>
    <div class="content">
     <p>I know of no docs saying that the RFM12B won&#39;t generate an interrupt while selected. Disabling just the RFM12B interrupt, as rf12_control&nbsp;does seems like a safe bet. If it&#39;s easy to test, we could try without and use rf12_xfer to see what happens.</p>
<p>PS. Thanks for testing, Brian!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9824"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Tue, 12/02/2013 - 14:56.</div>
    <div class="content">
     <p>The reason why I asked is the following:</p>
<p>If rf12_xfer() is generally not safe outside interrupts, then the</p>
<pre>
         rf12_xfer(RF_IDLE_MODE); // stop receiver</pre><p>would also not be safe (and should be replaced by rf12_control())!</p>
<p>And then generally rf12_control() should be used everywhere outside interrupts.</p>
<p>Or am I wrong there?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9835"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jcw&#039;s picture" title="jcw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by jcw (not verified) on Wed, 13/02/2013 - 09:46.</div>
    <div class="content">
     <p>Yes, in general that&#39;s indeed a good idea (rf12_control&nbsp;was added later on).<i>&nbsp;</i>In some cases it can be avoided by looking at what states the driver can be in at that point. Here, I think you&#39;re right - I&#39;ve added the change to commit as soon as the previous change has been &quot;somewhat&quot; confirmed. Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9837"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Wed, 13/02/2013 - 10:27.</div>
    <div class="content">
     <p>Brian said:<br />
	<em>I shall update the group tomorrow or before if it fails.</em></p>
<p>	Here is the update but first a reminder. The two emonGLCD test platforms have been running code with Martin&#39;s additional delay(1); and the result was a fairly consist one or two lock-ups every 90 minutes.</p>
<p>	The test was to add JC&#39;s fix but leave in Martin&#39;s delay.</p>
<p>	The result after 24 Hours is no lock-up on either unit. Not conclusive but extremely encouraging.</p>
<p>	The best thing to do now is a beta release and then all the other users who have this problem can simply re-compile and we will have several tests running in parallel.</p>
<p>	On a different tack - this exercise has been my first experience of such a collaborative effort and I am very impressed with the quality of the contributions and have enjoyed the ride so well done everyone!</p>
<p>	Brian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9844"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jcw&#039;s picture" title="jcw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by jcw (not verified) on Wed, 13/02/2013 - 15:51.</div>
    <div class="content">
     <p><em>Yep - the power of open source: everybody wins!</em></p>
<p>I&#39;ve checked in new changes for the RF12&nbsp;driver, see&nbsp;https://github.com/jcw/jeelib/issues/33</p>
<p>Also includes a new rf12_sendNow() wrapper around rf12_canSend() and rf12_sendStart(), with updated docs over here:&nbsp;http://jeelabs.net/pub/docs/jeelib/RF12_8cpp.html#func-members</p>
<p>If you comment on GitHub, I&#39;ll get an email ping right away.</p>
<p>Allow me to chime in and thank everyone as well - this sort of deep testing helps a&nbsp;<em>lot</em> because then the issue becomes clear enough to be able to fix it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9950"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1936" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="mad_dad&#039;s picture" title="mad_dad&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1936" title="View user profile.">mad_dad</a> on Sun, 17/02/2013 - 22:09.</div>
    <div class="content">
     <p>So is there a final solution to this for the emonglcd&nbsp;code</p>
<p>A Summary of the last 4 pages perhaps</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9959"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 18/02/2013 - 08:40.</div>
    <div class="content">
     <p>Yes there is a solution. A vulnerability was found in the jeelib code.</p>
<p>The jeelib problem has been fixed and a release has been made - <a href="https://github.com/jcw/jeelib/issues/33" title="https://github.com/jcw/jeelib/issues/33">https://github.com/jcw/jeelib/issues/33</a></p>
<p>That&#39;s it.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9979"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Mon, 18/02/2013 - 20:45.</div>
    <div class="content">
     <p>Awesome work guys, many thanks, I&#39;ve been following avidly, though unfortunately do to working away for the last 4 weeks, I&#39;ve not been able to contribute much.</p>
<p>So is there a simple summary of what I should do to get my system back up and working - what code changes to do or libraries to download - any links would be most useful.</p>
<p>An idiots step by step to implementing the fixes?</p>
<p>Many thx</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9980"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 18/02/2013 - 20:58.</div>
    <div class="content">
     <p>Click <a href="https://github.com/jcw/jeelib">here</a>.</p>
<p>Then download the zip file and replace the jeelib library in your library area with the new one. I had to change the name on my system.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9983"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Mon, 18/02/2013 - 21:31.</div>
    <div class="content">
     <p>Hi Brian</p>
<p>Is that all thats&nbsp;needed... There is no need to change any of the code for the GLCD&nbsp;sketch at all? Just as i thought there was a problem as well with the sending. (kudge?)</p>
<p>int i = 0; while (!rf12_canSend() &amp;&amp; i&lt;10) {rf12_recvDone(); i++;}&nbsp; // if ready to send + exit loop if it gets stuck as it seems too<br />
	&nbsp;&nbsp;&nbsp; rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // send emonglcd data<br />
	&nbsp;&nbsp;&nbsp; rf12_sendWait(0);</p>
<p>Just i have my folks that use the history page a lot (saves them going into the roof to look at the inverter and under the stairs every day, Yes they are still new to the solar thing and still check everyday)</p>
<p>Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9984"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Mon, 18/02/2013 - 21:37.</div>
    <div class="content">
     <p>I got rid of the kludge a long while ago so have not tried putting it back in.</p>
<p>As for the history stuff - I have never tried it.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10154"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Barry Broom&#039;s picture" title="Barry Broom&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Barry Broom (not verified) on Wed, 27/02/2013 - 15:00.</div>
    <div class="content">
     <p>Hi all. I have applied the JeeLib fix to the standard SolarPV emonGLCD build. It sometimes freezes up, but less frequently now. Is anyone still having issues with emonGLCD freezing up still?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10171"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Thu, 28/02/2013 - 09:02.</div>
    <div class="content">
     <p>Yes, I am still getting lockup&#39;s, but I still have the history screen active so was wondering if that had anything to do with it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10199"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Barry Broom&#039;s picture" title="Barry Broom&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Barry Broom (not verified) on Fri, 01/03/2013 - 08:58.</div>
    <div class="content">
     <p>Same here, I am running the history screen. I am dealing with my third R-Pi emonCMS rebuild after two SD card failures so don&#39;t have time to look into this issue at the moment. On the positive side, my emonTx has run fault free for months!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10204"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Fri, 01/03/2013 - 10:43.</div>
    <div class="content">
     <p>Just for info. &nbsp;I&#39;ve got a v1.4 that still seems to lock up but now at weekly intervals not hourly or daily.&nbsp;</p>
<p>But my parents have a v1.3 that locks up daily some times still hourly. Running from the same code as the v1.4. (My parents would have no idea how to program one so I go round with the same laptop to re program theirs). The v1.3 has been modded to run the screen at 3.3v not the usual 5v as shipped.&nbsp;</p>
<p>Don&#39;t know how this could effect anything though. Just throwing it into the mix.&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10209"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1510" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="matt-carbon-coop&#039;s picture" title="matt-carbon-coop&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1510" title="View user profile.">matt-carbon-coop</a> on Mon, 04/03/2013 - 11:38.</div>
    <div class="content">
     <p>Yeah, I&#39;m getting freeze up&#39;s about every 2-4 days on all 15 emonGLCD v1.4 units I&#39;m running. But they&#39;re loaded with a standard HomeEnergyMonitor example with a DHT22 humidity/temp sensor in place of the <span class="st">DS18B20, rather than the Solar example, so it&#39;s probably a different problem. I&#39;ve copied the ino below in case anyone has any ideas</span> that might help. I&#39;m using the latest Jeelib library.</p>
<p>I&#39;m putting in the wdt code for now where I can, until I&#39;ve time to troubleshoot.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10465"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Thu, 14/03/2013 - 11:25.</div>
    <div class="content">
     <p>Hi Guys,&nbsp;</p>
<p>Great work tacking down and getting this fix pushed to the JeeLib library. This really is an amazing example of open source at it&#39;s best!</p>
<p>I have updated the emonGLCD SolarPV_lowmem_dev example to use the new rf12_sendnow wrapper and have updated my JeeLib to the latest version from JCW. As of today I&#39;ve started a test running here in the lab and in my house using the updated code. It would be great if anyone else wants to run the same code and report back:&nbsp;<a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev">https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev</a></p>
<p>Fingers crossed!</p>
<p>Thanks again. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10475"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Barry Broom&#039;s picture" title="Barry Broom&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Barry Broom (not verified) on Fri, 15/03/2013 - 10:26.</div>
    <div class="content">
     <p>Hi Glyn,</p>
<p>Thanks for the update on this. I have loaded your new low-mem code to my v1.3 emonGLCD using the updated JeeLib library. Mine last crashed 6 days ago, so it may be a while before I feedback. Fingers crossed!</p>
<p>Cheers,<br />
	Barry</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10543"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Barry Broom&#039;s picture" title="Barry Broom&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Barry Broom (not verified) on Tue, 19/03/2013 - 19:22.</div>
    <div class="content">
     <p>Results from my tests:</p>
<p>The low-mem sketch was disastrous for me. It always locks up after 9 minutes of running. I did this four times. I had problems trying the low-mem sketch before the JeeLabs code change.</p>
<p>I did apply the JeeLabs code changes to the current SolarPV sketch (without history page) and it has been running fine for the last four days.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10607"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Sun, 24/03/2013 - 13:37.</div>
    <div class="content">
     <p>Barry, I experience the same problems with the firmware. Locks up in less than 20 minutes.</p>
<p>EDIT: Loading the regular SolarPV sketch like Barry seems to work just fine :-).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10627"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Barry Broom&#039;s picture" title="Barry Broom&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Barry Broom (not verified) on Mon, 25/03/2013 - 20:58.</div>
    <div class="content">
     <p>I have been running the SolarPV sketch (without history page) with Glyn&#39;s code changes to bring in the JeeLib fix. It has run perfectly for over a week now, so I consider this issue as resolved. Thank you very much! I&#39;ll give the code with the history screen a go, as I am sure this will work now.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10628"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1958" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1958" title="View user profile.">fluppie007</a> on Mon, 25/03/2013 - 21:08.</div>
    <div class="content">
     <p>Barry, did you use this code without changes or did you modify something in the code: <a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV" title="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV">https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV</a></p>
<p>Because mine locked up 5 hours ago. I&#39;m running Arduino IDE 1.5.2 with&nbsp;the latest onewire, dallastemp, emonlib en jeelib libraries.</p>
<p>EDIT:<br />
	I changed the the following lines at the end of the SolarPV sketch:</p>
<p>rf12_sendNow(0, &amp;emonglcd, sizeof emonglcd);<br />
	rf12_sendWait(2);</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10664"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/2765" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="casestudies&#039;s picture" title="casestudies&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/2765" title="View user profile.">casestudies</a> on Wed, 27/03/2013 - 06:53.</div>
    <div class="content">
     <p>Last December, there was some discussion about stability issues with the EmonGLCD. The one I have setup continues to lock up after about 12-24 hours of running. Was this issue resolved in the latest updates on Github? The unit I built was for my parents who live a few hundred miles away, so I can&#39;t continually&nbsp; update the firmware for testing.</p>
<p>I&#39;m not using it for monitoring a PV setup--just monitoring home power usage with CT clamps. I have two temperatures that I monitor as well; one on the EmonGLCD and one on the EmonTX. If there is a fix, what file should I upload for monitoring home power usage? Link would be great as I&#39;m rather lost. Also, I&#39;m using a Raspberry Pi for the base station so I&#39;d like to send the GLCD the current time from the Pi.</p>
<p>The EmonTX I have setup has been running for about 3.5 &nbsp;months, and hasn&#39;t caused any problems (i.e. the Raspberry Pi is still able to read data from it). It&#39;d be great to get the display working so my parents can look at current usage (easier than talking them through how to use the emoncms website).</p>
<p>Thanks in advance!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10665"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1775" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1775" title="View user profile.">Brian D</a> on Wed, 27/03/2013 - 07:49.</div>
    <div class="content">
     <p>Glyn recently published this <a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV_lowMem_Dev">link</a> to the fix. If you only download the *.ino file that will not fix the problem. You also need to update with the jeelib fix which can be found via a link in Glyn&#39;s post.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10983"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Barry Broom&#039;s picture" title="Barry Broom&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by Barry Broom (not verified) on Sun, 07/04/2013 - 21:31.</div>
    <div class="content">
     <p>Hi fluppie007. Sorry for the delay, I&#39;ve been busy!</p>
<p>Like you, I have used the main EmonGLCD SolarPV branch at <a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV" title="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV">https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV</a></p>
<p>I have removed the last three lines:</p>
<pre>
    int i = 0; while (!rf12_canSend() &amp;&amp; i&lt;10) {rf12_recvDone(); i++;} // if ready to send + exit loop if it gets stuck as it seems too
    rf12_sendStart(0, &amp;emonglcd, sizeof emonglcd); // send emonglcd data
    rf12_sendWait(0);  </pre><p>and replaced them with the changes Glyn made to the &#39;low_mem&#39; branch;</p>
<pre>
    rf12_sendNow(0, &amp;emonglcd, sizeof emonglcd);                     //send temperature data via RFM12B using rf12_sendNow wrapper - <a href="https://github.com/jcw/jeelib/issues/33" title="https://github.com/jcw/jeelib/issues/33">https://github.com/jcw/jeelib/issues/33</a>
    rf12_sendWait(2);</pre><p>With the correct version of the JeeLib libraries, EmonGLCD reliability is massively improved. I would like to see these changes included in the main SolarPV branch, ideally with the history feature reinstated. Glyn, if you reading this, I can thoroughly recommend the change to help new installations work correctly!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11174"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Fri, 12/04/2013 - 18:54.</div>
    <div class="content">
     <p>Hi guys,&nbsp;</p>
<p>As of the 14th March I have updated the Solar PV example on github to use the new sendNow() wrapper. Sorry for the delay in posting I wanted to prove to myself that it has actually fixed the issue. I have been running the SolarPV example in my own home for over two weeks now and it has not crashed. This is a big improvement, before was crashing several times a day.</p>
<p>The current Solar PV example on github consists of the Solar PV overview page and a press of the top button reveals a week view history page. I have found this to be very useful as a quick check of how the week is looking solar PV generation wise.&nbsp;</p>
<p>I have also mirrored the change in the Home Energy Monitor Example.</p>
<p>I will post if I find any issues but so far so good!</p>
<p>Solar PV example:&nbsp;<a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV">https://github.com/openenergymonitor/EmonGLCD/tree/master/SolarPV</a></p>
<p>Home energy monitor example:<a href="https://github.com/openenergymonitor/EmonGLCD/tree/master/HomeEnergyMonitor">&nbsp;https://github.com/openenergymonitor/EmonGLCD/tree/master/HomeEnergyMonitor</a></p>
<p>Thanks a lot to everyone who has helped solve this issue. It&#39;s been a real example of the power of open source software and development and testing. Onwards and upwards.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11175"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Fri, 12/04/2013 - 18:56.</div>
    <div class="content">
     <p>I have moved the LowMemDev example to the /old folder. Please don&#39;t use it, it actually seemed to crash the worst even with the fix. I&#39;m not sure why this is but it doesn&#39;t really matter as the main example seems to have been proved stable.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11181"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/3319" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-3319.jpg" alt="johny5_uk&#039;s picture" title="johny5_uk&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/3319" title="View user profile.">johny5_uk</a> on Fri, 12/04/2013 - 21:12.</div>
    <div class="content">
     <p>I have just updated my GLCD as above but also enabled all of the 4 pages so will see how it goes.</p>
<p>&nbsp;</p>
<p>My display used to lockup once or twice a day before, I was also pleasantly surprised after updating emoncms the other day, the time started to sync up with the display (I must have missed a thread on this one).</p>
<p>I am just running a Rpi with emontx.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11713"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/10" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/10" title="View user profile.">glyn.hudson</a> on Mon, 29/04/2013 - 22:47.</div>
    <div class="content">
     <p>I&#39;m happy to report that my emonGLCD has been totally stable for months now running the current emonGLCD Solar PV code &#39;&#39;as it is&#39; form GitHub. Happy days!</p>
<p>It&#39;s great to finally be able to finally (I hope!) draw a line under this thread&nbsp;7 months after this issue was first raised!</p>
<p>I would be interested to hear from anyone else who has had success who were previously plagued by lockups. I&#39;m guessing by how this thread has gone quite that everyone is now enjoying their rock solid stable&nbsp;emonGLCDs!</p>
<p>Thanks again to everyone who helped.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11765"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Wed, 01/05/2013 - 09:31.</div>
    <div class="content">
     <p>Hi Glyn</p>
<p>Quick answer is yes and no..</p>
<p>My V1.4 is fine with the new code and has not crashed once..</p>
<p>My parents V1.3 still crashes once ever 1-2 days. Its had the 3.3v mod done for the LCD.<br />
	Both running the same code loaded from the same laptop. Bar the change for the Switches.</p>
<p>Only difference is mine is run from a lipo and theirs is run from the shop USB.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Sat, 13/07/2013 - 10:39.</div>
    <div class="content">
     <p>Hi Rob, did you resolve the V1.3 crashing?</p>
<p>I&#39;ve got a V1.4 that still hangs every couple of days, it&#39;s custom code to display Solar PV generation</p>
<p>1 x emonTx with 3 x CT&#39;s for Import, Generation and Consumption plus temp<br />
	1 x emonTx with 3 x CT&#39;s one of each of the 3 individual inverters plus temp (Yes 3 :) )</p>
<p>on top of that there are:</p>
<p>1 x low power emonTx monitoring temperature of the hot water cylinder<br />
	1 x low power emonTx monitoring room conditions<br />
	1 x emonTx monitoring room conditions</p>
<p>then<br />
	4 x Jeenodes monitoring various environmental paramaeters</p>
<p>the OKG emonBase runs just fine and collates all the data to emoncms.org, the emonGLCD hangs every couple of days.<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13619"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Sun, 14/07/2013 - 13:30.</div>
    <div class="content">
     <p>Hi, No i did not..</p>
<p>Iv tried alot and removing some code does seem to help eg its now 3 days but long off mine.. &nbsp;Its so weird.</p>
<p>Well glad to see someone else using jeenodes also.. The wife thinks im mad as iv got them all round the house.</p>
<p>Will let you know if i do find it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13620"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 14/07/2013 - 13:56.</div>
    <div class="content">
     <p>Avontech,</p>
<p>You say the OKG base runs faultlessly, so I&#39;m wondering whether the GLCD is seeing data collisions due to its location that maybe the base isn&#39;t. Is that a possibility? Also, do you have enough spare ram in the GLCD?</p>
<p>Robw,</p>
<p>Your parents&#39; V1.3: I&#39;m just wondering whether the occasional burst of rubbish coming down the supply might be the problem. Have you tried extra smoothing on the 5 V or 3.3 V rails?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13626"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Mon, 15/07/2013 - 17:22.</div>
    <div class="content">
     <p>Hi Robert Wall</p>
<p>The GLCD and OKG base are about 600 mm from each other, so both should be &#39;seeing&#39; the same data and getting the same collisions (if they occur).There may be collisions, maybe the OKG code (NanodeRF_multinode_bulksend) is more resilient?</p>
<p>The GLCD code is pretty small as I&#39;m not using multiple pages, just instantaneous display from the the two emonTx&#39;s with CT&#39;s based on the SolarPV code and screenshot, attached for info:<br />
	&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13630"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/905" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/905" title="View user profile.">robw</a> on Mon, 15/07/2013 - 19:16.</div>
    <div class="content">
     <p>Robert</p>
<p>Both Units are now on lipos (have been for last 3 weeks in my parents case mine since build) Still getting lockups.. Also im getting lockups at my house with their kit so cant be the location.. EG someting&nbsp;in the air (radio)</p>
<p>Iv tried a cap on the 5v in (usb power when we were using that) and also now on the 3.3V in.</p>
<p>Iv used a jeelink to log all data on the same band and it looks clean to me..</p>
<p>Im just cleen out of ideas..</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13636"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 15/07/2013 - 22:57.</div>
    <div class="content">
     <p><em>Robw: I&#39;m just clean out of ideas..</em>&nbsp; I was clutching at straws too...&nbsp; Does the 1.3 have the same bootloader?</p>
<p>Avontech:</p>
<p>Isn&#39;t the OKG code (as far as RF receiving is concerned) almost, if not exactly, the same? I&#39;d need to check but from memory it looks very close.</p>
<p>Is it worth giving this a try: Can you modify your OKG code to resend a composite package of the data (that it has correctly received) and modify the GLCD to accept the data only from the OKG and ignore the original data from the emonTx&#39;s? I can&#39;t think of a good reason why this should work when how you have it now doesn&#39;t, because the GLCD must receive the packet to extract the node ID to be able to know to discard it...&nbsp; Unless it&#39;s tied up with signal strength and an incomplete package not being discarded properly - which was one line of enquiry earlier.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13661"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1189" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Avontech&#039;s picture" title="Avontech&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1189" title="View user profile.">Avontech</a> on Tue, 16/07/2013 - 21:46.</div>
    <div class="content">
     <p>@Robert Wall, I see what you mean :) I&#39;ll give that a go - transmit the data (just what the emonGLCD wants ) at the same time as sending the data to emoncms .... It&#39;ll take me a couple of days to get my head into that space (it&#39;s fried in this weather! )</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13664"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD - Not responding.</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 16/07/2013 - 23:45.</div>
    <div class="content">
     <p><em>&quot; ... my head ... (it&#39;s fried in this weather! )&quot;</em>&nbsp; Me too. Why do you think I&#39;m posting at 00:30 local time? ;-)</p>
<p>What I think you need to do: Make a new struct (like the emonTx code) containing the data destined for the GLCD, then inside the (rf12_recvDone()) branch, you extract that data like you do now in the GLCD, copy it into the new structure and send that in exactly the same way as the emonTx does. (You&#39;ll need to send the data twice - each time half old from one emonTx and half new from the other emonTx, and your new struct must be static or the display will flicker.) In the GLCD, you change the node number it tests for to the OKG&#39;s, then carry on much as you have it.</p>
<p>Don&#39;t blame me if it doesn&#39;t work - as I said, I can&#39;t see why it should. But if it does, it surely raises some interesting questions.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="/emon/node/1051?page=3"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-mrO0Z66Jy4qhV8H8jg3YKCdJQh0E55ssAyb6SPzkNUg" value="form-mrO0Z66Jy4qhV8H8jg3YKCdJQh0E55ssAyb6SPzkNUg"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org">https://community.openenergymonitor.org</a></p>
   
</div>

<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
