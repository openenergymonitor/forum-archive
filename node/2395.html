<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2395 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:00:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonGLCD as an RF signal strength meter | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonGLCD as an RF signal strength meter</h3>
        <span class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Tue, 21/05/2013 - 15:51</span>
        <div class="content"><p>All the recent talk about aerials made me think it would be useful to have a signal strength meter to compare various options. The RFM12B has an analogue signal strength output which can be accessed (if you are prepared to solder a wire onto the module) and a quick Google reveals that quite a few people have used this feature to build various monitors and scanners.</p>
<p>The downside of most, if not all, of these is that they require a host computer for display which isn&#39;t great when you want to wander around the house sniffing out RF.&nbsp;The emonGLCD seems like a much better platform since it has both an RFM12B and an LCD display, so I had a quick play to see how well it could work.</p>
<p>Here&#39;s a snapshot of my first attempt showing an emonTx transmission...</p>
<p><img alt="" src="../sites/default/files/glcdssm.jpg" /></p>
<p>and here&#39;s another one showing a transmission clash, I think this is OOK&nbsp;from my weather station...</p>
<p><img alt="" src="../sites/default/files/glcdssm_intf.jpg" /></p>
<p>It&#39;s very simple at the moment but there&#39;s a lot of potential in this as all sorts of features could be added, like triggering on a particular node ID. The code isn&#39;t really in a state to share yet but I&#39;ll keep playing with it and if there is sufficient interest I&#39;ll upload it when I&#39;m happy with it.</p>
<p><u><strong>Edit: build instructions and sketch are now included further down in this thread</strong></u></p>
  <div class="forum-topic-navigation clear-block">
          <a href="10132.html" class="topic-previous" title="Go to previous forum topic">‹ Couldn&#039;t get EmonTH code to return valid temperatures</a>
              <a href="10129.html" class="topic-next" title="Go to next forum topic">watt calculation with 120V AC-AC adapter ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-12284"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1775.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1775.html" title="View user profile.">Brian D</a> on Tue, 21/05/2013 - 18:39.</div>
    <div class="content">
     <p>Ooooo - I like that!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12285"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Tue, 21/05/2013 - 19:47.</div>
    <div class="content">
     <p>That looks really tidy, I like it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12286"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 21/05/2013 - 22:06.</div>
    <div class="content">
     <p>Wow yes that is nice!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12290"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Tue, 21/05/2013 - 22:29.</div>
    <div class="content">
     <p>Yes, VERY handy! I definitely could use that, as my base and GLCD nodes are about 30 metres apart, with several walls and other large objects between them. Nice hack!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12293"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1658.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1658.jpg" alt="RobP&#039;s picture" title="RobP&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1658.html" title="View user profile.">RobP</a> on Wed, 22/05/2013 - 07:06.</div>
    <div class="content">
     <p>What ingenuity!&nbsp; I like it too!</p>
<p>I feel another order to the shop coming on!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12295"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Wed, 22/05/2013 - 07:30.</div>
    <div class="content">
     <p>Thanks chaps. I think I&#39;ll need a variable timebase so you can see multiple transmissions so this is going to end up being a mini scope, which could be useful for other things too. Here&#39;s a burst from my system with a slower timebase...</p>
<p><img alt="" src="../sites/default/files/glcdssm_reflective.jpg" /></p>
<p>This nicely shows all 6 nodes and the use of timeslots to avoid collisions. Also trying out a reflective display here that doesn&#39;t need a backlight.</p>
<p>Just need to do all the boring fiddly stuff now so you can set options via the pushbuttons etc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12298"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 22/05/2013 - 08:31.</div>
    <div class="content">
     <p>Great idea Martin, sounds really useful for troubleshooting problems and improving system resilience.</p>
<p>For those of us without a GLCD, could this be also be integrated into emonBase so that it can be viewed via laptop/phone etc.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12325"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Fri, 24/05/2013 - 07:21.</div>
    <div class="content">
     <p>I suppose it could Paul, since the signal level will be available on any device equipped with an RFM12, but I see it&#39;s main use as a portable test box for trouble shooting and comparing aerials etc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12326"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Fri, 24/05/2013 - 07:26.</div>
    <div class="content">
     <p>I&#39;ve now got the code developed to the point where it&#39;s ready for others to try if they wish.</p>
<p>The following parameters can now&nbsp;be set via the 3 pushbuttons on the emonGLCD:</p>
<p>timebase (16 milliseconds to 16 seconds)</p>
<p>trigger level</p>
<p>trigger delay</p>
<p>attenuation 0 or 20dB</p>
<p>glitch detection on or off</p>
<p>Since there&#39;s a bit of interest I thought I might write a little &quot;how to&quot; guide. Not sure if it&#39;s best to do this on this thread, a new thread or somewhere else on the site though??</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12328"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Fri, 24/05/2013 - 07:42.</div>
    <div class="content">
     <p><em>I suppose it could Paul, since the signal level will be available on any device equipped with an RFM12, but I see it&#39;s main use as a portable test box for trouble shooting and comparing aerials etc.</em></p>
<p>Would be very nice to put this onto a Jeelink and show the results on a laptop. I really need this :-) ........</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12332"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Fri, 24/05/2013 - 12:31.</div>
    <div class="content">
     <p>I believe that&#39;s been done J&ouml;rg with a program called <a href="http://jeelabs.net/projects/cafe/wiki/NRfMon_-_nano_Spectrum_Analyzer_with_the_RFM12B">NRfMon</a> but I couldn&#39;t make much sense of it when I tried - maybe you&#39;ll have more luck.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12593"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Tue, 04/06/2013 - 11:37.</div>
    <div class="content">
     <p>I thought I should finish documenting this project before I forget how it works!</p>
<p><strong>Firstly the hardware modifications required to gain access to the RFM12B receive signal strength signal</strong>....</p>
<p>This signal is not available via the RFM12B pins so it is necessary to connect a wire to a capacitor on the circuit board. There are 2 versions of the RFM12B, one has a &quot;properly&quot; packaged IC, the other just has a black blob covering the bare chip. The position of the wire is slightly different depending on which version you have...</p>
<p><img alt="" src="../sites/default/files/blob_wire_posn.jpg" /></p>
<p><img alt="" src="../sites/default/files/chip_wire_posn.jpg" /></p>
<p>The signal needs to be connected to an analogue input but there aren&#39;t any free inputs available on the emonGLCD so something has to be sacrificed. The only non-essential function is the LDR, which adjusts the backlight brightness based on ambient light level, so we will use this input. First it is necessary to disconnect or remove the LDR and R6 and then connect the wire from the RFM12B to the top of R6, as shown here...</p>
<p><img alt="" src="../sites/default/files/GLCD_SSM_mods.jpg" /></p>
<p>This is the only modification required to the emonGLCD. It will still run the standard sketches but it will be necessary to disable the automatic backlight brightness function or the brightness will vary with the received signal strength. Something like this...</p>
<p>replace: if ((hour &gt; 22) ||&nbsp; (hour &lt; 5)) glcd.backLight(0); else glcd.backLight(LDRbacklight);</p>
<p>with: if ((hour &gt; 22) ||&nbsp; (hour &lt; 5)) glcd.backLight(0); else glcd.backLight(200);</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12594"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Wed, 05/06/2013 - 16:34.</div>
    <div class="content">
     <p>&nbsp;</p>
<p><strong>And now the software...</strong></p>
<p>This is my prototype, I used separate red and green LEDs here because they are more useful in this application and I used a reflective LCD to improve battery life but the function is identical with a standard emonGLCD..</p>
<p><img alt="" src="../sites/default/files/GLCD_SSM_interface.jpg" /></p>
<p>There are 5 settings which can be controlled via the 3 buttons:</p>
<p>Trigger level - this determines the minimum signal level required to trigger the display</p>
<p>Trigger position - this determines the position on the display of the signal that&nbsp;caused the trigger</p>
<p>Base level&nbsp; - this&nbsp;is the&nbsp;minimum signal level which can be displayed (-80 or -100dBm)</p>
<p>Glitch detector - with this on short signal pulses which could be missed by a normal scan will always be shown</p>
<p>Timebase - this determines the period of a complete scan across the screen (16ms-16s)</p>
<p>Pressing the top button cycles through these 5 settings and the currently selected item will flash. If the top button is held down for 2 seconds&nbsp;the unit will turn off.</p>
<p>The other 2 buttons change the value of the selected setting either up or down. Holding either button will cause the value to change rapidly. If the unit is turned off, pressing either of these buttons will turn it back on.</p>
<p>All settings are stored in EEPROM and will be restored when the unit is turned back on, even if the battery has been removed.</p>
<p>Just for completeness, here is the inside of the prototype unit...</p>
<p><img alt="" src="../sites/default/files/GLCD_SSM_inside.jpg" /></p>
<p>and here&#39;s the sketch...</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12601"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1775.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1775.html" title="View user profile.">Brian D</a> on Tue, 04/06/2013 - 18:21.</div>
    <div class="content">
     <p>Martin - another lovely toy! Thank you.</p>
<p>As usual I fell at the first hurdle. This: #include &lt;avr/sleep.h&gt; led me on an interesting path which became too much so maybe you could post a link to a library file?</p>
<p>I like the user profile photo.</p>
<p>Brian</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Tue, 04/06/2013 - 18:46.</div>
    <div class="content">
     <p>That&#39;s strange Brian, I thought it was part of the standard Arduino installation.</p>
<p>The file should be located under your Arduino installation directory, e.g. for me it&#39;s..</p>
<p>&nbsp;C:\arduino-1.0.1\hardware\tools\avr\avr\include\avr\sleep.h</p>
<p>I don&#39;t think I installed it seperately.</p>
<p><em>I like the user profile photo. -</em> I copied your idea :)</p>
<p>-martin</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12603"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1775.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1775.html" title="View user profile.">Brian D</a> on Tue, 04/06/2013 - 18:51.</div>
    <div class="content">
     <p>Hmm - I have that structure and the file sleep.h</p>
<p>This is the error:</p>
<p>GLCD_SSM.ino: In function &#39;void powerDown()&#39;:<br />
	GLCD_SSM:518: error: &#39;sleep_bod_disable&#39; was not declared in this scope</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12605"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Tue, 04/06/2013 - 19:01.</div>
    <div class="content">
     <p>even stranger, sleep_bod_disable() is defined in my version of sleep.h. Are you using a different Arduino version?</p>
<p>If you just want to try the sketch you can comment that line out as all it does is disable brown-out detection to minimise current when in sleep mode.</p>
<p>Anyone else know a bit more about these include files?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12608"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1775.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1775.jpg" alt="Brian D&#039;s picture" title="Brian D&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1775.html" title="View user profile.">Brian D</a> on Tue, 04/06/2013 - 19:14.</div>
    <div class="content">
     <p>Ok thanks. It <strike>complies</strike> compiles with that line commented out.</p>
<p>The Arduino version is 1.03</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12609"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Tue, 04/06/2013 - 19:13.</div>
    <div class="content">
     <p>I just checked version 1.0 and sleep_bod_disable() isn&#39;t in there Brian so maybe you should install a newer toolset. I think the current version is 1.0.5</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12610"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Tue, 04/06/2013 - 19:14.</div>
    <div class="content">
     <p>oops, a bit slow there. They must have taken the function out again then - weird!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12622"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Wed, 05/06/2013 - 12:21.</div>
    <div class="content">
     <p>I think I&#39;ve worked out what&#39;s going on here Brian. At some point I updated my AVR tool chain because the one supplied with the Arduino package is out of date. The sleep_bod_disable() function is in the updated toolset but not in the Arduino version. Even the latest version 1.0.5 of the Arduino package uses the old AVR tools.</p>
<p>It&#39;s easy enough to write a little macro to replace this function but in the meantime just commenting the line out is fine, especially if you are not running from batteries.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12629"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Wed, 05/06/2013 - 16:35.</div>
    <div class="content">
     <p>I&#39;ve now updated the sketch to include it&#39;s own sleep_bod_disable() macro, version is now 1.01</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13802"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2872.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Marquis27&#039;s picture" title="Marquis27&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/2872.html" title="View user profile.">Marquis27</a> on Thu, 25/07/2013 - 03:41.</div>
    <div class="content">
     <p>Martin,</p>
<p>You&#39;re code is amazing. What a great little tool. That said, I am having a little trouble getting the most out of it&#39;s for troubleshooting my system. &nbsp;Do you think you could provide some guidance as to suggested operation?&nbsp;</p>
<p>What does GD do? What is a good timescale to start at for monitoring these RFM12B signals? And what is a level of reception that should provide mostly reliable communication?&nbsp;</p>
<p>Specifically I am trying to figure out if reception is a part of my problem. I have a emonBase that sometime isn&#39;t updating from my tx as often as it should. Thanks.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13811"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Thu, 25/07/2013 - 10:51.</div>
    <div class="content">
     <p>I&#39;m pleased to hear you are getting some use out of this Mark.</p>
<p>GD (Glitch Detect) can be used to ensure that nothing is missed when using slow timebases. For example, with an 8 second timebase and only 128 pixels on the screen the samples would be 62.5ms apart. With simple sampling every 62.5ms a lot of detail, or even complete transmissions could be missed.</p>
<p>With GD on sampling is done at high speed so there are many samples for each screen pixel. The value displayed on the screen is the largest of all the samples received since the last displayed pixel. This way nothing should be missed.</p>
<p>The timebase really depends on what you are trying to do. If you just want to see the amplitude, and maybe the width, of a transmitted pulse then use a short timebase with the trigger centered so that the pulse nearly fills the screen. If, on the otherhand, you are looking to see if there is anything interfering with the transmission then a timebase greater the the time between transmissions, GD on and the trigger near the left hand side of the screen may be best.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14568"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 24/08/2013 - 16:56.</div>
    <div class="content">
     <p>Hi Martin,&nbsp;</p>
<p>Just came across this thread. Fantastic development, the new version look very nice. Would you mind if I put your sketch up on the emonGLCD&nbsp;GitHub?&nbsp;https://github.com/openenergymonitor/emonglcd and created a blog post about this development? We will give you full credit for the development, we would love you to write the blog post yourself if you fancy?&nbsp;</p>
<p>Keep up the good work.&nbsp;</p>
<p>Cheers,&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14580"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Sun, 25/08/2013 - 06:53.</div>
    <div class="content">
     <p>Yes, that&#39;s fine by me Glyn.</p>
<p>It&#39;s probably best if you do the words but let me know if there&#39;s something that needs explaining that I haven&#39;t covered in this thread.</p>
<p>-martin</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14603"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 26/08/2013 - 14:30.</div>
    <div class="content">
     <p>Blog post is up! Let me know if you want me to add of modify something:</p>
<p><a href="http://openenergymonitor.blogspot.com/2013/08/emonglcd-433-868-mhz-rf-scanner-signal.html">http://openenergymonitor.blogspot.com/2013/08/emonglcd-433-868-mhz-rf-scanner-signal.html</a></p>
<p>Fantastic bit of development.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14606"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Mon, 26/08/2013 - 18:46.</div>
    <div class="content">
     <p>Looks good - thanks Glyn</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16646"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4437.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="oem06&#039;s picture" title="oem06&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/4437.html" title="View user profile.">oem06</a> on Sun, 08/12/2013 - 17:29.</div>
    <div class="content">
     <p>Just a naive question: why do we need to use the same ADC input as the LDR. Couldn&#39;t we just use ADC2 (connected to the Jeeport on AIO) ?</p>
<p>Do I miss something ?</p>
<p>Thanks</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16662"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Sun, 08/12/2013 - 20:54.</div>
    <div class="content">
     <p>ADC2 is used for the middle push button</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27444"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5074.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hatfieldr&#039;s picture" title="hatfieldr&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/5074.html" title="View user profile.">hatfieldr</a> on Fri, 06/02/2015 - 11:19.</div>
    <div class="content">
     <p>Hi Martin I have only just come to this thread but this is a great bit of kit!</p>
<p>Worked out of the box with my new GLCD!</p>
<p>As a novice programmer I wondered if you could help me add the function of &quot;Trigger by node ID&quot; that you mentioned? This would be really useful for optimizing my setup</p>
<p>Regards</p>
<p>Richard</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27446"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD as an RF signal strength meter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 06/02/2015 - 13:17.</div>
    <div class="content">
     <p>Martin comes here only occasionally now, so you might need to wait a while for him to see this.<br />
(It should be even easier with a '69 RF module, as that says it reports signal strength so should not need the wiring mod.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2395"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Be89LiZgxwAgics3BPFd6GZyHiVIwu_1rlzsAmeBxsk" value="form-Be89LiZgxwAgics3BPFd6GZyHiVIwu_1rlzsAmeBxsk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2395 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:00:31 GMT -->
</html>
