<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Mk2 PV Controller, with triac | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/emon/sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/emon/modules/node/node.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/defaults.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system-menus.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/user/user.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/mollom/mollom.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/forum/forum.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/views/css/views.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/comment/comment.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/themes/emon3/style.css?r" />
<style type="text/css" media="all">@import "/emon/sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="/emon/" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="/emon/">Home</a> » <a href="/emon/forum">Forums</a> » <a href="/emon/forum/3">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Mk2 PV Controller, with triac</h3>
        <span class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 15/07/2012 - 16:03</span>
        <div class="content"><p><a href="http://openenergymonitor.org/emon/sites/default/files/IMGP9704.s.jpg"><img alt="" height="225" src="http://openenergymonitor.org/emon/sites/default/files/IMGP9704.s.jpg" width="300" /></a></p>
<p>&gt;&gt;&gt; Before committing to this design, please read my comments about the burden resistor value <a href="http://openenergymonitor.org/emon/node/870#comment-5610">here</a> &lt;&lt;&lt;</p>
<p><span lang="EN-US" style="font-size: 10pt; font-family: Arial;"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">Based on the standard V&amp;I sketch which uses calcVI() in EmonLib, I&rsquo;ve had a system in place for the last couple of months which diverts surplus PV power to our immersion heater.<span style="">&nbsp; </span>This system has proved to be both effective and reliable, and I am most grateful for everyone who has helped me along the way.<span style="">&nbsp; </span>The main downside to this arrangement is that it requires an expensive item of third-party kit to distribute the power.<span style="">&nbsp; </span>(I know that others have found cheaper ways, but my Carlo Gavazzi unit cost me &pound;70).</span></span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">Other contributors to this forum have shown that a standard triac can be easily controlled by an Arduino.<span style="">&nbsp; </span>By using a zero-crossing detector such as the Motorola MOC3041, it should be possible for the Arduino to allocate mains cycles directly to the load rather than delegating this task to a separate device.</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">A Mk2 system of this type has been working in our garage for the last few days.<span style="">&nbsp; </span>The sketch and a schematic diagram are attached, its main features being:</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">- a comprehensive &#39;debug&#39; mode which allows real world conditions to be simulated ;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">- a continuous mode of operation, for both measurement and distribution of power;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">- an &quot;energy bucket&quot; concept which gives precise control of surplus power;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">- interleaved windows for measurement and generation, each only 20mS;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">- a rapid response time to changing conditions (&lt;50mS);</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">- suitable timing for &#39;arming&#39; a zero-crossing trigger device;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">- a single LPF which determines the dc-offset of raw V&amp;I samples;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">- a programmable safety margin for biassing import v. export;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">- minimal calibration is required.</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">As supplied, the sketch is in &lsquo;debug&rsquo; mode.<span style="">&nbsp; </span>This allows the code to be put through its paces without requiring any additional hardware &ndash; just the Arduino.<span style="">&nbsp; </span>When running in this mode, voltage and current samples are synthesized, as is the operation of the triac.<span style="">&nbsp;&nbsp; </span>To convert it to &lsquo;normal&rsquo; mode, just comment out the <b>#define DEBUG</b></span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;"> statement.</span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">&nbsp;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">The algorithms for measuring and distributing power are linked by an &lsquo;energy bucket&rsquo; variable.<span style="">&nbsp; </span>Surplus energy, as measured at the supply point, is recorded in this variable, and power is only allocated to the immersion heater when the available energy has reached a pre-determined level.<span style="">&nbsp; </span>The energy bucket is updated after each complete cycle of the mains, and a decision is then taken as to whether the triac should be &lsquo;on&rsquo; or &lsquo;off&rsquo; during the next cycle.</span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">&nbsp;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">To minimise the response time, the single-cycle (20mS) windows for measuring and distributing power are interleaved.<span style="">&nbsp; </span>If sufficient energy is not available, the triac will be &lsquo;off&rsquo; from the next zero-crossing point, just 10mS after that information has been gained.</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">In the standard EmonLib code, there is a separate high-pass filter (HPF) on each of the voltage and current streams.<span style="">&nbsp; </span>I&rsquo;ve taken a different approach (thanks Robert for the suggestion), and have instead implemented a single LP filter which allows the DC bias to be accurately determined.<span style="">&nbsp; </span>By updating the LPF only once per mains cycle (my idea!), its performance is nigh-on perfect, with no attenuation or phase shift.</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">Too good to believe?<span style="">&nbsp; </span>Well, the LPF is not acting alone.<span style="">&nbsp; </span>There is also a standard HP filter which acts just on the voltage stream.<span style="">&nbsp; </span>The purpose of this secondary filter is to group the voltage samples into cycles so that the LPF can be accurately updated.<span style="">&nbsp;&nbsp; </span>Unlike the LPF, the HPF can always be relied upon to start up correctly.<span style="">&nbsp; </span>Together, they form a great combination.</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">A single (buffered) reference is used for both the voltage and current sensor as shown on the schematic diagram.<span style="">&nbsp; </span>The LM358 runs from the Arduino&rsquo;s 5V rail and provides a rock-steady reference point.<span style="">&nbsp; </span>If separate reference circuits were to be used, the single LPF approach would then not be appropriate.<span style="">&nbsp;</span></span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;"><span style=""><em>[Update:&nbsp; If measuring only &quot;real power&quot;, which is what the utility meter does, the single LPF would be fine when using separate references.&nbsp; This is because any DC offset in the current samples is removed by the maths.&nbsp; For other calculations such as Power Factor or Irms, the dc-offset of each sensor must be dealt with independently.]</em></span></span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">The energy bucket has a nominal capacity of 3600J, or 0.001kWh, with power only being allocated when it is at least half-full.<span style="">&nbsp;&nbsp; </span>To ensure that a small amount of export to the grid is maintained, a programmable safety margin has been included; this acts as a leak in the bucket thereby reducing the rate that &lsquo;on&rsquo; cycles can be allocated to the immersion.<span style="">&nbsp; </span>For anyone with a nervous disposition, just increase the value of <b>safetyMargin_watts. </b></span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">&nbsp;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">So how accurate does this system need to be?<span style="">&nbsp; </span>Not very, is the short answer.<span style="">&nbsp; </span>Because there is only one place where current is measured (flowing into and out from the grid), any inaccuracy will be cancelled out.<span style="">&nbsp; </span>Once the distribution algorithm has reached the operating point, &lsquo;on&rsquo; cycles will be allocated at the appropriate rate for the prevailing conditions regardless of any absolute error in the measurement system (it just needs to be linear).</span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">&nbsp;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">In a place such as this, if I were to suggest that no calibration is required at all, I&rsquo;d probably get shot down in flames.<span style="">&nbsp; </span>So, here&rsquo;s how it works:</span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">&nbsp;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">In &lsquo;debug&rsquo; mode,<span style="">&nbsp; </span>the synthesized values are directly equivalent to Volts and Amps.<span style="">&nbsp; </span>By mutiplying pairs of V&amp;I samples together, this gives the instantaneous power in Watts.<span style="">&nbsp; </span>By adding a mains cycles&rsquo; worth of instP values together, and dividing by the number of samples,<span style="">&nbsp; </span>this gives the average power during that mains cycle, also in Watts.<span style="">&nbsp; </span>Dividing by <b>cyclesPerSecond = 50</b></span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;"> gives the energy gained or lost during that individual mains cycle, in Joules.<span style="">&nbsp; </span>This energy contribution is then added to the existing contents of the bucket without need for further calibration.&nbsp; In debug mode, POWERCAL = 1.</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">In &lsquo;normal&rsquo; mode, the sensitivity of the measurement system is affected by a variety factors.<span style="">&nbsp; </span>My simplistic approach, however, says that it is only &ldquo;energy&rdquo; that needs to be calibrated.<span style="">&nbsp; </span>By experimenting with a few small loads, I soon found that a value of<span style=""> </span>about 0.085 allows my system to track real-world energy flow.<span style="">&nbsp; </span>With a 40W bulb connected, my bucket &lsquo;fills&rsquo; at around 40J per second.<span style="">&nbsp;&nbsp; </span>Moreover, when the light goes off, the bucket&rsquo;s value remains constant to within a few tenths of a Joule per second &ndash; there&#39;s minimal unintended leakage.<span style="">&nbsp; </span>So, before adding my measured power contributions into the energy bucket, they are multiplied </span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">by POWERCAL = 0.085.<span style="">&nbsp; </span>The units of this parameter are Joules per ADC-unit squared, but what about its value?</span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">&nbsp;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">Using any of tools that have been posted recently for recording the range of raw sample values, the extent to which voltage and current are being over- or under-read in terms of ADC units can be determined.<span style="">&nbsp; </span>From the voltage and current samples taken while powering my 3kW kettle, I appears that I am &lsquo;under-reading&rsquo; voltage by 471/678.8 and &lsquo;over-reading&rsquo; current by 535/35.36.<span style="">&nbsp; </span>Taking the inverse of each of these ratios gives an overall value of 0.095, which is close enough to 0.085 for my purposes.</span><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">&nbsp;</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">One final bit of calibration is needed, this being to determine an appropriate moment for arming the external trigger device.<span style="">&nbsp; </span>Because my system under-reads voltage by a factor of 471/678.8, my voltage samples (after removal of the DC-offset) need to be multiplied by the inverse of this ratio to obtain the correct value in Volts.<span style="">&nbsp; </span>VOLTAGECAL = 1.441 is therefore applied before checking whether the voltage is at a suitable value for arming the trigger (for the MOC3041, this is a minimum of 20V beyond the +ve going z/c point.)</span></p>
<p class="MsoNormal"><span lang="EN-US" style="font-size: 10pt; font-family: Arial;">The hardware is entirely straightforward, photo attached.<span style="">&nbsp; </span>The input circuitry is still on breadboard but will no doubt be transferred to strip-board in due course.<span style="">&nbsp; </span>With the 40W triac bolted to an offcut of aluminium tubing, it gets pleasantly warm when the PV gets going, but is rarely too hot to touch.<span style="">&nbsp; </span>A better heatsink, with vertical fins, would be a nice addition.</span></p>
  <div class="forum-topic-navigation clear-block">
          <a href="/emon/node/2605" class="topic-previous" title="Go to previous forum topic">‹ SolarMax 2000S Inverters &amp; EmonCMS</a>
              <a href="/emon/node/12236" class="topic-next" title="Go to next forum topic">Forum thread comments newest first?  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-5247"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/238" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/238" title="View user profile.">Paul Reed</a> on Mon, 16/07/2012 - 21:26.</div>
    <div class="content">
     <p>&nbsp;</p>
<p>&nbsp;Great work Robin, and thanks for documenting your work.</p>
<p>I hope that in the near future I'll get some free time, and plan to follow in your footsteps.</p>
<p>&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5251"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Tue, 17/07/2012 - 10:28.</div>
    <div class="content">
     <p>Good work Robin, well done on a well thought out solution.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5252"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Tue, 17/07/2012 - 19:35.</div>
    <div class="content">
     <p>Robin, I've hosted your code on github so I can tinker with it...</p>
<p>** Github link removed at Robins request **</p>
<p>Feel free to fork/change as needed.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5253"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 03/08/2012 - 19:11.</div>
    <div class="content">
     <p>That's fine, Stuart, I look forward to seeing lots of improvements :)</p>
<p>Paul, it was your video of the budget triac, silently switching the lamp on and off, that convinced me about the feasibility of this approach.&nbsp; This project is a team effort and I stand on the shoulders of many others.&nbsp;</p>
<p><em>*** Updated 3/8/12:&nbsp; Just to be clear, I'm perfectly happy for my code to be posted on GitHub, or anywhere else, as agreed with Stuart.&nbsp; A link to this duplicate code had, however, appeared in my original posting which did not seem helpful.&nbsp; So, if you want the original sketch, it's there as a zipped attachment to my original post.&nbsp; Any other versions are obviously outside my control, but I look forward to seeing what useful developments other people can devise.&nbsp; Calypso_rae</em></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5300"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Riggers&#039;s picture" title="Riggers&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by Riggers (not verified) on Sat, 21/07/2012 - 11:52.</div>
    <div class="content">
     <p>&nbsp;Hi Robin,</p>
<p>Where do you buy your parts from please?</p>
<p>Is there a specific breakdown of parts required?</p>
<p>Im trying to get a friend to make this for me, as I dont think that I could do this myself? Whats your thoughts? I'm good at DIY / with my hands, but have never even made a absic board before...</p>
<p>This is incredible, and if I got it working, would be fantastic! I do have a contact that could 'programme' the ardinuno board for me...</p>
<p>Thanks for your time.</p>
<p>&nbsp;</p>
<p>Steve</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5301"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sat, 21/07/2012 - 14:20.</div>
    <div class="content">
     <p>Hi Steve, </p>
<p>Sorry, there's no specific breakdown of parts as such, only the diagram which shows most of the components.&nbsp; Input circuits are well documented in the Building Blocks section, but if you wanted to use my Mk2 sketch as it stands, you would need to construct the shared Vref arrangement as per my diagram.&nbsp; If, however, you wanted to retain two separate Vref circuits, then you would really need to change the code back to the standard twin HP filter arrangement as can be found in the function calcVI(), in the library file, EmonLib.cpp</p>
<p>To 'program' the Arduino board is entirely straightforward.&nbsp; Just unzip the file that I posted to wherever you want it to go on your computer and open the .ino file.&nbsp; If your IDE has been correctly set up, a folder of a similar name should appear within which there will be just one file, that for the sketch.&nbsp; Then click the upload button, and you're away.</p>
<p>Before launching in to this project, you will need to decide how to connect into your immersion heater's wiring.&nbsp; In my case, the feed cable for the immersion comes directly from the Consumer Unit which is right next to our meter in the garage.&nbsp; It couldn't have been easier to wire up.&nbsp; But if your immersion were instead to come off a ring-main, them some bespoke means of intercepting that power would be needed.&nbsp; If that is the case, then it may be eaier to use a radio link to instruct when the triac should be on and off, rather than having to feed a new cable through the house. But that is not a subject that I know anything about.</p>
<p>The current clamps that I've used came from Cool Components, as directed fro the OEM page.&nbsp; Last time I checked, these items were out of stock, but you should be able to find one elsewhere.&nbsp; Although it does not say so on the schematic diagram, I removed the internal burden resitor from my CT before use.&nbsp; The only burden is therefore the external one, which in my case is 150R.&nbsp; My triac and trigger came from a budget supplier on eBay, as did the Arduino and breadboard.&nbsp; But these are all standard items so you shouldn't have any difficulty getting hold of them.</p>
<p>As to whether you should have a go at making this for yourself ... yes, absolutely, I say!</p>
<p>Start with a simple test-rig, just a modified extension cable so you can measure the current that's taken by small appliance, and see how you get on.&nbsp; Leave the power-distrubution side for later.&nbsp; If you get stuck, then just post a help message on the forum; that's what it's there for.&nbsp; If you can convey the details of a genuine difficulty that you're having, someone is bound to come up with a solution before many hours have passed :)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5312"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 22/07/2012 - 11:43.</div>
    <div class="content">
     <p>I've just singed up to the forum having been a &quot;lurker&quot; for some time. I too have been playing around with the BTA41 triac but using an NE555&nbsp;for zero crossing, but&nbsp;your solution is far more elegant, as they say less is more.</p>
<p>I got stright on eBay&nbsp;and ordered a Uno and&nbsp;MOC 3041,&nbsp;did you choose the LM358 for a reason or will any op amp do?</p>
<p>I've never touched a Uno or any other micro computer come to that, my only programming experence is with a ZX Spectrum (that shows my age) and I've forgotton all I ever knew about BASIC.</p>
<p>Will you be expanding the controler with a display etc?</p>
<p>I hav two SCT 013 030 transfomers (with built in burdens?) and wonder are they useable with your circuit, and how would I inteface them.</p>
<p>I'm sorry if these questions are dredfully nooby, but I am well new!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5313"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 22/07/2012 - 13:07.</div>
    <div class="content">
     <p>Welcome, Richmc.</p>
<p>1. MIND&nbsp;YOUR&nbsp;FINGERS. You're dealing with mains voltages on the triac and opto-isolator. Make sure you have enough clearance between the live mains connections and the low voltage side (check the data sheet). And earth or otherwise enclose the heatsink and other live parts.</p>
<p>2. LM358: Pretty much any half-decent op-amp will do.</p>
<p>3. Forget BASIC (Bloody Awful Set of Interpreted Commands&nbsp;<img alt="" src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/teeth_smile.gif" />&nbsp; ). The Arduino is programmed in C++&nbsp; My usual recommended place for learning that is <a href="http://www.relisoft.com/cpp.html">C++ In Action: Online Book</a> (I don't suggest you work your way all though the course, you probably will want to work through the beginning parts only to learn enough to get going, then use it as a reference).</p>
<p>4. <em>ZX Spectrum (that shows my age)</em> I started with Fortran IV, dial-up to a mainframe with acoustic couplers at 110 baud, which shows <em>my</em> age (and I was in my late 20's then!).</p>
<p>5. SCT 013 030 is what Calypso_rae used. I believe (though I've no evidence) that these are the same as the 100 A version but with an added internal burden resistor. Calypso_rae appeared to get one with a faulty resistor and took it out - disassembly is quite easy, and had his burden resistor remote.</p>
<p>If you have any more questions, just ask.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5317"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 22/07/2012 - 14:29.</div>
    <div class="content">
     <p>Thanks for the swift reply, will be resistor snipping the CT ASAP as i would like to follow calypso_raes design closely (if it aint broke etc.).</p>
<p>As for &nbsp;phisical isolation I will be making my own pcb probably very similar to how the schematic is laid out with a healthy bit of empty board before the opto/triac. And a lot of copper for the 12.5 amp tracks.</p>
<p>I've looked at the building blocks section and it looks to me that the voltage sensors are no more than small mains transformers, as I have a pcb mounting 9v 3VA transformer knocking around I guess that will do.</p>
<p>As for point one, speaking as an ex civilian naval engeneer working on subs&nbsp;who once came in intermate contact with 16KV DC and spent the worst six weeks of my life in a MOD hospital (the food is worse than NHS) I have a more than passing interest in not getting too friendly with mains voltage!</p>
<p>Thanks for the heads up on C++ will have a look this evening.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5318"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 22/07/2012 - 15:02.</div>
    <div class="content">
     <blockquote><p>&quot;I have a pcb mounting 9v 3VA transformer knocking around I guess that will do.&quot;</p>
</blockquote>
<p>We have reservations about using these. They tend to have a very distorted output (i.e. the output voltage is not a faithful reproduction of the mains input) so you may have difficulties in calibrating the power readings. You might want to try to replicate the tests described <a href="http://openenergymonitor.org/emon/buildingblocks/report-mascot-9v-acac-adaptor">here</a> and check it first. I'd do that before I etched a PCB! (if you follow my reasoning).</p>
<blockquote><p>&quot;intimate contact with 16KV DC&quot;</p>
</blockquote>
<p>You're darned lucky to have survived that. You should have bought a lottery ticket that day instead of going to work! We thought a subcontractor's electrician who got too close to 6.6kV was lucky to survive, and that's the closest that I've ever been or want to be to anything like that.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5323"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 22/07/2012 - 20:06.</div>
    <div class="content">
     <p>If your current clamp has an internal burden resistor which appears to be intact, I see no problem with using it.&nbsp; If you do use the internal one, just omit the 150R one in my circuit.&nbsp; The value of the burden really doesn't matter.&nbsp; I used to reason that with such small currents flowing at the supply points, then it was important to have a high signal amplitude.&nbsp; But that's too simplistic.&nbsp; Although the net export flow may be very small, the current within individual mains cycles is far from small.</p>
<p>If you have 1500W of spare PV, then that's the amount of power which you'll be exporting during 50% of your cycles,&nbsp; For the other 50%, you'll be importing 1500W to suppliment the 1500W that you already have from the PV.&nbsp; 1500W has a peak current of around 8A, so a slightly smaller signal size caused by a lower valued burden is really nothing to worry about.</p>
<p>Getting those fiddly clamps apart is no easy task.&nbsp; Next time I would probably just stick with the internal burden rather than risk damaging the internals. </p>
<p>I used an LM358 because it only requires a single voltage rail.&nbsp; For my Mk1 version, the AC controller that I chose needed a 0-10V control signal, so I needed to double the smoothed PWM output from the Arduino.&nbsp; When I chacked recently, it appeared that an basic 741 op amp needs a minimum of +/- 3V, so it didn't seem suitable for operation from a single 5V rail for buffering the Vref circuit.</p>
<p>The Arduino Reference pages are very good, all part of the downloadable IDE.&nbsp; There are lots of nice examples in there which you can just paste into a new sketch and have running within minutes.&nbsp; </p>
<p>Good luck, and feel free to raise any more questions here</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5344"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Mon, 23/07/2012 - 16:12.</div>
    <div class="content">
     <div><span style="font-size: 10pt"></p>
<div><span style="font-size: 10pt">Anyone understand snubbers? Do you need a snubber for this application to ensure reliable firing/turning off? An immersion element is slightly inductive but in this context is better described as resistive. The connecting wire will modify this characteristic My limited understanding is that snubbers are generally recommended for resistive loads like this but not for inductive ones like motors. </span></div>
<div>&nbsp;</div>
<div><span style="font-size: 10pt">Triacs are available in snubberless versions with faster commutation times. That I assume means that it is designed to work without a snubber. Thus, assuming I am correct that a snubber is desirable, a snubberless triac is to be avoided.</span></div>
<p></span></div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5345"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Mon, 23/07/2012 - 16:19.</div>
    <div class="content">
     <p>At the risk of sounding silly....</p>
<p>As I understand it (and my understanding of electronics is close to zero) this circuitry will vary the amount of power allowed into an immersion heater by switching it on and off very rapidly. However this can only happen at a max of 100 times per second. Lets say we have 2kw available from panels (in my case its a waterwheel) &nbsp;and we are feeding a 3 kw immersion heater. If you switch the ih manually (say on for 5 sec, off for 5 sec) then &nbsp;2kw will come from your own generation and 1kw from mains so you will be paying for 1/3 of power used.&nbsp;</p>
<p>How different is it when you switch at 100Hz (would that be 66cycles ih on,34 off?) ie wont the meter read any `top up`?</p>
<p>Or is the meter `fooled` because it averages over a longer period than 1 cycle?</p>
<p>
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5347"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 23/07/2012 - 16:49.</div>
    <div class="content">
     <p><a title="View user profile." href="http://openenergymonitor.org/emon/user/1372">noah</a></p>
<p>Have a good browse through the forums. This had been discussed at great length.</p>
<p>The short answer is yes, the timebase does make a difference.</p>
<p>[Edit] There's discussion at:</p>
<p><a href="http://openenergymonitor.org/emon/node/841" title="http://openenergymonitor.org/emon/node/841">http://openenergymonitor.org/emon/node/841</a></p>
<p><a href="http://openenergymonitor.org/emon/node/857" title="http://openenergymonitor.org/emon/node/857">http://openenergymonitor.org/emon/node/857</a></p>
<p><a href="http://openenergymonitor.org/emon/node/176" title="http://openenergymonitor.org/emon/node/176">http://openenergymonitor.org/emon/node/176</a></p>
<p>This list is not exclusive.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5348"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 23/07/2012 - 16:53.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1088" title="View user profile.">fewyatt</a></p>
<p>There's some description <a href="http://www.onsemi.com/pub_link/Collateral/HBD855-D.PDF">here</a>. [Edit] <strike>If it's not enough, I reckon Google could find plenty more.</strike> I've since found <a href="http://www.fairchildsemi.com/an/AN/AN-3008.pdf">this</a>. I've not read it at all carefully, but at first glance it looks comprehensive.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5354"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Mon, 23/07/2012 - 21:57.</div>
    <div class="content">
     <p>Noah: no worries.&nbsp; If you follow any of the examples in these parts, your meter should behave just fine.&nbsp; At 3kW, there's at least a second's worth of headroom before you'll be charged.</p>
<p>fewyatt:&nbsp; I've just used a standard triac without any additional snubber components, and it's working fine.&nbsp; Check the picture at the top of this thread, that's all there is.&nbsp; For two of the resistors, I didn't have the right values, so used two others in parallel.&nbsp; </p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5361"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Tue, 24/07/2012 - 07:42.</div>
    <div class="content">
     <p>No need for a snubber, in its simplest form its a resistor and capacitor in seris together accross a switching device, the capacitor bypasses high voltage spikes into the resistor and that kind of absorbs the energy.</p>
<p>1) As you say the element is resistive, snubbers are mainly used on inductive loads or where phisical switches are&nbsp;passing high current.</p>
<p>2) Everyone on here seems to be working on zero crossing systems.</p>
<p>Remember when cars had ignition coils and&nbsp;contact breakers,&nbsp;that was an &quot;anti&quot; snubber system and used the switching to produce EHT for the spark plugs from the coil they had a capacitor arcross the switch to keep burning of the contacts to a minimum but no resistor.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5362"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/571" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="bommels&#039;s picture" title="bommels&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/571" title="View user profile.">bommels</a> on Tue, 24/07/2012 - 08:33.</div>
    <div class="content">
     <p>Hi Robin,</p>
<p>I just looked away from openenergymonitor only briefly, and boy am I impressed with your progress! That is an excellent job you did there.</p>
<p>I have yet to fully understand your code, however it looks so elegant I am willing to ditch the Carlo Gavazzi, and replicate this just for aesthetics.</p>
<p>Just one question: is there a particular reason you went for 'high side'  switching, where the triac is sitting between the incoming live and load, instead of  low side, where the triac sits at the neutral? The latter would make it easier to sample the voltage drop across the triac (when ignited)&nbsp;to assess whether there is any current flowing or not.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5365"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Tue, 24/07/2012 - 09:36.</div>
    <div class="content">
     <p>Even if using a low side switch there are considerable safety issues with a direct connection from mains to the low voltage processor, e.g when the triac is off there is 230V across it. How would you do it?</p>
<p>I bought a £5 SSR from China via eBay that does not turn on and off quite when expected and was wondering if it is something to do with lack of snubbers that is affecting it, but as the useful replies say snubbers are mostly for inductive loads.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5366"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Tue, 24/07/2012 - 10:13.</div>
    <div class="content">
     <p>If you follow Robin's circuit, you could substitute a different triac, for instance the &quot;BTA26-600BW&quot; model which is classed as &quot;Snubberless&quot;</p>
<p><a href="http://docs-europe.electrocomponents.com/webdocs/0025/0900766b800257b6.pdf" title="http://docs-europe.electrocomponents.com/webdocs/0025/0900766b800257b6.pdf">http://docs-europe.electrocomponents.com/webdocs/0025/0900766b800257b6.pdf</a></p>
<blockquote><div>The BTA26 BW/CW triac family are high performance glass passivated chips technology.<br />
The SNUBBERLESS] concept offer suppression of RC network and it is suitable for application such as phase control and static switching on inductive or resistive load.</div>
</blockquote>
<div>&nbsp;</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5367"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Tue, 24/07/2012 - 14:30.</div>
    <div class="content">
     <p>I suspect Robin got his bits, including triac from Spiratronics either on eBay or directly from their web site&nbsp;(could be wrong)&nbsp;like me, they sell both those triacs though&nbsp; the 40A one is out of stock at the moment, I got the BTA41 for the extra headroom.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5368"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/571" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="bommels&#039;s picture" title="bommels&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/571" title="View user profile.">bommels</a> on Tue, 24/07/2012 - 11:31.</div>
    <div class="content">
     <p>What load do you test it with?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5369"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 24/07/2012 - 11:37.</div>
    <div class="content">
     <p><a title="View user profile." href="http://openenergymonitor.org/emon/user/571">bommels</a></p>
<p>Just to emphasise fewyatt's point, ANY galvanic connection to EITHER line or neutral will make the processor technically 'live', so it needs to be double insulated or in an earthed metallic box - and no connections for programming allowed.&nbsp; Else just think what would happen if the neutral connection got severed in the street outside, or perhaps more likely what if you're in a rural area and your feed is via overhead lines on poles, and the neutral is lost?</p>
<p>BTW, I'd go for a somewhat larger device than 25 A, on the grounds that you cannot protect even RAE's 40 A device with a standard BS1362 13 A fuse. Here are the 1<sup>2</sup>t curves for 3 A &amp; 13 A fuses (the lower line is the minimum 'don't blow' and the upper line is the 'must blow' curve), the red line is the curve for the BTA 41. It needs to lie outside (i.e. above and to the right) of the fuse curve at all values of current for the triac to be protected. The triac is safe at currents above 250 A - the fuse blows first - and below 40 A., when the triac can safely carry the current subject to temperature rise of course. In between it's at risk.</p>
<p>And in answer to the question, &quot;Is there a better fuse?&quot; - yes there is, but it costs several times more than the triac!</p>
<p>[Edited with a better graph and safe area of operation clarified].</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5370"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Tue, 24/07/2012 - 18:57.</div>
    <div class="content">
     <p>bommels: The only reason that I put the triac in the 'hot' side, is because that's where I would wire a switch into a lighting circuit.&nbsp; According to the datasheet, it should work either way. &nbsp; I've just changed the wiring around, and it's now working just as before, but with the triac on the neutral side :)</p>
<p>Because everthing seemed to be working together nicely, I took a video of the setup and will put this on YouTube today after the camera's battery has recharged.&nbsp;&nbsp;</p>
<p>Please excuse the state of the garage which is even worse than normal :(</p>
<p>PS.&nbsp; It's uploading now, and should soon be <span class="watch-page-link">available at: <a href="http://youtu.be/QzTAAVOkVAs">http://youtu.be/QzTAAVOkVAs</a></span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5371"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Tue, 24/07/2012 - 12:01.</div>
    <div class="content">
     <p>Okay then Robert, this is another can of worms you've opened up!</p>
<p>&nbsp;</p>
<p>Can you explain more about the fusing requirements please!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5372"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Tue, 24/07/2012 - 12:07.</div>
    <div class="content">
     <p><em>I suspect Robin got his bits, including triac from Spiratronics ... on eBay</em></p>
<p>Yup, I sure did </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5375"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/571" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="bommels&#039;s picture" title="bommels&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/571" title="View user profile.">bommels</a> on Tue, 24/07/2012 - 13:35.</div>
    <div class="content">
     <p>Did I set off some alarm bells here ;-)</p>
<p>No worries, I understand the importance of galvanic isolation, and I was not suggesting do away with it. It is just that in most SSR applications I have seen, the switch is in the neutral, so the control electronics (trigger circuit &amp;&nbsp;0 X)&nbsp;are not wiggling along at mains voltage. Perhaps the only advantage is that the optocoupler might gather slightly less dust in its lifetime (?)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5378"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 24/07/2012 - 13:47.</div>
    <div class="content">
     <p>Circuit Protection</p>
<p>(This ought to be a Theory page!).</p>
<p>A fuse is a piece of wire that has resistance, and mass, and some insulation around it. The resistance makes it heat up when current flows. The mass regulates how long it takes the temperature to rise with a given amount of heat going in. The insulation keeps the electricity in (irrelevant to this discussion...) and it keeps the heat in.</p>
<p>Domestic Miniature Circuit Breakers are designed to mimic the action of fuses fairly closely.</p>
<p>From those basic concepts, you can draw a curve - the I<sup>2</sup>t curve - for a fuse that describes the interaction of those 3 things. A 'fast blow' fuse has little thermal capacity and good thermal insulation so that it heats up and melts quickly. A 'slow-blow', anti-surge or time-delayed fuse will have a larger mass of metal that takes a while to get up to melting temperature. You can sometimes see a glass fuse with a blob of solder in the middle of the wire - that's no accident, it delays the melting of the wire so that a brief surge of current, such as you get when starting a motor, doesn't blow the fuse.</p>
<p>So it's obvious that the common belief that a 13 A fuse blows at 13 A is rubbish. The 13 A fuse will <em>carry</em> 13 A indefinitely, at the maximum expected ambient temperature. From the graph I've posted above, it will blow at 2 x current (26 A) at somewhere between 3 s and never!&nbsp; It needs 30 A to guarantee to blow inside 400 s (6 <sup>2</sup>/<sub>3</sub> minutes), but it might blow in 1 s.</p>
<p>Now the same kind of curve exists for anything that carries current and gets heated by that current - resistors or, the device we're interested in, triacs. The data for the BTA41 is given in just one line on the <a href="http://openenergymonitor.org/emon/sites/default/files/BTA41_Triac.pdf">data sheet</a>: In Table 2 &quot;I<sup>2</sup>t&nbsp;&nbsp;&nbsp; I<sup>2</sup>t Value for fusing &nbsp;&nbsp; t<sub>p</sub> = 10 ms&nbsp;&nbsp;&nbsp; 1000 A<sup>2</sup>s&quot;. From that you can draw the curve for the triac. For the triac to be protected by the fuse, the whole of the triac's curve must lie above and to the right of the fuse curve.&nbsp; [Bear in mind that unless it has a large and fully rated heatsink, the vertical line for the triac is wrong, it should continue to slope but without knowing or making assumptions about the heatsink, we don't know enough to show it].</p>
<p>It's worth carrying on and mentioning that the curve for the fuse must itself lie totally outside the curve for the actual load current of the device it is protecting, else the fuse will blow during normal operation. So the appliance can draw 50 A for 0.1 s, or 100 A for &frac12; cycle, without the fuse blowing, and 20 A for a long time.</p>
<p>(Don't confuse the terms 'slow blow' or 'quick-blow' with &quot;HRC&quot;. Another property of fuses is the maximum fault current they can handle. An HRC fuse is constructed with an arc-quenching material inside so that it can safely handle a much higher fault current)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5389"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Wed, 25/07/2012 - 11:58.</div>
    <div class="content">
     <p>Thanks for this explanation Robert, you certainly know your stuff!</p>
<p>So in simple terms, a 13A fuse is likely to blow at double its rating (say 25-30A) but while this is waiting to blow, the triac would have been destroyed because the BTA26 model can only handle 25A max.</p>
<p>Having said this, does the &quot;peak surge current&quot; handle the extra load, but only if the fuse will blow within the peak surge current rated time (400A surge peak for10ms on BTA41 - I think!)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5391"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 25/07/2012 - 14:14.</div>
    <div class="content">
     <p><em>So in simple terms,&nbsp;&nbsp;</em> No, you can't say that. Nothing is ever simple!&nbsp; What you <em>can</em> say is the fuse won't blow at much less than double the rating (this is a reasonably safe assumption for most fuses if you don't know any better - for some fuses it may be 1&frac12; times, here it's just over that).</p>
<p>You have to define the current that is being passed and work from there. In practice, the cables in your house and the supply fault level will limit the current. All you can say for definite is if the whole of the triac's I<sup>2</sup>t curve lies outside the fuse's, it will survive no matter what current flows; if the whole of the triac's I<sup>2</sup>t curve lies inside the fuse's, it will probably die; in between, it is anyone's guess (but even if it survives, it might have been severely frightened and expire prematurely).</p>
<p>If you look at the data sheet, what &quot;peak surge current&quot; means is spelled out. 400 A for 1 whole cycle but not repeated until the junction has cooled to 25&deg;C!&nbsp; Table 5 adds to that and defines the value for more than 1 cycle, and for repetitive peaks (though I don't know what 'repetitive' means - in terms of the cooling time between bursts of current).</p>
<p>If you do have a 400 A fault, then the triac is OK because the fuse clears first. But note the fuse is not defined below one half cycle, the reason being that you must assume the arc will not go out until the next crossing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5392"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Wed, 25/07/2012 - 15:15.</div>
    <div class="content">
     <p>Hi Robert you were dead right about the transformer, o/p looked like a sine wave drawn by a chimp! I found a Mascot same as the one on test on eBay so snapped it up.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5393"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jimjam&#039;s picture" title="jimjam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by jimjam (not verified) on Wed, 25/07/2012 - 17:49.</div>
    <div class="content">
     <p>Hi robin</p>
<p>I have just rigged your circuit up with the triak and I have been trying to get my head around the code but it is just too complicated for me to understand. I am geting these reading in the serial monitor, can you tell me if they seem ok.</p>
<p>In NORMAL mode ...</p>
<p>cyc# 5, sampleV 409, fltdV 34.77, sampleV-dc -122, cumVdeltas -3089.20, prevDCoffset 562.29, refFltdV 531.40, enInBkt 0.00<br />
cyc# 505, sampleV 519, fltdV 20.36, sampleV-dc 8, cumVdeltas -3.50, prevDCoffset 510.75, refFltdV 510.72, enInBkt 47.93<br />
cyc# 1005, sampleV 508, fltdV 9.43, sampleV-dc -2, cumVdeltas 28.91, prevDCoffset 510.54, refFltdV 510.83, enInBkt 106.89<br />
cyc# 1505, sampleV 507, fltdV 8.34, sampleV-dc -3, cumVdeltas 24.64, prevDCoffset 510.59, refFltdV 510.84, enInBkt 165.49<br />
cyc# 2005, sampleV 520, fltdV 21.45, sampleV-dc 9, cumVdeltas 22.62, prevDCoffset 510.42, refFltdV 510.65, enInBkt 225.02<br />
cyc# 2505, sampleV 505, fltdV 6.49, sampleV-dc -5, cumVdeltas -1.75, prevDCoffset 510.70, refFltdV 510.69, enInBkt 284.00<br />
cyc# 3005, sampleV 513, fltdV 14.46, sampleV-dc 2, cumVdeltas 30.44, prevDCoffset 510.46, refFltdV 510.76, enInBkt 343.16<br />
cyc# 3505, sampleV 511, fltdV 13.59, sampleV-dc 1, cumVdeltas -29.74, prevDCoffset 509.69, refFltdV 509.39, enInBkt 1403.25<br />
cyc# 4005, sampleV 499, fltdV 1.56, sampleV-dc -10, cumVdeltas 13.76, prevDCoffset 509.52, refFltdV 509.66, enInBkt 3600.00<br />
cyc# 4505, sampleV 518, fltdV 19.52, sampleV-dc 7, cumVdeltas -11.18, prevDCoffset 510.59, refFltdV 510.48, enInBkt 3600.00<br />
&nbsp;</p>
<p>the last 2 lines are with a 2kw hairdryer switched on.</p>
<p>is the samplev too high or is 500+ ok.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5395"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 25/07/2012 - 21:53.</div>
    <div class="content">
     <p>Hi JimJam,&nbsp; great to hear that my code is in use :)</p>
<p>This line of printout every 10 seconds is to check that the low-pass filter is working OK.&nbsp;&nbsp; With a 2.5V reference, then you should get a refFltdV value of 511, this being mid-way in the ADC's input range.&nbsp; Your value of 510 looks spot on.&nbsp; </p>
<p>For the energy bucket to work as intended, your CT needs to be at the supply point near to the meter.&nbsp; Outgoing energy, as generated by the PV, is seen as positive.&nbsp; The level should rise steadily as surplus PVpower is sent the the grid, but should never exceed 1800J by much because the triac turns the dump load on at that point.&nbsp; When your house is importing, the energy bucket should be empty (0J).&nbsp; Maybe you need to flip the CT around the other way?&nbsp; Have you seen the video which I posted yesterday when I showed my system working and talked about these levels.</p>
<p>To get the ouput side to work, why not use 'debug' mode.&nbsp;&nbsp; Although its cycle rate won't be synchronised with the mains, it works perfectly well with real hardware connected,&nbsp;&nbsp; If you specify a PV of 1500W and a dump load of 3000W the output pin will rattle up and down with a 50% duty cycle.&nbsp; If you have a triac connected to a bulb, you should see it doing something.&nbsp;</p>
<p>I got my system to work first on a test rig.&nbsp; You can simulate the PV output by simply measuring the current taken by a light bulb using a extension lead from which a short section of the outer cover has been cut away.&nbsp;&nbsp; If you're supplying a 100W filament lamp, then your energy bucket readings should increase by 100J per second.&nbsp; Adjust POWERCAL until it does.&nbsp; </p>
<p>Just below the &quot;WARNING&quot; statement, 'comment out' the large block which you no longer need, and 'comment in' the short block immediately below which just displays the energy per second.&nbsp; To see the change in energy per second, just zero the value after printing it out.&nbsp; </p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5398"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Thu, 26/07/2012 - 08:27.</div>
    <div class="content">
     <p>Robert Wall...&nbsp; Fuse topic..</p>
<p>Considering the fuse/safety aspect of this system, what would be commercial practise?</p>
<p>A better specified fuse (one which matches the characteristics of the triac) or would the designer add a simple 13A fuse, knowing that the triac *could* get destroyed by it - but knowing that the circuit was safe, because the fuse would blow and therefore remove any risk of fire ?</p>
<p>What fuse would you pick?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5400"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 26/07/2012 - 10:12.</div>
    <div class="content">
     <p><a title="View user profile." href="http://openenergymonitor.org/emon/user/450">stuart</a></p>
<p>I think the possibility of a triac - or indeed any similar semiconductor: thyristor or transistor - starting a fire to be pretty remote, especially if it is properly mounted and heat-sinked. Most likely it will fail instantaneously, either open or short circuit. If it fails to short-circuit, the fuse operates after the triac fails. If if fails to open-circuit, it has become the fuse.</p>
<p>I would choose the most economical combination of fuse and triac. Without searching catalogues, data sheets and price lists, that would likely call for a bigger triac (the fuse to protect the 40 A triac costs <strike>in excess of &pound;11, IIRC,</strike> [a lot - see post below] and that's without a holder).</p>
<p>My advice to Calypso_rae, knowing that he had chosen and got the triac, was &quot;Make it easy to replace - i.e.                       don't solder directly to a p.c.b. and fix with a                       nut and bolt, and make sure that it's easy to get                       at.&quot;</p>
<p>And Calypso_rae's heat sink should be solidly earthed. He's relying on the insulation between the junction and the tab in the triac, and I wouldn't guarantee that would remain intact if the junction melted. I'd have mounted the triac on a heat-sink washer, and used a nylon bolt to secure it. That way you have two layers of insulation.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5401"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 26/07/2012 - 11:22.</div>
    <div class="content">
     <p>Robert is quite right to point out that I have glossed over some of the safety implications of 240V circuitry.&nbsp; However, my rig appears to be safe enough for its current use by me, and it's the sketch that I was mainly involved in rather than the output stage.&nbsp; </p>
<p>When I get around to putting everything into a box, I'll need to give some thought as to what additional safety measures may be needed.&nbsp; But for now, it seems fine as it is where I can get at everything.</p>
<p>If I were to produce a kit of parts for sale, then I would obviously need to include additional safety measures.&nbsp; However, on a forum such as this, I trust that readers will be aware of the safety implications and take appropriate precautions.&nbsp; </p>
<p>If you use my design, while following Robert's wise precautions on safety, then you'll get the best of both!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5405"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 26/07/2012 - 19:49.</div>
    <div class="content">
     <p>Yikes! I have a bad memory. I've just checked again the fast semiconductor fuse I found that would protect the 16 A triac. Here: <a href="http://uk.farnell.com/cooper-bussmann/fwh-015a6f/fuse-15a-500v-ferrule-fast-acting/dp/4587340 " title="http://uk.farnell.com/cooper-bussmann/fwh-015a6f/fuse-15a-500v-ferrule-fast-acting/dp/4587340 ">http://uk.farnell.com/cooper-bussmann/fwh-015a6f/fuse-15a-500v-ferrule-f...</a> I won't include the price here on the grounds that everyone will think I copied it incorrectly.&nbsp;</p>
<p>[Edit] The 40 A triac can be protected somewhat less expensively, but the fuse still costs more than the device it's protecting.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5426"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 09/08/2012 - 10:50.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/sites/default/files/IMGP9725.s.jpg"><img alt="" height="200" src="http://openenergymonitor.org/emon/sites/default/files/IMGP9725.s.jpg" width="250" /></a></p>
<p>The triac is now in the Neutral line of my rig rather than the Live.&nbsp; This was to allow the state of the thermostat to be determined locally to the Arduino by digitally monitoring the presence or absence of 240V via the immersion.&nbsp; The switch + neon from upstairs has now been rehoused in the garage, adjacent to the controller.&nbsp;</p>
<p>Being in the Neutral line, the neon now works in antiphase: when the triac is off and the thermostat is closed, the neon is on; otherwise, it&#39;s off.&nbsp; Having found that our supply meter&#39;s LED could be monitored using an LDR, I was hopeful that a standard mains neon could be similarly detected.&nbsp;</p>
<p>And so it proved to be.&nbsp; With no changes to the code or circuitry, the neon&#39;s state can be detected by the LDR without any difficulty.&nbsp; Rather than clutter up the +ve half of the mains cycle, which already has things to do, I&#39;ve added code for testing the neon-detection caaibilty in the -ve half of each mains cycle.&nbsp; To summarise:</p>
<p>- the neon can be detected at all stages of the cycle, this is presumably due to persistence of some kind;</p>
<p>-&nbsp; detection works of 350V but not at 400V, thus showing that my calibration is about right (240V rms&nbsp; = 340V 0 to pk);</p>
<p>- when the neon was lit, I recorded 50 &#39;on&#39; states per second; when off, the number was 0.&nbsp; No errors, seems reliable.</p>
<p>With this sketch running, I wondered how much Serial activity could be included in a single (neg) half cycle of the mains before the opportunity for measuring during that cycle had passed (this being approx 8mS with the limit set at -200V).&nbsp; Two blocks of 50 characters were OK, but not three; 28 pairs of 1 or 2 char strings were OK, but not 29.&nbsp; Displaying that amount of information would seriously affect any power measurements during that cycle, but if a lot of data needs to be displayed, then quite a lot can be sent out within an 8mS period.</p>
<p>My updated sketch includes the neon checking code that I added today; it also has LED monitoring code which categorises LED events into PULSE, ON and OFF, and displays the energy state on each occasion.&nbsp;</p>
<p>Tip - to make sure that your daytime sketch will start up next day, temporarily reverse the CT.&nbsp; If the on-board LED lights up (caused by incoming flow filling the energy bucket), then all is well.&nbsp; Don&#39;t forget to reverse it back to how it should be!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5448"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jimjam&#039;s picture" title="jimjam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by jimjam (not verified) on Sun, 29/07/2012 - 12:37.</div>
    <div class="content">
     <p>I have just done a stripboard layout of robins current and voltage circuit I would be greatfull If someone could check it out to see if it is ok or any improvements.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="cryo&#039;s picture" title="cryo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by cryo (not verified) on Sun, 29/07/2012 - 16:43.</div>
    <div class="content">
     <p>&nbsp;Hi all this is a great project and I&rsquo;ve decided to build the system and get involved but I have one problem. I&rsquo;ve studied the circuit diagram and understand in general how the system works but I&rsquo;m unsure how to size the transformer on the voltage sensor can someone list the type and size of the transformer required as I&rsquo;ve read that not all transformers are suitable for voltage sensor measurement due to some transformers degrading the output&nbsp; waveform. I&rsquo;ve probably missed something obvious. I&rsquo;m thinking of making an energy store (200L+ unvented tank) feeding my combi boilers water input feed thereby giving me the ability to store/use my PV surplus generation but still have the cheap gas water heating option on sunless days or when the energy store is depleted.</p>
<p class="MsoNormal"><o:p></o:p></p>
<p class="MsoNormal">Thanks<o:p></o:p></p>
<p class="MsoNormal">Ken &nbsp;<o:p></o:p></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5450"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="SolarDumper&#039;s picture" title="SolarDumper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by SolarDumper (not verified) on Sun, 29/07/2012 - 19:09.</div>
    <div class="content">
     <p>&nbsp;Hi jimjam</p>
<p>Your PCB looks fine but you have complecated it with an AC connection and a pin 2 connection also on the current side you have a CT and pin 1 connection.</p>
<p>You could do what I have done and add a strip of aluminium angle down one side and put a 2.5 or 3.5mm socket in for the current sensor so you can connect direct. I have also added a 2.1mm socket for a 12V AC/AC adaptor so I can connect direct for voltage sensing, then only four terminals are needed for Pin1, pin2, +5V and 0V (Gnd).&nbsp;</p>
<p>Regards, SolarDumper</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5451"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="SolarDumper&#039;s picture" title="SolarDumper&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by SolarDumper (not verified) on Sun, 29/07/2012 - 19:20.</div>
    <div class="content">
     <p>&nbsp;Hi cryo</p>
<p>Any 9V or 12V, 3VA, &nbsp;6VA or higher transformer will do. The important thing is that you cant use the same transformer winding for a power supply, as it has to be unloaded. I suggest an external mains AC/AC adaptor with a 2.1mm plug that can go into a scoket on your main sensor PCB along with a socket for the current transformer. See above post.</p>
<p>I have an old BT 12V AC mains adaptor working just fine on this circuit.</p>
<p>Regards, SolarDumper.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5452"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jimjam&#039;s picture" title="jimjam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by jimjam (not verified) on Sun, 29/07/2012 - 19:20.</div>
    <div class="content">
     <p>Yes I agree I could have set it out a bit better but i only had these very small stripboards to hand and a few edge connectors, this was the only way i could fit everything on.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5453"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jimjam&#039;s picture" title="jimjam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by jimjam (not verified) on Sun, 29/07/2012 - 20:06.</div>
    <div class="content">
     <p>I have had a jiggle about and think this works better.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5454"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 29/07/2012 - 21:16.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1087" title="View user profile.">SolarDumper</a></p>
<p>&quot;<em>Any 9V or 12V, 3VA, &nbsp;6VA or higher transformer will do.</em>&quot; Nope. You need to be sure it works far enough out of saturation, else you will see a distorted version of the mains waveform. Unless you are using it to power the emonTx (which despite your assertion, you can do - see the design for the new SMT emonTx, when a decent VA rating helps), the VA rating has nothing to do with that, even though common sense says it should have.&nbsp; It's all down to the flux level in the core, and that was set by the designer. You can look at the report on the Mascot adapter to see how to check your transformer.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5455"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 29/07/2012 - 21:16.</div>
    <div class="content">
     <p>I have some Mascot 9VDC adapters with european plugs to hand, so with a dremel you can get to the transfomer for use in this circuit. I will find out the postage cost for anyone who's interested.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5456"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="cryo&#039;s picture" title="cryo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by cryo (not verified) on Mon, 30/07/2012 - 02:57.</div>
    <div class="content">
     <p>&nbsp;Thanks for the quick reply this project has been going round in my head hence I'm wide awake at 03_55 :-)&nbsp;</p>
<p>Ken</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5457"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Mon, 30/07/2012 - 06:53.</div>
    <div class="content">
     <p>So far, I've tried three different approaches for the voltage sensor.&nbsp; The waveforms that they give are all slightly different, with differing amounts of phase-advance, but our water seems to be heated just as effectively by any of them.&nbsp; The difference in performance is tiny.&nbsp; Any safe way of obtaining a miniature voltage waveform that is centred at 2.5V should work fine.</p>
<p>The aspect that niggles me is that when the system is active (triac doing something), our meter's LED is nearly always&nbsp; 'on'.&nbsp; With safetyMargin set to 0, the system should be able to sit there equally well with the LED off.&nbsp; There appears to be some non-linearity in the system which is biassing it towards export.&nbsp; Measurements suggest that I could be losing around 35W, but it's difficult to quantify once the LED is showing export because there's no further information to go on.&nbsp; I noticed a similar effect when using the standard V &amp; I sketch from the Building Blocks page.&nbsp; Any ideas what could be causing it?</p>
<p>I rather like the stripboard layout tool.&nbsp; Is that a freebie?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5458"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Mon, 30/07/2012 - 07:06.</div>
    <div class="content">
     <p><em>RW: &quot;You can look at the report on the Mascot adapter to see how to check your transformer.&quot;</em></p>
<p>Robert, your <a href="http://openenergymonitor.org/emon/buildingblocks/report-mascot-9v-acac-adaptor">report on the Mascot Transformer</a> is an excellent source of reference and I have studied it in some detail.&nbsp; However, without access to specialised test equipment such as a Variac, I can't see any practical guidance about how to check my own transformer or AC/AC adapter for suitability.&nbsp; </p>
<p>Sorry if I've missed something ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5459"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Mon, 30/07/2012 - 10:19.</div>
    <div class="content">
     <blockquote><p>The 40 A triac can be protected somewhat less expensively, but the fuse still costs more than the device it's protecting.</p>
<p>&nbsp;</p>
</blockquote>
<p>So just treat the triac as a disposable item ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5460"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 30/07/2012 - 11:44.</div>
    <div class="content">
     <p>Calypso_rae &amp; stuart,</p>
<p>Yes, I admit it's not easy to tell which transformer is going to be 'best'. It is compounded by the fact that in the UK we have some of the highest system voltages. The UK supply still centres on 240 V and may rise above 250 V, whereas most transformers made for international markets seem to be designed for 220-230 V, so when used in the UK they are already working above their optimal design point (and distortion and losses increase rapidly once saturation sets in).</p>
<p>How much it concerns you should depend on what you want to use the measured values for. In your particular case, you need what I would categorise as 'medium' performance: You are balancing a moderate and continuous generated current against 12 A 20 ms pulses of load, so reasonable linearity of power measurement from 0 to 20 A at whatever voltage is desirable. Provided the voltage dip due to the load is negligible, knowledge of the absolute voltage is pretty much unnecessary ( viz. balancing 240 J against 240 J is the same whether the 240 J is 1 A @ 240 V for 1 s or 0.5 A @ 120 V for 4 s), but if the immersion load does cause a significant dip then you do need to know.</p>
<p>However, if you want an accurate measure of energy consumption, which is a laudable goal, and especially if you have loads that distort the waveform, then an accurate representation of the mains voltage wave will enable that and give you an accurate measure of power (and conversely, a heavily distorted sample of the voltage wave won't).</p>
<p>You don't need a Variac unless you want or need to evaluate the performance of your transformer at different voltages, and you don't need to sample the raw mains unless you need to see and measure the phase shift. Most computer sound cards can take an input of up to 1 V, so a resistive divider to reduce the secondary voltage, a couple of diodes to protect the input, and the free download 'scope will allow anyone to view the mains wave and check what it looks like (and the 'scope program I used has a generator built in, so you can see what a pure sine wave should look like as a reference).</p>
<p>We do know that the very small pcb mounting transformers can suffer a high degree of distortion due to their limited physical size and the designer's desire to push as much power through as possible, so these are best avoided if accuracy is paramount.</p>
<p>And yes, Stuart, it would be a 'commercial' decision to treat the triac as disposable - though not a sensible one unless you're able to replace it easily!</p>
<p>[Edit]&nbsp; A 6 A Type B MCB would protect the triac, but that would trip once you got above half power (and yes, it would carry 12 A for several cycles without a problem) and you'd need to intelligently limit the power to 50%. And you could not have a by-pass switch.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5464"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dm&#039;s picture" title="dm&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by dm (not verified) on Tue, 31/07/2012 - 16:14.</div>
    <div class="content">
     <p>Thanks for sharing the project &amp; the video; I've also been 'lurking' for a while looking for a neat PV to immersion solution and reckon this is it! I've taken a look at the code and ordered the bits so will let you know how I get on.</p>
<p>From what I understand from how the circuit works, is it correct that even the resistors on the AC&nbsp;side (360R and 300R) will only see a small current so low power electronics type kit (0.25 or .5W) is going to be fine?</p>
<p>I'm also planning to (eventually) put some code in the -ve 1/2 cycles to check immersion temperatures (I want to heat a hot water tank + a CH buffer tank) and switch the output to two different immersion's using a relay.</p>
<p>Also thinking about a simple output display to show what's going on (something like <a href="http://www.oomlout.co.uk/lcd-display-16-x-2-p-212.html" title="http://www.oomlout.co.uk/lcd-display-16-x-2-p-212.html">http://www.oomlout.co.uk/lcd-display-16-x-2-p-212.html</a>), but maybe has to be coded outside the 1/2 loop given time constraints...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5466"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Tue, 31/07/2012 - 17:30.</div>
    <div class="content">
     <p>Hi dm, reformed lurkers are most welcome</p>
<p>Yes, those resistors only need to be low power.&nbsp; I didn't have the exact values so found a couple of parallel combinations that would do instead.&nbsp; The ones that I've used are 1/4 Watt.&nbsp; I don't know what temperature they run at, as I prefer not to touch them!&nbsp; </p>
<p>The negative half of the cycle is a great place for additional code.&nbsp; I've played around with LED- and neon-detection there.&nbsp; The extra code does not appreciably delay the measurement flow because it uses digitalRead() which is fast, unlike analogRead() which is slow.</p>
<p>As an alternative to a relay, you could run two triacs.&nbsp; If you want the header tank to only start heating once your DHW is up to temperature, the Arduino could do this automatically.&nbsp; Just declare two threshold levels a few hundred Joules apart.&nbsp;&nbsp; While the first tank is heating, the system will sit at the first threshold level.&nbsp; Once the first stat opens, the energy will immediately rise to the second level whereupon the second triac will come on.&nbsp; I think this is a really neat approach, but sadly not my idea :(</p>
<p>Not sure about the display side of things.&nbsp; There's not much time for Serial operations in this code ...</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5467"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1399" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1399.jpg" alt="Series530&#039;s picture" title="Series530&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1399" title="View user profile.">Series530</a> on Tue, 31/07/2012 - 17:49.</div>
    <div class="content">
     <p>&nbsp;This is my first post so I hope that I haven't misunderstood what this is all about.&nbsp;</p>
<p>By profession, I suppose I could call myself an electronics engineer as I provide applications support for a large American equipment supplier who make silicon chip test equipment. I'm well versed with high speed testing of mixed signal chips but my forte is not in power electronics at mains voltage. I do a lot of programming of the equipment but am versed in original C rather than C++. Last Novemeber we invested in a 3.5KWp PV system with micro inverters. It suddenly dawned on me how much money I am wasting by returning power to the grid and then using gas to heat the hot water cylinder. Then I discovered what a PV dump controller was and then stumbled across this site. Then I found this thread. Like the previous poster, I decided that this probably is the holy grail of control.</p>
<p>I've never programmed a micro controller or, for the past thirty years or so, had a need to work with mains power control. Both are a bit daunting but would seem to be just waiting for experimentation in an immersion control application.</p>
<p>I have dual EnviR monitors and these correlate very well using optical pulse read back against the PV meter. They can be a bit problematic when sent via the smartbridge to the web because the smartbridge has a habit of freezing. I find them absolutely useless when exporting energy because the led stays green and doesn't register anything useful.</p>
<p>So, what I would like to do longer term is to build something which controls the immersion heater along the lines of what Calypso Rae has been doing (great design by the way) while still offering an output to a display so that I can more accurately measure power returned to the grid. I don't really want to have a PC running all of the time as this defeats the purpose of saving power. The electronics will most likely end up in the garage but I would like to have my display inside the house. I suppose I could have a wireless link to the display advocated on the forums or I could drill a hole through the wall and have it on a lead.   Within reason I am not too bothered about the cost. I see this as partly a cost saving exercise but, equally importantly, something of a science project.   So I am wondering if my best starting point is a basic arduino or if it is better to go with the nanode and have integral wireless and a few extra bits. I assume that both units  will work with raes software? I also assume that the system on this thread is designed to run without an output of any form (aside from in debug). Do you see any issues with interfacing with a display unit so as to offer a dual purpose function?   I'm in the middle of my holiday at the moment but using every opportunity to learn (between dodging rain showers and eating cream teas) and plan to buy the hardware very soon after returning.  Any thoughts and suggestions would be gratefully received. If I ever come up with anything of use, I will happily contribute it to the forum.    Thanks    Ian.   &nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5468"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Tue, 31/07/2012 - 19:44.</div>
    <div class="content">
     <p>Hi Ian, you seem to have got my project well sussed!&nbsp;&nbsp; </p>
<p>As you've noted, I'm just using a basic Uno and there is no permanent display.&nbsp; My Mk1 version had four LEDs which came on to show the quarter-power levels.&nbsp; They could be easily be reinstated, but I don't really see the need.&nbsp; As long as the on-board LED is flashing in synchronism with the triac, that does me fine.</p>
<p>The system is intended to sit right on the balance point between import and export so no power should be returned to the grid.&nbsp; For reasons that I've never understood, this does not happen.&nbsp; Whenever the triac is distributing power, the meter's LED is invariably on which shows that we're exporting&nbsp; - unless, of course, I happen to be videoing at the time!</p>
<p>At low powers, the sensitivity of the system seems to be less than when a kW or two is available.&nbsp; If you can think of any way to shed light on why this non-linearity may be occurring, that would be a great contribution.</p>
<p>Go easy on those cream teas ...&nbsp; Calypso</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5469"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="madmurg&#039;s picture" title="madmurg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by madmurg (not verified) on Tue, 31/07/2012 - 20:15.</div>
    <div class="content">
     <p>`just a thought robin, have you tried out stuarts modified version of your code which is hosted on github.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5470"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 31/07/2012 - 21:46.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1399" title="View user profile.">Series530</a></p>
<p>In theory, there is enough voltage available in the emonTx to drive the zero-crossing opto-isolator that Calypso_rae uses.&nbsp; (The emonTx runs off 3.3 V, Calypso-rae used the Arduino running at 5 V, it just needs one resistor changing). A manufacturing engineer friend wants almost exactly the system you describe so I'm just about to start looking to see how practical it will be to measure two currents, the system voltage, drive three triacs - he has 3 hot water tanks - and report the data for display and logging. That's all!</p>
<p>The emonTx is the same processor as an Arduino - apart from possibly a few very minor changes (I think the LED is on a different pin, I haven't checked the analogue signals!) Calypso-rae's software runs fine on an emonTx.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5471"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Tue, 31/07/2012 - 22:40.</div>
    <div class="content">
     <p><em>`just a thought robin, have you tried out stuarts modified version of your code which is hosted on github. </em></p>
<p>No, what does it do?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5472"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jimjam&#039;s picture" title="jimjam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by jimjam (not verified) on Wed, 01/08/2012 - 06:10.</div>
    <div class="content">
     <p>The modified code is here  <a href="https://github.com/stuartpittaway/ArduinoSolarPowerController/tree/master/src" title="https://github.com/stuartpittaway/ArduinoSolarPowerController/tree/master/src">https://github.com/stuartpittaway/ArduinoSolarPowerController/tree/maste...</a>  I dont really understand it but i think he has tried to speed things up a bit, I jusst wandered if it may fix your led on the meter issue.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5474"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Wed, 01/08/2012 - 08:42.</div>
    <div class="content">
     <p>Woudn't bother with that code yet, going to pick this project up again tomorrow night when I get chance, unfortunately DIY house decorating is getting in the way!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5475"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Wed, 01/08/2012 - 08:44.</div>
    <div class="content">
     <p>Robin, I've not watched the video, does your meter have 2 LED's or just one - does it solidly light when theres no export/import - i.e zero power ?</p>
<p>I'm tempted to get an electrician in to install an export meter on the meter tails to see whats going on.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5476"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="madmurg&#039;s picture" title="madmurg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by madmurg (not verified) on Wed, 01/08/2012 - 09:53.</div>
    <div class="content">
     <p>I have just set up robins circuit with a  kettle connected instead of the immersion. With 800watts of solar this equates to about 300 watts of spare power, it took just 15 minutes to boil the kettle. I tried stuarts modified code and still noticed the led was lit on the meter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5477"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1399" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1399.jpg" alt="Series530&#039;s picture" title="Series530&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1399" title="View user profile.">Series530</a> on Wed, 01/08/2012 - 17:49.</div>
    <div class="content">
     <p>Many thanks for the positive comments everyone. This all looks pretty interesting and is getting even more interesting as I read further.&nbsp;</p>
<p>I'd like to think about a work breakdown approach and see if I have missed something obvious:</p>
<p>It seems like the way for me to go forward is to invest in an EmonTX together with a voltage and a current sensor. That way I can accurately monitor power and direction on the grid line. These should interface directly into the EmonTX without needing to add in a burden?</p>
<p>It should be possible to take Calypso's isolator and driver circuit and code and, possibly with some calibration tweaking, make this work with what may be a slightly different sensor front end to what he has. Then, I assume, by changing the 180 ohm resistor so as to maintain the correct forward current, I should be able to drive the MOC3041 and the triac.</p>
<p>I could, if I felt flush, attach a second current clamp to the load circuit and see how this is being modulated with varying PV. The same can be achieved with a kettle and a long wait, but, with minimal cost, it provides an additional debugging method. Also, in the long run, I may be able to integrate this sensing and a pair of temperature monitors to properly measure power sent to the immersion and the temperature of the tank. (My wife thinks I am becoming more and more &quot;sad&quot; by the minute :=) ).</p>
<p>Once all of this is working I could then add in an EMONGLCD and splice in code to direct whatever I wish to the display. Well, I hope so, anyway. What isn't clear to me at the moment is how to splice the data into the EMONTX &nbsp;stream and how to intercept that data using the EMONGLCD. Is the data sent as defined transmission packets with names defined by the EMONTX code and then those same packets need to be read by the EMONGLCD or are the naming conventions for the packets fixed?</p>
<p>I just had a read of a website which introduces the concept of coding these micro controllers. In principle, it looks reasonably straight forward. The trick is knowing how to use the libraries which have been written to do more complicated tasks. Practise will make perfect... or, more correctly,<em> better </em>code.</p>
<p>I'm dying to open my wallet and buy some bits and have a play. We're back home early next week and I want to order the stuff ahead of time. Suggestions as to what I need to buy initially and from where are much appreciated. I'm more than happy to buy through the site if that makes sense and helps them out. Always good, I think, to support those who have supported me.</p>
<p>&nbsp;</p>
<p>thanks</p>
<p>&nbsp;</p>
<p>Ian</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5478"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Wed, 01/08/2012 - 11:28.</div>
    <div class="content">
     <p>Robin, just a thought, but have you tried running the code with a positive &quot;hole&quot; in the bucket ?&nbsp;</p>
<p>i.e. force the energy levels up until you start to import again ?</p>
<p>&nbsp;</p>
<p>How do you know the meter is still exporting - is it just because the LED is lit?</p>
<p>This PDF, <a href="http://www.meterspec.com/143.pdf" title="http://www.meterspec.com/143.pdf">http://www.meterspec.com/143.pdf</a></p>
<p>says...</p>
<p><i>TEST INDICATOR <br />
A red test output LED is provided which pulses in accordance to the following configurations: <br />
</i></p>
<ul>
<li>Import only meter:  The LED pulses for forward energy only</li>
<li>Import meter with Power Flow Insensitive enabled:  The LED pulses for forward and reverse<i> energy <br />
    </i></li>
</ul>
<ul>
<li>Import/export meter:  The LED pulses for forward and reverse energy</li>
<li>The LED is permanently illuminated when in anti-creep (i.e. below starting current) for all<i> configurations. <br />
    </i></li>
</ul>
<p><i>The test indicator pulses are 40ms wide. The pulse value is 1000 p/kWh for all meter ratings and is marked on the meter nameplate. The LED is not modulated. </i></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Although not your meter, this is interesting... <a href="http://www.pjwmeters.com/pdf/CM-AM-Manual.pdf" title="http://www.pjwmeters.com/pdf/CM-AM-Manual.pdf">http://www.pjwmeters.com/pdf/CM-AM-Manual.pdf</a></p>
<p>Anti creep occurs if an average power of 12.5 watts (+-20%) or less is detected for a period of 4<br />
minutes and 48 seconds. Activation of abti-creep is indicated by the red LED being<br />
continuously lit. This function is reset as soon as the average power over 4 minutes and 48<br />
seconds exceeds 12.5 watts (+-20%); the LED then returns to pulsing as normal</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5480"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="madmurg&#039;s picture" title="madmurg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by madmurg (not verified) on Wed, 01/08/2012 - 18:51.</div>
    <div class="content">
     <p>That makes sense as my solar generation meter led is constantly lit red at night when no electricity is being generated. So a constant lit led on the main house meter is  good when the controller is running.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5482"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 01/08/2012 - 21:05.</div>
    <div class="content">
     <div class="content">
<p><em>Robin, I've not watched the video, does your meter have 2 LED's  or just one - does it solidly light when theres no export/import - i.e  zero power ?&nbsp; </em></p>
<p>Stuart, it just has the one LED, which blinks when importing and stays on continuously when exporting.&nbsp; When balanced (import = export), the LED can either be ON or OFF depending what happened most recently.&nbsp; But, after a short while, the LED invariably comes on which suggests a bias in the export direction.&nbsp; </p>
<p><em>I'm tempted to get an electrician in to install an export meter on the meter tails to see whats going on.&nbsp; </em>Sounds a great idea, then you would really know what's going on.&nbsp; Could take a while though to recoup the expense ;)</p>
<p>With my Mk1 build, I did try the '+ve hole idea, but haven't done so with the Mk2 version.&nbsp; When no current is flowing on a test rig, I see no leakage, so it would seem unhelpful in that situation to be purchasing energy.&nbsp; But the combination of having a '+ve bias' towards import, plus monitoring the LED to 'pull back' if the flow of LED pulses gets too great, could be a promising combination</p>
<p>On my Landis meter, there are two types of chargeable events:&nbsp; 'PULSE' and 'going ON'.&nbsp; There is no charge when the LED goes off.&nbsp; When it crosses a threshold for which you have already been charged, there is no additional charge providing that you have not dropped below the next threshold level in the meantime.&nbsp; It's easier to explain in a diagram than in words, I must draw one.&nbsp; Or just put the kettle on and off a few times while running my meter analysis tool (requires an LDR, resistor and capacitor)</p>
<p>madmurg: The LED on our generation meter is always ON at night.&nbsp; I presume this is because of the small flow of energy in the backwards direction</p>
</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5483"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 01/08/2012 - 21:09.</div>
    <div class="content">
     <p><i>The test indicator pulses are 40ms wide. The pulse value is 1000  p/kWh for all meter ratings and is marked on the meter nameplate. The  LED is not modulated. </i></p>
<p>So my measurement of 38mS using millis() was not far out then :)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5520"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sat, 04/08/2012 - 10:25.</div>
    <div class="content">
     <p><em>&quot;The LED on our generation meter is always ON at night.  I presume this is because of the small flow of energy in the backwards direction&quot;</em></p>
<p>I've connected a spare Efergy meter to the line from the inverter to monitor generation at my desk (also programmed the gen &amp; fit tarrif so I can see what I'm earning!), at night it shows 50 watts on the move (the efergy cant tell the direction), I presume the inverter needs some mains power to monitor when to switch on etc.</p>
<p>Also I've got a test rig mostly running and am using a PCB transformer for the AC ref, it's one of the Vigortronics ones Spirotronice sells its a 3VA - &nbsp;9V one and gives a nice clean sine wave O/P, I havent checked phase difference as yet but it looks like it's doing the job OK.</p>
<p>To thansfer to &quot;real life&quot; do I only need to comment out the one line- &nbsp;#define DEBUG to be up and running? I did this and was able to drive a 60W bulb and could check the CT was working with a load on an extention lead.</p>
<p>One last question, how do I post pictures on this forum? I've got some on photobucket to share.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5521"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="madmurg&#039;s picture" title="madmurg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by madmurg (not verified) on Sat, 04/08/2012 - 12:25.</div>
    <div class="content">
     <p>Just click on file attachments, then click on choose to attach the file you want,&nbsp; &nbsp;then click the attach button and tick the list box and all you have to do then is press save. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5522"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 04/08/2012 - 12:27.</div>
    <div class="content">
     <blockquote><p>&quot;how do I post pictures on this forum?&quot;</p>
</blockquote>
<p>Click &quot;File attachments&quot; below the edit window, attach and upload the file(s), then before you post (&quot;Save&quot;) make sure List is ticked for each.</p>
<p>[Edit - OK, beat me to it whilst I was writing the post <img src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/cry_smile.gif" alt="" /> ]</p>
<blockquote><p>&quot;I presume the inverter needs some mains power&quot;</p>
</blockquote>
<p>The 50 W quiescent load for the inverter sounds about right - it needs to keep alive to monitor both the incoming mains and the PV output&nbsp; as it can only invert when the mains is present (because the supply company gets excited if they think they've isolated the supply and then you feed in, and if I was a linesman in the bottom of a muddy trench, I'd understand why).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5523"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jimjam&#039;s picture" title="jimjam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by jimjam (not verified) on Sat, 04/08/2012 - 14:15.</div>
    <div class="content">
     <p>I have just completed my controller, next job is to screw it to the wall.</p>
<p>Picture attached.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5530"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1399" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1399.jpg" alt="Series530&#039;s picture" title="Series530&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1399" title="View user profile.">Series530</a> on Sun, 05/08/2012 - 18:26.</div>
    <div class="content">
     <p>Looks like a very neat piece of work. I am very impressed</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5554"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Mon, 06/08/2012 - 18:24.</div>
    <div class="content">
     <p>Any transformer will have a non linear zero cross. If you want an accurate voltage sensor it has to direct from the mains.I have spent&nbsp; hundreds of hours trying to use a transformer but defeated by the nonlinearities however big the transformer. You will find that it is voltage dependant as well. It is possible to design a safe voltage sensor using a y capacitor and a large resistor. the phase advance is more critical than you think and has to be determined to better than 100uS to achieve less than 10W export.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5559"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 06/08/2012 - 19:16.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1149" title="View user profile.">pmcalli</a></p>
<p>I don't think some of your assertions are entirely accurate. Can you elaborate please?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5565"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Mon, 06/08/2012 - 22:10.</div>
    <div class="content">
     <p>Please post a circuit that complies with regulations that does not need at least minimal isolation.</p>
<p>&quot;It is possible to design a safe voltage sensor using a y capacitor and a large resistor.&quot;</p>
<p>I am testing a system that is based in Robins design with a small transfomer and it works, it's not that critical a componant.</p>
<p>And if I were worried about 10W of export, then I would be worried about my sanity.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5567"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Tue, 07/08/2012 - 10:13.</div>
    <div class="content">
     <p>attached voltage pick off from my circuit. for your circuit 100k would need to be reduced to 22k and referenced to 2.5V ( could be done by zener ref from 5v supply) to produce approx +.5 to +4.5V. transorb zeners would need taking down to 5V. without the cap across the 100k it produces an advance of approx 0.5ms. the cap is used to trim the advance to the CT in use which you will do in software and so it is not required.</p>
<p>regulation requirement as I understand it (please correct)&nbsp; is</p>
<p>earth leakage should be below 3.5mA&nbsp;&nbsp;&nbsp; (75uA or 10uA for medical NA here)</p>
<p>discharge should occur in less than 1 sec</p>
<p>safety assement of failure modes should not result in a live chassis</p>
<p>dc isolation of 1M tested with 500V is usually carried out but technically only applies to personal appliances not fixed professional equipment which this is otherwise it would have to comply with harmonic current limits ( not ecconomically possible with triacs and 3KW )</p>
<p>In my case the discharge is provided by the EMC filters 1M discharge path if you are operating&nbsp; without a filter then a discharge resistor would be needed. the 4.7nF cap needs to be y rated so it is self healing or does not fail short circuit.</p>
<p>&nbsp;</p>
<p>in reponse to you declaring me insane I should have said 10W of error rather than export. unfortuantely lots of liitle errors when not understood add up to big ones I had over 200W of export under some power factor loads ( air source heat pumps ) to start with. I had to design using a phase controller first to understand where the errors are coming from as the burst fire produces over a 100 times bigger devaition in power which is difficult to measure and work out what is happening. having reduced the errors to just component tolerances and understood where they come from a monte carlo analysis suggests an export offset of 25W and max export of 50W for the phase controller will produce a robust system ( no trimmers ) and no meter creep. single or half cycle ( not sure if legal ) burst will work with the same values and has been verified by meter trials on my system. The sample rate you are using will limit the power accuracy with some house loads so I suspect the offset will have to be higher to avoid import although I have found with disc meters reverse and forward creep due to load changes tend to cancel as the mechanical latch doesnt immediately kick in. digital meters anti creep can also be exploited but there is little documented by the suppliers</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5569"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="dm&#039;s picture" title="dm&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by dm (not verified) on Tue, 07/08/2012 - 10:18.</div>
    <div class="content">
     <p>Is&nbsp;there a good reason to physically separate the TRIAC&nbsp;from the MOC and the MOC from the other low power components in this design? I can imagine there's quite a potential for induction from the TRIAC&nbsp;switching on/off at HF&nbsp;which could I guess upset the digital/processing side of things?</p>
<p>My plan was to put everything in a single box with mains voltage at one end, the MOC&nbsp;in the middle and the low power at the other... is there any theory or prior discussion here anyone can point me to? Many thanks!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5570"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Tue, 07/08/2012 - 11:10.</div>
    <div class="content">
     <p>Rae: &nbsp;My system is hydro unlike most on this forum and I wonder if that makes any difference if using a power diverter. Lets say I am producing minimum power , 500w &nbsp;(about 10%) and there is no house load. The resistor bank will be switched on once a second for 0.1 sec and off for 0.9 sec. Running under no load for 0.9 sec is a long time seeing as G83 switching has to kick in within 0.5 sec. Is the generator actually running at no load or is it (to use your bucket analogy) filling the bucket with power ready for the next burst? In which case where is the bucket? Or is the `bucket` really hysteresis?</p>
<p>
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5579"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 07/08/2012 - 15:58.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1149" title="View user profile.">pmcalli</a></p>
<blockquote><p>&quot;Any transformer will have a non linear zero cross. If you want an  accurate voltage sensor it has to direct from the mains.I have spent&nbsp;  hundreds of hours trying to use a transformer but defeated by the  nonlinearities however big the transformer. You will find that it is  voltage dependant as well&quot;</p>
</blockquote>
<p>This may well be true of all the transformers that you tried, but I don't think it is a universal truth. I've written quite a lot in various threads about this and don't intend to repeat it here, it comes down to the design of the transformer. It is quite possible to design and make a transformer with very high accuracy, and is indeed done for instrumentation devices. For most off-the-shelf transformers, waveform accuracy takes a back seat in preference to power, weight and cost.</p>
<p>You seem well aware of the safety issues, but many reading these forums may not be quite so aware as you or I, and may not realise the significance of Y-rated components. It is for this reason that the encapsulated mains adapter is generally recommended, and for most purposes the performance is adequate.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5582"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Tue, 07/08/2012 - 17:45.</div>
    <div class="content">
     <p>Verry sorry pmcalli, what I meant was that we can't expect the system to be 100% perfect and to try and achive that would be chaseing very narrow margins, no offence intended.</p>
<p>As for transformers I belive calypso_rae has said that after testing a few transfomers with his design he found it not to be a very critical componant in his circuit.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5583"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 07/08/2012 - 18:27.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1372" title="View user profile.">noah</a></p>
<p>Calypso_rae's firing circuit works a lot faster than the 0.1 s / 0.9 s that you quote. Tests made and reported here seemed indicate that the energy transferred was the important factor, and the time scale over which this happened was not important. However, whether this is universally true of all digital meters is not known. I don't know how your generator is controlled, I think you would run at whatever load you can generate and feed into the grid for a few cycles, and when you have fed in enough energy to supply your resistor for one cycle, you run the heater for one cycle and recover the energy using the grid as the energy reservoir. Although the impedance you are driving into changes, unless you have a very weak supply I doubt you would notice the effect.</p>
<p>The 'bucket' is a concept, more than a physical reality. It's a number that is added and subtracted from according to the nett flow of energy to and from the grid. It does not matter what the house load is, the controller works on the nett energy flow.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5584"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 07/08/2012 - 18:50.</div>
    <div class="content">
     <p><a title="View user profile." href="http://openenergymonitor.org/emon/user/1165">richmc</a></p>
<p>In Calypso_rae's controller, although he is measuring power, the nett relative power flow is more important than the absolute value, so the transformer output waveform is less important than in absolute measurements. However, having said that, some transformers have an output that leaves much to be desired and are best avoided. I know of no way of predicting whether a transformer will perform well or not - it depends on what parameters the designer put uppermost. A transformer specifically designed for measurement will obviously have a more faithful output than one designed for an isolated power supply.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5588"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Wed, 08/08/2012 - 10:59.</div>
    <div class="content">
     <p>Robert</p>
<p>That makes sense to me: Isee it as playing with the hysteresis of the system:this may be inaccurate but at least I can visualise it (as an elastic band attached to a toggle switch- you can pull the band to a certain degree and then recover the energy. if you pull too hard the switch will trip and show up as an import pulse)</p>
<p>However I still dont see how you escape the .1 sec on .9 sec off &nbsp;routine. If you are restricted to 100 switches per second you could be on for 1 half cycle and off for 9 but that still limits you to 10% minimum use or maybe 30w on average systems. Not a problem for me as I would consider 100w steps to be fine. Of course if the time ratio of on to off is not relevant- only the amount of power shifted- then that makes sense too: the elastic band is longer than I thought.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5589"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 08/08/2012 - 11:13.</div>
    <div class="content">
     <p>Hi folks, just to clarify how my 'energy bucket' scheme works.&nbsp; It's really simple ...</p>
<p>During each loop of the code, a pair of voltage and current samples  are taken at the supply point.&nbsp; These are multiplied together, with the voltage sample having  been phase-corrected using PHASECAL, to get power.&nbsp; During each mains cycle,  all of these power contributions (instP) are added together (sumP) and  then divided by the number of sample pairs.&nbsp; That gives the average  power over the 20mS interval.&nbsp; Knowing the average power and the  duration gives the net energy flow, which may be positive or negative,  during that individual mains cycle.&nbsp; This value is simply added to the contents of  the energy bucket.&nbsp; That is the entire measurement algorithm, there's  nothing else.</p>
<p>When surplus power is available, energy starts to slip away into the grid.&nbsp;  This is measured as above, and the level of the energy bucket (energyInBucket) starts to  increase.&nbsp; The distribution algorithm makes an on/off decision every mains cycle shortly  after the bucket's level has been adjusted.&nbsp; If the level has reached  the specified threshold level, the triac is set to go 'on' for the next mains cycle;  otherwise it is set to be 'off'.&nbsp; Providing that the rating of the dump load is greater than the amount of surplus power, the energy bucket's level will sit close to the threshold point.&nbsp; If the surplus power suddenly ceases, then power distribution will cease too, well within 50mS. That is the entire distribution  algorithm, there's nothing else.</p>
<p>This system will work equally well with PV or hydro.&nbsp; The rating of the dump load is not relevant; a larger load will just spend less time 'on' than a lesser one.&nbsp; If the amount of surplus power exceeds the rating of the load, the energy bucket will increase above its normal operating level (1800J).&nbsp; A second threshold point could then be used to turn on a secondary load, still using only free power.</p>
<p>The operation of the code is best analysed in debug mode by adding Serial statements wherever is helpful.&nbsp; Using the pause() function, the code can be halted anywhere while printout on the screen is analysed.&nbsp; cycleCount increases by 50 each second and is a useful benchmark.&nbsp; After ten seconds, cycleCount will be 500 so processing can easily be intercepted at that point using a simple test criterion. </p>
<p>Debug mode works fine when connected to real kit; it's just not in synch with the mains.&nbsp; If you setup a 10% distribution ratio in debug mode (surplus PV&nbsp; = 300W; immersion rating = 3000W; safety margin&nbsp; = 0), you should see the triac coming on for approx 10% of the time.&nbsp; </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5590"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 08/08/2012 - 21:23.</div>
    <div class="content">
     <p><em>noah: However I still dont see how you escape the .1 sec on .9 sec off &nbsp;routine. If you are restricted to 100 switches per second you could be on for 1 half cycle and off for 9 but that still limits you to 10% minimum use or maybe 30w on average systems. Not a problem for me as I would consider 100w steps to be fine.</em></p>
<p>My Mk1 system was limited by the operation of the external power controller, a Carlo Gavazzi.&nbsp; In its mode 2, Carlo would distribute whole cycles evenly over a 64-cycle window.&nbsp; That imposed a fundamental resolution limit of a percent or two.&nbsp;&nbsp; The main problem with that setup, however, was that I was <em>predicting</em> how much surplus energy would be available during the next second or so.&nbsp; If someone turned the kettle on, Carlo wouldn't know ...</p>
<p>Mk2 makes no predictions.&nbsp; It simply records how much energy has slipped into the grid.&nbsp; After a certain point has been reached, it says &quot;Right, that's enough&quot;, and turns on the triac for one whole cycle only.&nbsp; The same process is repeated every mains cycle.&nbsp; For a 3kW load, we're talking 60J per mains cycle.&nbsp; That's well within the 3600J window that most meters appear to allow.&nbsp;</p>
<p>While power is being distributed during daylight hours, it seems likely that our meter is entering its anti-creep mode.&nbsp; By definition, therefore, no power is slipping away.&nbsp; Previously I thought that we were permanently exporting.&nbsp; Although the LED is constantly 'on' in both conditions, the anti-creep mode explanation seems to match the observations better.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5599"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Wed, 08/08/2012 - 15:05.</div>
    <div class="content">
     <p>rae I shall doubt no further. I can follow you circuit diagram in a lego sort of way however I see that the voltage sensor bit is less complex than on the `measuring ac voltage` page ie no &nbsp;resistors to add offset. Has this been left out for some reason or is it not needed as same function carried out elsewhere?</p>
<p>Please, someone ask me a question about hydropower so I can look less uninformed!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Wed, 08/08/2012 - 20:44.</div>
    <div class="content">
     <p>Hi Noah, Robin has a more elegant way of getting the offset voltage, he is using the op amp, the two 12K resistors at it's input are the divider and the o/p gives a very stable offset voltage.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5617"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 09/08/2012 - 16:56.</div>
    <div class="content">
     <p>Fuses.&nbsp; I wanted to check my setup recently at something over 3kW so decided to run both the 3kW kettle and 1.5kW hot air blower from a double adapter.&nbsp; OK, so the fuse is only rated at 13A, but I only want to run them together for a couple of seconds ...</p>
<p>The kettle started up fine, as it has done many times before, but when I switched the blower on as well, something popped.&nbsp; Having listened to all the debate about the way that fuses may operate, I was rather impressed that this one had ruptured so quickly with just 50% overload.</p>
<p>The fuse in the adaptor was fine, so it must be the one in the plug.&nbsp; When checked inside the plug, the fuse had indeed failed, its rated value being&nbsp; ... 5A ! </p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5618"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 09/08/2012 - 18:09.</div>
    <div class="content">
     <p>I can think of 2 good reasons why it was a 5 A fuse.</p>
<p>1. The cable and/or adapter is only good to 5 A, or</p>
<p>2. Somebody had 'borrowed' the 13 A fuse!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5631"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Fri, 10/08/2012 - 12:15.</div>
    <div class="content">
     <p>Thanks richmc</p>
<p>&nbsp;</p>
<p>More amateur questions; the components listed such as moc3041 seem to come in variations:</p>
<p><a href="http://www.ebay.co.uk/itm/SILICON-CONTROLLED-RECTIFIER-BTA41-600B-BTA41-600-/260661038432?pt=UK_BOI_Electrical_Components_Supplies_ET&amp;hash=item3cb09bcd60" title="http://www.ebay.co.uk/itm/SILICON-CONTROLLED-RECTIFIER-BTA41-600B-BTA41-600-/260661038432?pt=UK_BOI_Electrical_Components_Supplies_ET&amp;hash=item3cb09bcd60">http://www.ebay.co.uk/itm/SILICON-CONTROLLED-RECTIFIER-BTA41-600B-BTA41-...</a></p>
<p>&nbsp;</p>
<p><a href="http://www.ebay.co.uk/sch/i.html?_trksid=p5197.m570.l1313&amp;_nkw=lm358&amp;_sacat=0" title="http://www.ebay.co.uk/sch/i.html?_trksid=p5197.m570.l1313&amp;_nkw=lm358&amp;_sacat=0">http://www.ebay.co.uk/sch/i.html?_trksid=p5197.m570.l1313&amp;_nkw=lm358&amp;_sa...</a></p>
<p>&nbsp;</p>
<p><a href="http://www.ebay.co.uk/itm/5x-LM358N-Operational-Op-Amp-Amplifiers-IC-LM158-LM258-LM2904-/170818938117?pt=UK_BOI_Electrical_Components_Supplies_ET&amp;hash=item27c59a2505" title="http://www.ebay.co.uk/itm/5x-LM358N-Operational-Op-Amp-Amplifiers-IC-LM158-LM258-LM2904-/170818938117?pt=UK_BOI_Electrical_Components_Supplies_ET&amp;hash=item27c59a2505">http://www.ebay.co.uk/itm/5x-LM358N-Operational-Op-Amp-Amplifiers-IC-LM1...</a></p>
<p>etc etc</p>
<p>Are these variations important? Don`t want to buy the wrong bits.</p>
<p>I take it from 40A rating on triac that running 2 3kw heaters in paralell wont be a problem (as long as triac is well cooled)?</p>
<p>
&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5633"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 10/08/2012 - 13:03.</div>
    <div class="content">
     <blockquote><p>&quot;I take it from 40A rating on triac that running 2 3kw heaters in paralell wont be a problem (as long as triac is well cooled)?&quot;</p>
</blockquote>
<p>Read up my comments on fusing and protection. A 40 A triac with a 13 A fuse <em>might just</em> survive a short-circuit in the heater. With a higher rated fuse, it almost certainly would not. In any case, you would need a good heatsink as each triac can dissipate about 13 W when firing continuously.</p>
<p>For the triac, you want the TOP3 package, 600 V insulated, 50 mA sensitivity, i.e. BTA41-600B</p>
<p>For the LM358, the standard 'N' suffix should be fine (8-pin DIP, 0 - 70&deg;C) The 'A' version has slightly lower offset voltage and current, and a lower input bias current.</p>
<p>As always, the data sheets are your definitive source of information.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5636"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Fri, 10/08/2012 - 14:31.</div>
    <div class="content">
     <p>Robert</p>
<p>I havn`t closely followed the fusing debate as my (probably well outdated now) experience from early music transitor amps was that semiconductors would always die before any fuse could really get going. That said, I would think that the chance of a short in an immersion heater is pretty low as long as you don`t go bending it.</p>
<p>I`ve often found useful information on data sheets but, unsurprisingly, they assume some degree of background knowledge and the simplest thing to aficionado can be pure gobbldygook to a tyro.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5639"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 10/08/2012 - 19:14.</div>
    <div class="content">
     <p><em>I take it from 40A rating on triac that running 2 3kw heaters in paralell wont be a problem (as long as triac is well cooled)?</em></p>
<p>My, that's a lot of spare power that you're intending to divert!!&nbsp; </p>
<p>If several appliances are connected in parallel, the triac wouldn't need to dissipate any more heat because its 'on' cycles would occur less frequently.&nbsp; The video that I posted recently shows this concept in action.&nbsp; The flash rate of the light is dependent on the combined load of the light and heater.&nbsp; When the heater is turned up (two bars rather than just one), the flash rate drops because more energy is&nbsp; consumed for each cycle that the triac is 'on'.</p>
<p>Fully heating up one tank first and then moving on to a second appliance sounds a good idea to me.&nbsp; The algorithm can do this very easily by defining two threshold levels rather than just one.&nbsp; To get more heat into our tank, I may add a pump which comes on whenever the energy bucket gets to the higher level.&nbsp; The effect of the pump would be to stir the water in the tank thereby cooling the thermostat so that more heat could be taken on board.&nbsp; </p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5641"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 10/08/2012 - 20:11.</div>
    <div class="content">
     <p>But we don't know how much power is available. Does the 16A limit also apply to hydro? If it does, then yes, the heat sink needs to be no bigger. But if not...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5642"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Fri, 10/08/2012 - 23:21.</div>
    <div class="content">
     <p>It's about what you want to drive with the triac in this case it could&nbsp; drive a fan oven (9.6KW) with sutable cooling. A 3KW immersion only takes 12.5 amps.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5647"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Sat, 11/08/2012 - 11:00.</div>
    <div class="content">
     <p>&nbsp;I have two hydro systems, a waterwheel and turbine. The waterwheel produces domestic single phase with a &nbsp;max output of 5.5kw . The turbine is 10.5kw 3phase. Both grid connected using induction generators. The ww is connected under G83 (even tho output is 25a): DNO`s have discretion on this depending on the state of the local grid.</p>
<p>My house, for forgotten reasons, has two seperate heating systems; 2woodburners with back boilers,2 sets of rads and u/f pipes and 2 immersion heater tanks. Hence running in paralell so all of house is heated.<br />
&nbsp;</p>
<p>My plan is to make up two small IH tanks- maybe 15/20ltr- with 3kw elements and attach them in paralell to the back boilers. The existing ch pumps will then distribute heat around the house. Hence running in paralell so that all of house is heated.</p>
<p>&nbsp;One disadvantage of this system is that if you are feeling cold and plug in a heater you wont get any warmer until your plug in load exceeds generated power.</p>
<p>pics:</p>
<p><a href="http://s990.photobucket.com/albums/af26/brianfaux/Waterwheel/" title="http://s990.photobucket.com/albums/af26/brianfaux/Waterwheel/">http://s990.photobucket.com/albums/af26/brianfaux/Waterwheel/</a></p>
<p><a href="http://s990.photobucket.com/albums/af26/brianfaux/Turbine/" title="http://s990.photobucket.com/albums/af26/brianfaux/Turbine/">http://s990.photobucket.com/albums/af26/brianfaux/Turbine/</a></p>
<p>Compared to most solar this is a large output. But it needs a lot of looking after. Good excuse for not leaving home.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5651"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sat, 11/08/2012 - 13:17.</div>
    <div class="content">
     <p>Noah the &quot;N&quot; sufix just says it' the 8 pin dip package normaly we just use LM358, just being lazy!</p>
<p>If you go to Spiratronics web site there are links to data sheets for most products they sell this where Robin and I got our parts.</p>
<p>As for the triac the &quot;BT<strong><u>A</u></strong>&quot; denotes it has an isolated tab so no insulation washer needed just some heat conductive paste, I'm earthing the heatsink&nbsp; as a precautionary measure, if it were to go live then the CB in the consumer unit would trip, I think the idea of protecting the triac is a moot point as first as a 40 amp device its going to be pretty robust and if it fails it will more than likely go open circuit in a very short time and is replaceable. After all light dimmers rely on the consumer unit if they fail, all we are working with is a big light dimmer.</p>
<p>As for your heating idea I see no&nbsp;problem useing it as you surgest. In a more conventional gas central heating system still useing Roberts circuit to pre heat the the circulating water in the system&nbsp; would work, then the gas would be used to top up what you pre heated.</p>
<p>One thought I had was to have an air source&nbsp;heat pump type air conditioner/heater this would need to be switched in at a set generation level and have a longish hysterisis so it remains on for a practical time for you with the hydro system generating a more predictable o/p it could work quite well, as modern units will provide around 3.5KW o/p for around 1KW electrical i/p, and in the summer when the water is heated you can switch over to air con cooling.</p>
<p jquery1344688775605="78">&quot;One disadvantage of this system is that if you are feeling cold and plug in a heater you wont get any warmer until your plug in load exceeds generated power.&quot;</p>
<p jquery1344688775605="78">I'm not sure what you are saying there, can you explain a bit more?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5654"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Sat, 11/08/2012 - 14:55.</div>
    <div class="content">
     <p>richmc</p>
<p>(posted this an hour ago but hasnt appeared. I`ll add some more anyway)</p>
<p>Plumbing I can handle.</p>
<p>HSP would be good especially with river nearby to extract from. But, baby steps.</p>
<p>If you plug in a heater the diverter will see this as another household load and reduce power sent into your i/h. If your i/h is part of central heating (rather than just hot water) this reduces your ballast heat to balance new load. Its only when you plug in more than whats available from home gen that you get more heat.&nbsp;</p>
<p>Hows about this for a ct with inbuilt burden:</p>
<p>
<a href="http://www.ebay.co.uk/itm/Current-Transformer-Clamp-Ammeter-Taehwhatrans-TS10L-w-102-ohm-1-load-/130733200496?pt=UK_BOI_Electrical_Test_Measurement_Equipment_ET&amp;hash=item1e704e5470" title="http://www.ebay.co.uk/itm/Current-Transformer-Clamp-Ammeter-Taehwhatrans-TS10L-w-102-ohm-1-load-/130733200496?pt=UK_BOI_Electrical_Test_Measurement_Equipment_ET&amp;hash=item1e704e5470">http://www.ebay.co.uk/itm/Current-Transformer-Clamp-Ammeter-Taehwhatrans...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5656"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sat, 11/08/2012 - 17:10.</div>
    <div class="content">
     <p>If I were using this one, I think I'd go for a smaller burden resistor to keep the phase-shift down ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5657"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sat, 11/08/2012 - 22:03.</div>
    <div class="content">
     <p>Noah</p>
<p>I would have thought with the water wheel giving 25A and being a depenable power source you would have no problem running the 3KW (12.5A) immersion and another heater, but you could find some way to check if the immersion stat has kicked in before diverting to the heating system, it's just a matter of choosing your priorities.</p>
<p>And I think that CT looks too cheap to be true why not stick with the tried and tested SCT-013-030? it has a built in burden, I got a couple from China they took a while to arrive but I belive there is a UK supplier someone is bound to post who they are.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5661"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 11/08/2012 - 23:53.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1372" title="View user profile.">noah</a></p>
<p>It's quite possible then that both triacs will be on solid for a significant time, therefore you <strong>DO</strong> need a heatsink rated to about 25 W.</p>
<p>&quot;One disadvantage of this system is that if you are feeling cold and plug  in a heater you wont get any warmer until your plug in load exceeds  generated power.&quot; <br />
Not true. Calypso_rae's controller will automatically throttle back on the power being dumped to the controlled (immersion heater) loads in favour of any other house load. If you're not generating enough, you will import to supply the demand and no power will be dumped to the controlled loads.</p>
<p><a href="http://openenergymonitor.org/emon/user/1165" title="View user profile.">richmc</a></p>
<p>Triac: &quot;a 40 amp device its going to be pretty robust&quot; - maybe, but not robust enough to guarantee to trip a 16 A MCB or blow a 13 A fuse under all conditions and survive. Check the data sheet and compare the I<sup>2</sup>t values for the triac, fuse and MCB.</p>
<p>&quot;but you could find some way to check if the immersion stat has kicked in&quot;<br />
There's no need to check the tank thermostat. If the &quot;energy bucket&quot; continues to fill, the 'stat has opened (else the heating element has died or a wire fallen off ! ), and you leave that triac turned on ready for when the water cools and fire the second triac as well on a threshold that's 2 cycles worth of dumped energy higher (about 120 - 150 J). And so on. If No.1 takes the load, the &quot;bucket&quot; will empty and heat No.1 in preference to No.2, which will turn off as No.1 maintains the &quot;bucket&quot; below No.2's threshold - unless of course you have more spare energy than No.1 can consume, when No.2 will take what it needs to balance. And if No.2 can't use all the power, you export.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5665"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 12/08/2012 - 07:06.</div>
    <div class="content">
     <p>It's always interesting to hear other people explaining how my system operates.</p>
<p>On this occasion, RW scores full marks :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5666"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 12/08/2012 - 09:22.</div>
    <div class="content">
     <p>Robert the point&nbsp;I was making about the triac is in the case of it's failure, at that time protection is secondery and to protect the house wiring, if it goes short&nbsp;and stays that way&nbsp;it will not blow the trip but will just leave the immersion on till it reaches temperature (as it will be&nbsp;importing).</p>
<p>This senario is unlikly as it's more likely to blow open than go short.</p>
<p>The third senario is if the triac tab goes live it will send the heatsink live so it must be earthed in order to then blow the trip.</p>
<p>What we need is some way of monitoring the condition of the triac, mayby a neon accoss it so if the triac is short the neon is out and if the Arduino can detect &quot;neon off+PV below threshold=alarm&quot; and if the triac goes open then&nbsp;&quot;neon on+PV above threshold=alarm&quot;</p>
<p>What do you think?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5667"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 12/08/2012 - 09:23.</div>
    <div class="content">
     <p>&quot;It's always interesting to hear other people explaining how my system operates.</p>
<p>On this occasion, RW scores full marks :)&quot;</p>
<p>.............and I'll take the wooden spoon, said I was a noobie!&nbsp;&nbsp;&nbsp; <img alt="" src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/sad_smile.gif" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5669"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Sun, 12/08/2012 - 10:10.</div>
    <div class="content">
     <p>Richmc<br />
The i/h elements paralelled to c/h system would be the dump load: when no other circuits are switched in then all excess goes to them. I/h`s in hot water cylinders switch in an out as per normal demand. As there are two in the house I have wired them with interconnecting relays so that only one comes on at a time: no need to have them both on at the same time and (probably) import to make up shortfall.</p>
<p>Robert<br />
Surely one 40a triac will suffice for a 6kw load? There is no need for any `stepped` output to my c/h elements. If say for an appreciable time only 2.5kw is going spare then only half the house will be heated. Better to share whatever power is available between the two.<br />
If there is 4kw being generated and no other household load then 4kw goes into c/h system. If you switch on a 2kw fan heater then 2kw will be subtracted from the c/h leaving total heat still at 4kw. So if you are really cold you would need to plug in 4kw+ to get EXTRA heat.<br />
I`m quite happy to go with the SCT-013-030 but as its rated at 30a wouldnt it be damaged by a possible 60a houshold supply?<br />
We are looking, if I understand correctly,for  a CT which will handle the max that could be sent through it  (for normal house 100 amp?) with a low burden to minimise phase shift. Must be a perfect candidate out there somewhere.</p>
<p>Rae<br />
The CT should be positioned just after (ie load side) of the import meter before consumer unit and home gen input, correct? In my case that means a distance of maybe 20m between sampling point and dump load. Would a 20m cable between these points introduce too much  voltage drop? I`d rather run a cable containing 2.5v and have the switching done close to the load as opposed to running a 6kw cable - which would have to be 10mm armoured as the run is actually between two buildings.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5670"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 12/08/2012 - 13:55.</div>
    <div class="content">
     <p>Noah</p>
<p>Yes you are right, the 030 is 30amp, doubt if any damage would occur but may give non linier o/p, there is a SCT-013-060 (60A /1V version) or the SCT-013-000 current reading version that you would have to choose your own burden resistor value to get the voltage you need.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5671"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Sun, 12/08/2012 - 12:19.</div>
    <div class="content">
     <p>thanks richmc. I am easily confused. I shall set about acquiring one of these SCT-013-000 beasties and reread the resistor pages.<br />
Wait up! Surely that should be STC-013-100?  Ah but 000 seems to be their code for current output. See how easy it is to get confused.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5673"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Sun, 12/08/2012 - 12:29.</div>
    <div class="content">
     <p>Regarding unreliability of clamp ct`s.<br />
I`m having a meter change at the end of the month and could use the opportunity to slip a ct over the tail. I guess this would be more reliable. Any downside? if it stops working I can always go back to a clamp.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5674"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 12/08/2012 - 12:58.</div>
    <div class="content">
     <p>OK Robin &amp; Robert,</p>
<p>I'm into testing. I'm using a 60W bulb as my load and a seperate 60W lamp to give me a signal for the ct side. After letting things settle down I switch on the simulated PV o/p at sample 5005, the bucket graduly fills till at 7505 the load lights (1724 in bucket)</p>
<p>All is good so at 19005 I switch off the PV lamp but the bucket remains at 3600 and the lamp stays on until I press reset then the bucket sits at .3 to .6 ish and the lamp stays off. So something is not right.</p>
<p>I'm guessing things are working but where do I go from here?</p>
<p>By sample I mean cycle.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5675"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 12/08/2012 - 12:59.</div>
    <div class="content">
     <p><a title="View user profile." href="http://openenergymonitor.org/emon/user/1165">richmc</a></p>
<blockquote><p>&quot;What do you think?&quot;</p>
</blockquote>
<p>You monitor the triac, then what? Do you intend to set an alarm or send yourself a text message? The possibility of it happening is fairly slim and I'd go for waiting to realise something was amiss then fault-find rather than adding the complication of extra devces, inputs and wiring etc. KISS and all that! But that's only my view.</p>
<p>But yes, you really need to insulate and guard the heatsink, or earth it. Personally, I'd go for the insulating washer, nylon bolt and a solid earth to the heatsink. Then you have two layers of insulation to fail before an earth fault can develop.</p>
<p>&quot;and I'll take the wooden spoon,&quot; Don't worry too much - I've been doing industrial electronics and control systems for 40+ years - I've had a bit of practice<img src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/teeth_smile.gif" alt="" />.</p>
<p><a title="View user profile." href="http://openenergymonitor.org/emon/user/1372">noah</a></p>
<p>Yes, the 40&nbsp; A triac will support that load - I got the impression that you wanted to control the central heating load in preference to (or maybe the other way round?) the hot water load.</p>
<p>&quot;<em>Rae<br />
The CT should be positioned just after (ie load side) of the import  meter before consumer unit and home gen input, correct? In my case that  means a distance of maybe 20m between sampling point and dump load.  Would a 20m cable between these points introduce too much  voltage drop?  I`d rather run a cable containing 2.5v and have the switching done  close to the load as opposed to running a 6kw cable - which would have  to be 10mm armoured as the run is actually between two buildings</em>.&quot;</p>
<p>I'm planning to solve a similar problem in a friend's farmhouse in rural Scotland by splitting the system between the emonTx/Arduino and the opto-isolator, joining the two with nothing more than a twisted pair of telephone cable. The opto current is sufficiently low for there to be no appreciable voltage drop (and if there is, you reduce the series resistor to compensate, and it all runs at 3.3 / 5 V, so no safety worries.</p>
<p>BOTH</p>
<p>I think (without proof) that the YHDC c.t.s are all the same except for the burden resistor (or absence thereof). Have a read of my report and ask if anything isn't clear. I doubt that the c.t. would be damaged at 2x rated current - it's a ferrite core, not iron so unlikely to be permanently magnetised even.</p>
<p>In short, you can hang whatever burden you like on the c.t, but the GREATER the burden resistance, the GREATER the load you put on the c.t. That's opposite to voltage transformers. But you still want to keep the transformer loading to a minimum for best accuracy.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5676"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 12/08/2012 - 13:06.</div>
    <div class="content">
     <p><a title="View user profile." href="http://openenergymonitor.org/emon/user/1165">richmc</a></p>
<blockquote></blockquote>
<p>I'm not sure of your test setup. You need to be able to both generate and consume load through the c.t. to simulate normal working conditions. The bucket fills with generated energy, and empties with consumed energy. So if you have a test rig that only consumes (and you lie to the controller by reversing the c.t. so that it looks like generated energy), then you need to reverse the c.t. again to tell it about the consumed energy, and the bucket should empty.</p>
<p>[Edit] Reminder: when installed, the c.t. should see the nett energy flow into or out of your house. The idea of the system is to try to balance that down to zero. So you install the c.t. at the supply side of the point where the PV feeds in, and of course on the supply side of all the loads you have.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5678"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 12/08/2012 - 13:52.</div>
    <div class="content">
     <p>Thanks Robert the penny has dropped, you don't just stop filling the bucket you kind of syphon the power out. I just went through the routine again and instead of turning off the simulated PV I reversed the CT and it &quot;sucked the bucket dry&quot;Apart from that is there any other set up I need to do for the &quot;real world&quot;?</p>
<p>Attached picture of the rig so far-</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5679"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Sun, 12/08/2012 - 15:29.</div>
    <div class="content">
     <p>Richmc<br />
Splitting the circuit: does that mean extending the wire leading to 1 &amp; 2 (altering 180ohm resistor) on MOC3041 or extending from MOC 4 &amp; 6 (altering either 330 or 360).<br />
Or in fact neither?</p>
<p>So what is the best burden on the ct: 35, 150 or doesnt matter too much?<br />
If I can end up with a system that settles on importing or exporting around 100 watts and doesnt cause any other problems I`ll be well happy.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5681"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 12/08/2012 - 17:56.</div>
    <div class="content">
     <p>Just a reminder that the level of the bucket (<em>float energyInBucket</em>) is <u>only</u> affected by the measurement system.&nbsp; The sole duty of the measurement system is to maintain this variable which replicates the state of the supply meter.&nbsp; In 'normal' mode, the bucket's level is not adjusted within the code when the triac fires!</p>
<p>In parallel with the measurement system, there is a second system which diverts any surplus energy to a dump load, generally an immersion heater.&nbsp; Both of these systems work continuously, but they are not directly linked.&nbsp; The energy-diversion system checks the level of the bucket near the start of each mains cycle, just after the level has been updated.&nbsp; If the bucket is sufficiently full, the triac (via its z/c trigger) is switched 'on' for the next cycle. otherwise it is switched 'off'.</p>
<p>The effect of switching the triac on is to reclaim some of the energy that has been temporarily stored in the grid.&nbsp; When that energy flows away from the house, it is measured as being <u>exported</u> which causes the value of <em>energyInBucket</em>  to rise. &nbsp; When it flows back into the house, it is measured as being <u>imported</u><span style="font-style: italic;"> </span>which causes this value to fall. &nbsp;</p>
<p>While surplus PV is available, the control system has feedback.&nbsp; The energy level will quickly rise up to 1800J but then won't go any further because all additional energy is diverted to the immersion.&nbsp; For a 3kW immersion, any surplus PV between 0 and 3kW will cause <em>energyInBucket</em> to sit at 1800J.&nbsp; </p>
<p>When using a test rig, there is no feedback so things are different.&nbsp; When monitoring the current taken by a 60W light bulb, the bucket's level should increase by 60J/sec and the 1800J threhold will soon be reached.&nbsp; At this point, the triac will come on and stay on.&nbsp; If the 60W bulb is turned off, the bucket's level should stay just where it is, with the triac remaining on.&nbsp;&nbsp; There are a couple of&nbsp; easy ways to manoevre the system back an forth across the all-important threshold level: </p>
<p>1. Reverse the direction of the CT.&nbsp; The energy level will then fall by 60J/sec as energy is 'sucked out' - nice one richmc :)</p>
<p>2. Set <em>safetyMargin</em> to, say, 50W.&nbsp; This acts as a leak.&nbsp; When no current is flowing, the value of <em>energyInBucket</em> will fall by 50J/s, soon crossing the 1800J threshold at which point the traic should turn off.</p>
<p>Neither of these approaches will cause the triac to cycle on and off; they are both static.&nbsp; To make a test rig more dynamic, just recompile the sketch in 'debug' mode having set up the situation that you want to simulate (e.g. <em>surplusPV_4debug</em> = 1000, <em>powerRatingOfImmersion_4debug</em> = 3000, <em>safetyMargin_watts</em>&nbsp; = 0).&nbsp; The code will quickly ramp up to 1800J and sit there happily because of the action of the simulated triac (which only occurs in debug mode).&nbsp; It won't be synchronised to the mains, but the real triac should still rattle on and off which is fine for test purposes.&nbsp; Don't forget to recompile the sketch again in normal mode!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5682"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 12/08/2012 - 18:10.</div>
    <div class="content">
     <p><em>richmc: I'm into testing. I'm using a 60W bulb as my load and a seperate 60W  lamp to give me a signal for the ct side. After letting things settle  down I switch on the simulated PV o/p at sample 5005, the bucket graduly  fills till at 7505 the load lights (1724 in bucket)</em></p>
<p><em>All is good so at 19005 I switch off the PV lamp but the bucket  remains at 3600 and the lamp stays on until I press reset then the  bucket sits at .3 to .6 ish and the lamp stays off. So something is not  right.</em></p>
<p>This all sounds fine, just what I'd expect to see when using a test rig where there is no feedback.</p>
<p>The lengthy printout line is for checking the operation of the low-pass filter which is clearly working perfectly in your case.&nbsp; It's probably time to comment it out and maybe replace it with something more useful.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5683"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 12/08/2012 - 18:56.</div>
    <div class="content">
     <p>Robert, I was thinking of a simple sounder or flashing led to show a triac error, as Robins circuit has no LCD (as yet) if it were to go short you might not notice till the bill came in, or open when you get an unexpected cold shower.&nbsp;I know the likelyhood of the triac failing is remote thats why I thought a low tech solution would surfice.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5684"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 12/08/2012 - 19:41.</div>
    <div class="content">
     <p>If the triac were to fail fully on, you would probably hear the immersion singing gently to itself.&nbsp; Then the thermostat would turn off and you would be pleasantly surprised to find hot water in the taps when you were not expecting it.&nbsp; If the thermostat were also to fail, the system would then start to boil and strange noises would be heard as it starts to belch steam and hot stuff up into the header tank.</p>
<p>Until our Mk 1 controller appeared, we hardly ever used the immersion and had no idea that its stat had failed.&nbsp; The replacement immersion came with two safety features.&nbsp; First, there's the stat which can be set as desired between 50 - 70C.&nbsp; Then there's a second mechanism which supposedly cuts off the power at 97C.&nbsp; I think you may have to manually reset that one if it were ever to operate.</p>
<p>If the triac were to fail fully on, it's no worse than someone just forgetting to turn off their manual switch after half an hour or however long they intended to leave it on for.&nbsp; Maybe they got sidetracked by the Olympics ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5685"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 12/08/2012 - 19:53.</div>
    <div class="content">
     <p>That sounds good enough. But is it foolproof? No volts across the triac might mean the 'stat is open. You will then need a high value resistor across the thermostat so that you can tell the difference between an open thermostat and a short-circuit triac. But just a cautionary note that whatever you do might lead you into a false sense of security because there are other failure modes - the thermostat, fuse/MCB, the immersion element itself, etc. It's quite hard to test for failure. The only real test is the water temperature, is it rising when it should be?&nbsp; And even that's not foolproof because you could have cold water flowing in to hold or reduce the temperature.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5686"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 12/08/2012 - 20:32.</div>
    <div class="content">
     <div class="submitted"><a title="View user profile." href="http://openenergymonitor.org/emon/user/1372">noah</a></div>
<blockquote><p>&quot;Richmc<br />
Splitting the circuit: does that mean extending the wire leading to 1  &amp; 2 (altering 180ohm resistor) on MOC3041 or extending from MOC 4  &amp; 6 (altering either 330 or 360).<br />
Or in fact neither?&quot;</p>
</blockquote>
<p>I think you meant me? <br />
The LED in the opto-isolator (Pins 1 &amp; 2) connects between 5 V and the Arduino output pin (which is active low) with a low value resistor (180 Ohms) in series. It is those two wires to pins 1 &amp; 2 that you extend the 20 m or so, keeping the opto-isolator itself and all the high voltage connections with the triac. So the circuit is 5 V rail, resistor, extended wire, opto LED pin 1; returning via opto LED pin 2, extended wire, Arduino output pin Dig 9. I doubt very much whether you'll need to reduce the 180R resistor. My original calculations showed it needed to be between 165 Ohms and 190 Ohms, so if cable resistance is less than 10 Ohms for the loop, there's no problem. Otherwise, you might want to come down to 160 Ohms.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5687"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Mon, 13/08/2012 - 10:42.</div>
    <div class="content">
     <p>noah, going back a page when I said heat pump air con I was thinking of this kind of thing.</p>
<p><a href="http://www.ebay.co.uk/itm/260393069141?ssPageName=STRK:MEWAX:IT&amp;_trksid=p3984.m1438.l2649">http://www.ebay.co.uk/itm/260393069141?ssPageName=STRK:MEWAX:IT&amp;_trksid=p3984.m1438.l2649</a></p>
<p>So in the summer when the water is hot you get air con and in the winter it can supliment the heating, they make very efective heaters 4KW out for 1KW i/p power, as you have a consistant power supply (not relying on the sun) they may be of use to you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5688"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Mon, 13/08/2012 - 16:45.</div>
    <div class="content">
     <p>The disadvantage of this sort of thing is that you get one big source of heat which is not good for a multi room house. Would be good for a workshop or somwhere thats just one space.</p>
<p>My house has got 2 ft thick stone walls and in West wales - you think I need aircon already?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5690"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Mon, 13/08/2012 - 19:00.</div>
    <div class="content">
     <p>Ha Ha! I guess air con would be surplus to requirements.</p>
<p>But a number of those units around the house could work, nowerdays we are tied up with the need for central heating and as heating units are very effecent. Just a thought.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5715"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Tue, 14/08/2012 - 19:14.</div>
    <div class="content">
     <p>Is anyone using or considering an LCD for Robins design? with&nbsp;overall power useage, export/import rate, generation and diverted power display. I'd like to incorporate that but know nothing about how to go about it. Robin has surgested that the print part of the code can go once the diverter is up and running, can it be replaced with somthing useful that won't delay the essential workings of the device?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5720"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 15/08/2012 - 08:07.</div>
    <div class="content">
     <p>As published, my code does two things:</p>
<p>First, it maintains an energy bucket (<em>energyInBucket</em>) which mimics the operation of the supply company's meter.&nbsp; Second, it provides a means of diverting any suplus power so that the energy bucket's level remains constant.&nbsp;&nbsp; </p>
<p>Energy that is diverted to a dump load is ignored by the meter because the net flow at the supply point is never large enough to cross the meter's chargeable thresholds.&nbsp; The supply meter could therefore not tell you anything about the effectiveness of any PV diversion scheme.&nbsp; The Arduino code, however, is one step ahead of the meter and could easily keep track of the amount of energy that has been diverted.&nbsp; For a 3kW load, approx. 60W will be consumed for each cycle that the triac is on.&nbsp; Just keep count of the number of 'on' cycles, and that's the energy that's been diverted (provided that the thermostat has not cut in ...)</p>
<p>The next problem is how to reset the counter each day.&nbsp; The energy level in the bucket can fall to zero for various reasons.&nbsp; One reason is that it might be midnight.&nbsp; Another is that someone may have just put the kettle on, or be taking an 8kW shower.&nbsp; To reset the 'diverted energy' counter, there would need to be some association with a real time clock, which sounds rather complicated. </p>
<p>One simple approach might be to monitor the LED on the inverter's front panel so that PV on/off periods can be identified.&nbsp; At its simplest, operation of the code could be suppressed whenever the PV is off.&nbsp; Then, when the PV starts up each morning, the code would be allowed to proceed with the 'todays total' set to 0.&nbsp; The total value could then be displayed every time it has increased by 0.1kWh, or whatever.</p>
<p>A better approach might be to power-down the Arduino each evening when the PV goes to sleep, but then it wouldn't be able to display anything.&nbsp; So, is is better for the system to stay live 24/7 just so you can ask it how much <strike>power</strike> energy has been diverted today?&nbsp; Or is it better for the system to switch off when the PV is inactive, thereby saving power.&nbsp; Personally, I favour the latter approach.&nbsp; I can always see how much sunshine there has been today by checking the inverter's display.&nbsp; </p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5721"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Wed, 15/08/2012 - 08:31.</div>
    <div class="content">
     <blockquote><p><a title="View user profile." href="http://openenergymonitor.org/emon/user/1165"><em>richmc</em></a><em> on Tue, 14/08/2012 - 19:14.           Is anyone using or considering an LCD for Robins design?</em></p>
</blockquote>
<p>Yes, I've got one working a 16x2 LCD based on Robins original code, not quite ready to publish it yet, although a draft is on GITHUB (minus the LCD&nbsp;stuff!)</p>
<p>Just working through some phase calculations to improve my calcs.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5725"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Wed, 15/08/2012 - 17:29.</div>
    <div class="content">
     <p>Just taken delivery of a SCT-013-000 and I can see that it would be easy for the core to mis-seat. What immediately springs to mind is a stong elastic band.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5727"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 15/08/2012 - 20:34.</div>
    <div class="content">
     <p>Yep, a stonging good idea that Noah :D</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5776"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/851" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="daveb&#039;s picture" title="daveb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/851" title="View user profile.">daveb</a> on Fri, 17/08/2012 - 07:35.</div>
    <div class="content">
     <p>Hi <a href="../../../../../../user/956" title="View user profile.">calypso_rae</a></p>
<p>Interesting design. I&nbsp;see you are using the same op-amp buffer and clamping diodes I&nbsp;used in my energy monitor design.</p>
<p><a href="http://www.rotwang.co.uk/projects/energy_monitor.html" title="http://www.rotwang.co.uk/projects/energy_monitor.html">http://www.rotwang.co.uk/projects/energy_monitor.html</a></p>
<p>The clamping diodes need to be Schottky diodes. The abs max input voltage for the ATmega328P is vcc+0.5V. The silicon diodes you've used, IN4001, will have a forward voltage of slightly above this. Also, I&nbsp;don't think that you need such high current capability, that was why I&nbsp;chose the BAT43 diode.</p>
<p>I've only just come across this post. I've been working on my own power controller for a while. It uses a radio link to the controller, as I don't have an immersion heater (yet)&nbsp;and am looking at a kettle and an oil filled radiator as my load. I'll publish the design shortly.</p>
<p>I'm still not sure about the heatsink requirements. I&nbsp;started out with a large heatsink in the prototype, but it didn't get the slightest bit warm. I&nbsp;have now put the whole circuit in a small case and use the case as the heatsink. It seems to work fine, but a kettle isn't on for long. I've added an LM35 temperature sensor so I&nbsp;can monitor the temperature. Does your heatsink get very hot?</p>
<p>I&nbsp;opted for full phase control and a standard control loop using the import / export measurement, using a similar design to this</p>
<p><a href="http://www.rotwang.co.uk/projects/triac.html" title="http://www.rotwang.co.uk/projects/triac.html">http://www.rotwang.co.uk/projects/triac.html</a></p>
<p>This allows fine control of the power applied. The zero crossing detector piggybacks on the 5V&nbsp;power supply. I'm also using the JeeNode rather than the Arduino because I&nbsp;needed the radio link. I&nbsp;get the import / export data from my energy monitor (see above)&nbsp;so I&nbsp;didn't need to provide that on the JeeNode itself.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5778"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 17/08/2012 - 09:52.</div>
    <div class="content">
     <p>Hi Daveb, thanks for the suggestion of alternative protection diodes.&nbsp; My use of the standard 1N4001 was simply as recommended by Glynn a good while ago.&nbsp; </p>
<p>My suggestion for buffering the reference voltage was posted at <a href="http://openenergymonitor.org/emon/node/673">http://openenergymonitor.org/emon/node/673</a> on 10th May.&nbsp; At that stage, I don't think your design had been published ... </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5784"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/851" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="daveb&#039;s picture" title="daveb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/851" title="View user profile.">daveb</a> on Fri, 17/08/2012 - 13:35.</div>
    <div class="content">
     <p>&nbsp;</p>
<p>Your right, I&nbsp;didn't publish my op-amp thing until June :) You commented on my circuit, but didn't mention you'd already done the same thing! You should have mentioned it at the time. Apologies.</p>
<p>Schottky diodes are really useful when you need a low forward voltage drop. Not sure what the max current capacity should be, but I'd be surprised if it needed more than a signal diode.</p>
<p>I&nbsp;don't know if anyone has had problems with damage due to overvoltage spikes damaging the ADC&nbsp;inputs. I&nbsp;live in the town where underground power cables tend not to suffer the same spikes as ones on poles. It may not be a problem, but I&nbsp;felt it was best to be safe.</p>
<p>I&nbsp;noticed that there is a company selling a two terminal device to reduce the power of your immersion heater to half.&nbsp;I&nbsp;presume that this must be a diode. Your dynamic monitoring removes the need to do this of course.</p>
<p>Any thoughts on using phase control instead of switching on for whole cycles?</p>
<p>Do you think that electricity companies are likely to reprogram smart meters to prevent people from doing what you are doing?</p>
<p>D</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5785"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Fri, 17/08/2012 - 13:44.</div>
    <div class="content">
     <p>Definatly NOT a diode, that would be illegal. It could be as simple as a 19ohm power resistor in a box with a price tag!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5786"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/851" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="daveb&#039;s picture" title="daveb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/851" title="View user profile.">daveb</a> on Fri, 17/08/2012 - 14:07.</div>
    <div class="content">
     <p>A resistor! A 3kW load looks like a 19ohm load, so two of them in series halves the current. But half the remaining power is dissipated across the resistor! Madness.</p>
<p>I found one here :</p>
<p><a href="http://www.abeltronics.co.uk/products/immersion_controllers" title="http://www.abeltronics.co.uk/products/immersion_controllers">http://www.abeltronics.co.uk/products/immersion_controllers</a></p>
<p>If a diode would be illegal, how about a triac using every other half cycle?</p>
<p>D</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5788"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 17/08/2012 - 16:14.</div>
    <div class="content">
     <p>My 1.5kW Bosch hot-air gun uses alternate half cycles for its low-power setting, so this approach was presumbly legal 20 years ago or thereabouts.&nbsp; Maybe things have been tightened up in the meantime ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5791"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/851" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="daveb&#039;s picture" title="daveb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/851" title="View user profile.">daveb</a> on Fri, 17/08/2012 - 17:04.</div>
    <div class="content">
     <p>Not for the fan I&nbsp;hope! I&nbsp;was going to try driving a fan heater with my circuit until I&nbsp;realised that the fan would probably not turn much at low power, which leaves the heater at risk of burning out, even at low power. You have to switch the power just to the element, which means taking the heater apart ... so I&nbsp;stopped there. I&nbsp;might get one of those oil filled radiators though.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5792"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Fri, 17/08/2012 - 21:47.</div>
    <div class="content">
     <p>Hmmmm, I&nbsp;got that little gem from the electricians forum in hindsight it does sound a bit daft.</p>
<p>And Daveb, reading the spec for that device it does sound like a diode i.e. &quot;useing the device halves the power, adding another will not result in quarter the power.&quot;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5795"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 17/08/2012 - 21:02.</div>
    <div class="content">
     <p>Half-power diode - is it actually illegal?&nbsp; (Chapter &amp; verse?) I know it's definitely anti-social and the power companies disapprove strongly because they don't like d.c on their transformers, and for understandable reasons.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5862"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1399" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1399.jpg" alt="Series530&#039;s picture" title="Series530&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1399" title="View user profile.">Series530</a> on Wed, 22/08/2012 - 05:50.</div>
    <div class="content">
     <p>My system, which is all up and running now (but subject to some calibration) is based upon Robin's design in that I have used his triac concept but with an Arduino. I am also using the principle of his software in that I use his energy bucket algorithm. He's been very helpful as I have gone through my design and bring up.</p>
<p>&nbsp;</p>
<p>From that point on our methodologies differ as I have added additional functionality to my system:</p>
<p>&nbsp;</p>
<p>My dump controller is about 15 metres away from the sensing point of the incoming power. I simply changed the resistor to 180 ohms (or there abouts ... I cannot recall as I cannot access the circuit given that it is mounted inside a lump of aluminium extrusion mounted on a block of heat retardant wood in my airing cupboard). It seems to work beautifully.</p>
<p>The arduino sits inside a plastic box and I have LED's which fire when the system believes itself to be in export or import mode and a third LED fires when the triac is energised. It was something of a doctor who moment adding all of those lights but I would thoroughly recommend this for anybody who is building a dump controller because the lights are immediate and not hogging time through serial printing (and there is nothing to read, just lights to watch). I can visually correlate operation between this and the LED on my house meter and see things working correctly. It also seems to provoke discussion as even my wife can understand what is happening simply by looking.</p>
<p>Finally, I have an emonGLCD hooked up using the RF12 interface. The emon acts as an energy monitor in that the energy bucket software that Robin wrote has been extended by me so as to monitor rms voltage and current&nbsp; and to calculate true and apparent power and power factor. All of this is transmitted by RF as a payload and I have written code for the emonGLCD to interpret this and to present it. The LCD display shows true power, grid voltage, grid current, temperature and the level in the energy bucket - all taken from the payload.</p>
<p>The power measurement algorithm was tweaked pretty thoroughly against an enviR optismart energy monitor on my PV. I&nbsp;managed to get a pretty linear scatter graph of emon measured vs enviR measured power but with a small offset. This was factored into my calculations. I have now moved the clamp to the incoming power feed to the meter and it is less accurate. I'm thinking that the problem is because the cable is much thicker on the incoming feed and so there is less air gap. the emon reads high now. Over the coming days I need to gather a load of data (not easy as I will be away on business today and tomorrow) but once I can build another scatter graph over a decent range I will adjust the metering algorithm in the emonTX.</p>
<p>Like the arduino, I have used the LED's on the emonGLCD (the whole thing is mounted in a plastic case) to tell me when the system is exporting rather than consuming power. My payload transmission is currently every few seconds so the data needs some interpretation but when we see the system alternating between red and green (and nothing 10W either side of zero) we know that there is spare capacity and we can turn on the washing machine or dishwasher or simply smile at the thought of the system heating our water for free!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5863"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Wed, 22/08/2012 - 07:10.</div>
    <div class="content">
     <p>You have some nice developments there, can you post up diagrams of how you've wireds the leds?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5865"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 22/08/2012 - 08:28.</div>
    <div class="content">
     <p>Ian, I'm pleased to hear that your system is up and running.&nbsp; Relaxing in a free solar bath is a great place to think of ways that things can be improved :)</p>
<p>Accuracy:&nbsp; I'm interested that you believe your measurements to be less accurate when the clamp is on the supply cable.&nbsp; That is the only place where I have ever monitored energy flow.&nbsp; Checking the output of the PV may be of interest for calibration purposes but doesn't achieve the effect of identifying surplus PV power so that it can be usefully diverted.</p>
<p>For the purpose of diverting surplus PV energy, the absolute accuracy of the measurement system simply doesn't matter.&nbsp; Adjust it either way by 50% or 100% and it makes absolutely no difference to the triac's operation.&nbsp; However, the <em>linearity</em>  of the system is crucial because any non-linearity will cause the  measurement system to drift relative to the supply meter.&nbsp; By  non-linearity, I mean any distortion of the sampled voltage or current waveforms, including any phase-shift that is not being effectively cancelled out.</p>
<p>LEDs:&nbsp; On my Mk1 version, I had a Dr Who panel of freebie LEDs which showed how much power was being diverted to the immersion.&nbsp; Although it was fun to watch different coloured lights coming on and off, their presence did not achieve anything of practical use so they've not been reinstated.&nbsp; The Arduino's on-board LED, which flashes in synchronism with the immersion heater's neon, shows exactly what's going on.&nbsp; If it's off, there is no surplus power; if it's flashing, surplus power is being diverted; if it's constantly on, surplus power is not being utilised because the water is fully up to temperature and the thermostat has opened.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5869"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1399" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1399.jpg" alt="Series530&#039;s picture" title="Series530&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1399" title="View user profile.">Series530</a> on Wed, 22/08/2012 - 12:20.</div>
    <div class="content">
     <p>&nbsp;As I think I mentioned a month or so back (when I joined the website), I am just as keen to offer my endeavours as I am to make use of the endeavours of those who have kindly shared what they have done to a wide audience. In this regard, once the dust has settled and I am happy with the performance of the units and software I will happily publish something.</p>
<p>I work in the micro chip testing business but on low power high performance applications of DC, audio, digital and RF. The kit that we make to test silicon chips is in the million dollar region and it's a little like swimming with my hands tied around my waist when I work with Arduino. The problem is that its quite difficult to establish a certifiable measurement reference. There is no truely accurate meter within the system as everything is subject to relatively poor accuracy and error. I had to think about establishing my reference using external instrumentation. I cannot use the stuff that we make as a company so I had to make do with what I have at home. For the mains I decided to use a reasonably decent Fluke meter and trust that it was measuring sensibly. I also established the voltage reference used by the arduino with the same meter. I played a few mathematical ideas around measuring the voltage through the mascot and the potential divider but to no avail. In the end I had to put in manual attenuation factors for the voltage chain and the rms voltage that the arduino thinks is in my house is now stable and pretty close to what the Fluke sees. I guess I could have sampled the incoming signal and then done a fast fourier transform on it so that I could establish the distortion from the frequency domain. I've done this before with 8 bit processors but I'm not inclined to experiment with it again. Suffice to say, I've stuck with my manual calibration constant.</p>
<p>The next step is establish the true and apparent power. I calculate the rms of voltage and current over a sampling window dictated by Robin's energy bucket algorithm. I also run Robin's energy bucket algorithm at the same time. At this point establishing a known reference is a big deal again. During the past six months I have been correlating the PV generation data from my Elster AC100 generation meter with an enviR energy monitor which reads the energy pulses from the optical port. I have a second one doing the same thing on the main electricity meter. I also have the web portal which tells me how much energy the micro inverters in the roof think they are harvesting. On the assumption that the Elster is the most accurate instrument, this has to be my reference. From here I can tell that the Enecsys portal total energy generation is reading 2.8% high over the past 6 months. The enviR's are a bit problematic in that the smartbridge which takes their data and sends it Pachube and then on to pvout.org sometimes freezes. However, when it does work, its within about 0.5% of the Elster unit. Now, the enviR also has an energy monitor display which is updated every 6 seconds or so. Thus, if the enviR is accurate it's reasonable to assume that the energy monitor is displaying accurate data as well... certainly good enough for my needs. Thus, the enviR is my reference.</p>
<p>So, over several days, with a current clamp on the PV wire, I tabulated the instantaneous power measurements from my emonTX/emonGLCD display against those of the enviR. I was careful to ensure that both were stable before tabulation. I took about 100 points with power between zero and about 3KW (the most PV I saw during the interval). From there, with a little bit of help from Excel I was able to establish a best fit line. It was actually pretty linear and the slope was pretty close to 1. There was an offset and this was applied to the calculation and the whole thing repeated. The correlation was pretty good.</p>
<p>So, with all of this done, I boxed up my units and put the current clamp on the grid side. I now see an offset in power. The rms voltage looks fine but there is a problem. I am in the process of gathering data again (when I am at home at least) and will repeat the best fit line exercise and decide the next step. I read somewhere on here that an air gap on the current clamp can introduce all kinds of errors. The PV cable is 6mm plus a sheath. The cable from the grid is substantially larger and so the air gap is smaller. I think that this could be the cause of the difference as my readings are high. Any thoughts?</p>
<p>For a pure PV dump accurate measurement of power is not necessary. For my application, where I want to see imported as well as exported power (which should be close to zero!), I have to be able to sense the power reasonably accurately. I don't care if I am off by a few watts. I also don't care if I give back a bit more power to the grid than I could. As long as I am not paying to use the immersion heater I am happy. What I want to see is my emonGLCD giving roughly the same numbers as the enviR. At the moment, it doesn't and I need to address that. I also need to add a few additional features such as turning off the LED indicators on the GLCD when the room is dark. It's like Blackpool in the autumn at the moment! I want lights when the sun is out but not when it is dark. This is all cosmetic stuff.</p>
<p>&nbsp;</p>
<p>As to LED's on the emonTX. I agree, the LED on the board is fine. However, my emonTX sits in a grey plastic box in the garage and the LED on the PCB is hidden from view. The LED's on the front are a bit gimmicky but they really help me to see what is happening !</p>
<p>My wife says that i need all the &quot;help&quot; I can get .... but that's a different matter :=)</p>
<p>&nbsp;</p>
<p>Ian</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5871"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 22/08/2012 - 13:34.</div>
    <div class="content">
     <blockquote><p>&quot;The PV cable is 6mm plus a sheath. The cable from the grid is  substantially larger and so the air gap is smaller. I think that this  could be the cause of the difference as my readings are high. Any  thoughts?&quot;</p>
</blockquote>
<p>I doubt that centering the cable within the c.t. core is likely to be a big problem, I checked for but could not discern any change when I tested the YHDC c.t.&nbsp; A much greater problem is likely to be aligning the two core halves and making sure there is no air gap <em>in the magnetic circuit of the c.t.</em></p>
<p>So it might be that your earlier readings were low due to this.</p>
<p>Alternatively, as you are now measuring the nett power, that by definition is smaller and you could be adding in digital noise picked up from the processor itself (which could account for the offset you mention). Also, as the value being measured gets below about 10 ADC counts, inaccuracies due to the process of digitization come into play, which can lead to gross errors at very small powers.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5872"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1332" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1332" title="View user profile.">JBecker</a> on Wed, 22/08/2012 - 13:46.</div>
    <div class="content">
     <p><em>From here I can tell that the Enecsys portal total energy generation is reading 2.8% high over the past 6 months.</em></p>
<p>This does not necessarily mean that the Enecsys energy generation figures are wrong by that amount. At that point of the grid into which the inverters feed their power the voltage is likely to be a bit higher (and therefore also their power reading). In a decent installation this voltage drop (or increase) should actually be lower than 3%, but up to 3% still seems reasonable.&nbsp; &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5873"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 22/08/2012 - 13:51.</div>
    <div class="content">
     <p><em>I read somewhere on here that an air gap on the current clamp can  introduce all kinds of errors. The PV cable is 6mm plus a sheath. The  cable from the grid is substantially larger and so the air gap is  smaller. I think that this could be the cause of the difference as my  readings are high. Any thoughts?</em></p>
<p>I'm sure that was referring to any gap between the two parts of the ferrite core.&nbsp; Slipping just one layer of newspaper in there does indeed create havoc with the readings.&nbsp; Once the two parts of the clamp are properly seated, the material surrounding the current-carrying cable shouldn't have much effect.&nbsp; The conductor should ideally sit centrally within the clamp; a length of paper wrapped loosly around the cable is an easy way to achieve this.</p>
<p>Because our supply meter measures &quot;real power&quot; (which is actually &quot;real energy&quot;), my energy-bucket algorithm does likewise.&nbsp; If there is any real power to spare, it gets diverted to the dump load.&nbsp; Given that your prime objective is to divert power without being charged, I'm intrigued to know what other sort of power would be of interest to you ;) </p>
<p>One final point: if you are exporting power for any reason, are you able to quantify that power by any independant means?&nbsp; I can't, which is why it's difficult to know for sure how well the system is doing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5874"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Wed, 22/08/2012 - 14:22.</div>
    <div class="content">
     <p>Robert</p>
<p>&nbsp;</p>
<p>Unfortuantely half wave rectification does seem to be legal. just bought a hot air gun from wickes and its does halfwave for low speed setting. checked what regs I could find and the only one is a harmonic spec EN 61000-3-2 which has a get out clause of does not apply to professional equipment of more than 1kW. this means that half wave and triac control of half waves are legal. As most PID controllers use a SSR for heaters this would produce some halfwave content. the commercial offerings for solar immersion controllers ( such as immersun ) CE declarations of conformance do not quote this spec. although it is a requirement being a horizontal spec to the emc spec they are using the get out clause but this means they are not allowed to sell to general public.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5875"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Wed, 22/08/2012 - 14:57.</div>
    <div class="content">
     <p><em>I read somewhere on here that an air gap on the current clamp can  introduce all kinds of errors</em></p>
<p>Robin and I conducted some experiments on CT phase performance and found some interesting results. If sinusoidal power is measured the CT phase lead increases slightly as power is reduced but this is small so unlikely to give ians problem. If you use non sinusoidal power then the CT phase lead reduces as the power is reduced. When measuring the net power via a CT clamp on the grid cable if there is any non sinusodial current from rectifiers or worst still phase control dimmers then the phase lead applied to the CT will be incorrect. the size of the effect will depend on the power factor of the underlying house loads errors of 200W have been seen ( installation with heat pumps ). using a larger CT reduces the phase lead and hence the size of this effect. STD CT's give around 0.5ms and the large ( 200A ) ones 0.15ms.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5876"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1399" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1399.jpg" alt="Series530&#039;s picture" title="Series530&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1399" title="View user profile.">Series530</a> on Wed, 22/08/2012 - 18:35.</div>
    <div class="content">
     <p>&nbsp;This is interesting data and much appreciated. I wish I was at home and in a position to make more checks and measurements. I had overlooked the point that the error is due to a discontinuity in the ferrite. I have two CT's and I may simply try connecting up the other one to see if it behaves differently. Equally, I could try the other CT on the PV feed and see how it behaves.</p>
<p>&nbsp;</p>
<p>I seem to recall that the error between the enviR and the emonTX, which was within 10W has now jumped to about 100W. I don't know if this is a linear error as load is increased. I really need to do some investigations when the PV isn't contributing. That or turn off the breaker which goes to the micro inverter power bus. I'm inclined to do the tests with the breaker connected as this is the real world. I need to spend more time playing with the system and investigating. As I say, when I correlated the same CT and analog input with using the PV generation side and the enviR it was all but bang on. Now it isn't.</p>
<p>&nbsp;</p>
<p>Another trick is to put a scope on the voltage and current inputs to the arduino and just see what is there. The voltage waveform should be easily seen but the current waveform could be pretty rubbish unless the load current is high. When I get the chance I may give both a go.</p>
<p>&nbsp;</p>
<p>On the subject of the Enecsys figures: conversations with them previously have confirmed that the measurement method is not especially accurate. For most people simply seeing a pretty picture of their panels on the web is enough. Being an engineer, I like to drill down and understand a bit more. Pages of data have shown that there is a fixed power drain for as long as the panels are awake. Being away I don't have that data to hand but it causes substantial differences between the generation meter and the web page when the irradiance is low. When the sun is strong the fixed losses appear as a smaller percentage on a daily basis. Overall though, the running error is 2.8% over the past six months or so. In addition, as pointed out, the cable has some losses as well. I'm not unhappy with the 2.8% of loss. I just like to know what the number is.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5877"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 22/08/2012 - 18:56.</div>
    <div class="content">
     <p><em>Another trick is to put a scope on the voltage and current inputs to the  arduino and just see what is there. The voltage waveform should be  easily seen but the current waveform could be pretty rubbish unless the  load current is high. When I get the chance I may give both a go.</em></p>
<p>The PhaseDisplayTool that I've posted could provide a simple display of the raw voltage and current samples that your Arduino is seeing.</p>
<p>The current that our inverter produces is quite interesting, display attached; it is far from sinusoidal.&nbsp; If you look at the voltage waveform, and try to imagine where it differs from an ideal sinusoid, I think the inverter is pushing out more current when the voltage is lower than expected, and less current when it's higher.&nbsp; Because the peak of the voltage waveform has been clipped, the inverter pushes out more current during that part of the waveform.&nbsp; </p>
<p>When I enquired about this behaviour, our PV supplier said that he would raise the matter at a technical meeting with the inverter manufacturer ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5913"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 26/08/2012 - 12:34.</div>
    <div class="content">
     <p><span style="font-family: &quot;Arial&quot;,&quot;sans-serif&quot;; font-size: 10pt">It's Alive!!!<u1:p></u1:p><o:p></o:p></span></p>
<p><span style="font-family: &quot;Arial&quot;,&quot;sans-serif&quot;; font-size: 10pt">I've just been testing robins rig using real readings from the live tail into my CU and a 2KW convection heater that conveniently can be switched down to 750W and 1250W (Argos cheapie) the solar output has been variable 0.5 KWh to 3.0KWh today and I've been switching appliances on and off all over the house to see the results. I have a PC USB scope but am being cautious about how I read the &quot;big&quot; waveforms (X100 probe referenced to earth). I've a 60W lamp across the heater as an indicator and from the scope I can see there are very few times that the system chops a cycle in half i.e. causes a half wave rectification. The zero cross looks accurate and the response of the system is quick, switch on a kettle and the lamp goes out instantly and the bucket recovers within a couple of seconds. At all times the heat sink did not get any higher than 50deg C so mounting it inside the box maybe with a miniature fan could be an option.<u1:p></u1:p><o:p></o:p></span></p>
<p><span style="font-family: &quot;Arial&quot;,&quot;sans-serif&quot;; font-size: 10pt">The AC reference and CT signal seem to be quite noisy but I think that&rsquo;s down to the floating nature of the signals, I'm not sure where to put the earth lead of the scope probe and am working on the side of caution, I had a fully floating test rig that showed very little distortion or noise on the AC reference, that said whatever the waveform looks like IT WORKS! once it's permanently wired in to the immersion I will be asking about what I need to do to fine tune the system to ensure I'm not importing etc.<u1:p></u1:p><o:p></o:p></span></p>
<p><span style="font-family: &quot;Arial&quot;,&quot;sans-serif&quot;; font-size: 10pt">Thanks Robin for the heads up re the LED, I will be putting one on the front panel as an indicator until I get round to putting an LCD in place, I have been sent a sketch and alterations needed form a guy on the &quot;Talking Solar&quot; forum and will be looking at that over the next week.<u1:p></u1:p><o:p></o:p></span></p>
<p><span style="font-family: &quot;Arial&quot;,&quot;sans-serif&quot;; font-size: 10pt">Thanks again Robin for the inspiration to get this thing working.</span></p>
<p><span style="font-family: &quot;Arial&quot;,&quot;sans-serif&quot;; font-size: 10pt"><o:p></o:p></span></p>
<p><span style="font-family: &quot;Arial&quot;,&quot;sans-serif&quot;; font-size: 10pt">Pictures to follow.</span></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5915"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 26/08/2012 - 17:07.</div>
    <div class="content">
     <p>Rather than put loads of boring images up heres 2.1KWh being generated and the power guzzling TV on with 250W background..</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5916"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 26/08/2012 - 21:46.</div>
    <div class="content">
     <p>Hi richmc, I'm delighted to hear that it's working.</p>
<p>You mentioned half-wave rectification.&nbsp; As my code only instructs the triac to go on/off  once per cycle, I'm surprised as to how that could be occurring.&nbsp; If VOLTAGECAL  were to be way off, then some false triggering may occur.&nbsp; A lengthy  comment in the sketch explains how this variable should be set so that  the trigger is armed correctly (at least 20V after the +ve going z-c  point).</p>
<p>Your scope trace shows a sequence of four cycles on and two off (which suggests that your VOTAGECAL is set up fine).&nbsp; This is a really nice demonstration of how the algorithm works.&nbsp; With a a 2kW load (40J/sec) and a 2:1 duty cycle, that suggests you have approx 1300W of surplus power available (or 27J/sec).&nbsp; Maybe there are some other things on in the house as well as the TV ;)&nbsp;&nbsp;&nbsp; As soon as the energy bucket's level is found to be above 1800J, the triac comes on.&nbsp; For each cycle that it remains on, the bucket's level will drop by around 13J, that being the amount of energy which is reclaimed from the grid to power the heater during that mains cycle (the other 27J of the 40J consumed by the heater is supplied 'live' by the PV).&nbsp; </p>
<p>After remaining on for 4 consecutive mains cycles, the energy level drops below 1800J.&nbsp; Because of the interleaved windows, the triac continues to draw power for a further half cycle, this being concurrent with the <em>first</em> half of the next measurement period.&nbsp; For the <em>second</em> half of that next measurement period, however, the triac will be off.&nbsp; Depending on the exact levels and rates of energy flow, on or off periods can occur in either single mains cycles or pairs of cycles; that's what I've seen when playing around in debug mode. &nbsp; It's very reassuring to now see the theory working in practice using a scope.</p>
<p>No need to worry about fine tuning, this system just doesn't need it.&nbsp; If the behaviour of the LED looks about right, then your system is probably working just fine.&nbsp; Because imported and exported energy are in balance while power is being diverted, and there's only one measurement system, there's very little that can go wrong.&nbsp; Diverting surplus PV is a far less demanding task than monitoring all the energy flows in a house and getting everything to balance.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5917"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 26/08/2012 - 22:05.</div>
    <div class="content">
     <p>I know theres no half wave rectification, that was a bit of a joke as some on board are confusing the action of a triac with a thyristor/diode. ( I've got a stupid sence of humor) as you can see from the trace. And as well as the TV (big plasma) my home PC and 250W of fridges etc were on. Thursday is the big switch on with the water heater, will re post then.</p>
<p>The print statment goes tomorrow! Any thing else that can go? Don't get all programmy on me, no speka da C++ yet.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5918"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Mon, 27/08/2012 - 08:11.</div>
    <div class="content">
     <p><em>Any thing else that can go? </em></p>
<p>All of the 'debug mode' code could go, including the pre-processor lines, and all of the print statements.</p>
<p>There's no C++ in my code :D</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5920"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Mon, 27/08/2012 - 10:37.</div>
    <div class="content">
     <p>Don't suppose you have time to post up a stripped down sketch? It's not that I'm lazy I just dont want to delete anything important, Arduino for dummies dosn't come out til November. <img alt="" src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/embaressed_smile.gif" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5921"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Mon, 27/08/2012 - 12:00.</div>
    <div class="content">
     <p>What would you, or others, like me to strip out?&nbsp; </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5923"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Mon, 27/08/2012 - 15:54.</div>
    <div class="content">
     <p>Mabey a version without the debuging, the print instructions and the descriptions at the top and through the sketch, after all we can refer back to the original code if need be, esentially anything not esential to the running of the system. I don't know how much on board memory the Uno has but if others are looking at adding an LCD display or other gismos then the more space the better if that sounds logical. Does that sound logical? As I said I am an absolute noobie and can make very little out of the code at the moment, so wouldn't like to mess up your great work.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5924"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Mon, 27/08/2012 - 14:37.</div>
    <div class="content">
     <p>OK, sounds like a reasonable request.&nbsp; Debug mode was really useful while I was developing the code, but if no-one is using it now then it's probably better out than in.&nbsp; I also need to reinstate the PHASECAL logic, and the order of V &amp; I measurements should be changed.</p>
<p>Any more suggestions?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5925"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Mon, 27/08/2012 - 16:16.</div>
    <div class="content">
     <p>Here is a cut-down version of the original sketch.&nbsp; </p>
<p>It passes the basic check of the led coming on and off when the CT is reversed, but I can't test it for real on account of today's Bank Holiday weather :(</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5926"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Mon, 27/08/2012 - 16:23.</div>
    <div class="content">
     <p>WOW that was quick!&nbsp;&nbsp;&nbsp;</p>
<p>Will load that up and give it a test ready for thursday when I've got the house electrics sorted.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5968"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Wed, 29/08/2012 - 12:51.</div>
    <div class="content">
     <p><img src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/teeth_smile.gif" alt="" /></p>
<p><img width="500" height="431" src="http://i1199.photobucket.com/albums/aa478/richodredd/DSCN1618.jpg" alt="" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5969"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Wed, 29/08/2012 - 12:59.</div>
    <div class="content">
     <p>Very neat and tidy.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5971"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 29/08/2012 - 13:26.</div>
    <div class="content">
     <p>richmc, any chance of a pic with the cover(s) off, then we could see how the Arduino gets its power, and where the CT is etc. etc. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5972"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Wed, 29/08/2012 - 14:18.</div>
    <div class="content">
     <p>&nbsp;</p>
<p>Hope this works, loads of trouble posting pictures. The arduino and ref have the (newly installed) spur the blue CT is on the main live in. The second CT if you can make it out is an efergy monitor on the PV live. although you can see L N &amp; E going in and out of the box, I'm only using the L for the triac and the earth to ground the heatsink in case there is a problem with the triac, I've bundled up the neutral but left it there in case I want to try putting the triac on that side (probably won't now). Had a good afternoon so the water is as hot as the immertion thermostat will allow although the lower part of the tank has not been reached. My wife put the washing machine on earlier and the system responded as expected, and as in your video. I'm intending to post up a list of parts and suppliers with costings on the talking solar forum and will do the same on here.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5974"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Wed, 29/08/2012 - 14:58.</div>
    <div class="content">
     <div><span style="font-size: 10pt">Got a bit lost with your argument.&nbsp;A SSR or triac in phase control mode is not introducing asymmetry (only harmonics) as it chops the positive and negative cycles equally (within triggering timing erors) so very little/no DC component. Burst fire does not either as long as only complete cycles are delivered. So why can't&nbsp;I<span style="color: black">mmersun sell to general public? Do they use phase control or burst firing?</span></span></div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5977"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 29/08/2012 - 18:34.</div>
    <div class="content">
     <p>Thanks for the extra pic, richmc.&nbsp; You appear to have a very well designed installation.&nbsp; I particularly like the use of the tubular heatsink on the outside of the project box.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5986"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1163" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1163.gif" alt="markcarter10&#039;s picture" title="markcarter10&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1163" title="View user profile.">markcarter10</a> on Wed, 29/08/2012 - 23:18.</div>
    <div class="content">
     <div><span style="font-size: 9pt">Well here I am, I have been watching, reading and digesting all the posts on this thread and well before that too, back to Robins MK1and watching in the background.</span></div>
<div><span style="font-size: 9pt">I have built and run some simple trials of another diverter on <a href="http://www.talkingsolar.co.uk/"><font color="#800080">www.talkingsolar.co.uk</font></a>.</span></div>
<div><span style="font-size: 9pt">I am captivated and willing to try Robins MkII to investigate and have ordered the bits to trial. If only to quell my fascination to how Robins solution works!</span></div>
<div><span style="font-size: 9pt">This solution is although simple in components, very complex in the arduino sketch!... I understand the principal of the energy bucket algorithm and can clearly see that it works.&nbsp;I freely admit that I can&rsquo;t easily understand the coding. Even though I can understand some simple&nbsp;C++ coding. I and many others will wish to see if&nbsp;it is the most efficient solution! (Among some other notable other ones) So I will build and monitor if not at the forefront but take a backstage approach and watch what others are doing. I only have time at the weekends.. the last weekend&nbsp;one was diabolical for testing .. I saw my worst day of generation since my install date in June &ndash; 3.1Kw hrs that day on a 4KW fixed roof system.</span></div>
<div><span style="font-size: 9pt">I as others on this forum and other keen solar diverters would like to see an LCD print from the sketch to give more information in real time as to what&nbsp;the circuit is achieving! Given that there is now a stripped down sketch that might be capable of the extra code, I'm looking forward to this!</span></div>
<div><span style="font-size: 9pt">We all are looking to experience&nbsp;our findings and share ours as to how closely this circuit and sketch can track and balance solar gain vs grid import and maintain as close as possible an equilibrium where the import meter does not register and that nearly all excess solar power can be utilised by a dump load such as an IH.</span></div>
<div><span style="font-size: 9pt">The long threads of reading regarding the sweat spot of our import meters has been both very lengthy but at the same time fascinating! &nbsp;And commend how much time some members of this board have given to get to this stage.</span></div>
<div><span style="font-size: 9pt">Richmc going live today with his super neat job was an inspiration to me&hellip; Thanks Richmc and thanks to Robin for all his months of dedication and hard work into this project and then sharing it with us all!</span></div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5988"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Thu, 30/08/2012 - 09:10.</div>
    <div class="content">
     <blockquote><p class="rteindent1"><span jquery1346317298578="78" style="font-size: 9pt">I as others on this forum and other keen solar diverters would like to see an LCD print from the sketch to give more information in real time </span></p>
</blockquote>
<p>Adding extra data to the GLCD sketch to display the diverted energy to heat water is not difficult - it took me a morning to write some code to do this. I just replaced the room temperature display with water tank temperature and current heater power, plus a simple bar-graph meter to show the heater control output level (0-100%).&nbsp; I added two extra fields to the emontx RF payload - water temp (measured by the emontx) and control output. Power to the heater is already there in the payload as the CT3 power.</p>
<p>However, when I tried to add the hot water power usage into the 7-day history display, it started crashing. I tracked this down to running out of the 1K memory limit. Got it working again by removing all references to the (now unused) 1-wire sensor library and the (also unused) RTC library (RTC library is useless to me as I have no emonBase to provide the time).</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5992"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 30/08/2012 - 11:00.</div>
    <div class="content">
     <p>markcarter10,</p>
<p>Good to hear that you've been following what's going on and keeping up to speed with developments.&nbsp; If you'd like to follow how my Mk2 code works, the cut-down version may appear easier - mainly because there's less of it.&nbsp; But if you really want to understand how the filters operate, or the how the energy bucket's level is affected by the operation of the triac, that kind of investigation is best done using the original code in debug mode.&nbsp; That's how I got the code to work in the first place, and I'm no superhero!&nbsp; </p>
<p>Provided that you're clear about what it is that you're trying to understand, and single-minded about how to go about the task, all can be revealed.&nbsp; It's a great feeling to really understand how something works, whether or not it's one's own design.&nbsp; Using just print statements and the pause() facility, everything that the inquisitive reader could need is available within the sketch; you just need an Aduino and a logical approach.</p>
<p>If you're not sure about some aspect, just post a question with as much detail as possible.&nbsp; Someone is bound to provide the answer, and it may well not be me :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5993"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Thu, 30/08/2012 - 13:59.</div>
    <div class="content">
     <p>&nbsp;<span class="Apple-style-span" style="border-collapse: collapse; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 15px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.292969); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); -webkit-text-size-adjust: auto; ">Got a bit lost with your argument.&nbsp;A SSR or triac in phase control mode is not introducing asymmetry (only harmonics) as it chops the positive and negative cycles equally (within triggering timing erors) so very little/no DC component. Burst fire does not either as long as only complete cycles are delivered. So why can't&nbsp;I<span style="color: black; ">mmersun sell to general public? Do they use phase control or burst firing?</span></span></p>
<p>&nbsp;</p>
<p>Immersun cannot sell to general public because their ce declaration does not include conformance to harmonic regulations which is a requirement only for sale to general public.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5995"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 30/08/2012 - 14:36.</div>
    <div class="content">
     <p>&nbsp;There is a table of the limits for the permissible harmonic currents in this publication, on page 14: <a href="http://www.reo.co.uk/files/handbook_en_61000-3-2.pdf" title="http://www.reo.co.uk/files/handbook_en_61000-3-2.pdf">http://www.reo.co.uk/files/handbook_en_61000-3-2.pdf</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5997"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Thu, 30/08/2012 - 15:53.</div>
    <div class="content">
     <div style="background: white; line-height: 16.8pt"><span style="font-size: 10pt; color: black">Pmcalli, how does this relate to conducted emissions standard EN55022? Class B is for domestic equipment and Class A for industrial (with about 15dB higher levels). My understanding is that an equipment passing class A could be used in a factory but not a home. That is a bit different from <a title="http://www.reo.co.uk/files/handbook_en_61000-3-2.pdf" href="http://www.reo.co.uk/files/handbook_en_61000-3-2.pdf"><font color="#800080">http://www.reo.co.uk/files/handbook_en_61000-3-2.pdf</font></a> talking about a different standard EN_61000-3-2 which apparently says that professional equipment needs the user to ask the electricity supplier if he can connect. </span></div>
<div style="background: white; line-height: 16.8pt">&nbsp;</div>
<div><span style="font-size: 10pt">EMMA claims compliance against <span style="color: black">EN55022 Class B so can it not be sold to general public and could not Immersun comply with it?</span></span></div>
<div>&nbsp;</div>
<div style="background: white; margin: 0cm 0cm 15pt; line-height: 18pt"><span style="font-size: 10pt; color: black">Talking of them, Cool Power website now says &ldquo;the protection provided by</span><span style="font-size: 10pt; color: #676767"><a href="http://www.coolpowerproducts.com/uk/emma-compliance.php#ukpatent#ukpatent"><span style="color: #559943">UK Patent GB2448504</span></a> </span><span style="font-size: 10pt; color: black">applies to a household with a grid-connected generator and any load management control system consisting of:</span></div>
<ol type="1">
<li style="background: white; color: black"><span style="font-size: 10pt">A power meter to monitor the generator output </span></li>
<li style="background: white; color: black"><span style="font-size: 10pt">A power meter to monitor the household demand </span></li>
<li style="background: white; color: black"><span style="font-size: 10pt">A means to divert surplus power to an energy storage device consisting of any or all of the following...an electric immersion heater, a storage heater, underfloor heating, an aga-type electric cooker, a swimming pool.... and/or to control one or more other electrical devices (including chargers) and/or other electrical sub-circuits. &ldquo;</span></li>
</ol>
<div style="background: white; margin: 0cm 0cm 15pt; line-height: 18pt"><span style="font-size: 10pt; color: black">No one else can now manufacture, sell or install any such devices in the UK without the authorisation of Cool Power Products.&rdquo;</span></div>
<div style="background: white; margin: 0cm 0cm 15pt; line-height: 18pt"><span style="font-size: 10pt; color: black">This wording is wrong for several reasons: </span></div>
<div style="background: white; margin: 0cm 0cm 15pt 36pt; text-indent: -18pt; line-height: 18pt"><span style="font-size: 10pt; color: black">1)<span style="font: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: black">It is apparently stopping DIYers making and installing one.</span></div>
<div style="background: white; margin: 0cm 0cm 15pt 36pt; text-indent: -18pt; line-height: 18pt"><span style="font-size: 10pt; color: black">2)<span style="font: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: black">It is trying to make out that pretty much any sort of controller doing this overall diversion task&nbsp;is covered by the patent when they are not. </span></div>
<div style="background: white; margin: 0cm 0cm 15pt 36pt; text-indent: -18pt; line-height: 18pt"><span style="font-size: 10pt; color: black">3)<span style="font: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt; color: black">The patent specifically refers to a thyristor controlling the load and they left this out of&nbsp;their point 3.&nbsp;</span></div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5999"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 30/08/2012 - 19:10.</div>
    <div class="content">
     <p>Phew, good job we're using triacs, not thyristers :D</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6002"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 30/08/2012 - 23:57.</div>
    <div class="content">
     <p>I'd be surprised if there was not prior art to invalidate that patent. I'm not at all well versed in patent law, but if they've only been granted their patent and published their design in July 2012, there is significant <em>published&nbsp;</em>prior art on this site alone.<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6006"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Fri, 31/08/2012 - 09:02.</div>
    <div class="content">
     <p>I love the patent title &quot;Load management controler&quot; dosn't even specify the type of load, could mean a pully system for lifting weights. And as Calyso_rae spcificaly does not measure generation theres no problem, the list of things it controls is a joke as well.</p>
<p>I would say this is about as valid as patenting a spherical object containing air or another substance to assist in the playing of games.&nbsp; Such as but not exhaustivly - football, tennis, golf, hockey, vollyball , rugby (with variation of the shape) cricket, ping pong and whatever.</p>
<p>I would really like to see the whole patent.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6007"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Fri, 31/08/2012 - 09:55.</div>
    <div class="content">
     <p>Unfortunately it goes back to when the patent was applied for which was April 2007. So only prior art before then can be claimed.</p>
<p>The whole patent is here <a href="http://www.ipo.gov.uk/p-find-publication-getPDF.pdf?PatentNo=GB2448504&amp;DocType=A&amp;JournalNumber=6231" title="http://www.ipo.gov.uk/p-find-publication-getPDF.pdf?PatentNo=GB2448504&amp;DocType=A&amp;JournalNumber=6231">http://www.ipo.gov.uk/p-find-publication-getPDF.pdf?PatentNo=GB2448504&amp;D...</a> Look at Claim 1 on page 10. Claims 2-12 are just added features on top of the basic controller in Claim 1. </p>
<p>On the EMC front how does burst firing relate to EMC specs? All thyristors/triacs (being slightly non linear) produce significant harmonics above the 150kHz lower limit of EN55022 etc. even if fired in complete cycles, so I doubt an unfiltered triac would pass EN55022 Class B. In addition the burst firing presumably results in huge sub harmonics of 50Hz but these comply with EN55022.  Are there any other specs that apply?</p>
<p>I also wonder how the PV inverter copes as there is maybe a 1-2 volt (I am guessing) fluctuation in the mains RMS voltage seen by the inverter between cycles where the immersion is being fed by triac and when it is not. Depends heavily on the impedance of one's mains supply. Mine seems particularly high as house lights flicker due to the burst firing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6008"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 31/08/2012 - 10:08.</div>
    <div class="content">
     <p>According to their website, Cool Products' patent application for their 'Load Management Controller' was filed on 17th April 2007.&nbsp; </p>
<p>Anyway, since posting my Mk2 scheme, I have been trying various ways to see if the configuration can be improved.&nbsp; I now have two rigs side-by-side in the garage, and can switch between them by simply plugging the trigger's control wire into pin 9 of one Arduino or the other. &nbsp;</p>
<p>Rig A is still on breadboard and essentially as posted.&nbsp; For the voltage sensor, it uses an AC/AC 'telecom' adapter which is similar to a Mascot but with worse performance.&nbsp; I had two of these lying around; Robert Wall has kindly tested one of them and found its performance to be pretty grim.&nbsp; Nevertheless, the second one continues to work reliably and heat our water.&nbsp; For the current sensor, Rig A uses the standard YHDC CT 30A model with a 150R burden.&nbsp; This provides a good level of signal for the Arduino but with a considerable amount of phase shift at 13A.&nbsp; This rig is running my recently posted cut-down code with PHASECAL = 1, hence no phase-correction.&nbsp; The Arduino is using its standard 5V reference with the buffered Vref rail set to 2.5V.</p>
<p>Rig B has several enhancements.&nbsp; Its voltage sensor is a 'direct' version of the mains voltage using just resistors and op amps, hence no phase-shift.&nbsp; This rig has no earth, the 'common' is mains Neutral (shhh!)&nbsp; Its current sensor is a Magnelab CT which is undoubtedly a better component than the standard blue one.&nbsp; To keep the output voltage low, I've used a small value of burden and provided an op-amp stage to boost the CT's output signal.&nbsp; PHASECAL has been set to the optimal value for this particular setup as determined by measurements of a resistive load.&nbsp; On this rig, the Arduino is using its internal 1.1V ref mode, by setting analogReference to INTERNAL.&nbsp; My buffered reference is therefore 0.55V which is derived from the Arduino's 3.3V rail.</p>
<p>So, quite a few differences, but how do these two rigs compare?&nbsp; In a word, their performance is very similar.&nbsp; The most noticeable difference is that when minimal surplus power is available, Rig B does flash a bit more quickly than Rig A so it is somehow managing to find more power to divert.</p>
<p>When either rig is diverting power, the LED in our supply meter is constantly 'on'.&nbsp; This appears to show that the meter has entered its anti-creep mode.&nbsp; However, there must be some difference between my two rigs because their flash rates are not identical.&nbsp; The 'safety margin' variable can be used to good effect here.&nbsp; When <em>safetyMargin_inWatts</em> is set to -10W, Rig B no longer sits in anti-creep mode.&nbsp; The supply meter's LED slowly turns on and off, each 'off' event carrying the standard 0.001kWh charge.&nbsp; Having synthesized 10W out of thin air, I am being charged for around 15W.&nbsp; But if I leave this variable at 0W, then the LED remains on constantly.&nbsp; This suggests that, by keeping the meter in its anti-creep mode, Rig B is gaining a few Watts of free power.</p>
<p>The behaviour of Rig A is slightly different.&nbsp; With <em>safetyMargin_inWatts</em> set to -20W, the LED stays on constantly.&nbsp; But at -25W, it cycles slowly off and on.&nbsp; Rig A therefore appears to have an unexplained bias towards importing power which can be offset by setting safetyMargin to -20W.&nbsp; With this offset in place, the flash rates of Rig A and rig B look identical.</p>
<p>So, to get the most out of any given rig, my suggestion is to synthesize as many Watts as you can get away with (by setting <em>safetyMargin_inWatts</em> to a negative value) but make sure that the supply meter's LED remains 'on' while power is being diverted.&nbsp; If the LED ever goes off while the system is actively diverting power, then you have been charged and should reduce the value of this offset. &nbsp; </p>
<p>It may be useful to record the value of offset which works best at different rates of power distribution.&nbsp; While the triac is on for less than 10% of the time, the system may work best with a -20W offset as I have found for Rig A.&nbsp; But with a higher on:off ratio - when the PV is more active - the optimal value may be different.&nbsp; The exact behaviour could well be different for each rig.&nbsp; Once the profile of a particular rig has been investigated, the offset could be dynamically allocated for optimal performance as conditions change.&nbsp; Any 'LED off' events while power is being distributed could be noted and cause the amount of offset to be backed off a bit ...</p>
<p>However, back to reality.&nbsp; The bottom line is that any Mk 2 rig which is basically working is probably fine just as it is :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6009"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Fri, 31/08/2012 - 12:37.</div>
    <div class="content">
     <p>All I know is it works bloody well! and I can live with 15W! I'm now playing with the mecanical aspects of the immersion system to minimise how much gas is used for &quot;top up&quot;. Thoughts are Mk2 will gather as much energy that is possible through the day, so gas top up can be done in the evening if required. I've set the immersion thermostat to max i.e. 70deg C (not ideal I know) the gas stat I will set to just click out with what I have with generated to cause the immersion stat to cut power. So in the evening if MK2 has done the best it can there will be no gas use, if it's been a poor day a bit of gas will be used to top up. In the morning I hope there will be enough hot water to provide showers for my wife and me and any other small use of water we have. We use the dish washer, tumble dryer and washing machine in the afternoon, the appliences are cold fill so use solar to heat the water. whatever has happened to the immersion.</p>
<p>Am I making sense?</p>
<p>As to Calypso_rae's final comment &quot;If it ain't broke, don't fix it!&quot;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6010"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 31/08/2012 - 13:32.</div>
    <div class="content">
     <p>Earlier today, I posted: <em>&quot;The behaviour of Rig A is slightly different.&nbsp; With <em>safetyMargin_inWatts</em> set to -20W, the LED stays on constantly.&quot; </em></p>
<p>However, with the laptap monitoring its behaviour this morning, I can reveal that the LED has had a few (chargeable) 'off' moments.&nbsp; But with a import bias of just 15W, it was fine.&nbsp; So, I'd better change that to:&nbsp; <em>With <strong><em>safetyMargin_watts</em></strong></em> set to -15, the LED on Rig A appears to remain reliably 'on'.<em><br />
</em></p>
<p><em>Richmc:&nbsp; &quot;If it ain't broke, don't fix it!&quot;</em> &nbsp;&nbsp; Sure, but if the initial design can be improved, then why not?&nbsp; That's why my kit remains in a flexible form so as to take advantage of any refinements that come along.&nbsp; In practice, the performance of my rigs is so similar that I'm happy whichever one is doing the business.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6012"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 31/08/2012 - 14:06.</div>
    <div class="content">
     <p>Looking at the full text of that patent, thanks fewyatt, their 'invention' is clearly one in which current is measured at two places and the difference is computed for th purpose of diverting power.&nbsp; For what it's worth, that's the way that the eMon project appears to be presented (but as no diversion of power is taking place, only monitoring, that's OK)</p>
<p>From the outset, my Mk2 PV Controller only measures at one place, namely at the supply point (where they don't actually measure<img src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/devil_smile.gif" alt="" />).&nbsp;&nbsp; For this application, I have never seen any point in measuring anywhere else.&nbsp; Whether 10% or 90% of the PV is being used within the house at any time is of no importance; the only flow that's worth measuring is the one to and from the grid.</p>
<p>Claim 1, which underpins all of the others, involves three specific aspects, two of which I am not doing.&nbsp; As for the third point, well my triac is called Tommy<img src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/shades_smile.gif" alt="" />, not Emma.<img src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/kiss.gif" alt="" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6013"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Fri, 31/08/2012 - 14:34.</div>
    <div class="content">
     <p>Thats &quot;TIMMY&quot; (Southpark), and yes improvement is always good.<img alt="" src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/wink_smile.gif" /></p>
<p>another good day with the immersion having done its thing by 13.00 I'm almost skipping around the house trying to find somthing else for the excess to do.</p>
<p>As an aside if anyone did tread on their toes enough to threaten legal action they are probably so small an outfit to not be able to afford a suit, they aren't exactly Apple v Samsung.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6014"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Fri, 31/08/2012 - 18:46.</div>
    <div class="content">
     <p>&nbsp;Calypso the difference in offsets between your two rigs is explained by the phase leads of the different cts. A simple simulation will give you the difference which I have confirmed by measurement. The smaller ct has a lead of 4.5ms and the larger one 0.15ms. As a rough rule of thumb the power is misreported by 10W per 0.1 ms so you should see about 30W difference. The difference will vary from day to day because it also depends on the power factor of your house load. The numbers given are for resistive loads if you have any bad power factors then it will get much worse I have seen 200W errors.</p>
<p>&nbsp;</p>
<p>In answer to have cool power &nbsp;started legal action the answer is yes a fellow poster on electricians forum has recieved initial contact which is always to inform of the existance of their patent.</p>
<p>&nbsp;</p>
<p>Fewyatt</p>
<p>The harmonic spec is what is called a horizontal addition to the emc spec and it does not say you have to get permission to connect to the grid that is reo interpretation if you do not fit any of the classes and use the professional clause and they use the word may. Burst fire and half cycle may fail emc at 150kHz but this can be corrected with an active or passive filter very easily. Phase control needs an exotic filter to pass. The harmonic spec is very difficult to achieve without risking misfiring of triac or scr so all commercial implementation I know of use the prof install get out clause in their ce declarations.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6015"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 31/08/2012 - 20:03.</div>
    <div class="content">
     <blockquote><p>&quot;In answer to have cool power  started legal action the answer is yes a fellow poster on electricians forum has recieved initial contact which is always to inform of the existance of their patent.&quot;</p>
</blockquote>
<p>Having now had time to read through (some) of the patent, I think it's highly questionable that there is anything in it that is &quot;an inventive step that is not obvious to someone with knowledge and experience in the subject&quot;. I've been in electronics and controls since 1967, and it's pretty obvious to me that the &quot;invention&quot; is nothing more than the straightforward application of an automatic control system. The firm where I was a student apprentice made maximum demand controllers - they didn't use a microprocessor back then of course, it was all analogue amps and integrators - that switched off selected loads in order to remain under a target, and the basic idea behind this &quot;invention&quot; is very similar to that, namely controlling a load in response to energy consumption - similar I would suggest to the extent that the development of one from the other is &quot;obvious to someone with knowledge and experience in the subject&quot;.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6016"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Fri, 31/08/2012 - 22:02.</div>
    <div class="content">
     <p>pmcalli, what cause the misfiring? Is it the filter? People here don't report misiring and I don't get it although I use an SSR with filter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6017"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Sat, 01/09/2012 - 09:20.</div>
    <div class="content">
     <p>&nbsp;<span class="Apple-style-span" style="border-collapse: collapse; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: 15px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.292969); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); -webkit-text-size-adjust: auto; ">pmcalli, what cause the misfiring? Is it the filter? People here don't report misiring and I don't get it although I use an SSR with filter.</span></p>
<p>Burst control and half wave are fine with a standard power line filter I notice that crydom now produce an active filter block to absorptively kill the residual 150kHz problem area. Phase control produces very large amounts of harmonic energy and it's tempting to try to slow the edge from the firing down by a large inductor but this can lead to a phase delay of the zero cross of the current and the end effect is the triac turns on from exceeding its dv/dt. This is one of the reasons for using back to back scrs instead of triacs as well as their higher power handling they have a higher dv/dt. Design of phase control filters is therefore a bit of a black art. I have a number of standard &nbsp;two stage filters that I will be testing feeding them from a LISN and measuring conducted emissions in a Spectrum analyser in the hope that a bespoke filter is not needed. Will post the results when the tests are completed.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6018"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 01/09/2012 - 10:55.</div>
    <div class="content">
     <p>Fewyatt,</p>
<p>You need a dip compensator to deal with &quot;the impedance of one's mains supply. Mine seems particularly high as house lights flicker due to the burst firing.&quot;</p>
<p>It's a long time since I had anything to do with one of these, if I remember correctly it was a capacitor bank in series with a saturating reactor, the idea being that as the voltage changed, the reactor came in and out of saturation. As the voltage dipped, it diverted current into the capacitor bank. The capacitor bank set up a series resonance with the inductance of the supply to therefore raise the voltage and compensate for the dip.</p>
<p>(Incidentally, it was a combined harmonic filter and dip compensator).</p>
<p>It's easy enough to get an approximate value for your mains impedance, but I've no idea how you would determine the values of the reactive and resistive parts, hence the amount of capacitance you would need. The only suggestion I could make is to try adding some capacitance and measure the effect. (You'd need to very carefully consider where to put the capacitors, how to rate and protect them and the side effects of switching a large capacitor (inrush).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6019"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sat, 01/09/2012 - 11:39.</div>
    <div class="content">
     <p><a href="http://i1199.photobucket.com/albums/aa478/richodredd/Image2-1.jpg">http://i1199.photobucket.com/albums/aa478/richodredd/Image2-1.jpg</a></p>
<p>above&nbsp;are the pcbs for the project.</p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt"><font size="3" face="Calibri">Parts list &amp; pricing</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Part<span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Price<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </span>Source<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Note</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><o:p><font size="3" face="Calibri">&nbsp;</font></o:p></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><font face="Calibri">Triac BTA41-600B<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;3.74<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Opto couple MOC3041-M<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.64<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Op amp LM358AN<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.22<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Diode 1N4001<span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.38<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Pack 10</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">8pin ic socket<span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.39<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Arduino Uno<span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;22.79<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics<span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>----<span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>From &pound;11.50 eBay?</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">CT SCT-013-030<span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;8.80<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eBay</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font face="Calibri"><span style="line-height: 115%; color: #2d2d2d; font-size: 10pt">PCB Transformer 3VA 9V+9V<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;3.02<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><font size="3">Spiratronics<span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>----<span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>It works!</font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Terminal block 2 way x5<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;1.25<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">3.5mm stereo pcb jack<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.20<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Resistor 150R .25w metal film<span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.39<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics<span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>----<span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Burden resistor not </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Resistor 180R .25w metal film<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.39<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>needed if CT has </font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Resistor 330R .25w metal film<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.39<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>one built in.</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><font face="Calibri">Resistor 360R .25w metal film<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.39<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Resistor 12K .25w metal film<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.39<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Resistors come in</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Resistor 15K .25w metal film<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.39<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>packs of 10</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Resistor 150K .25w metal film<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;0.39<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Spiratronics</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><o:p><font size="3" face="Calibri">&nbsp;</font></o:p></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">PSU for Arduino 12V .5A<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;9.99<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; </span>Maplin</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Case </font><span style="line-height: 115%; font-family: &quot;Trebuchet MS&quot;,&quot;sans-serif&quot;; color: #333333; font-size: 9.5pt; mso-bidi-font-family: Arial">194.5x145x78mm</span><font size="3"><font face="Calibri"><span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;6.25<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eBay&nbsp;<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>The Allendale stores</font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Heatsink<span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;13.98<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eBay<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Discount Devices Shop</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Cable glands PG11 x4<span style="mso-tab-count: 3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;7.56<span style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Maplin</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><font face="Calibri"><span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>---------------</font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><font face="Calibri"><span style="mso-tab-count: 5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&pound;81.94</font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><font face="Calibri"><span style="mso-tab-count: 4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>=========</font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt">&nbsp;</p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3"><font face="Calibri">EDIT -&nbsp;&nbsp;Forgot to add, sketch and hard work by clypso_rae....................PRICELESS!</font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt">&nbsp;</p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Wire, 13A plug, 30A terminal block, self tapping screws etc.</font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><o:p><font size="3" face="Calibri">&nbsp;</font></o:p></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt"><font size="3" face="Calibri">Most of the Spiratronics stuff comes in multi packs but is still cheaper than Maplin etc and leaves you with more bits to experiment with!</font></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6020"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Sat, 01/09/2012 - 11:41.</div>
    <div class="content">
     <p>&nbsp;<span class="Apple-style-span" style="border-collapse: collapse; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: 15px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.292969); -webkit-composition-fill-color: rgba(175, 192, 227, 0.230469); -webkit-composition-frame-color: rgba(77, 128, 180, 0.230469); -webkit-text-size-adjust: auto; ">You need a dip compensator to deal with &quot;the impedance of one's mains supply. Mine seems particularly high as house lights flicker due to the burst firing.</span></p>
<p>&nbsp;</p>
<p>Something seriously wrong with your wiring. Burst fire applied to lights makes them flicker because there is intermod products at low frequencies. Applying burst firing to the immersion should not afect your lights unless it gives a large voltage drop. I would have a look at all the connections along your meter tails. I had a similar effect on a friends house a few years ago and we traced it to the 100 amp isolator before the meter that the builder had fitted. DNO removed it saying they had lots of cases of fires due to loose connections in them.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6021"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sat, 01/09/2012 - 11:49.</div>
    <div class="content">
     <p>Just to add to pmcalli's comments. Having run the system for a few days now I've not measured any drop or experenced any &quot;side effects&quot; of it operating i.e. lights flickering, my house is 12 years old and fed by a sub station that feeds around 200 homes, so I think you may well have a problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6022"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Sat, 01/09/2012 - 12:28.</div>
    <div class="content">
     <p>Well I gave it my best shot, assembled all the bits as per rae`s diagram, uploaded the reduced code and --- nothing happens.</p>
<p>Of course the fault could be anywhere- dodgy component, iffy breadboard etc. Unfortunately, to reverse an oft stated paradigm, if it don`t work I can`t fix it.</p>
<p>Anyone out there willing to put together a rig for me? Of course I`ll pay (but don`t tell Emma)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6023"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sat, 01/09/2012 - 13:41.</div>
    <div class="content">
     <p>Before you give up on it Noah, try turning the CT over if its wrong way round nothing will happen.</p>
<p>PM sent.</p>
<p>And load up calypso_raes original sketch then you can see what the energy bucket is doing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6028"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Sun, 02/09/2012 - 16:53.</div>
    <div class="content">
     <p><!--[if gte mso 9]><xml>
<w:WordDocument>
<w:View>Normal</w:View>
<w:Zoom>0</w:Zoom>
<w:PunctuationKerning />
<w:ValidateAgainstSchemas />
<w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
<w:IgnoreMixedContent>false</w:IgnoreMixedContent>
<w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
<w:Compatibility>
<w:BreakWrappedTables />
<w:SnapToGridInCell />
<w:WrapTextWithPunct />
<w:UseAsianBreakRules />
<w:DontGrowAutofit />
</w:Compatibility>
<w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
</w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
<w:WordDocument>
<w:View>Normal</w:View>
<w:Zoom>0</w:Zoom>
<w:PunctuationKerning />
<w:ValidateAgainstSchemas />
<w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
<w:IgnoreMixedContent>false</w:IgnoreMixedContent>
<w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
<w:Compatibility>
<w:BreakWrappedTables />
<w:SnapToGridInCell />
<w:WrapTextWithPunct />
<w:UseAsianBreakRules />
<w:DontGrowAutofit />
</w:Compatibility>
<w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
</w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
<w:LatentStyles DefLockedState="false" LatentStyleCount="156">
</w:LatentStyles>
</xml><![endif]--><!--[if gte mso 9]><xml>
<w:LatentStyles DefLockedState="false" LatentStyleCount="156">
</w:LatentStyles>
</xml><![endif]--><!--[if gte mso 10]>
<style>
/* Style Definitions */
table.MsoNormalTable
{mso-style-name:"Table Normal";
mso-tstyle-rowband-size:0;
mso-tstyle-colband-size:0;
mso-style-noshow:yes;
mso-style-parent:"";
mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
mso-para-margin:0cm;
mso-para-margin-bottom:.0001pt;
mso-pagination:widow-orphan;
font-size:10.0pt;
font-family:"Times New Roman";
mso-ansi-language:#0400;
mso-fareast-language:#0400;
mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 10]>
<style>
/* Style Definitions */
table.MsoNormalTable
{mso-style-name:"Table Normal";
mso-tstyle-rowband-size:0;
mso-tstyle-colband-size:0;
mso-style-noshow:yes;
mso-style-parent:"";
mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
mso-para-margin:0cm;
mso-para-margin-bottom:.0001pt;
mso-pagination:widow-orphan;
font-size:10.0pt;
font-family:"Times New Roman";
mso-ansi-language:#0400;
mso-fareast-language:#0400;
mso-bidi-language:#0400;}
</style>
<![endif]--></p>
<p class="MsoNormal"><span lang="EN-GB" style="font-size:10.0pt;font-family:Arial;<br />
mso-ansi-language:EN-GB">Flickering:</span></p>
<p class="MsoNormal"><span lang="EN-GB" style="font-size: 10pt; font-family: Arial;">My house wring is pretty recent so I&rsquo;d be surprise if it&rsquo;s the wiring but I do have a </span>100 amp isolator as mentioned above.&nbsp;<span lang="EN-GB" style="font-size: 10pt; font-family: Arial;"> The flickering is only slight and only on incandescent bulbs. <span style="mso-spacerun:yes">&nbsp;</span>Many people would not notice it.</span></p>
<p class="MsoNormal"><span lang="EN-GB" style="font-size:10.0pt;font-family:Arial;<br />
mso-ansi-language:EN-GB">&nbsp;</span><span lang="EN-GB" style="font-size:10.0pt;font-family:Arial;<br />
mso-ansi-language:EN-GB">It was reported on another forum that someone had problems like this with his own house and the neighbour&rsquo;s too reacted to the on/off action of the controller. That was a slow switching controller, not a true burst fired one. High impedance connections in a house would surely not affect one&rsquo;s neighbour?</span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6029"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Sun, 02/09/2012 - 20:24.</div>
    <div class="content">
     <p>&nbsp;Flickering</p>
<p>It is possible to afect a neighbour. The incoming feed on modern estates is often daisy chained. If the loose connection is on the point where it chains to the next house then they will be affected too. It would be a good idea to check the voltage drop across the isolator if you can do so safely. Otherwise see how hot it gets when you have a high house load. My friends isolator melted the plastic surround. Your house wiring is not likely to be the problem. The tails from the 100amp fuse to the meter, the tails to Henley block and isolator and the tails from the isolator to the consumer unit are the most likely areas for loose connections giving this sort of effect.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6030"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 02/09/2012 - 20:32.</div>
    <div class="content">
     <p>Fewyatt,</p>
<p>Dip may or may not affect your immediate neighbour - it depends on which phase you are on and which they are on. Presumably, neighbours on the same phase will see flicker if it's not your wiring, but if the neutral impedance is significant, everyone could suffer, (though those on the same phase will see the voltage go down as you do, those on the other two phases may see it go up). I've never worked for an electricity company, however I believe houses down one side of a street are wired R Y B B Y R (etc), and it used to be the practice to indicate the phase with coloured discs by the supply authority fuse and neutral link (red &amp; black, white/yellow &amp; black, blue &amp; black), though I don't know whether this is still done.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6031"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 02/09/2012 - 20:36.</div>
    <div class="content">
     <p><em>Of course the fault could be anywhere</em></p>
<p>noah, I'm pleased to hear that you've got everything assembled.&nbsp; That's the time consuming part.&nbsp; To get it working shouldn't take long and there's plenty of help available here.&nbsp; Any chance of a photo of your rig?</p>
<p>The cut-down code should be fine.&nbsp; Print statements can easily be added to help understand what's going on.&nbsp; Having found that &quot;it doesn't work&quot;, you now need to break down the project into manageable chunks and check each part in turn.&nbsp; </p>
<p>For starters, does your energy bucket work?&nbsp; To find out, just clip your CT on to a test lead that has some current flowing, and the bucket's level should change.&nbsp; To see this happening, you'll need to include a print statement every so often.&nbsp; With the clip one way round, the bucket's level should increase; then it should decrease if the CT is reversed.&nbsp; With no current flowing the bucket's level should stay where it is.&nbsp; Once the bucket gets to the 1800J mark, the triac should turn on, as should the on-board LED.&nbsp; </p>
<p>Before doing that, it would be helpful to to check that your current and voltage samples look right.&nbsp; They need to be centred around the 512 mark, i.e. central within the ADC's range.&nbsp; Various tools have been posted for this.</p>
<p>If all else fails, feel free to send me a PM ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6034"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Mon, 03/09/2012 - 16:08.</div>
    <div class="content">
     <p>As a post script, the system has been perfoming 100%, I now have the gas side of things set to come on between 8.00 and 9.00 PM and so far it hasn't been called, I've set the immertion stat to max and the gas boiler stat to a little below the point where the immertion has cut out with a full tank of hot. By the morning the water in the tank has cooled slightly (can't accurately quantify it) and serves for two indulgent showers and whatever is needed before the sun works its magic.</p>
<p>What I would like to do now is ensure that export and import&nbsp;are at&nbsp;their minimum I have a bog standard Landis + Gyr (5258K) meter, anyone know how to make sence of what the lights are doing? I know calypso_rae had a look into this, just wondered if there was a useful outcome.</p>
<p>Over the next few days I will go from the full (debug disabled) sketch to the leaner sketch that calypso_rae was kind enough to give us. and will feed back any differences, I have no idea what the phase cal is about or if I will have to change anything tune it to my system.</p>
<p>My electrician wants one of these, but of course I've told him I can't make one for him because of patent issues.<img alt="" src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/embaressed_smile.gif" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6036"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Mon, 03/09/2012 - 19:03.</div>
    <div class="content">
     <p>&nbsp;Re&nbsp;As a post script</p>
<p>I have had a system running for over a year now and collected data on cooling rates etc. typical dipped tank needs 2kWHr to overcome the heat loss per 24hrs. It is well worth insulating all the pipies going to and from the tank. I have also found the loss rate can be halved by adding an additional jacket over the top of the existing foam insulation this makes a big difference in the winter. I don't run the gas at all from April to October as its cheaper to boost the immersion than run the gas on the odd occasions it's needed all depends on your usage of course.</p>
<p>I wouldnt worry about the patent firstly it would only apply to you selling commercially and secondly the current legal advice is it doesn't cover a single ct measuring residual energy flow to and from grid.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6040"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Tue, 04/09/2012 - 09:10.</div>
    <div class="content">
     <p>Richmc, any difference between running the original sketch (in normal mode) and the cut-down one should be minimal.&nbsp; Although the later sketch includes a phase-shift correction capability, the <em>value</em> of PHASECAL is set to 1.0 which has no effect.&nbsp; </p>
<p>In the cut-down sketch, current is sampled before voltage.&nbsp; This is likely to improve the alignment between your two waveforms. &nbsp; The alignment can be further refined by adjusting the value of PHASECAL to match your particular setup.&nbsp; Over the last few weeks, I've suggested various ways of doing this.&nbsp; If anyone feels they needs more guidance about this aspect, please ask. &nbsp;&nbsp;</p>
<p>There's a lot of material about phase-shift and PHASECAL at <a href="http://openenergymonitor.org/emon/node/870">http://openenergymonitor.org/emon/node/870</a>.&nbsp; </p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6075"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Wed, 05/09/2012 - 22:37.</div>
    <div class="content">
     <p>rae. I was convinced my ct was not working as it was showing open circuit on a meter. however i looked at it again tonight and it was showing a resistance of around 100 ohms. dont know if this is in any way correct but i decided it was worth trying again</p>
<p>here is a readout with ct on a load of 3 amps or so. there was no load present on the triac.</p>
<p>In NORMAL mode ...</p>
<p>cyc# 5, sampleV 408, fltdV 17.45, sampleV-dc -126, cumVdeltas -3879.83, prevDCoffset 573.51, refFltdV 534.71, enInBkt 0.00<br />
cyc# 505, sampleV 521, fltdV 21.38, sampleV-dc 10, cumVdeltas -34.24, prevDCoffset 511.24, refFltdV 510.89, enInBkt 0.43<br />
cyc# 1005, sampleV 517, fltdV 17.76, sampleV-dc 6, cumVdeltas -54.30, prevDCoffset 510.71, refFltdV 510.16, enInBkt 0.89<br />
cyc# 1505, sampleV 521, fltdV 20.91, sampleV-dc 9, cumVdeltas 30.92, prevDCoffset 511.27, refFltdV 511.58, enInBkt 1.68<br />
cyc# 2005, sampleV 503, fltdV 3.27, sampleV-dc -8, cumVdeltas 17.73, prevDCoffset 511.12, refFltdV 511.30, enInBkt 2.31<br />
cyc# 2505, sampleV 526, fltdV 26.19, sampleV-dc 15, cumVdeltas -24.76, prevDCoffset 511.16, refFltdV 510.92, enInBkt 2.40<br />
cyc# 3005, sampleV 508, fltdV 8.23, sampleV-dc -3, cumVdeltas 21.55, prevDCoffset 511.22, refFltdV 511.44, enInBkt 3.33<br />
cyc# 3505, sampleV 501, fltdV 1.04, sampleV-dc -10, cumVdeltas -19.66, prevDCoffset 511.47, refFltdV 511.27, enInBkt 4.37<br />
cyc# 4005, sampleV 524, fltdV 24.13, sampleV-dc 13, cumVdeltas -17.32, prevDCoffset 511.02, refFltdV 510.85, enInBkt 3.40<br />
&nbsp;</p>
<p>made no difference which way round the ct was facing (changed in middle of that lot)</p>
<p>hope this means something to you!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6076"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Thu, 06/09/2012 - 12:15.</div>
    <div class="content">
     <p>This may sound daft but everything looks OK except the bucket, a&nbsp;few questions.</p>
<p>What are you using as the AC reference transformer?</p>
<p>Is the &quot;pin 13&quot; led on the Arduino flashing at any time?</p>
<p>What are you using as the outpul load?</p>
<p>What are you using as input load (for current reading)?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6078"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 06/09/2012 - 08:46.</div>
    <div class="content">
     <p>noah, 100 ohms for a CT sounds fine if the internal burden has been disconnected.&nbsp; I would expect a lower value if an internal burden is in place.&nbsp; Your display provides quite a lot of information ...</p>
<p>First, it shows that your low-pass filter (LPF) is working perfectly.&nbsp; That's the refFldV column which should be around 511; your value looks spot on.&nbsp; This is used for removing the dc-offset from your voltage and current samples.&nbsp; When I was developing the code, it was helpful to see other values too, each new value of refFltdV being prevDCOffset + (0.01 * cumVdeltas).&nbsp; If you check your values, you can see that this is the case.&nbsp; The LPF is not part of the standard OEM code, which is why I left the diagnostic printout in place.&nbsp; Now that your LPF is clearly working, you can remove this block of printout and replace it with something more useful.</p>
<p>The final value in the display line is for the energy bucket, which is clearly not doing much.&nbsp; The bucket is simply an accumulator for packets of (virtual) energy, each one being generated by multiplying a pair of voltage and current samples together.&nbsp; Your voltage samples should be centred around 511 and have a amplitude of a few hundred ADC steps.&nbsp; From the display that you've provided, it's not possible to check the amplitude of your voltage signal, this being because the same part of the voltage waveform is being displayed every time.&nbsp; But provided that your display lines are appearing every 10 seconds, it seems likely that the voltage side of things is fine.</p>
<p>Now for the current.&nbsp; The first thing I would suggest is to run one of the diagnostic tools which displays raw voltage and current samples.&nbsp; Voltage values should always stay much the same, but the current values should be dependent of whatever load you are measuring at the time.&nbsp; Near the top of the thread <a href="http://openenergymonitor.org/emon/node/789">here</a>, there are two simple sketches which do this.&nbsp; My minAndMaxValues sketch, posted on 1/7/12, allows you to measure the maximum amplitude of your voltage and current waveforms as sampled by the Arduino's ADC.&nbsp; Voltage and current samples can also be displayed in the form of a graph using my rawSamplesTool <a href="http://openenergymonitor.org/emon/node/824">here</a>.&nbsp; You can then compare your displays with the results that I've posted alongside the tool.</p>
<p>Because your energy bucket's level is floating around (not jammed at either end of its range) it suggests to me that no current samples are getting through.&nbsp; Running any of the above tools will confirm this.&nbsp;&nbsp; Once you have a steam of current samples in place, the energy bucket should rapidly wind its way up and down its 3600J range as you monitor current flow with your CT and/or reverse its direction.&nbsp; </p>
<p>In the original Mk2 PV sketch, the second block of code below the &quot;WARNING&quot; statement (currently commented out) will display the energy bucket's level every second.&nbsp; In the cut-down 'mini' version, you need to uncomment the relevant line(s) in the same place for whatever you want to do.&nbsp; Enabling the two lines containing <em>energyInBucket_4led</em> ('mini' code only) provides an easy means of calibrating your system.&nbsp; If you're measuring 100W, you should see 100W being displayed each second.&nbsp; If the correct value does not appear, just alter POWERCAL until it does.&nbsp; Once calibrated, your system should be linear from 0W to whatever surplus power is available.&nbsp; In my case, that's 3kW - but I'm no expert on power stations!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6084"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Thu, 06/09/2012 - 16:45.</div>
    <div class="content">
     <p>I`m going to wimp out on this for now as rich (and others) have very generously volunteered to put a working model together for me.</p>
<p>Many thanks to all respondents.</p>
<p>Rae, thanks for your input above. I had a look at the minandmax sketch and immediately i needed guidance: how do you run this? load it onto arduino so it displaces PV_router? See the problem is I have so little knowledge at this point that i`ll be hassling people to explain what is obvious to them but obscure to me. Rather not waste your time if a kind person will set me right.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6086"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 06/09/2012 - 22:00.</div>
    <div class="content">
     <p><em>noah: I had a look at the minandmax sketch  and immediately i needed guidance: how do you run this? load it onto  arduino so it displaces PV_router? </em></p>
<p>Yep, spot on; both sketches use exactly the same hardware.&nbsp; Just load it up and watch the numbers appear on the screen,&nbsp; Then you can adjust anything you want before switching back to the main code.&nbsp; </p>
<p>It's rather like preparing a meal.&nbsp; If some kind person will do all the cooking for you, that's great, but you never become familiar with what goes on behind the scenes.&nbsp; Good job that my long-suffering wife enjoys her time in the kitchen :)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6087"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 06/09/2012 - 22:07.</div>
    <div class="content">
     <p>Noah,</p>
<p>Yes, you can only have one sketch at a time loaded into the chip, so you just load the minAndMaxValues sketch and play with it, then reload another, or the original. I'm doing it all the time to check various things (I've even loaded nanode emonBase sketches into an emonTx to check a particular aspect - OK, not everything works but the section I was interested in at the time did!). There <em>is</em> a limit to how many times you can do this - 10,000 - so I wouldn't worry about that too much.</p>
<p>If you want to PM me with the 'idiot' questions, feel free. If you want to learn and you're prepared to work at it, I'm prepared to help you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6094"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Fri, 07/09/2012 - 14:11.</div>
    <div class="content">
     <p>I've been running the cutdown code,&nbsp; and over the last two days have had two good tanks of hot water with no intervention from Mr.Gas. Next week I'm not working (love shift work!) so I will be able to keep a close eye on whats going on.</p>
<p>With the new sketch I <strong><u>feel</u> </strong>it's acting differently, can't quite put my finger on it but it seems to need a little more time in the morning before the LED starts to flicker, could be the safety margin, or just that the days are getting shorter. And it seems to take a litte longer before the LED in on constantly although we have had some blisteringly fine days down here in the SW 20KWh days with 3Kw peaks lasting for several hours.</p>
<p>I guess the only way to tell is to get myself an emonGL built or invest in an Eco-Eye smart PV, my meanist insticts are advising against this as I will have to pay &pound;85ish for the Eco-Eye, has anyone costed the emon?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6096"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Fri, 07/09/2012 - 15:13.</div>
    <div class="content">
     <p><em>&nbsp;</em><a title="View user profile." href="http://openenergymonitor.org/emon/user/1165"><em><font color="#3399cc">richmc</font></em></a><em> on Fri, 07/09/2012 - 14:11. I <strong><u>feel</u> </strong>it's acting differently, can't quite put my finger on it but it seems to need a little more time in the morning</em></p>
<p>Rich, I suspect its simply the time of the year and the daylight shortening.&nbsp; With my house base load around 250W, its past 9am before I'm generating surplus power.&nbsp; I'm uploading my realtime stats to my site and PVOutput, links below if your interested.&nbsp; Today is a lovely curve!</p>
<p><a href="http://www.pvoutput.org/list.jsp?userid=4206">http://www.pvoutput.org/list.jsp?userid=4206</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6100"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 07/09/2012 - 20:26.</div>
    <div class="content">
     <p><em>richmc: With the new sketch I <strong><u>feel</u> </strong>it's acting differently,</em></p>
<p>Are you using the same value of POWERCAL in both sketches?&nbsp; Although its value is not important once the system is up and running, it does affect how quickly the bucket gets to its operating point whenever surplus power becomes available.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6102"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Fri, 07/09/2012 - 21:28.</div>
    <div class="content">
     <p>Yes guys (both of you)&nbsp; I've not changed anything only switched from the original (debug disabled) to the cut down version. Don't get me wrong it works. I'm getting the feeling that the safety margin is possibly being affected by the&nbsp;swap around in sampling current and voltage. I need to measure the absolute value of import and export, I have an efergy that can help and help me adjust the safety margin.</p>
<p>And Stewart I've taken the daylight hours into account as I keep a close eye on when the PV kicks in and my background use.</p>
<p>caypso-rae I havnt changed POWERCAL so yes the same in both sketches, are you saying that it can affect the starting point of the system or the base power&nbsp;export before it kicks in?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6107"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sat, 08/09/2012 - 22:09.</div>
    <div class="content">
     <p>Rich, in each sketch, the 'safety margin' is specified near the top of the code.&nbsp; For comparison purposes, it's probably best set to 0 in all cases.&nbsp; Changing the order of current and voltage should have very little effect.&nbsp; If you think that this change is having a discernable effect, why not change the order back to what it was?&nbsp; I don't think that simply comparing my original and cut-down sketches as posted is a useful exercise.&nbsp; The Arduino doesn't see these as any different because all of the code that I've removed would be stripped out anyway by the preprocesser when compiled without the #define DEBUG line.</p>
<p>POWERCAL&nbsp;is described as well as I can in the original sketch, and I think I retained this description for the cut-down version.&nbsp; It's simply there to 'scale' the energy measurement system.&nbsp; When power is being diverted, import and export should be the same, with no net flow of current.&nbsp; If POWERCAL&nbsp;is set correctly, every cycle that the triac is 'on' will cause the energy bucket's level to drop by 60J.&nbsp; If POWERCAL is set to twice what it should be, then the effect will be 120J instead of 60J.&nbsp; But it really isn't important because both import and export will be 'stretched' by the same amount.&nbsp; </p>
<p>If two distances are found to be the same when using a ruler, it doesn't matter whether that ruler is calibrated in inches or centimeters.&nbsp; The only thing that matters is that it's linear.&nbsp; That's why I think it's important to keep the CT's output signal down to around 1V ptp.&nbsp; Otherwise, the output voltages caused by large and small currents are unlikely to be proportional.&nbsp; The solution is to either amplify the CT's output, or to configure the Arduino to use its INTERNAL (1.1V) reference.&nbsp; My preference is the latter.&nbsp; Having said which, my original Mk2 setup is still heating our water reliably with pretty much all the problems that are going.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6118"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="cryo&#039;s picture" title="cryo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by cryo (not verified) on Mon, 10/09/2012 - 11:48.</div>
    <div class="content">
     <p>&nbsp;Hi guys I&rsquo;ve had the components in the delivery bags for a while and have finally found time to solder them on the circuit boards but when I run the debug sketch I get the following print statements. I&rsquo;ve checked the circuit a few times and it appears to be O/K but I obviously have a problem so can anybody point me in the right direction as to what&rsquo;s happening when I run the code. I have another set of components and can build a second unit but would like to understand where I have gone wrong with the first build.</p>
<p class="MsoNormal">Thanks</p>
<p class="MsoNormal">Ken.</p>
<p class="MsoNormal">&nbsp;In DEBUG mode ...</p>
<p class="MsoNormal"><o:p>&nbsp;</o:p>cyc# 5, sampleV 365.06, fltdV 41.80, sampleV-dc -153, cumVdeltas -1894.64, prevDCoffset 537.34, refFltdV 518.39, enInBkt 0.00</p>
<p class="MsoNormal">cyc# 505, sampleV 503.39, fltdV 13.08, sampleV-dc 3, cumVdeltas 0.00, prevDCoffset 500.00, refFltdV 500.00, enInBkt 806.00</p>
<p class="MsoNormal">cyc# 1005, sampleV 503.39, fltdV 13.08, sampleV-dc 3, cumVdeltas 0.00, prevDCoffset 500.00, refFltdV 500.00, enInBkt 1746.00</p>
<p class="MsoNormal">cyc# 1505, sampleV 503.39, fltdV 13.08, sampleV-dc 3, cumVdeltas 0.00, prevDCoffset 500.00, refFltdV 500.00, enInBkt 1786.00</p>
<p class="MsoNormal">cyc# 2005, sampleV 503.39, fltdV 13.08, sampleV-dc 3, cumVdeltas 0.00, prevDCoffset 500.00, refFltdV 500.00, enInBkt 1766.00</p>
<p class="MsoNormal">cyc# 2505, sampleV 503.39, fltdV 13.08, sampleV-dc 3, cumVdeltas 0.00, prevDCoffset 500.00, refFltdV 500.00, enInBkt 1746.01</p>
<p class="MsoNormal">cyc# 3005, sampleV 503.39, fltdV 13.08, sampleV-dc 3, cumVdeltas 0.00, prevDCoffset 500.00, refFltdV 500.00, enInBkt 1786.01</p>
<p class="MsoNormal">cyc# 3505, sampleV 503.39, fltdV 13.08, sampleV-dc 3, cumVdeltas 0.00, prevDCoffset 500.00, refFltdV 500.00, enInBkt 1766.01</p>
<p class="MsoNormal">&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6120"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Mon, 10/09/2012 - 14:31.</div>
    <div class="content">
     <p>Relax, Ken, there's no problem.&nbsp; As posted, my sketch is in 'debug' mode, as shown in the first line of the display.&nbsp; Debug mode is useful because it allows you to investigate all aspects of the code without requiring any peripheral circuitry.</p>
<p>In 'debug' mode, the code <em>synthesizes</em> its voltage and current samples, and it does so perfectly.&nbsp; That's why the dc offset is displayed as exactly 500.00 (the penultimate column).&nbsp; An Arduino needs any analogue signals to be centred within the 0-5V range of its input range.&nbsp; With a real voltage sensor in normal mode, you should see around 511 - that's half of 1023 - but anything within say 20 of this value would be fine.&nbsp; For debug mode, I use an offset of 500.&nbsp; The fact that your display is showing precisely 500.00 means the low pass filter which extracts the dc offset is working perfectly (as one would expect it to do in debug mode).&nbsp; </p>
<p>Debug mode also simulates the triac.&nbsp; You can see that it's working becasue the energy in the bucket never exceeds 1800J.&nbsp; Why not play around with the numbers in the sketch to get a better feel for what's going on?&nbsp; Debug mode is intended to be experimented with.</p>
<p>The get the code working for real, it has to be in 'normal' mode.&nbsp; To make this change, just comment out the <strong>#define DEBUG</strong> line near the top.&nbsp; You will then no doubt be hoping that everything will work just fine, first time.&nbsp; It may indeed do so, but it also may not.&nbsp; If it doesn't, the next thing to check is the operation of your voltage and current sensors.&nbsp;&nbsp; An easy way to do this is with one of the tools that have been produced for this purpose.&nbsp; By this means, you will be able to verify that your voltage and current signals are OK.&nbsp; </p>
<p>The</p>
<p><strong>minAndMaxValues</strong></p>
<p>sketch near the top of</p>
<p><a href="http://openenergymonitor.org/emon/node/789">http://openenergymonitor.org/emon/node/789</a></p>
<p>&nbsp; is well suited for this purpose.&nbsp; You could also try my</p>
<p><strong>rawSamplesTool</strong></p>
<p>at</p>
<p><a href="http://openenergymonitor.org/emon/node/824">http://openenergymonitor.org/emon/node/824</a></p>
<p>which shows your sampled data in graphical form.&nbsp;</p>
<p>When first measuring current, I would recommend using some small resistive appliance rather than the current drawn by your entire house.&nbsp; Check the Building Blocks pages if you're not sure how the voltage and current sensors work.</p>
<p>Once your sensors have been shown to work OK with a tool, they should work fine with my code,&nbsp; Any problems, just post the details here.&nbsp; The more specific the symptoms, the more compact can be the answer :)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6123"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="cryo&#039;s picture" title="cryo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by cryo (not verified) on Mon, 10/09/2012 - 15:48.</div>
    <div class="content">
     <p>&nbsp;Thanks for the quick reply I'll play around with the code and see what happens. I'm quite happy nothing smoked or went bang :~)</p>
<p>Ken</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6125"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Thu, 13/09/2012 - 15:47.</div>
    <div class="content">
     <p>I&#39;m now in a position to make PCBs as per my previous posts,&nbsp; they will come drilled (except for the mounting holes), whether you use the transformer from Spirotronics or a wall wart is up to you. I&#39;m going to charge &pound;10 just to cover costs and my time, if anyone is interested please PM me.</p>
<p>For those soldering iron shy I&#39;m thinking about selling populated and tested boards but haven&#39;t costed that out yet, again if anyone is interested PM me and I&#39;ll look into the cost.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6129"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Mon, 10/09/2012 - 19:07.</div>
    <div class="content">
     <p>Robin it seems that the problem with my rig was wrong value resistors so I feel rather embarrased about copping out too soon.</p>
<p>However I`m very much looking forward to having my own Professionally Made Mk2 Robin Reliant supplied by kindly folk of the forum.</p>
<p>I have an old fashioned disc meter which has been running happily backwards and forwards. My FIT supplier has been promising to change the meter for a shiny new non-reversible type (not that I`m in a mad rush you understand) but they have now missed the third appointment. Will the MK2 work with a disc meter? My instinct says no. As an analogue device it will not need an accumulator but just translate any incoming or outgoing current into disc movement.&nbsp;</p>
<p>Obviously while I can bank and withdraw kWs at whim a diverter is not a high priority. I guess I`ll be waiting for a digital meter before I can install.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6132"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 10/09/2012 - 20:39.</div>
    <div class="content">
     <p>Noah,</p>
<p>Unless you are thinking of synchronising the controller with the LED flashes from a digital meter, <em>Robin's controller has nothing to do with the meter. </em>It will work whether you have an analogue Ferraris (rotating disc) meter, a digital meter or even no meter at all! The controller is exactly matching what the meter does, but there is no direct link between the two.</p>
<p>All that will happen with your disk meter is it will run backwards a tiny amount, and then forwards as the immersion heater draws off the current. Most probably, because we are only talking about one or two cycles at a time and the disk has a small but finite inertia, the disk will never actually move at all.</p>
<p>So go ahead and install, and with luck your meter will only rotate either when you are not generating enough to satisfy your load (when it will run forwards), or you are generating too much to be able to absorb all of it (when it will run backwards). If your meter disk creeps very slowly, Robin will tell you how to adjust the safety margin bias in the software.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6136"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Tue, 11/09/2012 - 07:38.</div>
    <div class="content">
     <p>&nbsp;Noah</p>
<p>I have a disk meter which unfortunately has the mechanical backward stop and it works fine on robins circuit. at low powers the disc wobbles but doesn't have any long term movement so go for it. You will have the advantage of being able to tune the safety margin as your meter goes backwards.</p>
<p>It occurs to me that some people are not comfortable with mains on a pcb so I thought I would share an alternative for the mains shy. I was asked by a friend to put a controller together for them on a short timescale so I decided to take the plunge and build robins design from parts I already had. I used an owl ct a pcb transformer and a standard puck type SSR. Following robins recommendation I used the debug sketch and the max min sketch to determine that the hardware worked the only thing I had to alter was the sense of the triac drive which is done by either changing the on definition or using the led output. it took 10 mins to assemble and worked first time. The puck type SSR is available from eBay and elsewhere for similar money to the triac.</p>
<p>I know some people are using the cut down sketch but I would ask that the debug one is kept going as it is so useful for testing the hardware has been assembled correctly. Many thanks to robin for his excellent work.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6139"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Tue, 11/09/2012 - 08:43.</div>
    <div class="content">
     <p>Thanks Paul, I'm delighted to hear that 'debug' mode has been helpful to you, and that the tools I've posted are being used :) </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6150"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Wed, 12/09/2012 - 08:00.</div>
    <div class="content">
     <p>Robert and pmcalli.</p>
<p>Surely the way the meter works is important. A digital meter counts (somehow) &nbsp;cycles or parts thereof and decides, when a certain amount of power has been used, to register this. Until the registration happens there is a window where the accumulated amount can be modified by feeding back into the mains. This obviously works but surely its possible that a meter can be designed so that its accumulator as well as register is non reversible. As long as this is not the case then we are gangbusters.</p>
<p>I realised soon after raising the query about analogue meters that this wouldnt be a problem especially with reversible type as in effect the energy bucket could be any size. With a ratchet (non reversible) type then the size of the bucket is defined by the tooth and pawl and I`d guess that this is likely to be larger than the digital meter`s accumulator anyway.</p>
<p>Of course I`m always imagining these thing in a mechanical sense which may well be misleading.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6153"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 12/09/2012 - 13:15.</div>
    <div class="content">
     <p>Yes, the way the meter works is important, but as long as the controller and its &quot;energy bucket&quot; offers finer-grained control, then the meter won't register. If you want an analogy, it's like driving down the road: if your car is 5 feet wide and your lane is 10, and if you keep the middle of the car within 2 feet of the middle of your lane, you're OK and there's a bit of a safety margin.</p>
<p>In a nutshell, we are taking advantage of the fact that digital meters <em><strong>do</strong></em> work very much like the mechanical one with the ratchet, stiction and inertia. And when you think about the pulsating nature of electrical energy, imaginary currents (the reactive component) and vars, they have to.</p>
<p>And if you want a number, I think (though I don't know) that most digital meters work on units of 1 Wh (3600 J), though there is also a minimum current below which they don't register anyway. This does vary quite a lot between different meters and usually works out at around 1cfl light bulb (i.e. 5 - 10 W)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6154"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/885" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="logic&#039;s picture" title="logic&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/885" title="View user profile.">logic</a> on Wed, 12/09/2012 - 13:56.</div>
    <div class="content">
     <p>&nbsp;Noah</p>
<p>While slightly off topic, as you have a meter which reverses then dependant on an alternative water heating fuel and cost i.e. gas or oil, would you not be better off letting the meter reverse during generation and then heat water via gas/oil? Usually electricity is much more expensive so you'd be cancelling out what you'd already used (improving the system pay back period). At least until your meter is replaced.</p>
<p>Dennis</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6156"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Wed, 12/09/2012 - 15:22.</div>
    <div class="content">
     <p>Dennis I`m arfraid I don`t understand your post.</p>
<p>At the moment, with reversable meter, the grid is acting like my own giant battery. Whenever I export it builds up my `credit` then when I need more power than I am producing I just re-import at no cost - because I have a fairly constant &nbsp;24/7 generation of &nbsp;3 to 4 kw my meter reads about 20Mw less than it did when I started producing. (so even with re-import, I`ve still exported more than I`ve used). &nbsp;This is pretty much an ideal situation with only one drawback: it`s not allowed. Once the power co gets around to changing the meter (they have known about this for ages, just slow to react and keep missing appointments) then a power diverter will be the best way to ensure full utilisation - in winter, as in summer I`ll probably end up exporting about 75%.</p>
<p>Robert. I imagine that the meter co`s could shorten their sampling time if they wanted to but then again we are not trying to rip off any free power as we replace what we borrow for microseconds.</p>
<p>
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6159"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Thu, 13/09/2012 - 18:03.</div>
    <div class="content">
     <p><span style="font-family: 'Arial','sans-serif'; font-size: 6.5pt">I&#39;m afraid it doesn&rsquo;t work like that the grid is acting as a very small battery and thats what the MK2 is taking advantage of, you export at one (low) price but import at another (high) price that&rsquo;s why you need to use or store as much power as you can. With your turbine system you have the luxury of being able to generate power 24/7 (I am envious). The system that Robin has designed mimics the way the meter works be it analogue or digital it measures consumption or export and averages out over a relatively short period of time.<o:p></o:p></span></p>
<p><span style="font-family: 'Arial','sans-serif'; font-size: 6.5pt">My provider managed to change my meter over after (only) eight weeks, I wasn&#39;t going to complain but the switch over was inevitable.<o:p></o:p></span></p>
<p><span style="font-family: 'Arial','sans-serif'; font-size: 6.5pt">It&#39;s taking forever for the electricity co&#39;s to switch to digital meters so I don&#39;t think shortening the sampling rate will be an issue for many years, just think of the cost doing that country wide, anyway all we would need to do is adjust the energy bucket to compensate.<o:p></o:p></span></p>
<p><span style="line-height: 115%; font-family: 'Arial','sans-serif'; font-size: 6.5pt; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-fareast-language: EN-US; mso-ansi-language: EN-GB; mso-bidi-language: AR-SA">P.S. triac side working fine, have ordered hardware, I think me and the wife may have to visit to supervise installation</span>.<img alt="" src="http://openenergymonitor.org/emon/sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/wink_smile.gif" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6160"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1372" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="noah&#039;s picture" title="noah&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1372" title="View user profile.">noah</a> on Wed, 12/09/2012 - 16:54.</div>
    <div class="content">
     <p>Rich. Eh? My disc meter DOES work that way. I have as I said approx 20Mwh to use up before I get back to the original meter reading when I first registered for ROCs. &nbsp;No doubt PowerCo will get it together to change meter soon......&nbsp;</p>
<p>But yes a non reversing meter will only store a tiny amount.</p>
<p>I dont think it would be possible to outgun the meter designers if they put their mind to it. They need a pair of samples at some minimum time spacing to work out power consumed-which could be a single joule or 1/1000th of a joule whatever but we have to insert our own reading and decision making (ie more computation than they need to do) within that same time frame.&nbsp;</p>
<p>If such a meter were invented and installed then the only way ( I think) to have power diversion would be a binary switched system matching output to load by adding or subtracting discrete resistances. This would be far less accurate: you`d need 5 immersion heater elements to get 3kw in 100w steps. And expensive.</p>
<p>The problems of dealing with reactive loads may make a decent sized energy bucket a necessity but that sort of theorising is way beyond my pay grade.</p>
<p>Fine to visit: we have a spare bed (actually about 50 spare beds as we used to run a bed factory). Maybe I could interest you in a bed/mattress/bits of wood/surplus woodworking machine? Bring bicycles.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6163"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Wed, 12/09/2012 - 21:45.</div>
    <div class="content">
     <p>Brilliant! Yes your meter you have now is sucking the profits out of the power company (gosh I feel so sorry for them), but when you have the inevitable new meter, that&#39;s when it changes.</p>
<p>I have some great photos taken at a local mill that I&#39;ll post a link to, you will defiantly find amusing.</p>
<p>Out gunning the meter designers will be easy, I have a cunning plan Baldrick.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6165"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Thu, 13/09/2012 - 15:21.</div>
    <div class="content">
     <p>Re &nbsp;meters and energy bucket</p>
<p>tried the controller on a few types of digital meters and they seem have about a three second window to fool them the disc&nbsp;meter is more forgiving and provided the power kick backwards is not too big they will run backwards but not for more than a turn. If the meter manufacturers did change they could not go less than a cycle otherwise reactive loads would be charged. If they went to a single cycle then phase control would be the alternative.</p>
<p>to avoid being charged the energy bucket ( infinite memory integrator to us analog types ) needs to have leak corresponding to the averaging time of the meter this is set by the safety margin which needs to be 60W&nbsp;for an average time of 1 second however I have set it to zero and it still doesn&#39;t register on the digital meter but it does on the disk an accurate power meter confirms that import is occurring . I have to assume that the anti creep in the digital meter is being exploited as well i shall look forward to my meter being changed hopefully for one with a nice anti creep.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6167"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richd&#039;s picture" title="richd&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by richd (not verified) on Thu, 13/09/2012 - 20:40.</div>
    <div class="content">
     <p>hmm, but even if you got a &#39;nice&#39; anti creep meter...</p>
<p>how much could you actually exploit it... when the sun isn&#39;t shining i mean.</p>
<p>after all , all the other things in the house (fridge, wifi, clocks etc) would be using the leccy under the &nbsp;&#39;creep&#39; &nbsp;threshold wouldn&#39;t they ?</p>
<p>just enquiring ;)</p>
<p>Rich.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6168"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 13/09/2012 - 22:09.</div>
    <div class="content">
     <blockquote><p>&quot;all the other things ....&nbsp; would be using the leccy under the &nbsp;&#39;creep&#39; &nbsp;threshold wouldn&#39;t they ?</p>
</blockquote>
<p>That&#39;s not likely. Anti-creep is set at between 20 - 50 mA for most of the meters that I&#39;ve seen data for (i.e. under 12 W), so clocks and wi-fi might get away with it, but add in a single cfl lamp and you blew it, and run a fridge on 12 W ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6169"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richd&#039;s picture" title="richd&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by richd (not verified) on Thu, 13/09/2012 - 23:49.</div>
    <div class="content">
     <p>Yes, I think that&#39;s what I meant.&nbsp;</p>
<p>Any possible exploit benefit would just be lost in the normal background usage.&nbsp;</p>
<p>The threshold is too small to be useful, except for modulating/balancing a large load while keeping &nbsp;import/export just right.</p>
<p>&nbsp;</p>
<p>Rich.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6170"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Fri, 14/09/2012 - 09:13.</div>
    <div class="content">
     <p>Re&nbsp;Yes, I think that&#39;s what I meant</p>
<p>the exploitation wasn&#39;t intended to save power in normal use &nbsp;just less safety margin than you might otherwise calculate.</p>
<p>my initial measurements give a bigger variation &nbsp;than the expected +\- 60W. This is probably due to my low ct output and the &nbsp;plesiochronous nature of the sampling I thought I saw someone post an interrupt driven venison of robins code but can&#39;t find it.</p>
<p>There a post earlier about flicker . Robins code produces a 12.5 Hz current at half power due to the interleaving. Human sensitivity is maximum at 8 Hz &nbsp;so if the interleaving could be removed this would raise it to 25Hz less irritating for the people with dodgy mains and incandescent lamps/halogen who should be shot anyway. Before anybody quotes a standard the mains flicker standard is&nbsp;EN61000-3-3 and we are quite safe as 14.6A change is required to fail and 3kW is under that.</p>
<div class="page" title="Page 2">
<div class="section">
<div class="layoutArea">
<div class="column">
<p><span style="font-size: 11.000000pt; font-family: 'ArialBOLD'">&nbsp;</span></p>
</div>
</div>
</div>
</div>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6171"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1163" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1163.gif" alt="markcarter10&#039;s picture" title="markcarter10&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1163" title="View user profile.">markcarter10</a> on Fri, 14/09/2012 - 09:51.</div>
    <div class="content">
     <p>Stuart is the author</p>
<p>see</p>
<p><a href="http://openenergymonitor.org/emon/node/1002" title="http://openenergymonitor.org/emon/node/1002">http://openenergymonitor.org/emon/node/1002</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6181"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sat, 15/09/2012 - 10:27.</div>
    <div class="content">
     <p>When our PV is inactive, the house invariably draws more current than is allowed with &#39;anti-creep&#39; mode.&nbsp; Every Joule that is consumed by our fridge, broadband router, phone base-station etc. is chargeable.</p>
<p>Once our PV gets going, any excess power is diverted to the immersion.&nbsp; The net flow of power through the meter falls to virtually zero and the meter enters its &#39;anti-creep&#39; mode.&nbsp; By setting <em>safetyMargin_watts</em> to a small negative value, I believe it is possible to bias the system such that a small amount of extra power is taken from the mains without it being charged for.&nbsp;&nbsp;</p>
<p>A value of -10 Watts is well worth a try.&nbsp; Go for the largest -ve value that you can get away with.&nbsp; Remember that most state-changes of the meter&#39;s LED are chargeable (even going from on to off)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6239"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Wed, 19/09/2012 - 13:35.</div>
    <div class="content">
     <p>&ldquo;Robin&rsquo;s code produces a 12.5 Hz current at half power due to the interleaving. Human sensitivity is maximum at 8 Hz so if the interleaving could be removed this would raise it to 25Hz less irritating for the people with dodgy mains and incandescent lamps/halogen who should be shot anyway. Before anybody quotes a standard the mains flicker standard is EN61000-3-3 and we are quite safe as 14.6A change is required to fail and 3kW is under that.&rdquo;</p>
<p><a href="http://www.reo.co.uk/files/handbook_en_61000-3-3_and_en_61000-3-11.pdf">http://www.reo.co.uk/files/handbook_en_61000-3-3_and_en_61000-3-11.pdf</a> mentions the 14.6A on page 12 which gives a 3% voltage fluctuation on the supply volts. But also on page 13 it has a graph that implies that the 3% only applies at flicker rates less than one per minute. I am assuming our burst firing mode is equivalent to its &quot;rectangular voltage fluctuations&quot;. At Robin&rsquo;s 8Hz the limit is not 3% but 0.3%. So I interpret it to mean that you can not meet this spec with this design. Even if you artificially overrode the bucket algorithm to limit the frequency to be either more than 25hz or less than 0.25hz you would still need to meet 1%, which limits the load to around 1kW. Am I correctly interpreting this?</p>
<p>On page 9 it says that burst firing on larger loads can not meet this spec.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6243"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 19/09/2012 - 17:02.</div>
    <div class="content">
     <p><em>&ldquo;Robin&rsquo;s code produces a 12.5 Hz current at half power due to the interleaving.</em></p>
<p>If the impedance of the mains connection is sufficiently low, there will no flickering of lights as loads are switched on and off.&nbsp; At our house, the application of a 3kW load appears to reduce the mains voltage by around 2V, or 1%.&nbsp; This will cause the power taken by a light bulb to be reduced by around 2% (because both voltage and current are 1% down).</p>
<p>At half power, my interleaved algorithm is likely to put the triac on for two whole cycles and then off for two whole cycles.&nbsp; This sequence will repeat at 12.5Hz.&nbsp; Any flickering of the lights is therefore likely to occur at this frequency.</p>
<p>While my Mk2 system has been in operation, have I ever been aware of flicking of any lights?&nbsp; The simple answer is &quot;No&quot;.&nbsp; Having said which, while the sun is out and the system is operational, we&#39;re unlikely to have many lights on.&nbsp; At the next opportunity, I must check in some dark place where the sun don&#39;t shine (loft or eaves) to see whether I can discern any flickering from the lights there (in both cases, these are still old-style bulbs).</p>
<p>Prior to Mk2, I used a Carlo Gazazzi AC Controller which apportioned cycles evenly over a 64-cycle window.&nbsp; At one-eighth power, the output sequence would presumably repeat at 8Hz, albeit not with a square wave (one cycle on, then seven off ...)</p>
<p>So, how feasible would it be to alter the &#39;sequence repeat&#39; rate of Mk2?&nbsp; Because the sampling is asynchronous with the mains cycles, I don&#39;t think it would be wise to bring the triac on immediately that the level criterion has met.&nbsp; That&#39;s because the first positive sample in the new cycle may be in time to arm the trigger, or it may be too late.&nbsp; If it were desired to fire the triac immediately for an even faster response time, then the measurement window would have to stop slightly earlier at some designated voltage level towards the end of the previous cycle.</p>
<p>Reducing the sequence repeat rate would be simple enough.&nbsp; With an additional counter, it could easily be arranged that the triac never goes on for fewer than, say, five or ten whole cycles at a time.&nbsp;&nbsp; The flicker rate at half power would then be 5 or 2.5 Hz respectively.&nbsp; If this approach were to be adopted, I would recommend increasing the energy bucket&#39;s threshold level so that once the triac has gone on there will definitely be enough power in the <strike>bank</strike> grid to complete the operation.&nbsp;</p>
<p>A better approach may be to prevent the triac from turning on if has been off for fewer that a specified number of mains cycles.&nbsp; In that case, the threshold value should probably by reduced.&nbsp; Cycling less frequently means that larger amounts of energy are moving to and fro through the meter.&nbsp; This will eat into the charge-free window that meters allow but should be OK I think.</p>
<p>More complex algorithms could no doubt be devised which would avoid cycling at certain frequencies.&nbsp; Debug mode, using my original sketch, would be an ideal vehicle for developing such logic because any desired value of surplus power can be specified - there&#39;s no need to wait for the weather to oblige.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6247"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jimjam&#039;s picture" title="jimjam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by jimjam (not verified) on Wed, 19/09/2012 - 18:59.</div>
    <div class="content">
     <p>I have had robins setup running for a couple of months and it has been working great, but it has suddenly stopped working. The pin 13 led is permanently lit. If i press the reset button it lights after  2 or 3 second and will not go out. The circuit board seems ok and cant see any fried components. When the controller was working ok the only time the led was permanently lit was if the immersion tank had reached full temp.<br />
Any ideas what could be causing this problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6249"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jimjam&#039;s picture" title="jimjam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by jimjam (not verified) on Wed, 19/09/2012 - 19:55.</div>
    <div class="content">
     <p>Problem solved i changed the analogue inputs from 1  and 2  and moved them to 3 and 4. I wonder what made my analogue inputs blow</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6253"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Wed, 19/09/2012 - 20:22.</div>
    <div class="content">
     <p>I&#39;ve no idea what might have caused that fault, but well done for sorting it out.&nbsp; Do you have protection diodes fitted?</p>
<p>If the voltage input (a2) stops working, you&#39;ll lose the cycle count and the accumulator (energy bucket) could do anything.&nbsp;</p>
<p>While the led was fully on, you were presumably heating your water ...</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6259"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 19/09/2012 - 22:12.</div>
    <div class="content">
     <p>&quot;I wonder what made my analogue inputs blow&quot; - A spike coming in down the mains?</p>
<p>You can get special high speed MOVs for that purpose - Farnell I know do them, so does <a href="http://spiratronics.com/ " title="http://spiratronics.com/ ">http://spiratronics.com/ </a> The more impedance they have upstream, the better chance they have of limiting the spike.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6260"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="jimjam&#039;s picture" title="jimjam&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by jimjam (not verified) on Thu, 20/09/2012 - 04:03.</div>
    <div class="content">
     <p>Yes robin i do have protection diodes fitted, my guess is that it was a voltage spike as my house is right next door to the hv transformer and my mains voltage never drops below 253v</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6261"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Thu, 20/09/2012 - 07:42.</div>
    <div class="content">
     <p><a href="http://www.voltageoptimisation.me.uk/">http://www.voltageoptimisation.me.uk/</a></p>
<p>Normally one of these is of little use but with 253V might be worth considering they reduce the mains voltage to 230V (what all pan European appliances are designed for) that would save a fair amount on your power bills and most units incorporate some form if filtering. As your voltage is 10% up on 230V I&#39;m sure there would be a saving for you on non resistive loads (everything but kettles and heaters)</p>
<p>Gosh your kettle must boil up quickly!!!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6262"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Thu, 20/09/2012 - 10:56.</div>
    <div class="content">
     <p>&ldquo;Cycling less frequently means that larger amounts of energy are moving to and fro through the meter.&nbsp; This will eat into the charge-free window that meters allow but should be OK I think.&rdquo;</p>
<p>If my last post was correct the repetition rate needs to be lower than about once per 30 secs for presumably a 50% mark space. Not sure though if that 30 secs would be relaxed or worse at other than 50%. What is the max number of 3kW cycles a typical digital meter will pass before clocking up one increment of energy? I very much doubt it is &gt;1500 which is what we need. I.e. the measurement can&rsquo;t be canceled out by reversing the current in the next period of time.&nbsp; Lot of talk here about wheel meters but they are passing technology so should not be designed for even though I have one.</p>
<p>My unit is in a dark airing cupboard and I can tell from the old style light bulb in there that visible flicker is always present even though the bulb is not on the immersion circuit, but shares the same consumer unit.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6263"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 20/09/2012 - 10:58.</div>
    <div class="content">
     <p>richmc, the link that you&#39;ve kindly provided leads to a <a href="http://www.vphase.co.uk/trade-zone/info---downloads">Vphase</a> unit which is available from wholesalers such as Edmonson.&nbsp; In their documentation, there is a downloadable PDF file which sets out how the device should be installed when there is &quot;Embedded generation&quot; at the premises.&nbsp;</p>
<p>At the top of the page, there is a schematic diagram showing a typical installation.&nbsp; This is supplemented by a block diagram which shows how the current flows through the various components.&nbsp; When comparing the two diagrams, there appears to be an inconsistency.&nbsp; I therefore rang the company and it turns out the block diagram is indeed incorrect.&nbsp; Current into &quot;RCB0 No9&quot; should come directly from the &quot;Vphase&quot; box rather than via &quot;RCD No1&quot;.&nbsp;</p>
<p>Their online documentation will now need to be updated, as will their various flyers when they next have a print run.&nbsp; My suggestion that they might provide me with a free unit in recognition of my technical assistance was graciously declined.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6264"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Thu, 20/09/2012 - 14:58.</div>
    <div class="content">
     <p>Could the Vphase react fast enough and to sufficient stability to limit flicker to 0.3% at 8Hz? Simple stabilisers I have seen are basically a multitapped transformer with relays to select the right tap to get the desired voltage output. There is no way such a device can react fast enough.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6268"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Thu, 20/09/2012 - 16:22.</div>
    <div class="content">
     <p>The point of me posting the Vphase was in response to the horrendous over voltage that JimJam has, this must be costing him loads in excess power and shortening the lifespan of TVs, computers, and other domestic appliances the thought of filtering was an observation regarding spikes, flicker? I don&#39;t have it so it&#39;s not my concern.</p>
<p>I think his supply company should be giving him a free unit. (as well as you calypso_rae).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6269"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 20/09/2012 - 16:26.</div>
    <div class="content">
     <p>I was wondering what was inside that device!&nbsp; If it&#39;s a transformer, it is probably an auto-transformer with only high current windings at the top end. It just might be switched with thyistors/triacs. The thermal limits quoted and the need to connect high current loads bypassing it mean it&#39;s design is an understandable compromise. As you imply, a device that relies on <em>measuring</em> the voltage, rather than depending on some intrinsic property that&#39;s voltage-dependent, will have a hard time following dips of 1 cycle in length.</p>
<p>I once had a little bit to do with a static compensator, the control element was saturating reactors and there was no switching nor active control circuitry at all. It was combined with a harmonic filter. It worked because both the system and the load were inductive - the load was a thyristor drive - so adding capacitance would lift the voltage to compensate - the amount of capacitance that the grid saw being controlled by the reactors. (I never did understand in detail how it worked - but it did). I guarantee that didn&#39;t have relays in it - it was on the grid at 11 kV.</p>
<p>[edit] richmc - isn&#39;t lamp life proportional to something like V<sup>4</sup> ? ! ! !</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6270"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 20/09/2012 - 16:35.</div>
    <div class="content">
     <p>I think the idea of Vphase is simply to reduce the mains voltage to a lower and more constant voltage.&nbsp; There&#39;s no information about how it works, but it looks to involve some active means of changing the voltage rather than just a collection of passive components.&nbsp;</p>
<p>As stated in the guidance notes, any embedded generation capability (e.g. PV) must be connected direct to the mains rather to the reduced supply.&nbsp;&nbsp; An immersion heater would not not normally be fed via the reducer because that would consume most if not all of the power that the box can deliver.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6272"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 20/09/2012 - 17:07.</div>
    <div class="content">
     <p><em>fewyatt: What is the max number of 3kW cycles a typical digital meter will pass before clocking up one increment of energy? I very much doubt it is &gt;1500 which is what we need. I.e. the measurement can&rsquo;t be canceled out by reversing the current in the next period of time. </em></p>
<p>Not sure what you&#39;re askingt here.&nbsp; Our digital meter records every 0.001kWh of consumed energy, which is 3600 Joules.&nbsp; A 3kW load consumes 60J every mains cycle, so a pulse is seen at the meter every 1.2 seconds.&nbsp; Apart from the anti-creep mode which cuts in after a few minutes of minimal consumption, there are no timing constraints in the meter.&nbsp; While energy moves to and fro through the meter, it&#39;s only the <em>amount</em> of energy that&#39;s involved which matters, not the time taken.</p>
<p><em>My unit is in a dark airing cupboard and I can tell from the old style light bulb in there that visible flicker is always present even though the bulb is not on the immersion circuit, but shares the same consumer unit.</em></p>
<p>Have you checked the voltage drop on your mains when a 3kW load is applied?&nbsp; Ours is around 2V if measured on a separate circuit, but nearly double this value on the same ring main.&nbsp; Sorry, I forgot to check for flicker today :(</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6273"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Thu, 20/09/2012 - 17:19.</div>
    <div class="content">
     <p>&quot;richmc - isn&#39;t lamp life proportional to something like V4 ? ! ! !&quot;</p>
<p>Yes Robert over voltage is a killer for old style filament bulbs good riddance to them!.</p>
<p>&quot;&nbsp;I can tell from the old style light bulb in there&quot;&nbsp;</p>
<p>Fewyatt - Get rid!, there are loads of places giving away low energy bulbs, where I live is a volunteer run eco info place, they give them away, just walk through the door!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6274"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Thu, 20/09/2012 - 17:52.</div>
    <div class="content">
     <p>&nbsp;</p>
<p>Where lights will only be on for short periods, Class A eco-bulbs make little sense to me because they don&#39;t reach full brightness straight away.&nbsp; Class C halogen bulbs are the preferred solution, but old-style filament ones are an obvious alternative.&nbsp;</p>
<p>If my airing cupboard were ever to gain a light fitting, it would certainly have an old style bulb in there.&nbsp; I can&#39;t throw away things that still work!&nbsp; Inspection lamps are another good outlet for filament bulbs, they never seem to last long.</p>
<p>Class C are &quot;dimmable&quot; whereas Class A are not (sorry, Rich, if I&#39;ve described them incorrectly)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6275"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1163" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1163.gif" alt="markcarter10&#039;s picture" title="markcarter10&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1163" title="View user profile.">markcarter10</a> on Fri, 21/09/2012 - 23:42.</div>
    <div class="content">
     <p>OFF TOPIC but all the same needs to be said</p>
<p>&nbsp;</p>
<p>I agree totally, no need to replace lamps that are only on occasionally!&nbsp;..but where they are on for sustainable times I would suggest an LED type.. 5w will produce the&nbsp; equivalent&nbsp;&nbsp; 60 - 80w of filament / dichloric light and should (but yet to totally convinced)&nbsp; in theory last up to 50,000hrs (especially if it does not comes from China) Warm up time is instant!...This is the way it will go beyond doubt! &nbsp;Prices are still falling and will continue to until there is no other option or the price of fluorescent powders used in their manufacture become a commodity that bankers start betting on!</p>
<p>
	I work for a signage company and recently our illumination method for signage has surpassed 50 percent LED powered of all our lighting methods with 80+ lumens per watt the norm for a good LED system. As a gauge a 58w triphosphor&nbsp; fluorescent lamp(with&nbsp;additional substantial control gear losses)&nbsp;are being replaced by 7- 10w&nbsp;&nbsp;of LED lighting power</p>
<p>	This will continue until phosphor markets are classed as a commodity and bet on their&#39; futures&#39; and drive up their value then&nbsp;that will inevitably lead to over inflated prices and an end to ever lowering costs of LED lighting!<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6277"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Thu, 20/09/2012 - 20:38.</div>
    <div class="content">
     <p>Totally agree Mark, As long as they are a decent quality LEDs are the way to go at least for kitchens and bathrooms, mine are totally GU10 LEDs 2W ones replacing 50W halogens 15 lamps in total saving 720W (when they are on) the rest of the house has &quot;curlies&quot; (that I got for free) and only two fake standard bulbs that are halogen 32W.</p>
<p>At least I know where to come for spares now! ;-)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6278"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1163" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1163.gif" alt="markcarter10&#039;s picture" title="markcarter10&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1163" title="View user profile.">markcarter10</a> on Thu, 20/09/2012 - 21:08.</div>
    <div class="content">
     <p>I don&#39;t where to discuss this topic as it i so off topic .. is back &#39;there&#39; room for this dicsussion?</p>
<p>regards</p>
<p>&nbsp;</p>
<p>Mark</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6279"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Thu, 20/09/2012 - 22:39.</div>
    <div class="content">
     <p>Just for the record, I have no intention of replacing incandescent lamps before they expire naturally, either.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6280"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1163" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1163.gif" alt="markcarter10&#039;s picture" title="markcarter10&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1163" title="View user profile.">markcarter10</a> on Fri, 21/09/2012 - 11:39.</div>
    <div class="content">
     <p>.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6283"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 21/09/2012 - 15:04.</div>
    <div class="content">
     <p>In the gloom of our dormer bungalow&#39;s eaves, the two filament-style bulbs can indeed be seen to flicker slightly when Mk2 is diverting surplus power.&nbsp; If I were to remain in there for a while, this effect could perhaps become irritating.&nbsp;</p>
<p>	However, in our kitchen with the blinds drawn, I genuinely can&#39;t detect any unsteadiness from the three halogen bulbs at any level of power via the fitted phase-angle dimmer control.&nbsp; And in a separate part of the eaves where there is a flourescent light, this too appears to be immune from this effect.</p>
<p>	Although some degree of flickering is now known to be a likely side-effect of the Mk2 design, I doubt whether this would constitute a problem in the vast majority of situations.&nbsp; I certainly have no intention of changing our rig for this reason.</p>
<p>	If this side-effect had to be avoided, some other means of diverting surplus power would be needed.&nbsp; Given the restrictions of supply meters, I think the only realistic alternative would be to use phase-angle control.</p>
<p>	Varying the power to a 3kW load using phase-angle control would be easy enough to implement, but would no doubt require the use of EMC filtering.&nbsp; This is an area about which I know no-o-o-thing Meesta Fawlty ...<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6284"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Fri, 21/09/2012 - 15:34.</div>
    <div class="content">
     <p><em>Our digital meter records every 0.001kWh of consumed energy, which is 3600 Joules.&nbsp; A 3kW load consumes 60J every mains cycle, so a pulse is seen at the meter every 1.2 seconds.&nbsp; Apart from the anti-creep mode which cuts in after a few minutes of minimal consumption, there are no timing constraints in the meter.&nbsp; While energy moves to and fro through the meter, it&#39;s only the amount of energy that&#39;s involved which matters, not the time taken.</em></p>
<p>I assume these digital meters also work like a small bucket. Import fills up the bucket and export empties it. When the bucket overflows the meter clocks up one unit of energy and the bucket empties quickly, ready for refilling.</p>
<p>If the meter has a 0.001kWh bucket (3600J) and that takes 1.2 secs to fill then your unit has to switch the load on a least every second to prevent the meter incrementing. As the EMC spec can only be met with repetition rates of more than once per 30 secs (if I was right above) there is no way burst firing can meet the spec.</p>
<p>It might be worse than this because whilst the meter display increments at 0.001kW there may be an internal bucket that is clocking up smaller increments and only displaying them when 0.001kWh is reached. Say it is internally counting in +0.0001kW (import) steps. Once one such step is saved it is no use making the next step -0.0001kW by turning off the triac as it does not necessarily cancel the previous +ve step, if only +ve steps are saved, with the &ndash;ve ones maybe thrown away or just used to put the reverse LED on.</p>
<p>In the extreme a meter could work with a bucket only one cycle long at the maximum current rating of the meter. If it is a 100amp meter that makes the bucket 480J or 0.00013 kWh. I would have thought though that smoothing the measurement over &gt;5 cycles or so would make more sense so that makes it 0.0006 kWh which is around the same as your 0.001kWh display update increment. So that probably means that it does not in fact have a smaller bucket than 3600J.</p>
<p>I have looked at the spec sheets for the core chips that go into digital meters and they are very vague about the integration period of the measurement, i.e. bucket size.</p>
<p><em>As a gauge a 58w triphosphor fluorescent lamp&hellip;&hellip;.. are being replaced by 7- 10w&nbsp; of LED lighting power</em></p>
<p>Don&rsquo;t agree with that. I find you can replace a 60 W conventional incandescent with about 8W of LED or 15W of CFL.&nbsp; That is unless you are comparing the concentrated illumination of a LED against the omnidirectional output of a conventional incandescent or fluorescent.</p>
<p>My incandescent lamp is deliberately there to check flicker and dips. I have not yet measured the drop.</p>
<p><em>The horrendous over voltage that JimJam has</em></p>
<p>JimJam have you tried to contact your utility company? I have high voltage and complained to Southern Electric, even though I use Eon for the billing. Within 2 days they were round and attached a voltage logging device. After 2 weeks of measurement they said I was just within the spec so they would not be reducing it. But they seemed very willing to do so had the logger proved overvoltage.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6285"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sat, 22/09/2012 - 06:57.</div>
    <div class="content">
     <p><em>It might be worse than this because whilst the meter display increments at 0.001kW there may be an internal bucket that is clocking up smaller increments and only displaying them when 0.001kWh is reached. Say it is internally counting in +0.0001kW (import) steps. Once one such step is saved it is no use making the next step -0.0001kW by turning off the triac as it does not necessarily cancel the previous +ve step, if only +ve steps are saved, with the &ndash;ve ones maybe thrown away or just used to put the reverse LED on</em>.</p>
<p>Happily it doesn&#39;t seem to do that, I&#39;ve had a couple of days when I&#39;ve been able to check from when the Mk2 starts to work till the water is hot, other appliances being run when they don&#39;t cause import, and over several hours the meter has not increnented at all, yesterday was consistently overcast and only the domestic background and&nbsp;my PC were running most of the day, The demand trace of the Eco Eye software was &quot;straddling&quot; the PV O/P line fairly constantly through the day and the meter didn&#39;t increment at all.</p>
<p>BUT the Eco Eye trax analysis graph showed me as energy usage exceeding generated, this is clearly wrong, as the meter didn&#39;t budge.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6286"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Fri, 21/09/2012 - 16:45.</div>
    <div class="content">
     <p>I think the concept of an &#39;energy bucket&#39; in the context of the supply tariff meter is misleading. As far as I&#39;m aware, <em>most</em> meters have two properties of interest to this discussion. The first is the smallest unit by which the register is incremented. The second is the minimum current below which consumption is ignored. The smallest chargeable unit is 1 Wh. The minimum current equates to around 10 W (but seems to vary rather more than the minimum unit, which seems consistent). There must be an integration time, it must be a whole number of cycles, but I&#39;ve seen no credible value for it. My best guess is 200-300 mS, based on the Atmel demo software, and this seems reasonable to me.</p>
<p>Therefore, if all the above is correct, while the energy drawn remains less than 1 Wh, nothing is charged. If the current remains below the 10 W level, nothing is charged. Operation outside these limits will probably result in a charge.</p>
<p>Unfortunately, and for obvious reasons, the meter manuals and data sheets are rather coy in this area.</p>
<p>It might pay to search back in the forums for the results of the tests that established much of this data.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6287"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 21/09/2012 - 16:46.</div>
    <div class="content">
     <p><em>fewyatt: I assume these digital meters also work like a small bucket. Import fills up the bucket and export empties it. When the bucket overflows the meter clocks up one unit of energy and the bucket empties quickly, ready for refilling.</em></p>
<p>Yes, that sounds right.&nbsp; The meter&#39;s accumulator also keeps track of a small amount of exported energy - probably 0.001kWh&#39;s worth - and that energy is freely available for re-use by the customer.&nbsp; In this situation, the meter&#39;s LED is on.&nbsp; When the LED goes off, that means that you&#39;ve just run out of purchased energy and been charged for another 0.001kWh&#39;s worth (the same as when a pulse occurs)</p>
<p><em>If the meter has a 0.001kWh bucket (3600J) and that takes 1.2 secs to fill then your unit has to switch the load on a least every second to prevent the meter incrementing.</em></p>
<p>The meter only increments when the house is importing.&nbsp; If the house is importing at 3kW, the meter will pulse every 1.2 seconds.&nbsp; If the triac were then to turn the immersion on, that would be an additional 3kW of consumption so the meter would pulse twice as quickly.&nbsp;</p>
<p>The triac only operates when there is surplus PV, its purpose being to prevent surplus energy from being exported.&nbsp; If the meter&#39;s LED were ever to pulse (or go from &#39;on&#39; to &#39;off&#39;) while Mk2 is active, that would mean that the measurement circuitry had drifted relative to the meter, and you have been charged.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6288"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Fri, 21/09/2012 - 20:51.</div>
    <div class="content">
     <p><em>RW: while the energy drawn remains less than 1 Wh, nothing is charged.&nbsp; </em></p>
<p>Yes, after a chargeable pulse has occurred, the next one will only happen when a further 1Wh has been drawn from the grid.&nbsp; If, before drawing that amount of additional energy, the flow goes into reverse, the LED will go on when the same level is reached that caused the pulse to occur.&nbsp; The user can now &#39;export&#39; a further 1Wh&#39;s worth of energy without loss.&nbsp; In this situation, the LED remains on until the meter&#39;s accumulator has reached a level that is 3600J greater than at the last pulse.&nbsp; When this eventually occurs, the LED goes off, this being is a chargeable event, just like a pulse.&nbsp; Diagram attached.</p>
<p>If more than 1Wh&#39;s worth of export occurs after the LED has gone on, the internal &#39;step&#39; levels appear to reset.&nbsp; When consumption re-starts, you&#39;ll probably be charged after 3600J has been consumed (rather than the up-to-7200J&#39;s worth that can be freely available if this &#39;over-export&#39; situation had not occurred).</p>
<p><em>If the current remains below the 10 W level, nothing is charged.</em></p>
<p>This is the &#39;anti-creep&#39; mode which cuts in after a few minutes of low consumption.&nbsp; When Mk2 is diverting power, this is the ideal mode for the meter to be in.&nbsp; In anti-creep mode, the LED is on, but the LED can also be on for other reasons.&nbsp; While our tank is heating, the LED is generally on which means anti-creep mode.&nbsp; On a good day, once the thermostat trips out, the LED remains on while surplus power flows away to the grid.&nbsp; (Technically, the meter may still be in &quot;anti-creep&quot; mode while export is taking place)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6291"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1163" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1163.gif" alt="markcarter10&#039;s picture" title="markcarter10&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1163" title="View user profile.">markcarter10</a> on Fri, 21/09/2012 - 23:34.</div>
    <div class="content">
     <p>double post somehow!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6292"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1163" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1163.gif" alt="markcarter10&#039;s picture" title="markcarter10&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1163" title="View user profile.">markcarter10</a> on Sat, 22/09/2012 - 00:08.</div>
    <div class="content">
     <p><u>Don&rsquo;t agree with that. I find you can replace a 60 W conventional incandescent with about 8W of LED or 15W of CFL.&nbsp; That is unless you are comparing the concentrated illumination of a LED against the omnidirectional output of a conventional incandescent or fluorescent.</u></p>
<p>I have decided that my response to this post is too far off topic and would welcome it to carry on else where!</p>
<p>Any suggestions?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6293"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 22/09/2012 - 01:32.</div>
    <div class="content">
     <p>Mark, start a new thread!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6296"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Sat, 22/09/2012 - 14:00.</div>
    <div class="content">
     <p>fewyatt re :&nbsp;&nbsp;&nbsp;&nbsp; As the EMC spec can only be met with repetition rates of more than once per 30 secs (if I was right above) there is no way burst firing can meet the spec.</p>
<p>I have looked at the flicker spec again and the reo explanation and have to conclude that your interpretation is correct the reo consultant who wrote it used to work for me and is an excellent engineer I think it highly unlikely that his interpretation is wrong. It is not therefore possible to make this design universally legal. For it to be legal you would have to prove that the % voltage drop due to a 3kW load turning on is less than 0.3% mine isn&#39;t . I see in the spec you are permitted to do this. the reo doc also says you can use the industrial higher limit if you have a guaranteed 100 amp per phase supply&nbsp; but doesn&#39;t say what the higher limit is. The other way allowed is to ask permission of the DNO to connect. I have put two of this design of controllers in where flickering was a problem. In one case we traced it to a faulty isolator but in the other case the mains itself was the problem and I had to change it to a phase controller type as it was interfering with the neighbours as well who had reported it. fortunately we changed it before they traced the cause.</p>
<p>I did some conducted emissions tests this week and the almost&nbsp; zero crossing triac is out of spec by more than 30dB. it requires a filter. A normal common mode line filter will not suppress this type of device it needs a choke. If anybody is interested I will posts the results.</p>
<p>All of this is most disappointing and leads me to conclude that I should finish the phase control filter work I had started but put on hold for robins design. The interrupt driven solution of Stuarts can easily be adapted to phase control just need to to find a way of measuring and and passing harmonic spec lol.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6297"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sat, 22/09/2012 - 15:26.</div>
    <div class="content">
     <p>I&#39;ve looked at the spec, and a few quick sums seem to indicate that a load &lt; 650 W would be acceptable. Is this interpretation correct - it&#39;s based on the test system impedance rather than the actual, but I&#39;m thinking that if the device under test passes under test conditions, it is acceptable even though the system fault level may be lower and the flicker correspondingly worse and possibly outside the limits?</p>
<p>So maybe the answer is load of 650 W immersion heaters, only one of which is burst-fire, the rest switched by relays!</p>
<p>&lt;removes tongue from cheek&gt;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6302"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1522" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1522.jpg" alt="BBTV&#039;s picture" title="BBTV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1522" title="View user profile.">BBTV</a> on Sun, 23/09/2012 - 12:04.</div>
    <div class="content">
     <p>My PV Simulation for MK2 PV controller.&nbsp; Having built Calypso_Ray&rsquo;s MK2 PV controller I had to find a way of testing it.&nbsp; My problem was the main consumer unit and all the meters are in a very small cupboard under the stairs, The inverter is in my detached garage and my workshop is at the top of the garden.</p>
<p>I decided the best approach was to build a simulator using SCT-013-30 split core transformer.&nbsp; The transformer normally clamps around&nbsp; one of the cables between the consumer unit and the main supply meter.&nbsp; To simulate this I put three windings on the clamp transformer. One single turn winding to be connected in series with the load, and the other two windings (one single turn and one ten turn) were to be connected in series with the simulated PV power supply (only one used at a time). These windings had to be connected in anti-phase to the single turn load winding, so that output of split core transformer zero if the power in the two windings were the same. Go to this link to see a video.&nbsp; Sorry for any errors I made in my commentary, I don&rsquo;t think Hollywood is ready for me yet. <a href="http://www.youtube.com/watch?v=QeU6lzl4rVs" title="http://www.youtube.com/watch?v=QeU6lzl4rVs">http://www.youtube.com/watch?v=QeU6lzl4rVs</a> .&nbsp; I have also designed a De Lux MK2 PV controller Interface circuit using the LMV358MX IC as a buffer/Amp. The only problem that you may have is that this IC is a surface mount device, but if I can do it, then you can do it. The De Lux circuit was used for the above simulation.<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6303"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 23/09/2012 - 16:12.</div>
    <div class="content">
     <p>Brian&#39;s idea of simulating PV-generated power is superb.&nbsp; I&#39;ve just added a simple extension cable to my rig, one core of which passes eleven times through the CT.&nbsp; This simulates the generation of additional PV power of ten times whatever load I apply.&nbsp; If I power up a 60W bulb using this extension, the CT&#39;s output is exactly as if 600W of extra PV power were being generated.&nbsp; If I power up a 750W space-heater, that&#39;s equivalent to an additional 7.5Kw of PV.&nbsp; If no current is flowing, the presence of the extension has no effect.</p>
<p>By powering up different loads, the equivalent amount of suplus PV can be adjusted to whatever value is required.&nbsp; If there is already some surplus PV, the extra 600W provided by a 60W bulb causes the immersion (plus its associated neon and the Arduino&#39;s on-board LED) to flash &#39;on&#39; more frequently.&nbsp;&nbsp; When our oven was on just now, 600W of extra surplus power was not enough to bring the immersion on at all, but the effect of the 750W heater (times ten) immediately caused it to go fully on, as expected.</p>
<p>This additional wiring also provides a fail-safe way of setting up one&#39;s circuit on occasions when the PV is inactive.&nbsp; Having failed on a few occasions to leave the rig in a working state - and consequently lost several hours&#39; worth of generated power next day - I think this is a wonderful additional to any rig of this type.</p>
<p>Pic attached.&nbsp; I&#39;ve used the Magnelab CT purely because the aperture in the standard YHDC one was too small for the additional wiring.&nbsp; The white cable goes to a standard 13A outlet.&nbsp; The blue &amp; brown cores go to a trailing socket into which mains loads can be plugged as appropriate.&nbsp; The black/white pair of wires go the the current sensor circuit.&nbsp; Because the Magnelab CT is less sensitive than that of the YHDC, the calibration is out by around a factor of three.&nbsp; The system still works just as before except that it now takes longer for the bucket to reach its half-way point.&nbsp; At very low rates of current, there will no doubt be increased quantisation distortion because fewer ADC levels are spanned.&nbsp; This drawback could be immediately cured be increasing the value of the burden resistor.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6305"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Sun, 23/09/2012 - 14:03.</div>
    <div class="content">
     <p>Of course, if you really wanted to be clever,&nbsp; you could do the same with a low voltage (say 9 V) transformer, a potentiometer and a centre-tapped resistor chain, and feed a few mA in to where the c.t. normally connects.</p>
<p><img alt="" src="data:image/png;base64,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" /></p>
<p>R1 &amp; R2 are ordinary resistors, R3 &amp; R4 are a wirewound potentiometer. R5 is the burden resistor, connected at Ct_a and Ct_b. This will drive 8 mA - the equivalent of&nbsp; 16 A of current - in either direction. (In real life, the whole circuit has to float, picking up its reference level from the Arduino input circuitry, so ignore the earth - it&#39;s only for LTSpice&#39;s benefit).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6306"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1522" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1522.jpg" alt="BBTV&#039;s picture" title="BBTV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1522" title="View user profile.">BBTV</a> on Sun, 23/09/2012 - 15:38.</div>
    <div class="content">
     <p>Yes that would work Robert, but my idea was to simulate the MK2 PV controller with a full load as it will be when installed in the house, so I could check how well it tracked from 5W to 3000W.&nbsp; I only managed to achieve the very low readings with my de lux interface.</p>
<p>As you saw at the beginning of my video with my scope, using a times 10 probe, giving a gain of 10mV per division, I found a lot of background noise being picked up and even with the simulator switched off, the lamp would occasionally flash. It was very difficult to get a reliable simulation below 50W. With the De Lux circuit I managed to achieve 2.5W. I designed the new circuit more like a microphone input but without the high gain. The most important thing is grounding, where all the ground points go to a central point like a star. An example on the bread board was that I made the mistake of having the grounds for the two input transformers strapped together and then connected through a single wire to a bread board ground point. The higher current from the voltage reference transformer generated a small voltage across this single wire that added to the low voltage coming from the split core transformer causing errors.&nbsp; There is a saying look after the pennies - look after millivolts and the volts will look after themselves.&nbsp; Remember when this circuit is working correctly it will be looking at these very low levels to obtain the maximum efficiency.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6307"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 23/09/2012 - 16:10.</div>
    <div class="content">
     <p>Very elegant Brian. I think the main problem with measuring low signal levels with CTs is the noise they pick up, I would try a much larger value of feedback cap across the top op amp you are only interested in 50Hz so talking it up to 100nF or even 1uf to get rid of the HF noise. This is in addition to the software filters in the sketch.</p>
<p>Or possibly an audio type balanced input to reject noise?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6308"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 23/09/2012 - 16:15.</div>
    <div class="content">
     <p>I&#39;ve never been aware of any noise problems at low levels of current.&nbsp; With no deliberate &#39;safety margin&#39;, my circuits have always operated within the anti-creep window that our supply meter allows.&nbsp; I really like the idea of checking that the rig is still working at any time by turning on a bulb for a few seconds.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6309"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Sun, 23/09/2012 - 16:33.</div>
    <div class="content">
     <p>If Brian is trying to look at levels down to 2.5W, then I can see noise being an issue, personally I&#39;m not interested with trying to squeeze every last watt from the system as you say calypso _rae it works within the anti creep window, that&#39;s all that its important to me.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6310"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1522" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1522.jpg" alt="BBTV&#039;s picture" title="BBTV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1522" title="View user profile.">BBTV</a> on Sun, 23/09/2012 - 18:43.</div>
    <div class="content">
     <p>I did not set out to achieve very low levels but to ensure good stability and follow good design practice. Having designed and been involved with high quality audio equipment over many&nbsp; years, I have become reasonably knowledgeable and though this design may seem a little more complicated, I think it&#39;s worth it. The whole point is if I can simulate down to 2.5W then the design can&#39;t be bad and should be very good at 50W. This circuit also adds an extra level of protection to the Arduino with the LMV358MX. The inverting input used giving a 10K input impedance.&nbsp; This input is also known as a virtual earth input and if a scope was connected to this pin very little if anything would be displayed. If the input of circuit was connected to either 5V or GND the input on the virtual earth pin would never get to these levels. The virtual earth can be considered as the fulcrum point of a Childs seesaw as it doesn&#39;t move. The two 8K2 resistors between the output and An1 and An2 are added protection but are possibly unnecessary.</p>
<p>Richmc idea of a balanced input is good, but I think unnecessary, and would only make it more complicated.&nbsp; Also I haven&#39;t seen a clamp transformer advertised with a balanced output. As far as the feedback capacitors are concerned, if size was increased to say 1UF, phase shift errors are likely to occur and you must remember that the mains wave form is not a pure 50HZ sign wave but a lot more complicated with many harmonics.</p>
<p>Remember this is only the interface and I can only give my opinion on this part of the project. Robin is the main brains behind the project&nbsp; and without his knowledge in programing the Arduino I would have not had the opportunity of getting involved.&nbsp; I haven&#39;t got a clue how to program the Arduino and had not even heard of it before I stumbled on this forum. &nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6311"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Sun, 23/09/2012 - 20:46.</div>
    <div class="content">
     <p><em>BBTV: Remember this is only the interface and I can only give my opinion on this part of the project. Robin is the main brains behind the project&nbsp; and without his knowledge in programing the Arduino I would have not had the opportunity of getting involved.&nbsp; I haven&#39;t got a clue how to program the Arduino and had not even heard of it before I stumbled on this forum.&nbsp;</em></p>
<p>This thread is a great example of collaborative thinking at its best, and many people have contributed to help it get to this stage.&nbsp; Your idea of having an additional circuit or two on the CT provides a really neat way of testing an actual system in situ.&nbsp; Test rigs never provide quite the same level of confidence as the real thing.&nbsp; The way that you&#39;ve simulated PV power generation is far more effective than any software tweak that I&#39;ve used in the past, such as running the sketch in debug mode.</p>
<p>Although the initial design is still holding up, there are no doubt useful improvements that could be made.&nbsp; Before rebuilding my own rig for the long term, I&#39;m keen to ensure that each part is as well refined as it reasonably can be.&nbsp; I think it&#39;s important to retain a simple construction, so there needs to be a really good reason before adding any new component of significance.</p>
<p>For what it&#39;s worth, my thoughts for the rebuild include:</p>
<p>- Use a better voltage sensor (the waveform from my &#39;telecom&#39; adapter waveform is awful, much worse than the Mascot)</p>
<p>- Keep the CT&#39;s output below 1V ptp.&nbsp; To make best use of the ADC&#39;s input range, the easiest approach is set analogReference() to INTERNAL (1.1V).&nbsp; This, in turn, means that Vref will need to be 0.55V.&nbsp; This is different than the standard OEM approach but should provide a much improved quality of signal from the CT.&nbsp; In particular, the phase-shift will be much reduced which can only help with the system&#39;s linearity.&nbsp; For this application, linearity is everything.</p>
<p>- Retain the single buffered reference and the twin floating sensor without any further amplification.&nbsp; This all works nicely and is very straightforward (unless anyone can convince me otherwise ...)</p>
<p>- Although stripboard would probably be fine, I certainly intend to make use of richmc&#39;s <a href="http://openenergymonitor.org/emon/node/841#comment-6019">PCBs</a> :)</p>
<p>- Sketch to be tidied to aid readability.</p>
<p>- Possible use of interrupts, mainly to minimise timing jitter</p>
<p>- Possibly make the output mode selectable (i.e. to run either in whole-cycle bust mode or in phase-angle control mode).&nbsp; The output circuitry would need to be assembled for one option or the other</p>
<p>All input welcome!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6313"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="pmcalli&#039;s picture" title="pmcalli&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by pmcalli (not verified) on Mon, 24/09/2012 - 06:57.</div>
    <div class="content">
     <p>Robin</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Taking the reference down is usually not a great idea as the adc&nbsp;will sink into other errors such as sample and hold plus noise but best proof is to try it.&nbsp;</p>
<p>If the output Opto was changed to the random fire type it would do both phase control and burst fire without change as burst fire is only firing the triac&nbsp;close to zero and phase control is firing it at a variable delay.</p>
<p>It would be nice to have the pcb for the triac&nbsp;dive laid out to include the zero cross detector posted on the no voltage thread As well &nbsp;the pin out for the random fire Opto is the same so no change needed In the pcb for that.</p>
<p>the interrupt code of Stuart&#39;s has had the final bug of not firing correctly on the timer fixed over the weekend so this can now be used to run from an external interrupt and or from internal timer &nbsp;which may have some uses here.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6314"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Mon, 24/09/2012 - 13:13.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1149" title="View user profile.">pmcalli</a></p>
<p>When you did the conducted emission test, were you using the dedicated zero crossing trigger (MOC3041) or a software-generated zero crossing?</p>
<p>&nbsp;</p>
<p><em>&quot;Taking the reference down is usually not a great idea as the adc&nbsp;will sink into other errors such as sample and hold plus noise but best proof is to try it.&quot; </em><br />
	That is what I would have thought, there seems to be anecdotal evidence that &quot;ghost&quot; power - readings when no current is flowing - is more likely with plugboard or stripboard layout and this seems to suggest that grounding / earthing / screening has not been given sufficient attention. Having said that, the Atmel app.note uses the 1.1 V input, but presumably with a well-laid-out pcb (which they haven&#39;t published).</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6315"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Mon, 24/09/2012 - 14:42.</div>
    <div class="content">
     <p><em>I think the concept of an &#39;energy bucket&#39; in the context of the supply tariff meter is misleading. As far as I&#39;m aware, most meters have two properties of interest to this discussion. The first is the smallest unit by which the register is incremented. The second is the minimum current below which consumption is ignored. The smallest chargeable unit is 1 Wh. The minimum current equates to around 10 W (but seems to vary rather more than the minimum unit, which seems consistent). There must be an integration time, it must be a whole number of cycles, but I&#39;ve seen no credible value for it. My best guess is 200-300 mS, based on the Atmel demo software, and this seems reasonable to me.I still think the bucket analogy may be useful. Or it can be described as an accumulator.</em></p>
<p>2 theories, first one mine and calypso_rae&#39;s, second Robert&#39;s:</p>
<p>1) I assume the meter samples the voltage and current waveforms thousands of times a second. Every sample pair is multiplied and that will result in some positive (import) results and some negative (export) depending on current direction, distortion&nbsp;and the power factor. These are summed to the accumulator/bucket which &ldquo;fills&rdquo; up with no integration time. When full/above a certain value (smallest unit by which the register is incremented ) it has clocked up one unit of energy which is either directly clocked to the display or added to previous values and when that sum reaches a set value it is displayed as a chargeable import.</p>
<p>During burst firing or phase control many samples will be negative so the value in the bucket/ accumulator goes down when they are.&nbsp; If it goes below empty/zero by some value (a third property in Robert&rsquo;s terminology?)&nbsp; that will&nbsp; be seen as a reverse/export and ignored as far as energy counting is concerned and/or a reverse LED is turned on. Don&#39;t quite follow calypso_rae&#39;s&nbsp;diagram on the reverse light.</p>
<p>All this has to be done in increments of whole cycles as the bucket/accumulator may be full half way through a cycle yet be not full by the end.</p>
<p>The trick for us is to keep the value in the bucket/accumulator above zero and below the overflow value. But not quite sure what happens it you hover around empty as the bucket/accumulator may discard results below zero so a constant import could be registered even for a real zero import/export.</p>
<p>2) Rather than clocking up a unit when the bucket/accumulator reaches a set value, the meter adds up all the thousands of samples in a fixed integration time period like 200-300 mS that is a set number of whole cycles. If the summed value is positive it is added to a totalizer register. If negative it is ignored. At a fixed display update period, like one second, the new totalizer value is displayed. If more than a small amount of negative value is received for more than a certain amount of time the reverse LED is lit.</p>
<p>If the burst firing is turned on for too large a number of cycles in a row in both cases it records import but the off periods that allow export can not cancel out this cost.</p>
<p>Microwave ovens also burst fire to modulate their power but it is all quite slow like cycling once per 10s of seconds. And they are &lt;1400W input for a 900W output.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6318"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Mon, 24/09/2012 - 16:27.</div>
    <div class="content">
     <p>Some comments on fewyatt&#39;s description of digital meters:</p>
<p><em>1) I assume the meter samples the voltage and current waveforms thousands of times a second. Every sample pair is multiplied and that will result in some positive (import) results and some negative (export) depending on current direction, distortion&nbsp;and the power factor. These are summed to the accumulator/bucket which &ldquo;fills&rdquo; up with no integration time. When full/above a certain value (smallest unit by which the register is incremented ) it has clocked up one unit of energy which is either directly clocked to the display or added to previous values and when that sum reaches a set value it is displayed as a chargeable import.</em></p>
<p>Yes, that all sounds fine. Our meter only shows whole KwHours, so the displayed value is only updated after the internal register has been incremented 1000 times.</p>
<p><em>During burst firing or phase control many samples will be negative so the value in the bucket/ accumulator goes down when they are.&nbsp; If it goes below empty/zero by some value (a third property in Robert&rsquo;s terminology?)&nbsp; that will&nbsp; be seen as a reverse/export and ignored as far as energy counting is concerned and/or a reverse LED is turned on. Don&#39;t quite follow calypso_rae&#39;s&nbsp;diagram on the reverse light.</em></p>
<p>OK, here goes...&nbsp; After much time spent switching various loads on and off, my diagram simply shows how our meter operates.&nbsp;&nbsp; Let&#39;s say that a pulse is recorded when the meter has reached point X on the consumption scale.&nbsp; Providing that the consumption level does not drop below below X-3600, you are free to use all of that purchased energy. &nbsp; That will take you up to X+3600. &nbsp;</p>
<p>If the level temporarily drops below level X, the LED immediately comes on and stays on until X+3600 is reached (at which point the LED goes off, that being the next chargeable event).&nbsp; If, however, the level ever drops below X-3600 (i.e. we&#39;re exporting), the deal&#39;s off, and the next chargeable event will occur at a value somewhat less than X+3600.&nbsp; Surplus energy has been lost, and you have to buy it back again to replace it</p>
<p><em>All this has to be done in increments of whole cycles as the bucket/accumulator may be full half way through a cycle yet be not full by the end.</em></p>
<p>The bucket&#39;s level is only updated once per cycle because the triac&#39;s state only needs to be determined once per cycle.&nbsp; There&#39;s no reason why each individual energy contribution couldn&#39;t be added directly to the bucket, but it&#39;s more efficient to do it this way.&nbsp; Only the accumulated value then needs to be calibrated rather than every individual energy contribution.&nbsp; That&#39;s how it&#39;s done in calcVI() from which my code was lifted.</p>
<p><em>The trick for us is to keep the value in the bucket/accumulator above zero and below the overflow value. But not quite sure what happens it you hover around empty as the bucket/accumulator may discard results below zero so a constant import could be registered even for a real zero import/export.</em></p>
<p>The trick is to keep within the charge-free zone that the meter allows; my &#39;energy bucket&#39; is just a tool.&nbsp; If the level at the meter never drops by more than 3600J, you will never lose out.&nbsp; Thankfully, Mk2&#39;s operation is far more precise than this.&nbsp; All of the action happens within a range of just a couple of hundred Joules, so you should never be charged while surplus power is being diverted.&nbsp; The value of 1800J is entirely arbitrary; 500J would work just as well, as would 50000J.&nbsp; In the former case, the action would start to happen a bit sooner; in the latter case, there would be a lengthy delay while the virtual bucket slowly fills up and <em>real</em> power is leaked away to the grid.&nbsp;</p>
<p>Once the operating point has been reached, Mk2&#39;s behaviour is completely independent of what values have been used.&nbsp; Providing that the measurement system is linear, nothing else affects its operation.&nbsp; Because import and export are held in balance, absolute calibration of the system has no effect.&nbsp; Within reason, POWERCAL can be anything, but VOLTAGECAL needs to be a sensible value for correct operation of the trigger.</p>
<p>Discussions about the meter&#39;s behaviour are really helpful.&nbsp; Official descriptions seem hard to come by ...</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6328"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1704" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Keith Walker&#039;s picture" title="Keith Walker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1704" title="View user profile.">Keith Walker</a> on Mon, 24/09/2012 - 21:22.</div>
    <div class="content">
     <p>LED lights discussion</p>
<p>&nbsp;</p>
<p>&gt; Submitted by markcarter10 on Sat, 22/09/2012 - 01:08.</p>
<p>
	&gt; Don&rsquo;t agree with that. I find you can replace a 60 W conventional incandescent with about 8W of LED or 15W of CFL.&nbsp; That is<br />
	&gt; unless you are comparing the concentrated illumination of a LED against the omnidirectional output of a conventional<br />
	&gt; incandescent or fluorescent.</p>
<p>	&gt; I have decided that my response to this post is too far off topic and would welcome it to carry on else where!</p>
<p>	&gt; Any suggestions?</p>
<p>Hi Mark,</p>
<p>Feel free to continue this discussion on <a href="http://www.talkingsolar.co.uk" title="www.talkingsolar.co.uk">www.talkingsolar.co.uk</a></p>
<p>Cheers, Keith</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6334"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Tue, 25/09/2012 - 09:48.</div>
    <div class="content">
     <p><em>The bucket&#39;s level is only updated once per cycle because the triac&#39;s state only needs to be determined once per cycle.</em></p>
<p>To be clear my post of Monday was only about the meter so any references to the bucket were to a virtual bucket in the meter and not in the controller.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6343"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Tue, 25/09/2012 - 14:15.</div>
    <div class="content">
     <p>As per PM with calyso_rae a compromise on flicker may be to limit the output by software so the frequency is never in the 2-15hz range. It is not going to fully meet the spec unless a smaller immersion element is used but this gets over the worst of it.</p>
<p>2Hz is 0.25 sec on or off. As rarely a 50/50 cycle take the worst case so BOTH on and off have to exceed 0.25 or be less than 0.033.</p>
<p>15Hz is 0.033sec on or off.</p>
<p>Let us assume we aim for no less than 0.25 sec or more than 0.033sec on or off. E.g. 0.1sec is not wanted. 0.25 sec is 12.5cycles is 750J at 3kW. So if you set the bucket at 750J and, instead of delivering one cycle, you continue firing till its empty 0.25sec is achieved. Or not quite because changes in PV and house load can also fill or drain the bucket in that time so it will change from 0.25sec a bit. Conversely in the off periods you allow the bucket to rise again to 750J before turning it on again.</p>
<p>A similar concept may be able to handle the above 15Hz range although it is difficult as a 75% ratio would give 0.033 off and 0.1 on, which is not allowed.&nbsp; So you have to stretch 0.1sec to 0.25 giving 88% ratio so &ldquo;import&rdquo; too much. If you follow this up with 0.033 on and 0.033 off the average over the 2 burst cycles is about 81%. Without doing the maths it should be possible over 2-3 burst cycles to maintain the desired average mark space ratio. Question is will the meter interpret this as zero cost? With my bucket analogy for the meter maybe it can. With Robert&rsquo;s 200-300mS time window it will be marginal as 3 burst cycles may exceed the time window so not be truly averaged.</p>
<p>You may need three different macros depending on whether the unfiltered unit would naturally settle above 15Hz, below 2Hz or in-between.</p>
<p>The exact numbers like 2 and 15hz or whether both on and off have to achieve certain time periods depend on one&rsquo;s interpretation of the flicker spec. I am not able to make this interpretation with certainty. The spec is listed in voltage transitions per minute so it could be argued that 0.033 on and 0.25 off has a similar flicker severity as 0.14 on and 0.14 off even though 0.14 is in my illegal range above. So the above may be rubbish in detail but the general idea is there!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6347"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1522" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1522.jpg" alt="BBTV&#039;s picture" title="BBTV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1522" title="View user profile.">BBTV</a> on Tue, 25/09/2012 - 16:23.</div>
    <div class="content">
     <p><strong>Poor Mans Simulator.&nbsp; I have attached a simpler simulator for members who have not got access to a variac and all the equipment&nbsp; I used in my video. This is a good way for people who wish to test their projects or design new ones, as it can be used at any time day or night and is not affected by the weather.&nbsp; You can vary the simulated power by just adjusting the volume control on the amplifier. Do not use amplifiers that have bridge outputs.&nbsp; These are often used in cars to get over the low supply voltage.</strong></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6352"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1658" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1658.jpg" alt="RobP&#039;s picture" title="RobP&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1658" title="View user profile.">RobP</a> on Tue, 25/09/2012 - 18:57.</div>
    <div class="content">
     <p>BBTV - I think you have a slight slip in the junction box - live return from the AVO to extension ?</p>
<p>This project and you guys are amazing!</p>
<p>I haven&#39;t powered up an Arduino yet and the PV is being installed in October!&nbsp;&nbsp; - &nbsp;I just can&#39;t wait to get stuck in!</p>
<p>I have a slight problem - the loads (under-floor heating and immersion are some distance from the meter position and I have sub- main distribution&nbsp;to two consumer units).&nbsp; I guess that remote current monitoring could be used like emonTx but the control loop obviously needs to be tight.&nbsp;&nbsp; Has this kind of operation been ruled out?&nbsp; Or maybe no-one has got around to thinking about&nbsp;it yet?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6357"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 25/09/2012 - 20:20.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1658" title="View user profile.">RobP</a></p>
<p>The best place to extend is between the controller (Arduino, whatever) and the triac switch. Keep the opto-isolated trigger and the high voltage wiring with the triac, and bring back a twisted pair (bell-wire?) to the Arduino.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6358"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Tue, 25/09/2012 - 20:30.</div>
    <div class="content">
     <p>Writing an algorithm which avoids flicker at certain frequencies is surely the easy part.&nbsp; The hard bit is deciding what particular rates of switching need to be avoided.&nbsp; If the mains impedance is such that lights visibly &#39;flick&#39; when a 3kW load in the premises is switched on/off, I imagine that almost any rate of change could be regarded as an irritation.&nbsp;</p>
<p>Burst mode switching, in whole cycles, has lots of benefits including minimal EMC disturbance, fast response time, and the ability to work really well within the flexibility that&#39;s allowed by most meters.&nbsp; But there is a characteristic tendency for lights to flicker.&nbsp;</p>
<p>On the other hand, phase-angle control causes no flicker, but there are many other complications which then need to be taken into account.&nbsp; In the absence of a professional (&pound;&pound;&pound;) AC controller, the EMC requirements would no doubt be very challenging to meet when using just a triac or any similar low cost approach.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6359"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/956" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/956" title="View user profile.">calypso_rae</a> on Tue, 25/09/2012 - 20:40.</div>
    <div class="content">
     <p><strong>BBTV: Poor Mans Simulator.&nbsp;</strong></p>
<p>Sorry, Brian, I&#39;ve not grasped the point of this yet.&nbsp; Is it to simulate additional power from the PV or is it for some other purpose?&nbsp; Does the audio affect the outcome, rather like disco lighting ;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6361"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1658" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1658.jpg" alt="RobP&#039;s picture" title="RobP&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1658" title="View user profile.">RobP</a> on Tue, 25/09/2012 - 20:52.</div>
    <div class="content">
     <p>Robert</p>
<p>By &quot;this kind of operation&quot; I was really thinking wireless.....&nbsp; but I may have to do as you suggest.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6362"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Tue, 25/09/2012 - 22:12.</div>
    <div class="content">
     <p><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--></p>
<p><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--></p>
<p class="MsoNormal"><span style="font-size:10.0pt;font-family:Verdana;<br />
color:black">Is firing in half cycles legal as long as you use an equal number of positive and negative cycles spaced over time to make the long term DC component zero? Also is there a spec for amount of DC allowed over a short period as there will be an imbalance if measured over a short window?</span></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6364"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1522" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1522.jpg" alt="BBTV&#039;s picture" title="BBTV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1522" title="View user profile.">BBTV</a> on Tue, 25/09/2012 - 22:58.</div>
    <div class="content">
     <p><strong>Redrawn Poor Mans Simulator. Thank you RobP for pointing out the graphical error.&nbsp; The attached has now been corrected.</strong></p>
<p><strong>Sorry if I didn&#39;t make it clear Robin.&nbsp; This simulator is exactly the same as the previous one except it doesn&#39;t use a variac. If you look at the block diagram you will see that no audio is fed into the amp only a 50HZ waveform from the voltage reference transformer that fed the An2 pin on the Arduino.&nbsp; I did set this up and it does work.&nbsp; I only put this idea on the forum to help other members like myself test their own projects as it is far more accurate than just plugging in different wattage bulbs.</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6365"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Tue, 25/09/2012 - 23:09.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1658" title="View user profile.">RobP</a></p>
<p>I think you could use wireless (*) to transmit firing data, but unless the cable run is prohibitively complicated/ruins too much decoration, I&#39;d go for the simple hard-wired approach (KISS and all that).</p>
<p>(*) You only need 1 bit to say fire or don&#39;t fire next cycle, but there&#39;s a lot of message overhead and a limit to how much you can use the channel (I think something like 2% of the time), so research and sums need doing.<br />
	I wouldn&#39;t try to use wireless to transmit voltage and current readings to a controller that implements the control algorithm. That would certainly bust the protocol.</p>
<p><a href="http://openenergymonitor.org/emon/user/1088" title="View user profile.">fewyatt</a></p>
<p>I think the limits on harmonic generation are the killer for firing on half-cycles. You get even harmonics and the limits for those are significantly lower than the adjacent odd harmonic (e.g 1.08 A&nbsp; of 2nd harmonic compared to 2.3 A of 3rd).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6368"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1658" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1658.jpg" alt="RobP&#039;s picture" title="RobP&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1658" title="View user profile.">RobP</a> on Wed, 26/09/2012 - 07:09.</div>
    <div class="content">
     <p>Brian&rsquo;s ideas for simulation could prove very useful, particularly for one (such as I) that is considering the application of two loads like immersion and under-floor heating.</p>
<p>I am also interested in Robert&rsquo;s comments on wireless load control and shall probably look into this - once I get started.&nbsp; (But I have a LOT of catching up to do.)&nbsp; My loads are coming off separate consumer units 12m apart!</p>
<p>My biggest concern however is the safety and regulatory implications that might arise for anyone attempting to carry this project forward into a saleable product.&nbsp;&nbsp; The cost of Product Liability and Professional Indemnity Insurance would likely kill it dead in the water!</p>
<p>For those interested in triacs and snubbers,&nbsp; I found the Sharp S216S02 Zero Crossing SSR data sheet of interest (downloadable from Farnell).&nbsp; But I suspect this device (with heatsink even) might get too hot in this application.</p>
<p>In this regard, using a block like the SSR-40 DA seems a very sensible move.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6371"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/450" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/450" title="View user profile.">stuart</a> on Wed, 26/09/2012 - 10:53.</div>
    <div class="content">
     <p>Re: SSR-40 DA&nbsp;</p>
<p>These work fine, but don&#39;t expect them to comply with any european CE regulations, so could prove an issue should one explode in your house and your insurance company asks what it is.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6372"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1088" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="fewyatt&#039;s picture" title="fewyatt&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1088" title="View user profile.">fewyatt</a> on Wed, 26/09/2012 - 10:57.</div>
    <div class="content">
     <p><em>I think the limits on harmonic generation are the killer for firing on half-cycles. You get even harmonics and the limits for those are significantly lower than the adjacent odd harmonic (e.g 1.08 A&nbsp; of 2nd harmonic compared to 2.3 A of 3rd).</em></p>
<p>That might be true at middling mark space ratios but say you fire at &ndash;ve half cycle, 4.5 cycles gap, +ve half cycle,&nbsp; 4.5 cycles gap, repeated, to get a 10% mark space ratio. The fundamental frequency is 10Hz. Will it then produce significant even order harmonics as the first one of these is at 100Hz, assuming the benchmark is harmonics of 50Hz and not harmonics of the actual fundamental?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6374"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 26/09/2012 - 12:13.</div>
    <div class="content">
     <p>LTSpice to the rescue - like this?</p>
<p><img alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATUAAADzCAIAAABouxZOAAAgAElEQVR4nO2de1hTV7r/34CKOo89bZ3xh/VW67VWW8FrQVQEwQpYEFBQQERARISCWi+13hjbU1undWynp3bOtE7Pr3Pa2uG0v+n0+Eyn6pln+vRM2werU2s7OFySEG6KQPZO8LZ+f+wQws7eyd7JTrL2zvt93gf33ln5rvWutT5ZWUlM4CCKGq0v+WbP8//cd7zx2Tf1B35rPPh/m8+dO3fu3DkAkHhQ/UFr9Qeth9/D0EgAb4pA0je65Au65AuQ+D0kfg8rr9gitQHSG2GdAfJM3F/dxjbIa4V1JshphbxWyOmLrPZgjetBGtktwRj8oR84GdK4MEJaOySZIM0IaUZIMkFaOyS1Q5IJkvSQYIAEAyTpIckESSZIaoeENlhyUZhPDsshm81hVXdG7iUPHCYPHCaTjpBpx0jESyTiVRJ1nEQdJzGvkZjXyJLXRYMrEIThok+0HQHveUpGPOY1GyD2v2IR8RI/Jh0hk46QkXvJkLLbsOQiRHxx6Hcth37XAnY4Q3Jbh2w2h5R1he24O3IvsSM68QUy8QUy7Rh55JX+iHjVFo4XMTCCJ6Yds4XjKYcZt6px4Nhj0pEBpxxc9uCIG7mXhFXcCau4A1k9EH3xIMcnxP4NUpsg/UddUbuuqB02X+MipKwrtJwJrbgZtuMubL8TWkVCqwh3HLbjrv0id8BdHFJ5N6zKVhIjSEJXdjcIg0ucQ4Cb/1zoSm+GFPWGlphDi7p0+Qxs6IZ1DGzohvXdunzGdiX/ui1yOiD/Omzohsw22xPjnA7I6YAMPcRdgpi6Pj6TvoF19f2RZ4KCVo7VkLIuLkLLGbEIKesKLTH3R1EXBkbQxaaO0E0doRvbdRvbQnJbQ3JbYZ0JspohqxkyjbbI0NsivRHSGyG1AVIbdCl1sLIOVl7pf9En7hIs+ArCPwCIPA8r6yDpG0j/0RYOiNoptcWW7v6wX9x8TVfUPuAhIUijFSO4Yp2JHxyKTvj1EdjHoT04IOMuQdwlWHIRYr62xYKvIPI8RJ4H2z+xf9MlXxDj0x48JnVF7VDQanshN8+hxdxjBgaGv2LwOmPxr9qN124RmSr+VfvgdUZvTV5tH7xGDxl6SG0avLqh+LjJ2CHf5Pn6wdFfw4KvIOILiDwPMz6FqacBJr8rxKdBkE87kw5YmiBv4ONHlsNqHlRhf+oSbMGtFQGN4hOtdcY7209a81+yZP6cTdnPrtjLLHuaid/NLN7OLN7ORFcy0ZXMnDLznDLz7FLz9ELzhNzOuZsbLv6ju/hEqzImqU2Q2lB83HSzsa79xe2tz+SbKjObS1OMxSsMG5cZNsUbNiw2bFisz4nW50Q3rZnTtGZOU/rshpTpdcsnXEif23nlYvHz9RDxhY3Ph87A5HcBwj+AyPMQ83XIchufvDe+3Yq/ZgZ8umD4OQINJ6Q3EkKe/rX1lZreVz/uPfI7685fW8tft5b80lL8iqXgF5YNL1nyXrRk/yu75gibeph9Yh+zZCcTubV7Uo5+ds5fjR23lDFJbYDUBkJIx7GnO9955ca7r14/eaT92M6258vbDpW0Hihu3VfQsmdDy568lp3Zpqo1zeWpxpInDPlLGjIjLyRM+mPSbGPbTdv6OfNLPp+Q+L1t8eyTh3wGfB3D9TMo+Sx6xfL6H3pPfnrzhfd7975trTpp3faateSX1qKXLQW/sGw8Zsk9asl+nl1dzSbvZ+N2MQvKu6dv0P8s4QwhRBmT1AZIaiCEtB4ouvHe612nT17/9xc6ju9tf7Gq7ci21kMlLfuLWvcVtD6zsWVXbsuO7OaK1cbSZMOmuMbsBRdXTn9/zs8IIbDgK1jwFcz8Eh78so/PiC9gyUXbh4Qy9F6tnwGHBCMogxCS9Rz7wvu9xz7sPfCOtfINa+kJa+EvLHlHLdnPWTIOs2kH2aR9zMp9TPxuZslOJqrKPLese8ZGffiKPxFClDFJ0XN8tuzIuv7vL3SeOnbttQPtRyvbqktbny1s2Z1n2p5tqsho3pZmLEkylqw0bIo35C/R50Q1rJl7MXnG6fnhhBCYfxHmX7TxOfW0t3wSAOQTI+BBCFl9mN3zlnXfKWvlG9bNx635L1qyj1jSD7Epz7AJu5jY7UxUhXlhuXlumTmyzByx1Tx7S9fMAsO45M8c+XQ0cfuKDt+kj09TxeqO43s6TuxrP1pp+fp/CCGmqmzTtnRjSYqhMMGwIVa/PkqfvZAQ0vOnD5syI+rTZ19aNfPDqHFCfD7wGSz4CqIvwso6SG+ETKPz81sCwIUznDw+7U3vNN956yzjWV+f/a6XEFJbf1OswMufmO19ihH4SAt8EEJS9rPlr1ufesNaesJa8JJ1/XOWjIOWlGfYxF3s0iomqoKZu808e6t51hbzzC3MrC3Mo1u6Z24y2tASMnHLJ9+kj8/m0pT258vbjz7VVl1qL2wsSTEUJho2LNWvj2paM9d+vWn1rPrVj15KEeJz8rsAD3wG8y/C0jpYWQcZesg08tZPO5w8RO2nDp8YtvE5PLz64XknGvQ3OrtFGROLt84yhJCE3E+Gh1cPnfTay5+Y69tu229derCDo5erJfBTE4OOIIQk7GFKfmktPWEtetma94JlbbUldT+7cg8bt5OJqWTml5sf28o8soWZvpmZVszMKGFmbumeUWAYm/xnx/XT0cQtn3yTPj6NRQmth0raqktb9xe17MqzlzdsjDPkxuiz5vfDuWpaU+qMhrSZl1JmfPj4WEIILLwC8y/Cwxcc1k87n2lGGMinIJM8VkNzOyCnlUPUkZzUI0ZCyDvvX5Lb0ZxDaMI39tNhD75sv7Wz5zbyicELDq38lywFx6z5L1rWP2/JOGxZtY9N3M3G7mCiKpm55eZZW5npW5jJm5mHipkpm5mHS7of3mQYk8Tn025CCHFhQgjhmyT189myN79lX0HL3vyWHetN5Rl2IPU5Uf1wpkxuSnqoKWVKQ+rDf09++PePj7HxOe+KEJ+pTZDVDNkt9ue3Lp7TOl4Pze2AnA7Iah/IZxtkthFCGppuDHnsfe6YEPLWWUt9223u1vo2G2lnv7s5e+d1exlOzqeQ2VbzN+vD807wanEOt3XV1t8ihHCVzt55nXdcW39LzBmDziCELKoyZz/P5h615L5gyX7Okn6IXbWfTdzLxO5monYwc6uYmRXMtDJmUin74Bb2oRJmypbuKQXNo5M+t88ungkhxIUJIYRvkqKHFD0hRJ+7qGVHdsuu3Janc01V2c0V6catq3hrryFtmuHJSfrkB/UpDzU+OeW7lVNqFozu55NbQmd8CvDgl7DwCiQYIM0ImW2Q1W5fP53hFFRobocd0X5ystrtp8MefMV+XFzxcUblX7krkNU+7MFXFsadJIR8+/21kOQrjg6cCe8UstrDZv4HrxbncFvXxpdNhJBXT/5vSPKVl//I8o6LKz4eOvl12f//M9BzNJiDELKg3Jx2iF17xJL9nGXtEcvqQ2zKfjbxGTZ2Dxu9i5m7g5lZxU6tYB/axo7fyk4oZSeW9kwsaB71xAA+HU0IIS5MCCF8k7R2bhOrz15g2pbWUrW2ZXu2qXJtc/nq5tIU4+ZEO5zGtTON6VONqQ8ZU8YbUyY0rZp4+YmJNfNGEUIgpg6ifrAtoVNPD+Qzqx1yOnj7T/d85nfB+m5Y3w1Z1x3Iuc47tR8PWvpFaPw3kHX9rXO9ncxde6OHTn7dtYM9BC8KFnBRV2fPrRtdliFzP+au2487u29ydwz8/3vGkByEkMit5qRnmYxqds3PLZnVltWH2ZSD7Ipn2WX72EV72bm72VlPs1O3WyZWWsZWsGO3sWNLzWM3Nt+/4iwhRNCEEOLChBDCN0lrh7R2QkhTRqRxS5LpqQxT5ZqWpzJNFauby1J466cpc6pp9cTmVWObU8bqk8deThj7X3PuJ4RAdBNEN8C8KzDpMsz4FGDCRYipgwQDZNr4lPv5hNCNrC6fgXUMrGP6yVnfPXuvmRDy7d9buFPHm2B999nLtwkhm/Z/PWzsUcebeMV4py4uuiggWNfBD3sJIe+8f4n39+e/+OuwsUfFnDEEIqsn4EEIeaTYHL+bWXWAXX2YTa9m0w6zKYcsKw6wcQfYmP3svH3srL2WqbssE3dYxlRawsst4aXmURtM/5J4jhAiaEIIcWFCCOGbZHZB2g1CSOOTjxg2xTdvXWWqWG2qSG8uT+vHsiiGO7jLdLVkTGxJHWNKCTesDP9+2aiPI/6FEAKxLbC0EaIb4NG6Pj6jGyDBAJltkNMBG7plr58bWS50+f186vKZp97tJYQceen80Kn/xrvJ8XTQ8r853iRWjDt1cdFFAcG6Ju5gueMb3TeHh1ff6L7JnT4878SQRZ+JObsI7hEKIyBBCJlS0BOz3bziGWbVQZYIadY+y9Q91gd3WUZvt4yqsIzcYr43t2V4/FlCiJjJqkNs0kE28QC77AC76AA7/4DFbkII4ZtkdkFmFyGkIWmKPi/GuHlFc9mq5m2p/XCWLDMVLWop6H/9tjV1dEvyKEPiyCtL7v1o1nAbn7EtEN3Ux+ekyxDdAAltkNYOG7o94DOkqDekqFdX2Ksr7H/nY/b+m50MufAP8/Dw6sGLPod8hzdF8nshv/etv9whhCyMO/nUu7ZXbhbGnXQu1skMOOWCVwbye2sb79Y23hUrIFbX2+cshJBXT/7vsHFHXz5zmxDyzn9+Ozy8Wre2zbE6DPqDEDI+t2d+uXnZ08wTzzDCfD5rmbLXOn6X9f9st963zTKi2PyTbNOQ2HOEEDGTlfstK/azyw+wsQfZ6APsvAMWuwkhhG+S1QOZZkJI/fLxTVnzDQXLjJufsNfeXLLctDnWVBjdUjCvLW9WP6Ir72uOH/F99E8+emQIIQQSOyGhzYZo5Pk+PpNMkNUOG7p1+QzIVEjpXV3pTV3pTSi6Y6+1vuPuoQ+6ho07OnTqGzx0uVNdYe9v/18jIeT4Jz2nzrQSQtbmvx+6Rs8rlv8b2//Tsd9L0Kq26e63lzvk1hX74i2O1SGPfxpx6CYhJHH1b8Pm1TjWheE2IP92wIMQEp7d82iJOarSvGyXMJ8z9lkn77WO22X92XbrPWXWYZvMg9eYQpacJYRIN3EU3ySnF7KthJB/Lg1vTHtUnxNlKFjGnP+EENJcFNdcFNtcGGMqWNiSH9maM6MtezIhxPLfp1pX3GNcOuz7+YP/a1qIjc/ETohtgYVtMPNL7vltEyS1Q9Z1jk/e+un2ILTc9g0XIaV3Q0rvcq+1Dg+vHvbQL4fEnucuOt7keCVswUfDw6vDFp3hDganXnEuNjjpgvMdna8Mm3Zy2LSTcusatKZ+eHj1oPWmkNK7g9abhodXD1pT73gvDLcBRXcCHoSQn67pmVJgjthqfrzSHLODidnBRu9kHn+aWbCLidzNztxtmbLLMuFpy+gqy33l1p+UWAbnm0PSm3UxnxNClDHJvw05vYSQq4t+2pA0pTEjQr/+cUNejGFDjCEv2pj3uDFvQXNupGn9zJa1U1ozJrSmjm5deV9L/E8MMYMvzwmpmaojhEByj20JXdgGEV8APFBr51OXz4RuZGXzyX0PTXl/BHzGYARbEELuSb02dn3n9E03Hiu5MWdr19yyroiy7oht3Y9WdM94qnvKUz0TKnpGbzOPLDWPKDaH5feErLsBKU0QdYYQooiJfRG+suCef8SNvZo8/Z+rH6vPnNOwdm5DZkTDmojGNY82Zc4wpE8xpE4wJo82rhhpjBthWBzWsDDk28fg/Ulg45NDdGEbRJ7n88khGlpyM7Tk5pCy29y3iYVV3Qmrsn0nmGMMqbw7pPJu/1dFlQd1BHyOBnMYr9+Znlc/8sn6MZn1E9c1TclpnJrbMDmncVJe08S8pvF5TWM2GEflGUfmNt+z3jgsq3lQRrNuVRMsvzRh1X/b+fTSBIruQP5t47U73zwx/euFI79ePKY2fmJt4pTaxKm1CZMvJE76NmHixeXjv1s+5rtloy4vHfldzD2XHx/23bxB387W/c8M+GDRBEIIpJlF+eS+Yix0I8u95BNacnNIaS+f0qo7HJZicAZ8qDCCMDb/hr3wY9f0NX8ZseSP98X/+f7lf/rp8jP3x58ZufyzkQl/vnf55yOWnxu+/PzQ+L8MiT0XuuScbslfIPrzCavO1F65tvk3rPcmxW8yHJ/FbzDXL1/4JH76u4+MOD37vg8i7n8v8qfvzb7/dOTIDyNH/j7i3o9mj/j40eF/mDX0oxlDPpoe+odput9PhtOLJrT9vbb4RJcgnw12Prm/ofldofldoRvZ0BKzjVIuym5zEbr1lnNwSXJrbxBGwPdgwRyDi28Vv+n+FR2ejNfuFL/JDC6+5a3JGz2DN1ogvxdyegfnWYp/1SPbpON28YmuwU92D9h/DuAzRQ8Z+r6vQWi3fzNn/9cHOn6DZslN7jVbx4CiO30v6AVnBP5lzABFwHs+EJHTy70gBNlWWMdAVg+sZSHLAlkWWMtCphnSzLa/3IE90m5Aciek3bDdat9w8mIAn9ENkNQAMV9DXK0u/kLI8gshyy/YvwWQ+4JAXUodpDZAih5Sm2yR3th/zEWKHiPoIqEhGCOpAZJEco+rg6V1sLQOYvpi8Y+206V9wV1Z/CNE/QBRP8DCK7aP3XKfj49uEOIzrhbianVxtbr4C3ZKBYMroIu/oLOXd7hjcAbXe0EYumANH/Yq9/m+yPMAo2vD5v44qvT60Myrp//zDQwMjMAGIQRWdEH0jzDxPT6flRWFGBgYgYquziY3fMr9fB8KhVJKyCcKRa+QTxSKXiGfjrJ9Q6jIFedbxRzEfAQdeBel1KI++b9nna+rsWeRT0e5mEXSp5DcY9dTVyMKSM+6PlaFBPgcFrx8gncj69kMCQo+IRA961ldVKmfz5g6GPc28il33RN7aop88uX/npVehlohnzz54pkU8gkQuJ4V41wVQj6dRZwOAPlURH7uWellqBXy6SxFnmEhnwLyc89KL0OtkE9nIZ++EvIpVwJ8Do34Ibj5BHfMIJ+eyz89K5dhaoV8CsqzWWQ/Fbu74PRAPn3Ss27XalXIKz5rampqamocjx3FK+ZcWMyKSvlzZFU3i7wS9qwLec6nW+Scr9uPkU9q6gq8sGddyEM+pSyJztelHFMs/wyu6qaQAsKeFRPyiULRK0/4FHya6nrzKf0YhULZJcBnWMQVj/mUfsyd8g7AiXMUStVSks/xEvh0rFWsBWJleOWlp+F9niiU/xUwPl2jhXyiUBAQPnnVu+XQ9Xor8TmA9vgsLNTUBz80lg4olBFFfIL4euhinUQ+tSGNpQPa4NNvQj4pl8bSAeRTlrTHJyoYhHyiUPQK+USh6BXyqVZpbMOmsXQA95+yhHxSLo2lA8inLCGflEtj6QDyKUva4xMVDEI+USh65RM+hyKfKJQSUpLPxXUw7hTy6SdpbMOmsXSAwv0n8ulPaWxCaywdQD5lCfmkXBpLB5BPWXLOU6EvelLERpHvnaLHBCgzoaJbPLMIUj6Jw18vpNTYK9EWaiYiZSZASWMo4pP+91eU49N7G42ZKOWjMRMK+Iy5CuORT3+ZDNzeUDQRPfNx2q3Rk5EiA4R8upRjnsTpwFPRM/y0zWbZPtrm0+Mph3x6LCJy7CcTIT69aUmATUTS8aYxipiAIhkhn26kPT5FfDRm4o0PRX2LfLoR8qlOE298KOpb5NON7HkqNWjam0NUmnjjQ0vfetMOn/BJ8/ufvA7yYtxw/6mkiYb3n9Tw2f/7SMinz02o51OeD/IpKOTTMyli45WJw4QOfGNE7ugZn9SmI88H+ZQh7fGptE+A+VS6JRT1rTcWyKdn0tocQj5954N8upeP+fTMSRET53vRM6EVaYlnPhT1LfLpXmJ8Cl6RoMDPISo3bArs1mjoW/F7ebv/lNsOH/Hp5vft/S/kU2Zj/L30aZVPL9vho+8HQz59bkLlhNY8nzJ8kE8Z4vIU7BqV8qm0D5r4xAf5lCTkE03kmyjgg3xKknb5VConmjOix0S2j5cWyKda+ezbsGmETyr3n171rdj+U1ZTkE/kU4HGeG+CfArKN7+/EqltPqlAQqN8Up6ODB/6+LyqSj5dXJdTXO7w+24ieuCDJr7yQT4lCfkMkIlcH3rSUcYH+ZQk5DNAJnJ96ElHGR8vOwX5BBfXZRb3fiLKMHG5YVOkMX7l0/fpyDXx1sfF/lN6U5BPcHFdZnH/8+miMPLpIxOpPvTySe3/X0E+5RRGPj24qV+FhYXeD09w/X62lvh0V1hlfKrHRIYP8ilVyKd8H+TTg5sUtggiPpWayxqbQy4LSzehpyW+NpHhg3xKlfb49P3+U5aJMq+mUNK37grj/lNpIZ8+bQzy6SzkU4aQT582Bvl0Fr180vn+p8b4dFdYZXwq1xJfm8jwQT6lyjWfIGPoVDERlfJBPr3yQT6lCvkMnIkiPqrsW+RTqrTHp3L7Tyr4pGw77bow7j+VFmV8UoGEhJJq5JOKdAD5lCW/8Cndxg8mivjQw6f0xtDSt8inDCGfHhXz82KuFhOpPt43Bd//tAn59MLBbUl6uiWI+VxcR/Xv2yOfHhVDE899kE+pQj49LeYnk2Dbf0psCvJpE/IZWBPkU1DIp03IZ2BNtMenIsMTLHwqNZc1Noc0Brm/TCT5IJ8ypNA0VNFsluijoozoMZHkQzOf1L3/iXxSb+K2GD0mknyQTxlCPik3wf2noJBPqQWUtKFmDtFjgnwKCvmUWkByKTVR4Z+JKKWUBD4lVkWLCfIpQwqBhXx6WI26MkI+/S2JY4LhHNhvPuo6KQ7BwqeUPCXMRYnTlRITBXwUaasiLaHMRAEfaQ9/EhsjKuRTbhllTBx+EN63jVFoOtODFi18SquJSj5ramrsRNU4iVfA+S6ChhKqpWf4kU/KTZTyUaoxolKeT0cOQQQ85FMJPiWNPfLpSx+18clbJ0EcPCllHAtLqJyeHvfPHEI+PTZxW8yfkLtS8PCpxodV5NNHJm6LKWNC1+u3gttL580nrzAgnx4WQz49NnFbTP18ulgqxdhzRpR3AEKvJ3EqLCx03LMV9smhRcRlGSJ4L6crxF0ZKT5uyxCxLKT7OE4OFz7EZRnS/9Mprnzc1sXbUXtWxt0ISizjdgSl+CgyW2haP+U+pwUhwl2YS2iCIo+ISvm4MRk4V3zYEoU6RU2rliImigwQdXy6Rg75tN+KfFJuojU+HSXx+a3gFTFDCdWqiU+/mSCfATRRAZ/gcp1EPn1tgnwG0IRSPhUX8umxCfIZQBPk01Fq4hP3n5SbaHn/qbiQT49b4hc+JaajVHNUM0DIp6P8wKdiJl4Pv/SWKOTi0kYJPukZIEA+5UlynqoYfjlQiBami08Vmijl48oE+eSJnuFHPik3UcoH+VSAT1nDppQPLSYKdQpFjzg+NpHl46olyCdPquHT6w0bXXxKTkep5vicT0UGCPnkCfn0jYWb4sin8HXkkyfk0zcWboojn8LXkU+eVMOnP01w/ym/MO4/5Qj59MYE+QyUCfLJE/Lpq3Ygnx6YIJ88qYZP3H961xx1DBDyyRPyKaM08uniOvIpQ8indy1BPmWb0MfnVRinej5BmamoNROFXCjKyHcmSvkgn8KifPiRT8pNlPJBPoXl3Fny5yHtcwj5pJxP2xXk01nq4NO77Q11fHq9/6SOT+8yQj5FpQifSvmImigy/Aq0w1sbkD+blWqOCgYI+XQW8ukbC9E7IZ/Ip+b49LOJr/n02kebJkryGaOF9z8B+fRdO5BPuSbIp7OQT1+1QzmnYDFBPp2lDj7Vuf8UdcL9p+AV5NNZPuJTYci1wqcH6YiaeNcSz3yQTyWEfHrfGEXyQT5lmSCfgvLF8NM4h7xxUZZPCkw88/Hto7lP+AxDPjVoonk+Awi5872QT1ciIseyRO0cQj5pMwGxKYd8CkoFfHqxvVGAT487heL9ZwAHCJBP//OplI+wiSLDr0A7vHLyOB2lmkP7ACGfglKcT+UhRz6VaAvyiXwqZuKND+18BtrEGx8fmiCfgkI+3bggn/4xQT7FhHPIlQvyqbQJCGakKJ9XYdzbyKfvTAYc+3//Cb7kM+j3n4B8yhI9fAr7BGRCK8rnAI8A8amUj68GCPkUk8Acki9FTIR9PB1+rxqjUD60pKOcj68yQj7FRDufATHxHZ8BawtFjUE+ZUjB4dfSHFImH+W6RUt9i3zKE1VzSAkolDBRpB00dQtFfetsojCf49/WEp9US/72hmppLB1QKCPkU63S2ITWWDqAfMoS8km5NJYOIJ+ypD0+UcEg5BOFolfIJwpFr5BPtUpjGzaNpQMU7j8X1yGf/pPGJrTG0gHkU5aQT8qlsXQA+ZQl7fGJCgYhnygUvUI+USh6hXyqVRrbsGksHcD9pywhn5RLY+kAjXxe1dL3g9EujU1ojaUDyKcsaY9PVDAI+USh6BXyiULRK+RTrdLYhk1j6QDuP2UJ+aRcGksHaOZT/b9vrwJpbEJrLB2gk0/u+/uQTxRKESGfKBS9Qj5RKHqFfKpVGtuwaSwdwP2nLCGflEtj6QDNfIZFXEE+fS2NTWiNpQMU8unw+9mu+KxxkmCzHK87F3a+o5iV/VbPU0ShAqSA8em6TWIo2o+RT1QwiDo+XS+VUo7FbD1LD4UKoJBPtUpjGzaNpQOa2X863wTymUQ+1S6NpQMq4pNHowuuZPHp2HpnExRKG1KeT+nvfzq2QO4xCD0ZdlGRZ+lRK41lpLF0gJqMBvL5trd8OiOHfApKYxlpLB2gJiPZfLrgzW0Z5/ISnwNQ0lkKSmMZaSwdoCYjT9ZPt+ue9HUS+dSGNJYOUJORV89v/SZKOktBaSwjjaUD1GSEfAZGGstIY+kANRkhn4GRxjLSWDpATUYCfIZFUscnChWcGvD7K+NOIZ8oFEVCPlEoehV4PqV/SoFmiWWhruxcvAem0tTUnlGA+drUvPAAAAG/SURBVHTsC6r6RZbEslBRdq6nrPRjeqSNjJBPBSTWctVlp/bZ7Cy1Z0QpnzXicr57wHtTLp/UZue6Lukzm57UxKpWS0YCfPrz/U/POsv1sf8lNmyqy85FRSpNTdBfRYMV4M8n0NMR3sgXQxuQ7MQqdb6ultR813L/ZKRiPu2nAZnKjvLRMPs/O8G63F6kOTXnKtQ1WOrmU9DH//LRkAv6+1SuZ7PYdZpTc50R/YOlYj6ldJZ/5IssApKd69ksdp3m1FxnRP9gBf7z8TUO4l10fSx234BIrCXqys51+6U0j7bUBKtQ0WAFnk8UCiWmAXxS+/tIKFRwCvlEoegV8olC0SvkE4WiV2747OpswsDACGCI8klQKBQF4vN5/2ojh2jYk22CASu6MDAw/BQxdTDr834+RyT+eG9G/fAnfhgUe0UwYPFVgYipUyAWi0TMVZGQ5S9iIlapImnKMhEsLFperE982VeyBi4gLVFk6OVVKreFMkdtwQWY+RmMfwdg1O9h/Nsw/m0Yf6rvQHqcEgk5JuNkhiwfsRaKmstJZ9wp4ZDXV2ItlBOyWygr/D4llDGRGT4dTdkd/g6MPwVj3vz/BzdHr4qaf70AAAAASUVORK5CYII=" /></p>
<p>Here&#39;s what you get:</p>
<p><img alt="" src="data:image/png;base64,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" /></p>
<p>I&#39;m not sure what to make of that!&nbsp; One thing&#39;s a certainty - a filter to take out the 5.5 Hz component isn&#39;t going to be easy.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6375"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 26/09/2012 - 12:44.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1658" title="View user profile.">RobP</a></p>
<p><em>&quot;the Sharp S216S02 Zero Crossing SSR&nbsp; .... might get too hot in this application.&quot;</em></p>
<p>? ? ? It dissipates 14 W at&nbsp; 12 A (Fig.6 of the data sheet). It will only get too hot if you don&#39;t heatsink it properly - and it&#39;s not difficult to get rid of 14 W.&nbsp; Fig.2. gives you some ideas if you don&#39;t want to do the sums/can&#39;t get data on a heatsink.</p>
<p>N.B. In the absence of any mention of an I<sup>2</sup>t rating, you&#39;d better assume it won&#39;t survive blowing the fuse/tripping the breaker in the event of a fault in the load.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6376"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1522" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1522.jpg" alt="BBTV&#039;s picture" title="BBTV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1522" title="View user profile.">BBTV</a> on Wed, 26/09/2012 - 13:16.</div>
    <div class="content">
     <p>Rob P consumer unit problems.<span style="mso-spacerun:yes">&nbsp; </span>Rob you say that you have two consumer units 12 meters apart. I assume that they are both connected to a common point e.g. the supply meter.</p>
<p>If this is correct then hopefully you have the cables from your consumer units going via junction blocks to the supply meter as two single 25mm cables and two going from the meter to the 100A incoming suppliers fuse in which case you can fit the split core transformer to any one of the four cables. If you don&rsquo;t have a single entry cable but two 25mm cables going to a single connection on the meter then you will need to put the split core transformer around both cables. </p>
<p>This could prove to be a problem unless you can find a split core transformer that is big enough to fit over them. An alternative would be to have two transformers, one on each cable. The two transformers should then be connected to a summing amplifier (see attached schematic) on the Arduino interface pcb - note both CTs should be fitted so that they are in phase with each other.</p>
<p>You also mention connecting to your immersion and under-floor heating. <span style="mso-spacerun:yes">&nbsp;</span>I do not think it would be advisable to dump power into both these loads at the same time as this would exacerbate the flicker problem experienced by some members.</strong></p>
<p>I think you are quite right to have concerns about the safety and regulatory implications.<span style="mso-spacerun:yes">&nbsp; </span><span style="mso-spacerun:yes">&nbsp;</span>This is why I have not gone down the discrete component triac route, instead I am using the SSR-40 DA unit that will require a heat sink and suitable enclosure.<span style="mso-spacerun:yes">&nbsp; </span>To comply with current regulations this should be installed by a registered electrician.<span style="mso-spacerun:yes">&nbsp; </span>If this is not done, then if problems occur, there could be serious implications.</strong></p>
<p>When the SSR is connected, it is just a simple matter of running a bell wire (observe polarity) back to the Arduino interface pcb - (see attached schematic and my video at <span style="mso-spacerun:yes">&nbsp;</span>http://www.youtube.com/watch?v=QeU6lzl4rVs. </strong></p>
<p>I have found that though the specification for SSR-40 DA states that the input voltage range for the SSR is 3v to 32v, that 10V gives a more stable operation.</strong></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6377"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1163" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1163.gif" alt="markcarter10&#039;s picture" title="markcarter10&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1163" title="View user profile.">markcarter10</a> on Wed, 26/09/2012 - 14:40.</div>
    <div class="content">
     <p>BBTV</p>
<p>Thanks for your post... most interesting to see what you have been doing</p>
<p>What sketch are you running with your circuit. You have 2&nbsp; CT&#39;s.. Robins MKII only uses one!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Ah! I can see that you are summing the two together! for RobP</p>
<p>&nbsp;</p>
<p>regards</p>
<p>&nbsp;</p>
<p>Mark</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6380"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 26/09/2012 - 16:21.</div>
    <div class="content">
     <p><a href="http://openenergymonitor.org/emon/user/1522" title="View user profile.">BBTV</a></p>
<p>Why do you use <strong>bold face</strong>? It hurts my eyes! (It doesn&#39;t really hurt, it&#39;s just a lot harder to read).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6381"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1658" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1658.jpg" alt="RobP&#039;s picture" title="RobP&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1658" title="View user profile.">RobP</a> on Wed, 26/09/2012 - 18:58.</div>
    <div class="content">
     <p>He&#39;s probably doing it for me!&nbsp; As it is, I generally spend a large portion of the day looking through a magnifying glass!</p>
<p>The consumer units are each fed via 16mm<sup>2</sup> SWA&#39;s from the MDU that contains&nbsp;a&nbsp;63A Switch Fuse&nbsp;on each.&nbsp; At the front end on 25mm<sup>2</sup>&nbsp;is a 100mA &#39;S&#39; type&nbsp;RCD&nbsp; (time delayed) acting as&nbsp;Main Switch.</p>
<p>One is not able to do much these days to domestic&nbsp;fixed installations without up-to-date&nbsp;C&amp;G qualifications and notifying Building Control.</p>
<p>A solution (at least for the immersion heater) could however be applied by most householders, I think,&nbsp;if it is inserted in the immersion heater flexible next to the tank.&nbsp; Mine is going inside a well earthed&nbsp;Aluminium Box.&nbsp;</p>
<p>If I decide to do anything about the under-floor heating then I shall have to either notify Building Control or call upon a friendly registered electrician - since I no longer am.</p>
<p>The lack of I<sup>2</sup>t data for that Sharp S216S02 Zero Crossing SSR had not escaped my attention either.&nbsp; Sometimes they only give you the good bits and what is not said is more important!&nbsp;&nbsp; If you think it will do in a fire resistant enclosure,&nbsp;it is cheap enough it can be sacrificed!!&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6382"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1522" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1522.jpg" alt="BBTV&#039;s picture" title="BBTV&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1522" title="View user profile.">BBTV</a> on Wed, 26/09/2012 - 19:15.</div>
    <div class="content">
     <p><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--></p>
<p><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--></p>
<p class="MsoNormal">Mark Carter regarding the 2 CTs on the schematic.<span style="mso-spacerun:yes">&nbsp; </span>I only use one CT with Robins MK2 PV controller sketch and my interface circuit.</p>
<p class="MsoNormal">The reason I uploaded the schematic showing two CTs was for RobP problem where <span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;</span>he has two consumer units 12 meters apart. Without seeing the installation it is difficult to assess the best approach.<span style="mso-spacerun:yes">&nbsp; </span>In most cases one CT is all that would be required.<span style="mso-spacerun:yes">&nbsp; </span>But there are some situations where two CTs would be more practical. <span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;</span></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6383"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/924" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/924" title="View user profile.">Robert Wall</a> on Wed, 26/09/2012 - 23:09.</div>
    <div class="content">
     <p><em>&quot;If you think it will do in a fire resistant enclosure,&nbsp;it is cheap enough it can be sacrificed!! </em>&quot;</p>
<p>The worst you will get is a few bits of hot shrapnel flying around. But most likely there&#39;ll be either an open or short circuit between pins 1 &amp; 2. Just make sure any metal close by is either related to the live side or earthed.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6384"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1165" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1165" title="View user profile.">richmc</a> on Thu, 27/09/2012 - 08:41.</div>
    <div class="content">
     <p><em>These work fine, but don&#39;t expect them to comply with any European CE regulations, so could prove an issue should one explode in your house and your insurance company asks what it is.&quot;</em></p>
<p>I think you will find they are CE compliment, that&#39;s why they have CE marked on them.</p>
<p>The point is the whole device needs to be CE compliant, and it never will be.</p>
<p>I used to work on equipment that had 40+ amps running through SSRs and never had one &quot;explode&quot; they occasionally went phutt and smelled a bit odd. If you really want to play safe, use a triac &amp; opto couple at least if they explode they aren&#39;t encapsulated in hard epoxy, wait a second, that&#39;s where we started from.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6385"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="/emon/user/1658" title="View user profile."><img src="http://openenergymonitor.org/emon/sites/default/files/imagecache/avatar/pictures/picture-1658.jpg" alt="RobP&#039;s picture" title="RobP&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Mk2 PV Controller, with triac</h3>

    <div class="submitted">Submitted by <a href="/emon/user/1658" title="View user profile.">RobP</a> on Thu, 27/09/2012 - 07:29.</div>
    <div class="content">
     <p>Thank you&nbsp;Brian for&nbsp;your extra effort with the 2x CT&#39;s.</p>
<p>Sorry I forgot to say it earlier.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<div class="item-list"><ul class="pager"><li class="pager-current first">1</li>
<li class="pager-item"><a href="/emon/node/841?page=1" title="Go to page 2" class="active">2</a></li>
<li class="pager-item"><a href="/emon/node/841?page=2" title="Go to page 3" class="active">3</a></li>
<li class="pager-next"><a href="/emon/node/841?page=1" title="Go to next page" class="active">next ›</a></li>
<li class="pager-last last"><a href="/emon/node/841?page=2" title="Go to last page" class="active">last »</a></li>
</ul></div><form action="/emon/node/841"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-dNEtX3BwZ2RJTPdqA2pIKLqbzKeVTY2kcq_Y8CoJfk0" value="form-dNEtX3BwZ2RJTPdqA2pIKLqbzKeVTY2kcq_Y8CoJfk0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org">https://community.openenergymonitor.org</a></p>
   
</div>

<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
