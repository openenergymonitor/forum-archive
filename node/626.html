<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/626 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:45:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Reading IrDA data from an Elster A100C electricity meter | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Reading IrDA data from an Elster A100C electricity meter</h3>
        <span class="submitted">Submitted by <a href="../user/851.html" title="View user profile.">daveb</a> on Tue, 24/04/2012 - 11:55</span>
        <div class="content"><p>Hi</p>
<p>I&#39;ve recently installed solar panels and wanted to read the data from the generation meter, an Elster A100C. This project uses an Arduino sending data via USB serial to a server. I hope it is of use.</p>
<p><a href="http://www.rotwang.co.uk/projects/meter.html" title="http://www.rotwang.co.uk/projects/meter.html">http://www.rotwang.co.uk/projects/meter.html</a></p>
<p>Dave</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11379.html" class="topic-previous" title="Go to previous forum topic">‹ Can&#039;t connect to database</a>
              <a href="11365.html" class="topic-next" title="Go to next forum topic">Micro Inverter Momentary Dropouts ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-4022"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 25/04/2012 - 10:31.</div>
    <div class="content">
     <p>Thankyou for sharing this daveb, I have added a link from the community builds section</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4830"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/998.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="DaveLloyd&#039;s picture" title="DaveLloyd&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/998.html" title="View user profile.">DaveLloyd</a> on Sat, 16/06/2012 - 16:17.</div>
    <div class="content">
     <p>I ported the code to run on an emonTX:</p>
<p>Network ID is set to 11 as I am using another emonTX&nbsp;for live energy monitoring.</p>
<p>Dave</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div>
	/*</div>
<div>
	&nbsp;EmonTx Pulse example combined with Arduino code to read data from an Elster A100C electricity meter.</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;An example sketch for the emontx module for</div>
<div>
	&nbsp;CT only electricity monitoring.</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;Part of the openenergymonitor.org project</div>
<div>
	&nbsp;Licence: GNU GPL V3</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;Authors: Glyn Hudson, Trystan Lea</div>
<div>
	&nbsp;Builds upon JeeLabs RF12 library and Arduino</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;Arduino code to read data from an Elster A100C electricity meter.</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;Copyright (C) 2012 Dave Berkeley solar@rotwang.co.uk</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;This program is free software; you can redistribute it and/or modify</div>
<div>
	&nbsp;it under the terms of the GNU General Public License as published by</div>
<div>
	&nbsp;the Free Software Foundation; either version 2 of the License, or</div>
<div>
	&nbsp;(at your option) any later version.</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;This program is distributed in the hope that it will be useful, but</div>
<div>
	&nbsp;WITHOUT ANY WARRANTY; without even the implied warranty of</div>
<div>
	&nbsp;MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. &nbsp;See the GNU</div>
<div>
	&nbsp;General Public License for more details.</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;You should have received a copy of the GNU General Public License</div>
<div>
	&nbsp;along with this program; if not, write to the Free Software</div>
<div>
	&nbsp;Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307</div>
<div>
	&nbsp;USA</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;Modified for emonTX by Dave Lloyd</div>
<div>
	&nbsp;Added temperature monitor&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	*/</div>
<div>
	&nbsp;</div>
<div>
	#define freq RF12_868MHZ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Frequency of RF12B module can be RF12_433MHZ, RF12_868MHZ or RF12_915MHZ. You should use the one matching the module you have.433MHZ, RF12_868MHZ or RF12_915MHZ. You should use the one matching the module you have.</div>
<div>
	const int nodeID = 11; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// emonTx RFM12B node ID</div>
<div>
	const int networkGroup = 210; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // emonTx RFM12B wireless network group - needs to be same as emonBase and emonGLCD needs to be same as emonBase and emonGLCD</div>
<div>
	&nbsp;</div>
<div>
	const int UNO = 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Set to 0 if your not using the UNO bootloader (i.e using Duemilanove) - All Atmega&#39;s shipped from OpenEnergyMonitor come with Arduino Uno bootloader</div>
<div>
	#include &lt;avr/wdt.h&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// the UNO bootloader&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	#include &lt;OneWire.h&gt;<span class="Apple-tab-span" style="white-space:pre"> </span> &nbsp; &nbsp;// http://www.pjrc.com/teensy/td_libs_OneWire.html</div>
<div>
	#include &lt;DallasTemperature.h&gt; &nbsp; &nbsp; &nbsp;// <a href="http://download.milesburton.com/Arduino/MaximTemperature/" title="http://download.milesburton.com/Arduino/MaximTemperature/">http://download.milesburton.com/Arduino/MaximTemperature/</a> (3.7.2 Beta needed for Arduino 1.0)</div>
<div>
	&nbsp;</div>
<div>
	#include &lt;JeeLib.h&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Download JeeLib: http://github.com/jcw/jeelib</div>
<div>
	ISR(WDT_vect) { Sleepy::watchdogEvent(); }</div>
<div>
	&nbsp;&nbsp;</div>
<div>
	typedef struct { unsigned long meter; int temperature;} PayloadTX;</div>
<div>
	PayloadTX emontx; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // neat way of packaging data for RF comms</div>
<div>
	&nbsp;</div>
<div>
	// set pin numbers:</div>
<div>
	const int ledPin = 9; &nbsp; &nbsp;// remapped</div>
<div>
	const int intPin = 3; &nbsp; &nbsp;// remapped</div>
<div>
	#define ONE_WIRE_BUS 4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// temperature sensor connection - hard wired&nbsp;</div>
<div>
	#define BIT_PERIOD 416 // us</div>
<div>
	#define BIT_MARGIN 10 // us</div>
<div>
	&nbsp;</div>
<div>
	//--------------------------------------------------------------------------------------------</div>
<div>
	// DS18B20 temperature setup - onboard sensor&nbsp;</div>
<div>
	//--------------------------------------------------------------------------------------------</div>
<div>
	OneWire oneWire(ONE_WIRE_BUS);</div>
<div>
	DallasTemperature sensors(&amp;oneWire);</div>
<div>
	double temp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; /*</div>
<div>
	&nbsp; &nbsp;* &nbsp;Buffer</div>
<div>
	&nbsp; &nbsp;*/</div>
<div>
	&nbsp;</div>
<div>
	#define BUFF_SIZE 128</div>
<div>
	&nbsp;</div>
<div>
	struct Buffer</div>
<div>
	{</div>
<div>
	&nbsp; int data[BUFF_SIZE];</div>
<div>
	&nbsp; int in;</div>
<div>
	&nbsp; int out;</div>
<div>
	};</div>
<div>
	&nbsp;</div>
<div>
	static void buff_init(struct Buffer* b)</div>
<div>
	{</div>
<div>
	&nbsp; b-&gt;in = b-&gt;out = 0;</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	static int buff_full(struct Buffer* b)</div>
<div>
	{</div>
<div>
	&nbsp; int next = b-&gt;in + 1;</div>
<div>
	&nbsp; if (next &gt;= BUFF_SIZE)</div>
<div>
	&nbsp; &nbsp; next = 0;</div>
<div>
	&nbsp; return next == b-&gt;out;</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	static int buff_add(struct Buffer* b, int d)</div>
<div>
	{</div>
<div>
	&nbsp; int next = b-&gt;in + 1;</div>
<div>
	&nbsp; if (next &gt;= BUFF_SIZE)</div>
<div>
	&nbsp; &nbsp; next = 0;</div>
<div>
	&nbsp; if (next == b-&gt;out)</div>
<div>
	&nbsp; &nbsp; return -1; // overfow error</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; b-&gt;data[b-&gt;in] = d;</div>
<div>
	&nbsp; b-&gt;in = next; &nbsp;</div>
<div>
	&nbsp; return 0; &nbsp;</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	static int buff_get(struct Buffer* b, int* d)</div>
<div>
	{</div>
<div>
	&nbsp; if (b-&gt;in == b-&gt;out)</div>
<div>
	&nbsp; &nbsp; return -1;</div>
<div>
	&nbsp; int next = b-&gt;out + 1;</div>
<div>
	&nbsp; if (next &gt;= BUFF_SIZE)</div>
<div>
	&nbsp; &nbsp; next = 0;</div>
<div>
	&nbsp; *d = b-&gt;data[b-&gt;out];</div>
<div>
	&nbsp; b-&gt;out = next;</div>
<div>
	&nbsp; return 0; &nbsp;</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; /*</div>
<div>
	&nbsp; &nbsp;* &nbsp;Called on every InfraRed pulse, ie. every &#39;1&#39; bit.</div>
<div>
	&nbsp; &nbsp;*/</div>
<div>
	&nbsp;</div>
<div>
	typedef unsigned long stamp;</div>
<div>
	&nbsp;</div>
<div>
	static stamp last_us;</div>
<div>
	&nbsp;</div>
<div>
	#define BITS(t) (((t) + (BIT_PERIOD/2)) / BIT_PERIOD)</div>
<div>
	&nbsp;</div>
<div>
	static struct Buffer bits;</div>
<div>
	&nbsp;</div>
<div>
	void on_change(void)</div>
<div>
	{</div>
<div>
	&nbsp; // &nbsp;push the number of bit periods since the last interrupt to a buffer.</div>
<div>
	&nbsp; const stamp us = micros();</div>
<div>
	&nbsp; const int diff = us - last_us;</div>
<div>
	&nbsp; last_us = us;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; const int bit_periods = BITS(diff);</div>
<div>
	&nbsp; buff_add(&amp; bits, bit_periods);</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; /*</div>
<div>
	&nbsp; &nbsp;* &nbsp;Decode bit stream</div>
<div>
	&nbsp; &nbsp;*/</div>
<div>
	&nbsp;</div>
<div>
	static struct Buffer bytes;</div>
<div>
	&nbsp;</div>
<div>
	static int bit_data;</div>
<div>
	static int bit_index;</div>
<div>
	&nbsp;</div>
<div>
	int add_bit(int state)</div>
<div>
	{</div>
<div>
	&nbsp; &nbsp; bit_data &gt;&gt;= 1;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; if (state)</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; bit_data += 0x200;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; if (bit_data)</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; bit_index += 1;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; if (bit_index &lt; 10)</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; return 0;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; if (bit_data &amp; 1) // start bit</div>
<div>
	&nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; if (!state) // stop bit</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const int d = (bit_data &gt;&gt; 1) &amp; 0xFF;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // high represents &#39;0&#39;, so invert the bits</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buff_add(&amp; bytes, (d ^ 0xFF));</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bit_data = bit_index = 0;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 1;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; }</div>
<div>
	&nbsp; &nbsp; }</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; // &nbsp;bad frame</div>
<div>
	&nbsp; &nbsp; bit_data = bit_index = 0;</div>
<div>
	&nbsp; &nbsp; return 0;</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	static void on_timeout()</div>
<div>
	{</div>
<div>
	&nbsp; // too long since last bits count</div>
<div>
	&nbsp;&nbsp;</div>
<div>
	&nbsp; if (bit_index)</div>
<div>
	&nbsp; &nbsp; while (bit_data) // flush with trailing &#39;0&#39; bits</div>
<div>
	&nbsp; &nbsp; &nbsp; add_bit(0); &nbsp;</div>
<div>
	&nbsp; bit_data = bit_index = 0;</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	static void on_bits(int bits)</div>
<div>
	{</div>
<div>
	&nbsp; // called on each bits count.</div>
<div>
	&nbsp; // the bit periods represent a &#39;1&#39; followed by N &#39;0&#39;s.</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; if (bits &lt; 1)</div>
<div>
	&nbsp; {</div>
<div>
	&nbsp; &nbsp; on_timeout();</div>
<div>
	&nbsp; &nbsp; return;</div>
<div>
	&nbsp; }</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; // the elapsed bit periods since last interrupt</div>
<div>
	&nbsp; // represents a &#39;1&#39; followed by 0 or more &#39;0&#39;s. &nbsp;</div>
<div>
	&nbsp; add_bit(1);</div>
<div>
	&nbsp; for (; bits &gt; 1; bits--)</div>
<div>
	&nbsp; &nbsp; add_bit(0);</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; /*</div>
<div>
	&nbsp; &nbsp;*</div>
<div>
	&nbsp; &nbsp;*/</div>
<div>
	&nbsp; &nbsp;</div>
<div>
	static int decode_bit_stream(void)</div>
<div>
	{</div>
<div>
	&nbsp; // look for a pause in the bit stream</div>
<div>
	&nbsp; const stamp us = micros();</div>
<div>
	&nbsp; const int diff = us - last_us;</div>
<div>
	&nbsp; if (BITS(diff) &gt; 20)</div>
<div>
	&nbsp; &nbsp; on_timeout();</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; // read the bit stream &nbsp;</div>
<div>
	&nbsp; int bit_count;</div>
<div>
	&nbsp; if (buff_get(&amp; bits, &amp; bit_count) &lt; 0)</div>
<div>
	&nbsp; &nbsp; return -1;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; on_bits(bit_count);</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; // read the byte stream decoded above</div>
<div>
	&nbsp; int byte_data;</div>
<div>
	&nbsp; if (buff_get(&amp; bytes, &amp; byte_data) &lt; 0)</div>
<div>
	&nbsp; &nbsp; return -1;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; return byte_data;</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; /*</div>
<div>
	&nbsp; &nbsp;*</div>
<div>
	&nbsp; &nbsp;*/</div>
<div>
	&nbsp;</div>
<div>
	unsigned long bcdtol(const unsigned char* data, int bytes)</div>
<div>
	{</div>
<div>
	&nbsp; &nbsp; unsigned long result = 0;</div>
<div>
	&nbsp; &nbsp; for (int i = 0; &nbsp;i &lt; bytes; i++)</div>
<div>
	&nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; const unsigned char digit = *data++;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; result *= 100;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; result += 10 * (digit &gt;&gt; 4);</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; result += digit &amp; 0xF;</div>
<div>
	&nbsp; &nbsp; }</div>
<div>
	&nbsp; &nbsp; return result;</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	typedef void (*on_reading)(unsigned long reading);</div>
<div>
	&nbsp;</div>
<div>
	class ElsterA100C</div>
<div>
	{</div>
<div>
	&nbsp; &nbsp; // see Appendix B of the product manual</div>
<div>
	&nbsp; &nbsp; struct info {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; char product[12]; // eg. &quot;Elster A100C...&quot;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; char firmware[9];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char mfg_serial[3];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char config_serial[2];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; char utility_serial[16];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char meter_definition[3];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char rate_1_import_kWh[5]; // the reading we are interested in!</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char rate_1_reserved[5];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char rate_1_reverse_kWh[5];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char rate_2_import_kWh[5];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char rate_2_reserved_kWh[5];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char rate_2_reverse_kWh[5];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char reserved_01[1];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char status;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char error;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char anti_creep[3];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char rate_1_time[3];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char rate_2_time[3];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char power_up[3];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char power_fail[2];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char watchdog;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char reverse_warning;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char reserved_02[10];</div>
<div>
	&nbsp; &nbsp; };</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; unsigned char data[sizeof(info)];</div>
<div>
	&nbsp; &nbsp; unsigned int idx;</div>
<div>
	&nbsp; &nbsp; int reading;</div>
<div>
	&nbsp; &nbsp; unsigned char last_4[4];</div>
<div>
	&nbsp; &nbsp; on_reading handler;</div>
<div>
	public:</div>
<div>
	&nbsp; &nbsp; ElsterA100C(on_reading cb)</div>
<div>
	&nbsp; &nbsp; : idx(0), reading(0), handler(cb)</div>
<div>
	&nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; }</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; int good_cs(unsigned char cs, unsigned char check)</div>
<div>
	&nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; // note : should be &#39;cs == check&#39;, but I&#39;m seeing</div>
<div>
	&nbsp; &nbsp; &nbsp; // systematic 1-bit errors which I can&#39;t track down. &nbsp; &nbsp; &nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; /*</div>
<div>
	&nbsp; &nbsp; &nbsp; Serial.print(&quot;bcc=&quot;);</div>
<div>
	&nbsp; &nbsp; &nbsp; Serial.print(check, HEX);</div>
<div>
	&nbsp; &nbsp; &nbsp; Serial.print(&quot; cs=&quot;);</div>
<div>
	&nbsp; &nbsp; &nbsp; Serial.print(cs, HEX);</div>
<div>
	&nbsp; &nbsp; &nbsp; Serial.print(&quot; xor=&quot;);</div>
<div>
	&nbsp; &nbsp; &nbsp; Serial.print(cs ^ check, HEX);</div>
<div>
	&nbsp; &nbsp; &nbsp; Serial.print(&quot;\r\n&quot;);</div>
<div>
	&nbsp; &nbsp; &nbsp; */</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; int bits = 0;</div>
<div>
	&nbsp; &nbsp; &nbsp; int delta = cs ^ check;</div>
<div>
	&nbsp; &nbsp; &nbsp; for (; delta; delta &gt;&gt;= 1)</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; if (delta &amp; 0x01)</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bits += 1;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; return bits &lt; 2;</div>
<div>
	&nbsp; &nbsp; }</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; void good_packet()</div>
<div>
	&nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; struct info* info = (struct info*) data; &nbsp; &nbsp; &nbsp; &nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; handler(bcdtol(info-&gt;rate_1_import_kWh, 5));</div>
<div>
	&nbsp; &nbsp; }</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; unsigned char bcc(unsigned char cs, const unsigned char* data, int count)</div>
<div>
	&nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; for (int i = 0; i &lt; count; ++i)</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cs += *data++;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; return cs;</div>
<div>
	&nbsp; &nbsp; }</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; void on_data(unsigned char c)</div>
<div>
	&nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; // match the packet header</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; const unsigned char match[] = { 0x01, 0x00, sizeof(info), 0x02 };</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; if (!reading)</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // keep a log of the last 4 chars</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; last_4[0] = last_4[1];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; last_4[1] = last_4[2];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; last_4[2] = last_4[3];</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; last_4[3] = c;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (memcmp(match, last_4, sizeof(match)) == 0)</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; idx = 0;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reading = 1;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; }</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; if (idx &lt; sizeof(info))</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data[idx++] = c;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; }</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; const unsigned char etx = 0x03;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; if (idx == sizeof(info))</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (c != etx)</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;etx=%02X\n&quot;, c);</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reading = idx = 0;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; idx++;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; unsigned char cs = 0x00; // why 0x40?</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; cs = bcc(cs, match, sizeof(match));</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; cs = bcc(cs, data, sizeof(data));</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; cs = bcc(cs, &amp; etx, 1);</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; if (good_cs(cs, c))</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; good_packet();</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; reading = 0;</div>
<div>
	&nbsp; &nbsp; }</div>
<div>
	};</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; /*</div>
<div>
	&nbsp; &nbsp;*</div>
<div>
	&nbsp; &nbsp;*/</div>
<div>
	&nbsp;</div>
<div>
	void meter_reading(unsigned long reading)</div>
<div>
	{</div>
<div>
	&nbsp; Serial.print(reading);</div>
<div>
	&nbsp; Serial.print(&quot;, &quot;);</div>
<div>
	&nbsp; Serial.print(temp);</div>
<div>
	&nbsp; Serial.print(&quot;\r\n&quot;);</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; if (emontx.meter != reading)</div>
<div>
	&nbsp; {</div>
<div>
	&nbsp; &nbsp; emontx.meter = reading;</div>
<div>
	&nbsp; &nbsp; sensors.requestTemperatures();</div>
<div>
	&nbsp; &nbsp; temp = (sensors.getTempCByIndex(0));</div>
<div>
	&nbsp; &nbsp; emontx.temperature = (int) (temp * 100);&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; &nbsp; delay (50);</div>
<div>
	&nbsp; &nbsp; send_rf_data(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // *SEND RF DATA* - see emontx_lib</div>
<div>
	&nbsp; &nbsp; delay (50);</div>
<div>
	&nbsp; }&nbsp;</div>
<div>
	&nbsp; if (UNO) wdt_reset();</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; static int state = 0;</div>
<div>
	&nbsp; digitalWrite(ledPin, state = !state);</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	ElsterA100C meter(meter_reading);</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	void setup()&nbsp;</div>
<div>
	{</div>
<div>
	&nbsp; buff_init(&amp; bits);</div>
<div>
	&nbsp; buff_init(&amp; bytes);</div>
<div>
	&nbsp;&nbsp;</div>
<div>
	&nbsp; Serial.begin(9600);</div>
<div>
	&nbsp; Serial.println(&quot;Dave&#39;s emonTX meter reading&quot;);</div>
<div>
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</div>
<div>
	&nbsp; rf12_initialize(nodeID, freq, networkGroup); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// initialize RF</div>
<div>
	&nbsp; rf12_sleep(RF12_SLEEP);</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; pinMode(ledPin, OUTPUT);</div>
<div>
	&nbsp; pinMode(intPin, INPUT);</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; sensors.begin(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // start up the DS18B20 temp sensor onboard &nbsp;</div>
<div>
	&nbsp; sensors.requestTemperatures();</div>
<div>
	&nbsp; temp = (sensors.getTempCByIndex(0)); &nbsp; &nbsp; // get inital temperture reading</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; attachInterrupt(1, on_change, RISING); &nbsp; // remap</div>
<div>
	&nbsp;</div>
<div>
	&nbsp;if (UNO) wdt_enable(WDTO_8S); &nbsp;</div>
<div>
	}</div>
<div>
	&nbsp;</div>
<div>
	void loop()&nbsp;</div>
<div>
	{&nbsp;</div>
<div>
	&nbsp; int byte_data = decode_bit_stream();</div>
<div>
	&nbsp; if (byte_data == -1)</div>
<div>
	&nbsp; &nbsp; return;</div>
<div>
	&nbsp;</div>
<div>
	&nbsp; meter.on_data(byte_data);</div>
<div>
	// &nbsp;emontx_sleep(10); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // sleep or delay in seconds - see emontx_lib</div>
<div>
	// &nbsp;digitalWrite(LEDpin, HIGH); delay(2); digitalWrite(LEDpin, LOW); &nbsp; &nbsp; &nbsp;// flash LED</div>
<div>
	}</div>
<div>
	&nbsp;</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8843"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2484.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2484.jpg" alt="jack_kelly&#039;s picture" title="jack_kelly&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/2484.html" title="View user profile.">jack_kelly</a> on Fri, 04/01/2013 - 14:26.</div>
    <div class="content">
     <p>Does anyone know if it&#39;s possible to read kvarh measurements (i.e. <em>reactive</em> power) over IrDA from an Elster A102C?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8896"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sat, 05/01/2013 - 19:43.</div>
    <div class="content">
     <p>Dont know the answer im afraid, I think the only items that can be read are the ones described in the class:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; char product[12]; // eg. &quot;Elster A100C...&quot;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char firmware[9];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char mfg_serial[3];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char config_serial[2];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char utility_serial[16];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char meter_definition[3];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char rate_1_import_kWh[5]; // the reading we are interested in!<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char rate_1_reserved[5];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char rate_1_reverse_kWh[5];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char rate_2_import_kWh[5];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char rate_2_reserved_kWh[5];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char rate_2_reverse_kWh[5];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char reserved_01[1];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char status;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char error;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char anti_creep[3];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char rate_1_time[3];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char rate_2_time[3];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char power_up[3];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char power_fail[2];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char watchdog;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char reverse_warning;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char reserved_02[10];</p>
<p>I will send Dave Berkeley&nbsp;who wrote the library an email to ask.</p>
<p><a href="http://www.rotwang.co.uk/projects/projects.html" title="http://www.rotwang.co.uk/projects/projects.html">http://www.rotwang.co.uk/projects/projects.html</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8904"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/851.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="daveb&#039;s picture" title="daveb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/851.html" title="View user profile.">daveb</a> on Sun, 06/01/2013 - 13:05.</div>
    <div class="content">
     <p>Hi Kevin</p>
<p>Trystan is right, the data from the meter is described by the class above, so no analysis of reactive power I&#39;m afraid.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8963"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2484.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2484.jpg" alt="jack_kelly&#039;s picture" title="jack_kelly&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/2484.html" title="View user profile.">jack_kelly</a> on Tue, 08/01/2013 - 09:55.</div>
    <div class="content">
     <p>Many thanks for the reply.&nbsp; And thanks for emailing Dave, Trystan!</p>
<p>Just to confirm: are you guys talking about the Elster A100C rather than the A102C?&nbsp; The <a href="http://www.elstermetering.com/en/949.html">Elster website suggests</a> that the A102C does measure reactive power, although it doesn&#39;t specify whether that measurement is exposed on the IrDA port.&nbsp; I&#39;ve sent several emails to Elster but they haven&#39;t replied.</p>
<p>Have you guys tinkered with an A102C or A220?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8980"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2484.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2484.jpg" alt="jack_kelly&#039;s picture" title="jack_kelly&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/2484.html" title="View user profile.">jack_kelly</a> on Tue, 08/01/2013 - 15:09.</div>
    <div class="content">
     <p>Sorry, one more question: does anyone know where I can get hold of Elster&#39;s documentation for the output of their IrDA ports?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8984"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/998.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="DaveLloyd&#039;s picture" title="DaveLloyd&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/998.html" title="View user profile.">DaveLloyd</a> on Tue, 08/01/2013 - 15:41.</div>
    <div class="content">
     <p>Found this on Google <a href="http://www.meterspec.com/143.pdf" title="www.meterspec.com/143.pdf">www.meterspec.com/143.pdf</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8986"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2484.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2484.jpg" alt="jack_kelly&#039;s picture" title="jack_kelly&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/2484.html" title="View user profile.">jack_kelly</a> on Tue, 08/01/2013 - 16:10.</div>
    <div class="content">
     <p>Brilliant, thank you!&nbsp; (I clearly wasn&#39;t trying hard enough when I googled for the same info!)</p>
<p>I&#39;ve also spoken to a very nice man at Elster.</p>
<p>The conclusion seems to be that yes, the A102C does spit out both kWh and kvarh readings over the IrDA port.&nbsp; Hurray!&nbsp; I&#39;ll almost certainly buy an A102C over the next few days and I&#39;ll report back.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9005"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2484.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2484.jpg" alt="jack_kelly&#039;s picture" title="jack_kelly&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/2484.html" title="View user profile.">jack_kelly</a> on Wed, 09/01/2013 - 12:18.</div>
    <div class="content">
     <p>Humph.&nbsp; Turns out the A102C isn&#39;t available in the UK.&nbsp; The AS230 might be a possibility though...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21285"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="giorgio&#039;s picture" title="giorgio&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/6298.html" title="View user profile.">giorgio</a> on Thu, 08/05/2014 - 15:37.</div>
    <div class="content">
     <p>Hello,</p>
<p>I am new in arduino! I want to ask if this</p>
<p><a href="http://www.ebay.com/itm/Duemilanove-USB-Board-2009-ATMega328P-PU-microcontroller-Compatible-with-Arduino-/290870277556?ssPageName=ADME:X:RTQ:US:1123" title="http://www.ebay.com/itm/Duemilanove-USB-Board-2009-ATMega328P-PU-microcontroller-Compatible-with-Arduino-/290870277556?ssPageName=ADME:X:RTQ:US:1123">http://www.ebay.com/itm/Duemilanove-USB-Board-2009-ATMega328P-PU-microco...</a></p>
<p>is the only thing I need in order to program the Arduino?</p>
<p>&nbsp;</p>
<p>Also does the above code mentioned above, about reading from the Elster, really work?</p>
<p>&nbsp;</p>
<p>Thnak you</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21288"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="giorgio&#039;s picture" title="giorgio&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/6298.html" title="View user profile.">giorgio</a> on Thu, 08/05/2014 - 16:24.</div>
    <div class="content">
     <p>Hello, does the code work?</p>
<p>Also inside the article it says;</p>
<p>&quot;I came across this article by Richard Gregory who built his own meter reader back in 2009.&quot;. Because the page is down, has anyone this article ?</p>
<p>&nbsp;</p>
<p>Thanx</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21291"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 08/05/2014 - 19:43.</div>
    <div class="content">
     <p>I have not seen any reports saying that the code does not work, so I assume that it does.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21302"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="giorgio&#039;s picture" title="giorgio&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/6298.html" title="View user profile.">giorgio</a> on Fri, 09/05/2014 - 17:05.</div>
    <div class="content">
     <p>I just plug the Elster A100C to the electricity and it starts displaying results? Don&#39;t I need to program the device or send commands to it?</p>
<p>&nbsp;</p>
<p>Thank you</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21304"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 09/05/2014 - 18:47.</div>
    <div class="content">
     <p>All I know is what you too can read. I think it is very unlikely that you will be allowed to change anything inside the meter. I do not have an Elster meter, so I cannot confirm anything about the meter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28892"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7879.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="FroniusUser&#039;s picture" title="FroniusUser&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/7879.html" title="View user profile.">FroniusUser</a> on Sat, 21/03/2015 - 22:23.</div>
    <div class="content">
     <p>I have a Fronius Symo 4.5-3-M inverter, now I need a way to monitor grid meter consumption, my solar tarrif&nbsp;meter which is to be installed will not have monitoring/rs485 support, I have been researching ideas for IrDa monitoring, I like the solutions that you have available, just asking about RS485/ModBus support to hook into a Fronius Inverter</p>
<p>&nbsp;</p>
<p>Is there anyway to get the data from Raspberry Pi/Ardunio to export via RS485 so I can monitor it via the Fronius Solar Web?</p>
<p><a href="https://www.solarweb.com/" title="https://www.solarweb.com/">https://www.solarweb.com/</a></p>
<p>An example is a Fronius Smart Meter with RS485 direct connect to Fronius Symo Smart Meter providing this type of data:</p>
<p>&nbsp;</p>
<p><a href="https://www.solarweb.com/Home/System/20bb600e-019b-4e03-9df3-a0a900cda689" title="https://www.solarweb.com/Home/System/20bb600e-019b-4e03-9df3-a0a900cda689">https://www.solarweb.com/Home/System/20bb600e-019b-4e03-9df3-a0a900cda689</a></p>
<p>&nbsp;</p>
<p>Here the feed in tarrif, energy consumption are all monitored by the Fronius Smart meter via RS485 to the Fronius Symo DataManager 2.0</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29386"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3594.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3594.jpg" alt="nothing clever&#039;s picture" title="nothing clever&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/3594.html" title="View user profile.">nothing clever</a> on Sat, 04/04/2015 - 15:13.</div>
    <div class="content">
     <p>Anyone with a 3D printer going down the A100C route may be interested in this.</p>
<p><a href="http://www.thingiverse.com/thing:139775" title="http://www.thingiverse.com/thing:139775">http://www.thingiverse.com/thing:139775</a></p>
<p>It works OK, but if bright sunlight gets on the IrDa stuff readings all go haywire. I had to add a bit of card on the back of the bracket to stop the sunlight.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34821"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3398.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="E-Mike&#039;s picture" title="E-Mike&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/3398.html" title="View user profile.">E-Mike</a> on Sat, 10/10/2015 - 21:44.</div>
    <div class="content">
     <p>When using this code, in the serial monitor i get the correct reading from the meter. When it submits to emoncms it has three inputs, one of which is temperature and the other two are:-</p>
<p>629 (never changes)</p>
<p>-4248 (counts up toward zero when the meter increments a unit)</p>
<p>i have tried editing the code at&nbsp;https://github.com/openenergymonitor/ElsterMeterReader to send the data to my nanoderf and it does the exact same thing.</p>
<p>&nbsp;</p>
<p>Am i missing something?</p>
<p>Thanks&nbsp;</p>
<p>Mike</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34835"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3398.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="E-Mike&#039;s picture" title="E-Mike&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/3398.html" title="View user profile.">E-Mike</a> on Sun, 11/10/2015 - 19:44.</div>
    <div class="content">
     <p>Here is a screenshot, really odd... i&#39;ve checked and checked the code and cannot see how this is being calculated...</p>
<p>&nbsp;</p>
<p>if anyone can help that would be great.</p>
<p>&nbsp;</p>
<p>Mike</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34839"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/851.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="daveb&#039;s picture" title="daveb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/851.html" title="View user profile.">daveb</a> on Sun, 11/10/2015 - 20:24.</div>
    <div class="content">
     <p>Hi Mike</p>
<p>I&#39;ve not used my library with OEM so I can&#39;t really tell. It sounds like a signed / unsigned error, or perhaps a data alignment problem or both. I always used to print the relevant numbers in hex and see if they have common parts.</p>
<p>Hope this helps.</p>
<p>Dave</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34872"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 12/10/2015 - 16:29.</div>
    <div class="content">
     <p>How are you submitting to emoncms? and which one? What format are you using? There's nothing in daveb's code that tells us the whole story, so you need to reveal that if anyone is to help you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34873"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3398.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="E-Mike&#039;s picture" title="E-Mike&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/3398.html" title="View user profile.">E-Mike</a> on Mon, 12/10/2015 - 17:29.</div>
    <div class="content">
     <p>I am using the multinode&nbsp;sketch from:</p>
<p><a href="https://github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_multinode" title="https://github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_multinode">https://github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_multi...</a></p>
<p>I can&#39;t see anything there which would affect it, I have added a line to the data received from a node to print it to the serial console, and the data there is wrong. I would assume by this the data is being sent from the emonTx&nbsp;wrong.</p>
<p>NanodeRF serial console :</p>
<p>Data Rcvd: 16699<br />
Data Rcvd: 630<br />
Data Rcvd: 1787<br />
Data sent: /api/post.json?apikey=&lt;api key&gt;&amp;node=11&amp;csv=16699,630,1787<br />
OK recieved</p>
<p>​The emontx seems to be printing the correct reading to the emontx serial console but not sending the correct info via rf as per my image above.</p>
<p>Thanks</p>
<p>Mike</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34875"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 12/10/2015 - 18:09.</div>
    <div class="content">
     <p>Yes we read your post the first time, there's no need to post twice.</p>
<p>So what about the emonTx sketch?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34876"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3398.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="E-Mike&#039;s picture" title="E-Mike&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/3398.html" title="View user profile.">E-Mike</a> on Mon, 12/10/2015 - 18:49.</div>
    <div class="content">
     <p>The emonTx sketch is the same as the one posted by DaveLloyd in this thread.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34877"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 12/10/2015 - 19:03.</div>
    <div class="content">
     <p>I think what you are seeing is&nbsp;a 4 byte Long (eg 41294188, the fist entry on your screenshot serial output)&nbsp;being passed as 2 signed integers.( eg <strong>630</strong>*256*256 + <strong>6508</strong> =&nbsp;41294188)</p>
<p>You need to change the nanode&nbsp;sketch to not assume all received packets consist of signed ints only at&nbsp;<a href="https://github.com/openenergymonitor/NanodeRF/blob/master/NanodeRF_multinode/NanodeRF_multinode.ino#L177">https://github.com/openenergymonitor/NanodeRF/blob/master/NanodeRF_multinode/NanodeRF_multinode.ino#L177</a>&nbsp;(that was the old standard)&nbsp;or you could just multiply input 2 by 65536 and add it to input 1 in emoncms to get the &quot;correct&quot; value.</p>
<p>emonHub&nbsp;handles Longs no problem, if you were using emonhub&nbsp;(for the benefit of other users) you could just define the node as</p>
<blockquote><p>datacodes&nbsp;= L, h<br />
scales = 1, 0.01</p>
</blockquote>
<p>which would present the data exactly as seen in your screen print a long and an integer scaled by 2 decimal places&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34879"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 12/10/2015 - 19:16.</div>
    <div class="content">
     <p>Not "I think" - but definitely. The data transmitted is an unsigned long (meter), plus an int (temperature).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34888"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3398.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="E-Mike&#039;s picture" title="E-Mike&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading IrDA data from an Elster A100C electricity meter</h3>

    <div class="submitted">Submitted by <a href="../user/3398.html" title="View user profile.">E-Mike</a> on Mon, 12/10/2015 - 22:56.</div>
    <div class="content">
     <p>thanks guys, been really helpful and knowledgeable.</p>
<p>&nbsp;</p>
<p>I used your idea of multiplying the input in emoncms, which worked well. But i wasn&#39;t happy with that. But i don&#39;t have the know&nbsp;how&nbsp;to convert the Tx or Rx from a unsigned long to ints or vice a versa so i have dug out an RPi and put the latest emonHub image on it.</p>
<p>So far it&#39;s working well, the reason i went for NanodeRF over the raspberry pi, was becuase i wanted to set it up and forget it and was worried about the SD card writes. I&#39;ll give this a go now though seeing as the Nanode is pretty much discontinued now.</p>
<p>Many Thanks</p>
<p>Mike</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/626"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-G75T1zWtveNfPbW10glyXTkighBK5D0XgHY7e2f-JK0" value="form-G75T1zWtveNfPbW10glyXTkighBK5D0XgHY7e2f-JK0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
