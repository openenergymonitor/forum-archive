<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11791 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:49:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emonhub Adding other nodes | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emonhub Adding other nodes</h3>
        <span class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Fri, 11/12/2015 - 18:18</span>
        <div class="content"><p>hallo , i hope you can help me , i had a emonbase+tx+th configured and just purchased 2 extra emonTH (node 25/26) , before adding to the emonhub i updated the firmware with the :<br />
emonTH_DHT22_dual_DS18B20.ino</p>
<p>i replaced the node ID in the INO file with the ID on the emonTH and from the ide&nbsp; serial monitor&nbsp; seems all is ok (except some asci numbers somewhere , like there was some boud rate problem...) , the readings are ok .</p>
<p>But i am really not able to see the new nodes in the EMONHUB , what i am missing? surely is something stupid , but could someone help me ?</p>
<p>this is what i done to add the nodes :</p>
<p>1)in the EmonHub Config Editor i added some text for the new nodes, like :</p>
<p>[[25]]<br />
&nbsp;&nbsp;&nbsp; nodename = emonTH_5<br />
&nbsp;&nbsp;&nbsp; firmware =emonTH_DHT22_dual_DS18B20.ino<br />
&nbsp;&nbsp;&nbsp; hardware = emonTH_(Node_ID_Switch_DIP1:ON_DIP2:ON)<br />
&nbsp;&nbsp;&nbsp; [[[rx]]]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; names = temperature, external temperature, humidity, battery<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; datacode = h<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scales = 0.1,0.1,0.1,0.1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; units = C,C,%,V</p>
<p>2) now are in the node list, but always inactive ...<br />
Please help .</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11849.html" class="topic-previous" title="Go to previous forum topic">‹ &quot;My Electric&quot; app shows wrong day of week</a>
              <a href="11834.html" class="topic-next" title="Go to next forum topic">Display node online/offline status on dashboard ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-36940"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 11/12/2015 - 23:34.</div>
    <div class="content">
     <p>It looks like that sketch was written for the older &quot;RFu&quot; based emonTH&nbsp;where as any recently purchased emonTH&#39;s will be the later v1.5 &quot;non-RFu&quot; type, You will need to make changes to that sketch or use a later one.</p>
<p>Additionally if the sketch was running the payload is defined as battery&nbsp;humidity&nbsp;internalTemp&nbsp;externalTemp1&nbsp;externalTemp2 so either the sketch or emonhub would of needed editing so they match too.</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36957"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Sun, 13/12/2015 - 18:39.</div>
    <div class="content">
     <p>thanks pb66 . but there is something i do not understand :<br />
this sketch works perfectly &quot;emonTH_DHT22_DS18B20_RFM69CW&quot;<br />
and inside is written &quot;RFu JeeLib&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;https://github.com/openenergymonitor/RFu_jeelib&nbsp;&nbsp; //library to work with CISECO RFu328 module&quot;<br />
this is the non working sketch &quot;emonTH_DHT22_dual_DS18B20&quot; and inside are written the same stuff,&nbsp; both says are using the same RFu328 module ...<br />
So what is wrong ? can you please be more clear so i will try to solve the problem.<br />
thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36968"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 13/12/2015 - 22:51.</div>
    <div class="content">
     <p>Look inside your emonTH. Which version do you have? If there are 3 layers of pcb, and the middle layer has written on it "CISECO" and "RF&mu;", then you have a V1.4. ("V1.4" is written on the underneath side of the pcb, you must take it out of the case to see.) If there are two layers, the main pcb and the radio module, then you have a V1.5.</p>
<p>Also look at the radio module (the top layer of pcb on both versions) and say which version of that you have. Pictures to help you: <a href="https://learn.openenergymonitor.org/?redirect=which-radio-module" title="http://openenergymonitor.org/emon/buildingblocks/which-radio-module">http://openenergymonitor.org/emon/buildingblocks/which-radio-module</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36971"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 14/12/2015 - 02:19.</div>
    <div class="content">
     <p>Can you post the serial debug at startup from the emonTH in question so we can see exactly what code you are running. The emonTH&#39;s should have been shipped with V2.6 the latest code with pulse counting support&nbsp;<a href="https://github.com/openenergymonitor/emonTH/blob/master/emonTH_DHT22_DS18B20_RFM69CW_Pulse/emonTH_DHT22_DS18B20_RFM69CW_Pulse.ino">emonTH_DHT22_DS18B20_RFM69CW_Pulse</a>. This sketch requires the following decoder, just replace nodeID with your node ID:</p>
<p>[[23]]<br />
&nbsp; &nbsp; nodename = emonTH_5<br />
&nbsp; &nbsp; firmware = V2.x_emonTH_DHT22_DS18B20_RFM69CW_Pulse<br />
&nbsp; &nbsp; hardware = emonTH_(Node_ID_Switch_DIP1:OFF_DIP2:OFF)<br />
&nbsp; &nbsp; [[[rx]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp;names = temperature, external temperature, humidity, battery, pulseCount<br />
&nbsp; &nbsp; &nbsp; &nbsp;datacodes = h,h,h,h,L<br />
&nbsp; &nbsp; &nbsp; &nbsp;scales = 0.1,0.1,0.1,0.1,1<br />
&nbsp; &nbsp; &nbsp; &nbsp;units = C,C,%,V,p</p>
<p><a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/conf/emonhub.conf">https://github.com/openenergymonitor/emonhub/blob/emon-pi/conf/emonhub.conf</a></p>
<p>If you&#39;re running emonPi, or a recent emonBase&nbsp;SD card, you should be able to hit update to pull in support for the latest emonTH firmware:&nbsp;<a href="https://guide.openenergymonitor.org/#update">http://openenergymonitor.org/emon/modules/emonpi#update</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36987"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Mon, 14/12/2015 - 13:15.</div>
    <div class="content">
     <p>hallo dear, what you mean with &quot;Can you post the serial debug at startup from the emonTH &quot;, let me understand what you need so i can post.<br />
BTW i have 1.5 version cause i received 3 days ago the emonth.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36988"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Mon, 14/12/2015 - 13:18.</div>
    <div class="content">
     <p>I also would like to know is the text &quot;firmware=&quot; in the decoder in the emonhub.conf need to be the exact name of the firmware i used, or if is just for reference, cause sometimes i find with .ino extensions and sometimes not , so i suppose this is not to be cause of my problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36990"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 14/12/2015 - 14:09.</div>
    <div class="content">
     <p>No&nbsp;firmware = is just a note to remind you. The important part of the node decoder is the names, datacode(s), scales and units.&nbsp;</p>
<p>Firmware debug is the serial print at the beginning of a sketch as viewed in a serial window. I saw that you mentioned that you had re-uploaded your own firmware when you changed node ID. I just want to check exactly what&nbsp;version you have, so I can ensure the emonhub.conf node decoder is correct.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36999"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 14/12/2015 - 16:31.</div>
    <div class="content">
     <p>Paolo - It looks like the note about the RFu library in&nbsp;&nbsp;<a href="https://github.com/openenergymonitor/emonTH/blob/master/emonTH_DHT22_DS18B20_RFM69CW/emonTH_DHT22_DS18B20_RFM69CW.ino#L20">emonTH_DHT22_DS18B20_RFM69CW</a>&nbsp;has been left over from it&#39;s v1.5 update, I see no reference to include RFu_JeeLib, where as there is in&nbsp;<a href="https://github.com/openenergymonitor/emonTH/blob/master/emonTH_DHT22_dual_DS18B20/emonTH_DHT22_dual_DS18B20.ino#L38">emonTH_DHT22_dual_DS18B20</a>, bothe were originally written for the &quot;RFu&quot; emonTH but the &quot;dual&quot; doesn&#39;t seem to have been ported to the v1.5 emonTH yet.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37002"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Mon, 14/12/2015 - 17:08.</div>
    <div class="content">
     <p>Dear , you can see below :<br />
with the sketch below :<br />
emonTH_DHT22_DS18B20_RFM69CW_Pulse.ino<br />
i am getting these from the serial :</p>
<p><em>00<br />
OpenEnergyMonitor.org<br />
emonTH - Firmware V2.60<br />
RFM69CW Init&gt;<br />
Node: 26 Freq: 433Mhz Network: 210<br />
No DHT22<br />
Detected 2 DS18B20<br />
DS18B20 Temperature: 18.80C, Battery voltage: 1.20V, Pulse count: 1n</em></p>
<p>and node is found correctly</p>
<p>
with the dual sketch<br />
emonTH_DHT22_dual_DS18B20.ino</p>
<p><em>I am getting :<br />
emonTH bo (some ascii texts) OpenEnergyMonitor.org<br />
Node: 26 Freq: 433Mhz Network: 210<br />
(some ascii texts)to find DHT22 temp &amp; humidity sensor... trying<br />
Unable to find DHT22 temp &amp; humidity sensor... giving up<br />
(some ascii texts)DS18B20 External 1<br />
Found DS18B20 External 2<br />
emonTH payload:<br />
&nbsp; Battery voltage: 0.70V<br />
&nbsp; External sensor 1: 18.80C<br />
&nbsp; External sensor 2: 19.10C<br />
Internal DHT22 sensor: not present</em></p>
<p>and node is not found</p>
<p>-----------------------------------</p>
<p>with the multiple sketch</p>
<p>emonTH_DHT22_multiple_DS18B20.ino</p>
<p>I am getting(only at 4800 baud) :</p>
<p><em>emo<br />
Node: 20 Freq: 433Mhz Network: 210<br />
(some ascii texts)to find DHT22 temp &amp; humidity sensor... trying<br />
Unable to find DHT22 temp &amp; humidity sensor... giving up<br />
Locating devices...Found 2 devices.<br />
Parasite power is: OFF<br />
Found device 0 with address: 28FFC662741503E1<br />
Setting resolution to 12<br />
Resolution actually set to: 12<br />
Found device 1 with address: 28FF56AB731502D8<br />
Setting resolution to 12<br />
Reso (ascii characters)actually set to: 12<br />
&nbsp;rf packet length calculated at: 10<br />
DONE<br />
emonTH payload:<br />
19.10&nbsp; Battery voltage: 0.70V</em></p>
<p>And node is not found<br />
---------------------------<br />
this is my node 25 conf in emonhub:<br />
[[25]]<br />
nodename = emonTH_7<br />
firmware = emonTH_DHT22_DS18B20_RFM69CW<br />
hardware = emonTH_(Node_ID_Switch_DIP1:OFF_DIP2:ON)<br />
[[[rx]]]<br />
names = temperature, external temperature, humidity, battery<br />
datacode = h<br />
scales = 0.1,0.1,0.1,0.1<br />
units = C,C,%,V</p>
<p>you can see then from the not working sketches i am getting some glitches ascii codes in the serial monitor, maybe this is the reason of the problem? i tried of course different baud rates.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37004"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 14/12/2015 - 17:22.</div>
    <div class="content">
     <p>Maybe try a new set of batteries or an external power source first, are you using the programmer supplied by the shop? those voltages look very low at 0.7 and 1.2. I don&#39;t know for sure but would expect ~2.6 to be as low as you could go, certainly during debugging &gt;3v would be&nbsp;advised (at least).</p>
<p>The minimum/standard baud is 9600, I don&#39;t think 4800 has ever been used by OEM.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37005"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Mon, 14/12/2015 - 17:28.</div>
    <div class="content">
     <p>hi dear, i am using the programmer got in the shop, and the battery problem is only temporary, is also not working at 2.7V , now is 0.7v cause i put a wrong battery , i will replace this evening, but the errors does are not cause of this , i am sure .<br />
regarding the baud , with the multisensor sketch if i put 9600 baud i will get only ascii text ... if 4800 seems works ...<br />
all the other sketches i tried ar working goot at 9600<br />
Paolo</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37010"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Mon, 14/12/2015 - 20:16.</div>
    <div class="content">
     <p>Just to avoid misunderstanding I replaced the batteries and now the voltage is 3,1... But still not working</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37011"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 14/12/2015 - 20:41.</div>
    <div class="content">
     <p>With the correct power supply what is the &quot;debug&quot; serial output? What baud can you now connect at?</p>
<p>Obviously the batteries won&#39;t change the fact the &quot;dual&quot; sketch is currently&nbsp;only for the &quot;RFu&quot; emonTH not your later type so it is not expected to work without some code&nbsp;changes. The other sketch has been changed for use with v1.5 emonTH&nbsp;so you should now be able to use baud 9600 and get good values from it.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37012"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Mon, 14/12/2015 - 21:02.</div>
    <div class="content">
     <p>hi pb66, exactly same baud problem only on the multi sketch, but not with the &quot;dual&quot; , but is no problem i would like to try ust the &quot;dual&quot; to start work , and i am sorry but dont understand where is the problem&nbsp; with my 1.5 emonth, can you give me some suggestion on what to revise ?&nbsp; i really do not understand what is the problem...<br />
i do not expect that anybody redo the sketch for me, i just need some help please.....<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37013"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Mon, 14/12/2015 - 21:22.</div>
    <div class="content">
     <p>in the &quot;Multi &quot; sketch i found &quot;Serial.begin(4800)&quot; as default, so i changed it to 9600</p>
<p>and on both &quot;multi&quot; and &quot;dual&quot; i found :<br />
&quot; #include &lt;RFu_JeeLib.h&gt;&nbsp; &quot;</p>
<p>white the &quot;pulse&quot; working sketch have :<br />
&quot; #include &lt;JeeLib.h&gt;&nbsp; &quot;</p>
<p>ll the other codes related to the RF comunication seems same</p>
<p>Could be this the problem ?</p>
<p>I am going to try and let you know.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37016"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 14/12/2015 - 22:10.</div>
    <div class="content">
     <p>From your 2nd post above</p>
<p><em>&quot;thanks pb66 . but there is something i do not understand :<br />
this sketch works perfectly &quot;emonTH_DHT22_DS18B20_RFM69CW&quot;<br />
and inside is written &quot;RFu JeeLib&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;https://github.com/openenergymonitor/RFu_jeelib&nbsp;&nbsp; //library to work with CISECO RFu328 module&quot;<br />
this is the non working sketch &quot;emonTH_DHT22_dual_DS18B20&quot; and inside are written the same stuff,&nbsp; both says are using the same RFu328 module ...&quot;</em></p>
<p>Correct as I said the note in the &quot;emonTH_DHT22_DS18B20_RFM69CW&quot; sketch is out of dateand the &quot;dual&quot; is still for the &quot;RFu&quot;,&nbsp;You now mention the &quot;dual&quot;, the &quot;multi&quot; and the &quot;pulse&quot;, What sketch are you actually trying to use? will one of the working sketches not do what you need?</p>
<p><em>&quot;and on both &quot;multi&quot; and &quot;dual&quot; i found :&quot; #include &lt;RFu_JeeLib.h&gt;&nbsp; &quot;&quot;</em></p>
<p>Correct they were&nbsp;both written for the v1.4 &quot;RFu&quot; older device and have not been altered for the v1.5. from memory I believe it is probably just the RF, you need to check the pin numbers used and the JeeLib&nbsp;&quot;import&quot;&nbsp;must be changed, The devices you have will also be rfm69 not rfm12&nbsp;so a &quot;#define RF69_COMPAT 1&quot; will probally&nbsp;be required too, you can use the &quot;emonTH_DHT22_dual_DS18B20&quot; as a guide since that too was originally for the v1.4 but has since been altered.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37017"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Mon, 14/12/2015 - 22:19.</div>
    <div class="content">
     <p>ok , i will try to figure our something starting from the &quot;dual&quot; .</p>
<p>And yes, the &quot;pulse&quot; is working perfectly , just i need to use more temperature sensors , so i wanted to use Multi or Dual ....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37019"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 14/12/2015 - 22:42.</div>
    <div class="content">
     <p>Robert is the expert in this area so he may come to your rescue with some pointers to adapt the code for the v1.5 rfm69, he&#39;s also better&nbsp;experienced with multiple temp sensor code.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37022"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 15/12/2015 - 00:05.</div>
    <div class="content">
     <p>OK, will do, but not today!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37024"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Tue, 15/12/2015 - 07:55.</div>
    <div class="content">
     <p>ok thanks so much , i will wait for your help, in the meanwhile is will keep experimenting!<br />
thanks everybody</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37050"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 15/12/2015 - 21:45.</div>
    <div class="content">
     <p>As Paul (pb66) said, the obvious way to tell whether a sketch is suitable for the emonTH V 1.5 is to check which library is actually in use - ignore the comments!</p>
<p>If the sketch has:</p>
<pre>
#define RF69_COMPAT 1       // Set to 1 if using RFM69CW or 0 is using RFM12B
#include &lt;JeeLib.h&gt; 
</pre><p>
then it is suitable for the emonTH V1.5</p>
<p>If it has:</p>
<pre>
#include &lt;RFu_JeeLib.h&gt;
</pre><p>
then it is for the V1.4</p>
<p>Here are the differences between the V1.4 and the V1.5 I/O designations:</p>
<pre>
Function:	LED DIP1 DIP2 Pulse Pulse DS18B20 DS18B20		
                               I/P  IRQ	    Pwr     Data		 

V1.4            D9   -    -	D2    0	    D5	  D19/ADC5

V1.5		D9   D7	  D8	D3    1     D5    D19/ADC5



Function:	DHT22  DHT22  Batt Processor Radio  SEL SCK SDI SDO IRQ IRQ
               	 Pwr   Data          type           DIO DIO DIO DIO no  DIO	 	

V1.4             D6  D18/ADC4 AIO1  RFu328  RFu/12B -   13  11  12   1   3		

V1.5             D6  D18/ADC4 AIO1 ATMega328 69CW   10  13  11  12   0   2	 

</pre><p>
In order to convert a sketch from hardware version 1.4 to hardware version 1.5, then in addition to changing the library and adding the line to select the correct code for the radio, you will also need to change the I/O designations.</p>
<p>So, for example, in a V1.4 sketch you have</p>
<pre>
const int ONE_WIRE_BUS=19;
const int DHTPIN=18; 
</pre><p>which does not need changing because D18 and D19 are used for the same function in both. But if you convert a sketch with a pulse input, then you will need to change both the interrupt number and the pin.</p>
<p>If you are reprogramming the emonTH, there is no <i>need</i> to add the part of the program that reads the DIP switches, as you will write your own ID permanently into the sketch.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37075"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Wed, 16/12/2015 - 08:48.</div>
    <div class="content">
     <p>thanks RObert , i will try something this evening and come back here for feedback ....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37202"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Fri, 18/12/2015 - 21:55.</div>
    <div class="content">
     <p>Hi Robert, hi everyone... I am not a professional programmer ... and i was not able to figure out how to convert the multiple sensors sketches to the new emonth rfm69 radio ...<br />
Can someone update the sketches for me ? ( if is easy...) otherwise give me some more tips , cause i&nbsp; should really need to add multiple sensors to my 3 emonth 1.5 , but i am only loosing time in this way...<br />
thanks so much to anyone want to help!<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37211"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/12/2015 - 01:51.</div>
    <div class="content">
     <p>Which sketch (URL on Github please) do you want converting? </p>
<p>Caveat: I don't have an emonTH V1.5, so you'll be doing the testing!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37220"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Sat, 19/12/2015 - 09:32.</div>
    <div class="content">
     <p>Thanks, this is the multiple sketch i would like to upload to my emonth</p>
<p>1) <a href="https://github.com/openenergymonitor/emonTH/tree/master/emonTH_DHT22_multiple_DS18B20" title="https://github.com/openenergymonitor/emonTH/tree/master/emonTH_DHT22_multiple_DS18B20">https://github.com/openenergymonitor/emonTH/tree/master/emonTH_DHT22_mul...</a><br />
this is the multiple sensors sketch with auto scan for the address , if works is the better,&nbsp;&nbsp; but has selected inside 4800 baud that is strange , and as default work on my emonth ( without RF of course ) but in the serial monitor i see some asci text ... dont know the reason .</p>
<p>
2)https://github.com/openenergymonitor/emonTH/tree/master/emonTH_DHT22_dual_DS18B20<br />
this is the DUAL and need to put the address of each sensor , i done it and working fine on the serial monitor ( except radio of course) .<br />
In this case seems also easier to add more sensor.</p>
<p>you can choose which one you prefer, i think multiple will be better cause of the auto scan...</p>
<p>Grazie!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37245"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 19/12/2015 - 16:59.</div>
    <div class="content">
     <p>Here&#39;s your preferred sketch. <strong>It is untested</strong>&nbsp;because I don&#39;t have an emonTH V1.5, but it has compiled so there&#39;s a chance that it will work.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37246"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Sat, 19/12/2015 - 17:05.</div>
    <div class="content">
     <p>thanks! i will try tomorrow and will give you feedback, thjanks so much for your fast feedback</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37296"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9029.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9029.png" alt="scubammx&#039;s picture" title="scubammx&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/9029.html" title="View user profile.">scubammx</a> on Sun, 20/12/2015 - 20:02.</div>
    <div class="content">
     <p>Dear Robert , the sketch is working perfectly !!!&nbsp; thanks so much, that was very important for me !</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37325"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonhub Adding other nodes</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 21/12/2015 - 12:11.</div>
    <div class="content">
     <p>This example is now in the emonTH github&nbsp;<a href="https://github.com/openenergymonitor/emonTH/tree/master/emonTH_V1_5_DHT22_multiple_DS18B20">https://github.com/openenergymonitor/emonTH/tree/master/emonTH_V1_5_DHT22_multiple_DS18B20</a></p>
<p>Thanks Robert and&nbsp;scubammx&nbsp;for testing.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11791"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-0lvgAk-l3U2fRstMTYQNxZhk_VNbh8G4nb5kokf9ZOU" value="form-0lvgAk-l3U2fRstMTYQNxZhk_VNbh8G4nb5kokf9ZOU"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/11791 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:49:24 GMT -->
</html>
