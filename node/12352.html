<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12352 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:10:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Raspberry died - getting RPI 3 | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Raspberry died - getting RPI 3</h3>
        <span class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Tue, 15/03/2016 - 14:01</span>
        <div class="content"><p>My RPI Model B died and won&#39;t boot anymore. I&#39;m replacing it with a RPI 3. The old RPI had Wheezy installed but I hear the RPI3 needs Jessie. I don&#39;t have another RPI that I can update the OS on. Also, the RPI was booting from the SD card but running from an external drive.</p>
<p>How do I update the OS so that I don&#39;t lose any data, installed programs and settings. I have a spare SD card and I&#39;ve installed Jessie on that (RPI3 won&#39;t be here until tomorrow) so I can get running&nbsp;on that.</p>
<p>Someone on the Raspberry board suggested to copy /lib/modules to the external drive and update cmdline.txt to point to /dev/sda1. I&#39;m not sure that will work and if it does, whether&nbsp;update/upgrade would work.</p>
<p>(I&#39;ve also seen the thread about the serial port - first things first - have to have the OS running)</p>
<p>Also where is the emoncms data saved in case I need to reinstall everything.</p>
<p>Thanks</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12367.html" class="topic-previous" title="Go to previous forum topic">‹ SCT013 smaller alternatives?</a>
              <a href="12315.html" class="topic-next" title="Go to next forum topic">Solved: emonpi update fails with avrdude error : stk500_paged_write(): (a) protocol error, expect=0x14, resp=0x10 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-40350"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry died - getting RPI 3</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Tue, 15/03/2016 - 16:35.</div>
    <div class="content">
     <p>The emoncms feed data and mysql data is all in /home/pi/data If you can make a copy of that you should have the important parts. You will need to be root to copy the mysql folder.</p>
<p>Are you sure its not an issue with the SD card that&#39;s causing your pi to not boot? I would keep your existing SD card as a backup and start your new PI3 with a new SD card then you can copy the mysql folder and the /home/pi/data/phpfina folder across. You could then copy over emonhub.conf but I&#39;d start by ensuring the mysql database copies over successful.&nbsp; You may get some permissions related issues there.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40358"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6548.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="billvolz&#039;s picture" title="billvolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry died - getting RPI 3</h3>

    <div class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Tue, 15/03/2016 - 19:49.</div>
    <div class="content">
     <p>Yes I&#39;m more than 99% sure it&#39;s the RPI and not the SD card I found a back up SD card from when I first got the RPI. I also installed Jessie on a new SD card. Neither would boot and the RPI acted the same way - the red power light came on and that&#39;s it. No blinking lights, screen dark. The RPI is running from an external drive so except for booting, there should be no activity on the SD card. It was running and then stopped suddenly. Since it was running on an external driver I am able to see the log files. There&#39;s nothing odd in syslog or any other file around the time of the failure.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40360"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6548.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="billvolz&#039;s picture" title="billvolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry died - getting RPI 3</h3>

    <div class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Tue, 15/03/2016 - 20:58.</div>
    <div class="content">
     <p>There is no /home/pi/data so not sure where the data is stored. Where is the config file located? I can&#39;t find that either.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40367"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry died - getting RPI 3</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Wed, 16/03/2016 - 06:58.</div>
    <div class="content">
     <p>Hi</p>
<p>If you are using wheezy this is going to be before emonpi so the data will generally be in /var/lib/mysql</p>
<p>Inside there, there will be a folder called whatever you have called the database, generally "emoncms"</p>
<p>It is that you will need to copy as root.</p>
<p>However first I would go into the folder and make note of file permissions (ls -lah) as some time ago when I tried something similar it all went bad due to permissions.</p>
<p>-------</p>
<p>What I would do though assuming you have a working spare PC with SD card reader and enough storage space (assuming Linux as you say you can read the files)</p>
<p>Clone the SD card to an image on the computer or to another SD card as a backup of how it is now. Then when the new pi comes try to boot with this new SD card. If it does, run a mysqldump. May take ages, but is safe...</p>
<p>Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40384"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6548.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="billvolz&#039;s picture" title="billvolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry died - getting RPI 3</h3>

    <div class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Wed, 16/03/2016 - 21:13.</div>
    <div class="content">
     <p>Whew, I got lucky somewhat.</p>
<p>When I plugged in the new RPI3, it would not boot even with a new microSD card with Jessie on it. No lights at all. I also tried the old RPI and same thing. I then tried a different power supply and the old RPI booted. Apparently the old wall wart degraded in power output so it would light&nbsp;the power LED but not enough to boot.&nbsp;</p>
<p>I&#39;m now&nbsp;making a back up of my external drive and microSd card&nbsp;and will upgrade to jessie on the old RPI and then swap out to the new RPI3.</p>
<p>Can I assume the with the OS on the external drive and /boot on the sd card, dist-upgrade will properly update everything?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40388"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry died - getting RPI 3</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Thu, 17/03/2016 - 07:23.</div>
    <div class="content">
     <p>That is good news, In theory that is correct, id still image / backup the mysql, emoncms, and other folders first. Just in case. With Debian, I&#39;ve had some bad upgrades happen, so a backup is always recommended.</p>
<p>Jimmy</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40411"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6548.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="billvolz&#039;s picture" title="billvolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry died - getting RPI 3</h3>

    <div class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Fri, 18/03/2016 - 00:26.</div>
    <div class="content">
     <p>I got my old Raspberry to boot with a new power supply using the original sd card. I updated the sd card to jessie&nbsp;and things seem to be working.&nbsp;</p>
<p>Now when I move that SD card to the RPI3, it fails to boot. Nothing, just a power light.</p>
<p>I then used a different sd card with jessie that&nbsp;I downloaded and installed. It booted fine but not using the external drive. So I updated cmdline.txt to point to that and rebooted.</p>
<p>I get to a point where it says &quot;A start job is running for dev-mmcblk0p5.device&quot; with a countdown 1.5 min. When that&#39;s over it reboots and gives me an option to enter emergency mode.</p>
<p>Clearly I didn&#39;t update something.</p>
<p>1) why won&#39;t the original sd card with jessie boot in the RPI3?</p>
<p>2) how do I get the second sd card to boot to the external drive?</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40421"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry died - getting RPI 3</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 19/03/2016 - 01:37.</div>
    <div class="content">
     <p>See our blog post regarding the RasPi3, might not fix all your issues&nbsp;but does fix the serial port!&nbsp;</p>
<p><a href="http://openenergymonitor.blogspot.co.uk/2016/03/raspberry-pi-3.html" title="http://openenergymonitor.blogspot.co.uk/2016/03/raspberry-pi-3.html">http://openenergymonitor.blogspot.co.uk/2016/03/raspberry-pi-3.html</a></p>
<p>You might want to add&nbsp;</p>
<pre>
max_usb_current=1</pre><p>to /boot/config.txt if you&#39;re powering an HDD</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12352"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-KCu8uZhDThQ7nP7xNVOJoLlLDxvt9Lchy9Em7cNbP6Q" value="form-KCu8uZhDThQ7nP7xNVOJoLlLDxvt9Lchy9Em7cNbP6Q"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/12352 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:10:26 GMT -->
</html>
