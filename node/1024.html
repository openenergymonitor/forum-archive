<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/1024 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:29:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>CT sensor reading different +/- values | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">CT sensor reading different +/- values</h3>
        <span class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Thu, 06/09/2012 - 21:58</span>
        <div class="content"><p>&nbsp;</p>
<p>Strange one this....</p>
<p>Standard SCT-013-000 CT&nbsp;sensor (no inbuilt burden)</p>
<p>If I put the sensor one way on the power cable, I get 35W (reading table lamp bulb) if I now reverse the clamp, I get a reading of 25W</p>
<p>Should/why is this happening??</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1018.html" class="topic-previous" title="Go to previous forum topic">‹ RESOLVED - emonGLCD clock error</a>
              <a href="225.html" class="topic-next" title="Go to next forum topic">Puzzled by SCT-013-030 reading ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-6088"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: CT sensor reading different +/- values</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 06/09/2012 - 22:41.</div>
    <div class="content">
     <p>Rubbish</p>
<p>or a bit of mains being picked up somewhere, either on the c.t. cable or via the power supply is the most likely cause, but as you are synchronised to the mains, I would not discount digital interference from the processor itself getting back into the analogue input. I think your plugboard assembly might be at least partly to blame.</p>
<p>Take a look at the numbers: 30 W on a 240 V supply is how many mA / mV across the burden?&nbsp; In the simplest case you're adding this to or subtracting it from a 5 W signal - the spurious one that's being picked up from somewhere - and how many mV is that? I can't work through the numbers because I don't know your circuit values, but I think 300-400 &micro;V is in the right order.</p>
<p>I think you need to be looking at ripple on power supplies and things like that for the source.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6089"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: CT sensor reading different +/- values</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 07/09/2012 - 08:03.</div>
    <div class="content">
     <p>Stuart, what reading do you get when your lamp is off, and is this affected by which way around the CT is connected?&nbsp; </p>
<p>I've never seen more than a Watt of leakage when there is no current is flowing.&nbsp; </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6090"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/450.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: CT sensor reading different +/- values</h3>

    <div class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Fri, 07/09/2012 - 08:26.</div>
    <div class="content">
     <p>Probably just the plugboard then and my spaghetti wiring !</p>
<p>I'll take a look later at the leakage when no current is flowing, think its around &lt;1W as well.</p>
<p>I'm using a 22ohm burden resistor (5% tollerance), followed by an opamp gain of about <span class="c1">19</span> (from memory might be lower!).&nbsp; Running from a 5v split (again via Opamp) to 2.5v dc offset.</p>
<p>Think it might be time to get the soldering iron and stripboard out.</p>
<p>&nbsp;</p>
<p>Just remembered that I also need to invert the current samples as I'm using the OpAmp and this is inverting the signal!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6091"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: CT sensor reading different +/- values</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 07/09/2012 - 08:58.</div>
    <div class="content">
     <p>I've just tried this test in the garage where my rig is as basic as they come: sensors on breadboard; the voltage sensor is a 'telecom' adapter which gives awful distortion, much worse than a Mascot; blue CT clamp with 150R burden hence high phase-shift; cut-down 'mini' sketch with PHASECAL = 1 hence no correction of phase-shift.&nbsp; System not calibrated. &nbsp; But, hey, it all works and provides hot water.&nbsp; The Mk2a will happen in due course ...</p>
<p>Anyway, by uncommenting the two lines containing <em>energyInBucket_4led</em> (just after the &quot;WARNING&quot; about Serial statements), the energy change per second can be easily displayed.&nbsp; Moving the CT to a test lead where no current was flowing, negligable leakage was detected either way round.&nbsp; With a 40W bulb, my readings were 27.5W in one direction and 29W in the other.&nbsp; For some reason, the value was always slightly greater in one direction.&nbsp; At this level of power, the current sensor is really struggling, so the coarseness of the ADC's resolution may well be coming into play here, as Robert has often pointed out.</p>
<p>Thankfully, when measuring higher loads - from 750W to 2kW - I saw very little difference when the CT was reversed.&nbsp; All of my readings look to be around 2/3 of their correct value so I have taken the opportunity to recalibrate my rig by changing the value of POWERCAL from 0.042 to 0.6.&nbsp; This change makes not the slightest difference once the system gets going, but it should now reach the 1800J point just that little bit quicker than it did before.</p>
<p>Both types of current clamp that I've bought indicate the direction that current should be flowing in.&nbsp; For the PV Diversion application, the net flow of current at the CT is zero, so there would seem to be no right or wrong way round.&nbsp; But when measuring a simple flow of current in a test circuit, the construction of the CT may favour detection better in one way than the other.&nbsp; Sorry, I can't recall which direction of flow gave the higher reading.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6092"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: CT sensor reading different +/- values</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 07/09/2012 - 10:29.</div>
    <div class="content">
     <p>Because of screen-width limitations, the rawSampleTool that I posted a while back compresses data that's been measured on a scale of 0-1023 at the ADC to just 80 characters.&nbsp; Here is a version which displays the raw data for <em>current</em> just as it has been sampled by the Arduino with no compression (the voltage waveform is still compressed as before).&nbsp; Ideal for investigating the behaviour at small currents ...</p>
<p>Along with the sketch itself, two files of results are attached.&nbsp; One was taken in debug mode, the power flowing being nominally 25W.&nbsp; Having subtracted the nominal DC offset of 500 that is used in this mode, the output waveform is neat and symmetrical as expected, but see how few (simulated) ADC steps are involved.&nbsp; In the real world, it seems likely that the sequence of output samples could be significantly affected by the precise centre point of the waveform - i.e. how close it lies to the nearest decision level.</p>
<p>The second file shows a real 40W filament bulb being tested (in normal mode) using this sketch on my rig in the garage.&nbsp; There are three runs: first with the bulb off; then with it on, and with the CT in either direction.&nbsp; The resulting waveforms are rather grainy, and I wouldn't like to have to compare their power content in any detail.&nbsp; But that's what the Arduino does for us 24/7 - something to ponder about in my next free solar bath :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6099"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: CT sensor reading different +/- values</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 07/09/2012 - 19:39.</div>
    <div class="content">
     <p><em>Think it might be time to get the soldering iron and stripboard out.</em></p>
<p>And as you do so, pay attention to keeping the analogue and digital sides separate, keep both the analogue supply and its ground clean and free of digital signals and 50 Hz ripple.</p>
<p>Let's say you're looking for a 5 W equivalent ripple voltage that's being impressed on the c.t. input:<br />
5 W @ 240 V = 21 mA.<br />
Out of a 100 A : 50 mA c.t, that's 10.4 &micro;A.<br />
and across a 22 R burden, it's 230 &micro;V.</p>
<p>So that's what you're looking for, and I was 50% out in my guess! To put it into context, you get more than that with 1 mA flowing across a joint with &frac14; Ohm resistance.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/1024"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-jxmxWV1pRa4YpRPW9uWFeqxtWx-hVKyOfUbFeK3tyCo" value="form-jxmxWV1pRa4YpRPW9uWFeqxtWx-hVKyOfUbFeK3tyCo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
