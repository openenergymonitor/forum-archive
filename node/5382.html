<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5382 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:23:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Upgrade Emoncms Fails | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Upgrade Emoncms Fails</h3>
        <span class="submitted">Submitted by <a href="../user/4312.html" title="View user profile.">hendersoniain</a> on Fri, 04/07/2014 - 20:49</span>
        <div class="content"><p>Hi,</p>
<p>Just tried to upgrade my emoncms to latest version following procedure here: <a href="http://emoncms.org/site/docs/upgrading" title="http://emoncms.org/site/docs/upgrading">http://emoncms.org/site/docs/upgrading</a></p>
<p>Followed instructions all the way to step 7. My data is not being updated. Trying the test: <a href="http://localhost/emoncms/input/post.json?csv=100,200,300" title="http://localhost/emoncms/input/post.json?csv=100,200,300">http://localhost/emoncms/input/post.json?csv=100,200,300</a> returns OK in the browser so that seems to work OK.</p>
<p>If I try posting data as follows: <a href="http://192.168.1.68/emoncms/node/set.json?nodeid=10&amp;data=20,20,20,20&amp;apikey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" title="http://192.168.1.68/emoncms/node/set.json?nodeid=10&amp;data=20,20,20,20&amp;apikey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">http://192.168.1.68/emoncms/node/set.json?nodeid=10&amp;data=20,20,20,20&amp;api...</a></p>
<p>I get the following error: Fatal error: Call to a member function fetch_array() on a non-object in /var/www/emoncms/Modules/node/node_model.php on line 194</p>
<p>I have tried rebooting the Pi but it no longer works.</p>
<p>Any ideas?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5380.html" class="topic-previous" title="Go to previous forum topic">‹ Emoncms github repo clean up and development documentation links</a>
              <a href="4300.html" class="topic-next" title="Go to next forum topic">Sending Arduino Sensor data to Emoncms  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22324"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6175.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6175.jpg" alt="chandlerbing&#039;s picture" title="chandlerbing&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Upgrade Emoncms Fails</h3>

    <div class="submitted">Submitted by <a href="../user/6175.html" title="View user profile.">chandlerbing</a> on Fri, 04/07/2014 - 22:23.</div>
    <div class="content">
     <p>Have you tried &quot;Update and Check&quot;? From the main view select Admin ---&gt;Click on the Update and Check button.</p>
<p>I was getting similar error messages after a new install, I selected the Update and Check and several things were &quot;fixed&quot; with that process. Give it a go and let us know what you found out.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22328"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4312.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hendersoniain&#039;s picture" title="hendersoniain&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Upgrade Emoncms Fails</h3>

    <div class="submitted">Submitted by <a href="../user/4312.html" title="View user profile.">hendersoniain</a> on Sat, 05/07/2014 - 09:35.</div>
    <div class="content">
     <p>Hi,</p>
<p>There is no Admin in my emoncms main view. However, I can get to it by typing <a href="http://x.x.x.x/emoncms/admin/view" title="http://x.x.x.x/emoncms/admin/view">http://x.x.x.x/emoncms/admin/view</a></p>
<p>I then click on update and check and get the message database is up to date - nothing to do and it still does not work.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22333"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4312.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hendersoniain&#039;s picture" title="hendersoniain&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Upgrade Emoncms Fails</h3>

    <div class="submitted">Submitted by <a href="../user/4312.html" title="View user profile.">hendersoniain</a> on Sat, 05/07/2014 - 14:50.</div>
    <div class="content">
     <p>OK I got rid of the fatal error - not sure how but it is gone now.</p>
<p>However, am I missing something? I was expecting once updated the existing inputs would just update when data was received from the EmoncmsTx V2 nodes - this is not happening. I noticed the nodes page in emoncms and tried creating a node but again nothing gets updated.</p>
<p>If I update from my web browser with: <a href="http://192.168.1.68/emoncms/node/set.json?nodeid=10&amp;data=20,20,20,20&amp;apikey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" title="http://192.168.1.68/emoncms/node/set.json?nodeid=10&amp;data=20,20,20,20&amp;apikey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">http://192.168.1.68/emoncms/node/set.json?nodeid=10&amp;data=20,20,20,20&amp;api...</a> my inputs do not update although I get an updated a few seconds ago on my nodes page but no values get updated.</p>
<p>Any ideas?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22334"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Upgrade Emoncms Fails</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 05/07/2014 - 15:34.</div>
    <div class="content">
     <p>The node module is an alternative posting method to the input module, if you post to either you will not see any change in the other. Do you see any data in the input page if you &nbsp;use&nbsp;<a href="http://localhost/emoncms/input/post.json?csv=100,200,300">http://localhost/emoncms/input/post.json?csv=100,200,300</a>&nbsp;as in your 1st post ?</p>
<p>If yes then you are the on the right track, using the upgrade path you have (re)moves the whole emoncms directory and only reinstalls emoncms itself without any modules, if you are using rfm2pi you will need to either reinstall&nbsp;<a href="https://github.com/emoncms/raspberrypi">https://github.com/emoncms/raspberrypi</a>&nbsp;or install&nbsp;the <a href="../search/node/emonhub.html">newly developed&nbsp;emonHub</a>&nbsp;(or oem gateway),&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22337"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4312.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hendersoniain&#039;s picture" title="hendersoniain&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Upgrade Emoncms Fails</h3>

    <div class="submitted">Submitted by <a href="../user/4312.html" title="View user profile.">hendersoniain</a> on Sat, 05/07/2014 - 20:48.</div>
    <div class="content">
     <p>Hi,</p>
<p>Thanks for the info. I see data in the input page using: <a href="http://localhost/emoncms/input/post.json?csv=100,200,300" title="http://localhost/emoncms/input/post.json?csv=100,200,300">http://localhost/emoncms/input/post.json?csv=100,200,300</a></p>
<p>So I have moved the whole emoncms directory as you say and when I compared the Modules directories between emoncms_old and emoncms_new there are a lot of differences. So I now realise that I need to install the following modules into the new emoncms:</p>
<p>git clone <a href="https://github.com/emoncms/raspberrypi.git" title="https://github.com/emoncms/raspberrypi.git">https://github.com/emoncms/raspberrypi.git</a><br />
	git clone <a href="https://github.com/emoncms/event.git" title="https://github.com/emoncms/event.git">https://github.com/emoncms/event.git</a><br />
	git clone <a href="https://github.com/emoncms/openbem.git" title="https://github.com/emoncms/openbem.git">https://github.com/emoncms/openbem.git</a><br />
	git clone <a href="https://github.com/emoncms/energy.git" title="https://github.com/emoncms/energy.git">https://github.com/emoncms/energy.git</a><br />
	git clone <a href="https://github.com/emoncms/notify.git" title="https://github.com/emoncms/notify.git">https://github.com/emoncms/notify.git</a><br />
	git clone <a href="https://github.com/emoncms/report.git" title="https://github.com/emoncms/report.git">https://github.com/emoncms/report.git</a><br />
	git clone <a href="https://github.com/emoncms/packetgen.git" title="https://github.com/emoncms/packetgen.git">https://github.com/emoncms/packetgen.git</a><br />
	git clone <a href="https://github.com/elyobelyob/mqtt.git" title="https://github.com/elyobelyob/mqtt.git">https://github.com/elyobelyob/mqtt.git</a></p>
<p>I had just assumed that following the upgrade instructions would do all I need but I see still have a bit to learn!</p>
<p>Anyhow thanks for your help Paul - you got me going in the right direction to get it upgraded and working.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5382"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-TUo4Bn2JBa4BaNkNFoTJtDAaXkghVXZ3q-1H15_NYo0" value="form-TUo4Bn2JBa4BaNkNFoTJtDAaXkghVXZ3q-1H15_NYo0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
