<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5099 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:42:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonTX V3: Latest Firmware | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonTX V3: Latest Firmware</h3>
        <span class="submitted">Submitted by <a href="../user/4253.html" title="View user profile.">charliemic</a> on Sat, 26/04/2014 - 09:11</span>
        <div class="content"><p>Hi all,</p>
<p>Can someone advise which is the latest emonTX V3 firmware to use for voltage and current monitoring? There appear to be a few options. The documentation still cites &quot;emonTxV3_RFM12B_DiscreteSampling&quot;, but I am aware that there has been a lot of work done on the continuous kWh totals sketches, of which there are three.</p>
<p>emonTxV3_continuous_kwhtotals</p>
<p>emonTxV3_continuous_kwhtotals_eeprom (which I understand uses the inbuilt arduino memory to store values)</p>
<p>emonTxV3_continuous_kwhtotals_noeeprom (which doesn&#39;t)</p>
<p>I&#39;ve had a look through the code for these three and it appears quite different from previous. Where can I look for an explanation of the method here (e.g., it uses an interupt method?).</p>
<p>I also need to add temperature sensing onto the main electricity monitor, is this easily done within the new sketches?</p>
<p>Thanks,</p>
<p>Chris</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5013.html" class="topic-previous" title="Go to previous forum topic">‹ emonglcd + dht22</a>
              <a href="5095.html" class="topic-next" title="Go to next forum topic">Emoncms on the RaspberryPI: Partitioned SD - wireless problems ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-21099"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTX V3: Latest Firmware</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 27/04/2014 - 21:07.</div>
    <div class="content">
     <p>Hi Chris,</p>
<p>Sorry for the lack of info. These sketches are still in development and are being worked on by Trystan Lea. He is away this week attending some energy monitoring events in Europe. I know he is planning on documenting the continues sampling with Kwh/d on his return. The continous sampling using PLL method which is documented in a series of excellent posts by Robert Wall&nbsp;<a href="https://learn.openenergymonitor.org/?redirect=pll">http://openenergymonitor.org/emon/pvdiversion/pll&nbsp;</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21106"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4253.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="charliemic&#039;s picture" title="charliemic&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTX V3: Latest Firmware</h3>

    <div class="submitted">Submitted by <a href="../user/4253.html" title="View user profile.">charliemic</a> on Mon, 28/04/2014 - 12:14.</div>
    <div class="content">
     <p>Hi Glyn,</p>
<p>No problem. I assume that I can keep using the &quot;emonTxV3_RFM12B_DiscreteSampling&quot; sketch until the new sketches are completed, and that this will still work with ecmoncms 8?</p>
<p>Thanks for the link- looks really useful, I&#39;ll have a read (and thanks Robert).</p>
<p>Chris</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21110"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTX V3: Latest Firmware</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/04/2014 - 12:46.</div>
    <div class="content">
     <p>I assume you&#39;ve separated the concepts of continuous monitoring; and sending accumulated energy readings vs sending instantaneous power readings! The two are entirely separate - they just happen to have got tackled at the same time in the same sketches!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21113"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4253.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="charliemic&#039;s picture" title="charliemic&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTX V3: Latest Firmware</h3>

    <div class="submitted">Submitted by <a href="../user/4253.html" title="View user profile.">charliemic</a> on Mon, 28/04/2014 - 16:53.</div>
    <div class="content">
     <p>I think so...depends what you mean! As I understand it;</p>
<p>The &quot;emonTxV3_RFM12B_DiscreteSampling&quot; sketch sends instantaneous power readings to emoncms, which then uses these to calculate energy usage (kWh per day, week etc).</p>
<p>But there are concerns as to the accuracy of <a href="3995.html">this method&nbsp;</a>, so new sketches are being developed which calculate accumulated energy (Wh) readings, which emoncms can then use to calculate kWh per day etc. Instantaneous power readings will be sent to emoncms as usual for the purpose of knowing the power usage at any time.</p>
<p>So I was checking that the current version of emoncms will still work with the established &nbsp;&quot;emonTxV3_RFM12B_DiscreteSampling&quot; sketch?</p>
<p>Chris</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21115"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTX V3: Latest Firmware</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/04/2014 - 19:04.</div>
    <div class="content">
     <p>Yes, it all depends (as we are well aware) on the messages getting through, where the integration to get from power to energy happens, and what approximations are acceptable.</p>
<p>In the discrete sample sketch, which is a development of the initial concept, the power is sampled for a short period every few seconds. The reason for this is battery life, and it remains the best method if battery power is all that is available. But the downside is, whatever the power source, there is an assumption that the sample is representative of the time when the monitor is sleeping. If however you monitor continuously, you can sample power every few hundred microseconds and integrate to give the total energy over whatever period you like, then divide by the period to get back to power - it this time it is an accurate average power and not a sample.</p>
<p>So continuous monitoring (which implies a mains power supply) removes the inaccuracy that is particularly serious if you have a switched load such as the immersion controller.</p>
<p>But you can also carry on accumulating energy and transmit the total accumulated since time zero - exactly replicating how your tariff meter, the meter reader and the energy supplier all interact. This means that should a message not get through, you might lose a peak or a trough that the missing reading would have conveyed, but the total and the long-term average remains accurate. This is in contrast to sending power, where if a reading fails to make it, all you can do is make an assumption about the total and the long-term average.</p>
<p>So, as I started off, it&#39;s a case of where and when you do the maths, and what errors you can accept when abnormal things happen. If you send energy totals, you can send instantaneous power as well (because you already know it), or you can differentiate energy to get power. If you send power, you integrate to get energy.</p>
<p>I can&#39;t see the likelihood, at least in the immediate future, that emonCMS won&#39;t be able to accept power readings.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21116"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTX V3: Latest Firmware</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Mon, 28/04/2014 - 19:22.</div>
    <div class="content">
     <p>I posted some &#39;Mk2&#39; code a few days ago on <a href="1912.html">this thread</a> which routinely transmits a combination of power and energy data.&nbsp;</p>
<p>The power data is intended for emonCMS where summation of the individual values can take place.&nbsp; The energy data is intended for use with an emonGLCD or similar display so that accumulated data is available from switch-on.</p>
<p>Both sets of data are obtained by continuously monitoring the flow of energy - no gaps.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21132"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4253.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="charliemic&#039;s picture" title="charliemic&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTX V3: Latest Firmware</h3>

    <div class="submitted">Submitted by <a href="../user/4253.html" title="View user profile.">charliemic</a> on Tue, 29/04/2014 - 17:01.</div>
    <div class="content">
     <p>Thanks both.&nbsp;</p>
<p>I&#39;m going to stick with the discrete option for now, but will try and get to grips with the continuous methods as this does seem the way forward where the node has an external power supply (which all mine do).</p>
<p>Chris</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5099"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-RRbQ6p61eWl3iDfimpwxolvgAiE7U3rDoJgkibVvg_I" value="form-RRbQ6p61eWl3iDfimpwxolvgAiE7U3rDoJgkibVvg_I"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
