<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10119 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:57:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>[SOLVED] Lost internet -&gt; No data - Emoncms.org | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">[SOLVED] Lost internet -&gt; No data - Emoncms.org</h3>
        <span class="submitted">Submitted by <a href="../user/7638.html" title="View user profile.">Lykke</a> on Tue, 03/02/2015 - 08:20</span>
        <div class="content"><p>Sorry if this is too&nbsp;basic, but I am new and trying to figure out how this great system works&nbsp;:)</p>
<p>My Pi was thrown off the network last night and it seems I lost all data between then and the time I rebooted it. Should there be a data buffer stored somewhere or is it just tough luck? I am using the default Pi/EmonTx&nbsp;setup.</p>
<p>If data is lost, has anyone thought of a solution? Guess a local database would be better but not 100% safe as the Pi may get kicked of the local network also.</p>
<p>Thanks in advance</p>
<p>Mads</p>
<p>Edit: I will program the Pi to auto&nbsp;reconnect&nbsp;(WiFi) if the router drops out which should solve most of the problem :-/</p>
<p>Edid&nbsp;2:</p>
<p>Setting the base station to auto reconnect seems to solve this issue.&nbsp;</p>
<p>Updated the Pi with WiFi reconnect on dropout and turned off my WiFi for more than 5 minutes. The Pi got back online once the WiFi came back up and&nbsp;all the data from the dropout period could subsequently be found in the&nbsp;emoncms.org database.&nbsp;</p>
<p>Thanks to Paul for explaining the system to me.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10121.html" class="topic-previous" title="Go to previous forum topic">‹ [SOLVED] Issue posting data on a fresh install</a>
              <a href="10106.html" class="topic-next" title="Go to next forum topic">Newbie! Emoncms login and registrantion fail; &quot;red bar&quot; (Windows - Pi) ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-27342"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [SOLVED] Lost internet -> No data - Emoncms.org</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 03/02/2015 - 12:29.</div>
    <div class="content">
     <p>Are you are using the OEM SDcard image ?</p>
<p>Assuming you are for now, emonhub does buffer data in memory only, so this will be lost on reboot.&nbsp;</p>
<p>The best solution is to have the Pi configured&nbsp;to auto reconnect when the network comes up. persistent storage has it&#39;s own problems as the SDcard&#39;s life will be massively reduced&nbsp;by the intense write frequency. This is why the OS image is read-only and the included emoncms is a &quot;low-write&quot; version.</p>
<p>Using the local emoncms will give you persistent storage by processing the incoming data down to minimal a minimal data size and saving at a slower frequency&nbsp;(once a minute&nbsp;I believe) to a write enabled partition.</p>
<p>If you are using an rfm2pi&nbsp;with you nodes then the Pi could still collect data if the LAN goes down, buffer it in RAM and them pass it on to emoncms(.org) when it becomes available, which is ideally how it should&nbsp;work.</p>
<p>You should test if this is the case&nbsp;by disconnecting the WiFi&nbsp;(disable via router or power&nbsp;down router momentarily) although if your nodes are also connected via LAN there will be no data received during that time but should recommence on reconnection.&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27354"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Lykke&#039;s picture" title="Lykke&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: [SOLVED] Lost internet -> No data - Emoncms.org</h3>

    <div class="submitted">Submitted by <a href="../user/7638.html" title="View user profile.">Lykke</a> on Tue, 03/02/2015 - 15:05.</div>
    <div class="content">
     <p>Thanks for the explanation Paul, this is very useful.</p>
<p>I have the nodes connected to the Pi w. RFM and the Pi connected to LAN w.&nbsp;WiFi. If the Pi stores some amount of data and I set it up to auto reconnect, loss of data would be a very very rare event.&nbsp;</p>
<p>Guess this morning I messed up rebooting the Pi rather than just pulling and reinserting&nbsp;the WiPi dongel. But better to fail, learn and correct, than loosing a lot of data at a later date :-)</p>
<p>Mads</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10119"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-17cNrSvDqurNXOHezdPzF8CqVmUkyIcAL8yapSL1Vh8" value="form-17cNrSvDqurNXOHezdPzF8CqVmUkyIcAL8yapSL1Vh8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
