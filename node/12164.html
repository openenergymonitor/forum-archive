<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12164 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:39:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title> (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style=""> (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>
        <span class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 12/02/2016 - 14:07</span>
        <div class="content"><h2><strong>Update: This image has been superseded&nbsp;by the <a href="12212.html">emonSD-20Feb16</a> image. This thread is now closed. Please post on the new thread for issues regarding this latest image.&nbsp;</strong></h2>
<p>------------------------------------------------------------------------------------------------------------------------------------------------</p>
<h2>This release is &#39;apha&#39; please read comments below before installing. If you require stable release see&nbsp;<a href="10729.html">emonSD-17Jun15</a>.</h2>
<h2><strong>DOWNLOAD ALPHA: <a href="http://openenergymonitor.org/files/emonSD-12Feb16.zip">emonSD-12Feb16.zip</a>&nbsp;(1.2GB)</strong></h2>
<h2>USA Mirror: <a href="http://oem.aluminumalloyboats.com/oem/emonSD-12Feb16.zip">emonSD-12Feb16.zip</a></h2>
<p>MD5 Checksum (zip):&nbsp;67f1843588800eb65b8fbe2dd3412eb1</p>
<p>MD5 Checksum (.img):&nbsp;7c4693eca23baab0beb8ba6e9ad99572</p>
<p><strong>Here is the latest version of our emonPi / emonBase (RaspberryPi + RFM69Pi) pre-built SD card image.&nbsp;</strong></p>
<p>This post follows on from&nbsp;<a href="11407.html">Steps towards an EmonCMS 9.0 SD Card Image + Upgrade path</a>, the <a href="11695.html">Low-write mode - your thoughts please</a> thread and blog posts on <a href="http://openenergymonitor.blogspot.com/2015/10/emonpi-nodered-and-mqtt.html">node-RED &amp; MQTT</a>, <a href="http://openenergymonitor.blogspot.com/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB</a> and <a href="http://openenergymonitor.blogspot.co.uk/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWaveRF OOK control</a>.&nbsp;&nbsp;</p>
<p>Key Features:&nbsp;</p>
<ul>
<li>Based on&nbsp;<a href="https://www.raspberrypi.org/downloads/raspbian/">RASPBIAN JESSIE LITE</a> (2015-11-21)&nbsp;</li>
<li>Built following <a href="https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md">emonPi SD card Build Guide</a></li>
<li>4GB min card size download&nbsp;(ships on an 8GB expanded SD card)</li>
<li>Emoncms V9 (<a href="https://github.com/emoncms/emoncms/blob/stable/docs/RaspberryPi/readme.md">RasPi&nbsp;emonPi&nbsp;install</a>&nbsp;- thanks Paul Reed for writing the guide)&nbsp;</li>
<li>Read-only&nbsp;root FS (see <a href="11695.html#comment-36528">discussion thread</a>)</li>
<li><a href="http://openenergymonitor.blogspot.co.uk/2015/10/emonpi-nodered-and-mqtt.html">NodeRED</a>, <a href="http://openenergymonitor.blogspot.com/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWave RF MQTT OOK control</a> and <a href="http://openenergymonitor.blogspot.com/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB</a>&nbsp;all pre installed and configured</li>
</ul>
<p>Please report any bugs on this thread.&nbsp;</p>
<h1>Data Migration&nbsp;</h1>
<p>If you&#39;re moving from our previous pre-built-SD card, and have Emoncms data you want to migrate, this can be done using the backup module. Backup module is ready installed on this image. You will need to install it on an older image:&nbsp;</p>
<p>See Emopncms&nbsp;backup module readme:&nbsp;<a href="https://github.com/emoncms/backup">https://github.com/emoncms/backup</a></p>
<p>Please report any issues to his thread.&nbsp;</p>
<p>&nbsp;</p>
<h1>Storage&nbsp;&amp;&nbsp;Read-only File system&nbsp;</h1>
<p>The image is based on Lightweight Raspbian&nbsp;Jessie&nbsp;which makes for a very space efficient stack. With everything installed (inc nodeRED&nbsp;&amp; openHAB) total system size is 1.7GB compared to the previous ready-to-go emonPi&nbsp;image, which was&nbsp;over 2GB <em>without</em> nodeRED or openHAB.</p>
<p>As before, the filesystem&nbsp;is in read-only mode by default. <a href="11695.html#comment-36528">discussion thread</a>.</p>
<p>To put the filesystem in read/write mode, use the command: <em>rpi-rw</em>&nbsp;<br />
To return to read-only mode, use the command:<em> rpi-ro</em></p>
<pre>
df -h
Filesystem &nbsp; &nbsp; &nbsp;Size &nbsp;Used Avail Use% Mounted on
/dev/root &nbsp; &nbsp; &nbsp; 3.4G &nbsp;1.7G &nbsp;1.6G &nbsp;52% /
devtmpfs &nbsp; &nbsp; &nbsp; &nbsp;459M &nbsp; &nbsp; 0 &nbsp;459M &nbsp; 0% /dev
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 463M &nbsp; &nbsp; 0 &nbsp;463M &nbsp; 0% /dev/shm
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 463M &nbsp;6.3M &nbsp;457M &nbsp; 2% /run
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5.0M &nbsp;4.0K &nbsp;5.0M &nbsp; 1% /run/lock
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 463M &nbsp; &nbsp; 0 &nbsp;463M &nbsp; 0% /sys/fs/cgroup
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;40M &nbsp; &nbsp; 0 &nbsp; 40M &nbsp; 0% /var/lib/openhab
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;50M &nbsp;204K &nbsp; 50M &nbsp; 1% /var/log
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.0M &nbsp; &nbsp; 0 &nbsp;1.0M &nbsp; 0% /var/lib/dhcp
tmpfs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;30M &nbsp; 36K &nbsp; 30M &nbsp; 1% /tmp
/dev/mmcblk0p1 &nbsp; 60M &nbsp; 20M &nbsp; 41M &nbsp;34% /boot
/dev/mmcblk0p3 &nbsp;194M &nbsp; 32M &nbsp;153M &nbsp;17% /home/pi/data


</pre><p>The main data folder for emoncms is /home/pi/data this folder is always mounted Read/Write. A number of other folders are mounted in RAM (tmpfs), see <a href="https://github.com/openenergymonitor/emonpi/blob/master/fstab">/etc/fstab</a>. A read-only file system presents challenges to some core Linux processes such as DHCP and NTP. A couple of DHCP &amp; Resolv <a href="http://github.com/openenergymonitor/emonpi/blob/master/install#L57">files</a> are located in the writeable ~/data folder and symlinked to /etc and a custom <a href="http://github.com/openenergymonitor/emonpi/blob/master/dhclient-script_minibian">/sbin/dhclient-script</a> is used.<a href="http://github.com/emonhub/ntp-backup">NTP-backup</a> (thanks Paul) is used to enable NTP clock updates in R/O mode. See the original NTP discussion <a href="5877.html">thread</a>.</p>
<h1>emonPi</h1>
<p>Now updates itself on first factory boot so we will always ship with latest software pulled from github. emonPi LCD now shows when it&#39;s updating and also LCD scrip has been updated to include authenticated MQTT support and to display&nbsp;temperature, VRMS and pulse count values as well as power 1 &amp;2.</p>
<p><a href="../sites/default/files/emonpi_update.jpg"><img alt="" src="../sites/default/files/emonpi_update.jpg" style="width: 300px; height: 169px;" /></a></p>
<p>&nbsp;</p>
<h1><strong>Emoncms&nbsp;V9&nbsp;</strong></h1>
<p><strong>Access via</strong>: <a href="http://emonpi/" title="http://emonpi">http://emonpi</a></p>
<p><strong>Authenticate</strong>: Create the admin user account&nbsp;</p>
<p><strong>Configure</strong>: emonhub.conf (located in ~/data) via web interface&nbsp;</p>
<p><strong>Update</strong>: Pull in the latest updates from Emoncms&nbsp;stable branch using the web-based update tool in Administration &gt; update emonPi.&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<h2><strong>SSH &nbsp;</strong></h2>
<p>The default SSH password has been changed from &quot;raspberry&quot; to &quot;emonpi2016&quot; since even though we recommend users change their password, not many do. Moving away from the default&nbsp;raspberry will give a little more security. It&#39;s still <strong>HIGHLY RECOMMENDED</strong> to change the SSH password using&nbsp;<em><strong>passwd</strong></em> (be sure the filesystem is in R/W mode before you change the password (rpi-rw)&nbsp;</p>
<p>&nbsp;</p>
<h2><strong>MQTT</strong></h2>
<p>Mosquitto&nbsp;MQTT&nbsp;server is running on port 1883.</p>
<p>emonHub&nbsp;posts emonPi data to topics:</p>
<pre>
<em>emonhub/rx/&lt;nodeID&gt;/values</em> topic.

​and

<em>emon/&lt;nodename&gt;/&lt;keyname&gt; e.g. emon/emontx/power1</em>

See here for <a href="https://github.com/emoncms/emoncms/blob/master/docs/RaspberryPi/MQTT.md#node-format">more info an emonHub MQTT topics</a></pre><p>Port 1883 is open by default and authentication has been turned on:</p>
<p>mosquitto username &quot;emonpi&quot;</p>
<p>mosquitto password &quot;emonpimqtt2016&quot;</p>
<p>to change password&nbsp;:&nbsp;</p>
<pre>
sudo nano /etc/mosquitto/mosquitto.conf</pre><p>add lines&nbsp;</p>
<pre>
allow_anonymous false
password_file /etc/mosquitto/passwd</pre><p>To generate a password file, use the mosquitto_passwd tool. It will prompt for a password, then create a hashed password file.&nbsp;</p>
<pre>
$ sudo mosquitto_passwd -c /etc/mosquitto/passwd username</pre><address>&nbsp;</address>
<address>Note if mosquitto&nbsp;authentication&nbsp;credentials are change the new credentials will also need to be updated in:</address>
<address>~/data/emonhub.conf</address>
<address>/var/www/emoncms/settings.php</address>
<address>~/emonpi/lcd/emonPiLCD.py</address>
<address>~/oem_openhab/configuration/openhab.cfg</address>
<address>in node-RED MQTT node&nbsp;via web flows editor&nbsp;</address>
<address>&nbsp;</address>
<p>On this image the Nodes module has been depreciated in favor of the mqtt_input script. When data from a particular node is received (as long as it has a relevant entry in emonhub.conf) it will be posted to Inputs when it can be then be logged go feeds. Any data posted to the emon/# MQTT topic will be logged to feeds using tbe topic names as Input name and Key name, e.g: emon/emontx/power1 will result in an input called emontx with a key called power 1 and the value.&nbsp;</p>
<p>The mqtt input script can be stopped, started and restarted using:</p>
<pre>
sudo service mqtt_input restart </pre><p>The mqtt_input scripts logs to the emoncms log which can be viewed in Admin &gt; logger. The default log level is WARN this can be changed to INTO for a more verbose log in emoncms settings.php. The MQTT server authentication details used by the script are also set in settings.php.&nbsp;</p>
<address>&nbsp;</address>
<h2><strong>NodeRED</strong></h2>
<p>Node-RED is installed and set up with a basic (but useful!)&nbsp;demo flow to subscribe to emonHub MQTT&nbsp;topic and send an email to alert the user when emonTH batteries are low. For email to work, you will have to enter your gmail&nbsp;or smtp&nbsp;details into the node-RED email node. See <a href="http://openenergymonitor.blogspot.com/2015/10/emonpi-nodered-and-mqtt.html">node-RED blog post</a>. For &nbsp;our install and&nbsp;setup notes see <a href="https://github.com/openenergymonitor/oem_node-red">oem_node-red repo</a></p>
<p><strong>Access Via</strong>:&nbsp;<a href="http://emonpi:1880/">http://emonpi:1880</a></p>
<p><strong>Authentication</strong>: user &quot;emonpi&quot; and password &quot;emonpi2016&quot;&nbsp;</p>
<p>The User folder is in the R/W partition so flows can be saved via web editor without he need to change to R/W mode&nbsp;/home/pi/data/node-red</p>
<p>Set user name and password in /home/pi/node-red/settings.js. See instructions on out nodeRED&nbsp;github</p>
<p><a href="https://github.com/openenergymonitor/oem_node-red">https://github.com/openenergymonitor/oem_node-red</a></p>
<p><img alt="" src="../sites/default/files/nodered.png" style="height: 294px; width: 600px;" /></p>
<h2>&nbsp;</h2>
<p><strong>Note: Node-RED as setup in the image is compiled for Pi2, to use with Model B+ Node will need to be recompiled. Follow these instructions:&nbsp;</strong></p>
<p>Check if node &amp; npm are installed/working properly, normally you will get these results:</p>
<pre>
rpi-rw
​sudo apt-get remove nodered
pi@emonpi:~$ node -v
Segmentation fault
pi@emonpi:~$ npm -v
Segmentation fault</pre><p>Install ARM v6 (for a RasPi model B 512MB) LTS version of node.js</p>
<pre>
wget <a href="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz" title="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz">https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz</a>
tar -xvf node-v4.2.4-linux-armv6l.tar.gz
cd node-v4.2.4-linux-armv6l/
sudo cp -R * /usr/</pre><p>Check if Node-Red is working (can take up to 40-50s on a RasPi model B 512MB)</p>
<pre>
sudo service nodered start</pre><p>Re-enable the Node-Red service (maybe not nescessary, haven&#39;t tested it)</p>
<pre>
sudo systemctl daemon-reload
sudo systemctl enable nodered.service</pre><p>Check if Node-Red gets auto-started on boot:</p>
<pre>
sudo reboot</pre><h2>&nbsp;</h2>
<h2><strong>OpenHAB&nbsp;</strong></h2>
<p>OpenHAB is installed and setup with the basic skeleton OpenEnegyMonitor config. See <a href="http://openenergymonitor.blogspot.co.uk/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB blog post</a>.</p>
<p><strong>Access via</strong>:&nbsp;<a href="http://emonpi:8080/">http://emonpi:8080</a></p>
<p><strong>Authenticate</strong>: user &quot;pi&quot; and password &quot;emonpi2016&quot;</p>
<p>Change user name and password in&nbsp;/etc/openhab/configurations/users.cfg</p>
<p><strong>Configure:&nbsp;</strong>oem.items and oem.sites and located in git repo ~/oem-opemhab and symlinked&nbsp;to default.items and default.sitemap in&nbsp;relevant folders in&nbsp;to&nbsp;/etc/openhab/configurations.&nbsp;</p>
<p><em>Note:&nbsp;Config files are symlinked to our <a href="https://github.com/openenergymonitor/oem_openHab">oem_openhab</a> git repo so we can add functionally with git updates, pulled in automatically with emonPi&nbsp;update. It&#39;s recommended to setup your own sitemap and files config so your changes will not be overwritten by out updates: </em></p>
<p><em>e.g. dave.items and dave.sitemaps then navigate to&nbsp;<a href="http://emonpi8081/openhab.app?sitemap=dave">http://emonpi8081/openhab.app?sitemap=dave</a></em></p>
<p><img alt="" src="../../../1.bp.blogspot.com/-lAn2SNSzyLQ/VmVkYfsFDxI/AAAAAAABkic/Wqhp7g4R4uA/s400/OpenEnergyMonitor_openHAB.png" style="width: 385px; height: 400px;" /></p>
<h2>&nbsp;</h2>
<h2>LightWaveRF OOK RF Tx&nbsp;</h2>
<p>Service to control lightwaveRF plugs and relays via OOK (OOK Tx module installed on emonPi) controlled via MQTT&nbsp;and openHAB. See <a href="http://openenergymonitor.blogspot.com/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWaveRF OOK blog post</a>.</p>
<p><a href="../../../3.bp.blogspot.com/-ooKdNYl_8fA/Vlc-c0pyyJI/AAAAAAABj5o/M6wlA5rH_Ko/s640/emonPi_lwrf.png"><img alt="" src="../../../3.bp.blogspot.com/-ooKdNYl_8fA/Vlc-c0pyyJI/AAAAAAABj5o/M6wlA5rH_Ko/s640/emonPi_lwrf.png" style="height: 319px; width: 300px;" /></a></p>
<h1>Timezone&nbsp;</h1>
<p>The timezone can be set by running raspi-config then selecting &#39;Internationalisation Options&#39;:</p>
<pre>
sudo raspi-config</pre><p>Caution: don&#39;t try and run the &#39;Expand file-system option&#39; in raspi-config. This won&#39;t work because of the extra third partition.&nbsp;&nbsp;</p>
<ul></p>
<li>&nbsp;</li>
</ul>
  <div class="forum-topic-navigation clear-block">
          <a href="12182.html" class="topic-previous" title="Go to previous forum topic">‹ Error: connect ETIMEDOUT in Nodered</a>
              <a href="12179.html" class="topic-next" title="Go to next forum topic">Using EmonLib.h library ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-39352"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Fri, 12/02/2016 - 17:00.</div>
    <div class="content">
     <p>Glyn -&nbsp;I was reading through all of the above and when I got to the Node-RED section it dawned on me I don&rsquo;t know how to backup and restore my Node-RED flows and credentials. &nbsp;Can this be added to the &ldquo;Emoncms backup module&rdquo; at: <a href="https://github.com/emoncms/backup" title="https://github.com/emoncms/backup">https://github.com/emoncms/backup</a> sometime in the future? &nbsp;</p>
<p>Or if this is simple can you point me in the right direction? &nbsp;I&rsquo;ve done a google search for &quot;back-up restore node-red&quot;&nbsp;and there are lots of different suggestions but I&rsquo;m not sure which is correct. &nbsp;(but I do plan on figuring it out!)</p>
<p>This maybe needed for others for&nbsp;OpenHAB.</p>
<p>Jon</p>
<p>PS - Just want to say &quot;thank you&quot; to all for the hard work and dedication. &nbsp;You guys go above &amp; beyond in your support and kindness to the newbies like me!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39353"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Fri, 12/02/2016 - 18:13.</div>
    <div class="content">
     <p>+1 for the thank you and above and beyond...</p>
<p>1.2G is great as well Glyn, at least for cheapskates like me that have plenty of old small SD cards around &nbsp;:-)</p>
<p>Well done.</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39355"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Fri, 12/02/2016 - 20:17.</div>
    <div class="content">
     <p>Great work, can you advise how to disable both the Lightwave Module and also the LCD script as I need all the GPIO&nbsp;pins for Openhab&nbsp;use on my pi. On the previous image just disabling the LCD service didn&#39;t stop it taking one of the GPIO pins at boot..</p>
<p>thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39356"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9145.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mrpetrov&#039;s picture" title="mrpetrov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9145.html" title="View user profile.">mrpetrov</a> on Fri, 12/02/2016 - 20:32.</div>
    <div class="content">
     <p>Hi, Glyn, folks!</p>
<p>The instructions for the error that happens when upgrading from the previous December image proved usefull.</p>
<p>But... this being BETA - I&#39;m running the &quot;continuous sampling&quot; code on my EmonPi, and just running Administration-&gt;Update, restart, ssh in emonpi and updating to CS atmega firmware doesn&#39;t work well: the text on the LCD screen contains strange symbols, and the backlight doesn&#39;t work as it is supposed to. Otherwise everything is fine.</p>
<p>With that out of the way - why not switch all things BETA to &quot;continuous sampling&quot; or it is not as simple as I think it is?</p>
<p>Thanks!</p>
<p>Plamen Petrov</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39360"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 13/02/2016 - 00:38.</div>
    <div class="content">
     <p>Thanks for your kind words of support. It&#39;s still a work on progress but I feel that we&#39;re nearly there with this. It&#39;s been a long journey.&nbsp;</p>
<p>Exporting node red is not too difficult. In the editor just select all then choose export to clipboard and copy the resulting text. Then simply select import and paste into the new version. It&#39;s a good idea to save this text to a file as backup.&nbsp;</p>
<p>&nbsp;</p>
<p>&#39;Sudo service lwrfd stop&#39; will stop Lightwave RF mqtt service.&nbsp;</p>
<p>&nbsp;</p>
<p>We are still testing continuous sampling, we did initially has some memory instability issues. However the latest V3.2 update seems to have fixed this. Yes, reckon we will go for pointing towards continuous sampling in the beta version soon. What has been your experience with continuous sampling code?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39361"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 13/02/2016 - 00:39.</div>
    <div class="content">
     <p>What issues are you experiencing with the LCD? I will test with continuous sampling tomorrow.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39365"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sat, 13/02/2016 - 06:19.</div>
    <div class="content">
     <p>I still can&#39;t create new feeds with the new image.&nbsp;</p>
<p>As the backup module wouldn&#39;t show on my old image after following the instructions,&nbsp;I had to copy the data files over manually by:</p>
<p>1)Stopping Feedwriter<br />
2)Expanding the data partition on the card after it ran out of disk space by loading it up in GParted<br />
3)Restarting the Pi and&nbsp;copying the feedfiles&nbsp;into a temporary folder&nbsp;with WinSCP<br />
4)sudo copying the feedfiles from the temporary folder to /home/pi/data/phpfina<br />
5)CHOWN&nbsp;the files to www-data<br />
6)redis-cli &quot;FLUSH ALL&quot;<br />
7)SQLDump the old database and copy to new machine with WinSCP<br />
8)Import the database into the new images using the command line from the backup module<br />
9)Update the database from admin in the web interface<br />
10)Start feedwriter and after discovering the dashboard is frozen, reboot<br />
11)When its restarted,&nbsp;observe usual dashboard updating and feeds page showing correct update times together with inputs page working</p>
<p>I then tried to create a new feed, first by:</p>
<p>1)Add Kwh/d onto new feed<br />
2)Feed Undefined error appears in a popup, and after clicking OK, I discover the&nbsp;feed page is broken again.</p>
<p>So to try and get sensible logging out I:</p>
<p>1)Turned&nbsp;on Logging<br />
2)Disabled the Mosquitto Bridge so there was no incoming data,&nbsp;to keep the log clear of noise<br />
3)Stop Feedwriter service<br />
4)reimported&nbsp;the SQL Database<br />
5)redis-cli &quot;FLUSHALL&quot;<br />
6)Start Feedwriter service<br />
7)reboot<br />
8)check its all working again with the original number of feeds<br />
9)find an unused input, select log to feed with all the default settings and press OK.<br />
10)&quot;ERROR: Feed could not be created, undefined.&quot; appears in a popup<br />
11)Click OK<br />
12)Discover feeds page is broken again<br />
13)Write this post and add the log to it</p>
<p>The only change I have done to the image apart from expanding the data partition is setting my location and timezone using raspi-config, is&nbsp;adding a bridge to mosquitto so I can get some live data into the image for testing.</p>
<p>I also checked that /var/lib/redis was empty and it was</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39375"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9397.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Xino&#039;s picture" title="Xino&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9397.html" title="View user profile.">Xino</a> on Sat, 13/02/2016 - 12:36.</div>
    <div class="content">
     <p>Also getting the &quot;Feed Undefined error popup&quot; when&nbsp;creating new feeds.</p>
<p>One change in common to the image was expanding the data partition. I used the&nbsp;sdpart script.&nbsp;</p>
<p>&nbsp;</p>
<p>Another issue ...</p>
<p>Followed above instructions to install&nbsp;nodered on a&nbsp;Model B+ RPi but then get:</p>
<p>pi@emonpi:~/data/tmp/node-v4.2.4-linux-armv6l $ sudo service nodered start<br />
Failed to start nodered.service: Unit nodered.service failed to load: No such file or directory.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39377"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 13/02/2016 - 13:31.</div>
    <div class="content">
     <p>Luis - quick question (and slightly off topic!) - do you have any feedback on your experience of using the <a href="https://github.com/emoncms/usefulscripts">sdpart&nbsp;script</a>, did you have any difficulties or encounter any issues?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39379"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sat, 13/02/2016 - 18:22.</div>
    <div class="content">
     <p>Trying to debug this here, after a feed create error, is anyone else seeing segmentation errors in:</p>
<p>sudo tail -f /var/log/apache2/error.log</p>
<p>i.e:</p>
<p>[Sat Feb 13 18:17:40.611618 2016] [core:notice] [pid 14893] AH00052: child pid 15562 exit signal Segmentation fault (11)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39381"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sat, 13/02/2016 - 21:14.</div>
    <div class="content">
     <p>Looking for help with Backup (export) from a <strong>emonSD22Dec15</strong> image so I can move to the&nbsp;<strong>emonSD12Feb16</strong> image.</p>
<p>I&rsquo;m in the <strong>Data Migration</strong> section above and I am following the steps for the Emoncms backup module readme at <a href="https://github.com/emoncms/backup" title="https://github.com/emoncms/backup">https://github.com/emoncms/backup</a>. &nbsp;The install seemed to be fine and the new Backup webpage appears. &nbsp;But when I click the <strong>Create backup </strong>button there is only once response on the virtual Terminal window. &nbsp;It states <strong>Backup flag set&nbsp;</strong>and then nothing. &nbsp;No backup file is created in the /home/pi/data directory.</p>
<p>The config.cfg file looks correct and is the same as emonpi.default.config.cfg file.&nbsp;</p>
<p>I can launch service-runner by itself with <strong>/home/pi/backup/service-runner</strong> and the backup seems to run OK. &nbsp;</p>
<p>If I launch service-runner with output going to the service-runner.log then I get a permission error.</p>
<blockquote><p>pi@emonpi:~$ /home/pi/backup/service-runner &gt;&gt; /var/log/service-runner.log 2&gt;&amp;1<br />
-bash: /var/log/service-runner.log: Permission denied</p>
<p>&nbsp;</p>
</blockquote>
<p>So I am guessing service-runner&nbsp;is not running properly&nbsp;in crontab and I do not know where to look for these errors. Again I am just guessing, but should it be launched from the root crontab (sudo crontab?)?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39382"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 13/02/2016 - 21:17.</div>
    <div class="content">
     <p>We&#39;re working on the feed creating error...</p>
<p>@sheppy&nbsp;</p>
<p>Regarding installing the backup module on your old Pi, I have just updated the readme with some more detailed instructions. In particular I&#39;ve just&nbsp;corrected a mistake in the backup install instructions&nbsp;</p>
<p>ln -s /home/pi/backup /var/www/emoncms/backup&nbsp; has been corrected to ln -s /home/pi/backup/backup /var/www/emoncms/backup. Notice the extra backup folder depth. You can fix this on your old pi by deleating the symlink then creating another&nbsp;</p>
<p>sudo rm&nbsp;/var/www/emoncms/backup</p>
<p>ln -s /home/pi/backup/backup&nbsp;/var/www/emoncms/backup</p>
<p>As mentioned on the install insturctions make sure have have the latest version of Emoncms on stable branch and restart apache to enable symlinks. <a href="https://github.com/emoncms/backup">See full backup module install instructions</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39383"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sat, 13/02/2016 - 21:20.</div>
    <div class="content">
     <p>Glyn - How do I make sure I have the&nbsp;latest version of Emoncms on stable branch? &nbsp;Is there an easy way to check what branch I git (Stable vs Master vs something else)?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39384"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 13/02/2016 - 21:22.</div>
    <div class="content">
     <p>From your emoncms&nbsp;directory;</p>
<pre>
git branch&nbsp;-a</pre><p>...will show you which branch you are on.</p>
<p>If it&#39;s &#39;stable&#39;;</p>
<pre>git pull</pre><p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39385"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sat, 13/02/2016 - 21:38.</div>
    <div class="content">
     <p>I am assuming this is all OK... &nbsp;(see attached image)</p>
<p>What is the reference at the bottom to &quot;master&quot;?</p>
<p>From <a href="https://github.com/emoncms/emoncms" title="https://github.com/emoncms/emoncms">https://github.com/emoncms/emoncms</a><br />
&nbsp; &nbsp;b306c61..3cfa332 &nbsp;<strong>master</strong> &nbsp; &nbsp; -&gt; origin/<strong>master</strong></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39386"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sat, 13/02/2016 - 21:39.</div>
    <div class="content">
     <p>Yep, got that error the moment I clicked the add button on the new feed and before clicking OK on the error message</p>
<p>[Sun Feb 14 10:28:51.812926 2016] [core:notice] [pid 1105] AH00052: child pid 1173 exit signal Segmentation fault (11)</p>
<p>The log has no further entries until I clicked on the Feeds tab and then I got</p>
<p>[Sun Feb 14 10:30:34.926240 2016] [core:notice] [pid 1105] AH00052: child pid 1174 exit signal Segmentation fault (11)<br />
[Sun Feb 14 10:30:35.927686 2016] [core:notice] [pid 1105] AH00052: child pid 2351 exit signal Segmentation fault (11)<br />
[Sun Feb 14 10:30:39.935921 2016] [core:notice] [pid 1105] AH00052: child pid 2348 exit signal Segmentation fault (11)<br />
[Sun Feb 14 10:30:39.936255 2016] [core:notice] [pid 1105] AH00052: child pid 2350 exit signal Segmentation fault (11)<br />
[Sun Feb 14 10:30:40.937523 2016] [core:notice] [pid 1105] AH00052: child pid 2352 exit signal Segmentation fault (11)</p>
<p>It then settles to adding the same error every 5 seconds or so whilst the browser is sitting on the blank feeds page. Clicking back on the inputs page makes the errors stop.</p>
<p>Comparing the 22Dec Image Apache2 Settings with the 12Feb&nbsp;settings yesterday I noticed a few differences but changing the 12Feb Image to be the same as the 22Dec didn&#39;t cure it, assuming I got them all. I found differences in files&nbsp;in:</p>
<p>/etc/apache2/ennvars<br />
/etc/apache2/sites-enabled/working000-default.conf<br />
/etc/apache2/apache2.conf</p>
<p>I&#39;ve also tried copying the emoncms folder from the working one to the non working one and it didn&#39;t change anything. I did that from Samba so permissions could have changed when I did it. Obviously I restored the image before I did other tests.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39387"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 13/02/2016 - 21:41.</div>
    <div class="content">
     <p>Jon, that looks fine, you are now up to date on the stable branch.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39388"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sun, 14/02/2016 - 02:39.</div>
    <div class="content">
     <p>In the build guide at&nbsp;https://github.com/emoncms/emoncms/blob/master/docs/RaspberryPi/readme.md</p>
<p>it mentions</p>
<p>&quot;For&nbsp;&lt;Directory /&gt;&nbsp;and&nbsp;&lt;Directory /var/www/&gt;&nbsp;change&nbsp;AllowOverride None&nbsp;to&nbsp;AllowOverride All. This should be on lines 155 and 166 of&nbsp;/etc/apache2/apache2.conf&quot;</p>
<p>This hasn&#39;t been done on the 22 Dec Image, changing it back to defaults sadly, at least on my system doesn&#39;t seem to fix it.</p>
<p>One other thing I have noticed simply because my test system has a monitor on the end of it, is this which may be causing problems:</p>
<p>Feb 14 11:06:10 emonpi systemd[1]: Starting /etc/rc.local Compatibility...</p>
<p>Feb 14 11:06:10 emonpi redis-server[753]: *** FATAL CONFIG FILE ERROR ***<br />
Feb 14 11:06:10 emonpi redis-server[753]: Reading the configuration file, at line 103<br />
Feb 14 11:06:10 emonpi redis-server[753]: &gt;&gt;&gt; &#39;logfile /var/log/redis/redis-server.log&#39;<br />
Feb 14 11:06:10 emonpi redis-server[753]: Can&#39;t open the log file: No such file or directory</p>
<p>Feb 14 11:06:37 emonpi systemd[1]: rc-local.service: control process exited, code=exited status=127<br />
Feb 14 11:06:37 emonpi systemd[1]: Failed to start /etc/rc.local Compatibility.</p>
<p>Thing is there is an empty apache2 directory in /var/log which had&nbsp;to be being created by something, so maybe that error is spurious and the file gets loaded later.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39394"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 13/02/2016 - 22:55.</div>
    <div class="content">
     <p>You are on Stable branch. The little * indicates this. Stable is the default branch for emonPi images and recommended for normal users health and happiness :-). It usually only lags the master branch by a week or so. Just giving us chance to test new changes.&nbsp;&nbsp;</p>
<p>Thanks for the logs, we&#39;re continuing to debug this. It&#39;s strange the issue only effects Inputs posted from HTTP rather than posted from the mqtt_input script. This is why we did not notice this sooner, I had mainly bee testing with inputs posted from emonHub&nbsp;via mqtt_input script&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39397"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 13/02/2016 - 23:15.</div>
    <div class="content">
     <p>Could I ask you to check if the feed creation issue persists after a factory reset. Caution: you will loose the Emoncms account any any feed data</p>
<p>$ rpi-rw</p>
<p>$ cd ~/emonpi</p>
<p>$ sudo su</p>
<p>$ ./factoryreset</p>
<p>Let the Pi reboot&nbsp;</p>
<p>I&#39;ve just done a factory reset and I can now create feeds from HTTP inputs&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39403"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sun, 14/02/2016 - 03:31.</div>
    <div class="content">
     <p>@glyn,</p>
<p>I just did the following:</p>
<p>reset it,<br />
reinstated my mosquitto bridge so I had inputs to create feeds from<br />
created a new user, set the timezone &amp; updated the database<br />
created 12 feeds using default options, and all looked OK<br />
then rebooted<br />
feeds list is broken after the reboot</p>
<p>I did this twice so its very repeatable, something bad happens during the reboot</p>
<p>I also had to restart the mqtt_input service after each reboot before the inputs would update</p>
<p>In case you want to recreate the bridge too I&#39;ve included the details below, its useful to test from a live system without adding a&nbsp;RFM69Pi</p>
<p>This goes at the bottom of /etc/mosquitto/mosquitto.conf and my live system is on a private network so it has an open mqtt&nbsp;server</p>
<p>connection oldimage<br />
try_private false<br />
address 192.168.1.10<br />
start_type automatic<br />
local_username USERNAME<br />
local_password MQTTPASSWORD<br />
clientid newimage<br />
notifications true<br />
topic # in 0 emon/ emon/</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39404"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sun, 14/02/2016 - 05:43.</div>
    <div class="content">
     <p>@Glyn Just reading through this thread again, aren&#39;t my inputs created by mqtt_input? They stop updating until I restart mqtt_input&nbsp;after a reboot.</p>
<p>ALSO</p>
<p>@Glyn&nbsp;after reading @ Jon&#39;s post about service-runner permission errors and reinstalling the backup and link, I now have a working backup after I changed the&nbsp;crontab&nbsp;-e entry to read</p>
<p>* * * * * ~/backup/service-runner &gt;&gt; /home/pi/data/service-runner.log 2&gt;&amp;1</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39412"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 14/02/2016 - 12:53.</div>
    <div class="content">
     <p>@Jon Sorry I missed you post earlier regarding service-runner.log location. Thanks @sheppy for bringing to attention.&nbsp;I have added option in backup readme&nbsp;to point the log to ~/data which does not require any permissions. If using /var/log (which is my preference) the log file and permissions need to be created on startup using /etc/rc.local since the entire /var/log is mounted as temp fs in RAM on the emonPi. See example in emonpi&nbsp;rc.local:</p>
<p><a href="https://github.com/openenergymonitor/emonpi/blob/master/rc.local_jessieminimal#L12" title="https://github.com/openenergymonitor/emonpi/blob/master/rc.local_jessieminimal#L12">https://github.com/openenergymonitor/emonpi/blob/master/rc.local_jessiem...</a></p>
<p>@sheppy I have come to the same conclusion that it&#39;s the reboot not the source of the input (HTTP/MQTT) which determined if the feeds are saved or not. We&#39;re still investigating this. There is something strange going on here with Apache...&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39415"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jason&#039;s picture" title="jason&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9478.html" title="View user profile.">jason</a> on Sun, 14/02/2016 - 19:43.</div>
    <div class="content">
     <p>Hi Glyn</p>
<p>Just trying this beta for the first time - and I&#39;m new to the forum.&nbsp;</p>
<p>I started with the clean image, and immediately&nbsp;tried to load in my data from a&nbsp;backup - the result was&nbsp;not being able to log into emoncms at all. I noticed that &quot;data/emoncms.conf&quot; was empty so I did a factory reset ...</p>
<p>After the reset / reboot,&nbsp;I re-registered a user and logged into emoncms.&nbsp;I still cannot create a feed.</p>
<p>I can do some more&nbsp;debug if you like.</p>
<p>Bugs found during this process below :-)&nbsp;</p>
<p>Jason&nbsp;</p>
<p>BUG:&nbsp;When selecting the backup filename, the code will allow a filename of &quot;backup.tgz&quot; - which then fails to import. Renaming to &quot;backup.tar.gz&quot; will work !</p>
<p>BUG: emonpi password should be reset on &quot;factory reset&quot;</p>
<p>BUG: Cannot add feeds following factory reset</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39418"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 14/02/2016 - 21:13.</div>
    <div class="content">
     <p>Could someone experiencing this problem please tell me what you get if you;</p>
<pre>
ls -la /etc/rc.local</pre><p>and also</p>
<pre>ls /home/pi/emonpi/rc*</pre><p>I&#39;m asking because I think theres a typo in the <a href="https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md">SD Card Build guide</a>&nbsp;in section 8.</p>
<p>&nbsp;<img alt="" src="../sites/default/files/rclocal.png" style="width: 630px; height: 124px;" /></p>
<p>This appears to be incorrectly&nbsp;creating the symlink, ie emonpi/emonpi instead of emonpi, which would mean that rc.local (which creates the folders and log files in tmp following a reboot) is not loading.</p>
<p>Thanks</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39419"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sun, 14/02/2016 - 21:52.</div>
    <div class="content">
     <p>@glyn&nbsp;backup changes completed and it now works. My old image was using the rc.local linked from /var/www/emoncms/scripts as described in the build guide - now all corrected to use the updated one from your link. I also manually reconfigured logrotate&nbsp;to use the version in emonpi, as last time I did a git pull on emoncms&nbsp;it moaned about logrotate, and after I stashed it &amp; updated it broke my live system until I added it back.</p>
<p>@paulreed which issue are you chasing? I have the feed creation problem, and ls -la /etc/rc.local gives:</p>
<p>lrwxrwxrwx 1 root root 38 Jan 27 23:50 /etc/rc.local -&gt; /home/pi/emonpi/rc.local_jessieminimal</p>
<p>rc.local&nbsp;no longer errors on the monitor during&nbsp;bootup since @glyn&#39;s&nbsp;update, but it did with the 12/2&nbsp;image before</p>
<p>ls /home/pi/emonpi/rc* gives:<br />
/home/pi/emonpi/rc.local &nbsp;/home/pi/emonpi/rc.local_jessieminimal</p>
<p>​Both commands are on a factory reset version of 12/2 so it would have had the update on first boot run, and I&#39;ve also updated&nbsp;/home/pi/emonpi/rc.local_jessieminimal&nbsp;by copy and pasting into nano,&nbsp;but haven&#39;t touched the symbolic link</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39420"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sun, 14/02/2016 - 21:51.</div>
    <div class="content">
     <p>Paul - I get:</p>
<p>pi@emonpi:~/data/myApps$ ls -la /etc/rc.local</p>
<p>lrwxrwxrwx 1 root root 24 Dec 15 09:50 /etc/rc.local -&gt; /home/pi/emonpi/rc.local</p>
<p>pi@emonpi:~/data/myApps$ ls /home/pi/emonpi/rc*</p>
<p>/home/pi/emonpi/rc.local&nbsp; /home/pi/emonpi/rc.local_jessieminimal</p>
<p>pi@emonpi:~/data/myApps$&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39421"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 14/02/2016 - 21:59.</div>
    <div class="content">
     <p>Thanks.</p>
<p>I stumbled upon the typo whilst looking for something else, obviously that has now been sorted - but not in the build guide.</p>
<p>I&#39;ll send a<a href="https://github.com/openenergymonitor/emonpi/pull/7/files"> git pull request</a> to correct it.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39423"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sun, 14/02/2016 - 22:17.</div>
    <div class="content">
     <p>@glyn really pleased you can recreate the problem, let me know if you need anything testing. I&#39;m 13 hours ahead of the UK right now so please consider me the night shift. Currently doing paperwork so any excuse to be distracted gratefully received!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39441"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/450.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Mon, 15/02/2016 - 13:08.</div>
    <div class="content">
     <p>Just to let you know that I installed this version on a PI2 yesterday without any problems.</p>
<p>The build has come on a long way in the past few versions - well done!</p>
<p>I&#39;m planning to get back into the &quot;monitoring thing&quot; as I&#39;ve got a bit more spare time now.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39453"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 15/02/2016 - 23:37.</div>
    <div class="content">
     <p>We&#39;re struggling to get to the bottom of why apache is throwing segmentation errors ans having trouble loading creating and loading Feeds. These are the sorts of errors I can see in /var/log/apache2/error.log (or /var/log/error.log if you have not yet updated to latest version).&nbsp;</p>
<p>[Mon Feb 15 23:27:21.274566 2016] [core:notice] [pid 1261] AH00052: child pid 2097 exit signal Segmentation fault (11)<br />
[Mon Feb 15 23:27:21.274728 2016] [core:notice] [pid 1261] AH00052: child pid 24964 exit signal Segmentation fault (11)<br />
[Mon Feb 15 23:27:21.274893 2016] [core:notice] [pid 1261] AH00052: child pid 24966 exit signal Segmentation fault (11)</p>
<p>Can you confirm that these errors are the same that you are experiencing? It&#39;s strange that the Dec22 image that I have been running totally stable since December does not have this issue and is running the same version of apache,&nbsp;MYSQL and redis&nbsp;and should have the&nbsp;same config. The only difference I can see is&nbsp;&nbsp; PHP version&nbsp;:</p>
<p>Dec22 image:&nbsp;5.6.14-0+deb8u1 (Zend Version 2.6.0)</p>
<p>Feb16 Image:&nbsp;5.6.17-0+deb8u1 (Zend Version 2.6.0)</p>
<p>I have changed to name of this thread from beta &gt; alpha to alert folks to the issues this build is experiencing.&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;hanks you so much for helping with debugging, I know how much time this can&nbsp;absorb!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39454"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 16/02/2016 - 00:10.</div>
    <div class="content">
     <p>@jason&nbsp;</p>
<p>Thanks for your feedback:&nbsp;</p>
<p>BUG: When selecting the backup filename, the code will allow a filename of &quot;backup.tgz&quot; - which then fails to import. Renaming to &quot;backup.tar.gz&quot; will work !</p>
<p><strong><a href="https://github.com/emoncms/backup/commit/f26564d58b5586a765a691a2df04453b0f362ef2">Fixed</a>.</strong></p>
<p>BUG: emonpi password should be reset on &quot;factory reset&quot;:</p>
<p><strong><a href="https://github.com/openenergymonitor/emonpi/commit/39038dd2c5858579aa3262bdb0cec86e839b7ee8">Fixed</a>&nbsp;</strong></p>
<p>BUG: Cannot add feeds following factory reset</p>
<p><strong>Still working on this one,&nbsp;see post above...&nbsp;</strong></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39455"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Tue, 16/02/2016 - 00:16.</div>
    <div class="content">
     <p>@glyn I did a search on signal segmentation fault and it may be something to do with PHP memory errors. - Maybe something is going into an infinite loop until it runs out of memory and spits the error? Just a thought.</p>
<p>See&nbsp;<br />
<a href="http://unix.stackexchange.com/questions/199561/apache-and-php-not-working-child-pid-xxx-exit-signal-segmentation-fault-11" title="http://unix.stackexchange.com/questions/199561/apache-and-php-not-working-child-pid-xxx-exit-signal-segmentation-fault-11">http://unix.stackexchange.com/questions/199561/apache-and-php-not-workin...</a><br />
from just under a year ago</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39457"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Tue, 16/02/2016 - 09:30.</div>
    <div class="content">
     <p>@Glyn, I get the same errors -&nbsp;see my post above dated&nbsp;14/02/2016 - 09:39.</p>
<p>A quick google suggests that error message can be logged by PHP out of memory errors so maybe it goes into a continuous loop until it runs out of memory and spits the error, meaning the error is a symptom, rather than the cause&nbsp;of the problem?</p>
<p>As the problem appears when creating new feeds on a brand new installation after a reboot, could it be something isn&#39;t being saved&nbsp;properly during a reboot?</p>
<p>(Apologies for the duplicate content, the first post vanished without a trace and left no clues about where it&#39;d gone&nbsp;behind)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39466"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 16/02/2016 - 14:41.</div>
    <div class="content">
     <p>We have a solution!&nbsp;</p>
<p>It turns out that php5-redis&nbsp;needed to be updated to work with the latest version of php. The latest version of php5-redis available through Debian&nbsp;Raspbian&nbsp;Jessie and currently installed on the emonSD-12Feb16 image is 2.2.5-1.</p>
<p>You can check php5-redis version in the sources&nbsp;with&nbsp;</p>
<pre>
sudo apt-cache show php5-redis</pre><p>Installing the latest stable version of redis&nbsp;(2.2.7)&nbsp;direct from phpredis github fixed the issue. Here are the steps to update php5-redis:&nbsp;</p>
<pre>
git clone --branch 2.2.7 <a href="https://github.com/phpredis/phpredis" title="https://github.com/phpredis/phpredis">https://github.com/phpredis/phpredis</a>
cd phpredis
​cat php_redis.h | grep VERSION
phpize
./configure 
sudo make 
sudo make install</pre><p>Please could you confirm this fixes the issue for you?&nbsp;I will release another image with this fix.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39467"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Tue, 16/02/2016 - 18:48.</div>
    <div class="content">
     <p>Fantastic news! I&#39;ll test it later today&nbsp;whilst the UK is in bed&nbsp;and report back.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39470"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Tue, 16/02/2016 - 21:39.</div>
    <div class="content">
     <p>I don&#39;t have the&nbsp;apache segmentation errors above - I haven&#39;t gotten that far in the upgrade.</p>
<p>I cannot get Import Backup to work on the emoncms Backup webpage for the&nbsp;emonSD-12Feb16 alpha image. I get the error &ldquo;There was an error uploading the file, please try again!&rdquo;. &nbsp;So I added the emoncms-backup-2016-02-16.tar.gz file to the /home/pi/data/uploads directory and ran emoncms-import.sh. &nbsp;If this is an appropriate work around, then we may need more space for /home/pi/data. &nbsp;</p>
<p>I ran emoncms-import.sh and ended up with lots of &ldquo;No space left on device&rdquo; errors.</p>
<blockquote><pre>
=== Emoncms import start ===
Tue Feb 16 11:38:15 CST 2016
Reading ~/backup/config.cfg....
Location of mysql database: /home/pi/data
Location of emonhub.conf: /home/pi/data
Location of emoncms.conf: /home/pi/data
Location of Emoncms: /var/www/emoncms
Backup destination: /home/pi/data
Backup source path: /home/pi/data/uploads
Starting import from /home/pi/data/uploads to /home/pi/data...
Image version: emonSD-12Feb16
new image
Backup found: emoncms-backup-2016-02-16.tar.gz starting import..
Decompressing backup..
Restore phpfina and phptimeseries data folders...
cp: error writing &lsquo;/home/pi/data/phpfina/1.dat&rsquo;: No space left on device
cp: failed to extend &lsquo;/home/pi/data/phpfina/1.dat&rsquo;: No space left on device
cp: error writing &lsquo;/home/pi/data/phpfina/18.dat&rsquo;: No space left on device  ...
</pre></blockquote>
<p>Here is the disk space available after the above error:</p>
<blockquote><pre>
pi@emonpi:~/backup $ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/root       3.4G  1.7G  1.6G  52% /
. . .
/dev/mmcblk0p1   60M   20M   41M  34% /boot
<strong>/dev/mmcblk0p3  194M  194M     0 100% /home/pi/data</strong></pre></blockquote>
<p>For what it is worth I noticed on the emonSD22Dec15 image the /dev/mmcblk0p3&nbsp;or&nbsp;/home/pi/data&nbsp;size was 477 MB (vs. 194 MB and on the emonSD-12Feb16 image )</p>
<blockquote><pre>
pi@emonpi:~$ df -h | grep &quot;^/dev&quot;
/dev/root       3.1G  1.5G  1.4G  52% /
/dev/mmcblk0p1   61M   20M   42M  32% /boot
/dev/mmcblk0p3  477M  205M  248M  46% /home/pi/data
</pre></blockquote>
<p>&nbsp;Let me know if more detail is needed.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39473"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9397.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Xino&#039;s picture" title="Xino&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9397.html" title="View user profile.">Xino</a> on Tue, 16/02/2016 - 22:33.</div>
    <div class="content">
     <p>@glyn...Installing the latest version of redis&nbsp;(2.2.7)&nbsp;fixed the feed segmentation bug.&nbsp;Great support.&nbsp;Thank you!&nbsp;</p>
<p>BR</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39474"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 16/02/2016 - 23:37.</div>
    <div class="content">
     <p>@Jon how big is the backup file&nbsp;you are trying to&nbsp;restore?! Looking at my Emoncms account I have a feed with 6 years of power data @ 10s intervals is 65Mb.&nbsp;</p>
<p>The ~/data partition was sized so that it would fit on a 4GB SD card image. If you have access to a larger card you could use Gparted&nbsp;on Ubuntu Linux or equivalent to expand the partition size.&nbsp;</p>
<p>I would recommend you implement the php5-redis error fix anyway. I am currently uploading an emonSD16Feb16 image with the latest updates and the php5-redis bug fix. I will post the new image on&nbsp;another &#39;beta&#39;&nbsp;&nbsp;thread tomorrow morning.</p>
<p>@Xino&nbsp;your welcome :-) .Happy to hear it&#39;s working for you. It feeliks like it&#39;s been a long journey to get this this point, I feel like we&#39;re nearly ready for a &#39;release&#39; image :-D.&nbsp;Thanks again for all your helping to debug. Thanks must go to @trystanlea for helping me to identify and fix the segmentation errors&nbsp;php5-redis&nbsp;bug. &nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39475"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 17/02/2016 - 00:15.</div>
    <div class="content">
     <p>@Glyn - the&nbsp;emoncms-backup-2016-02-16.tar.gz is 33 MB and the uncompressed is 99 MB. &nbsp;My emonPi emoncms is less than 1 year&nbsp;worth of data @ 10 sec intervals except for environmental items that are 1 or 2 min intervals.&nbsp;I will confirm the intervals and scan for feeds I can delete. &nbsp;Tnx!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39477"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Wed, 17/02/2016 - 04:31.</div>
    <div class="content">
     <p>@Glyn, I can now create feeds on both of my test builds and also on my live system - thanks very much!</p>
<p>I too have the &quot;There was an error uploading the file, please try again!&quot; problem when trying to restore a backup to the latest image.&nbsp;I have 3 gig free diskspace on the 4GB data partition, with a 47MB Backup file.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39478"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 17/02/2016 - 09:21.</div>
    <div class="content">
     <p>New image has been posted (emonSD-16Feb16) including the latest changes:&nbsp;</p>
<p><a href="12189.html" title="http://openenergymonitor.org/emon/node/12189">http://openenergymonitor.org/emon/node/12189</a></p>
<p>Would you mind sending me via dropbox your backup file so I can try and debug the restore issue. A workaround would be to manually copy the file into ~/data/uploads</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39481"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jason&#039;s picture" title="jason&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9478.html" title="View user profile.">jason</a> on Wed, 17/02/2016 - 12:07.</div>
    <div class="content">
     <p>@glyn - no problem.</p>
<p>I&#39;m now going to try&nbsp;a migration - assuming that other with more experience will be checking functionality.&nbsp;So, here&#39;s what happens:</p>
<p>1 - Start&nbsp;with Jun15&nbsp;image, added backup, then manually ran emoncms-export.sh (did not spend time getting backup to work in the GUI)</p>
<p>2 - On a new SD, run the 16feb16sd image. Check that input is working, etc.</p>
<p>3 - Restore from backup in #1</p>
<p>4 - Confirm that inputs look ok :-)</p>
<p>5 - Confirm that feeds look ok ... er ... :-(</p>
<p>The Feeds page says &quot;loading&quot; and sticks there.</p>
<p>Try to create a feed from the input - message &quot;ERROR: Feed could not be created, undefined&quot;</p>
<p>Try to read a feed using the API &quot;http://192.168.16.31/emoncms/feed/list.json&quot;&nbsp;- and get a PHP error:</p>
<pre>
Fatal error: Uncaught exception &#39;Exception&#39; with message &#39;ABORTED: Engine id &#39;1&#39; is not supported.&#39; in /var/www/emoncms/Modules/feed/feed_model.php:71 
Stack trace: 
#0 /var/www/emoncms/Modules/feed/feed_model.php(396): Feed-&gt;EngineClass(&#39;1&#39;) 
#1 /var/www/emoncms/Modules/feed/feed_model.php(279): Feed-&gt;get_timevalue(&#39;10&#39;) 
#2 /var/www/emoncms/Modules/feed/feed_model.php(253): Feed-&gt;redis_get_user_feeds(1) 
#3 /var/www/emoncms/Modules/feed/feed_controller.php(38): Feed-&gt;get_user_feeds(&#39;1&#39;) 
#4 /var/www/emoncms/core.php(64): feed_controller() 
#5 /var/www/emoncms/index.php(146): controller(&#39;feed&#39;) 
#6 {main} thrown in&nbsp;/var/www/emoncms/Modules/feed/feed_model.php&nbsp;on line&nbsp;71</pre><p>&nbsp;</p>
<p>... tried a reboot, same situation.</p>
<p>Also looked at logs in &quot;Admin-&gt;Logger&quot; and saw:</p>
<pre>
2016-02-17 11:58:42.903|WARN|phpmqtt_input.php|Subscribing to: emon/#
2016-02-17 11:58:42.904|WARN|phpmqtt_input.php|Not connected, retrying connection
2016-02-17 11:58:42.905|WARN|phpmqtt_input.php|Connecting to MQTT server: Connection Accepted.: code: 0 
2016-02-17 11:58:42.906|WARN|phpmqtt_input.php|Subscribed to topic: emon/#
2016-02-17 11:59:18.463|ERROR|feed_model.php|EngineClass() Engine id &#39;1&#39; is not supported.
2016-02-17 11:59:22.067|ERROR|feed_model.php|EngineClass() Engine id &#39;1&#39; is not supported.</pre><p>I will try to look at this - but any pointers would be useful.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39482"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 17/02/2016 - 12:11.</div>
    <div class="content">
     <p>@jason&nbsp;</p>
<p>Have you applied the update to php5-redis as described on my post above yesterday?</p>
<p>Or even better try the <a href="12189.html">latest image</a> (posted this morning)&nbsp;with the fix all&nbsp;ready included. Please post on the new thread for issues regarding the new image.&nbsp;</p>
<p>It sounds like you are doing everything correct. I would be interested to hear how you get on with the new iamge. What size is the .tar.gz backup file you are restoring?&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39483"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jason&#039;s picture" title="jason&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9478.html" title="View user profile.">jason</a> on Wed, 17/02/2016 - 12:18.</div>
    <div class="content">
     <p>Now trying &quot;factory reset&quot;</p>
<p>So, from message above, did a factory reset, which should put everything back in place. So tests ...</p>
<p>1 - run factory reset under a root shell - ok</p>
<p>2 - login - password now the &quot;factory&quot; one :-)</p>
<p>3 - Check inputs - working :-)</p>
<p>4 - Go to feeds page - all seems ok :-)</p>
<p>5 - Back to inputs, hit the spanner to create a feed&nbsp;</p>
<p>6 - Hit &quot;add&quot; and ... :-(</p>
<p>When I hit &quot;Add&quot;, I get, in a dialogue box:</p>
<pre>
ERROR: Feed could not be created, undefined</pre><p>What to do now ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39484"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9478.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jason&#039;s picture" title="jason&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (ALPHA): LATEST emonSD12Feb16 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built SD card image</h3>

    <div class="submitted">Submitted by <a href="../user/9478.html" title="View user profile.">jason</a> on Wed, 17/02/2016 - 12:35.</div>
    <div class="content">
     <p>@Glyn - this is all with the new image !</p>
<p>I&#39;ll check the php5-redis&nbsp;version ...</p>
<p>*** Moving to new thread ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12164"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-qIsVFtPYKPCpU6nlIv3ypjyB6npH1JC6Eb6-ca4y7uc" value="form-qIsVFtPYKPCpU6nlIv3ypjyB6npH1JC6Eb6-ca4y7uc"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
