<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2425 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:54:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Old version help? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Old version help?</h3>
        <span class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sat, 01/06/2013 - 14:58</span>
        <div class="content"><p>Can you help with the troubleshooting of being unable to login using old version? I just did a git&nbsp;pull and there are some changes not quite right ....&nbsp;</p>
<p>According to the troubleshooting website, I manually add in a small function call ... <a href="http://emoncms.org/site/docs/troubleshooting" title="http://emoncms.org/site/docs/troubleshooting">http://emoncms.org/site/docs/troubleshooting</a></p>
<p>But I can&#39;t login ..</p>
<p>I edited the call, trying</p>
<p>include(&#39;Lib/dbschemasetup.php&#39;);<br />
	db_schema_setup(load_db_schema());</p>
<p>in index.php</p>
<p>however, getting &hellip;</p>
<p>Warning: Missing argument 3 for db_schema_setup(), called in /var/www/emoncms/index.php on line 44 and defined in /var/www/emoncms/Lib/dbschemasetup.php on line 18</p>
<p>Warning: key() expects parameter 1 to be array, null given in /var/www/emoncms/Lib/dbschemasetup.php on line 21</p>
<p>Clearly the instructions have changed &hellip; any ideas??</p>
<p>Thanks</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2418.html" class="topic-previous" title="Go to previous forum topic">‹ RFM2PiPHP service and RFM12Pi board</a>
              <a href="2414.html" class="topic-next" title="Go to next forum topic">emoncms.org charts not displaying (Chome specific issue) ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-12496"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Old version help?</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sat, 01/06/2013 - 16:42.</div>
    <div class="content">
     <p>So, am I right in thinking that the new emoncms version has overwritten the place for the old version on github?</p>
<p>If so, that&#39;s really annoying! My heating systems and monitoring systems are all using this, and by updating (with too much bravado) my own personal plugins are now failing too. In fact, all my systems have failed as I cannot get in to update the db via the CMS. So, looks like I will be working this evening. Damn. Just spent the last hour figuring it all out, updating all my Pi&#39;s ... &nbsp;I won&#39;t bother trying to roll back to an old version or anything, now I&#39;m here I have to move forward.&nbsp;</p>
<p>Appreciate some advice on this too .. I have an mqtt import plugin based on raspberrypi plugin (<a href="https://github.com/elyobelyob/mqtt" title="https://github.com/elyobelyob/mqtt">https://github.com/elyobelyob/mqtt</a>) .. it seems the *_run.php file has changed how it connects with everything (probably for the better with more OO approach). Anything else changed?</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12497"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Old version help?</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sat, 01/06/2013 - 16:46.</div>
    <div class="content">
     <p>Actually, I see emoncms3 is still seperated. I guess I may as well move to that and hope for the best!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12499"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Old version help?</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sat, 01/06/2013 - 16:54.</div>
    <div class="content">
     <p>In answer to my first question in the first post ..&nbsp;</p>
<p>db_schema_setup($mysqli,load_db_schema(),true);</p>
<p>Right .. database up to date ... :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12500"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Old version help?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 01/06/2013 - 16:56.</div>
    <div class="content">
     <p>Trystan says to follow the steps here <a class="moz-txt-link-freetext" href="http://emoncms.org/site/docs/upgrading">http://emoncms.org/site/docs/upgrading</a> setting $updatelogin = true; and then run the database updater <a class="moz-txt-link-freetext" href="http://localhost/emoncms/admin/view">http://localhost/emoncms/admin/view</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12501"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Old version help?</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sat, 01/06/2013 - 17:57.</div>
    <div class="content">
     <p>Does anyone else run their system on a bespoke port? I previously rewrote the raspberrypi_run to write direct to the db, which I&#39;ve now lost. Do I need to fill in the remote emoncms server details for domain:3333 as a domain name?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12502"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Old version help?</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sat, 01/06/2013 - 17:57.</div>
    <div class="content">
     <p>Thanks will look through that. Not sure what version I have upgraded too.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12503"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Old version help?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 01/06/2013 - 21:35.</div>
    <div class="content">
     <p><em>Sometimes </em>the version information is in the readme.md file. The released Version 5 and the &#39;dev&#39; version that preceded it are both labelled &quot;# Emoncms v5.0&quot;. The version that preceded it was just &quot;# Emoncms&quot;.</p>
<p>[I copied the &quot;v5.0&quot; line into each of the major source files so I know which version I have installed. The version information really ought to be in <u>every</u> file.]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12504"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2125.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2125.jpg" alt="elyobelyob&#039;s picture" title="elyobelyob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Old version help?</h3>

    <div class="submitted">Submitted by <a href="../user/2125.html" title="View user profile.">elyobelyob</a> on Sat, 01/06/2013 - 23:22.</div>
    <div class="content">
     <p>Well, after a number of hours, I&#39;ve managed to get the system back up. One major thing I noticed was hat the remote server reply had a blank line, which meant that $result[0] failed to fetch &#39;t&#39; .. $result[1] works. Not sure why .. as I bodged to get going.</p>
<p>Also, a lot of my inputs weren&#39;t converted to the new node id (i.e. moving from node45_1_1 to 1) etc ...&nbsp;</p>
<p>Basically, I altered both raspberrypi_model and raspberrypi_model .. some of it to allow handling ports.</p>
<p>I guess I need to work out how to submit these changes to dev, get events working again and find out how to rewrite my mqtt plugin.</p>
<p>At least now my heating system will be back online (although my fall back worked perfectly, which was to switch back to the stock drayton controller).</p>
<p>All I had wanted to do was update to get quicker multigraphs ;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2425"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-zMnAekWVi1xyA_osIuQ-M8wd-_1vANURacesutG-vBA" value="form-zMnAekWVi1xyA_osIuQ-M8wd-_1vANURacesutG-vBA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2425 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:54:01 GMT -->
</html>
