<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2461 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:26:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Reading Ampy meters via the inductive serial port | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Reading Ampy meters via the inductive serial port</h3>
        <span class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Wed, 12/06/2013 - 10:34</span>
        <div class="content"><p>Has anyone else looked into this?</p>
<p>I managed to get mine working yesterday...</p>
<p><img alt="" src="../sites/default/files/meter_reader_3dp.jpg" /></p>
<p>The best bit is that the readings are in Wh so you can see each pulse.</p>
<p>Unfortunately it doesn&#39;t include the reverse register, just the kWh and kWArh registers.</p>
<p>I don&#39;t think all Ampy meters have this feature either.</p>
<p>The little black box on the right is my inductive pickup.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5348.html" class="topic-previous" title="Go to previous forum topic">‹ 230V to 127V - what are the changes?</a>
              <a href="5345.html" class="topic-next" title="Go to next forum topic">RFM69CW ISP Upload Problem - Reset timming  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-13539"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jzaw&#039;s picture" title="jzaw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by jzaw (not verified) on Wed, 10/07/2013 - 08:29.</div>
    <div class="content">
     <p>FAB!</p>
<p>you simply have to give us more details!</p>
<p>What are he devices involved and sources of such devices?</p>
<p>this looks like exactly what i want</p>
<p>I&#39;m tired of the current cost clamp being so badly accurate and reading FLAG registers might prove expensive and less flexible - unless someone knows different?</p>
<p>&nbsp;</p>
<p>cheers</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13546"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 10/07/2013 - 22:12.</div>
    <div class="content">
     <p>Very nice! nice work!</p>
<p>A similar thing can be done with the A100C Elster meter&#39;s that are typically used with Solar PV installations in the UK but using an IR&nbsp;transistor instead to read from the&nbsp;IrDA port&nbsp;http://openenergymonitor.blogspot.co.uk/2012/08/reading-watt-hour-data-from-elster.html</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15963"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4591.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MattyZee&#039;s picture" title="MattyZee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/4591.html" title="View user profile.">MattyZee</a> on Sun, 27/10/2013 - 07:03.</div>
    <div class="content">
     <p>I&#39;m interested in doing this. Do you have any details on the Loop Pickup sensor you used/made?</p>
<p>Is the information the same as you can get out of the IEC optical port? I have tried to get a readout of the opitcal port but it doesn&#39;t seem to provide any registers (it acknowledges my query but doesn&#39;t send any data). I&#39;m hoping I might have more luck using the inductive port, but I can&#39;t find much info on how to make an inductive reader.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15964"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Sun, 27/10/2013 - 10:51.</div>
    <div class="content">
     <p>The first thing to check is that your meter has an inductive serial port. If it&#39;s the same as mine, a 5192J,&nbsp;then obviously it does, if not then you need to hunt down a manual for your meter and check. The 5192J manual is very vague, it just says something like &quot;the meter incorporates an inductive serial port which transmits data through the case&quot;. Everything else I had to work out for myself.</p>
<p>The circuit diagram for&nbsp;my homemade&nbsp;receiver is just on a scrap of paper at the moment but if your meter definitely has an inductive port and you want to go ahead then I&#39;ll make the effort to draw it out and post it here.</p>
<p>The data from the inductive port is the meter version and serial number&nbsp;followed by the 8 kWh registers and the 8 kVArh&nbsp;registers, all in ASCII hexadecimal.</p>
<p>The optical port has much more information and allows you to configure the meter but for that you will need the control software and password and messing with that is likely to get you into trouble with your service provider.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16031"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4591.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MattyZee&#039;s picture" title="MattyZee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/4591.html" title="View user profile.">MattyZee</a> on Wed, 30/10/2013 - 06:40.</div>
    <div class="content">
     <p>Yeah, its the same meter. Any info you can provide on the pickup interface would be greatly appreciated!</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16051"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Wed, 30/10/2013 - 20:50.</div>
    <div class="content">
     <p>I haven&#39;t got time to draw the circuit properly right now so I&#39;ve attached a scan of my scrap of paper. Sorry about the scribble.</p>
<p>It&#39;s very simple, just an LC front end to act as a roughly tuned pickup followed by an amplification stage, a detector and a comparator. The output of the comparator can be fed directly into a 5V serial port but I included a resistor divider because I feed the output into an emonTx 3V serial port.</p>
<p>Here&#39;s a couple of photos of the prototype...</p>
<p><img alt="" src="../sites/default/files/Ampy_reader.jpg" /></p>
<p><img alt="" src="../sites/default/files/Ampy_reader_pcb.jpg" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16212"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4591.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MattyZee&#039;s picture" title="MattyZee&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/4591.html" title="View user profile.">MattyZee</a> on Thu, 07/11/2013 - 03:57.</div>
    <div class="content">
     <p>Thanks! I&#39;ve ordered the parts and i&#39;ll design my pcb tonight. Did you use PCBGCODE for your board?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16219"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Thu, 07/11/2013 - 10:10.</div>
    <div class="content">
     <p><em>Did you use PCBGCODE for your boar</em>d?</p>
<p>No, I used 2D PCB but the same process i.e using a milling machine.</p>
<p>I&#39;ve attached the 2D PCB file in case it&#39;s any use to you and here&#39;s a screenshot in case it isn&#39;t...</p>
<p><img alt="" src="../sites/default/files/Ampy_meter_decoder_s.png" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22104"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6547.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="willhey&#039;s picture" title="willhey&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/6547.html" title="View user profile.">willhey</a> on Sun, 22/06/2014 - 14:02.</div>
    <div class="content">
     <p>Hi, very interested in being able to record the meter usage.&nbsp; I found counting the light pulses wrong, as with solar generation I would get 1000s of pulses but no units.</p>
<p>I have succeeded with the circuit and have pulses going to my Arduino</p>
<p>But it makes no sense- I expected some ascii numbers but get rubbish</p>
<p>The drawing says 1200 baud but not the parity or stop bits or data size</p>
<p>I have found the position relative to the meter very critical - a few cm in any direction changes the signal</p>
<p>The meter is a Ampy 5192J</p>
<p>Attached is an xls of the signal from an oscilloscope</p>
<p>Any help would be appreciated</p>
<p>Mike</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22105"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 22/06/2014 - 16:36.</div>
    <div class="content">
     <p>Welcome, Mike,</p>
<p>MartinR hasn&#39;t been seen around here for a little while, so I&#39;m not sure whether he&#39;ll see your question. If he doesn&#39;t respond, give me a prod and I&#39;ll try emailing him.</p>
<p>Have you tried interpreting the bytes as data rather than as characters - as unsigned long integers, for example?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22200"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6547.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="willhey&#039;s picture" title="willhey&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/6547.html" title="View user profile.">willhey</a> on Thu, 26/06/2014 - 17:15.</div>
    <div class="content">
     <p>Hi, not had a response from MartinR, I would be grateful if you would email</p>
<p>I had no result with looking for byte data</p>
<p>Attached is a new trace showing the carrier wave (26hz)</p>
<p>Given that it should be on/off keying, it is difficult to see the &quot;off&quot; portion</p>
<p>Regards</p>
<p>Mike</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22203"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Reading Ampy meters via the inductive serial port</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 27/06/2014 - 09:50.</div>
    <div class="content">
     <p>MartinR says:</p>
<p class="rteindent1">The format is very simple, just on-off keying so you should see the ASCII output on any serial terminal. This is what a single line looks like....</p>
<p class="rteindent1">AMP5165JA470507109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0014B4A4001488A700118265000000000000000000000000000000000000A792000B6343000B341C0009808C00000000000000000000000000000000000000B70811</p>
<p class="rteindent1">
	I can&rsquo;t remember what it all means off the top of my head but you should be able to work it out from the attached sketch. This is my initial sketch which uses a software serial port so that the decoded data can be sent via the hardware port. I haven&rsquo;t looked at this sketch for a long time but I believe it works.</p>
<p>From the waveform that you captured, I&#39;d suggest you need to experiment with the pickup - the tuning and damping. It might be that you have an excessive &#39;Q&#39;, meaning that the tuned coil continues to oscillate after the signal has been removed, and this is obscuring the &#39;off&#39; periods. Adding a parallel resistor should help. I assume you&#39;ve tuned the pickup for the correct carrier frequency.</p>
<p>Attached is his initial sketch. For his final version, MartinR says he integrated the Ampy meter reading code into his 3-phase code and used one of the hardware serial ports to read the meter and send the readings via radio to the emonGLCDs etc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2461"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-1y9xu6Q9ZZuDydx2XLZsgwrtq7HTGFWy6bZtbXm2vvQ" value="form-1y9xu6Q9ZZuDydx2XLZsgwrtq7HTGFWy6bZtbXm2vvQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
