<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5350 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:03:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Project for 3-phase power monitoring with heatpump | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Project for 3-phase power monitoring with heatpump</h3>
        <span class="submitted">Submitted by <a href="../user/6585.html" title="View user profile.">fabrice</a> on Sat, 28/06/2014 - 20:19</span>
        <div class="content"><p>Hello,</p>
<p>I am looking to monitor my home energy consumption. Logically&nbsp;my heatpump&nbsp;is the biggest consumer.</p>
<p>My thinking lead me to this :</p>
<p>emonTx v3 Main<br />
	- 1 AC-AC<br />
	- 3 CT on 3-phase<br />
	- 1 free high accuracy CT</p>
<p>emonTx v3 Heatpump&nbsp;INT<br />
	- 1 AC-AC<br />
	- 3 CT on 3-phase heatpump&nbsp;- inside module<br />
	- 1 CT on hot water boiler (3kW)</p>
<p>emonTx v3 Heatpump OUT<br />
	- 1 AC-AC<br />
	- 3 CT on&nbsp;3-phase heatpump - outside module<br />
	- 1 free high accuracy CT</p>
<p>Lots of emonTX&nbsp;because of 2 3-phase power and one single phase power for the heatpump. :-/.</p>
<p>It will let me 2 free CT for appliance monitoring. Maybe I will need to add a 4th emonTx to have more other appliance monitoring... I will also add temperature sensors for in, out, hot water, flow and return on heatpump, ...</p>
<p>My question :</p>
<p>About the free CT : does this CT need to monitor appliance on the same phase than the AC-AC ?</p>
<p>About the multiple emonTx : is there any issue for communication between multiple (4)&nbsp;emonTx to single&nbsp;emonBase ?</p>
<p>If you have advises about this project, please let me know.</p>
<p>Regards,</p>
<p>Fab</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5650.html" class="topic-previous" title="Go to previous forum topic">‹ Project: Monitor Small Off Grid PV System </a>
              <a href="5526.html" class="topic-next" title="Go to next forum topic">Multiple nodes to monitor outages and power quality on a grid? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22242"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 28/06/2014 - 22:35.</div>
    <div class="content">
     <p>I assume you will be using the &quot;approximation&quot; 3-phase sketch &quot;emonTxV3_3Phase_Voltage&quot;. Ideally, the 4th CT should be on the same phase as the voltage measurement for best accuracy, but if it is necessary to have that load on phases 2 or 3, you can use the delayed voltage for CT 4. You will need to modify the sketch to do that: Where you have<br />
	&nbsp;&nbsp;&nbsp; sumP4 += phaseShiftedV1 * filteredI4;<br />
	you change it to use phaseShiftedV2 or phaseShiftedV3 as necessary.</p>
<p>A warning though about the sketch: It uses delayed versions of the phase 1 voltage to represent the voltages on phases 2 &amp; 3. If the three voltages are accurately balanced, the three powers will be calculated correctly. If however the voltages are not equal, the powers will be in error. Unless you design a new circuit with 3 voltage inputs and 12 current inputs (and a very high powered and fast ADC and processor), or you use <a href="1170.html">3 stacked emonTx V2&#39;s,</a>&nbsp; you cannot do better.</p>
<p>One point you might like to think about: how close together will your emonTx&#39;s be? If they are reasonably close (&lt;2 m, say), you could use a single 5 V USB adapter to power all 3 (or 4) and a single ac-ac adapter to provide the voltage reference for all 3(4). If you are using more than one temperature sensor on each emonTx, you might need a separate power source in any case because of the limited spare current available from the ac-ac adapter and the in-built power supply.</p>
<p>There should be no real problem with 4 emonTx&#39;s working to the same base, but you might lose the occasional reading if two or more decide to transmit at the same time.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22245"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 30/06/2014 - 16:29.</div>
    <div class="content">
     <p>A couple of posts here have gone missing. Fabrice asked for confirmation that the emonTx V3 could be powered either from 5 V d.c or the ac-ac adapter, and I confirmed that it could.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22390"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6585.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fabrice&#039;s picture" title="fabrice&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/6585.html" title="View user profile.">fabrice</a> on Tue, 08/07/2014 - 14:34.</div>
    <div class="content">
     <p>Hello,</p>
<p>Ok for &quot;or&quot; but is it true for &quot;and&quot; ? The DC gives power and the AC gives the voltage at the same time ?</p>
<p>Regards,</p>
<p>Fabrice</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22408"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 08/07/2014 - 22:45.</div>
    <div class="content">
     <p>In practice, I run it from both for short periods when testing. That is, the jumper link is present and so are both the programmer and the ac adapter. But the Wiki states that only one should be used. I&#39;m not sure of the reason for that.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22410"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Tue, 08/07/2014 - 23:22.</div>
    <div class="content">
     <p><em>But the Wiki states that only one should be used. I&#39;m not sure of the reason for that.</em></p>
<p>With both enabled, haven&#39;t you effectively got the outputs of two 3.3V regulators tied together? &nbsp;Whichever is higher will potentially be back-feeding the other, which some regulators don&#39;t like. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23104"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6585.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fabrice&#039;s picture" title="fabrice&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/6585.html" title="View user profile.">fabrice</a> on Sat, 16/08/2014 - 07:22.</div>
    <div class="content">
     <p>Dears,&nbsp;</p>
<p>I am a little further and need an advise about what I see.</p>
<p>I have now 3 emonTX V3. I decided to setup each with an AC-AC on separate phase and flash the firmware with&nbsp;emonTxV3_continuous_kwhtotals_noeeprom&nbsp;sketch.</p>
<p>For my L2 phase, it shows sometimes strange result with negative value sometimes with positive value. It&nbsp;affect other CT like a pure resistive one that I have seen going in negative...</p>
<p>I think I do not mess the inputs but maybe it is normal it does not work in this setup and I should use other sketches.</p>
<p>What do you think ?</p>
<p>Fabrice</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23107"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 16/08/2014 - 09:04.</div>
    <div class="content">
     <p>Fabrice,</p>
<p>The &quot;<em>emonTx_continuous_kwtotals_noeeprom</em>&quot; sketch on Github appears to be based on some code that I wrote for a New Zealand project in 2012, but I am not sure how it has been changed since then.&nbsp;</p>
<p>I now can provide a <a href="http://mk2pvrouter.co.uk/61101.html">3-phase monitoring system</a> that works like an emonTx but with three measurements of voltage and three measurements of current.&nbsp;&nbsp;&nbsp; The burden resistors can be chosen to give the best accuracy for the amount of power that you will be measuring. &nbsp; This would be a more accurate way of monitoring your 3-phase power consumption.</p>
<p>You may find it helpful to use one or two of my systems to monitor your 3-phase power, and to use your emonTx V3 units to monitor temperature or anything else.&nbsp; With six analogue inputs to monitor continuously, my 3-phase system is not able to&nbsp; monitor temperature.</p>
<p>Robin</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23120"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 16/08/2014 - 14:56.</div>
    <div class="content">
     <p>Fabrice, I do not understand your problem. Do you have PV or any sort of generation? Do you have a PV diverter in use? Is the emonTx for each phase totally and only for that phase (the ac adapter and the CTs are all on that phase, and only on that phase?</p>
<p>What result are you reading for L2, and what do you expect?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23381"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6585.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fabrice&#039;s picture" title="fabrice&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/6585.html" title="View user profile.">fabrice</a> on Wed, 27/08/2014 - 13:45.</div>
    <div class="content">
     <p>Hello,</p>
<p>I do not have any PV or any sort of generation. One emontxv3 for each phase. I am expecting positive reading for each phase but for L2&nbsp;it is sometimes positive, sometime negative.</p>
<p>I will install default firmware emonTxV3_RFM12B_DiscreteSampling this evening to closely look at this. It could be a side effect of the firmware used.</p>
<p>Thank you for your help.</p>
<p>Fabrice</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23382"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 27/08/2014 - 15:24.</div>
    <div class="content">
     <p>If you are using either the &quot;discrete&quot; or the &quot;continuous&quot; sketch, then your ac adapter must be connected to the same phase as the current transformers. Otherwise, there will be a 120&deg; phase shift between voltage and current, and if the power factor of your load varies a lot, then you could get real power readings that swing negative and positive.</p>
<p>If you are not using an ac adapter, then I don&#39;t expect the &#39;continuous&#39; sketch to work, because it needs the voltage wave to synchronise to.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23405"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6585.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fabrice&#039;s picture" title="fabrice&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/6585.html" title="View user profile.">fabrice</a> on Thu, 28/08/2014 - 21:24.</div>
    <div class="content">
     <p>Hi,</p>
<p>I did just checked the 3 phases with my multimeter and it seems I had mixed them... Readings are now far better. I am using the ac adapter now connect on the correct phase. Do you advise&nbsp;emonTxV3_RFM12B_DiscreteSampling.ino or&nbsp;emonTxV3_continuous_kwhtotals_noeeprom.ino ?</p>
<p>Kind regards,</p>
<p>Fabrice</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23407"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project for 3-phase power monitoring with heatpump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 28/08/2014 - 23:52.</div>
    <div class="content">
     <p>The &quot;discrete&quot; sketch is the original version and is best for battery operation, because the power is sampled for 100 ms every 10 s and the processor sleeps in between samples, drawing very little current from the battery. That also leads to short-term inaccuracies that tend to even out over time, unless you have a load that switches particularly quickly - like an induction cooker hob, when you are likely to get big inaccuracies that might not average out. If you have mains power (e.g. the emonTx V3) then the &#39;continuous&#39; sketch is best.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5350"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-IOvw1veJlrH6jWG_WWgle2JYv7so7Wq6D0jvDvl-nSg" value="form-IOvw1veJlrH6jWG_WWgle2JYv7so7Wq6D0jvDvl-nSg"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
