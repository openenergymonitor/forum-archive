<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10315 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:30:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Cyble sensor compatibility EmonTx v3.4 (pulse counting) | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>
        <span class="submitted">Submitted by <a href="../user/7837.html" title="View user profile.">pvg</a> on Sat, 14/03/2015 - 11:13</span>
        <div class="content"><p>Hi All,</p>
<p>I&#39;m new to the world of &#39;OpenEnergyMonitor&#39; and am amazed on the knowledge and enthusiasm that can be found throughout this forum. A short introduction:&nbsp;&nbsp;I myself am 46 years and live in the Netherlands. &nbsp;I work with unix/linux systems in the role of sysadmin but am no programmer. &nbsp;I&#39;m also no electrical engineer and cannot read the schematics found around here. &nbsp;So soldering together my own set would not be such a great idea ;). &nbsp; As such the pre-assembled/build components found here in the shop would give me the perfect possibilities to put together a nice setup that should get me started. &nbsp;Now for measuring our power usage the bundle with the EmonTx&nbsp;with CT clips&nbsp;&amp; RaspPI&nbsp;set should do the trick. &nbsp;I would however like to get the picture complete for our family including GAS (covering most of our utility bill) and water. &nbsp;Now this is the part where i&#39;m lost a bit on the possibilities.</p>
<p>&nbsp;</p>
<p>My GAS &amp; Water meter are both from the company Itron and are compatible with the Cyble sensor (v2). Now from all the reading i understand that with the EmonTx v3.x you must use the pulse count screw terminal to be able to do &#39;something&#39; &nbsp;with pulse counting.</p>
<p>&nbsp;</p>
<p>So here are some questions i have;</p>
<p>Here (&nbsp;<a href="https://www.itron.com/PublishedContent/Cyble Sensor EN 03-14_Brochure.pdf">https://www.itron.com/PublishedContent/Cyble%20Sensor%20EN%2003-14_Brochure.pdf</a>&nbsp;) are some more details on the Cyble sensor. &nbsp;On the market i can find different types of this sensor (2 wire version / 5 wire version) and a&nbsp;factory&nbsp;set&nbsp;so called&nbsp;&#39;K&#39; &nbsp;factor (explained in the brochure). Now i know these are quite expensive but as mentioned i&#39;m really not the guy to get my own soldering gun ;)</p>
<p>&nbsp;</p>
<p>1st. Would this Cyble sensor be compatible to be used directly with the EmonTx v3.4 by connecting it to the &#39; pulse-counting screw terminal&#39;. &nbsp;And if so which one, the 2 or 5 wire version and what &#39; K&#39; &nbsp;factor and how to connect.</p>
<p>2nd. The EmonTx v3.4 (as i understand it) only has room to connect one pulse counter to the pulse-counting screw terminal. &nbsp;So if i would want to collect data from two different (Gas&nbsp;&amp; Water) Cyble sensors i would also need two EmonTx v3.4 sensor nodes?. &nbsp;Or could the RaspberryPi&nbsp;be of some use here.</p>
<p>&nbsp;</p>
<p>Any guidance is much appreciated.</p>
<p>&nbsp;</p>
<p>Thanks &amp; Kind regards</p>
<p>Patrick</p>
  <div class="forum-topic-navigation clear-block">
          <a href="../http_/%252Fopenenergymonitor.org/emon/sites/default/files/Arduino%20AC%20current%20input%20A.html" class="topic-previous" title="Go to previous forum topic">‹ DC bias circuit for MULTIPLE sensors </a>
              <a href="167.html" class="topic-next" title="Go to next forum topic">SD Card Logging Power Monitor with LCD ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-28671"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 14/03/2015 - 13:08.</div>
    <div class="content">
     <p>I do not know enough about the Raspberry Pi to say whether that would be better, so I will only talk about the emonTx.</p>
<p>Your Cyble sensor requires a meter with the correct "Cyble Target". Your meters have that.</p>
<p>The Cyble sensor has an internal battery with a life of 12 years. Is this a concern? After 12 years (or maybe more, possibly less), you will need to replace the entire sensor.</p>
<p>I think you do not need the extra information that the 5-wire sensor gives you (direction of flow, both HF &amp; LF outputs and cable cut detection), therefore the 2-wire version with K=1 is equivalent to the HF output of the 5-wire version. </p>
<p>The value of K determines the smallest quantity that you know about. With K=1, you have one pulse per revolution of the target. The printing on the meter face should say what that is in m<sup>3</sup> (I cannot read that in the photograph). If it does not, you will need to count the number revolutions for one digit on the register. </p>
<p>I cannot think of an easy way for you to use two of these with one emonTx V3.4, so I think you will need two emonTx's. You connect the brown &amp; white wires (either way round) to "IRQ1/Dig3" and "GND".<br />
You will need to use a sketch that uses interrupts, and I think there is not yet one for the emonTx V3.4, therefore it will be necessary to convert the V3.2 version. This is not a major problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28708"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7837.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7837.png" alt="pvg&#039;s picture" title="pvg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/7837.html" title="View user profile.">pvg</a> on Mon, 16/03/2015 - 06:43.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>&nbsp;</p>
<p>Thanks for your clear explanation, &nbsp;exactly what i was hoping to hear. &nbsp; I think i have everything now clear for myself and am going to proceed with building my set. &nbsp;&nbsp;</p>
<p>Thanks again.</p>
<p>Patrick</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28709"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Mon, 16/03/2015 - 07:50.</div>
    <div class="content">
     <p>If a utility meter provides an optical output, the activity can be captured using a simple LDR-based sensor.&nbsp; This can be polled every mains cycle (or every few milliseconds) to find the LED&#39;s state.&nbsp; This approach can use any of the IO pins.&nbsp;</p>
<p>On the emonTx V3, IO ports 5 and 19 are available at the 6-way terminal block in addition to digital 2 or 3 which supports interrupts.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28714"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 16/03/2015 - 14:09.</div>
    <div class="content">
     <p>The Cyble detector appears to use a 'metal detector' technique to determine the passing of the flag on the "fast" indicator, and the gas meter certainly does not have an optical pulse output&mdash;rather a reflective spot on the "first drum". To use that would require a LED illuminator, a detector and a means of mounting both that would also exclude ambient light, and as Patrick isn't a constructor, it's a non-starter. So he's better to stay with a proven device that doesn't require development beyond converting a sketch.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28719"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Mon, 16/03/2015 - 15:55.</div>
    <div class="content">
     <p>OK, Robert, I&#39;m not familiar with the Cyble detector.&nbsp; I was simply picking up on the comment that:</p>
<p><em>... with the EmonTx v3.x you must use the pulse count screw terminal to be able to do &#39;something&#39; &nbsp;with pulse counting.</em></p>
<p>If the meter provides an optical output, it is possible to use any of the IO ports for this purpose.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28731"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7837.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7837.png" alt="pvg&#039;s picture" title="pvg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/7837.html" title="View user profile.">pvg</a> on Mon, 16/03/2015 - 20:16.</div>
    <div class="content">
     <p>Hi,</p>
<p>Thanks for all the info provided. &nbsp; I just placed my order and hope i will get things going. &nbsp;Looking forward to playing around with it. &nbsp; In the mean time i&#39;m learning every day here. &nbsp;This community is amazing.</p>
<p>Could well be i&#39;ll&nbsp;be posting some more questions in the near future when running into issues. &nbsp;But that&#39;s part of the fun. ;)</p>
<p>&nbsp;</p>
<p>Thanks again all.</p>
<p>Kind regards</p>
<p>Patrick</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28735"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 16/03/2015 - 23:07.</div>
    <div class="content">
     <p><i>"If the meter provides an optical output, it is possible to use any of the IO ports for this purpose."</i></p>
<p>It doesn't. They are gas and water meters and so do not have access to an electrical supply. The data sheet notes: "the fast duration of the pulse does not allow to connect electro-mechanical relays". From that I deduce that the pulse is less than a few hundred milliseconds wide, but they do not disclose anything else about it. It may well be wider than 20 ms and thus could be polled once per mains cycle by a standard input, but we cannot take that for granted and I think the only safe way is to use the interrupt input.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29663"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/524.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-524.jpg" alt="Larsjo&#039;s picture" title="Larsjo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/524.html" title="View user profile.">Larsjo</a> on Thu, 16/04/2015 - 13:51.</div>
    <div class="content">
     <p>Did you get this to work ?</p>
<p>Have a watermeter with&nbsp;Cyble Sensor, so if it works for you i will go the same way.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29664"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7837.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7837.png" alt="pvg&#039;s picture" title="pvg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/7837.html" title="View user profile.">pvg</a> on Thu, 16/04/2015 - 15:54.</div>
    <div class="content">
     <p>Hi Larsjo,</p>
<p>That&#39;s a coincidence, just finished updating the emontx&nbsp;with latest FW (including pulse counting), going to try the cyble sensor this weekend, will for sure let you know the outcome. &nbsp;Furthermore i thought i had the itron&nbsp;cyble sensor compatible gas meter but was mistaking in that, so ordered a reed switch from flukso&nbsp;for the gas meter.</p>
<p>&nbsp;</p>
<p>Kind regards</p>
<p>Patrick</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29766"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7837.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7837.png" alt="pvg&#039;s picture" title="pvg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/7837.html" title="View user profile.">pvg</a> on Sun, 19/04/2015 - 15:03.</div>
    <div class="content">
     <p>Hi All,</p>
<p>A short update on the progress on my attempts to get water &amp; gas pulse monitoring to work.</p>
<ul>
<li>For my watermeter&nbsp;i bought a &#39;Cyble Sensor&#39; &nbsp;that&#39;s compatible with my water meter. You can click it right on, its powered by a internal battery and produces a &#39;pulse&#39; &nbsp;(&nbsp;<a href="https://www.itron.com/PublishedContent/Cyble Sensor EN 03-14_Brochure.pdf">https://www.itron.com/PublishedContent/Cyble%20Sensor%20EN%2003-14_Brochure.pdf</a>&nbsp;)</li>
<li>For my Gasmeter i&#39;m using a sensor i bought from Flukso as it seems compatible with my gasmeter. (&nbsp;<a href="https://www.flukso.net/content/gas-probe">https://www.flukso.net/content/gas-probe</a>&nbsp;)</li>
</ul>
<p>For each of the pulse generating sensors i use a eMonTX v3.4. So i have two eMonTX v3.4 units measuring a total of 7 CT sensors.</p>
<p>Started with connecting the Flukso sensor to the screw terminal pins 3 &amp; 4. (on the TX using default v1.6 sketch). &nbsp; This seemed a somewhat frustrating process as i could not get any stable reading. &nbsp; Serial connected the emonTX&nbsp;to see what was detected. &nbsp; When connected at power-on the serial console showed weird counters.</p>
<p>&nbsp;</p>
<pre>
emonTx V3.4 Discrete Sampling V1.60 RFM12B
OpenEnergyMonitor.org
POST.....wait 10s
CT 1 Calibration: 90.90
CT 2 Calibration: 90.90
CT 3 Calibration: 90.90
CT 4 Calibration: 16.67
RMS Voltage on AC-AC Adapter input is: ~246V
AC-AC adapter detected - Real Power measurements enabled
assuming powering from AC-AC adapter (jumper closed)
Vcal: 268.97
Phase Shift: 1.70
CT 1 detected
CT 2 detected
CT 3 detected
Unable to detect DS18B20 temperature sensor
RFM12B Initiated: 
Node: 9 Freq: 433Mhz Network: 210
CT1 CT2 CT3 CT4 VRMS/BATT PULSE 
822 104 1460 0 24503 42  
822 103 1441 0 24524 84  
820 104 1441 0 24530 126  
823 104 1467 0 24538 168  
822 104 1389 0 24600 262  
827 104 1399 0 24582 304  
820 103 1395 0 24534 346  
821 105 1395 0 24499 388  
816 105 1391 0 24456 430  
816 104 1390 0 24472 472 

</pre><p>When putting a small magnet on the sensor the pulse count remained stable at the same value (so concluding the senor is working)</p>
<p>Connect the Cyble sensor to my other emonTX and this produced the exact same result (so large number of pulsecounts while nothing was happening). Test with a magnet failed because of the way the Cyble sensor works (hence, its generating a pulse on its own when a cycle of the meter is detected.)</p>
<p>So was wondering on how to proceed and started googling-around. &nbsp;I finally landed on the arduino&nbsp;tutorial pages. ( &nbsp;<a href="http://www.arduino.cc/en/tutorial/button">http://www.arduino.cc/en/tutorial/button</a>&nbsp;) &nbsp;Modified it slightly with some info found elsewhere and resulted in the following sketch.</p>
<pre>
// constants won&#39;t change. They&#39;re used here to 
// set pin numbers:
const int buttonPin = 3;     // the number of the pushbutton pin
const int ledPin =  6;      // the number of the LED pin

// variables will change:
int buttonState = 0;         // variable for reading the pushbutton status

void setup() {
  // initialize the LED pin as an output:
  pinMode(ledPin, OUTPUT);      
  // initialize the pushbutton pin as an input:
  pinMode(buttonPin, INPUT);
  digitalWrite(buttonPin, HIGH); // turn on input pin&#39;s pull-up resistor 
  Serial.begin(115200);
}

void loop(){
  // read the state of the pushbutton value:
  buttonState = digitalRead(buttonPin);
  Serial.println(buttonState);
  // check if the pushbutton is pressed.
  // if it is, the buttonState is HIGH:
  if (buttonState == LOW) {     
    // turn LED on:    
    digitalWrite(ledPin, HIGH);  
  } 
  else {
    // turn LED off:
    digitalWrite(ledPin, LOW); 
  }
}


</pre><p>This is basically exactly what i was hoping for, just to see if the pulses were detected correctly from both the Cyble sensor and Flukso sensor. &nbsp; It will light the emonTX LED whenever a pulse is detected. &nbsp;This worked perfectly on both the sensors, for the GAS meter whenever the last digit showed the number &#39;7&#39; the LED would turn on. &nbsp; &nbsp;For the cyble sensor on the water meter this also worked but could clearly distinguish it is working in another way ( hence the cyble sensor would produce a pulse for a shorter amount of time because of the way it works)</p>
<p>I&#39;m thinking that if i can produce a &#39;1&#39; or a &#39;0&#39; on the console and make the LED go on and off&nbsp;upon detection of one cycle of the gas &amp; water meter it can be used &#39;somehow&#39; &nbsp;in a sketch to produce some meaningful&nbsp;info to pus to emoncms.</p>
<p>So i&#39;m basically at the point on discovering on how to incorporate this in the emonTX&nbsp;discrete sampling sketch (as the currently available pulse counting in that sketch isn&#39;t working for me)</p>
<p>One of the things that&nbsp;still a question mark for me would be the working of the Flukso reed switch. (hence, if gas was used but stopped exactly when the last digit shows 7 on my meter the LED would remain on)&#39;. &nbsp;As stated, i&#39;m no programmer and having real difficulties in understanding the sketches, but taking small steps at the time.</p>
<p>Will update whenever something interesting evolves in my little home project. (and of course any help would be much appreciated)</p>
<p>Kind regards</p>
<p>Patrick</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29769"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 19/04/2015 - 15:36.</div>
    <div class="content">
     <p>What you're seeing there is no doubt contact bounce. The standard pulse input and routine in the default sketch is not suitable (as you've found out) for mechanical switches. I solved this problem a long time ago - see about half way down <a href="5022.html">this thread</a>. [Beware, that sketch was for the emonTx V3.2]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31212"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/524.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-524.jpg" alt="Larsjo&#039;s picture" title="Larsjo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/524.html" title="View user profile.">Larsjo</a> on Thu, 11/06/2015 - 20:02.</div>
    <div class="content">
     <p>Good to hear that the water reading is working.&nbsp;</p>
<p>?? why the 7 digit, is that where the magnet is ?</p>
<p>Any photo of the setup.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31213"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 11/06/2015 - 20:17.</div>
    <div class="content">
     <p>There's quite a lot of information here: <a href="1732.html" title="http://openenergymonitor.org/emon/node/1732">http://openenergymonitor.org/emon/node/1732</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31263"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7837.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7837.png" alt="pvg&#039;s picture" title="pvg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/7837.html" title="View user profile.">pvg</a> on Sat, 13/06/2015 - 10:14.</div>
    <div class="content">
     <p>Hi Larsjo</p>
<p>Yes indeed the last digit is triggering my (Flukso) reed switch whenever the display show a &#39;7&#39;. So thats the position of the dial where the magnet is best positioned for the&nbsp;reedswitch.</p>
<p>Robert pointed me into the right direction in regards to the software debouncing. &nbsp;Found out (after doing a lot searching on the web) there are different approaches to this. &nbsp;I tested out some of them. &nbsp; I modified my sketch accordingly and now am pretty happy with the result (although it needs some tweaking still as the Cyble sensor seems to generate a few false pulses) &nbsp;During all the testing i also discovered the emonhub&nbsp;is not receiving all of the transmissions from both of my emonTx&#39;s. So some work needs to be done there. (perhaps both emonTx&#39;s being so close together interfere with each others radiosignal?) But overall readings (both water with the Cyble sensor and Gas with the Flukso probe) are satisfying for me.</p>
<p>Now with the pulses coming in i&#39;m &nbsp;able to do the math. &nbsp;For me the most important one are the costs. I know from within Emoncms you can get some cost calculations but i personally like the &#39; My Electric&#39; &nbsp;way of showing usage. Unfortunately not possible to display costs by default. So as (not being a coder) hacked my way through the scripts and modified it to show the cost as well.</p>
<p>&nbsp;</p>
<p>Kind regards</p>
<p>&nbsp;</p>
<p>Patrick</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31470"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/524.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-524.jpg" alt="Larsjo&#039;s picture" title="Larsjo&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Cyble sensor compatibility EmonTx v3.4 (pulse counting)</h3>

    <div class="submitted">Submitted by <a href="../user/524.html" title="View user profile.">Larsjo</a> on Thu, 18/06/2015 - 06:58.</div>
    <div class="content">
     <p>Nice work. Will give it a try.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10315"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-1tIwDCU7S9nEm2TPgPvzV94kYcg4fETpI-YcigCyMAc" value="form-1tIwDCU7S9nEm2TPgPvzV94kYcg4fETpI-YcigCyMAc"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
