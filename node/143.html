<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>#snowdonbuild hackathon wiki | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/emon/sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/emon/modules/node/node.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/defaults.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system-menus.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/user/user.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/mollom/mollom.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/forum/forum.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/views/css/views.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/comment/comment.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/themes/emon3/style.css?r" />
<style type="text/css" media="all">@import "/emon/sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="/emon/" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="/emon/">Home</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
          <span class="submitted"></span>
      <div class="taxonomy"></div>
      <div class="content"><h1>OpenEnergyMonitor and Nanode Hackathon from Wednesday 27th April 2011 - Monday 2nd May 2011 @Llanfrothen</h1>
<table cellspacing="1" cellpadding="1" border="0" width="650">
<tbody>
<tr>
<td><img width="200" height="150" alt="" src="http://openenergymonitor.org/emon/sites/default/files/P1030294.JPG" /></td>
<td><img width="200" height="150" alt="" src="http://openenergymonitor.org/emon/sites/default/files/hack01.jpg" /></td>
<td><img width="200" alt="" src="http://openenergymonitor.org/emon/sites/default/files/build02.jpg" /></td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p><embed type="application/x-shockwave-flash" src="https://picasaweb.google.com/s/c/bin/slideshow.swf" width="400" height="267" flashvars="host=picasaweb.google.com&amp;hl=en_GB&amp;feat=flashalbum&amp;RGB=0x000000&amp;feed=https%3A%2F%2Fpicasaweb.google.com%2Fdata%2Ffeed%2Fapi%2Fuser%2Fglyn.hudson%2Falbumid%2F5600727747596736817%3Falt%3Drss%26kind%3Dphoto%26hl%3Den_GB" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></p>
<p>&nbsp;</p>
<p>&nbsp;Blog:&nbsp;<br />
<meta content="text/html; charset=utf-8" http-equiv="content-type"><a href="http://sustburbia.blogspot.com/">http://sustburbia.blogspot.com/</a>   </meta>
</p>
<p>Wiki (this page): <a href="http://bit.ly/oem_2011" title="http://bit.ly/oem_2011">http://bit.ly/oem_2011</a></p>
<p>Twitter: <a href="http://twitter.com/search?q=#snowdonbuild">http://twitter.com/search?q=#snowdonbuild</a></p>
<p>Tinychat: <a href="http://tinychat.com/snowdonbuild">http://tinychat.com/snowdonbuild</a></p>
<p>Website bit.ly:&nbsp;<a href="http://bit.ly/openemon">http://bit.ly/openemon</a></p>
<p>Sam's photos:&nbsp;<a href="http://bit.ly/oem_photos">http://bit.ly/oem_photos</a>&nbsp;send photos to <a href="mailto:samuelcarlisle@gmail.com">samuelcarlisle@gmail.com</a> or transfer to Sam's laptop for uploading to picasa web albums.</p>
<p>Glyns' photos:&nbsp;<a href="https://picasaweb.google.com/glyn.hudson/SnowdonBuildSesh">https://picasaweb.google.com/glyn.hudson/SnowdonBuildSesh</a></p>
<p>
<meta content="text/html; charset=utf-8" http-equiv="content-type" /></p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" /></p>
<h2>Members:</h2>
<p><a href="http://openenergymonitor.org/emon/user/10">Glyn</a></p>
<p><a href="http://openenergymonitor.org/emon/user/4">Ken</a></p>
<ul>
<li>Sam
<ul>
<li>Delicious Links:&nbsp;<br />
        <meta http-equiv="content-type" content="text/html; charset=utf-8"><a href="http://www.delicious.com/samthetechie/nanode">http://www.delicious.com/samthetechie/nanode</a>                                                                                                                                                                                                                                                   </meta>
        </li>
<li>Twitter:&nbsp;<br />
        <meta http-equiv="content-type" content="text/html; charset=utf-8"><a href="http://twitter.com/#!/samthetechie">http://twitter.com/#!/samthetechie</a>                                                                                                                                                                                                                                                   </meta>
        </li>
<li>Website:&nbsp;<br />
        <meta http-equiv="content-type" content="text/html; charset=utf-8"><a href="http://samthetechie.com/">http://samthetechie.com/</a>                                                                                                                                                                                                                                                   </meta>
        </li>
</ul>
</li>
</ul>
<p>Matt</p>
<p><a href="http://openenergymonitor.org/emon/user/3">Trystan</a></p>
<p><a href="http://openenergymonitor.org/emon/user/4">Suneil</a></p>
<h2>Tutorial List:</h2>
<p><strike>Sam:&nbsp;Git Tutorial</strike> DONE Here is a typed up copy of a potential workflow for us collaborating on git:&nbsp;<a href="http://openenergymonitor.org/emon/node/144">openenergymonitor.org/emon/node/144</a></p>
<p>KST Tutorial</p>
<p><strike>Deploy EMON CMS</strike> (see below)</p>
<p>Sam:&nbsp;Google Android Hello World</p>
<p><strike>Walkthrough OEM Website</strike></p>
<p>Sam: Subsumtion Layer Architecture</p>
<h2>Project List:</h2>
<ul>
<li>Visual Display at London Hackspace: &nbsp;http://bit.ly/oem_lhs</li>
<li>Sam + ? + ?: Hack to integrate data feeds from emon CMS into a sketchup model of the house/buildings overlayed with live sensor data. :)</li>
<li>Sam: PHP code to generate the XML, CSV feeds</li>
<li>Sam +&nbsp;Trystan: User registration, device registration(MAC), Authentication(API keys)</li>
<li>Ken + Suneil: Solar powered Nanode + super caps + battery charging circuit, and RGB indicator, nanode pachube connection: get and put data.</li>
<li>Ken + Suneil: Solar Tracker</li>
<li>Sam + ? + ?: Nanode firmware works out of the box with emon CMS</li>
<li>?:&nbsp;Webserver for configuring (local)
<ul>
<li>take best code from jeenode webserver and webduino</li>
</ul>
</li>
<li>Webserver for configuring (remote)</li>
<li>make emon CMS easier to deploy
<ul>
<li>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">Sam: Minimal LAMP stack on a&nbsp;live cd as a 'viewer' (CD is read-only unless it is a CDRW).                                                                                                                                                                                                                                          </meta>
        </li>
<li>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">Sam: Minimal LAMP stack on a&nbsp;live usb preinstalled with emon CMS.                                                                                                                                                                                                                                 </meta>
        </li>
</ul>
</li>
<li>Energy comparisons: e.g. consumption of energy, and everyday comparisons to understand energy quantities. &nbsp;Other way to display energy in meaningful ways; quick indicators.. colours. Informative indicators with useful stats.</li>
<li>Glyn: RFM12 Wireless <a href="http://wiki.hackspace.org.uk/wiki/Project:Nanode">nanode</a> / <a href="http://openenergymonitor.org/emon/emontx">EmonTx</a> dev. Using JeeNode + Etherboard as example
<ul>
<li><strike>Modify nanode to avoid SPI conflicts with RFM12 </strike>&nbsp;(see below)</li>
<li><strike>Transmit data from JeeNode/Emon Tx to Nanode +RFM12</strike></li>
<li><strike>Display wireless packet data on local web page served by nanode&nbsp;</strike></li>
<li><strike>Decode data into original variables</strike></li>
<li>Create array of transmitter node ID's</li>
<li><strike>Display variables on local web pages (served by Nanode)</strike></li>
<li>Post data to EmonCMS in an intelligent way with API key of Nanode and Node ID of wireless node -Sam and Trystan started</li>
<li><strike>Nanode serve local page and also post to EmonCMS</strike>&nbsp;<a href="https://github.com/openenergymonitor/RF12Ethernet-/tree/master/nanode_localserver_RFData">https://github.com/openenergymonitor/RF12Ethernet-/tree/master/nanode_localserver_RFData</a></li>
</ul>
</li>
</ul>
<p>&nbsp;</p>
<p>
<meta content="text/html; charset=utf-8" http-equiv="content-type">          </meta>
</p>
<h3>Emoncms dev</h3>
<p><strong>User implementation:</strong><a href="http://openenergymonitor.org/emon/sites/default/files/login01.png"><img align="right" width="200" hspace="10" height="158" alt="" src="http://openenergymonitor.org/emon/sites/default/files/login01.png" /></a></p>
<p>1) Following this tutorial:<span class="Apple-converted-space">&nbsp;</span><a href="http://tinsology.net/2009/06/creating-a-secure-login-system-the-right-way/">http://tinsology.net/2009/06/creating-a-secure-login-system-the-right-way/</a></p>
<p><strong>10:30am friday:</strong>&nbsp;A non polished multi user implementation of Emoncms now works!</p>
<p><strong>1:00pm Saturday:</strong><span class="Apple-converted-space">&nbsp;</span>Partial rebuild of emoncms + step by step builds of emoncms with different parts implemented. If your trying to understand the code try going through the different build steps, I intend to write up each step as an extended tutorial soon.</p>
<p>For now the code can all be found up on github here:</p>
<p><a href="https://github.com/openenergymonitor/junkyard">https://github.com/openenergymonitor/junkyard</a></p>
<p><strong>Latest emoncms build on github:</strong></p>
<p><a href="https://github.com/openenergymonitor/emoncms">https://github.com/openenergymonitor/emoncms</a></p>
<p>&nbsp;</p>
<p>A little idea to help with the future hackathons (colder time of year e.g. winter). So if it gets a bit colder we can look at making a Japanese Kotasu space heater (or just use a current-munching beast of a desktop PC :)&nbsp;<a href="http://en.wikipedia.org/wiki/Kotatsu">http://en.wikipedia.org/wiki/Kotatsu</a></p>
<p>&nbsp;</p>
<h2>Wireless <a href="http://wiki.hackspace.org.uk/wiki/Project:Nanode">Nanode</a> Dev&nbsp;</h2>
<p><a href="http://openenergymonitor.org/emon/sites/default/files/nanode.png"><img width="200" height="76" alt="" src="http://openenergymonitor.org/emon/sites/default/files/nanode.png" /></a></p>
<p>GitHub Repo:&nbsp;<a href="https://github.com/openenergymonitor/RF12Ethernet-">https://github.com/openenergymonitor/RF12Ethernet-</a></p>
<p><a href="http://openenergymonitor.org/emon/sites/default/files/IMG396.jpg"><img width="200" height="150" alt="" src="http://openenergymonitor.org/emon/sites/default/files/IMG396.jpg" /></a></p>
<p>Nanode and RFM12 combo (Notes..to be made tidy later)&nbsp;</p>
<p><strong>Problem</strong>: We want to add wireless connectivity to the Nanode using the RFM12 / Hope Alph RF modules. Both the RFM12 wireless transceiver and and&nbsp;ENC28J60 ethernet chip on the Nanode both use the SPI bus to communicate with the Atmega328. This causes a conflict unless the chips are selected correctly.&nbsp;</p>
<p><strong>Solution</strong>: This has been done before by Jcw from JeeLabs with this <a href="http://jeelabs.net/projects/hardware/wiki/Ether_Card">EtherCard</a>. He gets over the problem by having the RFM12 and Ethernet chip on different slave-select (SS) lines. Ethernet on digital 8 and RFM12 on digital 10. The procedure below discribes the changes needed on the Nanode to make it compatible with the Jee <a href="http://jeelabs.net/projects/cafe/wiki/EtherCard">Etherlibrary </a>code. The Nanode currently also uses digital 10 as a SS for the Ethernet Card&nbsp;</p>
<ul>
<li>RFM12 uses digital 10 as SS (slave-select)&nbsp;</li>
<li>Need to modify the nanode to use digital 8 instead of digital 10 for its Ethernet chip SS line: Solution: &nbsp;lift Atmega328 leg of digital 10 and connect directly to RFM12 Sel line. Put jumber between digital 8 and 10 on Nanode header to bridge Ethernet controller SS to digital 8. The Nanode is now practically identical to the JeeNode Etherboard</li>
<li>If using RFM12 sketch only (no etherent) need to insert line to pull pin digital 8 high (remember to set it as output), this puts the tri-state buffer between Etherent SO and Nanode MISO into high impedance mode.</li>
<li>Leg 5 or 6 of the tri-state buffer also needs to be lifted to disconnect digital 2 from Ethernet chip interrupt. Digital 2 needs to be used for RFM12 interrupt, it is not needed for Ethernet.&nbsp;</li>
</ul>
<p>The JeeLabs Ethercard does not incorporate a tri-state buffer, It seems that if the SS line is used to de-select the chip the tri-state buffer is not needed to stop the chip from hogging the SPI bus</p>
<p>Note: Future versions of the nanode will include a user configurable hardware jumper to select SPI slave select pins for the on-board hardware&nbsp;</p>
<p>Nanode V3 Schematic:&nbsp;</p>
<p><a href="http://openenergymonitor.org/emon/sites/default/files/nanode3d_display_medium.jpg"><img width="600" height="625" alt="" src="http://openenergymonitor.org/emon/sites/default/files/nanode3d_display_medium.jpg " /></a></p>
<p>&nbsp;</p>
<h2>&nbsp;Solar tracker build</h2>
<p><a href="http://sustburbia.blogspot.com/2011/04/simple-solar-tracker-cat-not-included.html">http://sustburbia.blogspot.com/2011/04/simple-solar-tracker-cat-not-included.html</a></p>
<p><a href="http://sustburbia.blogspot.com/2011/04/more-solar-pv-tracking-and-wireless.html">http://sustburbia.blogspot.com/2011/04/more-solar-pv-tracking-and-wireless.html</a></p>
<p><a href="http://sustburbia.blogspot.com/2011/05/nanode-serves-solar-monitoring-data.html">http://sustburbia.blogspot.com/2011/05/nanode-serves-solar-monitoring-data.html</a></p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" /></p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" /></p>
<p><iframe width="425" height="349" frameborder="0" src="http://www.youtube.com/embed/UEZbxVxAVhQ" allowfullscreen=""></iframe></p>
</div>
    
    
      </div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org">https://community.openenergymonitor.org</a></p>
   
</div>

<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
