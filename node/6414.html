<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/6414 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:01:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>As load goes down the power reading goes negative (no generation) | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">As load goes down the power reading goes negative (no generation)</h3>
        <span class="submitted">Submitted by <a href="../user/7402.html" title="View user profile.">cat101</a> on Fri, 02/01/2015 - 22:55</span>
        <div class="content"><p>Hi. I built my own board using an&nbsp;arduino and following the emonTX design (AC adapter for voltage sense, voltage dividers per CT and burden resistor on board). Three of the channels seem to be working ok. There is one channel which it is connected to the line that powers the air conditioners (two compressors with a maximum&nbsp;consumption of 6Kw/h). I have calibrated that channel when the load is at 400Kw/h (i,e. one indoor unit on out of six).&nbsp;</p>
<p>The problem I have is that when I turn the indoor unit off and the compressors go into stand by the emon reading goes to -12 w/h. According to my AC clamp the stand by current is 0.5A (i.e. 110w&nbsp;at 220v).&nbsp;</p>
<p>Any ideas what could be wrong? I have checked connections, measure the average voltage fed to the ADC and it all looks like the other three channels....</p>
<p>Thanks for your help</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="9977.html" class="topic-previous" title="Go to previous forum topic">‹ CT clamp precision using EmonTx v3 with batteries</a>
              <a href="9962.html" class="topic-next" title="Go to next forum topic">connecting TSL257 optical pulse sensor to EmonTx v3 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-26377"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: As load goes down the power reading goes negative (no generation)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 02/01/2015 - 23:10.</div>
    <div class="content">
     <p>You need to use the correct units or you'll confuse me and the rest of us.  Watts per hour is nonsense. I assume you mean Watts (power) or do you mean Watt-hours (energy?). How are you getting a 400 kW load - that's over 600 A per phase across 3 phases @ 220 V?</p>
<p>Why are you using voltage dividers on the CTs? That is wrong, a CT is a current source and should have only a low value burden resistor as its load. It's the voltage developed across the burden resistor that is the input to the ADC. If you have too high a value of burden, the CT will distort horribly and produce massive errors.</p>
<p>I think we need your full circuit diagram of the input side to check what you have built.</p>
<p>Assuming your build is correct and your description is at fault, have you set the phase angle calibration PHASECAL? The procedure is under "Calibration" in Building Blocks.<br />
My bet is your load of 0.5 A is nowhere near 110 W, although it might be 110 VA, because the current is very nearly in quadrature with the voltage. If the phase angle is not set correctly, the power can easily go negative with a highly reactive load.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26447"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7402.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="cat101&#039;s picture" title="cat101&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: As load goes down the power reading goes negative (no generation)</h3>

    <div class="submitted">Submitted by <a href="../user/7402.html" title="View user profile.">cat101</a> on Sun, 04/01/2015 - 22:10.</div>
    <div class="content">
     <p>Hi Robert. Thanks for your reply and sorry for my confusing post. My A/Cs&nbsp;are rated at&nbsp;6Kw and on my test with just one unit turned on I measure 400&nbsp;watts (not Kw). This value is what I expected based on the A/C specs. The voltage dividers I was referring to are the ones needed to bias the CT (after the burden resistor) to 2.5v at the ADC input (schematic attached).</p>
<p>Regarding phasecal, I have two types of CTs and I calibrated both types&nbsp;on my bench with a resistive load of 500W (the values I use are 2.2 for the SCT-013-00 and 1.8 for the Murata&nbsp;56300C). I haven&#39;t recalibrated&nbsp;after I installed it permanently on my house. Do you think it may make a difference? Since you pointed on this direction, let me add a bit of complexity to the scenario:</p>
<ol>
<li>The channel that is causing me trouble has a longer cable&nbsp;stretch&nbsp;(around 2m of coax cable).</li>
<li>I have an automatic voltage stabilizer (it has an autotransformer with 5 steps). I&#39;m sampling the mains voltage before the stabilizer and the CT that causes problem is taping a circuit that is after the stabilizer. Can the auto transformer in the stabilizer cause a phase shift? (I did not calibrate with the stabilizer)</li>
</ol>
<p>In order to recalibrate phasecal I will now have to do some re-wiring to add a reference resistive load. Is there a way to do using the existing A/C load? The manufacturer claims 99% power factor (I guess when running and not in standby)</p>
<p>Thanks</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: As load goes down the power reading goes negative (no generation)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/01/2015 - 00:06.</div>
    <div class="content">
     <p>You circuit is fine - the bias network is what we call your voltage dividers, and they're actually before the CT, it just that you've drawn them where they are to put the CT terminals on the edge.  But I've never checked the phase shift through an auto-transformer! (Though I do have a Variac that I use while testing, so it's possible for me to run some tests.) If the ratio is close to unity, I wouldn't expect much phase shift, though it's not something I would rule out.</p>
<p>But surely, taking voltage before the stabiliser and current after is giving you false power readings anyway? - taken to the extreme you could say that when I test a CT, I use 1200 W because I have a 240 V supply and run the CT at up to 5 A, whereas in truth the power is less than 30 W because I run at less than 6 V derived from a fixed transformer that is fed from the Variac.</p>
<p>Did you set PHASECAL for each current input with the correct CT and the voltage adapter? I ask because it corrects for three things, phase error in the VT, phase error in the CT and the time difference between sampling VT and CT, and while the phase errors ought to be similar in identical CTs, the timing error between channels could well be different depending on which sketch you're using. If you're using emonLib, you're OK but if you read all 5 inputs in sequence, you're not OK.</p>
<p>As you're concerned about the power indication at a very small load (whose power factor we don't know but I'm guessing is poor), you could try adjusting PHASECAL to give a small positive power (much less than the 110 W you assumed), then check what you get on full load. If you then read pf = 0.99 on full load, you're probably close. The theory is that with a resistive load, you have a fairly broad maximum with an ill-defined peak, so a small error in angle/timing makes little difference there, but manifests itself as a large error in real power when the power factor is close to zero.  If you think what's happening in terms of the voltage and current vectors, cos(5&deg;) = 0.996, so a 5 degree error with a resistive load gives 0.4% real power error, whereas with a reactive load of pf = 0.1 (phase angle = 84&deg;), a 5&deg; error will give a pf of 0.017 or 0.156, depending on which way it is - and if that is your 110 VA load, it could be 11 W, 2 W or 17 W.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26484"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: As load goes down the power reading goes negative (no generation)</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Tue, 06/01/2015 - 04:36.</div>
    <div class="content">
     <p>I think a lot of them have crankcase heaters, so that might be part of&nbsp;what you&#39;re seeing. &nbsp; &nbsp;Some quick googling suggests they&#39;re often in the ~50W range, so that would only account for about half the current you&#39;re seeing. &nbsp;Generally they&#39;re just heating elements, so you&#39;d expect the PF of at least that component to be 1. &nbsp;Often manufacturers can be quite helpful with technical details like that, so it might be worth asking them.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26514"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7402.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="cat101&#039;s picture" title="cat101&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: As load goes down the power reading goes negative (no generation)</h3>

    <div class="submitted">Submitted by <a href="../user/7402.html" title="View user profile.">cat101</a> on Wed, 07/01/2015 - 12:19.</div>
    <div class="content">
     <p>Hi guys. Thanks for you support so far.</p>
<p>@dBC your comment is in line with what I have read. In theory compressors will warm and cool themselves&nbsp;for protection. Some people even talk about active self-lubrication.&nbsp;Still, it does not make sense to me for&nbsp;my scenario. This time of the year temperature ranges between 20-40C&nbsp;. I also see/hear the compressor and it doesn&#39;t look like is doing anything mechanical. Based on Robert&#39;s suggestion about the power factor,&nbsp;I checked the schematics of the compressor (Daikin&nbsp;4MXD80BVMA)&nbsp;and it is inverter based. Electricity gets converted to DC&nbsp;and then back into a 3-phase AC supply that goes into the compressor (with variable frequency). I&#39;m no expert here but I guess this is why the manufacturer can claim&nbsp;99% pf. Can switching power AC-DC supplies have a bad pf?</p>
<p>@Robert your comment about the implication of an autotransformer/variac&nbsp;makes sense. I have measured my stabilizer and verified that it has 5 discrete steps. It seems that for my house most of the time is set on a -7V step (mains is close to 230v). So for practical purposes I can assume is a constant error and mask it on the ICAL&nbsp;value (it should all be linear).&nbsp;</p>
<p>Regarding PHASECAL, I originally&nbsp;calibrated it on my workbench for the two types of CTs coupled with a common VT. I did not calibrated for each CT alone. I&#39;m also using eMonLib so the uC timing issues should be the same for all channels. Last night I tried&nbsp;your suggestion and manually&nbsp;played with PHASECAL&nbsp;while the A/C was on standby until I got a positive reading . My original calibrated value was 2.20 and 2.5 did the trick. I then cranked up the A/C and adjusted ICAL at 700W. When I turned it off the real power reading went below zero. I repeated the procedure with a PHASECAL of 2.8 and the same happen after turning off the A/C. This morning when I woke up the reading was still negative. I have found that if I reset the board the value becomes positive... What can be creating this &quot;memory effect&quot;? Should I keep on playing with PHASECAL? I seems that the 2.20 value that I originally had will always give a negative reading while 2.5 or 2.8 will be positive after reset.</p>
<p>FYI: in all PHASECAL&nbsp;scenarios, the power reading after reset and having set ICAL with a 700W load&nbsp;is under 20W (more like 10W). Therefore this does not explain the 0.5A I&#39;m measuring with my AC clamp (it should be 100W +- pF).</p>
<p>Thanks</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26516"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: As load goes down the power reading goes negative (no generation)</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 07/01/2015 - 12:46.</div>
    <div class="content">
     <p><em>&nbsp;I checked the schematics of the compressor</em></p>
<p>No sign of any heating element?</p>
<p><em>Can switching power AC-DC supplies have a bad pf?</em></p>
<p>Definitely. &nbsp;Especially when they&#39;re operating in a very low power standby mode. &nbsp;I&#39;ve got several around my house that behave like a big capacitor.... lots of VAs, but close to no Watts. &nbsp;My microwave oven just sitting on the bench being a digital clock sucks about 80VA but only about 3W (from memory).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26517"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: As load goes down the power reading goes negative (no generation)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 07/01/2015 - 13:18.</div>
    <div class="content">
     <p><i>"This morning when I woke up the reading was still negative. I have found that if I reset the board the value becomes positive... "</i></p>
<p>That I do NOT understand. Not at all. Which sketch are you using? Where/how are you reading those values? There's nothing in the standard sketches that remembers the power from one measurement to the next, the "watt-hours" sketches accumulate energy, but don't remember power.</p>
<p>There's something that has a pretty big phase shift in your system, you should not need PHASECAL values approaching 3. If you look at Building Blocks to see how Phasecal works, you'll see that with a value of 2.8 it is extrapolating a long way, which is bad. It might be worth customising your emonLib and reversing the order of the voltage and current readings, that should (if I'm guessing correctly) allow you to reduce the value of Phasecal and the distortion it's likely to be creating. (As a side note, if the voltage is not a perfect sine wave, the algorithm introduces significant distortion that increases - obviously - as you extrapolate further.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/6414"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-GfN0VXgtaG_96zP2jfhJonsGV-aJcPo3YgKbNcGVLdI" value="form-GfN0VXgtaG_96zP2jfhJonsGV-aJcPo3YgKbNcGVLdI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/6414 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:01:11 GMT -->
</html>
