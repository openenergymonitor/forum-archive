<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11799 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:39:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title> (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style=""> (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>
        <span class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 13/12/2015 - 20:00</span>
        <div class="content"><h2><strong>UPDATE (27/01/16): PLEASE DON&#39;T INSTALL THIS BETA: There is a new SD cad image in development that will be released in a couple of weeks.</strong></h2>
<p><strong>IMPORTANT:&nbsp;If you are currently running this beta you willl get&nbsp;<em>&#39;Can&#39;t connect to </em><em>database&#39; </em>error after an update. You will need to update your local MYSQL Emoncms database&nbsp;username and password. This is due to a&nbsp;<a href="https://github.com/emoncms/emoncms/commit/211c90fdceba434fd14aec1d60e192c12eb1a7af">change in the default MYSQL username and password </a>in default settings.php&nbsp;to improve security:</strong></p>
<p>Login to MYSQL with root user (default password raspberry):</p>
<pre>
rpi-rw</pre><pre>
mysql -u root -p</pre><p>Create new user:</p>
<pre>
CREATE USER &#39;emoncms&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;emonpiemoncmsmysql2016&#39;;

GRANT ALL ON emoncms.* TO &#39;emoncms&#39;@&#39;localhost&#39;;

flush privileges;

exit;
</pre><pre>
rp-ro</pre><p>&nbsp;</p>
<p>&nbsp;</p>
<p>-------------------------------------------------------------------------------</p>
<p><strong>DOWNLOAD BETA: <a href="http://openenergymonitor.org/files/emonSD-22Dec2015.img.zip">emonSD-22Dec2015.img.zip</a>&nbsp;(768Mb)</strong></p>
<p><strong>USA Mirror: <a href="http://oem.aluminumalloyboats.com/oem/emonSD-22Dec2015.img.zip">emonSD-22Dec2015.img.zip</a></strong></p>
<p>MD5 Checksum:&nbsp;32f2b3fd4551cbca8e63e78b0304da5f</p>
<p><strong>Here is the latest version of our emonPi / emonBase (RaspberryPi + RFM69Pi) pre-built SD card image.&nbsp;</strong></p>
<p>This post follows on from&nbsp;<a href="11407.html">Steps towards an EmonCMS 9.0 SD Card Image + Upgrade path</a>, the <a href="11695.html">Low-write mode - your thoughts please</a> thread and blog posts on <a href="http://openenergymonitor.blogspot.com/2015/10/emonpi-nodered-and-mqtt.html">node-RED &amp; MQTT</a>, <a href="http://openenergymonitor.blogspot.com/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB</a> and <a href="http://openenergymonitor.blogspot.co.uk/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWaveRF OOK control</a>.&nbsp;&nbsp;</p>
<p>Key Features:&nbsp;</p>
<ul>
<li>Based on <a href="https://minibianpi.wordpress.com/2015/11/12/minibian-jessie-2015-11-12-is-out/">minibian lightweight Jessie (12-11-15)</a>&nbsp;</li>
<li>4GB min card size download&nbsp;(shipping on 8GB expanded SD card)</li>
<li>Emoncms V9 (<a href="https://github.com/emoncms/emoncms/blob/stable/docs/RaspberryPi/readme.md">RasPi&nbsp;emonPi&nbsp;install</a>&nbsp;- thanks Paul Reed for writing the guide)&nbsp;</li>
<li>Read-only&nbsp;root FS (see <a href="11695.html#comment-36528">discussion thread</a>)</li>
<li><a href="http://openenergymonitor.blogspot.co.uk/2015/10/emonpi-nodered-and-mqtt.html">NodeRED</a>, <a href="http://openenergymonitor.blogspot.com/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWave RF MQTT OOK control</a> and <a href="http://openenergymonitor.blogspot.com/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB</a>&nbsp;all pre installed and configured</li>
</ul>
<p>Please report any bugs on this thread.&nbsp;</p>
<h1>Data Migration&nbsp;</h1>
<p>If you&#39;re moving from our previous pre-built-SD card, and have Emoncms data you want to migrate, this can be done using the migration and import script:&nbsp;</p>
<p>If you&#39;re moving from the old image, <strong>on&nbsp;your old Pi</strong>, you will need to<strong>:</strong></p>
<ul>
<li>SSH into existing emonpi/emonbase</li>
<li>Enable write mode: rpi-rw</li>
<li>git clone&nbsp;https://github.com/emoncms/usefulscripts.git</li>
<li>sh usefulscripts/emonpi-migrate/emonpi-export.sh</li>
</ul>
<p>On the <strong>new emonpi:&nbsp;</strong></p>
<p>Copy the resultant backup.tar.gz which will be created in /home/pi/data to your computer.</p>
<p>Prepare the new SD card with the new image. Either copy the backup.tar.gz onto the data partition manually with an sd card reader,&nbsp; prior to powering up the pi, or copy it over using ssh.<br />
Then:</p>
<ul>
<li>SSH into emonpi/emonbase with new image</li>
<li>Enable write mode: rpi-rw</li>
<li>sh usefulscripts/emonpi-migrate/emonpi-import.sh</li>
</ul>
<p>We have now built in the backup export script into Emoncms running on the new image, this will make migrating much easier in the future. For more into, and to&nbsp;post issues regarding the migration script,<br />
see this forum discussion <a href="11843-2.html">thread</a>.</p>
<p><a href="../sites/default/files/createbackup.png"><img alt="" src="../sites/default/files/createbackup.png" style="width: 600px; height: 215px;" /></a></p>
<h1>Storage&nbsp;&amp;&nbsp;Read-only File system&nbsp;</h1>
<p>The image is based on Minibian&nbsp;(Lightweight Raspbian&nbsp;Jessie)&nbsp;which makes for a very space efficient stack. With everything installed (inc nodeRED&nbsp;&amp; openHAB) total system size is 1.5GB compared to the previous ready-to-go emonPi&nbsp;image, which was&nbsp;over 2GB <em>without</em> nodeRED or openHAB.</p>
<p>As before, the filesystem&nbsp;is in read-only mode by default. <a href="11695.html#comment-36528">discussion thread</a>.</p>
<p>To put the filesystem in read/write mode, use the command: <em>rpi-rw</em>&nbsp;<br />
To return to read-only mode, use the command:<em> rpi-ro</em></p>
<pre>
pi@emonpi:/boot$ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/root       3.1G  1.5G  1.5G  52% /
devtmpfs        483M     0  483M   0% /dev
tmpfs           487M     0  487M   0% /dev/shm
tmpfs           487M   31M  456M   7% /run
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs           487M     0  487M   0% /sys/fs/cgroup
tmpfs            20M  6.5M   14M  33% /var/lib/openhab
tmpfs           1.0M  8.0K 1016K   1% /var/lib/dhcp
tmpfs            30M   18M   13M  59% /var/log
tmpfs            30M   40K   30M   1% /tmp
/dev/mmcblk0p1   61M   20M   42M  32% /boot
/dev/mmcblk0p3  484M   32M  427M   7% /home/pi/data

</pre><p>The main data folder for emoncms is /home/pi/data this folder is always mounted Read/Write. A number of other folders are mounted in RAM (tmpfs), see <a href="https://github.com/openenergymonitor/emonpi/blob/master/fstab">/etc/fstab</a>. A read-only file system presents challenges to some core Linux processes such as DHCP and NTP. A couple of DHCP &amp; Resolv <a href="http://github.com/openenergymonitor/emonpi/blob/master/install#L57">files</a> are located in the writeable ~/data folder and symlinked to /etc and a custom <a href="http://github.com/openenergymonitor/emonpi/blob/master/dhclient-script_minibian">/sbin/dhclient-script</a> is used.<a href="http://github.com/emonhub/ntp-backup">NTP-backup</a> (thanks Paul) is used to enable NTP clock updates in R/O mode. See the original NTP discussion <a href="5877.html">thread</a>.</p>
<h1>emonPi</h1>
<p>Now updates itself on first factory boot so we will always ship with latest software pulled from github. emonPi LCD now shows when it&#39;s updating and also LCD scrip has been updated to include authenticated MQTT support and to display&nbsp;temperature, VRMS and pulse count values as well as power 1 &amp;2.</p>
<p><a href="../sites/default/files/emonpi_update.jpg"><img alt="" src="../sites/default/files/emonpi_update.jpg" style="width: 300px; height: 169px;" /></a></p>
<p>&nbsp;</p>
<h1><strong>Emoncms&nbsp;V9&nbsp;</strong></h1>
<p><strong>Access via</strong>: <a href="http://emonpi/" title="http://emonpi">http://emonpi</a></p>
<p><strong>Authenticate</strong>: Create the admin user account&nbsp;</p>
<p><strong>Configure</strong>: emonhub.conf (located in ~/data) via web interface&nbsp;</p>
<p><strong>Update</strong>: Pull in the latest updates from Emoncms&nbsp;stable branch using the web-based update tool in Administration &gt; update emonPi.&nbsp;&nbsp;</p>
<p><a href="../sites/default/files/emoncmsV9.png"><img alt="" src="../sites/default/files/emoncmsV9.png" style="width: 700px; height: 325px;" /></a></p>
<p>&nbsp;</p>
<h2><strong>SSH &nbsp;</strong></h2>
<p>The default SSH password has been changed from &quot;raspberry&quot; to &quot;emonpi2016&quot; since even though we recommend users change their password, not many do. Moving away from the default&nbsp;raspberry will give a little more security. It&#39;s still <strong>HIGHLY RECOMMENDED</strong> to change the SSH password using&nbsp;<em><strong>passwd</strong></em> (be sure the filesystem is in R/W mode before you change the password (rpi-rw)&nbsp;</p>
<p>&nbsp;</p>
<h2><strong>MQTT</strong></h2>
<p>As before, the Mosquitto&nbsp;MQTT&nbsp;server is running on port 1883. emonHub&nbsp;posts emonPi data to&nbsp;<em>emonhub/rx/&lt;nodeID&gt;/values</em> topic. Mosquitto&nbsp;has been updated to the latest verion supporting web-sockets installed via mosquitto PPA:&nbsp;http://repo.mosquitto.org/debian/mosquitto-jessie.list</p>
<p>Port 1883 is open by default and authentication has been turned on:</p>
<p>mosquitto username &quot;emonpi&quot;</p>
<p>mosquitto password &quot;emonpimqtt2016&quot;</p>
<p>change in :&nbsp;</p>
<pre>
sudo nano /etc/mosquitto/mosquitto.conf</pre><p>add lines&nbsp;</p>
<pre>
allow_anonymous false
password_file /etc/mosquitto/passwd</pre><p>To generate a password file, use the mosquitto_passwd tool. It will prompt for a password, then create a hashed password file.&nbsp;</p>
<pre>
$ sudo mosquitto_passwd -c /etc/mosquitto/passwd username</pre><address>&nbsp;</address>
<address>Note if mosquitto&nbsp;authentication&nbsp;credentials are change the new credentials will also need to be updated in:</address>
<address>&nbsp;</address>
<address>~/data/emonhub.conf</address>
<address>/var/www/emoncms/settings.php</address>
<address>~/emonpi/lcd/emonPiLCD.py</address>
<address>~/oem_openhab/configuration/openhab.cfg</address>
<address>in node-RED MQTT node&nbsp;via web flows editor&nbsp;</address>
<address>&nbsp;</address>
<h2><strong>NodeRED</strong></h2>
<p>Node-RED is installed and set up with a basic (but useful!)&nbsp;demo flow to subscribe to emonHub MQTT&nbsp;topic and send an email to alert the user when emonTH batteries are low. For email to work, you will have to enter your gmail&nbsp;or smtp&nbsp;details into the node-RED email node. See <a href="http://openenergymonitor.blogspot.com/2015/10/emonpi-nodered-and-mqtt.html">node-RED blog post</a>. For &nbsp;our install and&nbsp;setup notes see <a href="https://github.com/openenergymonitor/oem_node-red">oem_node-red repo</a></p>
<p><strong>Access Via</strong>:&nbsp;<a href="http://emonpi:1880/">http://emonpi:1880</a></p>
<p><strong>Authentication</strong>: user &quot;pi&quot; and password &quot;emonpi2016&quot;&nbsp;</p>
<p>The User folder is in the R/W partition so flows can be saved via web editor without he need to change to R/W mode&nbsp;/home/pi/data/node-red</p>
<p>Set user name and password in /home/pi/node-red/settings.js. Password is hash string generated&nbsp;using :</p>
<p><em>$ node&nbsp;-e &quot;console.log(require(&#39;bcryptjs&#39;).hashSync(process.argv[1], 8));&quot;&nbsp; your-password</em></p>
<p><img alt="" src="../sites/default/files/nodered.png" style="height: 294px; width: 600px;" /></p>
<h2>&nbsp;</h2>
<p><strong>Note: Node-RED as setup in the image is compiled for Pi2, to use with Model B+ Node will need to be recompiled. Follow these instructions:&nbsp;</strong></p>
<p>Check if node &amp; npm are installed/working properly, normally you will get these results:</p>
<pre>
pi@emonpi:~$ node -v
Segmentation fault
pi@emonpi:~$ npm -v
Segmentation fault</pre><p>Install ARM v6 (for a RasPi model B 512MB) LTS version of node.js</p>
<pre>
wget <a href="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz" title="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz">https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz</a>
tar -xvf node-v4.2.4-linux-armv6l.tar.gz
cd node-v4.2.4-linux-armv6l/
sudo cp -R * /usr/</pre><p>Check if Node-Red is working (can take up to 40-50s on a RasPi model B 512MB)</p>
<pre>
sudo service nodered start</pre><p>Re-enable the Node-Red service (maybe not nescessary, haven&#39;t tested it)</p>
<pre>
sudo systemctl daemon-reload
sudo systemctl enable nodered.service</pre><p>Check if Node-Red gets auto-started on boot:</p>
<pre>
sudo reboot</pre><h2>&nbsp;</h2>
<h2><strong>OpenHAB&nbsp;</strong></h2>
<p>OpenHAB is installed and setup with the basic skeleton OpenEnegyMonitor config. See <a href="http://openenergymonitor.blogspot.co.uk/2015/12/openenergymonitor-emonpi-and-openhab.html">openHAB blog post</a>.</p>
<p><strong>Access via</strong>:&nbsp;<a href="http://emonpi:8080/">http://emonpi:8080</a></p>
<p><strong>Authenticate</strong>: user &quot;pi&quot; and password &quot;emonpi2016&quot;</p>
<p>Change user name and password in&nbsp;/etc/openhab/configurations/users.cfg</p>
<p><strong>Configure:&nbsp;</strong>oem.items and oem.sites and located in git repo ~/oem-opemhab and symlinked&nbsp;to default.items and default.sitemap in&nbsp;relevant folders in&nbsp;to&nbsp;/etc/openhab/configurations.&nbsp;</p>
<p><em>Note:&nbsp;Config files are symlinked to our <a href="https://github.com/openenergymonitor/oem_openHab">oem_openhab</a> git repo so we can add functionally with git updates, pulled in automatically with emonPi&nbsp;update. It&#39;s recommended to setup your own sitemap and files config so your changes will not be overwritten by out updates: </em></p>
<p><em>e.g. dave.items and dave.sitemaps then navigate to&nbsp;<a href="http://emonpi8081/openhab.app?sitemap=dave">http://emonpi8081/openhab.app?sitemap=dave</a></em></p>
<p><img alt="" src="../../../1.bp.blogspot.com/-lAn2SNSzyLQ/VmVkYfsFDxI/AAAAAAABkic/Wqhp7g4R4uA/s400/OpenEnergyMonitor_openHAB.png" style="width: 385px; height: 400px;" /></p>
<h2>&nbsp;</h2>
<h2>LightWaveRF OOK RF Tx&nbsp;</h2>
<p>Service to control lightwaveRF plugs and relays via OOK (OOK Tx module installed on emonPi) controlled via MQTT&nbsp;and openHAB. See <a href="http://openenergymonitor.blogspot.com/2015/11/remote-control-of-lightwave-rf-plugs.html">LightWaveRF OOK blog post</a>.</p>
<p><a href="../../../3.bp.blogspot.com/-ooKdNYl_8fA/Vlc-c0pyyJI/AAAAAAABj5o/M6wlA5rH_Ko/s640/emonPi_lwrf.png"><img alt="" src="../../../3.bp.blogspot.com/-ooKdNYl_8fA/Vlc-c0pyyJI/AAAAAAABj5o/M6wlA5rH_Ko/s640/emonPi_lwrf.png" style="height: 319px; width: 300px;" /></a></p>
<h1>Timezone&nbsp;</h1>
<p>The raspi-config utility is not included in the Minibam image. The command $ tzselect&nbsp;or $&nbsp;dpkg-reconfigure tzdata&nbsp;can be used to set the timezone. Then resulting&nbsp;timezone &quot;TZ=xxx&quot;&nbsp;&nbsp;can be appended to .profile file using $ nano .profile to make the change persistent at boot.&nbsp;</p>
<h1>To Do:</h1>
<p>Align to 128K SD card blocks <a href="11695.html#comment-37411">http://openenergymonitor.org/emon/node/11695#comment-37411</a></p>
<p>Check logrotate is working properly</p>
<ul></p>
<li>&nbsp;</li>
</ul>
  <div class="forum-topic-navigation clear-block">
          <a href="12143.html" class="topic-previous" title="Go to previous forum topic">‹ Base topic for emoncms 9.3 as MQTT subscriber</a>
              <a href="11720.html" class="topic-next" title="Go to next forum topic">EmonCMS 9.2 migration data corruption ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-37076"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Wed, 16/12/2015 - 10:32.</div>
    <div class="content">
     <p>Glyn,</p>
<p>I&#39;m assuming that if folks want to run this on a pi B and need Node-Red then they can use npm uninstall and then do the install again?</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37079"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Wed, 16/12/2015 - 11:07.</div>
    <div class="content">
     <p>Also you need to add in that the wpa_supplicant file needs to be edited to include the SSID and password of the person installing this.</p>
<p>Which gets a bit hairy because the wlan0 error messages get blasted into the editor if you are in the editor at the time.</p>
<p>Simon</p>
<p>PS You might also want to remove your SSID and password otherwise we&#39;ll all be parking outside to use the free wifi.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37081"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 16/12/2015 - 12:09.</div>
    <div class="content">
     <p>Yes, because of the way node-RED is compiled for the processor architecture&nbsp;I don&#39;t think it will be possible to have a single pre-built image to support both Pi2 and B+/B. Yes an uninstall then re-install of node-RED will be required for model B+ owners. I will post a guide.</p>
<p>Wifi&nbsp;password can be entered using the Wifi&nbsp;web-config in local emoncms when connected via Ethernet:&nbsp;<a href="https://guide.openenergymonitor.org/#firstboot">http://openenergymonitor.org/emon/modules/emonpi#firstboot</a>.</p>
<p>Good spot regarding my Wifi&nbsp;password, I&#39;ll make sure to remove that :-)&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37083"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Wed, 16/12/2015 - 12:26.</div>
    <div class="content">
     <p>Hi Glyn.&nbsp;</p>
<p>I&#39;ll test the node-Red thing, just getting things going again on a Pi B+.</p>
<p>On the wifi point, the issue is that if you haven&#39;t got the Pi plugged into a wired connection you can&#39;t get the connection as Jessie light doesn&#39;t have a browser (as far as I can tell). So to get to the local emoncms server you need wifi up and running. (and the link you give above is to the public emoncms not the local one).</p>
<p>So it would be good to have the info on how to change the wpa_supplicant file in this case. All I had to enter was the SSID and password. You maybe need examples for both types of authentification though.</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37101"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 16/12/2015 - 16:15.</div>
    <div class="content">
     <p>Agree, it would be nice if the emonPi broadcast it&#39;s own wifi access point initially for setup (<a href="11339.html">see forum thread</a>). However at present we are assuming a user would plug the unit into an Ethernet socket initially then scan and connect to a local wifi network in emoncms. The link I sent above is referring to local Emoncms&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37102"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Wed, 16/12/2015 - 16:40.</div>
    <div class="content">
     <p>Great timing! &nbsp;I am doing an upgrade today, I&#39;ll install this and see how it goes.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37111"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 16/12/2015 - 19:31.</div>
    <div class="content">
     <p>Please keep in mind that it's a beta, expect another release later this week or early next week </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37123"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Thu, 17/12/2015 - 08:49.</div>
    <div class="content">
     <p>Glyn,</p>
<p>Instead of having the system be an AP in order to get the wifi up and running, why not include connman or wicd. I think either of these would enable a user using SSH to be able to set up their wifi&nbsp;without having to edit the files directly.</p>
<p>Even if you do have the system come up as an AP, one of these tools might still be useful for any non standard wifi setups. Just a thought.</p>
<p>Simon</p>
<p>//NOTE - Duplicate post removed by mod!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37130"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 17/12/2015 - 12:15.</div>
    <div class="content">
     <p>I have been relocating the wpa_supplicant.conf to the /boot partition for some time now as it allows the SSID and password to be set on a windows PC when the image is written, these 2 lines will move the wifi settings without upsetting anything else</p>
<p>&nbsp; &nbsp; sudo&nbsp;mv&nbsp;/etc/wpa_supplicant/wpa_supplicant.conf&nbsp;/boot/wifi.conf<br />
&nbsp; &nbsp; sudo&nbsp;ln -s /boot/wifi.conf /etc/wpa_supplicant/wpa_supplicant.conf</p>
<p>Then for a straight forward set up just add the ssid and password to the end of that file</p>
<p>&nbsp; &nbsp; network={&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;ssid=&quot;<em>wifi_ssid</em>&quot;&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; psk=&quot;<em>wifi_password</em>&quot;&nbsp;<br />
&nbsp; &nbsp; }</p>
<p><a href="https://www.raspberrypi.org/documentation/configuration/wireless/wireless-cli.md">A basic guide to edit the wpa_supplicant.conf&nbsp;is provided on the raspberrypi.org site</a></p>
<p>Any other requirements like power management or fixed ip&#39;s etc can be applied exactly as you&nbsp;would normally do. this just removes the dependency on a working ethernet or server, although I absolutely&nbsp;agree an AP would be the better solution by far.&nbsp;</p>
<p>This little trick was priceless recently when I installed a Pi at a location where we didn&#39;t have&nbsp;access to the main building, only a remote&nbsp;building which relied on wifi&nbsp;from the main building&nbsp;so there were no ethernet&nbsp;points to be found.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37132"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/450.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Thu, 17/12/2015 - 13:06.</div>
    <div class="content">
     <p>Nice work all - the image has come on a long way.</p>
<p>&nbsp;</p>
<p>I&#39;m going to try this over the Christmas period (beats watching TV re-runs!)</p>
<p>&nbsp;</p>
<p>Just a thought for the various configuration options mentioned above - is there a better way to &quot;configure&quot; the system on initial boot - I&#39;m thinking more like the ISO Ubuntu images you download and then have a guided install to get it setup on first boot...</p>
<p>This could solve:</p>
<p>1. Setting a new root password (or even generating a random one)</p>
<p>2. Setting up Wifi for the first time</p>
<p>2. Installing the correct NodeRED distro&nbsp;for the architecture</p>
<p>and a few other options.</p>
<p>&nbsp;</p>
<p>Or is there potential for a simple configuration file (XML for example) which could be edited on the PC when you write the SD card image - in there you could configure the various options ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37133"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 17/12/2015 - 13:27.</div>
    <div class="content">
     <p>Good idea, I like it! I would recommend&nbsp;waiting a day or two before downloading. I have a new image with some updates (logrotate &amp; nodeRED&nbsp;R/W file system&nbsp;fixes) about to be uploaded.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37135"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Thu, 17/12/2015 - 14:53.</div>
    <div class="content">
     <p>I would like to echo this as a request:</p>
<p><em>I have been relocating the wpa_supplicant.conf to the /boot partition for some time now as it allows the SSID and password to be set on a windows PC when the image is written, these 2 lines will move the wifi settings without upsetting anything else</em></p>
<p>I installed the new image yesterday, but was not able to get it working. &nbsp;Is the default (wired) network address mode set to DHCP? &nbsp;The Emonbase&nbsp;did not show up on my network and was not discovered using FING on&nbsp;the DHCP subnet.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37137"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 17/12/2015 - 15:11.</div>
    <div class="content">
     <p>Just had a quick look at the amount of memory running emoncms, nodeRED, LightWaveRF and openhab&nbsp;all at the same time takes up.&nbsp;</p>
<p>Running on a Pi2 the new image uses 440MB leaving 557MB free. For comparison&nbsp;old image (Raspbian without nodeRED / open HAB etc) running on a Pi2 used 220MB. Even though we have doubled the amount of RAM used, the Pi2 has 1GB, so we&#39;re not even at 50%. This should be fine.</p>
<p>Running the new image on a Pi zero with 512MB ram (same as a model B/B+)&nbsp;uses&nbsp;332Mb&nbsp;(interesting that it&#39;s less) leaving 161Mb&nbsp;free. This seems to work ok. Any thoughts?</p>
<p>&nbsp;</p>
<p><a href="../sites/default/files/pi2_vs_zero.png"><img alt="" src="../sites/default/files/pi2_vs_zero.png" style="width: 500px; height: 613px;" /></a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37145"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 17/12/2015 - 18:25.</div>
    <div class="content">
     <p>Yes, network is set to DHCP. Are you connected via Ethernet? Do the lights on the Ethernet port light up?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37193"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9145.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mrpetrov&#039;s picture" title="mrpetrov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/9145.html" title="View user profile.">mrpetrov</a> on Fri, 18/12/2015 - 20:58.</div>
    <div class="content">
     <p>Can we please have some MD5 or SHA1&nbsp;sums posted somewhere, so a&nbsp;check can be made that the file&nbsp;downloaded is what you <strong>actually</strong> uploaded?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37206"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 18/12/2015 - 23:41.</div>
    <div class="content">
     <p>Top post has been updated with MD5 checksum.&nbsp;</p>
<p>Today&nbsp;I&#39;ve uploaded a more recent image (18th&nbsp;Dec). This incorporates many of the fixes and to-dos mentioned at the end of the initial post. The only things left to do now is <a href="11695.html">align the SD card</a>&nbsp;and turn on <a href="11821.html">Mosquitto MQTT&nbsp;authentication</a>.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37217"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Sat, 19/12/2015 - 03:45.</div>
    <div class="content">
     <p>Re: &nbsp;DHCP problem: &nbsp;I had unintentionally connected to an airgapped network.&nbsp;</p>
<p>In other words, the other end of the cable was not plugged in. &nbsp;Doh!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37218"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Sat, 19/12/2015 - 07:26.</div>
    <div class="content">
     <p>Glyn,</p>
<p>(and probably Paul as well)</p>
<p>What are the implications of this being the &#39;default&#39; image when a lot of users have given up on SD cards and use&nbsp;usb HDDs. From&nbsp;the post you already referenced&nbsp;http://openenergymonitor.org/emon/node/11695 and where a lot of the discussion has taken place about optimisation for SD cards.</p>
<p>If someone were to use this image and then use the instructions for moving to a HDD would this work out of the box? Or would some of the functionality need to be reversed?</p>
<p>In any case, it would be great if when this is finally published there could be instructions (or a pointer to Paul&#39;s guide) on how to move everything onto a HDD.</p>
<p>Simon</p>
<p>PS I&#39;ve switched plan for my system to creating a normal installation following the Pi installation guide on Jessie Lite and moving this onto a HDD, so I won&#39;t be feeding back any info. Hope lots of other people will be able to give you feedback.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37222"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 19/12/2015 - 10:03.</div>
    <div class="content">
     <p>@JD easily done, I&#39;m afraid. At least the hardware bug which resulted in the emonpi shorting out if an Ethernet cable was plugged into RJ45 socket. Is DHCP working now/ Are you using the newer 18th Dec image&nbsp;</p>
<p>@Bramco Agree it would be good to have instructions for how to use this image with a HDD setup. Could someone with a hard drive setup help advise. Paul?&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37267"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9145.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mrpetrov&#039;s picture" title="mrpetrov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/9145.html" title="View user profile.">mrpetrov</a> on Sun, 20/12/2015 - 08:02.</div>
    <div class="content">
     <p>@Bramco&nbsp;If you don&#39;t mind me&nbsp;asking -&nbsp;what is the net result wanted by using a HDD vs SD card? Why do you do it?</p>
<p>@glyn.hudson Thanks for the checksum!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37271"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Sun, 20/12/2015 - 09:25.</div>
    <div class="content">
     <p>Hi petrov,</p>
<p>I can use it for other things. I have MQTT and node-red running and would prefer not to have to switch between RO and RW mode.</p>
<p>And while the guys have made great progress in setting up the image including things like alignment with the block size etc. I still prefer to move everything onto a HDD. I didn&#39;t have any SD card issues in the couple of years I&#39;ve had the system running. There are some other threads where you&#39;ll see that quite a lot of folks run from a HDD.</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37279"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 20/12/2015 - 13:34.</div>
    <div class="content">
     <p>The incidence of node red installed on this pre built image (beta) has got the user folder . node-red moves to the data partition which is always read write meaning flows can be edited and saved using online editor without having to put system into read write mode. However, if you have the hardware and the knowledge to run a hdd setup its a good option. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37285"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Sun, 20/12/2015 - 15:33.</div>
    <div class="content">
     <p>I installed the Dec 18 image yesterday and set up a basic system from scratch. &nbsp;Very nice work everyone! &nbsp;Some notes:</p>
<p>1. &nbsp;On Wifi page, next to the &quot;Connect&quot; button there is a misspelling. Right now it says &quot;... Then hit Refersh&quot;</p>
<p>2. &nbsp;I have legacy&nbsp;EmonTx&#39;s in my system.&nbsp;Having to comment out lines in EmonHub Editor&nbsp;to get them to work is less than user friendly. &nbsp;I guess it&#39;s too late now, but perhaps a new default node number&nbsp;for v1.6&nbsp;EmonTx&nbsp;would have been a way to ensure compatibility. &nbsp;Old EmonTX&#39;s were node 10 by default.</p>
<p>3. &nbsp;When creating a new virtual feed, it would be nice to have some description about how they work.&nbsp; I can guess, but my initial guess was wrong and I still don&#39;t know how to total kWh/d so that it displays on the dashboard correctly.</p>
<p>4. &nbsp;Dashboards displaying virtual feeds take a long time to load. &nbsp;On a Pi2, having one virtual rawdata&nbsp;&nbsp;visualization&nbsp;took 6 seconds to load. &nbsp;Having 2 visualizations took 10 seconds to load. &nbsp;If I switch&nbsp;the visualizations to use non-virtual feeds as their source, the dashboard loads very quickly. &nbsp;This is after collecting 16 hours of data... how slow will they be after collecting a month of data?</p>
<p>&nbsp;</p>
<p>I have not tried NodeRED or MQTT.</p>
<p>Hope that&#39;s helpful,</p>
<p>JD</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37287"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Sun, 20/12/2015 - 15:56.</div>
    <div class="content">
     <p>Oh and one more thing:&nbsp;</p>
<p>Feature request: &nbsp;Could we get a shutdown option for the emonBase? &nbsp;We have everything else now available via web interface (emonhub editor, updates, etc), but still need to SSH in to do a shutdown.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37289"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Sun, 20/12/2015 - 16:12.</div>
    <div class="content">
     <p>Glyn, thanks for the note about node-rede. You never know I may be back on this track soon given the issues I&#39;m having with a build from scratch using the RPi instructions.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37302"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sun, 20/12/2015 - 21:55.</div>
    <div class="content">
     <p>This is the first major update for my emonPi (firmware v2) and emocms (vlow-write-v8.5) and I want to make sure I do this correctly. &nbsp;I am guessing by this line (above):&nbsp;</p>
<blockquote><p><strong>Update:</strong> Pull in the latest updates from Emoncms&nbsp;stable branch using the web-based update tool in Administration &gt; update emonPi. &nbsp;</p>
</blockquote>
<p>that this will download all of the current updates and then update the emonPi. &nbsp;Is this correct? &nbsp;If so, things did not worked as hoped. &nbsp;Is there something I need to install manually instead of automagically? &nbsp;Or did I miss an obvious step?</p>
<p>I tried the update today so I think I am using the Dec 18 update.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37305"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 20/12/2015 - 23:01.</div>
    <div class="content">
     <p>@JD this would be, nice but a big security risk!</p>
<p>@Jon thanks for the log.</p>
<p>It looks like the update went ok. However I&#39;m afraid Emoncms V9 and the new features discussed on this thread won&#39;t be an OTA update. You will have to move to the new SD card image. We are working on a way to migrate, yet keep your existing data intact.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37310"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Mon, 21/12/2015 - 02:31.</div>
    <div class="content">
     <p>So what are the &quot;32 files changed, 2285 insertions(+), 143 deletions(-)&quot; that were done during the emonPi update?</p>
<p>You mentioned &quot;We are working on a way to migrate, yet keep your existing data intact.&quot; &nbsp;Is this lots of individual steps (manually) or some sort of a script (more automated)? &nbsp;I don&#39;t mind going thru the manual steps. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37362"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9157.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="whitecitadel&#039;s picture" title="whitecitadel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/9157.html" title="View user profile.">whitecitadel</a> on Tue, 22/12/2015 - 09:55.</div>
    <div class="content">
     <p>Hi All,</p>
<p>Just setting up my system, I am using a B+ (not Pi2) with an Emon board from the shop and this image as I have spare B+ and Pi2 is overkill in my view anyway.</p>
<p>Did I miss the instructions for node red on b+ or are they not posted yet? I did and npm uninstall and install but it seems its pre-compiled for wrong architecture. I am happy to git clone the latest to compile an install - but is there any special config for the emon&nbsp;SD&nbsp;image I need to be aware of?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37363"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 22/12/2015 - 10:59.</div>
    <div class="content">
     <p>@Jon data&nbsp;migration script (beta) has been posted by Trystan&nbsp;<a href="11843-2.html">http://openenergymonitor.org/emon/node/11843</a>. And instructions have been added to top post on this thread.&nbsp;</p>
<p>@whitecitadel follow instructions here for how to install node on Pi model B+&nbsp;<a href="http://nodered.org/docs/hardware/raspberrypi.html">http://nodered.org/docs/hardware/raspberrypi.html</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37410"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Wed, 23/12/2015 - 16:29.</div>
    <div class="content">
     <p>On the Dec 18 image: &nbsp;Node-red flows that I create are lost if the Pi is rebooted... do I need to invoke rpi-rw before creating flows?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37412"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 23/12/2015 - 17:33.</div>
    <div class="content">
     <p>@JD Ah, yes this has been fixed on the 22nd Dec image.&nbsp;</p>
<p>Can you check two things:&nbsp;</p>
<p>1. You should have a /home/pi/data/node-red folder and nodeRED should be using this as the user folder check log /var/log/nodered.log. If this folder does not exist then you will need to move the nodered user folder from /home/pi/.node-red to ~/data. See instructions:&nbsp;<a href="https://github.com/openenergymonitor/oem_node-red#move-user-data-partition-to-rw-data-partition-on-emonpi">https://github.com/openenergymonitor/oem_node-red#move-user-data-partition-to-rw-data-partition-on-emonpi</a></p>
<p>2. In&nbsp;/home/pi/data/nodered/settings.js the line &quot;readonly: true&quot; should be changed to &#39;readonly: false&#39;&nbsp;</p>
<p>Then restart node red&nbsp;</p>
<p>sudo service nodered restart</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37438"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Wed, 23/12/2015 - 23:06.</div>
    <div class="content">
     <p>Running the image on a Raspberry Model B 512MB with 8GB SD card. emonCMS and openHAB are working fine (out of the box)!</p>
<p>&nbsp;</p>
<pre>
pi@emonpi:~$ sudo find / -name &#39;red.js&#39;
/usr/local/lib/node_modules/node-red/public/red/red.js
/usr/local/lib/node_modules/node-red/red.js
/usr/local/lib/node_modules/node-red/red/red.js
/usr/lib/node_modules/node-red/public/red/red.js
/usr/lib/node_modules/node-red/red.js
/usr/lib/node_modules/node-red/red/red.js</pre><p>&nbsp;</p>
<p>Is this normal? Or is this the old installation from the package (I did the uninstall/remove command)?<br />
Or are these symlinks or something? I can run Node-Red manually by doing</p>
<pre>
node-red-pi --max-old-space-size=128 --userDir /home/pi/data/node-red</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37444"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 24/12/2015 - 00:01.</div>
    <div class="content">
     <p>Great, good to hear. What version (date) image are you running? Look for emonSD-XX file in /boot.&nbsp;</p>
<p>I think you have an older version with an older version of node red (not 0.12.4). New node red is installed in&nbsp;/usr/lib/node_modules/node-red as opposed to local. Either way I&#39;m surprised it&#39;s working ok on model B. I though node-red required recompile for arm V6 &nbsp;(model B/B+)&nbsp;compared to am V7 on Pi2. See&nbsp;http://nodered.org/docs/hardware/raspberrypi.html</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37446"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Thu, 24/12/2015 - 00:13.</div>
    <div class="content">
     <p><em>Following steps are done on a RasPi B 512MB with the SD image of 22/12/2015, downloaded the 23rd of December.</em></p>
<p>I started out doing the steps for a NPM install: <a href="http://nodered.org/docs/hardware/raspberrypi.html" title="http://nodered.org/docs/hardware/raspberrypi.html">http://nodered.org/docs/hardware/raspberrypi.html</a></p>
<p>What I did until now:</p>
<pre>
sudo apt-get remove nodered

wget <a href="http://node-arm.herokuapp.com/node_archive_armhf.deb" title="http://node-arm.herokuapp.com/node_archive_armhf.deb">http://node-arm.herokuapp.com/node_archive_armhf.deb</a>
sudo dpkg -i node_archive_armhf.deb
sudo apt-get install build-essential python-dev python-rpi.gpio

sudo npm install -g --unsafe-perm node-red
</pre><p>Did this check:</p>
<pre>
/usr/local/lib/node_modules/node-red/nodes/core/hardware/nrgpio ver 0</pre><p>Got &quot;0.6.0a3&quot; as a result. Then tested if everything works with:</p>
<pre>
node-red-pi --max-old-space-size=128 --userDir /home/pi/data/node-red</pre><p>EDIT (node-red run log):</p>
<pre>

Welcome to Node-RED
===================

24 Dec 00:21:19 - [info] Node-RED version: v0.12.4
24 Dec 00:21:19 - [info] Node.js  version: v0.12.6
24 Dec 00:21:19 - [info] Loading palette nodes
24 Dec 00:22:28 - [info] Settings file  : /home/pi/data/node-red/settings.js
24 Dec 00:22:28 - [info] User directory : /home/pi/data/node-red
24 Dec 00:22:28 - [info] Flows file : /home/pi/data/node-red/flows_emonpi.json
24 Dec 00:22:28 - [info] Server now running at <a href="http://127.0.0.1:1880/" title="http://127.0.0.1:1880/">http://127.0.0.1:1880/</a>
24 Dec 00:22:29 - [info] Starting flows
24 Dec 00:22:30 - [info] Started flows
24 Dec 00:22:31 - [info] [mqtt-broker:19211dbb.e6dee2] Connected to broker: mqtt://localhost:1883
24 Dec 00:22:32 - [info] [debug:Raw MQTT output: emonhub/rx/#]</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37500"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Fri, 25/12/2015 - 23:16.</div>
    <div class="content">
     <p>How is the autostart/service in the image&nbsp;made? Everything works fine manually, only&nbsp;starting the service by</p>
<pre>
sudo service nodered start</pre><p>doesn&#39;t do anything. If I check&nbsp;</p>
<pre>
sudo nano /lib/systemd/system/nodered.service</pre><p>Everything appears to be normal... What could be it?</p>
<p>EDIT:</p>
<p>Content of the file: /lib/systemd/system/nodered.service</p>
<pre>
# systemd service file to start Node-RED

[Unit]
Description=Node-RED graphical event wiring tool.
Wants=network.target
Documentation=http://nodered.org/docs/hardware/raspberrypi.html

[Service]
Type=simple
# Run as normal pi user - feel free to change...
User=pi
Group=pi
Nice=5
Environment=&quot;NODE_OPTIONS=--max-old-space-size=128&quot;

# Put node-RED user DIR on RW ~/data patition on emonPi
Environment=&quot;NODE_RED_OPTIONS=--userDir /home/pi/data/node-red&quot;

#Environment=&quot;NODE_RED_OPTIONS=-v&quot;
WorkingDirectory=/usr/lib/node_modules/node-red/
ExecStart=/usr/bin/node $NODE_OPTIONS red.js $NODE_RED_OPTIONS
# Use SIGINT to stop
KillSignal=SIGINT
# Auto restart on crash
Restart=on-failure
# Tag things in the log
SyslogIdentifier=Node-RED
#StandardOutput=syslog

[Install]
WantedBy=multi-user.target</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37505"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9145.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mrpetrov&#039;s picture" title="mrpetrov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/9145.html" title="View user profile.">mrpetrov</a> on Sat, 26/12/2015 - 08:48.</div>
    <div class="content">
     <p>According to&nbsp;<a href="https://blog.sleeplessbeastie.eu/2015/04/27/how-to-manage-system-services-on-debian-jessie/">https://blog.sleeplessbeastie.eu/2015/04/27/how-to-manage-system-services-on-debian-jessie/</a>&nbsp;services in Debian Jessie are managed a bit differently to what Wheezy did:</p>
<p>Check if service is active with:</p>
<blockquote><p>systemctl is-active nodered</p>
</blockquote>
<p>And enable/disable service on start-up with:</p>
<blockquote><p>sudo systemctl enable nodered</p>
<p>sudo systemctl&nbsp;disable nodered</p>
</blockquote>
<p>&nbsp;Hope this helps...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37513"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Sat, 26/12/2015 - 15:37.</div>
    <div class="content">
     <p>Mmm something is def. wrong here:</p>
<pre>
pi@emonpi:~$ systemctl is-active nodered
failed
pi@emonpi:~$ sudo systemctl enable nodered
pi@emonpi:~$ systemctl is-active nodered
failed
pi@emonpi:~$ systemctl is-active nodered
failed</pre><p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37547"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Sun, 27/12/2015 - 13:02.</div>
    <div class="content">
     <p>Now I re-did these steps to make sure:</p>
<pre>

sudo wget <a href="https://raw.githubusercontent.com/node-red/raspbian-deb-package/master/resources/nodered.service" title="https://raw.githubusercontent.com/node-red/raspbian-deb-package/master/resources/nodered.service">https://raw.githubusercontent.com/node-red/raspbian-deb-package/master/r...</a> -O /lib/systemd/system/nodered.service 
sudo wget <a href="https://raw.githubusercontent.com/node-red/raspbian-deb-package/master/resources/node-red-start" title="https://raw.githubusercontent.com/node-red/raspbian-deb-package/master/resources/node-red-start">https://raw.githubusercontent.com/node-red/raspbian-deb-package/master/r...</a> -O /usr/bin/node-red-start 
sudo wget <a href="https://raw.githubusercontent.com/node-red/raspbian-deb-package/master/resources/node-red-stop" title="https://raw.githubusercontent.com/node-red/raspbian-deb-package/master/resources/node-red-stop">https://raw.githubusercontent.com/node-red/raspbian-deb-package/master/r...</a> -O /usr/bin/node-red-stop 
sudo chmod +x /usr/bin/node-red-st* 
sudo systemctl daemon-reload 
sudo systemctl enable nodered.service</pre><p>Sadly, this is not working either. Haven&#39;t got enough Linux knowledge to know what&#39;s wrong.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37562"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Sun, 27/12/2015 - 20:55.</div>
    <div class="content">
     <p>Re-downloaded the image, used a new SD card and a spare Raspberry Pi B (512MB) to try again. Still the same issue, unable to make the service work. Manually starting by</p>
<pre>
node-red-pi --max-old-space-size=128 --userDir /home/pi/data/node-red</pre><p>is working just fine</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37563"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 27/12/2015 - 21:09.</div>
    <div class="content">
     <p>Strange, could you post the contents of your /lib/systemd/system/nodered.service file? It should contain the line:</p>
<p>Environment="NODE_RED_OPTIONS=--userDir /home/pi/data/node-red"</p>
<p>I then then ran </p>
<p>sudo systemctl daemon-reload</p>
<p>Just to confirm you are running this on a RaspberryPi model B+? And you had to recompile node to run on arm V6 are you described above?</p>
<p>On a RaspberryPi 2 node red should work on the image out of the box </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37564"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Sun, 27/12/2015 - 21:13.</div>
    <div class="content">
     <pre>
# systemd service file to start Node-RED

[Unit]
Description=Node-RED graphical event wiring tool.
Wants=network.target
Documentation=http://nodered.org/docs/hardware/raspberrypi.html

[Service]
Type=simple
# Run as normal pi user - feel free to change...
User=pi
Group=pi
Nice=5
Environment=&quot;NODE_OPTIONS=--max-old-space-size=128&quot;

# Put node-RED user DIR on RW ~/data patition on emonPi
Environment=&quot;NODE_RED_OPTIONS=--userDir /home/pi/data/node-red&quot;

#Environment=&quot;NODE_RED_OPTIONS=-v&quot;
WorkingDirectory=/usr/lib/node_modules/node-red/
ExecStart=/usr/bin/node $NODE_OPTIONS red.js $NODE_RED_OPTIONS
# Use SIGINT to stop
KillSignal=SIGINT
# Auto restart on crash
Restart=on-failure
# Tag things in the log
SyslogIdentifier=Node-RED
#StandardOutput=syslog

[Install]
WantedBy=multi-user.target</pre><p>&nbsp;</p>
<p>I did this on a RasberryPi B (not the plus version) 512MB. After booting the image I did these steps:</p>
<pre>
sudo apt-get remove nodered (got the message that this wan&#39;t installed)

wget <a href="http://node-arm.herokuapp.com/node_archive_armhf.deb" title="http://node-arm.herokuapp.com/node_archive_armhf.deb">http://node-arm.herokuapp.com/node_archive_armhf.deb</a>

sudo dpkg -i node_archive_armhf.deb

sudo apt-get install build-essential python-dev python-rpi.gpio

sudo npm install -g --unsafe-perm node-red

/usr/local/lib/node_modules/node-red/nodes/core/hardware/nrgpio ver 0

sudo apt-get update &amp;&amp; sudo apt-get install python-dev python-rpi.gpio</pre><p>And then I verified the working by:</p>
<pre>
node-red-pi --max-old-space-size=128 --userDir /home/pi/data/node-red
</pre><p>
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37565"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 27/12/2015 - 21:19.</div>
    <div class="content">
     <p>That all looks good. To make node red run at boot I just followed the instructions on the node red Raspberry Pi docs page. I recommend  you post on th node red Google group. Thy are very helpful</p>
<p><a href="http://nodered.org/docs/hardware/raspberrypi.html" title="http://nodered.org/docs/hardware/raspberrypi.html">http://nodered.org/docs/hardware/raspberrypi.html</a></p>
<p>https://groups.google.com/forum/#!forum/node-red</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37566"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 27/12/2015 - 21:24.</div>
    <div class="content">
     <p>Ah I think I see the issue, you have two versions of node red installed via npm. </p>
<p>The first in /usr/lib/node_modules/node-red/ this is what the deamon references. </p>
<p>You then installed to /usr/local/lib/node_modules/node-red</p>
<p>I yo change /usr/lib/node references to to /usr/local/lib in /lib/systemd/system/nodered.service<br />
This should fix the issue</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37570"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Sun, 27/12/2015 - 22:25.</div>
    <div class="content">
     <p>There are 2 versions indeed:</p>
<p>pi@emonpi:/$ sudo find -name &#39;red.js&#39;<br />
./usr/local/lib/node_modules/node-red/public/red/red.js<br />
./usr/local/lib/node_modules/node-red/red.js<br />
./usr/local/lib/node_modules/node-red/red/red.js<br />
./usr/lib/node_modules/node-red/public/red/red.js<br />
./usr/lib/node_modules/node-red/red.js<br />
./usr/lib/node_modules/node-red/red/red.js</p>
<p>Strangely, both are working when I do: <em>node red.js</em> in their directory.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37573"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 27/12/2015 - 22:43.</div>
    <div class="content">
     <p>Ah, as I though. Are the both the same nodered version 0.12.4?</p>
<p>I had the same sort of issue when updating from an older version of node red to 0.12.4. Here is an abstract copy and pasted from an email exchange I had with one of the node red developers: </p>
<p>can you check two places... - "old" versions of npm (1.x) used to install things -g into /usr/local/...<br />
and newer (2.x) into   /usr/...</p>
<p>So check if there is a /usr/local/lib/node_modules/node-red  dir<br />
and /usr/local/bin/node-red   command<br />
And then also check if there also ones at<br />
/usr/lib/node_modules/node-red directory<br />
and /usr/bin/node-red*   command(s)​</p>
<p>If they all exist then yes we have two copies... and Linux picks the ...local.. one first which will be the old one in this case...</p>
<p>It should be safe to<br />
sudo rm -rf /usr/local/lib/node_modules/<br />
sudo rm -rf /usr/local/bin/node-red*</p>
<p>(and then also remove the /etc/init.d/nodered  script... - as we are now moving to systemd - see this other thread in progress... https://groups.google.com/forum/m/#!topic/node-red/lR3pFZlcDCg</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37578"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Mon, 28/12/2015 - 02:07.</div>
    <div class="content">
     <p>Nope, not fixing it... Always installs to /usr/local/...</p>
<p>Could it be that the installation of node &amp; npm messes with it?</p>
<p><a href="http://nodered.org/docs/hardware/raspberrypi.html" title="http://nodered.org/docs/hardware/raspberrypi.html">http://nodered.org/docs/hardware/raspberrypi.html</a> says this:</p>
<pre>
wget <a href="http://node-arm.herokuapp.com/node_archive_armhf.deb" title="http://node-arm.herokuapp.com/node_archive_armhf.deb">http://node-arm.herokuapp.com/node_archive_armhf.deb</a> 
sudo dpkg -i node_archive_armhf.deb
</pre><p>Where does this dpkg -i tool put the stuff? Or is that defined in the .deb file?<br />
I suspect this step to mess with the locations.<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37612"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Tue, 29/12/2015 - 01:55.</div>
    <div class="content">
     <h2>Whoohoo, I got it working. The way of installing node.js was messing everything up!</h2>
<p>So, how to get the new emonpi image working on &quot;old&quot; Raspberry Pi model B 512MB...</p>
<p>First, take a clean emonpi image and SSH into it.</p>
<pre>
rpi-rw
sudo apt-get update
sudo apt-get upgrade</pre><p>Check if node &amp; npm are installed/working properly, normally you will get these results:</p>
<pre>
pi@emonpi:~$ node -v
Segmentation fault
pi@emonpi:~$ npm -v
Segmentation fault</pre><p>Install ARM v6 (for a RasPi model B 512MB) LTS version of node.js</p>
<pre>
wget <a href="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz" title="https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz">https://nodejs.org/dist/v4.2.4/node-v4.2.4-linux-armv6l.tar.gz</a>
tar -xvf node-v4.2.4-linux-armv6l.tar.gz
cd node-v4.2.4-linux-armv6l/
sudo cp -R * /usr/</pre><p>Check if Node-Red is working (can take up to 40-50s on a RasPi model B 512MB)</p>
<pre>
sudo service nodered start</pre><p>Re-enable the Node-Red service (maybe not nescessary, haven&#39;t tested it)</p>
<pre>
sudo systemctl daemon-reload
sudo systemctl enable nodered.service</pre><p>Check if Node-Red gets auto-started on boot:</p>
<pre>
sudo reboot</pre><p>If working maybe install some extra (<a href="https://www.npmjs.com/search?q=node-red-node-" title="https://www.npmjs.com/search?q=node-red-node-">https://www.npmjs.com/search?q=node-red-node-</a>) node-red nodes e.g.:</p>
<pre>
rpi-rw

cd /home/pi/data/node-red/node_modules

sudo npm install node-red-node-pushbullet
sudo npm install node-red-node-forecastio</pre><p>And at last, re-initialize node-red:</p>
<pre>
sudo service nodered restart or sudo reboot</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37621"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 29/12/2015 - 09:21.</div>
    <div class="content">
     <p>Woop woop, good work. I&#39;ll add these notes to the image documentation.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37707"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Thu, 31/12/2015 - 16:13.</div>
    <div class="content">
     <p>Update: &nbsp;I&#39;ve been running the Dec 22 update on a Pi2 w/emonTX V3 for about a week, and so far it&#39;s working as expected. &nbsp;Great job!!</p>
<p>The only thing that doesn&#39;t seem right is the long delay when displaying dashboards&nbsp;&nbsp;containing virtual feeds.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37719"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Lykke&#039;s picture" title="Lykke&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7638.html" title="View user profile.">Lykke</a> on Fri, 01/01/2016 - 15:33.</div>
    <div class="content">
     <p>Updated our&nbsp;Pi2 w. WiPi dongel&nbsp;+&nbsp;emonTX&nbsp;V3 system a couple of days ago. Easy to setup - Good Job :-)</p>
<p>I noticed the WIFI connection does not seem to auto-reconnect if the connection is lost, or at least&nbsp;ours didn&#39;t. I&nbsp;think such a feature would be required&nbsp;to minimize&nbsp;accidental loss of data.</p>
<p>I have implemented this type of script on our&nbsp;system (<a href="https://www.raspberrypi.org/forums/viewtopic.php?t=16054" title="https://www.raspberrypi.org/forums/viewtopic.php?t=16054">https://www.raspberrypi.org/forums/viewtopic.php?t=16054</a>), but I am sure you wizards can conjure up a much more elegant way of doing this.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37725"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 01/01/2016 - 17:59.</div>
    <div class="content">
     <p>Good to hear it&#39;s working for you.&nbsp;</p>
<p>It&#39;s interesting the WIFI reconnecting is not working. We have implemented a wificheck script which should run as a sudo conjob every 5min to check if WiFi is connected and initiate a re connection if not. Here is the script in question:&nbsp;<a href="https://github.com/openenergymonitor/emonpi/blob/master/wifi-check">https://github.com/openenergymonitor/emonpi/blob/master/wifi-check&nbsp;</a>.&nbsp;</p>
<p>The script logs it&#39;s status to /var/log/wificheck.log. If you could check this logfile&nbsp;for anything insigntful&nbsp;that would be useful. On the emonPi /var/log is mounted as a tmpfs file system in ram so the log will be lost on reboot.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37754"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Lykke&#039;s picture" title="Lykke&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7638.html" title="View user profile.">Lykke</a> on Sat, 02/01/2016 - 12:44.</div>
    <div class="content">
     <p>OK, so it should actually reconnect. I&#39;ll remove my script and&nbsp;double&nbsp;check,&nbsp;that it&#39;s&nbsp;not working on my system then. I&#39;ll have to wait though,&nbsp;until a time where the kids will not kill me for messing with the network again.&nbsp;</p>
<p>No wifi-check.log file&nbsp;in the /var/log folder, sorry.&nbsp;The script runs OK:</p>
<blockquote><p>pi@emonpi /usr/local/bin $ sudo ./wifi-check</p>
<p>Starting WiFi check for wlan0<br />
Sat Jan &nbsp;2 12:57:42 CET 2016</p>
<p>Performing Network check for wlan0<br />
Network is Okay</p>
<p>Current Setting:<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.17 &nbsp;Bcast:192.168.1.255 &nbsp;Mask:255.255.255.0</p>
</blockquote>
<p>How do you start the script? I&#39;m not familiar with cron jobs, but should line 32 in the script be commented out?</p>
<blockquote><p># */5 * * * * /usr/local/bin/wifi_Check</p>
</blockquote>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37774"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 02/01/2016 - 21:15.</div>
    <div class="content">
     <p>Are you running the 22nd Dec image? There should be a file called emonSD_22Dec2015&nbsp;in the /boot partition to identify.&nbsp;</p>
<p>The wifi-check script should be running as a root cronjob, $sudo crontab -l should return a non commented out cron entry for the script:</p>
<p>&nbsp;*/5 * * * * /usr/local/bin/wifi-check &gt;&gt; /var/log/wificheck.log 2&gt;&amp;1</p>
<p>You can run the script manually be typing wifi-check into shell. The script is located in /home/pi/emonpi and symlinked to&nbsp;/usr/local/bin/wifi-check</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37790"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Lykke&#039;s picture" title="Lykke&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7638.html" title="View user profile.">Lykke</a> on Sun, 03/01/2016 - 11:28.</div>
    <div class="content">
     <p>Downloaded and Installed the June 17 image and updated the system via the browser update function. It is possible (and embarrassing!),&nbsp;that I only updated the database, at&nbsp;least there is no mentioning&nbsp;of any such update in the log-file.&nbsp;</p>
<p>I have now updated the emonPi and can confirm that the Cron job is running. The wifi-check.log can be found in the /tmp folder and not the /var/log folder. The emonSD&nbsp;file in the boot directory is still called &quot;emonSD-17jun2015&quot;, but I guess that is only a cosmetic issue.</p>
<p>Thank you&nbsp;for patient and competent support.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37834"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 04/01/2016 - 14:27.</div>
    <div class="content">
     <p>Hi Lykke,</p>
<p>Ah so your running the older Jun 17th&nbsp;emonSD&nbsp;SD&nbsp;image image. This thread is for the new 22ndDec image. The wifi issue should be fixed on the new image. It&#39;s a known issue that the wifi-check script was not fully working on the old Jun17th image. Very sorry about this. Would you be able to update to the new image? It will require downloading the Dec22nd image and flash to an SD card. You will also need to migrate your data if you have local data in your local Emoncms&nbsp;&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37843"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9157.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="whitecitadel&#039;s picture" title="whitecitadel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/9157.html" title="View user profile.">whitecitadel</a> on Mon, 04/01/2016 - 16:12.</div>
    <div class="content">
     <p>I also now have node-red working on the B+ (not Pi2), I had to edit the startup script in /lib/systemd/system/nodered.service&nbsp;to look in /usr/local/bin not /usr/bin for node after doing the manual compile from the node-red website - I seemed to have missed notification from the forum about the above useful updates!</p>
<p>I have a new issue, setting up node red using the blog post&nbsp;<a href="http://openenergymonitor.blogspot.co.uk/2015/10/emonpi-nodered-and-mqtt.html">http://openenergymonitor.blogspot.co.uk/2015/10/emonpi-nodered-and-mqtt.html</a>&nbsp;(I am a node-red newbie) and I emulated the settings there with the exception it would not connect to mqtt - no problem as authentication enabled by default it says above:</p>
<blockquote><p><em>MQTT</em></p>
<p><em>As before, the Mosquitto&nbsp;MQTT&nbsp;server is running on port 1883. emonHub&nbsp;posts emonPi data to&nbsp;emonhub/rx/&lt;nodeID&gt;/values&nbsp;topic. Mosquitto&nbsp;has been updated to the latest verion supporting web-sockets installed via mosquitto PPA:&nbsp;http://repo.mosquitto.org/debian/mosquitto-jessie.list</em></p>
<p><em>Port 1883 is open by default and authentication has been turned on:</em></p>
<p><em>mosquitto username &quot;emonpi&quot;</em></p>
<p><em>mosquitto password &quot;emonpimqtt2016&quot;</em></p>
</blockquote>
<p>I added the user/password to the &quot;MQTT broker config node&quot; server settings, but I just get &quot;<strong>Error: </strong>Unauthorised&quot; when I try to deploy - which I assume is the MQTT&nbsp;part - following the log with &quot;sudo journalctl -f -u nodered -o cat&quot; I can see the error: &quot;4 Jan 16:07:34 - [warn] Communication send error: Error: not opened&quot;.</p>
<p>Is that default password correct?</p>
<p>Related question, I see there is a flow for emoncms is this required?&nbsp;<a href="http://flows.nodered.org/node/node-red-node-emoncms">http://flows.nodered.org/node/node-red-node-emoncms</a>&nbsp;Any better guide on website anywhere to get started?</p>
<p><i>[The later duplicate of this post has been deleted. Moderator (RW)]</i> </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37845"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9174.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="iochroma&#039;s picture" title="iochroma&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/9174.html" title="View user profile.">iochroma</a> on Mon, 04/01/2016 - 16:14.</div>
    <div class="content">
     <p>Hi Glyn,</p>
<p>I have downloaded the new&nbsp;22nd Dec image and attempted to rebuild it on a separate SD card from the Wheezy image containing Emoncms v8.5.2 that was working well since purchase on 7/12/15&nbsp;on my EmonTx3.4/Emonbase&nbsp;RPi 2&nbsp;arrangement. &nbsp;I have encountered a number of issues, which may be either deliberate or unintentional:</p>
<p>I connect headless to my RPi from a terminal window on OSX10.11 using&nbsp;<em>ssh</em>. Issuing a&nbsp;<em>sudo&nbsp;halt&nbsp;</em>or&nbsp;<em>sudo reboot</em>&nbsp;would cleanly drop the connection on the Wheezy image but the command hangs with Jessie until it times outs with a&nbsp;broken pipe&nbsp;message 10s or so later. The RPi eventually responds to the command.</p>
<p>
The&nbsp;rpi-rw&nbsp;command appears to have a finite lifetime associated with it on the new image as I often find that the&nbsp;RPi cannot find the executable command&nbsp;file I have issued or fails to complete with errors&nbsp;until I re-issue the&nbsp;<em>rpi-rw</em>&nbsp;immediately&nbsp;prior to the command.&nbsp;Switching&nbsp;the root file&nbsp;system&nbsp;to&nbsp;<em>rw</em>&nbsp;mode in&nbsp;<em>/etc/fstab&nbsp;</em>has little effect suggesting that it might be something to do with the&nbsp;<em>errors=remount-ro</em>&nbsp;in the table. This did not happen on Wheezy and I am not sure how to find the cause.</p>
<p>
I have used the data migration instructions posted above and created a 1MB&nbsp;<em>backup.tar.gz</em>&nbsp;file. I got this off the old &amp; then onto the new Jessie image by installing the AppleTalk&nbsp;<em>afp</em>&nbsp;protocol using:&nbsp;</p>
<p><em>sudo apt-get install netatalk</em>&nbsp;</p>
<p>so I could drag/drop the file to the RPi from&nbsp;an OSX Finder window.</p>
<p>[Need to add a new rule,&nbsp;<em>sudo ufw allow from 192.168.1.0/24&nbsp;</em>, to allow local packets through the ufw firewall on the RPi also].</p>
<p>I then ran the import script before attempting to login to my local&nbsp;emoncms&nbsp;account&nbsp;which listed 19 imports followed by OK. &nbsp;Upon logging into my emocms account, which was recognised, nothing else appeared to be functional. &nbsp;None of my nodes, feeds or visualisations&nbsp;were present and the emonhub.conf file displayed had reverted to a generic one without my change to use 868MHz. &nbsp;I was unable to save this change in the GUI which kept reverting back to 433MHz. &nbsp;I did eventually force a change by editing the <em>~/data/emonhub.conf file </em>directly which resulted in node 8 to report data again.</p>
<p>More worryingly&nbsp;however, I am now unable to map any of my node inputs to feeds. &nbsp;The add process line has a non-editable blank drop down list box adjacent to the &#39;Log to Feed&quot; resulting in a process argument reporting: <em>missing feed id:null. &nbsp;</em>I include a screen shot of the relevant Node window.</p>
<p>Without the ability to either retrieve my earlier data or to create new feeds, I have been forced to revert to the earlier stable Wheezy image but I would like to know if you have any ideas/thoughts on what the problem might be please as I am at the limits of my understanding of the working of emoncms. &nbsp;The broken pipe and <em>rw</em> issues I can live with but the emoncms&nbsp;problem is a show stopper!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37846"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9157.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="whitecitadel&#039;s picture" title="whitecitadel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/9157.html" title="View user profile.">whitecitadel</a> on Mon, 04/01/2016 - 16:22.</div>
    <div class="content">
     <p>I also observed some sort of timeout on rpi-rw, my first attempt to compile node-red failed and indications are the FS became RO at some point during the very lengthy (B+) compilation.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38322"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Lykke&#039;s picture" title="Lykke&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7638.html" title="View user profile.">Lykke</a> on Sat, 16/01/2016 - 11:30.</div>
    <div class="content">
     <p>I&#39;m having problems getting the WiPi dongle to power up (clean install). Scan in emoncms does not bring up wifi and when I run wifi-check&nbsp;from a terminal wndow I get the below message.</p>
<p>++++++++++++++++++++++++++++++++</p>
<p>pi@emonpi:~$&nbsp;sudo&nbsp;wifi-check</p>
<p>Starting WiFi check for&nbsp;wlan0<br />
Sat 16 Jan 11:15:54 GMT 2016</p>
<p>Performing Network check for&nbsp;wlan0<br />
ifdown: interface&nbsp;wlan0&nbsp;not configured<br />
wpa_supplicant: /sbin/wpa_supplicant daemon failed to start<br />
run-parts: /etc/network/if-pre-up.d/wpasupplicant&nbsp;exited with return code 1<br />
Failed to bring up&nbsp;wlan0.</p>
<p>Current Setting:</p>
<p>++++++++++++++++++++++++++++++++</p>
<p>Tried to manually config&nbsp;wifi in&nbsp;/etc/network/interfaces, but no joy. When I run dmseg&nbsp;I get.&nbsp;Any ideas?</p>
<p>++++++++++++++++++++++++++++++++</p>
<p>pi@emonpi:~$ dmesg<br />
[ &nbsp;762.749396] [UFW BLOCK] IN=eth0 OUT= MAC=b8:27:eb:99:77:b2:48:5a:b6:c8:d0:bd: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 08:00:45:00:00:30:37:86:40:00:80:06:3f:d9 SRC=192.168.1.7 DST=192.168.1.17 LEN=4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8 TOS=0x00 PREC=0x00 TTL=128 ID=14214 DF PROTO=TCP SPT=54297 DPT=548 WINDOW=6553 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5 RES=0x00 SYN URGP=0<br />
[ &nbsp;829.948712] [UFW BLOCK] IN=eth0 OUT= MAC=01:00:5e:00:00:01:00:78:9e:4f:89:08: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 08:00:46:c0:00:20:00:00:40:00:01:02:42:6d SRC=192.168.1.1 DST=224.0.0.1 LEN=32 T &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OS=0x00 PREC=0xC0 TTL=1 ID=0 DF PROTO=2<br />
[ &nbsp;872.080766] ieee80211 phy0: rt2x00lib_request_firmware: Info - Loading firmwa &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; re file &#39;rt2870.bin&#39;<br />
[ &nbsp;872.085932] rt2800usb 1-1.4:1.0: Direct firmware load for rt2870.bin failed w &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ith error -2<br />
[ &nbsp;872.107995] ieee80211 phy0: rt2x00lib_request_firmware: Error - Failed to req &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uest Firmware<br />
[ &nbsp;872.121853] ieee80211 phy0: rt2x00lib_request_firmware: Info - Loading firmwa &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; re file &#39;rt2870.bin&#39;<br />
[ &nbsp;872.141843] rt2800usb 1-1.4:1.0: Direct firmware load for rt2870.bin failed w &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ith error -2<br />
[ &nbsp;872.146676] ieee80211 phy0: rt2x00lib_request_firmware: Error - Failed to req &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uest Firmware</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38333"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 16/01/2016 - 23:04.</div>
    <div class="content">
     <p><s>Is the wifi dongle recognised&nbsp;? the command</s></p>
<p><s>lsusb</s>&nbsp; &nbsp; [Doesn&#39;t seem to work in minibian]</p>
<p>should show the device. I&#39;m guessing it is recognized since the log is trying to locate a driver for it</p>
<p>It maybe that the drivers are not present in &quot;Minibian&quot; for that dongle, there are none included in the bare &quot;Minibian&quot; image but then some are added when the OEM image is created but I&#39;m not sure which exactly. The log seems to be looking for &quot;rt2870&quot;. If that is correct but missing that is a ralink driver and can be installed using&nbsp;</p>
<p>sudo apt-get install&nbsp;firmware-ralink</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38337"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 16/01/2016 - 21:26.</div>
    <div class="content">
     <p>What Wifi dongle are you using?</p>
<p>&nbsp;</p>
<p>We have been testing the image with the <a href="http://shop.openenergymonitor.com/edimax-usb-wifi-adapter-ew-7811un/">Edimax</a> dongle. Please let me know if installing ralink firmware fixes this for you. If so we will&nbsp;include in the next release&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38338"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 16/01/2016 - 21:46.</div>
    <div class="content">
     <p>Hi Glyn, I&#39;m assuming <em>&quot;I&#39;m having problems getting the <strong>WiPi</strong> dongle to power up&quot;</em> isn&#39;t a typo but I could be wrong, it&#39;s too close to call :-)</p>
<p>Paul</p>
<p>PS my <a href="http://swag.raspberrypi.org/products/official-raspberry-pi-wifi-dongle">&quot;Official Raspberry Pi WiFi dongle&quot; </a>doesn&#39;t work on this image either but I haven&#39;t looked into why yet as I have other dongles</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38340"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Lykke&#039;s picture" title="Lykke&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7638.html" title="View user profile.">Lykke</a> on Sat, 16/01/2016 - 21:46.</div>
    <div class="content">
     <p>Thanks, the ralink&nbsp;firmware&nbsp;did the trick, seems everything is working now. As Paul suggest, I&#39;m using a Wi-Pi&nbsp;dongle, if you need any further details, pls. let me know.</p>
<p>Mads</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38346"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 16/01/2016 - 22:29.</div>
    <div class="content">
     <p>Where did you obtain your dongle from? ​</p>
<p>The official RasPi dongle&nbsp;should use the Broadcom&nbsp;BCM43143&nbsp;chipset rather than Ralink. I think the PiHut dongles&nbsp;are Ralink.&nbsp;</p>
<p>Paul:&nbsp;Could you confirm that the official Broadcom&nbsp;Wifi adatper does not work? Would installing and running raspi-update&nbsp;fix this?&nbsp;sudo apt-get install rpi-update. Or might require <a href="http://openelec.tv/forum/124-raspberry-pi/74940-broadcom-wifi-usb-adapter">more intense wifi firmware installation</a>&nbsp;</p>
<p>Sidenote: interesting test of RasPi dongles (maybe official RasPi Rroadcom dongle has slighly better range:&nbsp;<a href="http://raspi.tv/2015/new-official-raspberry-pi-wifi-dongle-3-way-testing-vs-thepihut-and-edimax">http://raspi.tv/2015/new-official-raspberry-pi-wifi-dongle-3-way-testing-vs-thepihut-and-edimax</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38347"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7638.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Lykke&#039;s picture" title="Lykke&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7638.html" title="View user profile.">Lykke</a> on Sat, 16/01/2016 - 22:35.</div>
    <div class="content">
     <p>This is my dongle: &nbsp;<a href="http://raspberrypi.dk/wp-content/uploads/2013/02/Wi-Pi-WLAN-modul-til-Raspberry-Pi.pdf">http://raspberrypi.dk/wp-content/uploads/2013/02/Wi-Pi-WLAN-modul-til-Raspberry-Pi.pdf</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38356"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 16/01/2016 - 23:33.</div>
    <div class="content">
     <p>Sorry, I didn&#39;t mean to confuse things with the &quot;ps&quot;.</p>
<p>Lykke&#39;s dongle is a <a href="http://thepihut.com/products/raspberry-pi-wipi-wireless-adapter">&quot;Wi-Pi&quot;&nbsp;</a>and uses the &quot;rt2870&quot; ddriver from ralink&nbsp;and&nbsp;installing the &quot;firmware-ralink&quot;&nbsp;package seems to have fixed his problem.</p>
<p>Additionally....</p>
<p>Possibly also for missing drivers, but not yet confirmed&nbsp;my &quot;Official Raspberrypi&nbsp;wifi dongle&quot; doesn&#39;t work on the emonPi&nbsp;image, I didn&#39;t progress much further than that yet. yes it does apparently use the Broadcom&nbsp;BCM43143, but all I can find on installing those drivers&nbsp;is &quot;the drivers are included in Raspian&quot; everywhere I&#39;ve looked. but I <em>did</em> give up quite quickly, as I have other dongles.</p>
<p>Plus, I just tried to follow my own advice above to use &quot;lsusb&quot; to confirm the usb device, but found lsbusb doesn&#39;t work in Minibian, this time neither &quot;sudo&quot; or &quot;/sbin&quot; etc seem to work.</p>
<p>I guess another time I could try investigating what gets&nbsp;loaded and what package the driver belongs to when&nbsp;I use it on Jessie. It seems to work out of the box on both Wheezy and Jessie.</p>
<p>I haven&#39;t tested the range, the power consumption is supposed to be good too. Another advantage of this&nbsp;&quot;official&quot; dongle is that it is supposed to be AP-mode compatible without any driver mods or changes to the OS as is required with the &quot;edimax&quot;. I&#39;ve not put that to the test yet.</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38373"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 17/01/2016 - 13:05.</div>
    <div class="content">
     <p>Yes I think you&#39;re correct Paul,&nbsp;it seems the&nbsp;BCM43143&nbsp;firmware required for the official RasPi wifi dongle is not included in our minibian based image.&nbsp;</p>
<p>I have found install instructions for the firmware here:&nbsp;</p>
<p><a href="https://www.chrisaw.com/install-official-raspberry-pi-wifi-adapter-wlu6331-bcm43143-on-osmc-2/">www.chrisaw.com/install-official-raspberry-pi-wifi-adapter-wlu6331-bcm43143-on-osmc-2/</a></p>
<p>Running this auto installer should do the trick:</p>
<p>curl <a href="https://dl.dropboxusercontent.com/u/9679985/rpi-wifi-install.sh" title="https://dl.dropboxusercontent.com/u/9679985/rpi-wifi-install.sh">https://dl.dropboxusercontent.com/u/9679985/rpi-wifi-install.sh</a> | sh</p>
<p>If you&nbsp;get a chance, could you test if this works? I don&#39;t have a RasPi dongle to hand although I think I&#39;ll try and get hold of one for testing. It would be great for the emonPi / emonBase to work plug-and-play with all the common wifi dongles.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38375"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Sun, 17/01/2016 - 14:03.</div>
    <div class="content">
     <p>Yes I think your correct Paul,&nbsp;it seems the&nbsp;BCM43143&nbsp;firmware required for the official RasPi wifi dongle are not included in our minibian based image.&nbsp;</p>
<p>Which is surely why you would start with Jessie Lite not minibian? I know minibian is smaller but surely that&#39;s in the margins when you look at support, community etc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38376"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 17/01/2016 - 14:08.</div>
    <div class="content">
     <p>That installer link is dead, I see you have asked the question about it on his site, I think it may have been taken down since the comments say it&#39;s now included in &quot;OSMC&quot; and even then it maybe a long shot as this was back in July, before Jessie was released.</p>
<p>I&#39;m happy to test a&nbsp;solution if it helps you, but I&#39;m a little busy to dig too deeply&nbsp;into it right now. Lets take a look at the installer if you get a response.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38377"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 17/01/2016 - 14:33.</div>
    <div class="content">
     <p>@Simon - I would agree with you IF I was concerned about&nbsp;space on my SDcard, but since SDcards are so cheap I probably wouldn&#39;t even entertain &quot;Jessie-lite&quot; unless squeezed. I have to say though,&nbsp;from my recent&nbsp;experience of Minibian it is becoming less likely I&#39;ll even try Jessie-lite, I like finding things were I expect them to be found :-)</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38378"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 17/01/2016 - 14:45.</div>
    <div class="content">
     <p>Ok, just tried finding the driver on a full install of Jessie and then search for the package etc. It seems the drivers are included in <a href="https://packages.debian.org/jessie/kernel/firmware-brcm80211">&quot;firmware-brcm80211&quot;</a>&nbsp;and can be installed with</p>
<p>sudo apt-get install&nbsp;firmware-brcm80211</p>
<p>Just tried it out on the emonPi and it seems to be working following a reboot.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38383"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Sun, 17/01/2016 - 16:09.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>Agree. And I used Jessie Lite&nbsp;because I had a small SD card lying around that I thought I would use. And although you have to edit wpa_supplicant to get wifi working (if you only have wifi) everything worked fine.</p>
<p>Which still begs the question why base the &#39;official&#39; SD card image on minibian. What&#39;s the advantage to minibian? I can see a number of negatives as I said earlier about support etc.</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38394"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 17/01/2016 - 19:00.</div>
    <div class="content">
     <p>Hi Guys,&nbsp;</p>
<p>Excellent! Thanks a lot for your help. Today, I managed to borrow a BCM official raspi dongle from a friend and have tested the firmware install and it works great. It will be included in the official SD card release (<a href="https://github.com/openenergymonitor/emonpi/commit/4446ec35fa123032b04f77ce98580ebf0623512e">commit</a>).&nbsp;</p>
<p>The base image distro is open to debate and may change in the future.&nbsp;I like the minimal nature of Minibian, it has allowed us to fully control what&#39;s installed without any extra clutter. The base image boots in 14s and uses 29Mb of RAM before any applications are installed which is refreshingly light after working with full fat raspbian previously. &nbsp;</p>
<p>Minimal Jessie from the RaPi team was not actually released at the time we started work on the new image. We will consider minimal Jessie in&nbsp;the future.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38401"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sun, 17/01/2016 - 21:03.</div>
    <div class="content">
     <p>I&#39;m about to install this onto a borrowed spare Pi ModB+ so I can get it configured to match my system before I put it live on my Pi2. I&#39;m going to remove Node Red as it seems to duplicate a lot of what I already have with Openhab.</p>
<p>Is this release likely stable for a while or is there a new version being worked on, and due out soon?</p>
<p>Currently I run Openhab from its own&nbsp;seperate&nbsp;RW partition, was anything special done on this image to allow the RO partition and Openhab?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38406"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 17/01/2016 - 21:41.</div>
    <div class="content">
     <p>Expected stable release in a couple of weeks, I hope!&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38411"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 17/01/2016 - 22:55.</div>
    <div class="content">
     <p><em>&quot;The base image distro is open to debate and may change in the future.&nbsp;I like the minimal nature of Minibian, it has allowed us to fully control what&#39;s installed without any extra clutter. The base image boots in 14s and uses 29Mb of RAM before any applications are installed which is refreshingly light after working with full fat raspbian previously.&quot;</em></p>
<p>Glyn - if this is still considered a &quot;beta&quot; and you are planning a &quot;stable&quot; launch please, please, please consider moving to Jessie(-lite at least)&nbsp;before we get too invested in Minibian&nbsp;and&nbsp;have too many different versions to try and support. all the points you make above are indeed nice to have but an easy to support image is absolutely essential.</p>
<p>I strongly feel that full Jessie is better to support because everything is there, so there is unlikely to be any &quot;bits missing&quot; support required, it is familiar to use so there will be no &quot;doesn&#39;t seem to work on this image&quot; issues as uses can find general Raspbian&nbsp;help everywhere.&nbsp;</p>
<p>Given a choice of saving a few seconds at boot (on a system that runs 24/7) or&nbsp;saving hours or days of&nbsp;debugging if something goes wrong, I would hazard a guess at which they would choose.</p>
<p>Perhaps ask for more opinions? we all want the latest and greatest but unresolved or reoccurring issues just reflect badly on the project, the nature of the project means there will all ways be issues to resolve so we should try and make it easier for all concerned&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38415"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 17/01/2016 - 23:21.</div>
    <div class="content">
     <p>@Paul - I&#39;m with you 100%</p>
<p>I&#39;m currently running emoncms, alongside a DLNA&nbsp;server, Opencloud, Samba share &amp; node-red, all on a Raspberry Pi with full fat&nbsp;Jessie OS. It&nbsp;performs well, with RAM resources in reserve.</p>
<p>The cost of high quality SD cards has plummeted, is there really much price difference between a 8Gb &amp; a 16Gb card.</p>
<p>Also what&#39;s the life span of minibian&nbsp;OS likely to be, a couple of years,&nbsp;and then unsupported?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38417"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sun, 17/01/2016 - 23:35.</div>
    <div class="content">
     <p>I agree with PR and PB. Stay with an OS that&#39;s <em>supportable.</em></p>
<p><em>it has allowed us to fully control what&#39;s installed without any extra clutter</em></p>
<p>You pretty much have that with <em>many</em> Linux distros. With Debian and variants, it&#39;s not difficult to strip out the &quot;fat.&quot; Time consuming, perhaps, but not difficult. For example, why is alsa included in the emonPi image? There&#39;s no <em>usable </em>sound hardware on that platform, yet alsa gets loaded at boot time.</p>
<p><em>is there really much price difference between a 8Gb &amp; a 16Gb card.</em></p>
<p><em><strong><a href="http://www.pricewatch.com/flash_card_memory/">This</a></strong></em> page shows a difference of 15 cents (US) - we&#39;re probably talking low end cards here, but essentially, you&#39;re right, the cost is so low...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38421"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Tue, 19/01/2016 - 04:11.</div>
    <div class="content">
     <p>Thanks, will it be possible to pull in the changes with the update script on the Pi or will it mean another image deployment when the final version arrives?</p>
<p>Incidentally I had a few moments spare so I downloaded the image&nbsp;onto a 32GB Sandisk&nbsp;Extreme Card, and it wouldn&#39;t boot. Looking into it with GPARTED on my desktop suggested the image had been written successfully, although it couldn&#39;t put a type to, or do anything with the 492MB Partition. I then loaded it onto an 8GB Card, and again the 492MB Partition was an unknown type, but the image&nbsp;booted in the Pi2. I then copied the image off the 8GB and onto the 32GB Sandisk&nbsp;after I&#39;d formated it with the SD Card Association Formatter to wipe it. It&nbsp;then worked, and I was able to move the 492MB Partition to the end of the card with GPARTED ready to expand the data partition to fill the card.</p>
<p>I&#39;m not exactly sure what the lesson is here with 32GB&nbsp;Sandisk Extreme&nbsp;Cards and the new image, especially as my current deployment is on another&nbsp;32GB Sandisk Extreme Plus Card.</p>
<p>UPDATE: Just tried it again after moving the 492MB Partition and it no longer boots. I think I&#39;ll try again tomorrow once I have the spare Pi Model B to play with</p>
<p>FURTHER UPDATE: The card eventually stopped working in Windows too so I&#39;ve changed it for another Sandisk Extreme Plus Card. Either I had a faulty card or the Extreme 32GB doesn&#39;t work with&nbsp;the Pi. The Extreme Plus with a USB3 Card reader has a sustained image write speed on my system&nbsp;of&nbsp;64MB/s in case anyones interested.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38422"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Mon, 18/01/2016 - 07:49.</div>
    <div class="content">
     <p>+1 to the Pauls and Bill. The support of the Pi community for Jessie far outweighs things like RAM usage and booting time.</p>
<p>I haven&#39;t found anywhere that explains what&#39;s not in Lite but as far as I can see it&#39;s the main distro&nbsp;without all of the games and apps as well as the browser of course. Bill, do you happen to know the difference.</p>
<p>Simon</p>
<p>PS @Glynn, do you pre-install things like minibian? If not, it might be an idea whichever distro you use to add in things like that that are often prescribed for debugging.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38425"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 18/01/2016 - 12:06.</div>
    <div class="content">
     <p>I&#39;m fully behind Paul too. He spends too much of his precious time&nbsp;here on the forums answering questions. Wouldn&#39;t it be far better if most of those questions didn&#39;t need to be asked in the first place? Then Paul will be able to put more effort into getting emonHub&nbsp;even better, which should mean he needs to spend even less time answering questions, which means... &nbsp;You get the drift.</p>
<p>It&#39;s nice to be at the bleeding edge of <em>everything</em>, but it&#39;s unrealistic.&nbsp;The support network (those of us who&#39;ve been around here for a while all know who&#39;s in there) is spread far too thinly as it is. We need to, if not cut down, at least not get into dabbling in, offering and then attempting to support too many options. What happens if, instead of putting together your OEM system, you buy a commercial &#39;off-the-shelf&#39; product? You get what&#39;s in the box, and if that&#39;s not good enough, tough.* You&#39;ll be lucky to get an answer out of them, let alone any help or guidance.&nbsp;&nbsp;So my advice is to stick with a core system where most of the general support&nbsp;that&#39;s needed is readily available elsewhere, so that here we can concentrate on giving the user the specialist support that only we can offer.</p>
<p>&nbsp;</p>
<p>* If you need confirmation, ask Robin. He&#39;s got a number of customers who have replaced commercial&nbsp;diverters with his because they weren&#39;t satisfied with the performance.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38435"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 18/01/2016 - 15:09.</div>
    <div class="content">
     <p>I think the main reason we decided to rebuild using miniban after starting initially with Jessie was to keep the image under 4GB making it possible for those with many 4GB cards already to reuse those cards rather than create an image that had a minimum size that forced at least an 8GB card. Glyn was initially keen to go for the 8GB card because there really is no difference in cost which we might install it on anyway but my thinking was that it would be good if the image did still fit on the many SD cards that we have already shipped.</p>
<p>The addition of openhab and nodered took the image size over the 4gb mark with jessie.</p>
<p>Il check with Glyn if it was jessie or jessie light we first used, I imagine it was jessie light if it was available at the time.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38436"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Mon, 18/01/2016 - 15:17.</div>
    <div class="content">
     <p>I haven&#39;t installed openhab&nbsp;or node-red but have installed everything else with Jessie Lite&nbsp;and&nbsp;that fits onto a 4Gb SD card.&nbsp;Given Jessie&nbsp;Lite&nbsp;is only 1.5G as the download, I&#39;d be surprised if the&nbsp;additional&nbsp;stuff took up all the&nbsp;remaining&nbsp;space.</p>
<p>Is there a way once you have resized the partition to see what size the install is? I could check this if I knew how....</p>
<p>But having said that, as Bill said earlier the difference in price between 4Gb and 8Gb SD is minimal, so the decision shouldn&#39;t be based on trying to fit onto a 4Gb card it should be about support etc.</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38439"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 18/01/2016 - 16:10.</div>
    <div class="content">
     <p>Simon<br />
$df -h<br />
Should get you that info.</p>
<p>Another advantage to using full blown Jessie is that node-red comes pre-installed, and would be updated/maintained as part of any system update.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38443"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 18/01/2016 - 16:38.</div>
    <div class="content">
     <p>Our Dec22 &nbsp;image (this thread) is built on <a href="https://minibianpi.wordpress.com/2015/11/12/minibian-jessie-2015-11-12-is-out/">MinibianPi&nbsp;11th Dec 2015</a>&nbsp;build.&nbsp;The difference between Raspbian Jessie Light and Minibian&nbsp;is next to nothing, I don&#39;t think we would gain anything from rebuilding on Raspbian Jessie Light. From the <a href="https://minibianpi.wordpress.com/about/">Minibian about page</a>:&nbsp;&nbsp;</p>
<address>&quot;MINIBIAN is a minimal Raspbian-based Linux image for Raspberry Pi. The main focus is to have a small, updated and stable distribution that is <strong>fully compatible with official Raspbian &ldquo;wheezy&rdquo; image</strong>, without GUI and unneeded tools. So this image is perfect for embedded projects, or wherever you need to use all RPi resources for your specific tasks. The main advantage is that MINIBIAN has a very small footprint, boots in some seconds and uses just few of precious RPi RAM. Unlike other similar projects, MINIBIAN has not been obtained purging unneeded packages from original image, neither recompiling the source code: it&rsquo;s just a customized Raspbian installation obtained from the same repository used for official RPi wheezy image. S<strong>o kernel and binary files are EXACTLY the same you will find on standard image</strong>, with the difference that MINIBIAN fit on 512MB SD Card, is fastest, and updated more often.&quot;</address>
<p>So any packages that are not installed on minibian can&nbsp;easily be installed with apt-get since it uses the sources. I think almost everything needed should be installed on the ready-to-go SD card. See l<a href="https://github.com/openenergymonitor/emonpi/blob/master/install#L16">ist of packages</a> we install on top of core minibian. I like that now we have just the packages we need and nothing we don&#39;t. This&nbsp;makes the image nice and small to download. However given the falling cost of SD cards we have started shipping 8GB sd cards in the shop. The image download will however still fit on 4GB with plenty to spare if&nbsp;needed.</p>
<p>@paul the version of node-red that&#39;s pre-installed on Jessie and available via the official sources is sadly quite old. We need some of the new features of later versions so for the moment will will need to stick with&nbsp;NPN&nbsp;install. &nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38450"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Mon, 18/01/2016 - 17:57.</div>
    <div class="content">
     <p>Glyn, when all&#39;s said and done it&#39;s up to you guys - you are the ones who are selling and therefore <em>supporting </em>the image.</p>
<p>I was just suggesting that you might want to consider Jessie Lite as it has a much better support structure. (Not sure if you noted but it struck me, when I looked at the minibian site, that there appeared to be only one person behind this regardless of the nice blurb.)</p>
<p>Also, If as you say there&#39;s little difference between the two then I know what I would be doing.</p>
<p>Anyway, for the record, if I&#39;m reading things correctly from the df -h is that for my install on Jessie Lite it&#39;s less than 1.5Gb. So still oodles of space for openhab and node-red before any data.</p>
<p>I guess the community could host a version based on Jessie Lite&nbsp;if there is interest in that.</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38453"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 18/01/2016 - 19:14.</div>
    <div class="content">
     <p><em>@paul the version of node-red that&#39;s pre-installed on Jessie and available via the official sources is <strong>sadly quite old.</strong> We need some of the new features of later versions so for the moment will will need to stick with&nbsp;NPN&nbsp;install.&nbsp;</em></p>
<p><strong>@Glyn</strong> - The current node-red version shipped with Jessie&nbsp;is v0.12.5 which until 8hrs ago, was the current release version - <a href="https://github.com/node-red/node-red/releases">see their releases page</a>&nbsp;and was only released 12 days ago.<br />
I&#39;ve just apt-get update/upgrade and now am&nbsp;running v0.12.5 - all from the official Jessie source.<br />
Earlier today, v0.13 was released, and the node-red team are anticipating that the Jessie &#39;pre-installed&#39; version will be updated shortly to this version.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38460"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Mon, 18/01/2016 - 20:21.</div>
    <div class="content">
     <p><em>Also, If as you say there&#39;s little difference between the two then I know what I would be doing.</em></p>
<p>With an uncompressed image size difference of ~600MB, I&#39;d say there is a bit more than just a &quot;little&quot; difference betwen the two. (Minibian and Raspbian Jessie-Lite)</p>
<p><em>there appeared to be only one person behind this regardless of the nice blurb</em></p>
<p>That looks to be the case. Luca Soldoggio appears to be the creator, and sole entity behind Minibian.</p>
<p>FWIW, I&#39;d be <em>much</em> more inclined to go with the <em>team</em> who <em>developed the PI</em>, and consider Raspbian its official OS.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38473"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 18/01/2016 - 22:50.</div>
    <div class="content">
     <p>Minibian is just Raspbian lite with less packages. Here is a complete package list for Jessie Lite (see below), if all these packages&nbsp;are checked to be installed then you will be running the exact same thing as Jessie Lite.&nbsp;Many are already installed.&nbsp;I don&#39;t understand the need for us to ship with unnecessary packages installed when anything extra that might be required, can be installed very&nbsp;easily.&nbsp;</p>
<p>If people feel strongly about this I could be convinced to re-build the image, however it&#39;s been a considerable amount of work working full time of this for the past month or two. Even though rebuilding will be less work than building from scratch, there will undoubtedly be a lots of little tweaks to make. I feel the image in it&#39;s current state is almost ready to launch.&nbsp;&nbsp;I would really like to start shipping this new image with emonPis purchased from the shop. Currently, we are still shipping a July image with Emoncms 8 which is far from ideal. However, I want to be sure the new image is stable and reliable&nbsp;before launch. Hence the extensive beta testing.&nbsp;</p>
<p>@paul thanks for the info. Things have obviously moved on from when I was setting up node-red on the image at the end of last month (Dec 15). I will look at ensuring the node-RED included on the image is the same as the version from the Raspian sources. We need version 12.4 at least.&nbsp;</p>
<p>Edit: removed long list of packages (sorry didn&#39;t realise how long the list&nbsp;was!), list can be viewed on the raspi forum thread link <a href="https://www.raspberrypi.org/forums/viewtopic.php?f=28&amp;t=132518">https://www.raspberrypi.org/forums/viewtopic.php?f=28&amp;t=132518</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38478"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Tue, 19/01/2016 - 04:15.</div>
    <div class="content">
     <p>You might like to update OpenHab too as it is now at V1.8.0 which according to the forums is the last runtime update before the move to OpenHab2 which is at Beta 1 stage. I&#39;ve been running a nightly image of 1.8 for sometime now and its been very stable. Haven&#39;t looked into OH2 yet.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38487"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Tue, 19/01/2016 - 12:17.</div>
    <div class="content">
     <p>Whilst I think enough has been said and I really appreciate Glynn the effort involved in making this upgradeable etc., I did notice this thread&nbsp;<a href="11953.html">http://openenergymonitor.org/emon/node/11953</a> which I think says it all.</p>
<p>Simon</p>
<p>PS Anyone up for hosting a couple of Jessie based images?&nbsp; (emoncms, emonhub, modules, MQTT&nbsp;with simple instructions as to how to get wifi&nbsp;working). Could maybe be added to the raspi instructions Paul?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38492"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Tue, 19/01/2016 - 14:01.</div>
    <div class="content">
     <p>Simon, I&#39;m not sure that is the way forward, and would sooner work with T &amp; G to reach a solution, rather than go separate ways. The format of the OS and size of SD card is truly on the agenda, let&#39;s see what the guys decide.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38495"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 19/01/2016 - 16:23.</div>
    <div class="content">
     <p>Ok, I will look at re-building the image on Jessie minimal. This will take a few weeks of work. I will post another beta in due course and we can compare.&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38502"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6366.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nrgbod&#039;s picture" title="nrgbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/6366.html" title="View user profile.">nrgbod</a> on Tue, 19/01/2016 - 17:43.</div>
    <div class="content">
     <p>I really like the efficiency of the&nbsp;minibian ro version. Mine boots in less than 15 seconds and my rpi b+ has over 100mb more free ram than the full version of Jessie was giving&nbsp;and the cpu and gpu temperatures have dropped by about 7&nbsp;degC. &nbsp;</p>
<p>My full Acronis backups of the ext4 partition have dropped in size from 2.3gb with the full version of Jessie to 648mb with Minibian.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38779"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 26/01/2016 - 23:34.</div>
    <div class="content">
     <p>Making good progress on re-building the image on Raspbian&nbsp;Jessie&nbsp;minimal. I&#39;m working on making a comprehensive build guide pulling together Paul&#39;s RasPi&nbsp;Emoncms&nbsp;install guides and adding some emonPi specific stuff. Still a work in progress (as is the image):&nbsp;<a href="https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md">https://github.com/openenergymonitor/emonpi/blob/master/docs/SD-card-build.md</a>&nbsp;.&nbsp;This guide replaces the imagebuild.md (renamed to old.imagebuild.md) and emonPi install.sh script which has never really worked reliably (renamed to old.install.sh) in the emonpi repo.</p>
<p>Currently with just Emoncms installed 3.4GB of storage&nbsp;s being used and 243Mb&nbsp;or RAM used after boot.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38789"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Wed, 27/01/2016 - 09:03.</div>
    <div class="content">
     <p>Nice work Glynn.</p>
<p>Reading the notes&nbsp;quickly I noticed a typo in the WPA_supplicant section. At one point you have WPA_WPA_ so one WPA too many.</p>
<p>Also, at the top of this post you might want to change Jessie minimal to Jessie Lite just to be consistent.</p>
<p>Look forward to seeing the image! &nbsp; :-)</p>
<p>Simon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38792"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Wed, 27/01/2016 - 10:27.</div>
    <div class="content">
     <p>Hi Glyn, I realise that the above is priority atm. However the wifi non reconnect issue which only seems to occur with the dec22&nbsp;update is affecting a number of posters other than myself looking at other threads. Pb66, Jon, Jmoloney,dvbit&nbsp;seem to be experiencing it as well. Reboot of Pi always cures it after some time. But if the wifi is lost from the router end, reconnection does not happen. Have you tried rebooting your routers leaving the Pi powered up? If you have and yours reconnects then the plot thickens. My edimax dongle goes completely dead ie no led and no transmission. So I can only blame something within the Pi software. My ability to troubleshoot any&nbsp;further&nbsp;is zero without step by step guidance.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38795"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/937.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bramco&#039;s picture" title="Bramco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/937.html" title="View user profile.">Bramco</a> on Wed, 27/01/2016 - 11:19.</div>
    <div class="content">
     <p>Hi Webby,</p>
<p>I have a new installation based on Jessie Lite following the raspi install guide on a PiB, edimax dongle and&nbsp;rfm12 which <em>does</em> reconnect. I had to turn off the router the other day and checked because I had had trouble a month or so ago.</p>
<p>The system which gave me an issue was a Pi2 with full Jessie and an rfm69, this didn&#39;t reconnect.</p>
<p>On the PiB system I haven&#39;t done anything in terms of setting the edimax to not go into low power, or to run any scripts to check for connections. The only thing I did to set it up was to edit the WPA_suppliant file to add my router name and password. The system hasn&#39;t ever been connected to a wired internet connection, so I had to connect a keyboard and display to edit the file of course.</p>
<p>Simon</p>
<p>PS the system also has MQTT installed. (and I think it&#39;s also hooked up to duckdns but I&#39;d have to check that I actually did that on this one).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38796"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 27/01/2016 - 11:35.</div>
    <div class="content">
     <p>UPDATE (27/01/16): PLEASE DON&#39;T INSTALL THIS BETA: There is a new SD cad image in development that will be released in a couple of weeks.</p>
<p>IMPORTANT:&nbsp;If you are currently running this beta you will get&nbsp;&#39;Can&#39;t connect to&nbsp;database&#39;&nbsp;error after&nbsp;update. You will need to update your local MYSQL Emoncms database&nbsp;username and password. This is due to a&nbsp;change in the default MYSQL username and password&nbsp;in default settings.php&nbsp;to improve security:</p>
<p>Login to MYSQL with root user (default password raspberry):</p>
<pre>
rpi-rw

mysql -u root -p

Create new user:

CREATE USER &#39;emoncms&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;emonpiemoncmsmysql2016&#39;; GRANT ALL ON emoncms.* TO &#39;emoncms&#39;@&#39;localhost&#39;;

flush privileges;

exit;

rpi-ro</pre><p>&nbsp;</p>
<p>@webby I am investigating Wifi issues. Please fill out the spreadsheet with your specific info thatr I posted&nbsp;on <a href="11794.html">this thread</a></p>
<p><a href="https://docs.google.com/spreadsheets/d/1B7n57g2iOf-2OJGQMFfXknhfroisKn1AtAnDEzWmS98/edit?usp=sharing">​https://docs.google.com/spreadsheets/d/1B7n57g2iOf-2OJGQMFfXknhfroisKn1AtAnDEzWmS98/edit?usp=sharing</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38822"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Thu, 28/01/2016 - 09:21.</div>
    <div class="content">
     <p>Is there any way the next image can be offered somehow without Openhab and node red, or alternatively with instructions on how to get rid of them? I&#39;ve just moved over to this image just before the warning message went up and it took a considerable amount of time to get everything working with my extensive Openhab installation sat on top of Open Energy Monitor. My version of Openhab sits in a folder in the data directory with access via Samba which works better for my setup, it also allows easy installation of nightly Openhab builds if needed by doing a simple Windows&nbsp;file copy.</p>
<p>Incidentally anyone wanting to run Openhab&nbsp;with GPIO pins on&nbsp;Jessie&nbsp;will need to spend a little time fiddling as it doesn&#39;t work out of the box.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38825"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 28/01/2016 - 10:34.</div>
    <div class="content">
     <p>They will be easy to remove:</p>
<p>sudo apt-get remove nodered (on the new image eta Jan/Feb16)&nbsp;</p>
<p>sudo&nbsp;npm uninstall&nbsp;node-red (22Dec15&nbsp;image)</p>
<p>sudo apt-get install openhab-runtime</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38862"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Fri, 29/01/2016 - 07:42.</div>
    <div class="content">
     <p>Thanks Glyn,</p>
<p>another thing with the beta image&nbsp;is that it prevents GPIO PIN 17 from being used by Openhab.</p>
<p>I have just tested:</p>
<p>2015-11-12-jessie-minibian<br />
​2015-11-21-raspbian-jessie<br />
​emonSD-22Dec2015</p>
<p>Only&nbsp;emonSD-22Dec2015 seems to prevent PIN 17 from working. I have tried sudo&nbsp;apt-get install raspi-config and then disabling SPI and I2C in case they were enabled.&nbsp;PIN 17 can also be&nbsp;spi1 cs0 but it didn&#39;t make any difference. Curiously enough the other PIN I was using on my test system PIN 21 is shared with spi1 sclk and I haven&#39;t noticed any problems with this one.</p>
<p>The error in all case is &quot;the resource is busy&quot; in openhab.log at the point when the pins are initialised.</p>
<p>is physical pin 11 (GPIO pin 17)&nbsp;used for anything in the emonpi?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38868"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Fri, 29/01/2016 - 11:51.</div>
    <div class="content">
     <p><a href="../../../raw.githubusercontent.com/openenergymonitor/Hardware/master/emonPi/emonPi_V1_6/emonPi_V1.6_sch.png" title="https://raw.githubusercontent.com/openenergymonitor/Hardware/master/emonPi/emonPi_V1_6/emonPi_V1.6_sch.png">https://raw.githubusercontent.com/openenergymonitor/Hardware/master/emon...</a></p>
<p>I can see that GPIO17 is connected to D5.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38869"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 29/01/2016 - 12:11.</div>
    <div class="content">
     <p>Yup, pin 17 is used to send a signal from the ATmega328 to the RasPi to trigger the shutdown procedure</p>
<p>You will have to edit the LCD control script to disable this (GPIO17 is pin 11):&nbsp;https://github.com/openenergymonitor/emonpi/blob/master/lcd/emonPiLCD.py#L190</p>
<p><a href="http://wiki.openenergymonitor.org/index.php?title=EmonPi#Port_Map" title="http://wiki.openenergymonitor.org/index.php?title=EmonPi#Port_Map">http://wiki.openenergymonitor.org/index.php?title=EmonPi#Port_Map</a></p>
<p><a href="http://wiki.openenergymonitor.org/index.php?title=EmonPi#System_Diagram" title="http://wiki.openenergymonitor.org/index.php?title=EmonPi#System_Diagram">http://wiki.openenergymonitor.org/index.php?title=EmonPi#System_Diagram</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38879"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Fri, 29/01/2016 - 18:41.</div>
    <div class="content">
     <p>Thanks,&nbsp;I see from the links that additional pins are used for the LCD&nbsp;push button and OOK TX. Are these likely to conflict too? I think the LCD one was unusable on wheezy, but works on Jessie. Whereas the shutdown pin worked on wheezy, but doesn&#39;t on Jessie.</p>
<p>Is it doable to uninstall the LCD scripts and the OOK script?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38915"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sat, 30/01/2016 - 23:17.</div>
    <div class="content">
     <p>Still can&#39;t get this to release. I tried:</p>
<p>Commenting out all references to PIN 17 in /home/pi/emonpi/LCD/emonPiLCD.py</p>
<p>Disabling the emonPiLCD service</p>
<p>Deleting the file from init.d,</p>
<p>Deleting the /home/pi/emonpi/lcd folder</p>
<p>But still GPIO 17 appears in /sys/class/gpio&nbsp;after a reboot&nbsp;and is unavailable in openhab</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38916"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 30/01/2016 - 23:26.</div>
    <div class="content">
     <p>Do you have an emonpi connected? If so it could be the ATmega328 hogging the data line </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38918"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7997.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sheppy&#039;s picture" title="sheppy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/7997.html" title="View user profile.">sheppy</a> on Sat, 30/01/2016 - 23:44.</div>
    <div class="content">
     <p>No, this is just a borrowed bare&nbsp;model B for testing with that has&nbsp;a LED / resistor across PIN17 and a resistor / contact across PIN21. It also has a Monitor &amp; Keyboard &amp; Network attached but nothing else.</p>
<p>My main system is a Pi2 with EMONCMS, OPENHAB,&nbsp;RFM69Pi, RFXCOM, 1-Wire and many GPIO&nbsp;contacts and&nbsp;relays</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38921"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sun, 31/01/2016 - 04:36.</div>
    <div class="content">
     <p>Found something odd with the emoncms.log.&nbsp; All of the timestamp entries appear to be in UTC instead of local time.&nbsp; All of the other log files in /var/log directory seem to be correct with a local timestamp. &nbsp;</p>
<p>Also I changed the Log level in the /var/www/emoncms.settings.php file from 3 (error) to 2 (warn):</p>
<blockquote><p>//6 #### Other settings<br />
&nbsp; &nbsp; // Log file configuration<br />
&nbsp; &nbsp; $log_enabled = true;<br />
&nbsp; &nbsp; $log_filename = &#39;/var/log/emoncms.log&#39;;<br />
&nbsp; &nbsp; // Log Level: 1=INFO, 2=WARN, 3=ERROR<br />
&nbsp; &nbsp; $log_level = 2;</p>
</blockquote>
<p>After a reboot I get an emoncms.log full of &ldquo;|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast?&rdquo;</p>
<blockquote><p>2016-01-31 04:06:22.151|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=12 timestamp=1454213150 pos=1781131 last_pos=1781131 value=3709.255</p>
<p>2016-01-31 04:06:22.152|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=12 timestamp=1454213160 pos=1781132 last_pos=1781132 value=3709.258</p>
<p>2016-01-31 04:06:22.154|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=12 timestamp=1454213170 pos=1781133 last_pos=1781133 value=3709.26</p>
<p>2016-01-31 04:06:22.159|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=120 feedid=16 timestamp=1454213040 pos=146455 last_pos=146455 value=38.2</p>
<p>2016-01-31 04:06:22.166|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=19 timestamp=1454213120 pos=1711194 last_pos=1711194 value=3308.7884286379</p>
<p>2016-01-31 04:06:22.168|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=19 timestamp=1454213130 pos=1711195 last_pos=1711195 value=3308.7907411379</p>
<p>2016-01-31 04:06:22.169|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=19 timestamp=1454213140 pos=1711196 last_pos=1711196 value=3308.7930425268</p>
<p>2016-01-31 04:06:22.170|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=19 timestamp=1454213150 pos=1711197 last_pos=1711197 value=3308.7953883601</p>
<p>2016-01-31 04:06:22.171|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=19 timestamp=1454213160 pos=1711198 last_pos=1711198 value=3308.7976966934</p>
<p>2016-01-31 04:06:22.173|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=19 timestamp=1454213170 pos=1711199 last_pos=1711199 value=3308.8000105822</p>
<p>2016-01-31 04:06:22.183|WARN|PHPFina.php|post_bulk_prepare() data in past or before next interval, nothing saved. Posting too fast? slot=10 feedid=33 timestamp=1454213120 pos=925745 last_pos=925745 value=279</p>
</blockquote>
<p>In 4 hours there were 13800+ lines similar to&nbsp;the above.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39093"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Wed, 03/02/2016 - 20:43.</div>
    <div class="content">
     <p>Glyn - I did an emonPi Update today at&nbsp;Wed 3 Feb 14:26:04 CST 2016 and got this error in the emonpiupdate.log:</p>
<blockquote><p>git pull /home/pi/oem_node-red<br />
Already up-to-date.<br />
git pull /var/www/emoncms/usefulscripts<br />
<strong>error: insufficient permission for adding an object to repository database .git/objects</strong><br />
fatal: failed to write object<br />
fatal: unpack-objects failed</p>
<p>Start emonPi Atmega328 firmware update: &nbsp;....</p>
</blockquote>
<p>But there is no&nbsp;<strong>/var/www/emoncms/usefulscripts </strong>directory on the emonPi.&nbsp; I did find&nbsp;<strong>usefulscripts</strong> directory in /home/pi/. &nbsp;And within the&nbsp;<strong>/home/pi/usefulscript</strong>&nbsp;directory is&nbsp;<strong>/.git/objects </strong>directory.</p>
<p>The emonPi is running the emonSD-22Dec2015.img image and&nbsp;low-write 9.3 | 2016.01.26.</p>
<p>Jon</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39141"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 05/02/2016 - 23:47.</div>
    <div class="content">
     <p>sudo chown&nbsp;777&nbsp;/var/www/emoncms/usefulscripts/.git -R&nbsp;</p>
<p>should fix the permissions issue. The main issue is what caused this in the first place? Im not sure at the moment...</p>
<p>BTW: I would not recommend cloning useful&nbsp;scripts into www. This is a security risk since there are bash scrips in there that could do things you don&#39;t want if ran inadventatly. The home folder is a better place for useful scripts&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39143"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sat, 06/02/2016 - 00:02.</div>
    <div class="content">
     <p>Glyn - Ok let&#39;s try again! &nbsp;<strong>I do not have&nbsp;usefulscripts in the&nbsp;/var/www/emoncms&nbsp;</strong>directory. &nbsp;<strong>BUT</strong> the emonPi&nbsp;Update is trying to update&nbsp;<strong>/var/www/emoncms/usefulscripts</strong>. &nbsp;I think this is an error in your script for the emonPi update.</p>
<p>This is from the&nbsp;<strong>emonpiupdate.log</strong>:</p>
<blockquote><p>git pull /home/pi/oem_node-red<br />
Already up-to-date.<br />
git pull /var/www/emoncms/usefulscripts<br />
error: insufficient permission for adding an object to repository database .git/objects<br />
fatal: failed to write object<br />
fatal: unpack-objects failed</p>
<p>Start emonPi Atmega328 firmware update: &nbsp;....</p>
</blockquote>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39147"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 06/02/2016 - 00:39.</div>
    <div class="content">
     <p>Ah, just had a look. It was just a typo in the print out log message. It was actually pulling from /home/pi. It&#39;s been fixed now. Thanks&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/commit/ec6140b92717e7b376b1555544ddc2bd26038278" title="https://github.com/openenergymonitor/emonpi/commit/ec6140b92717e7b376b1555544ddc2bd26038278">https://github.com/openenergymonitor/emonpi/commit/ec6140b92717e7b376b15...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39153"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 06/02/2016 - 10:41.</div>
    <div class="content">
     <p>Just reading up on the git permissions error, it seems a better fix would be:</p>
<pre>
cd repository/.git

sudo chmod -R g+ws *
sudo chgrp -R pi *

git config core.sharedRepository true</pre><p>&nbsp;</p>
<p><a href="http://stackoverflow.com/questions/1918524/error-pushing-to-github-insufficient-permission-for-adding-an-object-to-reposi" title="http://stackoverflow.com/questions/1918524/error-pushing-to-github-insufficient-permission-for-adding-an-object-to-reposi">http://stackoverflow.com/questions/1918524/error-pushing-to-github-insuf...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39173"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re:  (BETA): emonSD22Dec15 - emonPi / emonBase (Raspberry Pi + RFM69Pi) Emoncms v9 pre-built ready</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sat, 06/02/2016 - 20:30.</div>
    <div class="content">
     <p>Glyn - The git permissions error fix worked as planned. &nbsp;Thank you! &nbsp;</p>
<p>I should have looked at the code before writing. &nbsp;I didn&#39;t realize the &quot;git pull /var/www/emoncms/usefulscripts&quot; was just an echo &quot;git pull /var/www/emoncms/usefulscripts&quot;. &nbsp;I thought it was the actual&nbsp;command to get the git to go (try saying that 10 times fast). &nbsp;Anyway the emonPi update seems to work - thanks again!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11799"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Fm9f5Pddrmgq2AApJEEq7eJ8VYYfkvdLwgZWGU8AqQQ" value="form-Fm9f5Pddrmgq2AApJEEq7eJ8VYYfkvdLwgZWGU8AqQQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
