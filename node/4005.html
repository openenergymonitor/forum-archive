<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/4005 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:10:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>NanodeRF communication with Emoncms | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">NanodeRF communication with Emoncms</h3>
        <span class="submitted">Submitted by <a href="../user/4865.html" title="View user profile.">Jordan-loe</a> on Tue, 04/03/2014 - 17:54</span>
        <div class="content"><p>Hi folks, I am trying to set up the communication with the NanodeRF&nbsp;and Emoncms. I have no back ground in working with servers, so my apologies if I say something wrong. Following &nbsp;the steps:&nbsp;http://emoncms.org/site/docs/installwindows, I have been successful in running emoncms on local host. I installed MySQL and I&#39;m running&nbsp;WAMPSERVER on it ( to my understanding).This is the message i get when serial monitoring my nanodeRF:</p>
<p>	[webClient]<br />
	DHCP status: 1<br />
	IP:&nbsp; 192.168.0.10<br />
	GW:&nbsp; 192.168.0.1<br />
	DNS: 8.8.8.8<br />
	DNS status: 1<br />
	SRV: 176.227.193.50<br />
	Data sent: /api/post.json?apikey=7ef577a45d59addd38bad7bb27b96c68&amp;json={rf_fail:1}<br />
	Time request sent<br />
	Data sent: /api/post.json?apikey=7ef577a45d59addd38bad7bb27b96c68&amp;node=10&amp;csv=0,0,0,3<br />
	Data sent: /api/post.json?apikey=7ef577a45d59addd38bad7bb27b96c68&amp;node=10&amp;csv=0,0,0,20<br />
	Data sent: /api/post.json?apikey=7ef577a45d59addd38bad7bb27b96c68&amp;node=10&amp;csv=0,0,0,27<br />
	Data sent: /api/post.json?apikey=7ef577a45d59addd38bad7bb27b96c68&amp;node=10&amp;csv=0,0,0,3<br />
	Data sent: /api/post.json?apikey=7ef577a45d59addd38bad7bb27b96c68&amp;node=10&amp;csv=0,0,0,15<br />
	Data sent: /api/post.json?apikey=7ef577a45d59addd38bad7bb27b96c68&amp;node=10&amp;csv=0,0,0,2<br />
	Data sent: /api/post.json?apikey=7ef577a45d59addd38bad7bb27b96c68&amp;node=10&amp;csv=0,0,0,23</p>
<p>	The &quot;OK received&quot; message is not showing up. No updates are received on emoncms.&nbsp;</p>
<p>	One more thing i should mention is I made changes as indicated here: <a href="3728.html" title="http://openenergymonitor.org/emon/node/3728">http://openenergymonitor.org/emon/node/3728</a> due to an error message at the top of every screen on emoncms. It removed the error but I&#39;m wondering if this could be the problem.</p>
<p>	Thanks to anyone who can help<br />
	&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="4096.html" class="topic-previous" title="Go to previous forum topic">‹ Input OnTime</a>
              <a href="4052.html" class="topic-next" title="Go to next forum topic">excessive amount of data sent without ok recieved ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-18974"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 04/03/2014 - 22:07.</div>
    <div class="content">
     <p>Does the server respond when you send a message from your browser? (see the Input API Help for the format.) Is your WAMP server on-line?</p>
<p>I always use static addresses and I&#39;ve never had any success with DHCP. You&#39;ll find my notes for setting up the NanodeRF to talk to WAMP here: <a href="3869.html" title="http://openenergymonitor.org/emon/node/3869">http://openenergymonitor.org/emon/node/3869</a> or here <a href="../sites/default/files/Nanode%2520set-up.html" title="http://openenergymonitor.org/emon/sites/default/files/Nanode%2520set-up.odt">http://openenergymonitor.org/emon/sites/default/files/Nanode%2520set-up.odt</a></p>
<p>Check through those and make sure you&#39;ve done everything.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18987"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1178.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1178.jpg" alt="alco&#039;s picture" title="alco&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/1178.html" title="View user profile.">alco</a> on Wed, 05/03/2014 - 10:39.</div>
    <div class="content">
     <p>you can take a look at my firmware: <a href="https://github.com/alco28/Sensor_base" title="https://github.com/alco28/Sensor_base">https://github.com/alco28/Sensor_base</a></p>
<p>its a nanodeRF with and sensorshield on it so it acts like a emontx&amp;emonbase.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19069"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4865.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Jordan-loe&#039;s picture" title="Jordan-loe&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/4865.html" title="View user profile.">Jordan-loe</a> on Fri, 07/03/2014 - 04:04.</div>
    <div class="content">
     <p>Hi Robert, when you say&nbsp;<em>Does the server respond when you send a message from your browser?&nbsp;</em>Do you mean sending the example data from the emoncms&nbsp;page? If so than yes it does. When I post data it shows up in my feed. Also yes, my WAMP server is online.<br />
	When i look at the feeds on emoncms&nbsp;under the column &quot;engine&quot; it says MYSQL. I uploaded the static IP sketch to the nanode and also assigned a static IP to my computer. Unfortunately,&nbsp;I am still not getting any data sent to emoncms and the &quot;OK received&quot; is not showing up in serial monitor.&nbsp;</p>
<p>I have the program MYSQL notifier (1.1.5) when left clicking on the icon it says<strong> localhost (online), wampmysqld-Running , MySQL56-Running</strong>​. &nbsp;When I hover over the WAMP icon it says <strong>WAMPSERVER- server online.&nbsp;</strong></p>
<p>Here is the changes i made to the sketch:</p>
<p>
	// ethernet interface mac address, must be unique on the LAN<br />
	static byte mymac[] = { 0x42,0x31,0x42,0x21,0x30,0x31 };</p>
<p>// 1) Set this to the domain name of your hosted emoncms - leave blank if posting to IP address<br />
	char website[] PROGMEM = &quot;&quot;;</p>
<p>// or if your posting to a static IP server, change to true if you would like the sketch to post to static IP (not sure if this is working..)<br />
	boolean use_hisip = true;&nbsp;<br />
	static byte hisip[] = { 192,168,0,14}; // Laptop static IP</p>
<p>
	// Set to true and enter IP to give the NanodeRF a static IP address - default is DHCP (NB: must be used with static server IP (hisip)<br />
	boolean use_staticIP = true;&nbsp;<br />
	static byte myip[] = { 192,168,0,100 };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //NanodeRF static IP address - not needed if using DHCP<br />
	static byte gwip[] = { 192,168,0,1 };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // gateway ip address - not needed if using DHCP</p>
<p>// 2) If your emoncms install is in a subdirectory add details here i.e &quot;/emoncms3&quot;<br />
	char basedir[] = &quot;emoncms&quot;;</p>
<p>// 3) Set to your account write apikey<br />
	char apikey[] = &quot;7ef577a45d59addd38bad7bb27b96c68&quot;;</p>
<p>&nbsp;</p>
<p>The <em>char basedir[]=&nbsp;</em>i put &quot;emoncms&quot; that is the name of the sub folder in the wamp www folder. Not sure if that&#39;s right.</p>
<p>
	thanks for the advice so far!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19078"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 07/03/2014 - 11:53.</div>
    <div class="content">
     <p>EmonCMS responding to the web page means that most (if not all) of that is OK and running, and your problem is talking to it from outside that machine.</p>
<p>You have for the directory &quot;emoncms3&quot;, not &quot;/emoncms3&quot;&nbsp; Those are different places!</p>
<p>Are you sure the gateway IP address is correct? Is that what your router documentation/setup says it is? Usually, it is at the top end of the range.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19084"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4865.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Jordan-loe&#039;s picture" title="Jordan-loe&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/4865.html" title="View user profile.">Jordan-loe</a> on Fri, 07/03/2014 - 15:05.</div>
    <div class="content">
     <p>The gateway IP should be correct. It is the address on the routers webpage. It says &quot; LAN IP ADDRESS&quot; 192.168.0.1. Also when i go into the&nbsp;cmd&nbsp;in the start menu and do a &quot;ipconfig&quot; it says the gateway address is 192.168.0.1. Like i said i assigned a static address to my computer but i have not for the nanode. On my routers page under DHCP it has arduino-31&nbsp;with an IP address of 192.168.000.005.&nbsp;<br />
	<em>static byte myip[] = { 192,168,0,100 };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //NanodeRF static IP address - not needed if using DHCP</em></p>
<p>	Do i some how need to make a static ip&nbsp;for the nanode? Or do i just make one up for the code? Or do i use the DHCP&nbsp;IP from the router page?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19091"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 07/03/2014 - 19:04.</div>
    <div class="content">
     <p>It might be my router, but I never succeeded in getting DHCP to work with the Nanode. Hence the use of static addresses throughout (at least for the Nanode and the bits that interface with it).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19094"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4865.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Jordan-loe&#039;s picture" title="Jordan-loe&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/4865.html" title="View user profile.">Jordan-loe</a> on Fri, 07/03/2014 - 20:37.</div>
    <div class="content">
     <p>How do I assign a static IP for the nanode? for the line&nbsp;<em>static byte myip[] = { 192,168,0,100 };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //NanodeRF static IP address - not needed if using DHCP&nbsp;</em>I used &quot;192.168.0.100&quot;. This static&nbsp;ip address is only in my sketch. Do I need make the router recognize it as the nanode&#39;s ip somehow?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19096"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 07/03/2014 - 21:06.</div>
    <div class="content">
     <p>The notes don&#39;t mention it, I can&#39;t remember now, but I can&#39;t believe I didn&#39;t write it down if it was important. So I think not. All I can say is the set-up that I described in the notes worked for me and it&#39;s worked for several others around here too.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19158"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4865.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Jordan-loe&#039;s picture" title="Jordan-loe&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/4865.html" title="View user profile.">Jordan-loe</a> on Tue, 11/03/2014 - 16:34.</div>
    <div class="content">
     <p>I&#39;ve made headway but still not operational. Reading on the forum, I seen that &#39;&#39;api&#39;&#39; should be changed to &#39;&#39;input&#39;&#39; in order for the packet to be sent to emoncms. Is this still relevant?</p>
<p>	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19169"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 11/03/2014 - 23:41.</div>
    <div class="content">
     <p>I thought the example sketches had all been changed, but apparently not. As far as I know it should be &quot;/input/post.json&quot; and that&#39;s certainly working for me as I type.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19227"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5694.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5694.jpg" alt="Patrice Diliakou&#039;s picture" title="Patrice Diliakou&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: NanodeRF communication with Emoncms</h3>

    <div class="submitted">Submitted by <a href="../user/5694.html" title="View user profile.">Patrice Diliakou</a> on Thu, 13/03/2014 - 22:25.</div>
    <div class="content">
     <p>Hello,</p>
<p>If your emoncms server is in /var/www/emoncms you must put /emoncms in your sketch.</p>
<p>You can leave &quot;api&quot; on original sketch parameters.</p>
<p>Dont forget to put good parameters to permit your installation working on local network with ip exemple : (<a href="http://192.168.x.x/emoncms/" title="http://192.168.x.x/emoncms/">http://192.168.x.x/emoncms/</a>). you must configure correctly your virtualhost in apache settings. (&nbsp; i passed the evening to search where was the problem :)&nbsp; )</p>
<p>&nbsp;</p>
<p>Bye !</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/4005"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-jTrrT1P3CHOtBK6rBY8WcCsBzZS__VdwpjWLONIXgeY" value="form-jTrrT1P3CHOtBK6rBY8WcCsBzZS__VdwpjWLONIXgeY"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/4005 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:10:56 GMT -->
</html>
