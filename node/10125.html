<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10125 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:49:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>migrate emoncms from windows to raspberry | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">migrate emoncms from windows to raspberry</h3>
        <span class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Tue, 03/02/2015 - 22:12</span>
        <div class="content"><p>Hi,</p>
<p>after I have now finished building my emoncms-monitoring-house-automation on a W7-PC, I am thinking about migrating the whole stuff to an less power needing RaspberryPi.</p>
<p>I intend to use the model B+ with a 1,8&quot;HDD. perhaps the new RaspberryPi 2 (I ordered one just right now).</p>
<p>The main question for me is, whether I have the same scope on the RasPi-emoncms as on my windows-emoncms.<br />
What do I need:<br />
- the json-interface to receive actual values over ethernet from my data-providing stations<br />
- storing feeds on the HDD<br />
- using my existing dashboards with the whole range of the existing, and some modified widgets</p>
<p>regards/brutzler</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10113.html" class="topic-previous" title="Go to previous forum topic">‹ Raspberry Pi 2 Model B Announced Today -official support for Windows 10.</a>
              <a href="10198.html" class="topic-next" title="Go to next forum topic">3-phase system: need to calculate/display more parameters ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-27427"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 04/02/2015 - 21:11.</div>
    <div class="content">
     <p>You should have no issues running a full emoncms install on a Pi with a hdd, in fact although I can&#39;t think of any platform specific feature pro&#39;s or con&#39;s I do think there are more &quot;linux&quot; users than windows users so support and dev can be a little easier to find.</p>
<p>You should also be able to transport your existing database if you want to, I know this is possible linux to linux&nbsp;and I don&#39;t think the sql is any different if you use the export/import in phpmyadmin. You may need to &quot;tinker&quot; with the database if there are any windows specific addresses within the data maybe.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27734"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Sun, 15/02/2015 - 09:57.</div>
    <div class="content">
     <p>Hi,</p>
<p>just got my new RasPi-2 :-)</p>
<p>Now going to setup the stuff.<br />
I am discussing with my self, what is the best way to go.</p>
<p>- Taking a standard wheezy and setup the sql-stuff, like i did on my Windows-7-PC<br />
- Using an image from emoncms</p>
<p>I think, it would be better for me, to take the first choice. Because I do not need emonhub &amp; co. I only want to use the RasPi for collecting my datas and show them. (like I described in the first post).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27747"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 15/02/2015 - 21:48.</div>
    <div class="content">
     <p>How are you powering the hdd? the Pi B+ and Pi 2 have new power management that <u>can</u>&nbsp;provide 1.2A but is limited in settings to 600mA.</p>
<p>If you intend running a small HDD direct from a Pi 2 or B+ run this command (one line)</p>
<blockquote><p><strong>sudo sh -c &#39;echo &nbsp;&quot;\n# uncomment to raise USB current limiting to 1.2A (from 600mA).\nmax_usb_current=1&quot; &gt;&gt; /boot/config.txt&#39;</strong></p>
</blockquote>
<p>to add a &quot;max_usb_current=1&quot; option to &quot;/boot/config.txt&quot; that will get picked up next restart.﻿</p>
<p>The easiest way to set up a Pi HDD is to put the Raspbian&nbsp;OS&nbsp;image on BOTH an&nbsp;sd and the hdd, boot up on the sd and then edit the hdd to prepare it to boot to, so first you need to give the hdd a unique uuid and then mount the hdd</p>
<blockquote><p>​<strong>sudo tune2fs -U random -L hdd&nbsp; /dev/</strong><strong>sda2</strong><strong>sudo</strong><strong> mkdir /media/hdd</strong></p>
<p><strong>sudo mount /dev/sda2 /media/hdd</strong></p>
</blockquote>
<p>then edit the hdd&#39;s fstab</p>
<blockquote><p><strong>sudo nano /media/hdd/etc/fstab</strong></p>
</blockquote>
<p>change &quot;&nbsp;/dev/mmcblk0p2&nbsp;&quot; to &quot;&nbsp;/dev/sda2&nbsp;&quot; and Ctrl+x, y, enter,</p>
<p>while we are here just edit the inittab (this step is only required if you&#39;re intending to use rfm2pi or serial port)</p>
<blockquote><p><strong>sudo nano /media/hdd/etc/inittab</strong></p>
</blockquote>
<p>edit the very last line by adding a hash so it reads &quot;&nbsp;# T0:23:respawn:/sbin/getty -L ttyAMA0 115200 vt100&nbsp;&quot;</p>
<p>edit the cmdline.txt and reboot (the next 2 lines are 1 line wrapped, be sure it is entered as 1 line &quot;sudo&quot; to &quot;txt&#39;&quot;)</p>
<blockquote><p><strong>sudo sh -c &#39;echo &quot;dwc_otg.lpm_enable=0 console=tty1 root=/dev/sda2 rootfstype=ext4 elevator=deadline rootwait&quot; &gt; /boot/cmdline.txt&#39;</strong></p>
<p><strong>sudo shutdown -r now</strong></p>
</blockquote>
<p>Then if you want&nbsp;you can use the <a href="https://github.com/pb66/dev-emoncms">script I use to install full emoncms</a>&nbsp;(I haven&#39;t tried it wit Pi2 yet but see no reason it shouldn&#39;t work) with this one liner</p>
<blockquote><p><strong>git clone <a href="https://github.com/pb66/dev-emoncms.git" title="https://github.com/pb66/dev-emoncms.git">https://github.com/pb66/dev-emoncms.git</a> ~/dev-emoncms &amp;&amp; ~/dev-emoncms/install</strong></p>
</blockquote>
<p>​It takes about 20mins on a B+ but it needs no interaction, you can get on with something else and leave it to to it. So that it can create the emoncms&nbsp;SQL tables without interaction mySQL is installed without a root password so you must create a root password for mySQL and change user Pi password asap&nbsp;when it&#39;s done.</p>
<p>It&#39;s work in progress and&nbsp;would love to hear how it goes if you do.</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27754"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Mon, 16/02/2015 - 00:23.</div>
    <div class="content">
     <p>Hi,</p>
<p>thx for the detailed explanation.<br />
Its hard stuff for a linux noob. But I will try my best. (and have some questions...)</p>
<p><u>power management:</u><br />
I applied a 1,8&quot; 20GB HDD. My USB-doctor is measuring: current &lt; 0,45A&nbsp; on writing data&nbsp; :-)</p>
<p><u>The easiest way to set up a Pi HDD is to put the Raspbian&nbsp;OS&nbsp;image on BOTH an&nbsp;sd and the hdd</u><br />
Hmmm.... Just asking me....why this?<br />
I know, that the PI only can boot from the SD. What is the reason for putting the OS on the HDD?<br />
I thought that the normal way is to put the OS on the SD, mount the HDD and put the whole emoncms-stuff on the HDD.</p>
<p><u>Put the OS on HDD:</u><br />
How? The same way as on the SD-Card? Copy the same image (using win32diskimager in my case) onto the HDD?<br />
Isn&#39;t this a problem, if I once make an update of the OS with &quot;sudo apt-get update&quot; or similiar?<br />
Then I have different OS on SD&lt;-&gt;HDD. And which one do I update?</p>
<p>&nbsp;</p>
<p>But I think my main-problem is, that I do not completely understand how the Pi is working with SD and HDD together, when using your way.<br />
In my own words: (pls correct me if wrong)<br />
On the SD there are two partitions:</p>
<p>/dev/mmcblk0p1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 122879&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 57344&nbsp;&nbsp;&nbsp; c&nbsp; W95 FAT32 (LBA)<br />
/dev/mmcblk0p2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 122880&nbsp;&nbsp;&nbsp;&nbsp; 7744511&nbsp;&nbsp;&nbsp;&nbsp; 3810816&nbsp;&nbsp; 83&nbsp; Linux</p>
<p>The first one, I can even read out with Windows.<br />
Is this the partition where the Pi starts booting?<br />
On the second one there is the whole linux-stuff.<br />
With your change of the cmdline.txt, you want to force the system to switch from SD to HDD? And this is only possible, because on the second partition of the HDD &quot;/dev/sda2&quot; there is the same as on &quot;/dev/mmcblk0p2&quot;<br />
And when I put the raspian image on the HDD, there will also be a first partition (/dev/sda1) like as the SD-card, but this partition is of no use</p>
<p>edit: aahhh, i have seen, that the files, that are on the first partition are visible under linux in the folder /boot. Good to know. Means I can make changes here from my Windows-PC</p>
<p>&nbsp;</p>
<p>Your command for editing the cmdline.txt</p>
<p><u>sudo sh -c &#39;echo &quot;dwc_otg.lpm_enable=0 console=tty1 root=/dev/sda2 rootfstype=ext4 elevator=deadline rootwait&quot; &gt; /boot/cmdline.txt&#39;</u><br />
&nbsp;</p>
<p>default cmdline.txt: what about the &quot;console=ttyAMA0,115200?<br />
<u>dwc_otg.lpm_enable=0 console=ttyAMA0,115200 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline rootwait</u></p>
<p>&nbsp;</p>
<p><u>sudo tune2fs -U random -L hdd&nbsp; /dev/sda2sudo mkdir /media/hdd</u><br />
This are two commands? (sorry for this silly question)</p>
<ul>
<li>sudo tune2fs -U random -L hdd&nbsp; /dev/sda2</li>
<li>sudo mkdir /media/hdd</li>
</ul>
<p>&nbsp;</p>
<p>regards/brutzler</p>
<p>EDIT:<br />
tried the stuff with &quot;OS on HDD&quot;<br />
- How can I expand /dev/sda2 ? Because of writing the image to the HDD, there is only 4GB used.<br />
- sudo raspi-config -&gt; expand filesystem failed, because of being no SD-card.<br />
Can I resize an active partition? Or do I have to turn back, boot completely from sd-card, unmount sda2, resize sda2, mount it, and make changes in cmdline.txt again?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27756"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/02/2015 - 00:23.</div>
    <div class="content">
     <p>The HDD draws the most during startup firstly&nbsp;spinning&nbsp;up&nbsp;to speed&nbsp;and then whilst thrashing about through the booting up, which is also when the Pi needs more power. a settled HDD writing a stream of data to one block after another will be drawing minimal current. The Pi B had less to offer and wasn&#39;t as regulated but the B+ has a better supply but it is restricted to offer better protection.</p>
<p>If your HDD spins up and works okay, great but if you find it keeps starting and stopping at boot it will be lack of power. the same&nbsp;HDD I used with an original B without problem, wouldn&#39;t run on a B+ but since getting the Pi 2 and researching it due to&nbsp;experiencing the same power cylcling&nbsp;i have set both the B+ and the Pi 2 to 1.2A and the HDD will run on any off them.&nbsp;</p>
<p>I don&#39;t know what mine draws but it&#39;s spec&#39;d at 1A during spin up. And I can run a Pi 2, hdd, wifi&nbsp;dongle and rfm2pi without a usb hub without any problems off one supply to the Pi&nbsp;.</p>
<p>With regard to how to use the HDD, you could just have the OS on the sd card and just use the hdd for data I suppose but I don&#39;t see any benifit. I wouldn&#39;t concider spliting the filesystem over both either use the SD card and hdd for data or just use the hdd for all. The hdd is running anyway and is more reliable than the sd card. By keeping a 2nd redundant copy of the OS on the sd card if you do something that locks you out of the hdd you can change the cmdline.txt in a pc and boot to the sd card and access/investigate the HDD from the card. You can also make back up images of your hdd image from the sd card.</p>
<p>You do not have to keep the 8gb sd card in the Pi though I have a pi that boots to hdd&nbsp;using an old&nbsp;64MB&nbsp;nokia&nbsp;sd&nbsp;card&nbsp;.</p>
<p>Once you are running on the hdd it can be updated identically to the sd card via apt-get, the only difference is the media the OS is installed to the OS is still exactly the same except for the location refs ie /dev/sda2&nbsp;rather than /dev/mmcblk0p2.&nbsp;Yes the 2 OS&#39;s will get &quot;out of sync&quot; because you will only install SW to the hdd and the sd won&#39;t get updated, you can of course run apt-get update/upgrade on the sd card anytime then the OS&#39;s will be identical minus the additional software you have installed eg emoncms.</p>
<p>The 1st partition on the hdd will be totally redundant and never used or updated but that doesn&#39;t matter it&#39;s only 58MB you can delete it if you want but then your file system will be on sda1 not sda2 so you will need to change the refs in fstab and cmdline.txt, it really isn&#39;t necessary but if you want I can walk you through that later</p>
<p>Yes you can use win32diskimager&nbsp;to put the image on the hdd exactly as you would the sd card.</p>
<p>&quot;console=ttyAMA0,115200&quot; is removed from the comline,txt to free up the serial port, essential if you&nbsp;were wanting to use the serial port eg for a rfm2pi but as you&#39;re not you can leave it in if you prefer, if you have no preference I would stick with the guide as future support will probably assume the serial port is available as that is the OEM norm.&nbsp;The important part is to change /dev/mmcblk0p2&nbsp;to /dev/sda2.</p>
<p>Yes those are 2 seperate&nbsp;commands that have some how ended up on the same line during a cut and paste, sorry about that</p>
<blockquote><p><strong>sudo tune2fs -U random -L hdd&nbsp; /dev/</strong><strong>sda2</strong></p>
</blockquote>
<p>will name the partition &quot;hdd&quot; and&nbsp;give it&nbsp;its own UUID&nbsp;(Universally <strong>Unique</strong> ID) quite amusing&nbsp;name really since almost everyone uses the Raspbian&nbsp;OS image and then other images get made from that passing the same UUID&nbsp;from image to image so half the planet are using the same <strong>unique</strong>&nbsp;id.&nbsp;</p>
<blockquote><p><strong>sudo mkdir /media/hdd</strong></p>
<p><strong>sudo mount /dev/sda2 /media/hdd</strong></p>
</blockquote>
<p>just creates a directory and mounts the hdd as part of the sd cards filesytem so you can edit the fstab etc.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27757"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Mon, 16/02/2015 - 00:32.</div>
    <div class="content">
     <p>OK,</p>
<p>understood all !</p>
<p>Now only the &quot;problem&quot; with the resize of the sda2-partition.</p>
<p>I tried out of Pi with &quot;MiniTool Partition Wizard&quot; on my W7-PC.<br />
I see there is ~16GB space after the 4GB hdd(EXT4)-partition. But I can not resize it. Looks like this is blocked.</p>
<p>&nbsp;</p>
<p>I do not dare to install emoncms before i resize the hdd!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27758"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/02/2015 - 00:37.</div>
    <div class="content">
     <p>Ahh you&#39;ve edited since I started writing.</p>
<p>No you can do everything from the hdd once you have booted to it. you can use fdisk&nbsp;to increase the size of the partition and use &quot;sudo resize2fs&quot; to expand the file system into the larger partition.&nbsp;</p>
<p>bigger isn&#39;t always better so don&#39;t rush into expanding the partition as big&nbsp;as&nbsp;you can. if you keep it small its easier to create a restore image and if you decide to add other partitions for other things you&#39;ll have room to do so, eg a partition to store just data or a partition to store backup images etc. you can always make the partition larger if you need more room but if the data and files get spread out across the partition it may not be easy to reduce to fit in something else.</p>
<p>I would recommend getting rid of &quot;wolfram-engine&quot; and &quot;sonic-pi&quot; IF you are not going to use them, this will free up 520MB which means you can add emoncms&nbsp;and all it&#39;s associated software and end up with a smaller image than you started.</p>
<p>If you create a data partition on the hdd and mount it as ~/emonData&nbsp;and use my script to instal emoncms all the data files including mySQL will be on that partition, which means you can easily back-up data and image separately and more importantly if you decide to reinstall the OS and emoncms etc down the line&nbsp;all your dashboards and data etc will be ther&nbsp;for the new emoncms to find.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27759"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/02/2015 - 00:54.</div>
    <div class="content">
     <p>If I were you I would add a data partition half way along the hdd, use fdisk and start the new partition 1/2 way but only make it a couple of gigs. this way you have left room to increase sda2(the filesystem) if needed later and you also have room to increase the new sda3&nbsp; (data)&nbsp;and/or add another partition later.</p>
<p>EDIT - These are just my preferences. there isn&#39;t really a single right way, so don&#39;t feel you must do it this way, if you prefer one big partition that will work equally well it&#39;s just about options really and once you allocate all the space it&#39;s gone (well, it&#39;s not so easy to get back at least)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27760"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Mon, 16/02/2015 - 00:56.</div>
    <div class="content">
     <p>OK</p>
<p>You mean like this (I have a 20GB HDD):</p>
<p>0 - 56MB: boot (sda1)<br />
56-4GB: hdd (sda2)<br />
4GB...10GB: space to extend sda2<br />
10GB - 12GB: data (sda3)<br />
12GB...20GB; space for extend data, or make something different.</p>
<p><u>I would recommend getting rid of &quot;wolfram-engine&quot; and &quot;sonic-pi&quot; </u></p>
<p>Found this:</p>
<p>- sudo apt-get purge minecraft-pi&nbsp;wolfram-engine sonic-pi scratch&nbsp;-y<br />
- sudo apt-get autoremove -y</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27761"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/02/2015 - 01:02.</div>
    <div class="content">
     <p>Spot on!</p>
<p>However fdisk isn&#39;t the friendliest of utilities, its easy to use in that its logical and clear BUt it doesn&#39;t talk MB&#39;s and GB&#39;s to be prepared to do some maths, That&#39;s why I used the terms I did the start point is half way between the start and the end regardless of unit of measure and about 2 gig is about half of about 4gig when you print the table and can see the size of sda2 and the total size of sda you can enter the &quot;clusters&quot;. there is a proper calc&nbsp;I have it here some where but it&#39;s not that important.</p>
<p>and yes apt-get purge should clear all refs so not sure about the second line.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27762"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Mon, 16/02/2015 - 01:29.</div>
    <div class="content">
     <p>Hi,</p>
<p>have ~590 MB more free space.<br />
Now your script is running.</p>
<p>Shit:<br />
<u>If you create a data partition on the hdd and mount it as ~/emonData&nbsp;and use my script to instal emoncms all the data files including mySQL will be on that partitio</u>n</p>
<p>Didn&#39;t read your post properly. Forgot to make the data partition before starting the script.</p>
<p>--&gt; Start from beginning (Raspian-Image on HDD) or only make the data-partition and restart your script?</p>
<p>EDIT:</p>
<p>script done:<br />
--&gt; One Error:<br />
ERROR: problem running ufw-init</p>
<p>But it doesn&#39;t look bad.<br />
With <a href="http://"raspi-ip"/emoncms/" title="http://&quot;Raspi-ip&quot;/emoncms/">http://&quot;Raspi-ip&quot;/emoncms/</a> i get the login screen</p>
<p>....going to bed now. 2:30 AM</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27764"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/02/2015 - 01:46.</div>
    <div class="content">
     <p>You don&#39;t need to start again, once it has installed and it&#39;s working you can create the data partition and temporarily mount it as some thing else eg &quot;tempData&quot; copy everything in emonData to tempData.&nbsp;unmount&nbsp;tempData and remount it as emonData.</p>
<p>​Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27773"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Mon, 16/02/2015 - 14:38.</div>
    <div class="content">
     <p>Ok,</p>
<p>only one question to the place of the folder:</p>
<p>After installing emoncms with your script, I got the folder:&nbsp;<strong> /home/pi/emonData</strong>. In this there is<br />
- mysql<br />
- phpfina<br />
- phpfiwa<br />
- phptimeseries</p>
<p>Then I made a new partition, formatted with ext4, and mounted in a parallel-folder</p>
<p><strong>pi@raspberrypi ~ $ ls<br />
dev-emoncms&nbsp; emonData&nbsp; python_games<br />
pi@raspberrypi ~ $ sudo mkdir /home/pi/tempData<br />
pi@raspberrypi ~ $ ls<br />
dev-emoncms&nbsp; emonData&nbsp; python_games&nbsp; tempData<br />
pi@raspberrypi ~ $ sudo mount /dev/sda3 /home/pi/tempData</strong></p>
<p>Is this OK so far?</p>
<p>And another question?<br />
Where is the emoncms-software?<br />
On windows I am used to find it in the wamp-folder: <strong>C:\wamp\www\emoncms</strong><br />
the mysql-folder is not accessible<br />
<strong>pi@raspberrypi ~/emonData $ cd mysql<br />
-bash: cd: mysql: Permission denied</strong></p>
<p>And on copying with WinSCP I can not copy the mysql-folder too. (I wanted to copy the emonData to my lokal disk, and copy back to tempData, as you described)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27775"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/02/2015 - 15:36.</div>
    <div class="content">
     <p>pi doesn&#39;t have access to mySQL&nbsp;you would&nbsp;need to use sudo.</p>
<p>make a not of the permissions&nbsp;for emonData (incase something get altered it will be easy to compare)</p>
<p>&nbsp; &nbsp;<strong> ls -la ~/emonData</strong></p>
<p>make a copy of the data files (just in case)</p>
<p><span class="rangySelectionBoundary" id="selectionBoundary_1424100375371_6350463582202792" style="display:none; line-height:0">﻿</span><strong>&nbsp; &nbsp; sudo</strong><strong> cp ~emonData ~/emonBAK</strong></p>
<p>​move the data files to the partition</p>
<p><strong>&nbsp; &nbsp;&nbsp;sudo&nbsp;mv ~/emonData&nbsp;~/emonTemp</strong></p>
<p>​unmount&nbsp;emonTemp</p>
<p><strong>&nbsp; &nbsp; sudo umount&nbsp;~/emonTemp</strong></p>
<p>​remount as emonData&nbsp;and check&nbsp;permissions again</p>
<p><strong>​ &nbsp; &nbsp;sudo&nbsp;mkdir&nbsp;~/emonData</strong></p>
<p><strong>&nbsp; &nbsp; sudo mount /dev/sda3&nbsp;~/emonData</strong></p>
<p><strong>​ &nbsp; &nbsp;ls -la&nbsp;~/emonData</strong></p>
<p>you should have the same output as before, if you do try emoncms&nbsp;and&nbsp;​if all is well delete both ~/emonTemp and ~/emonBAK</p>
<p>​Paul</p>
<p>​</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27777"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Mon, 16/02/2015 - 17:28.</div>
    <div class="content">
     <p>﻿Hi,</p>
<p>thx. tried and..... have some notes:</p>
<p><strong>sudo cp ~emonData ~/emonBAK</strong>&nbsp; -&gt; <strong>sudo cp -r ~/emonData ~/emonBAK</strong>﻿&nbsp; (Only this worked for me)</p>
<p>I mounted /dev/sda3 to <strong>/home/pi/tempData.</strong> Guess its the same as: <strong>~/tempData</strong><br />
With this: <strong>sudo mv ~/emonData ~/tempData</strong> I only get a subfolder: <strong>~/tempData/emonData</strong></p>
<p>To get to my aim,I copied the subfolders from emonData seperately:<br />
<strong>sudo mv ~/emonData/mysql ~/tempData/mysql</strong><br />
...<br />
...</p>
<p>The rest looks like it worked.<br />
Checking permission rights:</p>
<p><strong>pi@raspberrypi ~ $ ls -la ~/emonData<br />
total 40<br />
drwxr-xr-x 7 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; 4096 Feb 16 17:20 .<br />
drwxr-xr-x 7 pi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pi&nbsp;&nbsp;&nbsp;&nbsp; 4096 Feb 16 17:22 ..<br />
drwx------ 2 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp; 16384 Feb 16 14:27 lost+found<br />
drwx------ 5 mysql&nbsp;&nbsp;&nbsp; mysql&nbsp; 4096 Feb 16 14:22 mysql<br />
drwxr-xr-x 2 www-data root&nbsp;&nbsp; 4096 Feb 16 01:19 phpfina<br />
drwxr-xr-x 2 www-data root&nbsp;&nbsp; 4096 Feb 16 01:19 phpfiwa<br />
drwxr-xr-x 2 www-data root&nbsp;&nbsp; 4096 Feb 16 01:19 phptimeseries</strong></p>
<p>the same (when we talk about the &#39;drwxr-xr-x&#39;) What does the number behind this coloumn tell us?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27779"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/02/2015 - 17:26.</div>
    <div class="content">
     <p><em>&quot;sudo cp ~emonData ~/emonBAK&nbsp; -&gt;&nbsp;sudo cp -r ~/emonData ~/emonBAK&nbsp; (Only this worked for me)&quot;</em></p>
<p>okay, thats because the emonBAK folder didn&#39;t&nbsp;exist&nbsp;</p>
<p><em>&quot;With this:&nbsp;sudo mv ~/emonData ~/tempData&nbsp;I only get a subfolder:&nbsp;~/tempData/emonData&quot;</em></p>
<p>try&nbsp;<strong>sudo mv ~/emonData/* ~/tempData&nbsp;</strong>adding<strong>&nbsp;</strong>the &quot; /* &quot; should just move the contents not the folder</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27781"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Mon, 16/02/2015 - 18:23.</div>
    <div class="content">
     <p><strong>sudo mount /dev/sda3&nbsp;~/emonData</strong></p>
<p>This is only temporarely. After reboot the /emonData-directory is empty. I have to mount again, to see mysql and the php*</p>
<p>Actually now, I get a database-connection error after reboot. logical</p>
<p>EDIT:</p>
<p>Added this in /etc/fstab:<br />
<strong>#Datenpartition emoncms<br />
/dev/sda3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /home/pi/emonData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ext4&nbsp;&nbsp;&nbsp; defaults&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</strong></p>
<p>&nbsp;</p>
<p>And I found the emoncms-stuff :-)</p>
</p>
<p>Its in /var/www/emoncms....<br />
Is it the same range, as i am used from my emoncms 8.4.0 on Windows?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27788"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 16/02/2015 - 18:23.</div>
    <div class="content">
     <p>Yes if its all working we need to add a line to the fstab to automatically mount emonData</p>
<p>sudo nano&nbsp;/etc/fstab</p>
<p>and insert a line after the &quot;/dev/sda2&quot; line&nbsp;</p>
<p><strong>/dev/sda3&nbsp; &nbsp; &nbsp;/home/pi/emonData&nbsp; &nbsp; ext4&nbsp; &nbsp; &nbsp;defaults,&nbsp; &nbsp; 0&nbsp; &nbsp;&nbsp;2</strong></p>
<p>if the numbers you are asking about is the 7 7 2 5 2 2 2 I can&#39;t say I know off the top off my head</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27811"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Tue, 17/02/2015 - 10:25.</div>
    <div class="content">
     <p>Hi,</p>
<p>sorry for the last question. If I would sometimes use my brain earlier.....</p>
<p>All in all, I now have a emoncms-working Pi.<br />
Will test it the next days, how it is working.</p>
<p>If I could force the apikeys, it would be an easy change 1:1 for me. But because of different keys, i have to change the program of my data-sending arduinos.</p>
<p>Thx for your great support.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27828"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 17/02/2015 - 17:23.</div>
    <div class="content">
     <p>If you install phpmyadmin you can edit the sql tables the apikeys are found in the user table.</p>
<p>Or if you already have data tables you could create your own &quot;emonData<strong>/</strong><strong>olddata</strong>&quot; folder note the structure and permissions and carry over your previous date.</p>
<p>The only thing that ties emoncms to the data is the emoncms&nbsp;password and user in settings.php.</p>
<p>eg if you were to comment out the username and password in settings.php and add you old ones, plus add the&nbsp;new &quot;/olddata&quot;&nbsp;folder level (inside emonData)&nbsp;to all data engine paths in settings.php&nbsp;you could have all your old data&nbsp;too.</p>
<p>always comment and add new lines so you can undo if things don&#39;t work out and/or put all the existing stuff from emonData in emonData<strong>/newfiles</strong></p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27832"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="brutzler&#039;s picture" title="brutzler&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/6717.html" title="View user profile.">brutzler</a> on Tue, 17/02/2015 - 18:26.</div>
    <div class="content">
     <p>&gt;&gt; If you install phpmyadmin...</p>
<p>This tool I was missing ;-)</p>
<p>On my windows installation with wamp, I sometimes used this to have a backdooor to my sql-table.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27916"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Thu, 19/02/2015 - 02:03.</div>
    <div class="content">
     <p><em>Found this:</em></p>
<p><em>- sudo apt-get purge minecraft-pi&nbsp;wolfram-engine sonic-pi scratch&nbsp;-y<br />
- sudo apt-get autoremove -y</em></p>
<p>&nbsp;</p>
<p><em>apt-get purge should clear all refs so not sure about the second line.</em></p>
<p>&nbsp;</p>
<p>Not that it&#39;s going to make a big difference in disk space, but after zapping wolfram-engine and sonic-pi,&nbsp;autoremove gets rid of 10 more files. (a total of 19.5MB)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27924"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 19/02/2015 - 11:43.</div>
    <div class="content">
     <p>I looked into this after autoremove was mentioned and did some tests too.It does indeed make a difference, as does apt-get clean as temporary files used during installation and updates etc don&#39;t get automatically deleted either.</p>
<p>The latest Raspbian OS image (2015-01-31) is 2.4G on a 2.9G partition and has 393M&nbsp;free</p>
<p>(not entirely sure where the other 100+ MB is though, I assume the GiB v GB&nbsp;and MiB v MB&nbsp;etc)</p>
<p>Purging&nbsp;wolfram-engine sonic-pi&nbsp;minecraft-pi&nbsp;and&nbsp;scratch deletes 558M&nbsp;making 951M free</p>
<p>using auto-remove to delete packages now no longer needed gave 23M making 974M&nbsp;free</p>
<p>then using apt-get clean freed up a further 35M giving us a total of 1009M&nbsp;free</p>
<p>That is 616M&nbsp;reclaimed.&nbsp;</p>
<p>However fully updating and upgrading the OS etc added&nbsp;120MB&nbsp;making&nbsp;&nbsp;889M free</p>
<p>But using&nbsp;apt-get clean again removed&nbsp;a bulky 116MB&nbsp;returning the total to 1005M free</p>
<p>Still 612MB smaller than we started with.</p>
<p>Adding a full emoncms with all dependencies added 238MB&nbsp;making 767MB free</p>
<p>And adding emonHub&nbsp;added a measly&nbsp;2MB so we still have 765MB free</p>
<p>The final figures were 2G of a 2.9G partition used with 753MB&nbsp;free (~150MB&nbsp;now missing)</p>
<p>The main thing is the image is now 360MB smaller after installing emonhub and emoncms. The other great thing is if you are running emonCMS&nbsp;low-write&nbsp;on a 4G card the full OS and emon&nbsp;stuff &nbsp;only uses half and gives you over 600MB&nbsp;additional storage (which is probably about a 50% boost)</p>
<p>I also believe if the resulting image was subjected to resize2fs -M (has to be unmounted) that image could be squashed and the partition made smaller to facilitate a smaller ZIP for&nbsp;download, maybe 800MB or so.</p>
<p>Paul</p>
<p>PS - I recorded these values&nbsp;for my own curiosity&nbsp;whilst doing a fresh&nbsp;install that had to be done anyway,</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27969"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: migrate emoncms from windows to raspberry</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Fri, 20/02/2015 - 04:00.</div>
    <div class="content">
     <p>Thanks for the additional info about running apt-get clean, and zapping scratch as well.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10125"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-lGNjZ6N_umu0HkvpVqBMzhsC8SAlzLxf23fo2dlvzLA" value="form-lGNjZ6N_umu0HkvpVqBMzhsC8SAlzLxf23fo2dlvzLA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
