<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11795 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:12:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emonbase Problems | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emonbase Problems</h3>
        <span class="submitted">Submitted by <a href="../user/9074.html" title="View user profile.">mcudogs</a> on Sun, 13/12/2015 - 09:42</span>
        <div class="content"><p>I am having problems with my Emonbase / Emontx Shield system. The system hardware&nbsp;is as follows</p>
<p>EmonBase - Raspberry Pi based web-connected base-station</p>
<p>(RaspberryPi RF add-on: RFM69Pi - 433Mhz,</p>
<p>Raspberry Pi: Raspberry Pi 2, Pre-build SD Card: Pre-Loaded microSD Card,</p>
<p>Enclosure: Raspberry Pi Case - Black,</p>
<p>Network Adapter: USB WIFI Edimax EW-7811UN)</p>
<p>EmonTx Arduino Shield SMT running Shield_CT1234_Voltage sketch on Arduino Uno<br />
(Frequency: 433Mhz (Worldwide), Arduino Shield Headers: Standard Headers)</p>
<p>The Emonhub software starts up ok and logs the data from the Emontx Shield ok for a minute or so then fails. The Emonhub log following seems to show errors from the RFM69pi then says the RFM2Pi thread is dead.</p>
<p>Does anyone else have these problems?</p>
<p>2015-12-13 09:16:49,880 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RSSI : -27<br />
2015-12-13 09:16:49,881 INFO&nbsp;&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Publishing: emonhub/rx/6/values 0,0,0,0,202.87<br />
2015-12-13 09:16:49,882 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 6 adding frame to buffer =&gt; [1449998209, 6, 0, 0, 0, 0, 202.87, -27]<br />
2015-12-13 09:16:49,883 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 6 Sent to channel&#39; : ToEmonCMS<br />
2015-12-13 09:16:52,806 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 7 NEW FRAME : OK 6 0 0 0 0 0 0 0 0 89 79 (-27)<br />
2015-12-13 09:16:52,808 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 7 Timestamp : 1449998212.81<br />
2015-12-13 09:16:52,809 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 7 From Node : 6<br />
2015-12-13 09:16:52,810 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp;&nbsp; Values : [0, 0, 0, 0, 203.13]<br />
2015-12-13 09:16:52,811 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RSSI : -27<br />
2015-12-13 09:16:52,812 INFO&nbsp;&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Publishing: emonhub/rx/6/values 0,0,0,0,203.13<br />
2015-12-13 09:16:52,814 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 7 adding frame to buffer =&gt; [1449998212, 6, 0, 0, 0, 0, 203.13, -27]<br />
2015-12-13 09:16:52,815 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 7 Sent to channel&#39; : ToEmonCMS<br />
2015-12-13 09:16:55,738 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 3� 215 136 120 195 116 207 144 175 193 95 61 176 249 48 245 1�N�&amp;I������Bj���Jj)� ? 159 34 241 217 116 36 244 74 238 62 11 90 24 41 247 193 209 �)&sup2;������ʒJj)� ? 6 0 0 0 0 0�0 0 0 34 79 (-�9)<br />
2015-12-13 09:17:01,696 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 10 NEW FRAME : OK 6 0 0 0 0 0 0 0 0 115 79 (-27)<br />
2015-12-13 09:17:01,698 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 10 Timestamp : 1449998221.7<br />
2015-12-13 09:17:01,700 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 10 From Node : 6<br />
2015-12-13 09:17:01,700 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp; Values : [0, 0, 0, 0, 203.39000000000001]<br />
2015-12-13 09:17:01,701 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RSSI : -27<br />
2015-12-13 09:17:01,703 INFO&nbsp;&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Publishing: emonhub/rx/6/values 0,0,0,0,203.39<br />
2015-12-13 09:17:01,707 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 10 adding frame to buffer =&gt; [1449998221, 6, 0, 0, 0, 0, 203.39000000000001, -27]<br />
2015-12-13 09:17:01,708 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; 10 Sent to channel&#39; : ToEmonCMS<br />
2015-12-13 09:17:02,235 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 154 117 91 198 217 76 177 207 224 38 35 5 148 66 98 64 28 45 71 196 56 (-100)<br />
2015-12-13 09:17:04,552 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 6 0 0 0 0 0 0 0 0 79 94 (-2�)<br />
2015-12-13 09:17:07,576 DEBUG&nbsp;&nbsp;&nbsp; RFM2Pi&nbsp;&nbsp;&nbsp;&nbsp; Discarding RX frame &#39;unreliable content&#39;? 0 19 183 �8 207 92 34 237 17� 148 199���LL&amp;�SI����������ʂ�@166 (-100) �<br />
OK 6 0 0 0 0 0 0 0 0 235 78 (-28)<br />
2015-12-13 09:17:10,612 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2015-12-13 09:17:10,825 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2015-12-13 09:17:11,037 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2015-12-13 09:17:11,251 WARNING&nbsp; MainThread RFM2Pi thread is dead<br />
2015-12-13 09:17:11,464 WARNING&nbsp; MainThread RFM2Pi thread is dead</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11807.html" class="topic-previous" title="Go to previous forum topic">‹ emonGLCD Display Problem</a>
              <a href="11806.html" class="topic-next" title="Go to next forum topic">emonTX Connectivity ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-36972"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 14/12/2015 - 02:29.</div>
    <div class="content">
     <p>Good work getting&nbsp;uip and running. &nbsp;</p>
<p>What sketch are you running on your emonTx shield? It looks like a decoder error. The default emonhub.conf is expecting 5 x integers &quot;power1, power2, power3, power4, Vrms&quot;. You might have to adjust the .conf file (edit via emonHub tab in local Emoncms to match what your transmitting.&nbsp;</p>
<p>&nbsp;</p>
<p>[[6]]<br />
&nbsp; &nbsp; nodename = emonTxShield<br />
&nbsp; &nbsp; firmware =emonTxShield<br />
&nbsp; &nbsp; hardware = emonTxShield<br />
&nbsp; &nbsp; [[[rx]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp;names = power1, power2, power3, power4, Vrms<br />
&nbsp; &nbsp; &nbsp; &nbsp;datacode = h<br />
&nbsp; &nbsp; &nbsp; &nbsp;scales = 1,1,1,1,0.01<br />
&nbsp; &nbsp; &nbsp; &nbsp;units =W,W,W,W,V</p>
<p>Default .conf file:</p>
<p><a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/conf/emonhub.conf">https://github.com/openenergymonitor/emonhub/blob/emon-pi/conf/emonhub.conf</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36977"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9074.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mcudogs&#039;s picture" title="mcudogs&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/9074.html" title="View user profile.">mcudogs</a> on Mon, 14/12/2015 - 09:00.</div>
    <div class="content">
     <p>Hi,</p>
<p>I&#39;m running the Shield_CT1234_Voltage sketch on Arduino Uno. I edited the .conf file to match the example but it didn&#39;t fix the problem,</p>
<p>I logged into the emonpi using putty and found the following exception when the thread died. Any ideas?</p>
<p>&nbsp;</p>
<p>pi@emonpi ~ $ Exception in thread RFM2Pi:<br />
Traceback (most recent call last):<br />
&nbsp; File &quot;/usr/lib/python2.7/threading.py&quot;, line 552, in __bootstrap_inner<br />
&nbsp;&nbsp;&nbsp; self.run()<br />
&nbsp; File &quot;/home/pi/emonhub/src/interfacers/emonhub_interfacer.py&quot;, line 73, in run<br />
&nbsp;&nbsp;&nbsp; rxc = self.read()<br />
&nbsp; File &quot;/home/pi/emonhub/src/interfacers/EmonHubJeeInterfacer.py&quot;, line 127, in read<br />
&nbsp;&nbsp;&nbsp; c.rssi = int(f[-1][1:-1])<br />
ValueError: invalid literal for int() with base 10: &#39;-\xb33&#39;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-36995"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 14/12/2015 - 16:50.</div>
    <div class="content">
     <p>It looks like you are getting some rogue characters slipping in from somewhere. The payloads should only consist of numeric values beyond a leading &quot;?&quot; or &quot;OK&quot; and the trailing rssi&nbsp;in&nbsp;parenthesis. The traceback confirms the &quot;-\xb33&quot; is not an integer and causes the the thread to crash as the rssi should be an integer and not contain &quot;�&quot;. emonhub could be altered to handle the exception better but the fact remains the serial data is being corrupted somehow.&nbsp;</p>
<p>It looks like it only effects the invalid packets (but this is quite a small amount of log so may not be the case) ifthat is the case the issue may be sidestepped by setting&nbsp;[[RFM2Pi]] [[[runtimesettings]]] quietmode = true in emonhub.conf, that will instuct the rfm69pi&nbsp;to not pass the invalid packets, again not really a fix.</p>
<p>To fix this you will first need to know if its coming in via the serial port, try stopping emonhub&nbsp;&quot; sudo service emonhub stop&quot;&nbsp;and using a serial console like &quot;minicom&quot; to see the raw serial data, from what you&#39;ve said it shouldn&#39;t take long to see whether there are any non-numerical values being passed outside the range of 0 to 255, or odd&nbsp;symbols etc</p>
<p>the rfm69pi to emonhub connection must have exclusive use of the serial port and if anything else&nbsp;attempts to use the port then you will get un predictable results. I sort of half expect an outside influence&nbsp;as there is no reason for the rfm69pi to pass erratic data and yet&nbsp;emonhub&nbsp;logs the corrupt data almost immediately upon receipt.</p>
<p>So can you test does it do it in quiet mode? Can you see anything in minicom? (you can restart emonhub again with &quot; sudo service&nbsp;emonhub start&quot; after testing) and also do you know what version firmware is running on the rfm69pi? or more importantly what baud it is running at?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37026"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9074.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mcudogs&#039;s picture" title="mcudogs&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/9074.html" title="View user profile.">mcudogs</a> on Tue, 15/12/2015 - 08:56.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>Thanks for your assistance, I set the quiet mode to true as follows, It looks like the bit rate is 38400. not sure how to see the firmware version.</p>
<p>
[interfacers]<br />
### This interfacer manages the RFM2Pi module<br />
[[RFM2Pi]]<br />
&nbsp;&nbsp;&nbsp; Type = EmonHubJeeInterfacer<br />
&nbsp;&nbsp;&nbsp; [[[init_settings]]]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; com_port = /dev/ttyAMA0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; com_baud = 38400<br />
&nbsp;&nbsp;&nbsp; [[[runtimesettings]]]<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pubchannels = ToEmonCMS,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subchannels = ToRFM12,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # datacode = B #(default:h)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # scale = 100 #(default:1)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; group = 210 #(default:210)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; frequency = 433 #(default:433)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; baseid = 5 #(emonPi default:5)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; quiet = true #(default:true)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; calibration = 230V #(UK/EU: 230V, US: 110V)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # interval = 300 #(default:0)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # nodeoffset = 32 #(default:0)</p>
<p>I also had a look at the minicom output with the emonhub stopped and this is data from minicom</p>
<p>OK 6 0 0 0 0 0 0 0 0 213 94 (-29)<br />
&nbsp;? 6 0 0 0 0 0 0 0 0 94 212 (-29)<br />
&nbsp;? 51 18&middot; 118 239 191 94 24&sup3; 201 164 163 29 208 143 165 63 220 128 222 196 190<br />
&nbsp;? 19 240 8 54 17 213 73 &middot;1 103 91 111 233 30 231 199 255 45 243 171&nbsp;250 253 (-<br />
&nbsp;? 128 142 215 254 181 &sup2;�L&curren;&amp;&brvbar;&amp;S)�&Acirc;�&Acirc;�&sup2;����&ordm;&Acirc;��&ordf;��&cent;���&Ecirc;ʪ&Ecirc;ʊ�������&Acirc;B<br />
&nbsp;? 46 13&middot; 26 14 67 232 223 95 232 120 95 234 176 20 167 26 210 9 61 223 114 (-9<br />
OK 6 0 0 0 0 0 0 0 0 2 95 (-29)<br />
OK 6 0 0 0 0 0 0 0 0 122 94 (-32) �<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ? 197 16 95 205 198 193 80 80 72 102 140 31<br />
OK 6 0 0 0 0 0 0 0 0 91 94 (-30)<br />
&nbsp;? 5 241 71 128 99 230 233 143 196 108 134 85 4 243 11 128 55 191 128 203 31 (-<br />
&nbsp;? 142ӊ�����&ordf;&cent;��&Acirc;����&ordm;&Ecirc;ʂ&ordf;&Ecirc;ʚ���&cent;&sup2;��&ordf;�����&Ecirc;ʊ�&sup2;&cent;&ordf;�&sup2;&ordm;��&Acirc;Bj���Jj�&Ecirc;ʚ&sup2;&Acirc;�&Acirc;&ordm;��Bj<br />
OK 6 0 0 0 0 0 0 0 0 237 94 (-29)<br />
&nbsp;? 59 27 28 15 65 25 251 80 98 230 197 185 231 199 30 40 54 175 236 131 251 (-1<br />
OK 6 0 0 0 0 0 0 0 0 205 94 (-28)<br />
&nbsp;</p>
<p>Could this be 433 MHz interference?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37027"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 15/12/2015 - 09:42.</div>
    <div class="content">
     <p>I&#39;m not able to say with absolute certainty that it&#39;s not RF interference, but I suspect not. I would expect anything not discarded or handled by the rfm69pi&nbsp;firmware to be numerical, anything else that is not a valid command and&nbsp;actioned&nbsp;will be&nbsp;garbage and cause the packet to be discarded.</p>
<p>If you send a question mark from&nbsp;minicom, the help text should be returned which will include the firmware version. Is this help text totally&nbsp;legible or contain rogue characters like the log above?</p>
<p>Another test could be to remove the rfm69pi and retest with minicom, there should be no data traffic with emonhub stopped and the rfm69pi removed as they need exclusive use. If there is any data appearing in minicom that would suggest something else is using the serial port and if that data is garbage as above, it may be using a different baud rate, so you could try some&nbsp;other baud rates to help identify the source by making the data legible.</p>
<p>If there is no other serial traffic, it may be well worth trying to (re)install firmware to the rfm69pi.</p>
<p>Another quick test from emonhub&nbsp;could be to set 868MHz&nbsp;in emonhub.conf since your rfm69pi is tuned for 433 it will almost certainly not receive anything unless it is really close and ~868Mhz. That should help determine if it&#39;s from the serial port or air-bourne noise perhaps.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37028"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9074.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mcudogs&#039;s picture" title="mcudogs&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/9074.html" title="View user profile.">mcudogs</a> on Tue, 15/12/2015 - 12:33.</div>
    <div class="content">
     <p>The help text is corrupted as well.I removed the rfm69pi and there was no data.</p>
<p>I tried setting to 868 mhz and I was still getting corrupt data. Went back to 433mhz and turned off the emontxshield and the corrupt data was still there.</p>
<p>I&#39;m not sure how to reinstall the firmware.</p>
<p>Don</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37029"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 15/12/2015 - 13:18.</div>
    <div class="content">
     <p>Do you recall the firmware version from when the help text printed?</p>
<p>The rfm69pi wiki has a <a href="http://wiki.openenergymonitor.org/index.php/RFM69Pi_V3">guide on how to install firmware</a>, I think most of the software is in place on the sdcard image you have&nbsp;although <a href="11747.html">the &quot;reset&quot; interval duration will need to be edited if you are using avrdude v6.1</a>, I&#39;m sorry I don&#39;t recall if it is 5.11 or 6.1 on that image.</p>
<p>You <em>should&nbsp;</em>be able to update the reset script by just doing a git pull from the avrdude-rpi folder or you could just edit the&nbsp;/usr/bin/autoreset file directly,</p>
<p>The hex file to upload would probably be&nbsp;<a href="https://github.com/openenergymonitor/RFM2Pi/blob/master/firmware/RFM69CW_RF_Demo_ATmega328/V13_RFM69CW_RF12_Demo_ATmega328.cpp.hex">https://github.com/openenergymonitor/RFM2Pi/blob/master/firmware/RFM69CW_RF_Demo_ATmega328/V13_RFM69CW_RF12_Demo_ATmega328.cpp.hex</a></p>
<p>There is also update routines on the &quot;emompi&quot; image and <a href="https://github.com/openenergymonitor/RFM2Pi/blob/master/update-RFM69">also one in the rfm69pi&nbsp;repo</a>&nbsp;I&#39;m not sure the included one does the rfm69pi or not and the repo one uploads&nbsp;an earlier compile of the firmware (but could be easily edited)</p>
<p>Sorry the instructions are a bit crazy but I&#39;m not 100% sure what bits&nbsp;you have exactly but I am 100% sure bits will have changed since and the wiki guide includes installing stuff you have already.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37077"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9074.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mcudogs&#039;s picture" title="mcudogs&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/9074.html" title="View user profile.">mcudogs</a> on Wed, 16/12/2015 - 10:41.</div>
    <div class="content">
     <p>I tried to update the firmware but got the following error</p>
<p>
pi@emonpi ~/RFM2Pi/firmware/RFM69CW_RF_Demo_ATmega328 $ avrdude -v -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 38400 -U flash:w:RFM69CW_RF12_Demo_ATmega328.cpp.hex<br />
avrdude-original: Version 5.11.1, compiled on May 23 2012 at 11:08:25<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Copyright (c) 2000-2005 Brian Dean, <a href="http://www.bdmicro.com/" title="http://www.bdmicro.com/">http://www.bdmicro.com/</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Copyright (c) 2007-2009 Joerg Wunsch<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System wide configuration file is &quot;/etc/avrdude.conf&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; User configuration file is &quot;/root/.avrduderc&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; User configuration file does not exist or is not a regular file, skipping<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Using Port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : /dev/ttyAMA0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Using Programmer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : arduino<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Overriding Baud Rate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 38400<br />
avrdude-original: Using autoreset DTR on GPIO Pin 7<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AVR Part&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : ATMEGA328P<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Chip Erase delay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 9000 us<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PAGEL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : PD7<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BS2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : PC2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RESET disposition&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : dedicated<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RETRY pulse&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : SCK<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; serial program mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : yes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parallel program mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : yes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Timeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 200<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StabDelay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 100<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CmdexeDelay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 25<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SyncLoops&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 32<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ByteDelay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PollIndex&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 3<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PollValue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0x53<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Memory Detail&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Block Poll&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Page&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Polled<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Memory Type Mode Delay Size&nbsp; Indx Paged&nbsp; Size&nbsp;&nbsp; Size #Pages MinW&nbsp; MaxW&nbsp;&nbsp; ReadBack<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; eeprom&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 65&nbsp;&nbsp;&nbsp; 20&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp; 0 no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 3600&nbsp; 3600 0xff 0xff<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flash&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 65&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp;&nbsp; 128&nbsp;&nbsp;&nbsp; 0 yes&nbsp;&nbsp;&nbsp;&nbsp; 32768&nbsp; 128&nbsp;&nbsp;&nbsp; 256&nbsp; 4500&nbsp; 4500 0xff 0xff<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lfuse&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0 no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 4500&nbsp; 4500 0x00 0x00<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hfuse&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0 no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 4500&nbsp; 4500 0x00 0x00<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; efuse&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0 no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 4500&nbsp; 4500 0x00 0x00<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0 no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 4500&nbsp; 4500 0x00 0x00<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; calibration&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0 no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0 0x00 0x00<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; signature&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0 no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0 0x00 0x00<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Programmer Type : Arduino<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Description&nbsp;&nbsp;&nbsp;&nbsp; : Arduino<br />
avrdude-original: stk500_getparm(): (a) protocol error, expect=0x14, resp=0x88<br />
avrdude-original: stk500_getparm(): (a) protocol error, expect=0x14, resp=0x88<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hardware Version: 1995538432<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Firmware Version: 344576.4<br />
avrdude-original: stk500_getparm(): (a) protocol error, expect=0x14, resp=0x90<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Vtarget&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0.3 V<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Varef&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0.3 V<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Oscillator&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0.334 Hz<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SCK period&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 142.2 us<br />
avrdude-original: AVR device initialized and ready to accept instructions<br />
Reading |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0% 0.00s<br />
avrdude-original: arduino_read_sig_bytes(): (a) protocol error, expect=0x10, resp=0xfc<br />
avrdude-original: error reading signature data for part &quot;ATMEGA328P&quot;, rc=-3<br />
avrdude-original: error reading signature data, rc=-1<br />
pi@emonpi ~/RFM2Pi/firmware/RFM69CW_RF_Demo_ATmega328 $<br />
&nbsp;</p>
<p>I don&#39;t think this system is user friendly at all.</p>
<p>Don</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37108"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 16/12/2015 - 18:47.</div>
    <div class="content">
     <p>Was emonhub stopped for the attempted firmware upload?</p>
<p>If there was no communication the error output would be quite different, it seems avrdude is able to speak to the rfm69pi&#39;s&nbsp;AVR but the responces arn&#39;t as expected, that maybe coincidence but it very much looks like something is still upsetting or interfering with the serial port.</p>
<p>Can you confirm you have no other hardware, wires or devices attached to the Pi&#39;s gpio and that you are using a &quot;stock&quot; shop bought SDcard and have not altered anything?</p>
<p>Can you get an ethernet cable to&nbsp;the Pi so the wifi dongle can be removed?</p>
<p>Did you purchase the power supply from the OEM shop? or do you know for sure it is stable/big enough?</p>
<p>Unfortunately&nbsp;yes,&nbsp;the system is a bit of a handful when things aren&#39;t going as intended.&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37119"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 17/12/2015 - 02:57.</div>
    <div class="content">
     <p>I think you need to stop emon hub before updating since it&#39;s using serial port:</p>
<p>sudo&nbsp;service emonhub stop&nbsp;</p>
<p>Updating RFM69Pi firmware should not be required. Firmware has not changed for a long time. It&#39;s very strange you getting corrupted serial data, could be hardware issue. Does the unit visible look OK and properly seated ont&nbsp;he the Pi?&nbsp; If you are still having issue drop an email to&nbsp;support@openenergymonitor.zendesk.com&nbsp;and we&#39;ll&nbsp;sort out a replacement.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37120"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9074.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mcudogs&#039;s picture" title="mcudogs&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonbase Problems</h3>

    <div class="submitted">Submitted by <a href="../user/9074.html" title="View user profile.">mcudogs</a> on Thu, 17/12/2015 - 03:07.</div>
    <div class="content">
     <p>Hi,<br />
I did stop emonhub service before doing the upgrade. It all looks good mounted ok etc. I will send an email.</p>
<p>Don</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11795"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-xjgDfZFatJVAFTyed-LKJnZqNQvZdHnyV75_YYxo5R0" value="form-xjgDfZFatJVAFTyed-LKJnZqNQvZdHnyV75_YYxo5R0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
