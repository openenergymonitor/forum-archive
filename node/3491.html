<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3491 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:57:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Newbie questions on emonTX shield V2 | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Newbie questions on emonTX shield V2</h3>
        <span class="submitted">Submitted by <a href="../user/5120.html" title="View user profile.">xerox1821</a> on Thu, 02/01/2014 - 17:29</span>
        <div class="content"><p>Dear all,</p>
<p>first of all I would like to wish you happy new year.</p>
<p>I found out about Openenergymonitor one month ago and since I have already spent some time playing around with various arduino sensors etc I wanted to create a power monitor for my apartment and I thought that this is the right equipment for me to start with.</p>
<p>So I ordered from OpenEnergyMonitor shop the&nbsp;<strong>emonTX shield V2</strong>&nbsp;(no RF) to start with. I got also 3 CT clips and the AC-AC euro adapter for the voltage.</p>
<p>I finished with the Shield soldering and I put it on an Arduino Uno to give it a try.</p>
<p>I used the default sketches from github for the TX shield.</p>
<p>First test with the Shield_CT1234_3Phase_Voltage sketch, with the AC AC adapter and the 3 CTs&nbsp;connected to the shield with no connection to any device cable to get a measurement.</p>
<p>The first issue I have is that always the first measurement I get when the sketch is running it shows a very high voltage value:</p>
<p>emonTX Shield CT1234 Voltage 3 Phase example<br />
	OpenEnergyMonitor.org<br />
	Node: 10 Freq: 868Mhz Network: 210<br />
	Total Samples: 283 Power Samples: 269 Time: 233 Crossings: 22</p>
<p>Voltage: <strong>387.80</strong><br />
	Current 1: 91.28 Power 1: 30659.53 VA 1: 35397.49 PF 1: 0.87<br />
	Current 2: 90.80 Power 2: 31936.00 VA 2: 35210.78 PF 2: 0.91<br />
	Current 3: 91.09 Power 3: 33184.83 VA 3: 35324.41 PF 3: 0.94</p>
<p>the next measurements are similar to the below:</p>
<p>Total Samples: 285 Power Samples: 270 Time: 235 Crossings: 22</p>
<p>Voltage: 194.05</p>
<p>Current 1: 0.15 Power 1: -1.08 VA 1: 28.86 PF 1: -0.04<br />
	Current 2: 0.11 Power 2: -0.34 VA 2: 20.79 PF 2: -0.02<br />
	Current 3: 0.10 Power 3: 0.77 VA 3: 19.04 PF 3: 0.04</p>
<p>or</p>
<p>Total Samples: 284 Power Samples: 269 Time: 233 Crossings: 22</p>
<p>Voltage: 194.16<br />
	Current 1: 0.15 Power 1: -4.46 VA 1: 29.27 PF 1: -0.15<br />
	Current 2: 0.10 Power 2: -0.74 VA 2: 20.02 PF 2: -0.04<br />
	Current 3: 0.10 Power 3: 0.77 VA 3: 20.37 PF 3: 0.04</p>
<p>&nbsp;</p>
<p>but then again, when it finishes with the measurements and start over again, it gives another high voltage value:</p>
<p>emonTX Shield CT1234 Voltage 3 Phase example<br />
	OpenEnergyMonitor.org<br />
	Node: 10 Freq: 868Mhz Network: 210<br />
	Total Samples: 284 Power Samples: 270 Time: 233 Crossings: 22</p>
<p>Voltage: <strong>400.65</strong><br />
	Current 1: 91.64 Power 1: 32124.77 VA 1: 36714.03 PF 1: 0.87<br />
	Current 2: 91.16 Power 2: 32438.34 VA 2: 36521.48 PF 2: 0.89<br />
	Current 3: 91.46 Power 3: 33008.75 VA 3: 36642.04 PF 3: 0.90</p>
<p>I commented out all other readings and left only the Voltage and it seems that for some reason always the first reading gives a high value around 500 and then it smoothly&nbsp;goes down to aprox. 200 and again the same.</p>
<p>What might be the reason for this? Any ideas?</p>
<p>&nbsp;</p>
<p>Without changing anything on the setup, I run the&nbsp;EmonTx Shield 4 x CT example sketch, and getting below values:</p>
<p>emonTX Shield CT123 example<br />
	OpenEnergyMonitor.org<br />
	Node: 10 Freq: 433Mhz Network: 210<br />
	10583 10525 10553<br />
	31 34 39<br />
	24 23 27<br />
	22 39 24<br />
	22 40 25<br />
	21 41 24<br />
	21 38 23<br />
	23 41 25<br />
	21 41 26<br />
	22 41 25<br />
	22 40 25<br />
	21 41 25<br />
	22 39 24<br />
	21 40 25</p>
<p>Is this normal to have such values with the CTs&nbsp;just plugged into the shield?</p>
<p>&nbsp;</p>
<p>I have a 2500 W heating device (atlantic thermo heater) and tried to test with the TC1 attached to the power cable when it is on heating. The readings on TC1 are almost the same as before.&nbsp;</p>
<p>By reading some posts around the forum I read somewhere to test with the power cable to pass 2 times through the TC.</p>
<p>I tried this and the readings I get now are :</p>
<p>5 40 25<br />
	47 42 25<br />
	48 41 25<br />
	44 42 26<br />
	47 41 26<br />
	47 40 22<br />
	46 41 26<br />
	45 41 24</p>
<p>I would expect a bigger figure since without any power cable attached on the TC1, the reading is aprox. 20 and the difference is around 25.</p>
<p>&nbsp;</p>
<p>i would like to thank you in advance for any help on these.</p>
<p>And something else I would like to ask, can you please confirm if pin 8 or some other pin on the TX shield is not used by the shield and I can use it with the ARduino to put another sensor I have at the same time?</p>
<p>Thanks and Happy new year again !!!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3521.html" class="topic-previous" title="Go to previous forum topic">‹ (SOLVED) Problem updating Emoncms on Pi with HDD</a>
              <a href="3509.html" class="topic-next" title="Go to next forum topic">Forum - posting ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-17203"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Thu, 02/01/2014 - 17:46.</div>
    <div class="content">
     <p>John, it may be worth running the first few sketches on my <a href="1757.html">Summary Page</a>.&nbsp; They will show you how your hardware is working.&nbsp; If you loop (one core of) the supply cable twice around your CT, the current values should indeed double.&nbsp; <a href="https://learn.openenergymonitor.org?redirect=mk2/build">This section</a> of my PV Diversion article may be helpful too.</p>
<p>If using the emonTx Shield, you may need to change some of the pin numbers.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17215"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 03/01/2014 - 04:21.</div>
    <div class="content">
     <p><em>The first issue I have is that always the first measurement I get when the sketch is running it shows a very high voltage value:</em></p>
<p>This is because the software high pass filters have not had time to settle. If you wish, you can inhibit the output in the same way that RF transmission is inhibited while the filters settle.</p>
<p><em>when it finishes with the measurements and start over again, it gives another high voltage value</em></p>
<p>It should not do that. I&#39;ll take a look at the sketch later.</p>
<p><em>Is this normal to have such values with the CTs just plugged into the shield?</em></p>
<p>Unfortunately, yes. It is due to noise picked up by the ADC input, we think from the processor&#39;s own digital circuits.</p>
<p>I can&#39;t check the calibration without knowing what your system voltage is, and which c.t&#39;s you have used. When you say &quot;the TC1 attached to the power cable&quot; - how? Are you passing the whole 3-core cable through the c.t? If so, I would expect zero output. As calypso_rae says, only one core - either line or neutral - should pass through the c.t.</p>
<p>I will check on pin 8 later, however you can find a set of circuit diagrams on Solderpad - details are on the Shield page</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17218"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5120.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="xerox1821&#039;s picture" title="xerox1821&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/5120.html" title="View user profile.">xerox1821</a> on Fri, 03/01/2014 - 09:16.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>thanks for the prompt reply.&nbsp;</p>
<p>Regarding your first comment: &quot;If you wish, you can inhibit the output in the same way that RF transmission is inhibited while the filters settle.&quot; I am not sure what exactly to do here.</p>
<p>What I did as soon as I saw this first high number, I put more time for the filters to settle (10000 instead of 5000), but no difference.</p>
<p>The CTs I have are these sold by OpenEnergyMonitor&nbsp;(purchased from OpenEnergyMonitor).</p>
<p>You are right. I am embarrassed to say that I did this wrong connection and it is true that there was no change to the output values (with the same noise) &nbsp; ;-)</p>
<p>&nbsp;</p>
<p>Thanks a lot. I will continue testing and maybe then I will have more questions for calibration.</p>
<p>For sure the first high voltage value I am getting at the restart point of the sketch is an issue. By the way, I tested and this value is always there, even if there is no voltage connected to the EmonTX shield !!! So, first value is a high number and all the others around 0.3-0.4</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17224"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 03/01/2014 - 11:06.</div>
    <div class="content">
     <p>John, you may find it helpful to run some of the sketches near the top of my <a href="1757.html">Summary Page</a>.&nbsp; This will show how your hardware is behaving.&nbsp;</p>
<p>Your AC voltage sensor will work best when its output spans most of the 10-bit range of the ADC, i.e. 0 - 1023.&nbsp; Similarly, your current sensor should use most of this range when the maximum current that you want to measure is flowing through the CT.&nbsp; When a smaller current is flowing, the amplitude (range) of the output signal will be doubled if you loop the current-carrying conductor twice around the CT rather than just once.&nbsp; When no current is flowing, the resulting signal from the ADC should be very small, no more than a couple of ADC steps, e.g. 511 - 513.&nbsp;&nbsp; If your output values (for either sensor) are not fairly symmetrical around 512, then your reference circuit is suspect.</p>
<p>MinMaxAndRangeChecker is a simple tool which displays the raw ADC values from each of the first four analog inputs (AN0 - AN3).&nbsp; RawSamplesTool_4ss_2 provides a snapshot of your V and I waveforms during one or more individual mains cycles.&nbsp; If this sketch runs correctly, it shows that your voltage sensor is OK.&nbsp; Prior to the display appearing on the Serial Monitor, there should be a slow countdown (one per second).&nbsp; If this sketch doesn&#39;t run properly, there is something wrong with your voltage sensor.&nbsp; When using the Shield, you may need to alter the pin number definitions.</p>
<p>Hardware issues are much easier to track down and fix while using simple tools like these.&nbsp; Once your hardware is behaving as expected, then you can run the appropriate software for whatever you want your rig to do.</p>
<p>Hope this helps.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17226"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5120.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="xerox1821&#039;s picture" title="xerox1821&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/5120.html" title="View user profile.">xerox1821</a> on Fri, 03/01/2014 - 12:17.</div>
    <div class="content">
     <p>I made the right connection of the CT to the heater cable and I managed to get good readings. Tested voltage with the multi meter&nbsp;and by adjusting the variable in the sketch I have good readings now.</p>
<p>&nbsp;</p>
<p>The only thing is that I am still getting the high voltage reading at the beginning of each cycle. It should be something in the sketch causing this. I put some more delay to the initial one (20000) but nothing.</p>
<p>Did anyone else phased the same issue with this sketch?</p>
<p>&nbsp;</p>
<p>thanks in advance</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17236"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 03/01/2014 - 15:05.</div>
    <div class="content">
     <p>Initial false values due to the filters: The output you see on the serial monitor and the values sent to emonCMS or the emonGLCD are sent by different methods. If you look at the code, the RF transmission is inside a conditional branch &quot;if (settled) { ... }&quot;</p>
<p>If you put the &quot;Serial.print(...)&quot; statements inside a similar conditional, you will get no output printed until FILTERSETTLETIME has expired. But you must continue measuring because the filters need to run to be able to settle.</p>
<p>I can&#39;t see any other reason for the high voltage each time - and I never saw it, other than when starting the sketch for the first time, when developing and testing the sketch on an emonTx V2.&nbsp; I don&#39;t have a shield, and nobody else has reported this problem. I&#39;m checking further.</p>
<p>[Edit]</p>
<p>That&#39;s weird. I see the high voltage each time I start the serial monitor - but only under Linux. I have a new machine and I&#39;ve just switched from Windows to Ubuntu 12.04, I don&#39;t see the same effect with my old machine under Windows (which is why I never saw it before). It has to be tied up with the way the serial port is handled inside the monitoring computer, interrupts and the timing of the measurement. I don&#39;t know of a way to test if the output is being received and handled by the monitoring computer.</p>
<p>As a work-around, when you have finished testing, comment out this line near the top of the sketch:</p>
<p class="rteindent1">#define SERIALPRINT</p>
<p>That <em>should</em> cure the problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17243"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5120.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="xerox1821&#039;s picture" title="xerox1821&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/5120.html" title="View user profile.">xerox1821</a> on Fri, 03/01/2014 - 17:29.</div>
    <div class="content">
     <p>Hi Robin.</p>
<p>Thanks once more for the valuable and fast reponce.</p>
<p>I checked your simple tool and now I am more confident that the shield it works fine.</p>
<p>Please find below the raw data I get from the serial monitor, with CT connected only on CT1:</p>
<p><em>ready ...<br />
	The Min, Max and Range ADC values for analog inputs 0 to 3:<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0 269 269;&nbsp;&nbsp;&nbsp;&nbsp; 0 512 512<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 249 768 519;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 248 764 516;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 248 764 516;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 248 764 516;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1</em></p>
<p><em>&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 249 767 518;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 248 766 518;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 248 765 517;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 248 765 517;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 248 765 517;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1</em></p>
<p><em>&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 250 766 516;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 249 765 516;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 249 764 515;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 249 764 515;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1<br />
	&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; 0&nbsp;&nbsp; 0;&nbsp;&nbsp; 249 764 515;&nbsp;&nbsp; 512 513&nbsp;&nbsp; 1</em></p>
<p>&nbsp; Since you know better to read the outcome, as you previous wrote me ADC steps around 511-513 should be fine.</p>
<p>&nbsp;</p>
<p>Regarding your latest post:</p>
<p>I also checked the shield on a laptop running Windows (my main machine is an imac), and I am still getting these high values.</p>
<p>But you are totally right that there is no reason to worry about such values, since the values that we are using for further processing are the ones within the if settled statement.</p>
<p>&nbsp;</p>
<p>Thanks a lot for the help.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17262"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 04/01/2014 - 12:17.</div>
    <div class="content">
     <p>John, the results that you&#39;ve posted using MinMaxAndRangeChecker show that:</p>
<p>Analog inputs 0 &amp; 1 are earthed.</p>
<p>Analog i/p 2 has an AC signal that occupies 50% of the ADC&#39;s range.&nbsp; The DC bias looks fine.</p>
<p>Analog i/p 3 has the correct DC bias but no AC signal is present.</p>
<p>Is this what you were expecting?&nbsp; If an AC current was flowing through your CT at the time of these measurements, then either it (or the AC voltage signal) was not being seen by the processor.&nbsp;</p>
<p>If you turn off the voltage source, do your readings change?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17263"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 04/01/2014 - 12:33.</div>
    <div class="content">
     <p>John, according to the SolderPad <a href="http://solderpad.com/openenergymon/emontx-shield/">schematic</a> for the emonTx Shield, the AC voltage signal is processed via Analog i/p 0.&nbsp; CTs 1-4 are processed via Analog inputs 1-4 respectively.&nbsp; This is different than for the emonTx V2 where the voltage sensor was on An i/p 2.&nbsp;</p>
<p>The results that you&#39;ve posted do not suggest to me that your voltage sensor, which needs to be on An 0 for the Shield, is working as intended.</p>
<p>My MinMaxAndRangeChecker sketch does not care what platform it&#39;s running on.&nbsp; Its results will be in different columns according to the hardware platform.</p>
<p>Send me a PM if you&#39;re still having difficulties with running this tool.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17280"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5120.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="xerox1821&#039;s picture" title="xerox1821&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/5120.html" title="View user profile.">xerox1821</a> on Sat, 04/01/2014 - 16:02.</div>
    <div class="content">
     <p>Hi Robin,</p>
<p>below you can see the settings I ve done in your sketch:</p>
<p>
	&nbsp; <em>val_a0 = analogRead(2); //&nbsp; CT2<br />
	&nbsp; val_a1 = analogRead(3); //&nbsp; CT3<br />
	&nbsp; val_a2 = analogRead(0); //&nbsp; Vsensor<br />
	&nbsp; val_a3 = analogRead(1); //&nbsp; CT1</em></p>
<p>The results that I previously posted are with CT1 attached on the shield with no current flowing through CT1.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17285"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Newbie questions on emonTX shield V2</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 04/01/2014 - 19:26.</div>
    <div class="content">
     <p>OK, that demo sketch was intended to be run without requiring any changes.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3491"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-2T-GS4uzomEukNL4QVMLC9Dm3Jr1LPSCBf1TsAsqDHs" value="form-2T-GS4uzomEukNL4QVMLC9Dm3Jr1LPSCBf1TsAsqDHs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
