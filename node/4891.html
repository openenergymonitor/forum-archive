<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/4891 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:54:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emonth count gazmeter | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emonth count gazmeter</h3>
        <span class="submitted">Submitted by <a href="../user/5694.html" title="View user profile.">Patrice Diliakou</a> on Wed, 02/04/2014 - 19:23</span>
        <div class="content"><p>Hello all,</p>
<p>I search a sketch that :</p>
<p>transmit temp from external DS18B20 soldered in 3,5,6.</p>
<p>transmit counting from a reed contact soldered in 2 and 4.</p>
<p>And if possible battery level.</p>
<p>I putted the R2 pull dowm resistor (8.2kohm).</p>
<p>&nbsp;</p>
<p>Thank&#39;s for your help.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2025.html" class="topic-previous" title="Go to previous forum topic">‹ public share URL</a>
              <a href="4393.html" class="topic-next" title="Go to next forum topic">Setting up OemGateway ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-20356"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonth count gazmeter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 02/04/2014 - 22:33.</div>
    <div class="content">
     <p>I do not know of a sketch that does exactly as you want.</p>
<p>A sketch for reading two temperatures is on Github: emonTH / emonTH_DHT22_dual_DS18B20</p>
<p>A sketch for reading a gas meter using a reflective optical sensor is on Github: emonTH / emonTH_gas_reflection_analogue</p>
<p>I suggest you start with the optical sensor sketch and change that so that it reads your reed switch, then add to that sketch the code for setting up and reading the two temperature sensors from the other sketch.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20361"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5694.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5694.jpg" alt="Patrice Diliakou&#039;s picture" title="Patrice Diliakou&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonth count gazmeter</h3>

    <div class="submitted">Submitted by <a href="../user/5694.html" title="View user profile.">Patrice Diliakou</a> on Thu, 03/04/2014 - 11:10.</div>
    <div class="content">
     <p>Well...</p>
<p>I&#39;ll have a lot of questions about coding a sketch...</p>
<p>&nbsp;</p>
<p>What is the pinout to program for irq0/dig2 ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20365"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonth count gazmeter</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 03/04/2014 - 13:24.</div>
    <div class="content">
     <p>See here: <a href="http://wiki.openenergymonitor.org/index.php?title=EmonTH" title="http://wiki.openenergymonitor.org/index.php?title=EmonTH">http://wiki.openenergymonitor.org/index.php?title=EmonTH</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20366"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonth count gazmeter</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Thu, 03/04/2014 - 14:16.</div>
    <div class="content">
     <p>The optical gas sketch is more complex than yours needs to be because it has to strobe the meter actively. It&#39;s vastly easier if you can use IRQ0 and a reed switch.</p>
<p>I don&#39;t have any sketches using an interrupt, but I did write the optical sketch, so I&#39;ll try to help out if you need a steer.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20369"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5694.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5694.jpg" alt="Patrice Diliakou&#039;s picture" title="Patrice Diliakou&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emonth count gazmeter</h3>

    <div class="submitted">Submitted by <a href="../user/5694.html" title="View user profile.">Patrice Diliakou</a> on Thu, 03/04/2014 - 16:23.</div>
    <div class="content">
     <p>Thank you for your answers.</p>
<p>For the link, i am already in It and it&#39;s not giving the pinout to insert in a sketch. I can see &quot;Digital2&quot; but how exploit it ?</p>
<p>Well you can understand that i&#39;m not a developper and i discover this.</p>
<p>&nbsp;</p>
<p>For the optical gas sketch, it&#39;s that i supposed. I want to exploit a reed contact with irq0 and i already placed a pull down resistor (R2) to the -.</p>
<p>&nbsp;</p>
<p>I start with the standart sketch emonTH_DHT22_DS18B20 that deliver to me one temp ant battery report. I saw somewhere that i must consider the sleep parameter and other things.</p>
<p>My problem is : i dont understand this code and how it works.</p>
<p>It&#39;s because i asked if some people had made it before.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/4891"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-AT38sYZt8eca90EBwlTuikoItzlLIU6Wwvb6rhmP3Wk" value="form-AT38sYZt8eca90EBwlTuikoItzlLIU6Wwvb6rhmP3Wk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/4891 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:54:08 GMT -->
</html>
