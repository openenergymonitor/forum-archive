<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/127 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:17:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emoncms overview | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
          <span class="submitted"></span>
      <div class="taxonomy"></div>
      <div class="content"><h2>Archived page - for new setup overview see <a href="339.html">home energy monitor build</a>&nbsp;step 5</h2>
<h2>Emoncms overview</h2>
<h2>Create an account</h2>
<p>Emoncms has multi-user functionality built in, so the first step after installation is to create/register your account via the GUI.</p>
<p><a href="../sites/default/files/register_emoncms.png"><img width="450" height="284" alt="" src="../sites/default/files/register_emoncms.png" /></a></p>
<h2>Inputs, input processing and feeds</h2>
<p>There are 3 parts to the flow of sensing data in emoncms. Rather than just log incoming data straight away, the idea is to have the option to process this input data as it comes in and then log/store it.&nbsp;</p>
<ol>
<li>Inputs</li>
<li>Input processing</li>
<li>Feeds</li>
</ol>
<p>At the moment using input processing you can:</p>
<ul>
<li>Multiply the input by a scalar</li>
<li>Add an offset</li>
<li>Multiply the input with another input</li>
<li>log the input to a feed</li>
<li>convert a power input to kwh per day and log to a feed</li>
<li>convert a kwh increment to kwh per day&nbsp;<br />
    <meta http-equiv="content-type" content="text/html; charset=utf-8">and log to a feed                                                                      </meta>
    </li>
<li>count the length of time an input is 1 or 0 per day (useful for counting the length of time a solar HW pump is on for)</li>
<li>convert accumulated kwh updates to kwh per day and log to a feed</li>
</ul>
<p>See full input processing descriptions <a href="297.html">here</a>.</p>
<h3>1)&nbsp;Sending a JSON string</h3>
<p>The first step is to send some data to emoncms, this is done by sending a HTTP request with the data in the url to the emoncms API. For example:</p>
<pre>
emoncms/api/post?apikey=YOURAPIKEY&amp;json={power:200.2}</pre><p>The data needs to be sent in json form with a tag for the variable you want to send and the variable value, for example: {testA:200} or 2 variables {testA:200,testB:400} and so on for as many variables as you want to send.</p>
<p><strong>You also need to include your apikey</strong> that can be found at the top of your feeds page.</p>
<p>Try copying the example URL at the top of the feeds page into your browser to see this stage in action.</p>
<p><a href="../sites/default/files/feeds01.png"><img width="600" height="216" alt="" src="../sites/default/files/feed_part1.png" /></a></p>
<h3>2) The variables should now appear in inputs:</h3>
<p><a href="../sites/default/files/feed_part2.png"><img width="600" height="186" alt="" src="../sites/default/files/feed_part2.png" /></a></p>
<h3>3) Click on the arrow to bring up the input configuration box.</h3>
<p>Lets create a log of the input (a feed). Click on the drop down menu and select log and in the arg edit box enter a name for the log you would like to create. Then click add.</p>
<p><a href="../sites/default/files/feed_part3.png"><img width="600" height="153" alt="" src="../sites/default/files/feed_part3.png" /></a></p>
<h3>4) The feed should now appear in the feeds list and the data will be logging.</h3>
<p><a href="../sites/default/files/feed_part4.png"><img width="600" height="156" alt="" src="../sites/default/files/feed_part4.png" /><br />
</a></p>
<h3>5) Standard Visualisations</h3>
<p>Once you have been logging for a little while, click on the drop down menu to see your feed visualised. The following options are available:</p>
<p>
<meta content="text/html; charset=utf-8" http-equiv="content-type">            </meta>
</p>
<div style="border-collapse: collapse; font-family: arial,sans-serif; font-size: 13px;"><strong>Raw data</strong> = level of detail, for viewing really large datasets (power data over long windows of time)</div>
<div style="border-collapse: collapse; font-family: arial,sans-serif; font-size: 13px;"><strong>Bar graph</strong></div>
<div style="border-collapse: collapse; font-family: arial,sans-serif; font-size: 13px;"><strong>realtime</strong> = the graph auto updates every 5s so that you can watch data coming in!</div>
<p><a href="../sites/default/files/bargraph.png"><img width="297" height="350" alt="" src="../sites/default/files/bargraph.png" /></a><a href="../sites/default/files/feedgraph01.png"><img width="281" hspace="10" height="350" alt="" src="../sites/default/files/feedgraph01.png" /></a></p>
<p>These visualisations can also be embedded outside of emoncms using the embedd link.</p>
<h3>6) Get at your data for external use via the API using the following API call:</h3>
<pre>
emoncms/api/getfeed?apikey=YOURAPIKEY&amp;feedid= &amp;start= &amp;end= &amp;resolution=<b><br /></b></pre></div>
    
    
      </div>
<div id="comments">
  <a id="comment-1943"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Guest&#039;s picture" title="Guest&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Guest (not verified) on Sun, 17/07/2011 - 15:50.</div>
    <div class="content">
     <p>Points 1), 2) and 3)have not the .PNG archive to see what are you talking about. Points 4) and 5) are Ok. Pleaae can you fix that to understand the whole webpage?<br />
Thank you very much</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1944"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 17/07/2011 - 15:57.</div>
    <div class="content">
     <p>Thanks for the heads up, should be fixed now. </p>
         </div>
    <div class="links">&raquo; </div>
  </div>
</div><a id="comment-1799"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Guest&#039;s picture" title="Guest&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Guest (not verified) on Thu, 26/05/2011 - 15:59.</div>
    <div class="content">
     <p>Hello Trystan,</p>
<p>I've made some test graphs in jpgraph (php). It works like a charm.</p>
<p>But, I think there is a small bug in emoncms.<br />
When I load 1 record via post.php (with a time in the json string), the record is double in the table feed_1. So it must be inserted twice. I tested it a couple of times but always double in the feed_1 table.</p>
<p>Any idea ?</p>
<p>Thanks a lot,<br />
Wim</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1821"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 06/06/2011 - 10:22.</div>
    <div class="content">
     <p>Hello WIm</p>
<p>Sorry for the slow reply, been away on holiday.</p>
<p>Just tested it here and it seems to work fine, only the one entry? Both with and without timestamp option.</p>
<p>All the best, Trystan</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1836"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Guest&#039;s picture" title="Guest&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Guest (not verified) on Tue, 07/06/2011 - 16:16.</div>
    <div class="content">
     <p>Hello Trystan,</p>
<p>In my case ALL the entries are double in the feed_1 table.<br />
I solved this with creating a unique index on feed_1 (time,data).<br />
So now the insert will get (when inserting the same row a second time) a duplicate key.</p>
<p>Strange that you can't simulate this, because I used the lastest version with a clean install.</p>
<p>Best regards,<br />
Wim.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
</div></div><a id="comment-1774"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Guest&#039;s picture" title="Guest&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Guest (not verified) on Wed, 18/05/2011 - 20:00.</div>
    <div class="content">
     <p>Hello T,</p>
<p>is there a way to also load the date/time with the post script.</p>
<p>I log the powerconsumption every hour (date,time,tottal kwh) on SD and once a month I read the SD on my computer in a .csv file.<br />
So for me it should be interesting to bulk load this data into your tool/program/database.</p>
<p>Is there an easy way to do so (fe date/time as parameter in the post.php ?)  It should be possible to resuse this also for other users, I think.</p>
<p>Best regards,<br />
Wim</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1776"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 18/05/2011 - 20:18.</div>
    <div class="content">
     <p>Hello Wim</p>
<p>It doesnt exist at the moment, but good idea. Thinking about it, it would be really easy to do, What format is your timestamp data in?</p>
<p>Trystan</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1777"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Guest&#039;s picture" title="Guest&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by Guest (not verified) on Wed, 18/05/2011 - 20:24.</div>
    <div class="content">
     <p>this doesn't matter (I can change it easily).<br />
By the moment its like this: "02/04/2011 14:00:00;0.329300000000018 " (day/month/year)</p>
<p>But this is easaly changeable.<br />
I think -when you want to code this- you should use choose the frequently used format.</p>
<p>Thanks for consider/thinking of the change.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<div class="indented"><a id="comment-1779"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 18/05/2011 - 21:09.</div>
    <div class="content">
     <p>Ok, just updated the github emoncms with the feature.&nbsp;</p>
<p>time can be specified using the time attribute:</p>
<p>emoncms/api/post.php?apikey=yourapikey&amp;time=unixtimestamp&amp;json={power:200}</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-1778"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms overview</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 18/05/2011 - 20:54.</div>
    <div class="content">
     <p>Good to hear that you can change it easily, shall we go for unix timestamp to start with, probably the most robust.</p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" /></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
</div></div></div><div class="item-list"><ul class="pager"><li class="pager-current first">1</li>
<li class="pager-item"><a href="1272679.html?page=1" title="Go to page 2" class="active">2</a></li>
<li class="pager-item"><a href="1274658.html?page=2" title="Go to page 3" class="active">3</a></li>
<li class="pager-item"><a href="1279ba9.html?page=3" title="Go to page 4" class="active">4</a></li>
<li class="pager-next"><a href="1272679.html?page=1" title="Go to next page" class="active">next ›</a></li>
<li class="pager-last last"><a href="1279ba9.html?page=3" title="Go to last page" class="active">last »</a></li>
</ul></div></div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
