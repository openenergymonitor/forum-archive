<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2332 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Strange error creating a String | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Strange error creating a String</h3>
        <span class="submitted">Submitted by Guest on Sat, 04/05/2013 - 19:53</span>
        <div class="content"><p>Now, this is weird.</p>
<p>I am playing with a nanodetx, and I can&#39;t initialize a String instance.</p>
<p>Code extract:</p>
<p>Serial.println(&quot;loop start&quot;);&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp; String stringOne = &quot;Hello String&quot;;&nbsp;&nbsp;&nbsp;<br />
	&nbsp; Serial.println(stringOne.length());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;<br />
	&nbsp; stringOne= &quot;Hello&quot;;<br />
	&nbsp; Serial.println(stringOne.length());</p>
<p>Result on the serial monitor:</p>
<p>loop start<br />
	0<br />
	0</p>
<p>So for some reason, my String is not created.</p>
<p>Serial.println(stringOne); also just prints a blank line. I am using Arduino IDE 1.04.</p>
<p>Any idea what is happening here?</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2334.html" class="topic-previous" title="Go to previous forum topic">‹ raspi root login?</a>
              <a href="2329.html" class="topic-next" title="Go to next forum topic">Got the FFT running on the emonTX ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-11860"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange error creating a String</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 04/05/2013 - 20:42.</div>
    <div class="content">
     <p>Strange indeed. It looks OK to me, and to my NanodeRF and my Arduino 1.0.4.&nbsp; I get (both with the statements in loop( ) and in setup( ) ) exactly what you expect:</p>
<pre class="rteindent1">
loop start
12
5</pre><p>So it has to be something else. What else do you have in your sketch? Has it run out of memory, for example?</p>
<p>Write a sketch with just those lines (preceded by the necessary Serial.begin() of course) in setup( ). If it works then, it&#39;s definitely something else causing the problem. You&#39;ll need an empty loop( ) to keep the compiler happy!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11861"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RBJensen&#039;s picture" title="RBJensen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange error creating a String</h3>

    <div class="submitted">Submitted by RBJensen (not verified) on Sat, 04/05/2013 - 21:33.</div>
    <div class="content">
     <p>I had it temporarily working by putting the instance definition outside the method, making it global. But it broke again.</p>
<p>My compiled sketch is 12-14 kB, so plenty of memory left.</p>
<p>Good idea - start with a basic sketch and see how it goes.The other code I have running &quot;should not&quot; interfere, but you never know...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11863"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange error creating a String</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 04/05/2013 - 22:13.</div>
    <div class="content">
     <p>Ah, but remember there&#39;s a very limited amount of RAM for variables and the stack, etc.&nbsp; See <a href="http://playground.arduino.cc/Code/AvailableMemory">MemoryFree</a>.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11865"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Strange error creating a String</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 04/05/2013 - 22:58.</div>
    <div class="content">
     <p>I ran out of memory with my early Mk2i PV Router builds.&nbsp; The problem was that I had far too many strings.&nbsp; Having removed many of them, the later versions are fine.&nbsp;</p>
<p>In my later builds, from Rev4 onwards, I&#39;ve included a little routine that shows how much RAM remains unused.&nbsp; This might be worth adding into your sketch, and calling just before your &quot;Hello&quot; string appears to misbehave:</p>
<pre>
int freeRam () {
  extern int __heap_start, *__brkval;
  int v;
  return (int) &amp;v - (__brkval == 0 ? (int) &amp;__heap_start : (int) __brkval);
}
</pre><p>(Sorry, before posting this, I&#39;d not checked the link which Robert provided)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2332"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-bjdnYigFQe5G0dwS2GVZSZ4enYNBLCqeJvDJdg734Qg" value="form-bjdnYigFQe5G0dwS2GVZSZ4enYNBLCqeJvDJdg734Qg"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2332 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:43 GMT -->
</html>
