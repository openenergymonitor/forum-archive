<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/1757 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:03:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Robin&#039;s Mk2 Code variants and associated tools. | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node sticky">

    
    
          <div class="comment" >
                <h3 class="title" style="">Robin&#039;s Mk2 Code variants and associated tools.</h3>
        <span class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 29/12/2012 - 15:31</span>
        <div class="content"><p>While working on my Mk2 PV Router concept, various Arduino-based tools have been developed along the way.&nbsp; Although these have already appeared on various forum threads, it may be helpful for them to be grouped together in one place.&nbsp; This will hopefully provide a useful resource for anyone who is interested.</p>
<p>--- &gt;&nbsp; <strong>Please also visit my website</strong> at <a href="http://www.mk2pvrouter.co.uk/">http://www.mk2pvrouter.co.uk/</a>&nbsp;<strong> from where various items can be purchased&nbsp; :-)</strong></p>
<p>
<em>First, the tools; then the various versions of the Mk2 code itself:</em></p>
<p><strong>MinAndMaxValues</strong>.&nbsp; Displays raw sample values from a voltage or current sensor, along with their Min and Max values.&nbsp; Originally posted on 01/07/12 at <a href="789.html#comment-5072" title="http://openenergymonitor.org/emon/node/789#comment-5072">http://openenergymonitor.org/emon/node/789#comment-5072</a>, this tool is available at<br />
<a href="../sites/default/files/minAndMaxValues.ino_.html" title="http://openenergymonitor.org/emon/sites/default/files/minAndMaxValues.ino_.zip  ">http://openenergymonitor.org/emon/sites/default/files/minAndMaxValues.in...</a> <em>Note the improved version is below</em></p>
<p>
&nbsp;<strong>MinMaxAndRangeChecker</strong>.&nbsp; An improved version of the above tool, this one records raw ADC values for the first four of the Atmega processor&#39;s analog inputs.&nbsp; Posted on 20/04/13 at <a href="2269.html" title="http://openenergymonitor.org/emon/node/2269">http://openenergymonitor.org/emon/node/2269</a>, this tool is available at <a href="../sites/default/files/minMaxAndRangeChecker.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/minMaxAndRangeChecker.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/minMaxAndRangeChec...</a><br />
&nbsp;<br />
<strong>RawSamplesTool</strong>.&nbsp; A one-shot tool which displays a single mains cycle&#39;s worth of raw voltage and current samples to the Serial monitor.&nbsp; Useful for checking that both sample streams look sensible.&nbsp; The mid-point for each sample stream can be readily seen, also how much of the ADC&#39;s range is being effectively used.&nbsp; Originally posted on 09/07/12 at <a href="824.html" title="http://openenergymonitor.org/emon/node/824">http://openenergymonitor.org/emon/node/824</a>, this tool is available at<br />
<a href="../sites/default/files/rawSamplesTool.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/rawSamplesTool.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/rawSamplesTool.ino...</a></p>
<p><strong>RawSamplesTool_4ss_2</strong>.&nbsp; An improved version of the simple one-shot tool.&nbsp; This captures several mains cycle&#39;s worth of raw voltage and current samples.&nbsp; This data is then sent to the Serial monitor, both as a low-res ASCII display, and also as pairs of raw samples.&nbsp; This latter format allows raw samples to be imported into a spreadsheet for hi-res display.&nbsp;&nbsp; Originally posted on 21/12/12 at <a href="1705.html#comment-8535" title="http://openenergymonitor.org/emon/node/1705#comment-8535">http://openenergymonitor.org/emon/node/1705#comment-8535</a>, this tool is available at<br />
<a href="../sites/default/files/RawSamplesTool_4ss_2.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/RawSamplesTool_4ss_2.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/RawSamplesTool_4ss...</a></p>
<p><strong>PhaseDiagramTool</strong>.&nbsp; Another one-shot tool which displays a single mains cycle&#39;s worth of raw voltage and current samples to the Serial monitor.&nbsp; A PHASECAL algorithm is included whereby the voltage stream can be aligned with the current.&nbsp; Data is displayed in graphical form and also as a Lissajous &quot;eye&quot; diagram.&nbsp; Originally posted in a &quot;Phasecal for Dummies&quot; pack around 23/07/12 at <a href="870.html#comment-5927" title="http://openenergymonitor.org/emon/node/870#comment-5927">http://openenergymonitor.org/emon/node/870#comment-5927</a>, this tool is available at<br />
<a href="../sites/default/files/PhaseDiagramTool.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/PhaseDiagramTool.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/PhaseDiagramTool.i...</a></p>
<p><strong>PhasecalChecker</strong>.&nbsp;&nbsp; A tool which determines the correct phaseCal value to be used so that a resistive load is seen to have a Power Factor of one.&nbsp; Note that a long-standing bug in the emonLib code has been fixed (Vrms needs to use the phase-shifted version of the filtered voltage stream).&nbsp; Originally posted on 27/8/12 at <a href="870.html#comment-5927" title="http://openenergymonitor.org/emon/node/870#comment-5927">http://openenergymonitor.org/emon/node/870#comment-5927</a>, this tool is available at<br />
<a href="../sites/default/files/PhasecalChecker.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/PhasecalChecker.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/PhasecalChecker.in...</a></p>
<p><strong>MeterAnalysisTool</strong>.&nbsp; This sketch was written to monitor, analyse, and display the LED activities at a digital supply meter.&nbsp; This material has been incorporated into later Mk2 code releases.&nbsp; Originally posted on 18/07/12 at <a href="857.html#comment-5257" title="http://openenergymonitor.org/emon/node/857#comment-5257">http://openenergymonitor.org/emon/node/857#comment-5257</a>, this tool is available at<br />
<a href="../sites/default/files/MeterAnalysisTool.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/MeterAnalysisTool.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/MeterAnalysisTool....</a></p>
<p><strong>MeterSimulation</strong>.&nbsp; This is a simple simulation of a digital supply meter.&nbsp; The user can vary the rate of energy consumption and generation to investigate how the meter&#39;s upper and lower energy limits are likely to behave.&nbsp; Originally posted on 30/09/12 at <a href="857.html#comment-6442" title="http://openenergymonitor.org/emon/node/857#comment-6442">http://openenergymonitor.org/emon/node/857#comment-6442</a>, this tool is available at<br />
<a href="../sites/default/files/MeterSimulation.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/MeterSimulation.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/MeterSimulation.in...</a></p>
<p><strong>DigitalMeterEmulator</strong>.&nbsp; This sketch uses V and I sensors to determine real power, with the on-board LED being set to behave just as the LED on a digital supply meter.&nbsp; Originally posted on 26/10/12 at <a href="857.html#comment-6867" title="http://openenergymonitor.org/emon/node/857#comment-6867">http://openenergymonitor.org/emon/node/857#comment-6867</a>, this tool is available at<br />
<a href="../sites/default/files/DigitalMeterEmulator.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/DigitalMeterEmulator.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/DigitalMeterEmulat...</a></p>
<p><strong>FlickerDemo</strong>.&nbsp; A tool to demonstrate the effects of flicker and how this problem may be reduced.&nbsp; Uses only a single energy threshold.&nbsp; Posted with video footage on 23/12/12 at <a href="841.html#comment-8657" title="http://openenergymonitor.org/emon/node/841#comment-8657">http://openenergymonitor.org/emon/node/841#comment-8657</a>, this tool is available at<br />
<a href="../sites/default/files/FlickerDemo.ino_.html" title="http://openenergymonitor.org/emon/sites/default/files/FlickerDemo.ino_.zip ">http://openenergymonitor.org/emon/sites/default/files/FlickerDemo.ino_.z...</a> <em><strong>&lt;&lt;&lt; Note revised versions below</strong></em></p>
<p><strong>FlickerDemo_2</strong>.&nbsp; A revised version which uses two energy threshjolds rather than just one.&nbsp; Posted Jan 2013 at <a href="1637.html" title="http://openenergymonitor.org/emon/node/1637">http://openenergymonitor.org/emon/node/1637</a>, this tool is available at<br />
<a href="../sites/default/files/FlickerDemo_2.ino_.html" title="http://openenergymonitor.org/emon/sites/default/files/FlickerDemo_2.ino_.zip ">http://openenergymonitor.org/emon/sites/default/files/FlickerDemo_2.ino_...</a></p>
<p><strong>Mains Frequency Checker</strong>.&nbsp; A tool to record the variation in mains frequency.&nbsp; Data, via the Serial monitor, is suitable for inporting to a spreadsheeet. &nbsp; Posted on 18/1/13 at <a href="1930.html" title="http://openenergymonitor.org/emon/node/1930">http://openenergymonitor.org/emon/node/1930</a>, this tool is available at<br />
<a href="../sites/default/files/MainsFreqChecker.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/MainsFreqChecker.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/MainsFreqChecker.i...</a></p>
<p><strong>FlickerDemo_multiLoad</strong>.&nbsp; Anti-flicker is no longer a bolt-on extra; it is included as standard with &#39;normal&#39; mode just using different values&nbsp; This is a comprehensive simulation with which we can hopefully get to grips with a fundamental problem which affects any burst-mode power diversion system.&nbsp; Caters for multiple loads of different ratings, and can be run without need for an AC voltage source. &nbsp; Floating Point maths has been retained for ease of use.&nbsp; Posted on 22/1/13 at <a href="1637.html" title="http://openenergymonitor.org/emon/node/1637">http://openenergymonitor.org/emon/node/1637</a>, this tool is available at<br />
<a href="../sites/default/files/FlickerDemo_multiLoad.ino_.html" title="http://openenergymonitor.org/emon/sites/default/files/FlickerDemo_multiLoad.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/FlickerDemo_multiL...</a></p>
<p><strong>FlickerDemo_multiLoad_2</strong>.&nbsp; A max rate of change of surplus power has been added for realism.&nbsp; Overflow and underflow of the 3600J energy bucket are now properly detected and displayed.&nbsp; An ideal vehicle for playing around with different anti-flicker schemes.&nbsp; Posted on 27/1/13 at <a href="1637.html" title="http://openenergymonitor.org/emon/node/1637">http://openenergymonitor.org/emon/node/1637</a>, this tool is available at<br />
<a href="../sites/default/files/FlickerDemo_multiLoad_2.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/FlickerDemo_multiLoad_2.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/FlickerDemo_multiL...</a></p>
<p><strong>FlickerDemoWithMeter_1</strong>.&nbsp; A single load version of the latest multiload demo, but this one also simulates the meter.&nbsp; This sketch clearly shows how the meter responds in reverse flow conditons.&nbsp; Also how the meter and router become out of alignment whenever energy flow strays outside the meter&#39;s &quot;sweet zone&quot;.&nbsp;&nbsp; An ideal vehicle for playing around with how the router and meter interact.&nbsp; Posted on 31/1/13 at <a href="1637.html" title="http://openenergymonitor.org/emon/node/1637">http://openenergymonitor.org/emon/node/1637</a>, this tool is available at<br />
<a href="../sites/default/files/FlickerDemoWithMeter_1.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/FlickerDemoWithMeter_1.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/FlickerDemoWithMet...</a></p>
<p><strong>TwoAFschemes_1</strong>.xls&nbsp; A spreadsheet in which two different anti-flicker schemes are presented.&nbsp; The performance of each scheme can be determined by varying the relevant parameters.&nbsp;&nbsp; Posted on 2/2/13 at <a href="1937.html" title="http://openenergymonitor.org/emon/node/1937">http://openenergymonitor.org/emon/node/1937</a>, this tool is available at<br />
<a href="../sites/default/files/TwoAFschemes_1.xls" title="http://openenergymonitor.org/emon/sites/default/files/TwoAFschemes_1.xls">http://openenergymonitor.org/emon/sites/default/files/TwoAFschemes_1.xls</a></p>
<p>&nbsp;</p>
<p><em>Several variants of Mk2 code have been posted, of which only 9 should be regarded as &#39;current&#39;:</em></p>
<p style="color:gray"><strong>Mk2_PV_Router</strong>.&nbsp; The original version has extra code for a simulation (DEBUG) mode, but the PHASECAL algorithm was not included.&nbsp; Posted with full supporting information on 15/07/12 at <a href="841.html" title="http://openenergymonitor.org/emon/node/841">http://openenergymonitor.org/emon/node/841</a>, this code is available at<br />
<a href="../sites/default/files/Mk2_PV_Router.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_Router.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_Router.ino_...</a></p>
<p style="color:gray"><strong>Mk2_PV_Router_mini</strong>.&nbsp; This is essentially just a cut-down version of the original.&nbsp; DEBUG mode and various print statements have been removed and the PHASECAL algorithm has been added.&nbsp; Originally posted on 27/08/12 at <a href="841.html#comment-5925" title="http://openenergymonitor.org/emon/node/841#comment-5925">http://openenergymonitor.org/emon/node/841#comment-5925</a>, this code is available at<br />
<a href="../sites/default/files/Mk2_PV_Router_mini.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_Router_mini.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_Router_mini...</a></p>
<p style="color:gray"><strong>Mk2_PV_Router_mini_2</strong>.&nbsp; Updated in order to improve the performance at start-up.&nbsp; All non-essential processing is now disabled while the LPF is allowed to settle.&nbsp; Posted on 15/03/13 at <a href="841.html" title="http://openenergymonitor.org/emon/node/841">http://openenergymonitor.org/emon/node/841</a>, this code is available at <a href="../sites/default/files/Mk2_PV_Router_mini_2.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_Router_mini_2.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_Router_mini...</a></p>
<p><strong>Mk2_PV_Router_mini_3</strong>.&nbsp; Bug-fix, to force the triac to be &#39;off&#39; during the startup phase.&nbsp; Posted on 14/04/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a> (different thread), this code is available at <a href="../sites/default/files/Mk2_PV_Router_mini_3.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_Router_mini_3.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_Router_mini...</a></p>
<p><strong>Mk2_PV_phaseAngle</strong>.&nbsp; A phase-angle controlled variant.&nbsp; This requires a trigger which acts immediately rather than a zero-crossing one.&nbsp;&nbsp;&nbsp; Originally posted, with full supporting information, on 01/11/12 at <a href="841.html#comment-6990" title="http://openenergymonitor.org/emon/node/841#comment-6990">http://openenergymonitor.org/emon/node/841#comment-6990</a>, this code is available at<br />
<a href="../sites/default/files/Mk2_PV_phaseAngle.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_phaseAngle.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2_PV_phaseAngle....</a></p>
<p><strong>temporalAlignment_dev.ino</strong>&nbsp;&nbsp; This demonstrates an alternative way of tracking the true zero point of the current waveform.&nbsp; With non-sinusoidal waveforms, such as half-rectified AC, this works much better than the standard HP filter.&nbsp; Could be useful for applications where Power Factor is required.&nbsp; Originally posted on 20/12/12 at <a href="1705.html" title="http://openenergymonitor.org/emon/node/1705">http://openenergymonitor.org/emon/node/1705</a>, this code is available at<br />
<a href="../sites/default/files/temporalAlignment_dev.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/temporalAlignment_dev.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/temporalAlignment_...</a></p>
<p><strong>Mk2a_PV_Router.ino</strong>.&nbsp; An updated version which uses integer maths for greater speed, and twin HPFs for the V &amp; I sample streams.&nbsp; All general processing is done within ADC conversion periods so the sampling process is both faster and more regular than before.&nbsp; Also includes TALLYMODE for obtaining high quality performance data.&nbsp; Originally posted on 17/12/12 at <a href="1681.html" title="http://openenergymonitor.org/emon/node/1681. ">http://openenergymonitor.org/emon/node/1681. </a> After fixing a couple of bugs, a tidied-up version is available at<br />
<a href="../sites/default/files/Mk2a_PV_Router_rev2.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2a_PV_Router_rev2.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2a_PV_Router_rev...</a><br />
&nbsp; A spreadsheet, with a suitable &#39;scatterplot&#39; graph for displaying raw sample &#39;TALLYMODE&#39; values, is available at<br />
<a href="../sites/default/files/3heatSettings_30s.xls" title="http://openenergymonitor.org/emon/sites/default/files/3heatSettings_30s.xls">http://openenergymonitor.org/emon/sites/default/files/3heatSettings_30s.xls</a></p>
<p style="color:gray"><strong>Mk2a_PV_Router_rev3.ino</strong>&nbsp; The twin HPFs have been replaced by a simpler scheme that&#39;s more appropriate when dealing just with Real Power.&nbsp; An anti-flicker mode has also been added.&nbsp; Posted, with full supporting information, on 03/01/13 at <a href="1681-2.html" title="http://openenergymonitor.org/emon/node/1681">http://openenergymonitor.org/emon/node/1681</a>, this code is available at <a href="../sites/default/files/Mk2a_PV_Router_rev3.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2a_PV_Router_rev3.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2a_PV_Router_rev...</a></p>
<p><strong>Mk2a_PV_Router_rev3a.ino</strong>&nbsp; Bug-fix to remove a long-standing error in the Tallymode facility.&nbsp; Now displays data in Watts which is more user-friendly than before.&nbsp; Posted on 19/06/13 at <a href="1681-2.html" title="http://openenergymonitor.org/emon/node/1681">http://openenergymonitor.org/emon/node/1681</a>, this code is available at <a href="../sites/default/files/Mk2a_PV_Router_rev3a.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2a_PV_Router_rev3a.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2a_PV_Router_rev...</a></p>
<p><em>&gt;&gt;&gt; WARNING - Early Mk2i builds do not support &#39;Tallymode&#39; due to lack of RAM.&nbsp; This problem was fixed in Mk2i_rev4</em></p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev1.ino</strong>&nbsp; Similar operation to Mk2a_rev3, but more efficient because the measurement sequence is controlled by interrupts.&nbsp; The ADC is either free-running or triggered by a fixed rate hardware timer.&nbsp; WORKLOAD_CHECK allows the spare processing capacity to be determined.&nbsp; Tally values (in Watts) are now displayed rather than just the index values.&nbsp; Posted, with full supporting information, on 14/01/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev1.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev1.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev2.ino</strong>&nbsp; Identical operation to Mk2i_rev1, but with the addition of 3 LEDs primarily for use when running in anti-flicker mode.&nbsp;&nbsp; Posted, with full supporting information, on 22/01/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev2.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev2.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev3.ino</strong>&nbsp; This build suffered from RAM being overloaded, so should not be used.</p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev4.ino</strong>&nbsp; As for Mk2i_rev2, but with the ability to switch between normal and anti-flicker modes on the fly using a switch.&nbsp; &#39;normal&#39; operation is now just a special case of &#39;anti-flicker&#39; mode.&nbsp; After rev3 was found to be problematic, a lot of RAM space was reclaimed, mainly by the removal of Serial statements. &nbsp;&nbsp; Posted, on 28/01/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev4.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev4.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p><strong>Mk2i_PV_Router_rev4b.ino&nbsp; </strong>Bug-fix to remove a long-standing error in the Tallymode facility for (rev4 code only).&nbsp; Posted, on 19/06/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev4b.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev4b.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p style="color:gray">Bug-fix to remove a long-standing error in the Bug-fix to remove a long-standing error in the Tallymode facility.&nbsp; Posted, on 19/06/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev5b.ino_.html" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev5b.ino_.zipBug-fix">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a> to remove a long-standing error in the Bug-fix to remove a long-standing error in the Tallymode facility.&nbsp; Posted, on 19/06/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev5b.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev5b.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev5.ino</strong>&nbsp; As for Mk2i_rev4, but supports multiple loads including an RF-controlled remote load, with switchable priorities. Uses a new power-distribution algorithm which works well with multiple loads need to share surplus power &nbsp;&nbsp; Posted, on 18/03/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev5.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev5.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev5a.ino</strong>&nbsp; Bug-fix, to prevent the triac being &#39;on&#39; during the start-up period.&nbsp; Posted, on 14/04/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev5a.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev5a.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev5b.ino</strong>&nbsp; Bug-fix to remove a long-standing error in the Tallymode facility (rev5 code only).&nbsp; Posted, on 19/06/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev5b.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev5b.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev5c.ino</strong>&nbsp; Upgrade to allow correct operation at different mains frequencies, and the size of the energy bucket to be changed to match the supply meter.&nbsp; Posted, on 04/02/14 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev5c.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev5c.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev5d.ino</strong>&nbsp; Upgraded to minimise the disturbance to recorded data when transmitting RF.&nbsp; Posted on 09/06/14 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev5d.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev5d.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p><strong>Mk2i_PV_Router_rev5e.ino</strong>&nbsp; The function, <em>decreaseLoadIfPossible()</em> has been tided because the previous version appeared to contain cut-and-paste errors.&nbsp;&nbsp; Posted on 13/07/14 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev5e.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev5e.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p><strong>RF_for Mk2_rx.ino</strong>&nbsp; A suitable receiver for a remote dump-load.&nbsp; Intended for use with the Mk2i_rev5 base-station sketch. &nbsp;&nbsp; Posted, on 18/03/13 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/RF_for_Mk2_rx.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/RF_for_Mk2_rx.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/RF_for_Mk2_rx.ino_...</a></p>
<p style="color:gray"><strong>Mk2i_PV_Router_rev6.ino</strong>&nbsp; Upgraded to include datalogging via an RFM12B module.&nbsp; A second current sensor is now supported so that the amount of diverted energy can be accurately monitored.&nbsp; Posted, on 22/04/14 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev6.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev6.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p><strong>Mk2i_PV_Router_rev6a.ino&nbsp; </strong>Upgraded to minimise the disturbance to recorded data when transmitting RF. Posted, on 09/06/14 at <a href="1912.html" title="http://openenergymonitor.org/emon/node/1912">http://openenergymonitor.org/emon/node/1912</a>, this code is available at <a href="../sites/default/files/Mk2i_PV_Router_rev6a.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev6a.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2i_PV_Router_rev...</a></p>
<p><strong>Mk2i_3phase_RFdatalog_1.ino&nbsp;</strong> A 3-phase router which can run on any Atmega 328 platform where access is available to all six of the analog IO ports.&nbsp;&nbsp; Supports multiple loads and datalogging.&nbsp; Posted, on 29/01/15 at <a href="10099.html" title="http://openenergymonitor.org/emon/node/10099">http://openenergymonitor.org/emon/node/10099</a>, this code is available at <a href="../sites/default/files/Mk2_3phase_RFdatalog_1.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/Mk2_3phase_RFdatalog_1.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/Mk2_3phase_RFdatal...</a></p>
<p>&nbsp;</p>
<p><strong>Using an emonTx V3.2 as a Mk2 PV Router</strong> This describes using the emonTx V3.2 rather than an Arduino to supply the processing power. Posted, on 14/2/2105, at <a href="10171.html" title="http://openenergymonitor.org/emon/node/10171">http://openenergymonitor.org/emon/node/10171</a>.</p>
<p><strong>Using an emonTx V3.4 as a Mk2 PV Router</strong> This describes using the emonTx V3.4 rather than an Arduino to supply the processing power. Posted, on 20/2/2105, at <a href="10203.html" title="http://openenergymonitor.org/emon/node/10203">http://openenergymonitor.org/emon/node/10203</a>.</p>
<p><strong>Using an Emontx V3.4 as a MK2 PV Router with phase angle control</strong> This describes using the emonTx V3.4 rather than an Arduino to supply the processing power. Posted, on 09/07/2015, at <a href="10865.html#comment-32080">http://openenergymonitor.org/emon/node/10865</a></p>
<p>&nbsp;</p>
<p><em>I&#39;ve also posted various videos along the way:</em></p>
<p><strong>IMGP9627.AVI</strong> at&nbsp; <a href="http://www.youtube.com/watch?v=FoOniINhqTc%c2%a0" title="http://www.youtube.com/watch?v=FoOniINhqTc ">http://www.youtube.com/watch?v=FoOniINhqTc </a> Feeding AC mains power to a resistive load using different mark-space ratios.&nbsp; For more information on this topic, see the forum at <a href="http://www.openenergymonitor.org/" title="www.openenergymonitor.org">www.openenergymonitor.org</a></p>
<p><strong>IMGP9630.AVI</strong> at&nbsp; <a href="http://www.youtube.com/watch?v=w0OpfWBmYz8%c2%a0" title="http://www.youtube.com/watch?v=w0OpfWBmYz8 ">http://www.youtube.com/watch?v=w0OpfWBmYz8 </a> Showing how the current in a test circuit can be used to control a resistive load.&nbsp; For further info, visit openenergymonitor.org</p>
<p><strong>IMGP9648.AVI</strong> at <a href="http://www.youtube.com/watch?v=-lk6Me3cwuw%c2%a0" title="http://www.youtube.com/watch?v=-lk6Me3cwuw ">http://www.youtube.com/watch?v=-lk6Me3cwuw </a> Heating Domestic Hot Water with spare PV Power</p>
<p><strong>IMGP9689.AVI</strong> at <a href="http://www.youtube.com/watch?v=EzwFlZau80w%c2%a0" title="http://www.youtube.com/watch?v=EzwFlZau80w ">http://www.youtube.com/watch?v=EzwFlZau80w </a> Early trials of Mk2 PV Router</p>
<p><strong>IMGP9720.AVI</strong> at <a href="http://www.youtube.com/watch?v=QzTAAVOkVAs%c2%a0" title="http://www.youtube.com/watch?v=QzTAAVOkVAs ">http://www.youtube.com/watch?v=QzTAAVOkVAs </a> An Arduino-based system that uses a triac to divert surplus PV power to an immersion heater.&nbsp; More trials of the burst-mode system</p>
<p><strong>Mk2 PV Controller test results&nbsp;</strong> at <a href="http://www.youtube.com/watch?v=WVqL30uOluQ%c2%a0" title="http://www.youtube.com/watch?v=WVqL30uOluQ ">http://www.youtube.com/watch?v=WVqL30uOluQ </a> Initial trial of Mk2 rig with an disc-style meter, to show balance between import and export. &quot;Errata: At 08:02, I should have said that the bucket is half-full, not full.&quot;</p>
<p><strong>IMGP9987.avi</strong> at&nbsp; <a href="http://www.youtube.com/watch?v=v8ifoUJvcXY%c2%a0" title="http://www.youtube.com/watch?v=v8ifoUJvcXY ">http://www.youtube.com/watch?v=v8ifoUJvcXY </a> The effects of PHASECAL and POWERCAL on the performance of my Mk2 PV Router. For details of the design, please visit <a href="841.html" title="http://openenergymonitor.org/emon/node/841">http://openenergymonitor.org/emon/node/841</a></p>
<p><strong>Simple demo of Mk2 PV Router (1 of 2)</strong> at <a href="http://www.youtube.com/watch?v=MopB2NAU4TU%c2%a0" title="http://www.youtube.com/watch?v=MopB2NAU4TU ">http://www.youtube.com/watch?v=MopB2NAU4TU </a> A simple way to check the operation of a PV Power Router when insufficient PV is available for normal operation.&nbsp; All that&#39;s needed is a lightbulb and some thin mains wire.&nbsp; When correctly routed, the current drawn by the bulb is seen by the current transformer (CT) as if it were being generated by PV.&nbsp; The effect can be easily be amplified by passing the feed wire several times around the CT.&nbsp; For more info about this setup, please visit <a href="841.html" title="http://openenergymonitor.org/emon/node/841">http://openenergymonitor.org/emon/node/841</a></p>
<p><strong>Simple demo of Mk2 PV Router (2 of 2) </strong>at&nbsp; <a href="http://www.youtube.com/watch?v=lefSTLTfUN0%c2%a0" title="http://www.youtube.com/watch?v=lefSTLTfUN0 ">http://www.youtube.com/watch?v=lefSTLTfUN0 </a> A simple way to check the operation of a PV Power Router in isolation.&nbsp; In place of the normal 3kW immersion heater, I&#39;m using a 3kW electric kettle.&nbsp; To simulate the PV, I&#39;m using the current drawn by a 100W bulb.&nbsp; By passing one core of each of these circuits through the current transformer (CT), the effect is just as if the system were being measured at the supply point when real PV is available.&nbsp;&nbsp; The effect of the bulb can be amplified by passing its feed wire several times around the CT.&nbsp; For more info about this setup, please visit <a href="841.html" title="http://openenergymonitor.org/emon/node/841">http://openenergymonitor.org/emon/node/841</a></p>
<p><strong>How to check that PV Router is set up OK </strong>at <a href="http://www.youtube.com/watch?v=oF8HACCsK4M%c2%a0" title="http://www.youtube.com/watch?v=oF8HACCsK4M ">http://www.youtube.com/watch?v=oF8HACCsK4M </a> A really easy way to check that a Mk2 PV Router system is set up correctly for operation next day.&nbsp; For more info, please visit <a href="841.html" title="http://openenergymonitor.org/emon/node/841">http://openenergymonitor.org/emon/node/841</a></p>
<p><strong>test of p-a controlled PV router </strong>at <a href="http://www.youtube.com/watch?v=TTglRINjSyw%c2%a0" title="http://www.youtube.com/watch?v=TTglRINjSyw ">http://www.youtube.com/watch?v=TTglRINjSyw </a> Bench testing of my Mk2 PV Router in phase-angle control mode.&nbsp;<br />
For details of this project, please visit <a href="841-2.html" title="http://openenergymonitor.org/emon/node/841. ">http://openenergymonitor.org/emon/node/841. </a> Errata: At 3:00, I should have said 1500&nbsp; and 1400 Joules, not Watts.&nbsp; At 8:08, I was incorrect to say that the triac could sometimes fire before the mid-point of the cycle.&nbsp; When the energy bucket is half-full, the triac will always fire after the mid-point, never before.</p>
<p><strong>First results for p-a controlled PV router</strong> at <a href="http://www.youtube.com/watch?v=p_IoNohZJAY" title="http://www.youtube.com/watch?v=p_IoNohZJAY">http://www.youtube.com/watch?v=p_IoNohZJAY</a> First &#39;live&#39; results for my Mk2 PV Router in phase-angle control mode.<br />
For details of this project, please visit <a href="841.html" title="http://openenergymonitor.org/emon/node/841">http://openenergymonitor.org/emon/node/841</a></p>
<p><strong>Mk2a PV Router, first results </strong>at <a href="http://www.youtube.com/watch?v=epozcslYPRs%c2%a0" title="http://www.youtube.com/watch?v=epozcslYPRs ">http://www.youtube.com/watch?v=epozcslYPRs </a> Initial test results for the Mk2a PV Router code that I posted yesterday on the Open Energy Forum at&nbsp; <a href="1681-2.html" title="http://openenergymonitor.org/emon/node/1681">http://openenergymonitor.org/emon/node/1681</a></p>
<p><strong>Flicker Demo Tool</strong> at <a href="http://www.youtube.com/watch?v=U-gW0ccroYc%c2%a0" title="http://www.youtube.com/watch?v=U-gW0ccroYc ">http://www.youtube.com/watch?v=U-gW0ccroYc </a> A simple tool to quantify the effects of mains flicker when a dump load is repeatedly cycled on and off.&nbsp; The effect itself is demonstrated, as is a simple way to reduce its undesirable consequences.&nbsp; For further information, please visit <a href="841.html#comment-8657" title="http://openenergymonitor.org/emon/node/841#comment-8657">http://openenergymonitor.org/emon/node/841#comment-8657</a> (page 12, posted 23/12/12)</p>
<p><strong>Anti-flicker demo for Mk2a PV Router, rev3</strong> at <a href="http://www.youtube.com/watch?v=BcZON8YFabw%c2%a0%c2%a0" title="http://www.youtube.com/watch?v=BcZON8YFabw  ">http://www.youtube.com/watch?v=BcZON8YFabw  </a> Full details at <a href="1681-2.html" title="http://openenergymonitor.org/emon/node/1681">http://openenergymonitor.org/emon/node/1681</a></p>
<p><strong>Hardware comparison: my Mk2 H/W v. emonTx.</strong>&nbsp; A pair of videos, posted on <a href="2044.html" title="http://openenergymonitor.org/emon/node/2044">http://openenergymonitor.org/emon/node/2044</a> on 9/4/13.&nbsp; The first one at <a href="http://youtu.be/h8HDdIpAD_c">http://youtu.be/h8HDdIpAD_c</a> just shows how the test rig behaves on its own.&nbsp; The second video, at: <a href="http://youtu.be/nq8U3v0nzr4" target="_blank">http://youtu.be/nq8U3v0nzr4</a> shows each type of Mk2 Router controlling a dump load in order to balance the flow of simulated PV.&nbsp; There is minimal difference between their performances.</p>
<p><strong>How to test that your triac is working</strong>, using little more than a 9V battery, is at at: <a href="http://youtu.be/hpClB_5mjRc" target="_blank">http://youtu.be/hpClB_5mjRc</a></p>
<p>&nbsp;</p>
<p>If you spot any errors, please let me know so I can keep this post up to date.&nbsp; Thanks, Robin</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11528.html" class="topic-previous" title="Go to previous forum topic">‹ HELP US TO HELP YOU</a>
              <a href="1757.html" class="topic-next" title="Go to next forum topic">Robin&#039;s Mk2 Code variants and associated tools. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-8743"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1163.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1163.gif" alt="markcarter10&#039;s picture" title="markcarter10&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/1163.html" title="View user profile.">markcarter10</a> on Sat, 29/12/2012 - 15:50.</div>
    <div class="content">
     <p>Thanks Robin</p>
<p>much easier to find now</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8771"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 30/12/2012 - 20:04.</div>
    <div class="content">
     <p>Thanks Robin, I have made the post sticky.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8773"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 30/12/2012 - 20:11.</div>
    <div class="content">
     <p>Er, sorry for my ignorance, Trystan, but please could you explain what has changed ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8774"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 30/12/2012 - 20:14.</div>
    <div class="content">
     <p>If you go to Forums -&gt; General Discussion, this thread is and will remain at the top (unless another &#39;sticky&#39; pushes it down).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8775"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 30/12/2012 - 20:14.</div>
    <div class="content">
     <p>In the general discussion list it will now always appear at the top of the list, which should make it easier to find.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-8777"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 30/12/2012 - 20:52.</div>
    <div class="content">
     <p>Well, how &#39;bout that, top of the bunch eh?&nbsp;</p>
<p>That&#39;s almost as impressive as James May flying his model glider over to Lundy - as has just been on TV.</p>
<p>Thanks Trystan.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9032"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2484.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2484.jpg" alt="jack_kelly&#039;s picture" title="jack_kelly&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/2484.html" title="View user profile.">jack_kelly</a> on Fri, 11/01/2013 - 10:27.</div>
    <div class="content">
     <p>Great resource, thanks Robin.</p>
<p>Have you considered getting yourself a github account to make it even easier for folks to see your code and, just as importantly, to see modifications and alternative versions (branches)?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9033"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Thu, 10/01/2013 - 23:09.</div>
    <div class="content">
     <p><em>Have you considered getting yourself a github account to make it even easier for folks to see your code and, just as importantly, so see modifications and alternative versions (branches)?</em></p>
<p>No, not really, Jack, because I don&#39;t see how it would bring any benefits - just extra work for me.&nbsp; If there were several people working on the same task in some co-ordinated way, then that would be different.&nbsp;</p>
<p>My various sketches haven&#39;t all evolved from the same place, they have been assembled as necessary to meet the need of the day.&nbsp; FWIW, I think my code is mighty easy for folks to see already!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9035"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2484.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2484.jpg" alt="jack_kelly&#039;s picture" title="jack_kelly&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/2484.html" title="View user profile.">jack_kelly</a> on Fri, 11/01/2013 - 14:03.</div>
    <div class="content">
     <p>There certainly is a bit of hassle involved in setting up a repository for the first time but once it&#39;s setup it&#39;s very easy to maintain (probably easier than attaching code archives to forum posts).&nbsp; Some benefits of using github:</p>
<ul>
<li>
		full version control (so you can easily make modifications and then switch back if the modifications don&#39;t work out)</li>
<li>
		easy management of different versions</li>
<li>
		issue tracker for handling bugs and feature requests (this is really useful even if you&#39;re working on a solo project)&nbsp; e.g. you start feature request for each feature idea you have and this provides a single place to keep all your ideas about that feature and you can reference feature requests from git commits... if you also limit each commit to only cover a single issue then it makes life much easier if you ever have to backtrack.</li>
<li>
		wiki for writing user manuals etc</li>
<li>
		the code is presented on the web using syntax highlighting and you can link from forum posts to specific lines of code</li>
<li>
		people can submit patches really easily (you have total control over whether or not to accept those patches)</li>
<li>
		and more...</li>
</ul>
<p>But, as you say, your code is already very easy for people to get a hold of.... it just strikes me that you now have a significant body of code that you&#39;re very kindly sharing with the community.&nbsp; You might actually make your own life *easier* by maintaining that code on github (or a similar service - I&#39;m in no way affiliated with github!)&nbsp; Github is specifically designed to help people &quot;code socially&quot;.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9037"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 11/01/2013 - 10:57.</div>
    <div class="content">
     <p>OK Jack, I look forward to inspecting your code on Github in due course :-)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9039"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1774.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1774.jpg" alt="PaulOckenden&#039;s picture" title="PaulOckenden&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/1774.html" title="View user profile.">PaulOckenden</a> on Fri, 11/01/2013 - 11:56.</div>
    <div class="content">
     <p>There&#39;s loads of Jack&#39;s code on Github!!!!</p>
<p>&nbsp;</p>
<p>P.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9042"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 11/01/2013 - 12:40.</div>
    <div class="content">
     <p>Great, but what does it all do, and which parts can be relied upon to work as intended?&nbsp;</p>
<p>Probing around someone else&#39;s area, just to see what&#39;s there, doesn&#39;t sound a very efficient process to me.&nbsp; Much better to be pointed towards a known version when it&#39;s ready for inspection/use by others.</p>
<p>There&#39;s lots of code on my hard drive that hasn&#39;t made the cut!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9045"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2484.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-2484.jpg" alt="jack_kelly&#039;s picture" title="jack_kelly&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/2484.html" title="View user profile.">jack_kelly</a> on Fri, 11/01/2013 - 15:45.</div>
    <div class="content">
     <blockquote><p><em>Great, but what does it all do, and which parts can be relied upon to work as intended?</em></p>
</blockquote>
<p>Those questions should all be answered in the project&#39;s short description, the README or in the project&#39;s wiki (assuming the author has taken the time to write this documentation.&nbsp; Taking my github projects as an example: some have documentation (<a href="https://github.com/JackKelly/rfm_edf_ecomanager/wiki">e.g.</a>) but by no means all!&nbsp; One day, one day...)&nbsp; The project&#39;s &quot;issue tracker&quot; might also give some information about how reliable the code is&nbsp; (e.g. if there a loads of unfixed bugs in the issue tracker).</p>
<blockquote><p><em>better to be pointed towards a known version when it&#39;s ready for inspection/use by others</em></p>
</blockquote>
<p>In an ideal world, the default branch of each github project should be fairly stable: any experimental features should go in an &quot;experimental&quot; branch.&nbsp; And yes, I agree, all projects have an &quot;incubation&quot; period where the code is so immature that it should never see the light of day (and I&#39;ve certainly made the mistake of putting such immature code onto github in the past); but once the code is vaguely stable it seems like a good idea to allow users access to every update you make to the code, as soon as you write (and test) that update.</p>
<blockquote><p><em>There&#39;s lots of code on my hard drive that hasn&#39;t made the cut!</em></p>
</blockquote>
<p>That&#39;s certainly a problem with github: there&#39;s lots of code on there (including in my own repositories) which are failed / abandoned attempts at something, and wading through that cruft can be time consuming.</p>
<p>I really didn&#39;t mean to start a debate over which software development practices are &quot;best&quot;.&nbsp; It just occurred to me that using github for your code might have benefits (i.e. save you time in the long run).&nbsp; If you&#39;re not interested then I certainly don&#39;t mean to come across like I&#39;m &quot;selling&quot; github.&nbsp; Each to their own.&nbsp; As you say, your current strategy works very well.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9046"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 11/01/2013 - 14:54.</div>
    <div class="content">
     <p>My problem with Github is I know how to <em><u>drive</u></em> it, for example to maintain up-to-date local copies of emonLib and the examples, but I haven&#39;t figured out how to <em><u>use</u></em> it to my best advantage when I am not a developer, or when I am developing but working on my own with a local repository - and that&#39;s not the same thing.</p>
<p>I came across <a href="http://www.syncfusion.com/Content/downloads/ebook/Git_Succinctly.pdf">this</a> a few days ago - I&#39;ve yet to read it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9048"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 11/01/2013 - 16:31.</div>
    <div class="content">
     <p><em>Each to their own.&nbsp; As you say, your current strategy works very well.&nbsp;</em></p>
<p>Well, that&#39;s not really for me to say, but I certainly hope that my &#39;strategy&#39; - such as it is - is useful to others.&nbsp;</p>
<p>Thanks for your vote of support :D</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10215"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 01/03/2013 - 21:31.</div>
    <div class="content">
     <p>Robin, as always a great read, and thanks for all the work that you have done.<br />
	Just a quick question - in your article you mention using a EmonTX&nbsp;and wondered if the captured data is integrated into the &#39;bigger&#39; openenergymonitor system via the RFM12B to a EmonBase? and if so, do you average out the data (as it normally updates every 6 seconds or so).</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10223"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 02/03/2013 - 09:56.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>Although my name is given at the top of each page, not all of what you see is my own work.&nbsp; A couple of pages in that article are not actually mine at all!&nbsp; Much has been added by our editor-in-chief who prefers to do his good work quietly in the background.&nbsp;</p>
<p>My personal experience with EmonTx and RF kit is minimal, to the extent that I&#39;m struggling to control an LED at the other side of the room.&nbsp; I know that others have successfully developed PV Router code with various RF capabilities.&nbsp; This kind of material will hopefully appear in the appropriate places in due course.</p>
<p>Robin</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31004"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8226.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dockarl&#039;s picture" title="dockarl&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/8226.html" title="View user profile.">dockarl</a> on Sun, 07/06/2015 - 11:03.</div>
    <div class="content">
     <p>That&#39;s brilliant Robin - I&#39;m going to try to adapt your system for use in my semi-offgrid environment - at the moment only one circuit in our house is off-grid (I use that circuit to test offgrid hardware before I field deploy for my telecommunications business). We have plenty of excess power during the summer and I think I&#39;ll use the DC voltage of the system to initiate and moderate a &#39;bleed off&#39; to our immersion heater (currently on an &#39;on grid&#39; circuit)&nbsp;once the batteries are at absorb.</p>
<p>Nice elegant code, by the way :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32403"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8466.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fcoelho&#039;s picture" title="fcoelho&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/8466.html" title="View user profile.">fcoelho</a> on Mon, 20/07/2015 - 14:46.</div>
    <div class="content">
     <p>Dear all,&nbsp;</p>
<p>I am using Mk2_PV_Router_mini_3 without problems with arduino mega.</p>
<p>But, i can not your later versions, i can compile without errors , but i get always time-out erros when downloading any specific programming that only works with arduin uno ?</p>
<p>example : Mk2a_PV_Router.ino and latest versions .</p>
<p>Each time i try to download into arduino i get a time-out of communications.</p>
<p>Any help will be appreciated.</p>
<p>&nbsp;</p>
<p>Best Regards,</p>
<p>TIA.</p>
<p>&nbsp;</p>
<p>F. Coelho</p>
<p>&nbsp;</p>
<p><i>[Did you not see the forum topic "IF YOUR POST ISN'T VISIBLE IMMEDIATELY, HERE'S WHY"?</p>
<p>You posted the same message 4 times. Please do not do it again, you waste everybody's time that way.]</i></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32413"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Mon, 20/07/2015 - 19:34.</div>
    <div class="content">
     <p>Maybe there is a problem with your libraries.&nbsp; The original Mk2 Router sketch did not use any libraries, but most of the more recent versions need them:</p>
<p>TimerOne is for hardware timers</p>
<p>Jeelib is for the RF module</p>
<p>OneWire is for temperature sensing.</p>
<p>Near to the top of the sketch you should be able to see which libraries you need.&nbsp;</p>
<p>I hope this helps.&nbsp; You didn&#39;t need to send me a private message too.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32429"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8466.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fcoelho&#039;s picture" title="fcoelho&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/8466.html" title="View user profile.">fcoelho</a> on Tue, 21/07/2015 - 11:29.</div>
    <div class="content">
     <p>Robin,</p>
<p>Many thanks for your quick reply.</p>
<p>I understand that with &quot;i&quot; versions there is some special include like &quot;timer1&quot;, and i get an error when compling ( but it is normal i dont have the&nbsp; library for compling), but for &nbsp; &quot;Mk2a_PV_Router_rev3&quot; i didnt see special includes. It compiles OK. but when downloading i get the time-out and i can not download the code.</p>
<p>With &quot;Mk2_PV_Router_mini_3&quot;&nbsp; there is no downloading problem.</p>
<p>questions:</p>
<p>1) Arduino IDE version: 1.0.5r2&nbsp; can be the problem ?</p>
<p>2) In pratical terms What are really the advantages of&nbsp; &quot;Mk2a&quot; and&nbsp; &quot;i&quot; version vs. Mk2_PV_Router_mini_3 ?</p>
<p>&nbsp;</p>
<p>TIA</p>
<p>&nbsp;</p>
<p>F. Coelho</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32441"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Tue, 21/07/2015 - 15:03.</div>
    <div class="content">
     <p><em>2) In pratical terms What are really the advantages of&nbsp; &quot;Mk2a&quot; and&nbsp; &quot;i&quot; version vs. Mk2_PV_Router_mini_3 ?</em></p>
<p>In practical terms, there are no advantages.&nbsp; &quot;mini_3&quot; will heat water just as well as any other Mk2 version, and the code is a lot simpler to understand.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32608"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8466.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fcoelho&#039;s picture" title="fcoelho&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/8466.html" title="View user profile.">fcoelho</a> on Sat, 25/07/2015 - 17:49.</div>
    <div class="content">
     <p>Robin,</p>
<p>Many thanks for your help. Now the system it is locally working, but the real diverter load is far....</p>
<p>Is it possible to have the Triac circuit block out side the&nbsp; &quot;Mk2 PV router box&quot; , that means connect both parts using a RJ45 TP cable with about 30m ?&nbsp;</p>
<p>Note: the trigger to MOC ic Is 5V can be changed with 12V and&nbsp; change of the resistor ? what is the Resistor value recommend in this case</p>
<p>Have you made something like that, have you other more&nbsp; simple suggestion (not using RF)</p>
<p>&nbsp;</p>
<p>TIA</p>
<p>&nbsp;</p>
<p>F. Coelho</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32620"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 25/07/2015 - 20:24.</div>
    <div class="content">
     <p>Robin might not be able to answer you for a little while.</p>
<p>Yes, you can separate the "controller" from the "load switch". I put together exactly that for a friend. Due to illness and an impending house move, it was never installed, but on test it worked faultlessly on "telephone" unscreened twisted pair cable with a length of probably about 80 m (estimated, it was on a drum), using an emonTx running at 3.3 V. Therefore, I do not expect a problem with Cat 5 cable. It may be better not to use screened cable.</p>
<p>Why do you want to run the trigger from 12 V? Voltage drop in the cable should not be a problem at only 20-30 mA over 30 m. The Arduino cannot run at that voltage? A quick estimate of the resistor value for a 12 V supply is 470 &Omega;, which will give a LED current of around 22 mA (the MOC3041 requires > 15 mA to guarantee to trigger).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32627"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8466.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fcoelho&#039;s picture" title="fcoelho&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/8466.html" title="View user profile.">fcoelho</a> on Sat, 25/07/2015 - 23:05.</div>
    <div class="content">
     <p>Robin,</p>
<p>Many thanks for your ultrafast answer. I will follow you recomendations.</p>
<p>I will give you the feedback when ready.</p>
<p>Best Regards,</p>
<p>&nbsp;</p>
<p>F. Coelho.</p>
<p>
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33083"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8466.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fcoelho&#039;s picture" title="fcoelho&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/8466.html" title="View user profile.">fcoelho</a> on Thu, 06/08/2015 - 19:36.</div>
    <div class="content">
     <p>Robin,</p>
<p>First , The&nbsp; separation of&nbsp; the &quot;controller&quot; from the &quot;load switch&quot;&nbsp; was a success.</p>
<p>Second, I have from the past (not related to the separation of controller and switch) a strange behaviour , i can explain in order to get some help&nbsp;</p>
<p>I have a PV with output of 4A ( maximum) , when i connect a electrical motor( 10A) , the current measured in the neutral in the main cabinet CT is ( 6A) absorved by the system from the grid, it is correct</p>
<p>But for example if have the MK2 PV router running and the PV has 4A&nbsp; with the electrical motor is off, the energy goes correctly to the load ( absorving de 4 A) , the current indication in the neutral of the electrical cabinet is about 4A and not near 0A, because the balance is near zero. The power it is near zero float a little.</p>
<p>There are two CT measurement systems in the neutral.</p>
<p>One generic based on open energymonitor&nbsp; sending via ethernet from 6 to 6 seconds, and was calibrated with a known load and if the MK2 it is working the values are correct.</p>
<p>The other is connected to the MK2 power router also calibrated. The sign of the connection it is ok , because when i reverse it the power go to the load always.</p>
<p>The power given by MK2 router it is near zero and i think it is correct but the current is about 4A stable .</p>
<p>where really is the Problem? How the flicker mode influences the values. Any explanation ?</p>
<p>&nbsp;</p>
<p>TIA</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33088"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Robin's Mk2 Code variants and associated tools.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 06/08/2015 - 22:57.</div>
    <div class="content">
     <p>Fernando, I am not Robin! Robin cannot answer at the moment.</p>
<p>I think I do not understand your problem. </p>
<p>First, what sort of motor do you have, and do you know what the power factor is? This might be important because the Mk2 energy diverter works on energy, not on current. Therefore, if your motor has a power factor of 0.6, it might be drawing a current of 10 A, but the power will be equivalent to a heater that draws only 6 A.</p>
<p>Second, what is the "generic [CT measurement system] based on open energymonitor sending via ethernet..."  Is it an emonTx or an Arduino, do you have a voltage sensor and a current sensor and which sketch are you using?</p>
<p>When "The power given by MK2 router it is near zero", how do you know that? Is it your energy supplier's meter that tells you?<br />
And when that is so, which system measures the current of 4 A?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/1757"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-N23ruxA_Q8jzIbErUxrl5uoITUKRmRN9239rV3_2Jqk" value="form-N23ruxA_Q8jzIbErUxrl5uoITUKRmRN9239rV3_2Jqk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
