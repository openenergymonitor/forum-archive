<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/4947 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emoncms WAMP problem | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emoncms WAMP problem</h3>
        <span class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Mon, 07/04/2014 - 08:34</span>
        <div class="content"><p>I have a problem with Emoncms 8.08 running on WAMP (on a Windows Home server) which happens every now and then (roughly one to two times a day in irregular intervals).</p>
<p>I am measuring consumption with an Emontx, send this to a Jeelink (mounted to my Home server) via RF and then use a script to send the data to the Emoncms running on this same server.</p>
<p>First thing I can see is that there is missing data in the graphs (straight line). The data is missing for exactly two hours (~+0-3 minutes) then everything works as before. If I look into the log of the python script, I see that the data is send every 10 seconds (my measuring interval on the EmonTx)&nbsp; to the apache server and the server responds correctly with an &#39;ok&#39;.</p>
<p>In the apache access log I see the following (just a snippet):</p>
<pre>
127.0.0.1 - - [07/Apr/2014:08:46:19 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=25,67,195,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:08:46:29 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=24,67,194,226 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:08:46:39 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=21,67,193,226 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:08:46:49 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=20,66,193,226 HTTP/1.1&quot; 200 2
192.168.0.111 - - [07/Apr/2014:08:46:58 +0200] &quot;GET /emoncms/feed/timevalue.json
?id=20 HTTP/1.1&quot; 200 33
192.168.0.111 - - [07/Apr/2014:08:46:58 +0200] &quot;GET /emoncms/feed/list.json
?userid=1 HTTP/1.1&quot; 200 876
127.0.0.1 - - [07/Apr/2014:10:15:55 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=13,67,193,226 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:55 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=10,67,194,226 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:55 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=8,66,193,226 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:55 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=7,66,194,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:55 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=5,66,194,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:56 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=3,67,194,228 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:56 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=1,66,195,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:56 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-1,66,194,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:56 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-3,66,194,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:56 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-5,66,194,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:56 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-7,66,193,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:56 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-7,67,194,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:56 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-10,66,223,228 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:56 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-11,66,222,228 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-12,66,191,228 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-14,67,278,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-15,66,314,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-16,78,326,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-16,92,335,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-16,93,332,228 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-16,92,330,228 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-16,92,325,228 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-16,92,315,228 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-15,94,331,228 HTTP/1.1&quot; 200 2
127.0.0.1 - - [07/Apr/2014:10:15:57 +0200] &quot;GET /emoncms/input/post.json
?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-15,94,334,228 HTTP/1.1&quot; 200 2</pre><p>So, until 8:46 the data is received every 10 seconds. Then no access any more (apart from the two requests by 192.168.0.111, my mobile phone). Then, suddenly at ~ 10:15:55 (at this time, I did a &#39;restart all services&#39; on the apache), all the &#39;missing&#39; data seems to &#39;stream in&#39; within seconds (I have already seen one data message every ~15ms) . Even worse, the data is not even in the correct sequence!!! I can tell this by comparing to the python log.</p>
<p>Does anybody have an idea how this can happen? Where is this data &#39;stored&#39; in the mean time (between &#39;transmission&#39; in the Python script (plus ACK!)and &#39;reception&#39; by the apache server)?</p>
<p>The apache server is unresponsive during these two hours, means that I get no response in the browser.</p>
<p>(Is it possible to format the log so that it is readable but does not overwrite the &#39;Active forum topics&#39;?)</p>
<p>[Edited - line breaks added between &quot;json&quot; &amp; &quot;?&quot; - Moderator (RW)]</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5003.html" class="topic-previous" title="Go to previous forum topic">‹ Logging delta pulse counts</a>
              <a href="4998.html" class="topic-next" title="Go to next forum topic">POST JSON bulk data to input using CURL and C ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-20560"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Mon, 07/04/2014 - 09:38.</div>
    <div class="content">
     <p>The oem_gateway&nbsp;buffers the requests in memory when they can&#39;t be delivered to the server. When connectivity is restored it then submits all backed up transactions in chronological order.</p>
<p>If you deliberately took Apache down for 2h maintenance this is the behaviour you would see. In your case you need to establish why Apache is dropping out for these periods. At least because you&#39;re using the gateway you don&#39;t actually lose any data :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20564"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 07/04/2014 - 09:54.</div>
    <div class="content">
     <blockquote><p>Even worse, the data is not even in the correct sequence!!!</p>
</blockquote>
<p>This is problematic. I fixed a bug in the gateway a long time ago to make sure the data is sent in the correct order, since some post-processing actions rely on this order. I understand your gateway log attests this is done correctly. But if the http GET are treated in random order, the processing chain is spoiled.</p>
<p>I don&#39;t know what we can do about that. Add a small interval between two data posts and cross fingers (scary) ? Modify the post-processing to allow data insertion (breaks everything) ? Forget about data buffering (too bad) ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20572"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Mon, 07/04/2014 - 11:14.</div>
    <div class="content">
     <p>Sorry, Dave, J&eacute;r&ocirc;me, I am not yet using the OEM-Gateway :-(</p>
<p>And, because all the (held back) data arrives within a few seconds (without the original time information), they are actually &#39;lost&#39; (they will not correctly &#39;fill up&#39; the gap). This might be different with the OEM-Gateway, though.</p>
<p>Is there an explanation why apache answers with an &#39;ok&#39;? But does not notify the &#39;access&#39; in the acces.log? And the data is actually not written to the data base?</p>
<p>Thank you very much for your assistance!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20573"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Mon, 07/04/2014 - 11:18.</div>
    <div class="content">
     <p>OK, you confused me by referring to Python. The emoncms Pi module is written in PHP, I think?</p>
<p>To be honest I would just switch to the oem_gateway. It&#39;s a lot more robust and I think you may find it back-fills the data to the correct time slots after an outage.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20574"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Mon, 07/04/2014 - 11:38.</div>
    <div class="content">
     <p>Sorry Dave, did not want to confuse you :-)</p>
<p>I am referring to a Python script that is used to read serial data from a Jeelink (usb module with RFM12B transceiver). From here: <a href="https://github.com/emoncms/development/blob/master/Tutorials/Python/PyLink/pylink.py">https://github.com/emoncms/development/blob/master/Tutorials/Python/PyLink/pylink.py</a></p>
<p>I have to find out how to use the OEM Gateway on my Windows home server. Then I might switch to that.</p>
<p>I am still wondering why apache (or who?) is answering the GET request with &#39;ok&#39; but does not &#39;process&#39; it.</p>
<p>&nbsp;</p>
<p>part of the Python script:</p>
<pre>
while(1)
        ....

        req = &quot;node=&quot;+str(nodeid)+&quot;&amp;csv=&quot;+&#39;,&#39;.join(datacsv)
        print req,&quot;: &quot;,

        # Send to emoncms
        conn = httplib.HTTPConnection(domain)
    try:
        conn.request(&quot;GET&quot;, &quot;/&quot;+emoncmspath+&quot;/input/post.json?apikey=&quot;+apikey+&quot;&amp;&quot;+req)
        response = conn.getresponse()
    except:
        print &quot;Emoncms server not available!&quot;
    else:
        print response.read()</pre><p>always shows:</p>
<pre>
node=10&amp;csv=-814,101,172,222 :  ok
node=10&amp;csv=-893,100,172,223 :  ok
node=10&amp;csv=-918,103,175,224 :  ok</pre><p>in the console output.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20575"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 07/04/2014 - 12:02.</div>
    <div class="content">
     <p>Oh, so your base is a Windows PC with a Jeelink USB module.</p>
<p>I suppose you could have the OEM Gateway run on that. I don&#39;t expect blocking issues.</p>
<p>Well, in fact, it depends how you communicate with the Jeelink module (how you setup groupe, node id and freq), but I think the RFM2Pi is based on Jeelink, so I&#39;m quite confident.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20576"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Mon, 07/04/2014 - 12:18.</div>
    <div class="content">
     <p>I just &#39;saw&#39; it happen again!</p>
<p>Now what I saw is a bit different to what I thought before (just not enough info in the logs). It seems that the Python script is &#39;stalled&#39; for just a while. It prints:</p>
<pre>
node=10&amp;csv=-814,101,172,222 :</pre><p>and is stuck there. No response (&#39;ok&#39;) and also no error message. Then after a bit more than two minutes it sent out all the data that was in the input buffer (serial input buffer?) within a few seconds. Does it run with such a low priority that it does not get any processing time?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20578"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 07/04/2014 - 13:08.</div>
    <div class="content">
     <p>Could be a connection issue, script stalled waiting for an answer, timeout too long.</p>
<p>Timeout are not as simple as it seems. I have a timeout issue in the OEM Gateway, too:</p>
<p><a href="https://github.com/Jerome-github/oem_gateway/issues/1" title="https://github.com/Jerome-github/oem_gateway/issues/1">https://github.com/Jerome-github/oem_gateway/issues/1</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20626"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Wed, 09/04/2014 - 08:07.</div>
    <div class="content">
     <p>I am not sure if it really matters, but I am now running the Python shell with administrative rights (&#39;start as administrator&#39;).&nbsp; Possibly coincidence, but I have not had any of the above mentioned problems since then.</p>
<p>(the other change I made was to set a timeout in HTTPConnection():</p>
<pre>
conn = httplib.HTTPConnection(domain<strong>, timeout=10</strong>)</pre><p>I have no idea if this really does something)</p>
<p>J&ouml;rg.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20636"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Wed, 09/04/2014 - 11:17.</div>
    <div class="content">
     <p>Isn&#39;t the timeout change enough to solve the issue ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20721"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6168.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6168.jpg" alt="camilosti&#039;s picture" title="camilosti&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/6168.html" title="View user profile.">camilosti</a> on Sat, 12/04/2014 - 14:35.</div>
    <div class="content">
     <p>Hello everyone.<br />
	I am having a very similar problem on my local installation. Apache stops responding, the browser disconnects emoncms or waits indefinitely.<br />
	If Apache restart everything works again, after a very long time not happen again.<br />
	I&#39;m using Windows XP, Wamp. Emoncms 8.0.6 and 8.1.1 give the same fault on two different PC, the other is in Windows 7.<br />
	The apache log shows:</p>
<p>[Fri Apr 11 08:38:45.671875 2014] [mpm_winnt:notice] [pid 2656:tid 264] AH00422: Parent: Received shutdown signal -- Shutting down the server.<br />
	[Fri Apr 11 08:38:54.656250 2014] [mpm_winnt:notice] [pid 2948:tid 1884] AH00364: Child: All worker threads have exited.<br />
	[Fri Apr 11 08:38:59.703125 2014] [mpm_winnt:notice] [pid 2656:tid 264] AH00430: Parent: Child process 2948 exited successfully.<br />
	[Fri Apr 11 10:33:09.171875 2014] [ssl:warn] [pid 2340:tid 264] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br />
	[Fri Apr 11 10:33:10.296875 2014] [mpm_winnt:notice] [pid 2340:tid 264] AH00455: Apache/2.4.4 (Win32) OpenSSL/0.9.8y PHP/5.4.16 configured -- resuming normal operations<br />
	[Fri Apr 11 10:33:10.312500 2014] [mpm_winnt:notice] [pid 2340:tid 264] AH00456: Server built: Feb 23 2013 13:07:34<br />
	[Fri Apr 11 10:33:10.312500 2014] [core:notice] [pid 2340:tid 264] AH00094: Command line: &#39;c:\\wamp\\bin\\apache\\apache2.4.4\\bin\\httpd.exe -d C:/wamp/bin/apache/Apache2.4.4&#39;<br />
	[Fri Apr 11 10:33:10.328125 2014] [mpm_winnt:notice] [pid 2340:tid 264] AH00418: Parent: Created child process 532<br />
	[Fri Apr 11 10:33:12.921875 2014] [ssl:warn] [pid 532:tid 1884] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br />
	[Fri Apr 11 10:33:13.109375 2014] [mpm_winnt:notice] [pid 532:tid 1884] AH00354: Child: Starting 150 worker threads.<br />
	[Fri Apr 11 10:48:11.343750 2014] [:error] [pid 532:tid 580] [client 192.168.0.13:1084] Message sent<br />
	[Fri Apr 11 10:48:53.046875 2014] [:error] [pid 532:tid 612] [client 192.168.0.13:1088] Message sent<br />
	[Fri Apr 11 10:53:12.718750 2014] [mpm_winnt:notice] [pid 2340:tid 264] AH00422: Parent: Received shutdown signal -- Shutting down the server.<br />
	[Fri Apr 11 10:53:14.734375 2014] [mpm_winnt:notice] [pid 532:tid 1884] AH00364: Child: All worker threads have exited.<br />
	[Fri Apr 11 10:53:15.031250 2014] [mpm_winnt:notice] [pid 2340:tid 264] AH00430: Parent: Child process 532 exited successfully.<br />
	[Fri Apr 11 10:53:21.359375 2014] [ssl:warn] [pid 2940:tid 264] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br />
	[Fri Apr 11 10:53:21.828125 2014] [mpm_winnt:notice] [pid 2940:tid 264] AH00455: Apache/2.4.4 (Win32) OpenSSL/0.9.8y PHP/5.4.16 configured -- resuming normal operations<br />
	[Fri Apr 11 10:53:21.828125 2014] [mpm_winnt:notice] [pid 2940:tid 264] AH00456: Server built: Feb 23 2013 13:07:34<br />
	[Fri Apr 11 10:53:21.828125 2014] [core:notice] [pid 2940:tid 264] AH00094: Command line: &#39;c:\\wamp\\bin\\apache\\apache2.4.4\\bin\\httpd.exe -d C:/wamp/bin/apache/Apache2.4.4&#39;<br />
	[Fri Apr 11 10:53:21.828125 2014] [mpm_winnt:notice] [pid 2940:tid 264] AH00418: Parent: Created child process 2240<br />
	[Fri Apr 11 10:53:25.484375 2014] [ssl:warn] [pid 2240:tid 1884] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br />
	[Fri Apr 11 10:53:25.687500 2014] [mpm_winnt:notice] [pid 2240:tid 1884] AH00354: Child: Starting 150 worker threads.<br />
	[Fri Apr 11 10:53:35.281250 2014] [:error] [pid 2240:tid 584] [client 192.168.0.13:1127] Message sent<br />
	[Fri Apr 11 10:58:12.718750 2014] [mpm_winnt:notice] [pid 2940:tid 264] AH00422: Parent: Received shutdown signal -- Shutting down the server.<br />
	[Fri Apr 11 10:58:14.718750 2014] [mpm_winnt:notice] [pid 2240:tid 1884] AH00364: Child: All worker threads have exited.<br />
	[Fri Apr 11 10:58:15.078125 2014] [mpm_winnt:notice] [pid 2940:tid 264] AH00430: Parent: Child process 2240 exited successfully.<br />
	[Fri Apr 11 10:59:39.187500 2014] [ssl:warn] [pid 2560:tid 264] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br />
	[Fri Apr 11 10:59:39.953125 2014] [mpm_winnt:notice] [pid 2560:tid 264] AH00455: Apache/2.4.4 (Win32) OpenSSL/0.9.8y PHP/5.4.16 configured -- resuming normal operations<br />
	[Fri Apr 11 10:59:39.953125 2014] [mpm_winnt:notice] [pid 2560:tid 264] AH00456: Server built: Feb 23 2013 13:07:34<br />
	[Fri Apr 11 10:59:39.953125 2014] [core:notice] [pid 2560:tid 264] AH00094: Command line: &#39;c:\\wamp\\bin\\apache\\apache2.4.4\\bin\\httpd.exe -d C:/wamp/bin/apache/Apache2.4.4&#39;<br />
	[Fri Apr 11 10:59:39.953125 2014] [mpm_winnt:notice] [pid 2560:tid 264] AH00418: Parent: Created child process 2408<br />
	[Fri Apr 11 10:59:41.968750 2014] [ssl:warn] [pid 2408:tid 1884] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br />
	[Fri Apr 11 10:59:42.093750 2014] [mpm_winnt:notice] [pid 2408:tid 1884] AH00354: Child: Starting 150 worker threads.<br />
	[Fri Apr 11 11:04:05.218750 2014] [:error] [pid 2408:tid 596] [client 192.168.0.13:1202] Message sent<br />
	[Fri Apr 11 11:04:47.437500 2014] [:error] [pid 2408:tid 580] [client 192.168.0.13:1205] Message sent<br />
	[Fri Apr 11 11:05:29.906250 2014] [:error] [pid 2408:tid 612] [client 192.168.0.13:1210] Message sent<br />
	[Fri Apr 11 11:06:00.281250 2014] [mpm_winnt:warn] [pid 2408:tid 280] (OS 64)El nombre de red especificado ya no est\E1 disponible.&nbsp; : AH00341: winnt_accept: Asynchronous AcceptEx failed.<br />
	[Fri Apr 11 11:06:11.843750 2014] [:error] [pid 2408:tid 580] [client 192.168.0.13:1215] Message sent<br />
	[Fri Apr 11 11:06:54.062500 2014] [:error] [pid 2408:tid 580] [client 192.168.0.13:1218] Message sent<br />
	[Fri Apr 11 11:13:59.437500 2014] [mpm_winnt:notice] [pid 2560:tid 264] AH00422: Parent: Received shutdown signal -- Shutting down the server.<br />
	[Fri Apr 11 11:14:01.437500 2014] [mpm_winnt:notice] [pid 2408:tid 1884] AH00364: Child: All worker threads have exited.<br />
	[Fri Apr 11 11:14:01.656250 2014] [mpm_winnt:notice] [pid 2560:tid 264] AH00430: Parent: Child process 2408 exited successfully.<br />
	[Fri Apr 11 11:14:04.687500 2014] [ssl:warn] [pid 4032:tid 264] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br />
	[Fri Apr 11 11:14:05.000000 2014] [mpm_winnt:notice] [pid 4032:tid 264] AH00455: Apache/2.4.4 (Win32) OpenSSL/0.9.8y PHP/5.4.16 configured -- resuming normal operations<br />
	[Fri Apr 11 11:14:05.000000 2014] [mpm_winnt:notice] [pid 4032:tid 264] AH00456: Server built: Feb 23 2013 13:07:34<br />
	[Fri Apr 11 11:14:05.000000 2014] [core:notice] [pid 4032:tid 264] AH00094: Command line: &#39;c:\\wamp\\bin\\apache\\apache2.4.4\\bin\\httpd.exe -d C:/wamp/bin/apache/Apache2.4.4&#39;<br />
	[Fri Apr 11 11:14:05.000000 2014] [mpm_winnt:notice] [pid 4032:tid 264] AH00418: Parent: Created child process 2416<br />
	[Fri Apr 11 11:14:06.921875 2014] [ssl:warn] [pid 2416:tid 1884] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br />
	[Fri Apr 11 11:14:07.046875 2014] [mpm_winnt:notice] [pid 2416:tid 1884] AH00354: Child: Starting 150 worker threads.<br />
	[Fri Apr 11 11:16:26.812500 2014] [:error] [pid 2416:tid 604] [client 127.0.0.1:1805] 0, referer: <a href="http://localhost/emoncms/event" title="http://localhost/emoncms/event">http://localhost/emoncms/event</a><br />
	[Fri Apr 11 11:16:52.062500 2014] [:error] [pid 2416:tid 612] [client 127.0.0.1:1819] Message sent, referer: <a href="http://localhost/emoncms/event" title="http://localhost/emoncms/event">http://localhost/emoncms/event</a><br />
	[Fri Apr 11 11:21:24.625000 2014] [mpm_winnt:warn] [pid 2416:tid 208] (OS 64)El nombre de red especificado ya no est\E1 disponible.&nbsp; : AH00341: winnt_accept: Asynchronous AcceptEx failed.<br />
	[Fri Apr 11 11:27:48.062500 2014] [mpm_winnt:warn] [pid 2416:tid 208] (OS 64)El nombre de red especificado ya no est\E1 disponible.&nbsp; : AH00341: winnt_accept: Asynchronous AcceptEx failed.<br />
	[Fri Apr 11 11:27:48.062500 2014] [mpm_winnt:warn] [pid 2416:tid 208] (OS 64)El nombre de red especificado ya no est\E1 disponible.&nbsp; : AH00341: winnt_accept: Asynchronous AcceptEx failed.<br />
	[Fri Apr 11 11:28:38.062500 2014] [mpm_winnt:warn] [pid 2416:tid 208] (OS 64)El nombre de red especificado ya no est\E1 disponible.&nbsp; : AH00341: winnt_accept: Asynchronous AcceptEx failed.</p>
<p>Any tips?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20736"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms WAMP problem</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Sun, 13/04/2014 - 12:58.</div>
    <div class="content">
     <p><em>&quot;Isn&#39;t the timeout change enough to solve the issue ?&quot;</em></p>
<p>Possibly yes, but I do not know!?&nbsp;</p>
<p>System was running ok during the last few days, but today I had a similar problem again. Apache stopped responding to the messages again. If I look into the apache access log (the error log shows nothing) then I see that it became unresponsive again after the following:</p>
<pre>
....
127.0.0.1 - - [13/Apr/2014:14:05:52 +0200] &quot;GET /emoncms/input/post.json?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-231,170,310,227 HTTP/1.1&quot; 200 2
127.0.0.1 - - [13/Apr/2014:14:06:02 +0200] &quot;GET /emoncms/input/post.json?apikey=5049a05b53942b6ac122351be5f4f02c&amp;node=10&amp;csv=-232,159,312,227 HTTP/1.1&quot; 200 2
192.168.0.122 - - [13/Apr/2014:14:06:09 +0200] &quot;GET /emoncms/feed/list.json?apikey=5049a05b53942b6ac122351be5f4f02c HTTP/1.1&quot; 200 881
192.168.0.122 - - [13/Apr/2014:14:06:10 +0200] &quot;GET /emoncms/feed/list.json?userid=1 HTTP/1.1&quot; 200 881
192.168.0.122 - - [13/Apr/2014:14:06:11 +0200] &quot;GET /emoncms/feed/timevalue.json?id=20 HTTP/1.1&quot; 200 33</pre><p>(Messages from 127.0.0.1 come from the Python script sending data received from a Jeelink, 192.168.0.122 is my mobile phone)</p>
<p>It seems that apache always stops responding only after these accesses by another client (or other clients in general ?).&nbsp; Is there any good reason for this?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/4947"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-ptbuKbLzKViABe9CfBXcSzED2JfzekQEV_0UuGkIMRw" value="form-ptbuKbLzKViABe9CfBXcSzED2JfzekQEV_0UuGkIMRw"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
