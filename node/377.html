<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/377 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:53:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>New build with erratic RF ? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">New build with erratic RF ?</h3>
        <span class="submitted">Submitted by <a href="../user/572.html" title="View user profile.">robur</a> on Fri, 27/01/2012 - 18:11</span>
        <div class="content"><p>Hi,</p>
<p>I&nbsp;now have my all new emonTx &amp;&nbsp;Nanode RF up and running :-)&nbsp; I&nbsp;am having a few problems though and wondered if anyone has cured similar issues?</p>
<p>I'm using the latest Nanode code and TX code (single CT)&nbsp;- everthing is standard issue.</p>
<p>The data coming through from TX seems to drop a few messages and then pick one up - the spacing seems equal, ie get one drop 3 or get one drop 2... looks like below.</p>
<p>The RX &amp;&nbsp;TX are right next to each other so range cannot be an issue and both have the right frequency - ie 868 on both.</p>
<p>The next problem is the Nanode which definately has stability issues and seems to crash within minutes&nbsp;- this is the second one I&nbsp;have tried (first being ready built) so not so sure its the build.&nbsp; I&nbsp;do have the extra cap in place on the ISP header too.</p>
<p>Any thoughts would be great - cheers.</p>
<p>&nbsp;</p>
<p>[webClient]<br />
DHCP status: 0<br />
{rf_fail:1}<br />
0<br />
DHCP status: 0<br />
RF recieved<br />
{rf_fail:0,ct1:2,battery:3227}<br />
1<br />
DHCP status: 0<br />
{rf_fail:1}<br />
2<br />
DHCP status: 0<br />
{rf_fail:1}<br />
3<br />
DHCP status: 0<br />
{rf_fail:1}<br />
4<br />
DHCP status: 0<br />
RF recieved<br />
{rf_fail:0,ct1:2,battery:3227}<br />
5<br />
DHCP status: 0<br />
{rf_fail:1}<br />
6<br />
DHCP status: 0<br />
{rf_fail:1}<br />
7<br />
DHCP status: 0<br />
{rf_fail:1}<br />
8<br />
DHCP status: 0<br />
RF recieved<br />
{rf_fail:0,ct1:2,battery:3227}<br />
9<br />
DHCP status: 0<br />
{rf_fail:1}<br />
10<br />
&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1179.html" class="topic-previous" title="Go to previous forum topic">‹ How do you set the timezone ?</a>
              <a href="1143.html" class="topic-next" title="Go to next forum topic">emontx newbie help ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-2878"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/572.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-572.jpg" alt="robur&#039;s picture" title="robur&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New build with erratic RF ?</h3>

    <div class="submitted">Submitted by <a href="../user/572.html" title="View user profile.">robur</a> on Fri, 27/01/2012 - 20:31.</div>
    <div class="content">
     <p>Hi,&nbsp; I&nbsp;think I&nbsp;have tracked this down to the Nanode - the Simple RFM12B sketch works well as does the Pachube sketch.... but in all cases the Nanode falls down after a minute or two.&nbsp; The hunt goes on :-)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2879"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/572.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-572.jpg" alt="robur&#039;s picture" title="robur&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New build with erratic RF ?</h3>

    <div class="submitted">Submitted by <a href="../user/572.html" title="View user profile.">robur</a> on Fri, 27/01/2012 - 22:15.</div>
    <div class="content">
     <p>Another update and a couple of questions if thats OK:</p>
<p>- I&nbsp;have updated the Nanode RF&nbsp;bootloader to Optiboot: <span style="font-family: &quot;Calibri&quot;,&quot;sans-serif&quot;; font-size: 11pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-GB; mso-fareast-language: EN-US; mso-bidi-language: AR-SA;"><a href="https://github.com/thiseldo/NanodeBootLoader"><font color="#0000ff">https://github.com/thiseldo/NanodeBootLoader</font></a>&nbsp;worked well and although the Nanode falls over every few minutes it does now pick itself up again thanks to your watchdog code :-)</span></p>
<p><span style="font-family: &quot;Calibri&quot;,&quot;sans-serif&quot;; font-size: 11pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-GB; mso-fareast-language: EN-US; mso-bidi-language: AR-SA;">- I&nbsp;was hoping to slow the RFM12B baud down to about 1200 to increase range - inserting the following line after the initialise usually does the trick but for some reason&nbsp;this causes no data to get exchanged&nbsp;- any idea why? </span><strong><span style="font-family: &quot;Calibri&quot;,&quot;sans-serif&quot;; font-size: 11pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-GB; mso-fareast-language: EN-US; mso-bidi-language: AR-SA;">rf12_control(0xC68F);</span></strong></p>
<p><span style="font-family: &quot;Calibri&quot;,&quot;sans-serif&quot;; font-size: 11pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-GB; mso-fareast-language: EN-US; mso-bidi-language: AR-SA;">- I&nbsp;saw your optiboot 4.4 update on github - just 2 files - can I&nbsp;use these to update the TX bootloader via the Arduino IDE as I&nbsp;did for the Nanode?.... any pointers would be great :-)</span></p>
<p><span style="font-family: &quot;Calibri&quot;,&quot;sans-serif&quot;; font-size: 11pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-GB; mso-fareast-language: EN-US; mso-bidi-language: AR-SA;">Getting there :-)</span></p>
<p><span style="font-family: &quot;Calibri&quot;,&quot;sans-serif&quot;; font-size: 11pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-GB; mso-fareast-language: EN-US; mso-bidi-language: AR-SA;">Cheers,</span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2880"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New build with erratic RF ?</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 27/01/2012 - 22:37.</div>
    <div class="content">
     <p>Yes, the optiboot bootloader on git hub can be used to updated bootloader to Optiboot. Just use a spare arduino connectred as follows and upload the isketch:</p>
<p>&nbsp;</p>
<p><img width="417" height="172" alt="" src="../sites/default/files/screen_shot_2010_05_29_at_025758.png" /></p>
<p><img width="479" height="365" alt="" src="../sites/default/files/screen_shot_2010_06_28_at_165911.png" /></p>
<p>Thanks to JeeLabs.org for connections diagrams:&nbsp;<a href="http://jeelabs.org/2011/05/29/summary-of-isp-options/">http://jeelabs.org/2011/05/29/summary-of-isp-options/</a></p>
<p>Not sure about the RF problem, I've never tried to reduce the speed before. Try the jeelabs forum, also lots of info on RFM12 on JCW's weblog: <a href="http://jeelabs.org/2011/05/29/summary-of-isp-options/">jeelabs.org</a>. He is the author of the RFM12 library.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2881"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/572.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-572.jpg" alt="robur&#039;s picture" title="robur&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New build with erratic RF ?</h3>

    <div class="submitted">Submitted by <a href="../user/572.html" title="View user profile.">robur</a> on Sat, 28/01/2012 - 00:03.</div>
    <div class="content">
     <p>Hi Glyn,</p>
<p>I&nbsp;am hoping to use a TinyUSBisp to flash via the Arduino IDE - is your bootloader different to the Uno one and if so&nbsp;is there a way to flash via the IDE burn bootloader option?&nbsp; If not flashing the Uno bootloader would be straight forward.&nbsp; Thanks again.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2883"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New build with erratic RF ?</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 28/01/2012 - 08:33.</div>
    <div class="content">
     <p>The emonTx bootloader is slightly different. It has a different fuse setting that reduces the brown out voltage to be lower than 2.7V, more info here: <a href="342.html">http://openenergymonitor.org/emon/node/342</a>. But inital tests have suggested that running the emonTx at voltages lower than 2.7V results in lots of RF errors. Therefore the modification may not have much of an effect. The emonTx bootloader also uploads emonTx single CT firmware sketch.&nbsp;</p>
<p>The normal Uno bootloader will work fine.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-2893"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/572.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-572.jpg" alt="robur&#039;s picture" title="robur&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New build with erratic RF ?</h3>

    <div class="submitted">Submitted by <a href="../user/572.html" title="View user profile.">robur</a> on Sun, 29/01/2012 - 18:19.</div>
    <div class="content">
     <p>Hi Glyn, Thanks for your help on this, much appreciated.&nbsp; I&nbsp;think I&nbsp;got it loaded fine via an Arduino - good to try something new.&nbsp; Do you happen to know if there is a sketch which will provide the current bootloader on a board?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-3217"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gazza_ d&#039;s picture" title="gazza_ d&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: New build with erratic RF ?</h3>

    <div class="submitted">Submitted by gazza_ d (not verified) on Sat, 18/02/2012 - 12:46.</div>
    <div class="content">
     <p>Robur</p>
<p>Did you track down the cause of the unstable RF at all? I have a similar issue, but get the rf_fail:1 almost constantly.</p>
<p>The Emonbase ethernet is Ok, as it gets a IP, and posts fine to emoncms. EmonTX seems fine also as the current sensing is working OK (via serial), and with the test_tx and test_rx sketches the 2 devices chatter cheerfully.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6625"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New build with erratic RF ?</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Thu, 11/10/2012 - 09:27.</div>
    <div class="content">
     <p>I&#39;m new here so I only just read this post but I had the same issue with poor transmission reliability (I suspect this is happening to most people but you wouldn&#39;t know unless you checked). I&nbsp;cured it by dropping&nbsp;the baud rate down to about 4kbs by adding this line after RF12 initialisation...</p>
<p>rf12_control(0xc657); // approx 3.918 Kbps, i.e. 10000/29/(1+0x57) kbps</p>
<p>With this value there are no errors, even at a distance where the original code won&#39;t work at all.</p>
<p>I&#39;m not sure why this didn&#39;t work for you robur, presumably you did change the rate at both the transmitter and the receiver?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6628"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/450.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New build with erratic RF ?</h3>

    <div class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Thu, 11/10/2012 - 10:28.</div>
    <div class="content">
     <p>Are your aerials the correct length on both transmitter and receiver?&nbsp; I had the same problem mentioned above (would drop packets from one side of a desk to the other!)</p>
<p>Trimming a couple of mm off one of the aerials fixed it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/377"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-hXCwn0swNsIHWqWFLEYnRlpZokDml1CffxJdpblZzMI" value="form-hXCwn0swNsIHWqWFLEYnRlpZokDml1CffxJdpblZzMI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
