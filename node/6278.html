<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/6278 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:05:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>EmonTx V2 - Basic trouble shooting steps | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">EmonTx V2 - Basic trouble shooting steps</h3>
        <span class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Tue, 09/12/2014 - 23:37</span>
        <div class="content"><p>My Emon Tx V2 arrived today, and I&#39;ve put it together this evening.</p>
<p>I&#39;ve followed the instructions (twice through) for setting up the arduino environment and downloading the libs.</p>
<p>When I try and upload a sketch (emonTx_CT123_Voltage), I get this:</p>
<p>avrdude stk500_getsync</p>
<p>I&#39;ve tried to check that the programmer I&#39;m using is connected correctly, but can&#39;t find the pin details for the FTDI - I&#39;m assuming they&#39;re standard?&nbsp; (I know my programmer work as I&#39;m also using it for some mysensors.org projects)</p>
<p>Also, I can&#39;t seem to find any basic electrical checks which can be carried out - over and above the one in the build instructions.</p>
<p>Any basics - like should the led light when I plug in power from the USB socket?</p>
<p>Thanks</p>
<p>James</p>
  <div class="forum-topic-navigation clear-block">
          <a href="6376.html" class="topic-previous" title="Go to previous forum topic">‹ Emoncms Multigraph fill below curve</a>
              <a href="6348.html" class="topic-next" title="Go to next forum topic">[SOLVED] Raspberry b+, emonSD-13-08-14 and rfm12pi v2.6: Unable to communicate with rfm12pi ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-25740"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 10/12/2014 - 13:44.</div>
    <div class="content">
     <p>That error usually means a connection problem. The correct orientation is to line up the GND pins. GND on the V2 is labelled and nearest the USB socket, on the shop FTDI programmer it's also labelled "GND" and it's the top one when the writing is the correct way up. If your programmer is different to the one from the shop, you need the emonTx V2 schematic, there's a link on the Wiki.</p>
<p>The LED is driven by an I/O pin, so what it does depends on the sketch you've loaded. If you haven't loaded a sketch, nothing will happen (because I don't think the 328P comes with a pre-loaded sketch).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25752"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Wed, 10/12/2014 - 18:19.</div>
    <div class="content">
     <p>Thanks Robert,</p>
<p>I&#39;ve found a link to the schematic, but I can&#39;t see anything with the pins labelled - either on the wiki or the schematics in github.</p>
<p>The programmer I have has the following pin labels:</p>
<p>DTR</p>
<p>RXD</p>
<p>TXD</p>
<p>VC</p>
<p>CTS</p>
<p>GND</p>
<p>I&#39;ve had no problems using those to program a number of Pro Mini boards.</p>
<p>There is a voltage selector, which is currently set to 3v3 - is that correct or should it be 5v?</p>
<p>Thanks</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25758"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 10/12/2014 - 19:31.</div>
    <div class="content">
     <p>I've deleted your duplicate post. Please look to see if your comment is held in the moderation queue before reposting. It only causes extra work for us moderators. Your browser should show a message if it is.</p>
<p><i>"but I can't see anything with the pins labelled - either on the wiki or the schematics in github." </i><br />
Really? They are labelled when I look - though you need to follow the connections on the schematic.<br />
On my shop programmer, the pins are labelled:<br />
RTS<br />
RXD<br />
TXD<br />
5V<br />
3.3V<br />
GND</p>
<p>Obviously - or perhaps not - you must cross-connect TXD to RXD. RTS / DTR is actually used as a reset to the processor. It's probably worth you looking at the Wikipedia page on RS232 to work out what all the signal lines were originally intended for. E.g. DTR originally meant "I'm here" and RTS meant "OK, let me have the data", so broadly similar meanings.<br />
The 3.3 V isn't connected on the emonTx V2 board.<br />
So it looks as if a straight connection with 5 V selected should work. If not, tell us which OS you are using.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25761"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Wed, 10/12/2014 - 20:20.</div>
    <div class="content">
     <p>Hi Robert, noted on the duplicate post.</p>
<p>Here&#39;s what I have:</p>
<p>Programmer - EmonTx (PIN number)</p>
<p>DTR - Reset (6)</p>
<p>RXD - TXD (5)</p>
<p>TXD - RXD (4)</p>
<p>VC - PWR (3)</p>
<p>CTS - not connected</p>
<p>GND - GND (1)</p>
<p>I&#39;ve tried it with both 3.3v and 5v, both to no avail, Using Windows 7.1 and Ardunio 1.0.5.</p>
<p>Cheers</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25763"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 10/12/2014 - 21:05.</div>
    <div class="content">
     <p>I'm not an expert on the various types of programmer, so unless anyone else knows better, let's assume all that is OK.</p>
<p>I've never used Windows 7, I went straight from XP to 8, then quickly dropped it for Ubuntu. Which guide did you follow when you set up your Arduino IDE? Do you see a new port appear when you connect the programmer?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25812"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Sat, 13/12/2014 - 14:24.</div>
    <div class="content">
     <p>I believe the programmer is ok - it uses a different driver (CH340), but I&#39;ve been using it to program an Arduino Uno board and a number of pro-mini boards.</p>
<p>I&#39;ve just done a clean install of Arduino-1-0-6, and following the guide here for the libraries:</p>
<p><a href="https://learn.openenergymonitor.org/?redirect=installing-arduino-libraries" title="http://openenergymonitor.org/emon/buildingblocks/installing-arduino-libraries">http://openenergymonitor.org/emon/buildingblocks/installing-arduino-libr...</a></p>
<p>and the following link for the EmonTx V2 firmwave:</p>
<p><a href="https://learn.openenergymonitor.org/?redirect=uploading-arduino-firmware" title="http://openenergymonitor.org/emon/buildingblocks/uploading-arduino-firmware">http://openenergymonitor.org/emon/buildingblocks/uploading-arduino-firmware</a></p>
<p>A straight compile gives the following output:</p>
<p>Binary sketch size: 9,546 bytes (of a 32,256 byte maximum)</p>
<p>One thing concerns me - there&#39;s an assumption here that my hardware building/soldering skills are upto scratch, is there any guide for some basic checks of the board which I could try - I had a bit of &quot;fun&quot; soldering the RFM12b chip to the board, so wonder if that might have caused any issues?</p>
<p>Thanks</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25813"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 13/12/2014 - 15:05.</div>
    <div class="content">
     <p>I was assuming that you had checked the voltages as per the build instructions - is that correct? If not, look again at the schematic and check that 5 V (PWR) is available at all the places it should be, and 3.3 V (VCC) is at all the places it should be. Also check that the reset line is a logic HIGH (close to 3.3 V), that the crystal and C7, C8 look OK. Check the RX and TX lines for short to GND, VCC or to each other. If all those points are OK, I think the processor should at least run even if there are faults elsewhere.<br />
Normally, if the RFM12B isn't soldered in properly, the sketch will load and run as far as initialising the RFM12B, then it sticks waiting for a response that never comes.<br />
So if you are still seeing the sync error, that points to it not talking. </p>
<p>The way to solder the RFM12B - OK, I know it's too late now for you - is to solder one pin on one corner only, then check. If it needs to be moved, it's easy to melt that one joint and move it. When you're happy, do the opposite corner and check again. If it's OK still, do all the rest.<br />
Or you can sit it on a bit of double-sided tape to position it before soldering.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25815"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Sat, 13/12/2014 - 17:40.</div>
    <div class="content">
     <p>OK, I&#39;ve run through the following checks:</p>
<p>3.3v at pins 7,20 and RFM12b - all at 3.28v</p>
<p>PWR at P1 -&gt; P4 - all at 5.00v</p>
<p>GND at pins 8 &amp; 22</p>
<p>Tx, Rx have continuity between the atmega and the ftdi header, nothing between either of them, GND or 3.3v</p>
<p>Have continuity across the crystal and pins 9&amp;10, and C7, C8.</p>
<p>Reset line is 3.28v</p>
<p>Which is a relief, and turns to the programmer. I remember having some trouble with the programmer initially, and had to install additional drivers, however my understanding here was that was down to the chinese clone of the atmega328 on the Arduino Uno rather than the driver for the programmer.</p>
<p>Next step is to try the Uno as the programmer.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25925"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Wed, 17/12/2014 - 23:19.</div>
    <div class="content">
     <p>I&#39;m still at a loss as to why I can&#39;t program via the ftdi header pins. I&#39;ve ordered and tried a programmer which uses the same chip as the ones sold by OEM, to no avail.</p>
<p>What I have done is take out the atmega chip and place it into the arduino uno board I have, and I can program it, place it into the emonTx and.... it works :)</p>
<p>So, I&#39;m a little way further along and haven&#39;t had much chance to play yet - I get 4 readings, and with only the ac-ac psu plugged in (i.e. no CT&#39;s) it settles on a value of around 33. I don&#39;t understand the config required yet in emonhub for the datacodes bit, so that looks like the next, that said, without being able to program the board, making the changes to the calibration etc is going to a bind!</p>
<p>Cheers</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26058"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Mon, 22/12/2014 - 16:31.</div>
    <div class="content">
     <p>HI there,</p>
<p>I&#39;m not sure I&#39;m any further forward here. I&#39;ve tried the following:</p>
<p>1) removing the ATmega chip, placing it in a breadboard and connecting just those pins referened above.</p>
<p>2) Tried a different programmer using the same chip as the one in the OEM shop</p>
<p>3) Tried a Mac to do the programming</p>
<p>4) Checked the voltage on all pins with the programmer connected, giving:</p>
<p>1&nbsp; - 3.28<br />
2&nbsp; - 3.4<br />
3&nbsp; - 3.39<br />
6&nbsp; - 5.09<br />
7&nbsp; - 3.28<br />
15 - -0.3<br />
16 -<br />
17 - 0.77<br />
19 - 0.73<br />
20 - 3.28<br />
23 - 1.63<br />
24 - 1.63<br />
25 - 1.63<br />
26 - 1.63</p>
<p>
However, none of these make any difference, I still can&#39;t program the ATmega over the FTDI interface on the EmonTX V2 board.</p>
<p>is there anything else can I try/test ?</p>
<p>Cheers</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26060"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 22/12/2014 - 16:46.</div>
    <div class="content">
     <p>Have you a Arduino Uno board laying around? If so, you try popping the Atmega chip&nbsp;in and try programming it from there.</p>
<p>Paul<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26061"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Mon, 22/12/2014 - 16:49.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>I have managed that, and got it working so I&#39;ve ruled out the chip - however for modifying the sketch it&#39;s not ideal, also calibration looks difficult, so I&#39;d like to try and get it working through the emontx board....</p>
<p>CHeers</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26062"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 22/12/2014 - 16:53.</div>
    <div class="content">
     <p>Aahh, just spotted your comment re the UNO a few posts earlier!</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26067"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 22/12/2014 - 19:26.</div>
    <div class="content">
     <p>Can we check what you have and what you can and cannot do?<br />
You have an emonTx, not an emonTx Shield.<br />
You have a programmer not from the OEM shop.<br />
With the programmer connected, the supply voltages are believable (5V &amp; 3.3 V on the emonTx).<br />
You cannot program with the processor in the emonTx V2, using the programmer + FTDI.<br />
You can monitor the serial output from the processor using the Arduino IDE.<br />
You can program the same processor in an Arduino Uno board, but that does not use the programmer.<br />
If you momentarily short the reset line to GND (programmer not connected), the processor resets.</p>
<p>If it's not an issue with the reset line itself, I think the finger of suspicion still points at the programmer and/or the drivers. I'd look at checking the timing between issuing a reset on DTR - assuming of course that it is issuing a reset - and attempting to send the data.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26091"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Tue, 23/12/2014 - 19:35.</div>
    <div class="content">
     <p>HI Robert,</p>
<p>To answer your questions:</p>
<p>I have an EmonTX V2</p>
<p>I have a programmer not from the OEM shop - it&#39;s a CP210x based chip.</p>
<p>With the programmer connected, voltages are as the post above.</p>
<p>I cannot program using the programmer +FTDI</p>
<p>I cannot monitor the serial output - I just get a single extending blank line.</p>
<p>&nbsp;</p>
<p>I have now managed to get the board programmed using the Programmer + IDE - by holding pin 1 on the chip to GND until the compile has finished, the programmer connects and uploads!</p>
<p>I noticed the board had DTR instead of RTS like the OEM shop programmer, so tried connecting that to the rest PIN on the FTDI header, but that didn&#39;t work either. I don&#39;t know what I&#39;m looking for in terms of debugging the timing on DTR.....</p>
<p>So I&#39;m a little further forward at least..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26093"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 23/12/2014 - 20:00.</div>
    <div class="content">
     <p>I think the simple answer is a programmer from the Shop. Obviously it's your decision, but that will give you the convenience of not having to remove the processor from the board to program it, (and remove the danger of a bent pin) and it will allow you to use the serial output for debugging or whatever.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26096"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Tue, 23/12/2014 - 21:19.</div>
    <div class="content">
     <p>I&#39;m now able to program the chip whilst it&#39;s on the EmonTX board - I just have to reset it manually, and as you say, I don&#39;t have the benefit of the serial output.</p>
<p>Had I realised at the time I ordered everything else, I&#39;d have ordered a programmer and saved the hassle.</p>
<p>I can&#39;t quite bring myself to pay &pound;13 for a programmer :|</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26108"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Wed, 24/12/2014 - 20:34.</div>
    <div class="content">
     <p>Another step forward - updated the driver, and reduced the baud to 9600 and now seeing the serial output.</p>
<p>Onto calibration. (Happy to move the next batch of questions to a separate thread here...)</p>
<p>I&#39;ve set const int CT3 = 0; as I&#39;m only using 2 CT&#39;s, with only CT1 connected for the time being</p>
<p>With a kettle 3000W connected and an ac-ac adaptor I get the following output:</p>
<p>3 0 0.36</p>
<p>This compares to the power meter of Voltage: 236.5, Current: 11.23A, Power: 2687W</p>
<p>1) To calibrate, I need a cable with the live or neutral exposed - do I need to wind this around the CT - the photo&#39;s show this, but no mention is made in the text, and if so - how many times?&nbsp; Do I then need to use the number of windings in any calculation anywhere?</p>
<p>2) In<br />
ct1.voltageTX(xxx.x, y.y);<br />
does xxx.x refer to the voltage, or calibration coeffiicent - on [1] the comment on the code refers to a coefficient, but in the text below, it talks about voltage - as the figure is very close to a voltage I&#39;m seeing on a multimeter/power meter. - I&#39;ve set it to 228.268 for the time being.</p>
<p>3) Phase shift calibration - How do I view the power factor, is this the same as emontx.power1 variable, if not, what do I need to output so I can see it?</p>
<p>[1] <a href="../modules/emontx/firmware/calibration.html" title="http://openenergymonitor.org/emon/modules/emontx/firmware/calibration">http://openenergymonitor.org/emon/modules/emontx/firmware/calibration</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26110"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 24/12/2014 - 22:43.</div>
    <div class="content">
     <p>The CT is designed for a single turn primary, but you can multiply the current by using more than one turn. Therefore, your 3 kW kettle should show 11.23 A with one turn, 22.46 A with 2 turns, etc.</p>
<p>On that page, x's, y's &amp; z's refer to the coefficients.</p>
<p>Power factor is available - it is a member of the EnergyMonitor class - as ct1.powerFactor (etc).<br />
(The useful members are realPower, apparentPower, powerFactor, Vrms, Irms.)</p>
<p>There's a much more detailed explanation of both the calibration theory and the calibration procedure in Building Blocks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26115"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Thu, 25/12/2014 - 07:32.</div>
    <div class="content">
     <p>OK, I&#39;m not sure if I have a problem I need to look at in more detail before I get into detail calibration.</p>
<p>With the kettle connected, the following outputs are generated on the serial output:</p>
<p>emontx.power1 = 3 (presumably this is 3kw and is rounded up and would need to be multiplied by 1000 in emoncms)</p>
<p>emontx.power2 = 0 (expected, CT not connected)</p>
<p>ctl.Vrms = 0.36 (to get this to a meaningful voltage I need to multiply by 655.555 in emoncms?)</p>
<p>Cheers</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26117"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 25/12/2014 - 12:24.</div>
    <div class="content">
     <p>I think you do have a problem - those are not the right numbers at all. Have you changed any of the calibration coefficients?  </p>
<p>The 'native' values generated by the calcVI method are:<br />
realPower - W,<br />
apparentPower - VA<br />
powerFactor - decimal number,<br />
Vrms - V,<br />
Irms - A<br />
All are stored as double precision decimal numbers.<br />
So given your 3 kW kettle, I'd expect the default Serial.print(...) to write 2687.00, 2687.00, 1.00, 236.50, 11.23 respectively - or numbers not wildly different from those.</p>
<p>For transmission in the emontx wrapper:<br />
Vrms is multiplied by 100 (and temperature - not coming from calcVI of course - by 10).<br />
Thus in emonTx, I'd expect 2687, 0, 0, 0, 23650, 217 &nbsp; [21.7 &deg;C if you have a sensor, else 0]</p>
<p>emontx.power1 is in watts (not kW), so you are reading nothing in effect.<br />
Worse, emontx.Vrms = ct1.Vrms*100; - so that too is reading nothing.<br />
How are you powering the emonTx? You cannot be using the AC adapter. Either you are not looking at the correct numbers, or you've changed something you didn't intend to.</p>
<p>(I've just spotted a bad mistake in the sketch comments in this area - I've emailed Trystan:<br />
//AC RMS voltage - convert to integer ready for RF transmission (divide by 0.1 using emoncms input process to convert back to two decimal places). It should say <b>multiply by 0.01</b>.) </p>
<p>Do you have a multimeter to check voltages on the emonTx?</p>
<p>And Happy Christmas to you - worry about this tomorrow!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26121"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Thu, 25/12/2014 - 17:33.</div>
    <div class="content">
     <p>Thanks Robert - Happy Christmas to you too!</p>
<p>I&#39;ve downloaded and uploaded an untouched (with the exception of the frequency) sketch - and still show the same result.</p>
<p>I&#39;ve tried the EmonTX powered with both a USB cable from the USB power plug in the OEM shop, and also from the programmer - same result.</p>
<p>I do have a multimeter.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26126"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 25/12/2014 - 23:20.</div>
    <div class="content">
     <p>OK, let's deal with the voltage first. You should measure approx. 11.5 V ac between the GND terminal or battery -ve and the metal tag on the back of the ac input socket. If you don't, there's something wrong with your ac-ac adapter.<br />
You should also have about 1.65 V dc across the same two points. If you don't, there's something wrong with the bias network for that input (R11, R12 (both 470k), C10)<br />
You should have approx 1 V ac across R14 (10k).</p>
<p>If you do have all those voltages, (you are using emonTx_CT123_Voltage.ino from the emonTx V2 directory <a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV2" title="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV2">https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV2</a>, aren't you?) using the serial output in the Arduino IDE, what do you see immediately after you power up? You should see something like this:</p>
<p style="margin-left: 3ex">
emonTX CT123 Voltage example<br />
OpenEnergyMonitor.org<br />
Node: 10 Freq: 433Mhz Network: 210<br />
16406 15175 16054 319.36<br />
190 169 181 259.11<br />
6 5 7 258.42<br />
8 2 4 258.50<br />
0 2 3 258.44
</p>
<p>I've got all 3 CT's enabled, but the voltage calibration is set for a different adapter! And don't worry about the silly values while it settles - that's quite normal.<br />
You are looking for a sensible (not necessarily accurate) voltage as the last number on the line.</p>
<p>Another (complementary) route would be to use Robin's <a href="../sites/default/files/minMaxAndRangeChecker.ino_.zip" title="http://openenergymonitor.org/emon/sites/default/files/minMaxAndRangeChecker.ino_.zip">http://openenergymonitor.org/emon/sites/default/files/minMaxAndRangeChec...</a>  Load and run that, and you should see something like:</p>
<p style="margin-left: 3ex">
ready ...<br />
 The Min, Max and Range ADC values for analog inputs 0 to 3:<br />
   0 508 508;     0 507 507;     0 862 862;     0 514 514<br />
 507 509   2;   507 509   2;    31 981 950;   513 515   2<br />
 507 510   3;   507 509   2;    32 981 949;   512 515   3<br />
 507 510   3;   507 509   2;    32 981 949;   513 515   2<br />
 507 509   2;   507 509   2;    32 981 949;   513 515   2</p>
<p>Those are CT2, CT3, Vac &amp; CT1 respectively.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26129"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Fri, 26/12/2014 - 07:45.</div>
    <div class="content">
     <p>Voltage appears to be a problem....</p>
<p>12.8v AC - GND point and tab on the AC socket (Tab furthest inboard / right next to the &quot;ecological&quot; scren print text)<br />
1.62v DC - GND point and tab on the AC socket (Tab furthest inboard / right next to the &quot;ecological&quot; scren print text)<br />
11.5v AC - the two inline tabs on the AC socket</p>
<p>R14 - 0.0v<br />
R12 - 1.61v<br />
R13 - 0.0v<br />
R11 - 1.61v</p>
<p>I&#39;ve looked closely and checked the joints and all appear to be ok.</p>
<p>Serial Output at sketch startup:</p>
<p>emonTX CT123 Voltage example<br />
OpenEnergyMonitor.org<br />
Node: 10 Freq: 868Mhz Network: 210<br />
-24219 -26018 -27686 296.20<br />
8804 7894 6151 137.32<br />
1053 52 191 47.33<br />
116 0 0 15.84<br />
9 0 0 4.55<br />
1 0 0 1.82<br />
0 0 0 1.03<br />
0 0 0 0.78</p>
<p>It then settles...</p>
<p>Using the MinMax sketch:</p>
<p>ready ...<br />
&nbsp;The Min, Max and Range ADC values for analog inputs 0 to 3:<br />
&nbsp;&nbsp; 0 512 512;&nbsp;&nbsp;&nbsp;&nbsp; 0 511 511;&nbsp;&nbsp;&nbsp;&nbsp; 0 514 514;&nbsp;&nbsp;&nbsp;&nbsp; 0 511 511<br />
&nbsp;513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 512 512&nbsp;&nbsp; 0;&nbsp;&nbsp; 513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 510 511&nbsp;&nbsp; 1<br />
&nbsp;513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 512 512&nbsp;&nbsp; 0;&nbsp;&nbsp; 513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 510 511&nbsp;&nbsp; 1<br />
&nbsp;513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 512 512&nbsp;&nbsp; 0;&nbsp;&nbsp; 513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 510 511&nbsp;&nbsp; 1<br />
&nbsp;513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 512 512&nbsp;&nbsp; 0;&nbsp;&nbsp; 513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 510 511&nbsp;&nbsp; 1</p>
<p>and when checking the voltage across GND and AC socket:</p>
<p>&nbsp;513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 512 512&nbsp;&nbsp; 0;&nbsp;&nbsp; 502 514&nbsp; 12;&nbsp;&nbsp; 510 511&nbsp;&nbsp; 1<br />
&nbsp;513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 512 512&nbsp;&nbsp; 0;&nbsp;&nbsp; 446 502&nbsp; 56;&nbsp;&nbsp; 510 511&nbsp;&nbsp; 1<br />
&nbsp;513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 512 512&nbsp;&nbsp; 0;&nbsp;&nbsp; 428 447&nbsp; 19;&nbsp;&nbsp; 510 511&nbsp;&nbsp; 1<br />
&nbsp;513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 512 512&nbsp;&nbsp; 0;&nbsp;&nbsp; 423 429&nbsp;&nbsp; 6;&nbsp;&nbsp; 510 510&nbsp;&nbsp; 0<br />
&nbsp;513 514&nbsp;&nbsp; 1;&nbsp;&nbsp; 512 512&nbsp;&nbsp; 0;&nbsp;&nbsp; 421 423&nbsp;&nbsp; 2;&nbsp;&nbsp; 510 510&nbsp;&nbsp; 0</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26131"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Fri, 26/12/2014 - 10:46.</div>
    <div class="content">
     <p>I&#39;ve just checked all of the resistances with a multimeter, some interesting results (I&#39;ve put the setting on the multimeter in brackets to protect my sanity)</p>
<p>1x 100k = 100k (200K)</p>
<p>1x 100 ohm = 100 ohm (200)</p>
<p>3x 18 ohm = 18 ohm (200)</p>
<p>However:</p>
<p>8x 470k = 285k (2000k)</p>
<p>2x 10k = 10 ohm (200)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26135"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Fri, 26/12/2014 - 12:24.</div>
    <div class="content">
     <p>Major progress...</p>
<p>I replaced the so called 10k resistors with actual 10k resistors...</p>
<p>I now get a meaningful voltage reading (247.38) and power figures (37 with my soldering iron).</p>
<p>I also noticed that the 2nd 10K resistor R1 is also connected to the reset pin.... and the programmer now works as it should without me needing to manually reset the chip immediately after compilation has finished.</p>
<p>Just to tidy up the soldering mess on the board and re-visit the calibration (which now I&#39;m getting meaningful readings, makes a bit more sense!).</p>
<p>Cheers</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26137"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 26/12/2014 - 12:34.</div>
    <div class="content">
     <p>The 470k resistors are effectively two in parallel (they are joined at the other end too, by the power supply!) so that's OK. (and the inputs are all nicely biased to half way, so they must be reasonably right (i.e. equal!). You meter pulls the AC input down from 512 to 420, so that's expected and OK.</p>
<p>But a big problem with the 10 k. There's no way that either should read 10 &Omega;. We're mainly concerned about the one next to the AC input, but even though we're not interested in the 10 k on the pulse input, that too should not read 10 &Omega; either. And reading 0 V ac across R14 when the adapter is connected corroborates this. Can you carefully check that there are no whiskers of copper or solder shorting it? Is the marked value correct, i.e. is the colour code (brown, black, orange, gold) the same as the pictures? A stupid question hopefully, but I've got to ask! 10 &Omega; would be brown, black, black, gold. As both are wrong and the same, this has to be the most likely cause. If it appears to be OK, much as I don't like to suggest this because of the risk of damaging the PCB, can you lift one end and check it in isolation? </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26138"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 26/12/2014 - 12:36.</div>
    <div class="content">
     <p>Humpf! I was busy typing while you were typing yours - at least you came to the same conclusion and you're away and in business?</p>
<p>Where did you get the resistors from?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26151"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Fri, 26/12/2014 - 20:54.</div>
    <div class="content">
     <p>Thanks for your help Robert.</p>
<p>I&#39;m now in business, just spent the last hour calibrating 2 CT&#39;s. I&#39;d be interested in how close I&#39;ve got the calibration and whether it can be made closer across between them.</p>
<p>The resistors - when I started the build, I made a mistake with the 18ohm resistors and fitted one of the others, luckily I had a stash of resistors so grabbed a couple of what I thought were 10k ones.... however, there&#39;s only 3 gone from the strip, so most likely, I picked the 10ohm up instead!</p>
<p>I&#39;ve got the following calibration settings and corresponding output:</p>
<pre>
ct1.voltageTX(223.75, 1.7);
ct1.currentTX(1, 111.41);
ct2.voltageTX(222.99, 1.7);
ct2.currentTX(2, 111.1);

CT1 Real Power: 2486.94 Apparent Power: 2468.59 Power Factor: 1.01 Vrms: 224.95 Irms: 10.97
CT2 Real Power: 2481.18 Apparent Power: 2462.75 Power Factor: 1.01 Vrms: 224.21 Irms: 10.98</pre><p>Is that reasonable, or is it worth spending a bit more time getting it closer - I&#39;m using a 3kw kettle - would another source be any better - I&#39;ve tried a 28w light, but that gives huge differences so I&#39;m guessing there&#39;s a threshold at which the accuracy comes in.</p>
<p>Also, I&#39;m using a plug-in watt meter - I&#39;d imagine I&#39;d get better results from my multimeter (Academy?), but not sure I&#39;m brave enough....</p>
<p>Now to setup emoncms for solar..... type 2 if I understand correctly!</p>
<p>Thanks again</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26153"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 26/12/2014 - 21:41.</div>
    <div class="content">
     <p>What you can/should use for calibration depends critically on the accuracy of your "standard". The ultimate standard is your energy supplier's meter, and we've had reports of people getting to within 1% of that by carefully tweaking the calibration over time. You need to compare specs for your plug-in meter and your multimeter to decide which is the best to use. Unless you have <a href="https://learn.openenergymonitor.org/?redirect=how-good-is-your-multimeter">a particularly good multimeter</a> (i.e. in the £1000 area) you're not going to be able to get within 1% on power. I've not done a comparable study on plug-in power meters, the only one I could find that mentioned  accuracy in the spec claimed 1% on voltage and current and 2% on active power.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26191"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Sun, 28/12/2014 - 11:38.</div>
    <div class="content">
     <p>OK - I&#39;ll compare against utility meters over the next few days and see how they figure.&nbsp; I watched the readout on the inverter and it seemed reasonably close.</p>
<p>One thing I have noticed is that the solar PV output never drops to zero, always stays around 9w or thereabouts - Is there anyway of setting a threshold in emoncms, or the sketch, or does it point something else?</p>
<p>Cheers</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26192"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 28/12/2014 - 11:46.</div>
    <div class="content">
     <p>Is it +9 W or -9 W? If -9 W, that's about right for it's residual 'stay alive' consumption that you'll see overnight. If it's +9 W, then it seems as if you've got some pick-up somewhere. This isn't unusual, it's only 0.04% of full scale (assuming you're set up for 100 A max reading). If it is constant and it worries you, you could subtract that in the sketch.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26199"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7341.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdr0berts&#039;s picture" title="jdr0berts&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/7341.html" title="View user profile.">jdr0berts</a> on Sun, 28/12/2014 - 16:28.</div>
    <div class="content">
     <p>Having just downloaded the CSV to check values - it&#39;s both....</p>
<p>I&#39;m guess the pick-up is most likely due to the close proximity to the 2nd CT and other live cables as they&#39;ve both been placed inside the consumer unit.</p>
<p>I&#39;m now seeing a high consumption - washing machine, tumble drier, and a correspondingly higher residual consumption on the solar CT.</p>
<p>CHeers</p>
<p>James</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26200"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx V2 - Basic trouble shooting steps</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 28/12/2014 - 16:45.</div>
    <div class="content">
     <p>It probably is pick-up from adjacent cables. Although small, it is measurable (see the report on the CT for the numbers). Spacing - especially from where the secondary winding is inside the body of the CT, is your friend here.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/6278"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-u2wlMCfsLpmzHUy_w1j_p8vlCl3PY7oaHywhp4FXmFg" value="form-u2wlMCfsLpmzHUy_w1j_p8vlCl3PY7oaHywhp4FXmFg"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/6278 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:05:32 GMT -->
</html>
