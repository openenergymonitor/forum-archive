<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2105 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>how would i mod the libs to do full fat 3 phase? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">how would i mod the libs to do full fat 3 phase?</h3>
        <span class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 08/03/2013 - 11:43</span>
        <div class="content"><p>as per topic how would one mod the libs so it can do full fat 3 phase (3*ct + 3*ac) in the same sketch?</p>
<p>including an easy way to define what pins go what sensor</p>
<p>going to try and do full 3 phase and water (pulse) and 2-way ir coms on same chip. first&nbsp; a mega shield and then maybe a standalone thing...</p>
<p>going to release all files including eagle files</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2141.html" class="topic-previous" title="Go to previous forum topic">‹ Raspberry: cannot map emoncms to &quot;well known&quot; ports</a>
              <a href="2128.html" class="topic-next" title="Go to next forum topic">emoncms - php raspberrypi_run.php halts with no error ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-10380"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: how would i mod the libs to do full fat 3 phase?</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Fri, 08/03/2013 - 15:11.</div>
    <div class="content">
     <p>Bo,</p>
<p>I think the reason you are not getting any interest in this project is that it doesn&#39;t solve any problems. There isn&#39;t much interest in 3 phase in the UK anyway, but those that are interested probably want one of three things:</p>
<p>1. approximate power measurement.</p>
<p>2. accurate power measurement</p>
<p>3. solar diversion.</p>
<p>For 1 the standard emonTx with 3 CTs measuring current only or current and 1 voltage is fine.</p>
<p>For 3 you need 6 CTs so your solution won&#39;t work.</p>
<p>So that leaves 2. For accurate 3-phase&nbsp;power measurement&nbsp;you&nbsp;need to monitor all 3 voltages but to be really accurate you also need to measure continuously or you&#39;ll miss short changes in power level. With&nbsp;the single ADC on the Arduino mega you will find this very difficult to do. You will probably only be able to sample voltage and current for each phase about 20 times per mains cycle which is much slower than any of the other solutions on here - although it still may be ok.</p>
<p>-martin</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10382"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: how would i mod the libs to do full fat 3 phase?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 08/03/2013 - 18:42.</div>
    <div class="content">
     <p>So that leaves 2.</p>
<p>there are more than one analogue input on the mega.... i have allready done the hardware side... just need the very last bits to reah the goal... if the mega&#39;s sample freq is to low, well i can live with that.</p>
<p>&nbsp;</p>
<p>/bo</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10383"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: how would i mod the libs to do full fat 3 phase?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 08/03/2013 - 18:47.</div>
    <div class="content">
     <p>ps... i know how 3 phase works in most of the uk... ie there is 3 phases in the street and the houses are balanced there rather than here where the 3 phases goes in each place and load balacning are done inside the house.</p>
<p>&nbsp;</p>
<p>non the less it would suite the project if there are more openness when is comes to this....</p>
<p>&nbsp;</p>
<p>i could do the full 3 phase easy but that would require me to use 3 emontx boards for power alone... a bit of waste since i have the mega allready. then another board to do water meter... and a custom board to do my heatmeter which reqires 2way ir coms to work and not 1way as many other meters do</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10384"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: how would i mod the libs to do full fat 3 phase?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 08/03/2013 - 18:50.</div>
    <div class="content">
     <p>anyway a bit of help with the libs would be much welcome....</p>
<p>i have 2-way ir in place since it only requires the softserial lib.</p>
<p>water is simple pulse count with a hall effect.....</p>
<p>radio is confirmed right...</p>
<p>&nbsp;</p>
<p>so basicly i only need to confirm my ct&#39;s and ac&#39;s are connected right</p>
<p>and how to mod the lib to make use of those</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10385"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: how would i mod the libs to do full fat 3 phase?</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Fri, 08/03/2013 - 19:42.</div>
    <div class="content">
     <p><em>there are more than one analogue input on the mega</em></p>
<p>You are missing the point. There are enough analogue inputs but there is only one analogue-to-digital converter so you can only look at one input at a time. By using 3 emonTxs you have 3 analogue-to-digital converters so you can&nbsp;process all 3 phases at the same&nbsp;time.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10387"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: how would i mod the libs to do full fat 3 phase?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 08/03/2013 - 21:29.</div>
    <div class="content">
     <p>yep i know... but it would be more costly a setup... and i dont mind the lack of precision it will give me..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10388"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: how would i mod the libs to do full fat 3 phase?</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Fri, 08/03/2013 - 21:48.</div>
    <div class="content">
     <p>It probably won&#39;t be more costly by the time you&#39;ve paid for your prototype PCBs and if you don&#39;t mind lack of precision then you may as well just use a single emonTx and just measure voltage for one phase.</p>
<p>If you&#39;re just doing it for your own interest than that&#39;s fine but i go back to my original point that you probably won&#39;t get much interest from others.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10390"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: how would i mod the libs to do full fat 3 phase?</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Fri, 08/03/2013 - 22:13.</div>
    <div class="content">
     <p>You might also want to look at the Arduino Due. &nbsp;It has 2 ADCs, each 12-bit rather than 10-bit, and much much faster conversion times. &nbsp;You could potentially have one sampling V while the other samples I. &nbsp;It is a 3.3V system though, so adjust your rail voltages accordingly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10547"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="majland&#039;s picture" title="majland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: how would i mod the libs to do full fat 3 phase?</h3>

    <div class="submitted">Submitted by majland (not verified) on Wed, 20/03/2013 - 11:39.</div>
    <div class="content">
     <p>I&#39;m not new to arduino&#39;s but to power meters. I would be interested in&nbsp;&quot;full fat 3 phase&quot;&nbsp; :-)</p>
<p>(230V 50Hz)</p>
<p>I&#39;ve seen the description&nbsp;http://openenergymonitor.org/emon/node/1170 but do not need to measure the PV (will not be practical since it is in a different location than the mains/meter - So&nbsp;3*ct + 3*ac will do. (If i go 6*ct i&#39;ll need to syncronice the two measurements boards or also go 6*ac.</p>
<p><a href="https://cosm.com/feeds/34522 " title="https://cosm.com/feeds/34522 ">https://cosm.com/feeds/34522 </a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2105"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-_zoY6zDA4G7qVJeqFbyLIPBh4uPePlVVK97ebPx6TM4" value="form-_zoY6zDA4G7qVJeqFbyLIPBh4uPePlVVK97ebPx6TM4"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
