<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3307 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:21:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Issues flashing firmware on both emonTx and emonGLCD | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Issues flashing firmware on both emonTx and emonGLCD</h3>
        <span class="submitted">Submitted by Guest on Sun, 08/12/2013 - 22:20</span>
        <div class="content"><p>Hi, I&#39;m just getting back into electronics after not having touched a soldering iron for 10 years. Santa was nice with me last year and brought me for Christmas what I had asked for in my letter to him: a full OpenEnergyMonitor kit to solder myself! But as I didn&#39;t own my own soldering iron, and because life gets in the way, I&#39;ve only been able to start yesterday building the kit.</p>
<p>I&#39;ve built the RFM12Pi (v1) and the emonTx yesterday, and the emonGLCD today. I&#39;m pretty happy with the results, but with a minor twist: I can&#39;t get the firmware to upload to either the emonTx or the emonGLCD...</p>
<p>When testing both PCBs with a multimeter, I get the nice 3.3V where I&#39;m supposed to, also 5V at the appropriate places. But when connecting with an FTDI cable (also bought in the shop here), once instructed to Upload, the Arduino IDE waits for a few seconds and then shows an orange bar with the following text:</p>
<blockquote><p>Problem uploading to board. See <a href="http://www.arduino.cc/en/Guide/Troubleshooting#upload" title="http://www.arduino.cc/en/Guide/Troubleshooting#upload">http://www.arduino.cc/en/Guide/Troubleshooting#upload</a> for suggestions.</p>
<p>Binary sketch size: 12274 bytes (of a 32256 byte maximum)<br />
		avrdude: stk500_recv(): programmer is not responding</p>
</blockquote>
<p>According to the build instructions, the ATmega will come with Arduino Optiboot 4.4 bootloader (select Uno in IDE) but with no sketch uploaded. Since I can nicely upload sketches to my official Arduino Uno, I&#39;m wondering if the bootloader is correctly flashed on the IC (assuming that one needs the bootloader to flash sketches?).</p>
<p>Does anyone have any idea what I should be testing next?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2599.html" class="topic-previous" title="Go to previous forum topic">‹ can&#039;t get emontx to report temp at 5 min interval</a>
              <a href="3636.html" class="topic-next" title="Go to next forum topic">EmonTH optical pulse counting ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-16668"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="e2jk&#039;s picture" title="e2jk&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Issues flashing firmware on both emonTx and emonGLCD</h3>

    <div class="submitted">Submitted by e2jk (not verified) on Sun, 08/12/2013 - 22:40.</div>
    <div class="content">
     <p>Actually I need to correct something: I was able to upload Sketches to my Uno 2 weeks ago, but when I try now I also get the same error message. I will investigate further to get the communication with the Uno working again, and will inform you of the progress.</p>
<p>FYI I&#39;m using Ubuntu Linux 12.04.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16669"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="e2jk&#039;s picture" title="e2jk&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Issues flashing firmware on both emonTx and emonGLCD</h3>

    <div class="submitted">Submitted by e2jk (not verified) on Sun, 08/12/2013 - 23:25.</div>
    <div class="content">
     <p>So I changed the USB port and was able to upload the sample Blink program to the Uno, but the emonTx now returns:<br />
	avrdude: stk500_getsync(): not in sync: resp=0x00</p>
<p>and when I try a second time, I get the &quot;programmer not responding&quot; error message again</p>
<p>I noticed a difference between the Uno and the emonTx, they come up under a different Serial Port:</p>
<ul>
<li>
		Uno:/dev/ttyACM0</li>
<li>
		emonTx: /dev/ttyUSB0</li>
</ul>
<p>The <a href="http://playground.arduino.cc/Learning/Linux">Arduino documentation</a> indicates that the FTDI device should show up like this in dmesg (although I don&#39;t know if that&#39;s only if you&#39;ve compiled your own kernel, which I haven&#39;t)</p>
<p>&nbsp;&nbsp;&nbsp; ftdi_sio 2-2:1.0: FTDI USB Serial Device converter detected</p>
<p>When I look in dmesg, when I plug in the FTDI&nbsp; the following appears:</p>
<blockquote><p>[20977.366830] usb 3-2: new full-speed USB device number 12 using xhci_hcd<br />
		[20977.384283] usb 3-2: New USB device found, idVendor=10c4, idProduct=ea60<br />
		[20977.384286] usb 3-2: New USB device strings: Mfr=1, Product=2, SerialNumber=3<br />
		[20977.384288] usb 3-2: Product: CP2102 USB to UART Bridge Controller<br />
		[20977.384289] usb 3-2: Manufacturer: Silicon Labs<br />
		[20977.384290] usb 3-2: SerialNumber: 0001<br />
		[20977.384932] cp210x 3-2:1.0: cp210x converter detected<br />
		[20977.550735] usb 3-2: reset full-speed USB device number 12 using xhci_hcd<br />
		[20977.567472] xhci_hcd 0000:00:14.0: xHCI xhci_drop_endpoint called with disabled ep ffff8801a8776fc0<br />
		[20977.567481] xhci_hcd 0000:00:14.0: xHCI xhci_drop_endpoint called with disabled ep ffff8801a8776f80<br />
		[20977.567996] usb 3-2: cp210x converter now attached to ttyUSB0</p>
</blockquote>
<p>I don&#39;t see any mention of FTDI in my dmesg output, but this &quot;cp210x converter&quot; or &quot;CP2102 USB to UART Bridge Controller&quot;.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16671"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="e2jk&#039;s picture" title="e2jk&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Issues flashing firmware on both emonTx and emonGLCD</h3>

    <div class="submitted">Submitted by e2jk (not verified) on Mon, 09/12/2013 - 00:37.</div>
    <div class="content">
     <p>So, I&#39;ve been trying several things:</p>
<ul>
<li>
		all 3 of my laptop&#39;s USB ports</li>
<li>
		directly connecting the USB-to-FTDI to the laptop instead of through the USB extension cord that was provided</li>
<li>
		testing with both the emonTx and emonGLCD using the Blink example sketch and the PCB&#39;s respective example sketches</li>
</ul>
<p>But nothing seem to get me further. I&#39;m always getting the &quot;programmer is not responding&quot; error, not even the &quot;not in sync&quot; one anymore. And uploading to the Uno works on all 3 ports.</p>
<p>I&#39;ve also done continuity tests using my multimeter between the pins on the USB-to-FTDI and the actual components on the board, I&#39;ve ruled out a faulty soldering (at least on the FTDI component, but as mentioned before I do get my 3.3 and 5V as expected). I forgot to mention that I plug the FTDI in the right sense (GND with GND, with the led facing outwards). Byt the way, is it expected that the led on the FTDI would blink when uploading? Mine doesn&#39;t blink, althoug the few times I&#39;ve seen the &quot;not in sync&quot; error I think I&#39;ve seen it lose a tiny bit of intensity (but that could be my tired eyes, it&#39;s 1:30 am now...)</p>
<p>I&#39;d appreciate some help ;)</p>
<p>(and just in case the help involves flashing the bootloader, I&#39;ll need just a little bit more help than the <a href="http://arduino.cc/en/Tutorial/ArduinoISP">ArduinoISP</a> and the <a href="http://jeelabs.org/2010/07/02/fixing-a-faulty-atmega-arduino/">Jeelabs </a>tutorials, as the first doesn&#39;t really show which ISP pins on the emon* boards to use, while the second shows them but I don&#39;t have access to the code, even after having created an account on Jeelabs&#39; redmine)</p>
<p>Good night!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16674"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Issues flashing firmware on both emonTx and emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 09/12/2013 - 10:11.</div>
    <div class="content">
     <p>It should like you might have a faulty programmer. Did you get it through the OpenEnergyMonitor shop? If so please drop us a line at <a href="mailto:support@openenergymonitor.zendesk.com">support@openenergymonitor.zendesk.com</a> and we&#39;ll sort out a replacement&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16675"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Issues flashing firmware on both emonTx and emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Mon, 09/12/2013 - 10:16.</div>
    <div class="content">
     <p>You can verify that the FTDI cable is working when it&#39;s not connected to the board by simply looping the TXD and RXD pins, typing something in a terminal window&nbsp;and verifying that the typing is echoed back.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16682"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="e2jk&#039;s picture" title="e2jk&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Issues flashing firmware on both emonTx and emonGLCD</h3>

    <div class="submitted">Submitted by e2jk (not verified) on Mon, 09/12/2013 - 18:15.</div>
    <div class="content">
     <p>Thanks to the idea of looping TXD and RXD, I&#39;ve done a continuity check on it, and found out that the pins TXD-RXD, TXD-RTS and RXD-RTS are in closed circuit (none of the other are). i.e.when I touch 2 of those 3 pins, my multimeter beeps. Is that expected?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16684"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Issues flashing firmware on both emonTx and emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 09/12/2013 - 18:55.</div>
    <div class="content">
     <p>That is not a valid test, and means almost nothing. It very much depends on the voltage your multimeter applies to the circuit when testing continuity as to whether a semiconductor junction (of which there will be many) will show continuity or not. The manual should tell you.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16685"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="e2jk&#039;s picture" title="e2jk&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Issues flashing firmware on both emonTx and emonGLCD</h3>

    <div class="submitted">Submitted by e2jk (not verified) on Mon, 09/12/2013 - 19:11.</div>
    <div class="content">
     <p>My low end multimeter&#39;s <a href="http://www.elro.eu/uploads/products/manual/M970_Manual.pdf">user&#39;s manual</a> isn&#39;t that fancy ;)</p>
<p>Anyway, I&#39;ve connected TXD and RXD, but when running this I don&#39;t get anything returned:</p>
<blockquote><p>$ echo test &gt; /dev/ttyUSB0 &amp;&amp; read -t 3 A &lt; /dev/ttyUSB0 &amp;&amp; echo $A</p>
</blockquote>
<p>(command from the <a href="http://www.raspberrypi.org/phpBB3/viewtopic.php?t=59633&amp;p=445936#p446012">Raspberry Pi&#39;s forums</a>, let me know if I&#39;m not doing this correctly)</p>
<p>We&#39;re actually meeting tomorrow with my LUG to get our local Hackerspace started, and I&#39;ve asked one of the guys to bring one of his USB-to-FTDI cables, I&#39;ll then be able to identify what goes wrong.</p>
<p>Thanks guys for your help!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17673"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="e2jk&#039;s picture" title="e2jk&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Issues flashing firmware on both emonTx and emonGLCD</h3>

    <div class="submitted">Submitted by e2jk (not verified) on Thu, 16/01/2014 - 20:27.</div>
    <div class="content">
     <p>I&#39;m back from vacation, and have received the new cable. I&#39;m glad to report that one works fine, and I was able to upload the LCD test sketch: red and green are alternating!</p>
<p>Thanks for your help, issue closed!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3307"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-3l7pA5Jhz5iY_y8r1N6T30_WqP8wPRH2AEmxMAhCFSs" value="form-3l7pA5Jhz5iY_y8r1N6T30_WqP8wPRH2AEmxMAhCFSs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/3307 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:21:30 GMT -->
</html>
