<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/981 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:35:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Understanding how to add the SSR to emonbase for PV dump | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Understanding how to add the SSR to emonbase for PV dump</h3>
        <span class="submitted">Submitted by <a href="../user/1095.html" title="View user profile.">nbown</a> on Fri, 24/08/2012 - 07:50</span>
        <div class="content"><p>Understanding how to add the SSR to emonbase.&nbsp;</p>
<p>I have finally finished building the hardware (type 1 system), and got the system working (TX, Base and GLCD) got a few problems and it&rsquo;s all down to me level of understanding. I&rsquo;m not going to ask to many questions as I&rsquo;m sure you lot will make the muddy water clearer.&nbsp;</p>
<p>1.	The buttons on the GLCD don&rsquo;t anything, (physically working) I can&rsquo;t see anything in the code. Is this a option? Are there any graphs day plots?&nbsp;</p>
<p>2.	I want to dump my extra PV electricity into the hot water cylinder, I have a SSR (with zero crossing). However there are so many posts I&rsquo;m getting confused. I love the thread on the MK2 PV controller, but don&rsquo;t really what to use the extra hardware. I wish to put the emonbase in the airing cupboard, use one of the spare pin outs (PWM) to control the SSR. The bit that is really getting away from me is how to use the data sent for the TX for energy bucket. If it&rsquo;s a problem to use the Emonbase, then I&rsquo;m assuming that that the TX would need to crunch the numbers.&nbsp;</p>
<p>3.	I have a secondary return pump for my hot water (always have hot water at the taps), I would like to control it for the emonbase with a relay on for 15sec, off 120sec between 6am and 10pm has any body done this before?&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<p>The work I&rsquo;ve here is really good, I hope you can understand what I&rsquo;m try too do. Thanks in advance</p>
  <div class="forum-topic-navigation clear-block">
          <a href="970.html" class="topic-previous" title="Go to previous forum topic">‹ Rfm12 rev.1 </a>
              <a href="973.html" class="topic-next" title="Go to next forum topic">Arduino energy monitor ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-5896"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Fri, 24/08/2012 - 08:40.</div>
    <div class="content">
     <p>I don't think the energy bucket approach will work with an RF link between the sensors (in the TX) and the SSR output (emonBase), unless you are prepared to flood your area with a continuous stream of RF data. This will likely break everyones' car remote locking (which often use the same frequency).</p>
<p>Instead, I think you will need to put all the number crunching on the TX to produce a required power level (0-100% say) for the heater, which you send to the emonBase every 10 seconds or whatever. The emonBase will then have to turn the SSR on and off to acheive the request average power. I think you'll find that this approach will require quite a few seconds for the feed-back loop to stabalise, and so won't respond well to frequent changes in power levels.</p>
<p>Assuming you have a dedicated circuit from the fuse box to the water heater, why not put the SSR at the fuse-box end of the circuit? Then it could be directly controlled by the emonTx and you could make the control loop much more responsive, and the software is much simpler too.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5897"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1095.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nbown&#039;s picture" title="nbown&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by <a href="../user/1095.html" title="View user profile.">nbown</a> on Fri, 24/08/2012 - 10:53.</div>
    <div class="content">
     <p>I think that the way to go would be for a Dedicated Circiut, the immerson appears to come off the ring anyway, not something i like in the first place. thats some for my to do this weekend.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5902"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Fri, 24/08/2012 - 14:12.</div>
    <div class="content">
     <p>Technically, running a new dedicated circuit to the fusebox requires a suitably accredited 'Competent Person' to test and certify the circuit, to comply with Part P. I found myself in the same situation recently, with a spare fused outlet in my airing cupboard that I <strong>could</strong> have connect&nbsp;my new&nbsp;IH&nbsp;to, but this was on the ring, so would contravene current IEEE regulations.</p>
<p>It really pained my to do so - but I ended up paying for someone to run a new dedicated circuit.</p>
<p>Even cutting into an existing circuit at the fusebox to install a SSR or phase controller would probably require Part-P certification.</p>
<p>Probably even opening up the fusebox to install a CT for sensing my PV power is probably against Part-P&nbsp;- but this is the only sensible place to put it!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5905"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 24/08/2012 - 22:00.</div>
    <div class="content">
     <p>IEEE regulations?</p>
<p>IEEE is an American organisation. I think you mean BS 7671.</p>
<p>And don't get me going about the cowboys who despite allegedly being &quot;registered&quot; and &quot;competent&quot; have, fairly recently in 3 separate houses:</p>
<ol>
<li>In the process of installing a high power electric shower, installed Henley Blocks between meter and consumer unit and managed to swap line and neutral for a whole house (so all switches and fuses/mcbs were moved into the neutral leg),</li>
<li>Replaced a properly sized imperial cable that was feeding a secondary distribution board with 2.5mm<sup>2</sup> TE,</li>
<li>Installed cables not secured at the appropriate spacing (a minor breach, but a breach nevertheless).</li>
</ol>
<p>To say I have no confidence in the system is putting it mildly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5907"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="richmc&#039;s picture" title="richmc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by <a href="../user/1165.html" title="View user profile.">richmc</a> on Sat, 25/08/2012 - 10:46.</div>
    <div class="content">
     <p>Mines a good 'un Robert,</p>
<p>I was inches away from installing Roberts Mk 2 when I got my plumber to put longer immersion in I noticed there were two lots of wireing behind the immersion plate, looked like a ring main, so checked at the board, no one set of wires for the immersion, the muppet electrician who orignaly wired the house had wired in the timer/ CH pump/mid position valve and all the control wireing into the immersion feed, I don't think that would have stood up to the triac switching!</p>
<p>Now I'm having to pay an electrician to add in a spur for the ancilaries so I can have a truely dedicated immersion feed, the house is 12 years old surely how it was wired was against regulations? If I had found this out when I moved in three years ago I would have been able to claim on the NHBC insurance.</p>
<p>The biggest shame is that I could have had a month of testing and tweaking whilst the sun was out.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5908"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 25/08/2012 - 14:35.</div>
    <div class="content">
     <p>There's nothing wrong with that (in his book). He got paid, used the minimum materials, and you didn't find out until it was too late.</p>
<p>Ah, the beauty of being in a position to tell muppet electricians where to get off!</p>
<p>In 2009 I designed an extension to a standard central heating controller for a friend who ran a B&amp;B and had 2 hot water systems - one having 2 cylinders linked top &amp; bottom. He ended up with 2 extra zone valves, 2 relays in a control box that amazed his plumber (and me!) when it worked. And it has done ever since. (And I should add he's got an oil-fired boiler and a wood-chip fired one - just to add more complication).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5909"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 25/08/2012 - 18:18.</div>
    <div class="content">
     <p><em>nbown:	I want to dump my extra PV electricity into the hot water cylinder, I  have a SSR (with zero crossing). However there are so many posts I&rsquo;m  getting confused. I love the thread on the MK2 PV controller, but don&rsquo;t  really what to use the extra hardware. I wish to put the emonbase in the  airing cupboard, use one of the spare pin outs (PWM) to control the  SSR. The bit that is really getting away from me is how to use the data  sent for the TX for energy bucket. If it&rsquo;s a problem to use the  Emonbase, then I&rsquo;m assuming that that the TX would need to crunch the  numbers. </em></p>
<p>Hi, glad you like the Mk2 PV thread.&nbsp; I have very little idea about how the emon system works.&nbsp; I'm simply using an Arduino to divert surplus PV power to a dump load.&nbsp; To do this effectively, the measurement &amp; distribution algorithms need to run continuously.&nbsp; </p>
<p>With my Mk1 system, I used a smoothed PWM signal to control a 3rd-party device which allocated power to the immersion based on how much spare power had been measured in the preceeding period.&nbsp; In my opinion, that is a very poor way for a router system to operate; the response time was awful.&nbsp; The energy bucket approach is far superior and lends itself to diverting power in units of one mains cycle.&nbsp; A zero-switching device, SSR or triac, seems the best way to go for this mode of operation.&nbsp; This would require a digital output, rather than a PWM signal, to drive the output device.</p>
<p>Maybe you could have one Arduino to deal with your surplus PV power, as I'm doing, and then have a completely separate emon system to do all the other monitoring tasks that you're looking for.&nbsp; </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5910"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 25/08/2012 - 19:01.</div>
    <div class="content">
     <p>nbown:</p>
<p>If I can add a bit to Calypso_rae's reply.<em><br />
</em></p>
<p>I can see no reason why the emonTx (without the RF module) cannot be used to do want you want, and indeed I have one on order to go in a friend's house to do that (and a bit more besides). But I found with a quick trial sketch that the processing load is too much to do all the reporting calculations as well. So I'm using an emonTx minus the rf to drive the triac switch and a totally separate system for monitoring - not wholly because of the processor load problem, the construction of the house makes rf propagation a nightmare so by the time the transmitter was in a good place to link to the base and display, it had extended the immersion switch wiring unacceptably. Duplication was expensive (an extra emonTx, c.t, p.t, power supply, case, etc) but it should be a more rugged system.</p>
<p>I think the Mk 2 PV controller operating in burst fire mode is the way to go. If you opt for DIY phase control and do not use an expensive commercial module, you seem likely to exceed the permitted limits for harmonic currents injected back into the mains, and you will require expensive filters anyway.</p>
<p>I agree with Robinsmh - I don't think there's a way to send the switch control information to an emonBase via the rf link - not without running foul of the rules for the maximum time you're allowed to transmit in that frequency band. I'm intending to use a twisted pair of telephone cable to link the emonTx and the triac switch.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5912"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1095.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nbown&#039;s picture" title="nbown&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by <a href="../user/1095.html" title="View user profile.">nbown</a> on Sun, 26/08/2012 - 12:16.</div>
    <div class="content">
     <p>thanks for your help so far.</p>
<p>i going to have&nbsp;the immersion wiring done by the end of this week. so i can control it from the fuse box.</p>
<p>Q. if i go down the route of a dedicated set of hardware (which i agree is the best way to go). Rather than buying another TX, and ct's can i use my spare ardunio board with the tx just shutting the data from the ct's?</p>
<p>also there BOM for bits, the build the MK2? i don't recall seeing one.</p>
<p>thanks again</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5914"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 26/08/2012 - 15:49.</div>
    <div class="content">
     <p>nbown:</p>
<p>Check your pm's.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5919"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1095.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nbown&#039;s picture" title="nbown&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Understanding how to add the SSR to emonbase for PV dump</h3>

    <div class="submitted">Submitted by <a href="../user/1095.html" title="View user profile.">nbown</a> on Mon, 27/08/2012 - 08:34.</div>
    <div class="content">
     <p>Thanks Robert</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/981"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-noZAkgSxF9Jk5iKxUdFSeuU5O0hs6ZF77SKt1bQ2QnM" value="form-noZAkgSxF9Jk5iKxUdFSeuU5O0hs6ZF77SKt1bQ2QnM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
