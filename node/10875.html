<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10875 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:46:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Vrms reading in US / Canada | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Vrms reading in US / Canada</h3>
        <span class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Fri, 19/06/2015 - 11:38</span>
        <div class="content"><p>I have a question regarding Vrns reading of EmonPi</p>
<p>I&#39;m using it in North America where voltage is supposed to be 110V</p>
<p>I measured with multimeter the voltage where AC-AC adapter is plugged in and it measured 121.</p>
<p>So I updated the config file to this.</p>
<p>calibration = 121V #(UK/EU: 230V, US: 110V)</p>
<p>When I check the Vrms reading of the node, I get 247.62 V</p>
<p>Is this normal / expected? If not, what could be wrong?</p>
<p>Thanks in advance.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10876.html" class="topic-previous" title="Go to previous forum topic">‹ Accuracy of emonPi ?</a>
              <a href="10867.html" class="topic-next" title="Go to next forum topic">Useful Stuff gets buried - what can be done about it? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-31508"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 19/06/2015 - 12:39.</div>
    <div class="content">
     <p>Which ac adapter are you using to measure the voltage?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31510"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Fri, 19/06/2015 - 13:15.</div>
    <div class="content">
     <p>Hi Robert, it's the US AC-AC model that came with emonpi Kickstarter package (US option selected)</p>
<p>I assume it is this</p>
<p><a href="http://shop.openenergymonitor.com/ac-ac-power-supply-adapter-ac-voltage-sensor-us-plug/" title="http://shop.openenergymonitor.com/ac-ac-power-supply-adapter-ac-voltage-sensor-us-plug/">http://shop.openenergymonitor.com/ac-ac-power-supply-adapter-ac-voltage-...</a></p>
<p>But can double check when I get home tonight.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31514"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Fri, 19/06/2015 - 14:10.</div>
    <div class="content">
     <p><em>I&#39;m using it in North America where voltage is supposed to be </em><em>110V</em></p>
<p>Hi hrant,</p>
<p>The North American residential power supply&nbsp;is a 120/240 volt system. The terms&nbsp;110 and 115 Volts,&nbsp;are obsolete.</p>
<p><a href="http://vollrath.com/Vollrath/Parts-Support/FAQ-and-Reference/Reference/North-American-Voltage.htm">http://vollrath.com/Vollrath/Parts-Support/FAQ-and-Reference/Reference/North-American-Voltage.htm</a></p>
<p>Regards,</p>
<p>Bill</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31519"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 19/06/2015 - 16:32.</div>
    <div class="content">
     <p>So you're trying to catch up with us? But we're moving <i>down</i> from 240 V to 230 V to align with Europe!<br />
<i>"That's the beauty of standards, there are so many to choose from."</i></p>
<p>[The UK nominal centre voltage is likely to remain at 240 V for a long time. They fixed the problem by shifting the tolerances on the voltage. So instead of 240 V &plusmn; 6%, it's now 230 V &plusmn; 10%.  Half of 230 is 115. Oh, the irony.]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31520"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Fri, 19/06/2015 - 16:48.</div>
    <div class="content">
     <p>Thanks Bill for the reference,<br />
I referred to 110V because the Emonpi default settings had this<br />
calibration = 230V #(UK/EU: 230V, US: 110V)<br />
So we can propose to change it to<br />
calibration = 230V #(UK/EU: 230V, US: 120V)</p>
<p>But that is not the main concern, the essence of my question is that<br />
I have two phases of 120 V supply in my house, but the AC-AC adapter is connected to a single phase (which is by design and is ok)<br />
The actual voltage is 121V, however the Vrms reading of the node is almost 250V<br />
Where is this coming from? is that figure correct? if not what actions need to be taken to correct it?</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31521"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Fri, 19/06/2015 - 17:59.</div>
    <div class="content">
     <p><em>But that is not the main concern, the essence of my question is that<br />
I have two phases of 120 V supply in my house, but the AC-AC adapter is connected to a single phase (which is by design and is ok)<br />
The actual voltage is&nbsp;121V, however the&nbsp;Vrms&nbsp;reading of the node is almost&nbsp;250V<br />
Where is this coming from? is that figure correct? if not what actions need to be taken to correct it?</em></p>
<p>&nbsp;</p>
<p>What you have is this: (Your adapter is connected to single&nbsp;<strong><em>leg</em></strong>&nbsp;of your <em><strong>split-phase</strong></em> system)<br />
<img alt="" src="../sites/default/files/NA_split-phase_power_1.jpg" /><br />
Short answer: yes, the voltage&nbsp;you measured with your meter&nbsp;is&nbsp;correct.</p>
<p>This may help clarify things:&nbsp;<a href="https://learn.openenergymonitor.org/?redirect=EmonTx-in-North-America">http://openenergymonitor.org/emon/buildingblocks/EmonTx-in-North-America</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31523"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 19/06/2015 - 18:20.</div>
    <div class="content">
     <p>I thought the original question was one of the calibration constant (but I had to check that the correct adapter was being used first). The 120 V and 230 V adapters both output roughly the same voltage, which gives roughly the same input to the ADC. It's the calibration constant that turns the numbers out of the ADC back into a meaningful voltage, so it's that which is wrong.</p>
<p>I understand that hrant has changed the source sketch, but I think he also needs to compile and upload it into the AVR inside his emonPi. Then he should see the correct (or nearly correct) value, close to 121 V, being reported.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31524"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Fri, 19/06/2015 - 19:13.</div>
    <div class="content">
     <p>Thanks Bill and Robert,<br />
Yes My adapter is connected to a single leg of split-phase system, shouldn't then the reading be 120V?<br />
Or is there logic in EmonPi that figures this out and extrapolates my readings as if my adapter was connected to two legs of a split-phase system?</p>
<p>Or is it the case that (As Robert pointed out) I need to compile and upload it into the AVR as I changed the default value from 230 to 121? (but that's a config not a sketch no?)</p>
<p>I am under the impression that any changes I make to the config file are effective after a restart.<br />
See this thread<br />
<a href="10771.html" title="http://openenergymonitor.org/emon/node/10771">http://openenergymonitor.org/emon/node/10771</a><br />
I did not take any additional steps to compile a sketch, and it's the same file that was edited to fix the issue of Inactive nodes.</p>
<p>Thanks for your responses</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31525"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Fri, 19/06/2015 - 19:20.</div>
    <div class="content">
     <p><em>I thought the original question was one of the calibration constant</em></p>
<p>True, but&nbsp;he stated:</p>
<p><em>I&#39;m using it in North America where voltage is supposed to be 110V​</em></p>
<p>So&nbsp;I wanted to ensure he understood that 110V was just an outdated term. i.e the actual values are 120/240, and that the voltage&nbsp;he measured with his meter (I should have made&nbsp;<em>that</em>&nbsp;point clearer) is&nbsp;correct for a 120/240 system.</p>
<p>I edited my post above to that effect.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31528"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 19/06/2015 - 20:48.</div>
    <div class="content">
     <p>I was only repeating what I understood (I think it was from Glyn in another thread about calibrating the emonPi). The problem is, there is no mechanism for the AVR to read a disc file, so it cannot read the config data.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31530"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Fri, 19/06/2015 - 22:14.</div>
    <div class="content">
     <p>Presumably it could get passed in at boot time though, assuming that link is bi-directional. &nbsp;Or better yet, just let the AVR calculate OEM-Watts, OEM-Amps, and OEM-Volts and let the RPi turn them into real Watts, Amps and Volts as discussed recently in this thread: &nbsp;<a href="10800.html">http://openenergymonitor.org/emon/node/10800</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31534"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 20/06/2015 - 00:44.</div>
    <div class="content">
     <p><i>"Presumably it could get passed in at boot time though, assuming that link is bi-directional. "</i></p>
<p>I thought that was a possibility, but even if the link is there, it seems as if timing would be highly critical as, for the "continuous" sketches at least although these aren't the default, you presumably would not want the AVR to respond to anything and slow down once it was in the main loop. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31536"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Sat, 20/06/2015 - 02:03.</div>
    <div class="content">
     <p>Hrant - I not sure if this completely answers your question but it may help. &nbsp;I am in the US and the EmonHub line referred to should be:</p>
<p>&nbsp; &nbsp; &nbsp;calibration = 110V #(UK/EU: 230V, US: 110V)</p>
<p>It should not be &quot;calibration = <strong>121V </strong>#(UK/EU: 230V, US: 110V)&quot;. &nbsp;I also tried this with no success. &nbsp;As far as I can tell this is a &quot;flag&quot; of 230V or 110V and not a measured calibration voltage. &nbsp;For me the AC-AC Adapter Vrms is about 3 volts lower than a Fluke DVM measured voltage. &nbsp;I have not been able to locate an emonPi calibration area other than the one you referenced. &nbsp;I am guessing (hoping) it will be in a future version.&nbsp;</p>
<p>Also, make sure you update to V1.7 - it fixes an issue with the Vrms reading. &nbsp; <a href="https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/compiled/CHANGE LOG.md" title="https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/compiled/CHANGE%20LOG.md">https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31537"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sat, 20/06/2015 - 05:12.</div>
    <div class="content">
     <p>Changing the calibration constants&nbsp;on-the-fly seems a bit over the top. &nbsp;I don&#39;t think I know of any meters that can do that. &nbsp; Currently you have to reflash the AVR f/w to change them, so requiring that you have to restart the AVR to change them seems an improvement, and avoids the need to be checking for anything in the main loop. &nbsp;After restarting, the AVR could refuse to do anything until it&#39;s been fed its calibration constants, and once received, it could continue with business as usual. &nbsp;I guess you&#39;d need to check the relative performance of doing maths with a number in RAM &nbsp;Vs doing maths with a number hardcoded in the image.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31539"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 20/06/2015 - 08:21.</div>
    <div class="content">
     <p>It is my understanding that ehe UK vs US setting is set by the user in emonhub.conf with the &quot;<a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/conf/emonhub.conf#L58">calibration = 110V #(UK/EU: 230V, US: 110V)</a>&quot; line. Only &quot;110V&quot;&nbsp;or &quot;230V&quot; are valid entries.</p>
<p>These&nbsp;are then <a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/src/interfacers/EmonHubJeeInterfacer.py#L183-L186">translated into either &quot;1p&quot; or &quot;2p&quot;</a> and <a href="https://github.com/openenergymonitor/emonhub/blob/emon-pi/src/interfacers/EmonHubJeeInterfacer.py#L193">sent to the emonpi&nbsp;board via the serial port</a> much the same way the rfm is configured.</p>
<p>The emonpi sketch&#39;s <a href="https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/emonPi_RFM69CW_RF12Demo_DiscreteSampling.ino#L155">us/uk option</a>&nbsp;sets a <a href="https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/emonPi_RF.ino#L109-L114">&quot;USA&quot; boolean flag</a>&nbsp;and <a href="https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/emonPi_RFM69CW_RF12Demo_DiscreteSampling.ino#L208-L217">that flag is used in the main loop</a> to select&nbsp;a calibration constant. The calibration constant selected can be <a href="https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/emonPi_RFM69CW_RF12Demo_DiscreteSampling.ino#L72-L74">one of 2 preset values</a>&nbsp;these values are hardcoded&nbsp;into the sketch and if adjusted the sketch will need recompiling and uploading.</p>
<p>However, beware the emonpi&nbsp;update routine will upload the default hex file and overwrite the edits.as&nbsp;<a href="10800.html#comment-31009">discussed&nbsp;here</a></p>
<p>So going back to the OPQ &quot;calibration = 121V #(UK/EU: 230V, US: 110V)&quot; isn&#39;t valid and therefore it&#39;s defaulting to &quot;UK mode&quot; hence the ~247v. If you set it back to &quot;110V&quot; (US mode) and compare the reported values with your DMM readings. Then if required, the <a href="https://github.com/openenergymonitor/emonpi/blob/master/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/emonPi_RFM69CW_RF12Demo_DiscreteSampling.ino#L74">const float Vcal_USA= 130.0;</a> line in the&nbsp;sketch&nbsp;can be adjusted using &quot;&nbsp;new Vcal_USA =&nbsp;reported voltage&nbsp;/&nbsp;DMM reading x existing Vcal_USA &quot; and then recompile&amp;upload&nbsp;keeping in mind the points about emonpi updates.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31541"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 20/06/2015 - 11:23.</div>
    <div class="content">
     <p>In the light of this misunderstanding, would it not be better to change the config and the logic to use (say) "calibration = UK/EU"  or "calibration = US".</p>
<p><i>[Yes, I know, "horse" and "stable door" springs to mind.]</i></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31543"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 20/06/2015 - 12:27.</div>
    <div class="content">
     <p>I would go a step further and call the US v UK/EU thing&nbsp;a &quot;mode&quot; or a &quot;setting&quot; not a calibration, as that appears to be what has caused the confusion and why it appears in the settings.</p>
<p>Personally, I would&nbsp;of had&nbsp;&quot;usamode = true&quot; in emonhub.conf, (as an alternative to omitting it to use the&nbsp;&quot;non-US&nbsp;default&quot; ie UK/EU&nbsp;or defining&nbsp;&quot;usamode = false&quot; to be verbose). That boolean could be carried all the way through to the final code &quot;if (USA)&nbsp;Vcal = Vcal_USA;&quot; This also sidesteps the 240v&nbsp;vs 230 or 110v vs 115v&nbsp;vs 120v.</p>
<p>​Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31546"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Sat, 20/06/2015 - 14:29.</div>
    <div class="content">
     <p>Thank you Paul, Jon, Robert et&nbsp;all&nbsp;for all the responses, you were right on.</p>
<p>The entry in the config file is just a selector and not a calibration value, and I agree with Paul proposal of naming it usamode = true / false</p>
<p>As soon as I changed the entry to 110V, my Vrms reading changed to 119.3V</p>
<p>Currently my Multimeter reading at the elctric panel is 119V, and where the AC-AC plug is connected it reads 120V</p>
<p>Unless I get advised by you otherwise I doubt that I need to change the Vcal_USA value from the default 130 in&nbsp;~/emonpi/Atmega328/emonPi_RFM69CW_RF12Demo_DiscreteSampling/emonPi_RFM69CW_RF12Demo_DiscreteSampling.ino and recompile as my current Vrms value is right between my Multimeter readings.</p>
<p>&nbsp;</p>
<p>Now that this is settled, and voltage reading is correct&nbsp;my Power1 readings are way off.</p>
<p>So I started reading up on this thread <a href="10800.html" title="http://openenergymonitor.org/emon/node/10800">http://openenergymonitor.org/emon/node/10800</a> to see if my situation is the same.</p>
<p>To first give you some background, my EmonPi kit came with 2 CT sensors,unfortunately I cannot connect them to the Main source on my panel, as the diameter of the sensors are&nbsp;not large enough for US/Canada, I&#39;m following up on this thread <a href="10165.html" title="http://openenergymonitor.org/emon/node/10165">http://openenergymonitor.org/emon/node/10165</a>  to settle for a proper solution for that issue.</p>
<p>In the meantime, I&#39;m using the CT sensors to connect to individual breakers to measure the power and calibrate my system (One is connected to Pool Pump, and another to AC unit, I started with these because I know there is nothing else connected to those breakers, and they are the main factors of my electricity consumption during the warmer seasons)</p>
<p>My Pool Pump has a power reading on it, and at 1500 RPM, it is displaying 166 Wh</p>
<p>However My Power1 reading on EmonPi reads 75W previously before the Vrms fix around 150Wh</p>
<p>I do realize I&#39;m measuring power on a 240V (242 VAC with multimeter to be accurate) device, but the calculations in EmonPi is based on 120V Vrms reading and CT1, which should measure about half the correct value, still doubling 75 would only get me around 150Wh which is still 10% off.</p>
<p>I have two questions.</p>
<p>1- Is adding a multiplier of 2 in EmonCMS feeds good enough to account for 120/240 measurement issue? I don&#39;t want to set back my Vrms to fake 240 to fix this?&nbsp;(I eventually would be measuring full electric consumption by connecting two CTs to the main entries) or should I make adjustments early on in the sketch? I doubt that it makes a difference, but I seek your advice.</p>
<p>2- Why the variance between Pump telling me 166Wh and Power1 telling me 150Wh? is it the same issue as <a href="10800.html" title="http://openenergymonitor.org/emon/node/10800">http://openenergymonitor.org/emon/node/10800</a> ?</p>
<p>Should I be changing the multiplier in EmonCMS to 166/75= 2.213 to match the reading to Pump reading? Anyone has experience about the accuracy of the power measured on such devices?</p>
<p>Which one I should rely more on?</p>
<p>For Reference, this is the pump</p>
<p><a href="http://www.amazon.com/gp/product/B00OLSWQS6?psc=1&amp;redirect=true&amp;ref_=oh_aui_detailpage_o02_s00" title="http://www.amazon.com/gp/product/B00OLSWQS6?psc=1&amp;redirect=true&amp;ref_=oh_aui_detailpage_o02_s00">http://www.amazon.com/gp/product/B00OLSWQS6?psc=1&amp;redirect=true&amp;ref_=oh_...</a></p>
<p>Many thanks in advance.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31549"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 20/06/2015 - 16:33.</div>
    <div class="content">
     <p>Hopefully, all the information you need about CTs, including alternative large aperture ones, is in Building Blocks - EmonTx-Use in North America.</p>
<p>Pool Pump: Is it running off 240 V? How are you measuring the power? 166 Wh is ENERGY!<br />
It has a variable speed drive, so the power factor is anybody's guess. If you're saying P = V &times; I, you're probably off because of the power factor, and the emonPi is more likely to be correct (or exactly half if it's 240 V). If your number is 166 VA, then 150 / 166 = 0.9, and that's a respectable power factor for a variable speed drive.</p>
<p>The emonPi should measure power to an absurdly low power factor, but the way it does it means that it loses accuracy as the power factor gets worse. I don't think anyone has done proper tests to determine the errors, but I'd think that with a sensible current - a few amps, it should be reasonably accurate down to a pf of about 0.3 if it's been fully calibrated.</p>
<p>If the pump has a 240 V feed with no neutral, you'd simply double the power in emonCMS, assuming the voltage balance between the two legs is good (which normally appears to be the case). If it's got a neutral, you might find there is a neutral current that complicates matters, and to allow for that you could fudge the issue and make the multiplier a bit different to 2, which way depends on which leg has the higher current and which one you are measuring.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31551"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Vrms reading in US / Canada</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Sat, 20/06/2015 - 19:40.</div>
    <div class="content">
     <p>Robert,</p>
<p>The Pump has 240V with no neutral, just two legs of split phase.</p>
<p>The power reading is from the Pool Pump itself, so I have no idea how and what they are measuring, I&#39;m assuming it is power as it is one of their selling points.</p>
<p>I have not measured the current (didn&#39;t feel like splitting the wires ...) just the voltage.</p>
<p>Thanks</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10875"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Pkzkl3kRkzNdf8kkSAlsJjeWU531Z70v6GW2_iHkAcY" value="form-Pkzkl3kRkzNdf8kkSAlsJjeWU531Z70v6GW2_iHkAcY"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
