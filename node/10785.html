<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10785 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:23:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Trouble with Temperature reading | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Trouble with Temperature reading</h3>
        <span class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Wed, 03/06/2015 - 00:09</span>
        <div class="content"><p>Hi,</p>
<p>I&#39;m using the Kickstarter EmonPi Package, I had purchased SWE2b Sensor Connection Module to connect multiple Temperature sensors.</p>
<p><a href="http://shop.openenergymonitor.com/rj45-to-terminal-block-breakout-for-ds18b20/?page_context=category&amp;faceted_search=0" title="http://shop.openenergymonitor.com/rj45-to-terminal-block-breakout-for-ds18b20/?page_context=category&amp;faceted_search=0">http://shop.openenergymonitor.com/rj45-to-terminal-block-breakout-for-ds...</a></p>
<p>&nbsp;</p>
<p>Originally I connected a single Temp RJ45 Encapsulated DS18B20 temperature sensor.</p>
<p><a href="http://shop.openenergymonitor.com/rj45-encapsulated-ds18b20-temperature-sensor/" title="http://shop.openenergymonitor.com/rj45-encapsulated-ds18b20-temperature-sensor/">http://shop.openenergymonitor.com/rj45-encapsulated-ds18b20-temperature-...</a></p>
<p>Which worked ok, (I saw the temperature being logging and value changing as the temperature changed)</p>
<p>Then I decided to hook up multiple temperature sensors. (Pic attached)</p>
<p>At first I started with only two Sensors on the board and hooked it up to EmonPi (through RJ45 port)</p>
<p>To my surprise nothing on my nodes changed, I only saw one temperature value, and interestingly not changing value: (25.5 C)</p>
<p>Then I removed the board to add additional sensors just to test, and interestingly I still got readings (with no board or sensors connected)</p>
<p>How is that possible/ there is no temperature sensor connected at all.</p>
<p>Is my setup wrong or is there a bug in the code that does not detect change?</p>
<p>I even tried reboot in between.</p>
<p>Even after connecting 5 sensors, I still got one sensor reading (which I&#39;m confident is stuck at an old reading)</p>
<p>However the log tells me that it is receiving that value from the node.</p>
<p>
2015-06-02 23:47:11,152 INFO RFM2Pi Publishing: emonhub/rx/5/values 7,45,52,245.55,25.5,0,0,0,0,0,0 2015-06-02 23:47:11,154 DEBUG RFM2Pi 8183 adding frame to buffer =&gt; [1433288831, 5, 7, 45, 52, 245.55, 25.5, 0, 0, 0, 0, 0, 0] 2015-06-02 23:47:11,155 DEBUG RFM2Pi 8183 Sent to channel&#39; : ToEmonCMS<br />
&nbsp;</p>
<p>Can anyone spot something wrong I&#39;m doing, I looked everywhere for any documentation on how to hook up SWE2b board properly but couldn&#39;t find anything that would explain this.</p>
<p>Sorry if I missed something.</p>
<p>&nbsp;</p>
<p>Thanks in advance</p>
<p>Hrant</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10787.html" class="topic-previous" title="Go to previous forum topic">‹ Emoncms kWhd Problems</a>
              <a href="10835.html" class="topic-next" title="Go to next forum topic">Emoncms feed &amp; kWhd do not match ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-30904"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Trouble with Temperature reading</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 03/06/2015 - 14:39.</div>
    <div class="content">
     <p>Hello Hrant, I wonder if you could try running the emonpi updater from the Admin menu in emoncms, it will re-upload the firmware and ensure all the latest updates are on there. Just tested a couple of emonpi&#39;s here and they all seem to be sending the temperature data ok. It may be something to do with the way the firmware detects the sensor, it would be useful to know if that fixes it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30908"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Trouble with Temperature reading</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Wed, 03/06/2015 - 18:10.</div>
    <div class="content">
     <p>Hi TrystanLea,</p>
<p>Thanks for answering, I will most certainly test that tonight when I get back home, in the meantime let me provide further details of some tests I did in hopes that it sheds more light to the issue.</p>
<p>Test 1<br />
After the above tests, I removed the SWE2b board and connected the "RJ45 Encapsulated DS18B20 temperature sensor" directly to EmonPi, and right away the T1 readings changed from 25.5C to 23C, indicating that the device was back to reading data properly (23C is more reflective of the room temperature)</p>
<p>Test 2<br />
Removed the Sensor, (no Temperature sensors attached) and the temperature reading jumped back to 25.5C</p>
<p>Test 3<br />
Remove all other sensors from SWE2b board, and just connect one RJ45 to EmonPi, and connect the other to "RJ45 Encapsulated DS18B20 temperature sensor" from Test 1<br />
Temperature reading briefly showed 45C or something high then showed 23C (I can see that it is now reading 23.1C, hence I'm assuming that it is working ok with that sensor)</p>
<p>Next tests that I will perform, in addition to updating the firmware.<br />
Start testing every connection points of SWE2b board with a Temp sensor one at a time, in hopes of identifying a bad connection point or a sensor (I have few sensors I can test with)</p>
<p>In any case reading 25.5C with no sensors connected is probably an indication that a firmware / board issue exists.</p>
<p>Thanks<br />
Hrant</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30917"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Trouble with Temperature reading</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Thu, 04/06/2015 - 01:59.</div>
    <div class="content">
     <p>Hi TrystanLea,</p>
<p>I did the update and tested again, unfortunately nothing changed.</p>
<p>After the update with the RJ45 Temperature sensor plugged in, I get a good reading, when I unplug it, it jumps straight back to 25.5</p>
<p>Plug back and it&#39;s back to proper reading.</p>
<p>So definitely something is wrong somewhere.</p>
<p>Even if I reboot with no sensor plugged in, I&#39;m getting a reading of 25.5</p>
<p>Now with the board attached.</p>
<p>No matter what combination I try, whichever type of sensor (I have both kinds) on any of the 6 end points, I only see Temp 1 reading and stuck at 25.5, unless I plug in the RJ45 sensor to the board, then I see Temp 1 reading,</p>
<p>still nothhing from the others.</p>
<p>Is this board just plug and play or there needs to be some settings applied somewhere?</p>
<p>Looking at the pins of the board and testing with multi-meter I can see that all the nodes are connected in parallel, ie, all teh grounds together, all the +5V together and all the 1-Wires together (sadly I cannot confirm by looking at the schematic as the link for Download PCB CAD Files (FreePCB format + Gerbers&nbsp; <a href="http://files.openenergymonitor.org/CAD_files/SWE2bv1.0.REVISED.zip" title="http://files.openenergymonitor.org/CAD_files/SWE2bv1.0.REVISED.zip">http://files.openenergymonitor.org/CAD_files/SWE2bv1.0.REVISED.zip</a> is broken)</p>
<p>If they are all connected to each other in parallel, how does emonpi know how to detect one or multiple?</p>
<p>Thanks for looking into the issue.</p>
<p>Hrant</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31138"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Trouble with Temperature reading</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Wed, 10/06/2015 - 00:32.</div>
    <div class="content">
     <p>Hi TrystanLea</p>
<p>Any suggestion on how to proceed?</p>
<p>Thanks</p>
<p>Hrant</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31146"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8263.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Steve&#039;s picture" title="Steve&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Trouble with Temperature reading</h3>

    <div class="submitted">Submitted by <a href="../user/8263.html" title="View user profile.">Steve</a> on Wed, 10/06/2015 - 09:00.</div>
    <div class="content">
     <p>Hrant,</p>
<blockquote><p>If they are all connected to each other in parallel, how does emonpi know how to detect one or multiple?</p>
</blockquote>
<p>This is the clever part of the 1-Wire technology.&nbsp; All sensors connect to the same data wire.&nbsp; Each sensor has a unique serial number in read-only memory, and when the software starts up it asks the sensors to identify themselves.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31153"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Trouble with Temperature reading</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 10/06/2015 - 10:36.</div>
    <div class="content">
     <p>Hello hrant, Il try and get back to you later today after doing a bit more testing on this.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31165"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Trouble with Temperature reading</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 10/06/2015 - 16:01.</div>
    <div class="content">
     <p>Hello hrant, could you try a full power down including taking the power out, then before powering up connect all the temperature sensors. I cant quite work out from the above if you did this, a soft reboot wont reset the emonpi-shield it just resets the raspberrypi.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31166"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Trouble with Temperature reading</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 10/06/2015 - 16:06.</div>
    <div class="content">
     <p>When you power up the emonpi does the LCD on the emonpi say that there are multiple DS18B20 sensors connected? it says how many are connected after the initial &quot;emonPi v1.10&quot;, &quot;OpenEnergyMon&quot; and AC wave screen.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31177"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Trouble with Temperature reading</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Thu, 11/06/2015 - 01:17.</div>
    <div class="content">
     <p>Hi TrystanLea</p>
<p>Awesome, that was it, powering it down, unplugging the power then powering back on showed 5 DS18B20 sensors and now all of those sensors are showing values.</p>
<p>Although all sensors are next to each other (for this test), and one would expect the same reading on all of them</p>
<p>I see quite a bit of variation.</p>
<p>The senors read the followng.</p>
<p>25.1</p>
<p>25.6</p>
<p>25.5</p>
<p>25.8</p>
<p>26.2</p>
<p>And my room thermostat temperature reading is 24.5 Celsius</p>
<p>Is this normal?</p>
<p>&nbsp;</p>
<p>ON another note, when I remove the RJ45 sensor, I still get 25.5 values for it, I have no idea where this figure is coming from, not that it bothers me as I don&#39;t plan to remove it, however it suggest a problem in firmware / electronics.</p>
<p>&nbsp;</p>
<p>Steve, many thanks for the explanation.</p>
<p>TrystanLea, you saved the day, many thanks</p>
<p>Hrant</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10785"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-ZXQ73Y3cKS1tAJ-cbf4W4l-wXlMT88KUrCtlXUxDeSo" value="form-ZXQ73Y3cKS1tAJ-cbf4W4l-wXlMT88KUrCtlXUxDeSo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
