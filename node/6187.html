<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/6187 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:01:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Need help to get EmonTx to talk thru hub to emoncms.org | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Need help to get EmonTx to talk thru hub to emoncms.org</h3>
        <span class="submitted">Submitted by <a href="../user/7284.html" title="View user profile.">johnkwhite</a> on Sat, 29/11/2014 - 02:26</span>
        <div class="content"><p>I have purchased the following</p>
<p>Raspberry Pi B+ - I have installed the ready to go image &quot;emonSD-13-08-14.img&quot; and made the recommended changes to the config file for /boot/emonhub.conf</p>
<p>RFM12Pi - installed onto the Pi</p>
<p>EmonTx V3 + sensors - installed with 4 sensors &amp; connected an AC supply as well as DC power and I have removed the jumper J2 - there are no batteries installed on the board</p>
<p>I have read as many parts of the forum that I can understand and have been able to find the following error in&nbsp;my emonhub log</p>
<p>2014-11-29 01:55:05,892 WARNING 4053 RX data length: 12 is not valid for datacodes [&#39;L&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;]<br />
2014-11-29 01:55:16,884 DEBUG 4054 NEW FRAME : 1417226116.88&nbsp; 10 233 249 35 253 34 3 0 0 197 100 0 0</p>
<p>In summary the problem is that the system does not talk to&nbsp;emoncms.org and display data</p>
<p>Appreciate an help that people can give to point me in the right direction - I only have very limited knowledge in linux</p>
<p>Thanks John</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2941.html" class="topic-previous" title="Go to previous forum topic">‹ Thunder burnt the ethernet interface on my Raspberry Pi</a>
              <a href="6048.html" class="topic-next" title="Go to next forum topic">Serial link RPI&lt;-&gt;EMonTX using Emonhub (emonSD-13-08-14.img) ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-25401"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Need help to get EmonTx to talk thru hub to emoncms.org</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 29/11/2014 - 10:05.</div>
    <div class="content">
     <p>Hi John,</p>
<p>The error messages is indicating a payload containing&nbsp;12 bytes of data was received from node 10, which emonHub didn&#39;t know what to do with as it was told to expect a payload in the form of L, h, h, h, h, &nbsp;l, l, l, l &nbsp;which requires&nbsp;28 bytes, so it&nbsp;discards it.</p>
<p>You haven&#39;t mentioned changing the sketch on the emonTx&nbsp;so I assume its using the pre-loaded default sketch which has a payload of 6 integers, this would tie in with&nbsp;the 12 bytes of &quot;data&quot; received&nbsp;(excluding node id).</p>
<p>The expected data format is &quot;pairs of bytes as integers&quot; by default and would decode the default sketch without specifically declaring the nodes payload format in the conf, it is only <u>necessary</u> to declare&nbsp;the &quot;datacodes&quot; if straying from the default. If you were to specifically declare the default sketches &quot;datacodes&quot; it&nbsp;would be h, h, h, h, h, h which would specifically define a 12 byte payload rather than the default &quot;any even number&quot; &nbsp;to accept a undeclared number of&nbsp;&quot;pairs of bytes as integers&quot;.</p>
<p>I short you need to either remove or correct&nbsp;the &quot;datacodes&quot; setting in emonhub.conf&#39;s [nodes] [[10]] section unless you change the sketch on the emonTx&nbsp;if you want specifically that data payload.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25716"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7284.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="johnkwhite&#039;s picture" title="johnkwhite&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Need help to get EmonTx to talk thru hub to emoncms.org</h3>

    <div class="submitted">Submitted by <a href="../user/7284.html" title="View user profile.">johnkwhite</a> on Tue, 09/12/2014 - 13:25.</div>
    <div class="content">
     <p>Hi Paul</p>
<p>Thanks for your help.&nbsp;Apologies for delay, I have never asked used a forum before and expected it was going to email me when I received a reply. It was lucky I checked just in case today living in hope.</p>
<p>I have changed the datacodes as suggested and instantly it started feeding info to the emoncms.org. the reason I had used the other format was that it was in&nbsp;some setup instructions to do so.</p>
<p>Are you able to tell me what &quot;L&quot;and &quot;l&quot; and &quot;h&quot; stand for ? And what the other datacode set was trying to achieve ?</p>
<p>If you have time, a&nbsp;couple of&nbsp;Qs would be</p>
<p>1. &nbsp;how do I control the feed sensor info as some are reading negative and some positive yet all circuits being monitored are both&nbsp;using power ??&nbsp;</p>
<p>2. I purchased a USB to UART device that plugs into the emonTx - I have tried using Ardino but I have been unable to see how to connect to the config file on the device to make any changes or for that matter how to upload a new config file - Can you direct me to a blog or forum to learn how to do this pls ?</p>
<p>Thanks again for your help</p>
<p>John</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25718"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Need help to get EmonTx to talk thru hub to emoncms.org</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 09/12/2014 - 13:38.</div>
    <div class="content">
     <p>First, the forum doesn't email you. It's a long-standing problem that so far Trystan has been unable to rectify.</p>
<p>Second, what is your "feed sensor" - the emonTx that you mention? If you're using the ac adapter, then you will be calculating real power and the relative phase of current and voltage determines whether the power is positive (conventionally import) or negative. The easiest cure is to flip the CT on its cable.</p>
<p>Third, you can't "connect to the config file on the device". All you can do is load a new sketch into it. You need to get the default sketch (which was loaded before it was despatched to you) from GitHub (the Wiki has a link), edit that and load it, automatically overwriting the one that's in the emonTx. The instructions for getting started are here: <a href="https://learn.openenergymonitor.org/?redirect=setting-up-the-arduino-environment" title="http://openenergymonitor.org/emon/buildingblocks/setting-up-the-arduino-environment">http://openenergymonitor.org/emon/buildingblocks/setting-up-the-arduino-...</a></p>
<p>I think this is current info for the data codes: <a href="5289.html" title="http://openenergymonitor.org/emon/node/5289">http://openenergymonitor.org/emon/node/5289</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25734"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7284.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="johnkwhite&#039;s picture" title="johnkwhite&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Need help to get EmonTx to talk thru hub to emoncms.org</h3>

    <div class="submitted">Submitted by <a href="../user/7284.html" title="View user profile.">johnkwhite</a> on Tue, 09/12/2014 - 21:26.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>Thanks, I will try flipping the CT Sensor around and try to figure that out&nbsp;the links you have sent</p>
<p>John</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/6187"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-rQpy8Ax1rPFRtZWHVfVJco3YAiWJ6_fBztPyUvk5QsI" value="form-rQpy8Ax1rPFRtZWHVfVJco3YAiWJ6_fBztPyUvk5QsI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
