<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2359 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:19:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>New entry | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">New entry</h3>
        <span class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 09/05/2013 - 14:14</span>
        <div class="content"><p>Hi guys,</p>
<p>just wanted to say hello and thanks for all the information and the effort you are putting in helping people get started with the openenergymonitor platform</p>
<p>I just received my first (I already know it won&#39;t be the last but the wife wouldn&#39;t allow me to spend more :) ) batch of hardware with wich I&#39;m planning to monitor:</p>
<ul>
<li>
		External temperature</li>
<li>
		PC and Entertainment enrgy consumption</li>
<li>
		Global house energy consumption</li>
<li>
		Main Power failure alerting</li>
<li>
		Flood rain pumps energy consumption and activity (I have two, one working means some rain but no worries, two working means a lot of rain and better someone gets home to check that power won&#39;t go off all of a sudden)</li>
<li>
		In the future: rain gauge and other weather data, and if I will ever be able to afford them PV monitoring</li>
</ul>
<p>My emonbase&nbsp;of choice is the raspberry, and I plan on running emoncms on it (with mysql data on my nas over nfs, if possible) and to use it as a collector for all the other non emontx data I will be needing</p>
<p>&nbsp;</p>
<p>I&#39;ll try not to bother you too often (I am already nagging a coworker that has some soldering skills as mine are pretty abysmal) but I think that once I get the hardware running I will be able to cope with the software (where my skills are much better)</p>
<p>&nbsp;</p>
<p>Again, thanks for all the info and keep up with the good work</p>
<p>&nbsp;</p>
<p>Mattia</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2409.html" class="topic-previous" title="Go to previous forum topic">‹ Mesh network widget</a>
              <a href="1930.html" class="topic-next" title="Go to next forum topic">How to measure Variations in Mains Frequency ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-12046"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Sat, 11/05/2013 - 21:34.</div>
    <div class="content">
     <p>... quick update ... had a mate that can solder assemble the two emontxes ... uploading the firmware was a piece of cake, setting up the temperature sensors as well, setting up emoncms&nbsp;.. the same ... I am already logging main home consumption and a couple of temperatures ... the dashboards in emoncms are really great. Took me two hours yesterday and less than an hour today ... what can I say, &nbsp;I never had an arduino&nbsp;in my hands before wednesday ... you guys rock!</p>
<p>At the moment the emontx&nbsp;are not where I want to have them, will have to do some (simple) electrical work to set up the different feeds monitoring, but the main idea is to have the two emontx in closed boxes separate from anything with a voltage higher than 9v&nbsp;, while the CT sensors will be placed in the aprropriate safe places (no wires dangling, no &#39;temporary&#39; connections). Next in line is the optical sensor to monitor (in order to double check the ct global measuring) the electricity meter, then I&#39;ll start thinking about the weather data.</p>
<p>At the moment what looks like the best option (and cheapest) is to add an RFM01 to the raspberry and write/adapt some code to receive data from sensors coming from a&nbsp;Fine Offset Electronics WH1080&nbsp;(just bought the whole sensors set on ebay for 40 euro: pluviometer/anemometer/temperature/pressure/humidity).</p>
<p>I &#39;think&#39; I could also use one of the emontx&nbsp;and have them receive the data, but since that would mean changing the RF parameters in order to receive the data, then change them to send them to the pi (along with normal data) and then change them again to be able to receive the next transmission ... I think I would end up losing a lot of measurements...</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12153"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 15/05/2013 - 21:10.</div>
    <div class="content">
     <p>another update ... the software side looks almost done, I have managed to test and integrate all the ct senstors, the temperature sensors and the optical sensor, I have a 5-7% discrepancy between the calibrated watt calculation and the power sensor calculation.</p>
<p>I have followed the calibration procedure here:&nbsp;http://www.openenergymonitor.org/emon/modules/emontx/firmware/calibration%20 and I am using a dc adapter bought on the openenergymonitor shop (euro plug), the suggested initial constant is 228.268</p>
<p>I have measured the actual voltage (and calculated my actual constant) by measuring with a multimeter&nbsp;and a kill-a-watt, the problem is that the two instruments disagree on the actual voltage .. the multimeter measures around 228 volt plus or minus two volts, while the kill-a-watt measures 214 volts plus or minus one .... I tend to agree with the multimeter but I have a discrpenacy&nbsp;nonetheless.</p>
<p>&nbsp;</p>
<p>Will let it run a couple of days and then run some comparisons, right now the optical reading has been running for less than an hour ...</p>
<p>&nbsp;</p>
<p>I have also ordered a RFM01 receiver and already have the weather station sensors ... the next software project will be to tap into the sensors and add that data to emoncms ....</p>
<p>I still have to place the emontxes in their final boxes and do the correct electrical wiring, will take a couple of photos once that part is done.</p>
<p>&nbsp;</p>
<p>Have fun</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12154"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 15/05/2013 - 21:27.</div>
    <div class="content">
     <p>I see from your first post above that you want to implement <strong>Main Power failure alerting</strong>.</p>
<p>How do you plan to achieve this Mattia?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12157"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 16/05/2013 - 05:43.</div>
    <div class="content">
     <p>Hi,</p>
<p>I already have an UPS with which I am actually powering &nbsp;my internet router, firewall, home switch, and a&nbsp;nas and with which I plan on powering the raspberry and one of the two emontx. The ups is able to power all this rigamarole for about two hours so I&#39;ll have plenty of time to fire up some warning messages.</p>
<p>Right now the ups is already in my basement, I&#39;ll have to do some re-wiring and will put it next to the electricity meter (I have it inside the house in my basement). This way, when power fails, the reading on the mains CT and voltage sensor will drop next to 0 (actually 0 for the voltage sensor) and I will use the event plugin to notify me.</p>
<p>I have hacked around the event plugin to have it working with a fixed email address, and am planning to change the code to have it working using emoncms settings so that maybe I can give back something to the community (there just aren&#39;t enough hours in a day to do all I would like to get done ....) and eventually to add Growl or Notify My Android support ...</p>
<p>As long as the UPS batteries (or the raspberry, or the emontx) don&#39;t fail it should be foolproof :)&nbsp;</p>
<p>&nbsp;</p>
<p>Mattia</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12158"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 16/05/2013 - 08:00.</div>
    <div class="content">
     <p>...sorry .. double post ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12159"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3736.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="xz81&#039;s picture" title="xz81&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3736.html" title="View user profile.">xz81</a> on Thu, 16/05/2013 - 08:18.</div>
    <div class="content">
     <p>I found the alarm very interesting, despite I have no programming idea, may be it could be integrated in emoncms like a processing tab for a signal? (when it goes under a value, emoncms sends an email)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12161"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 16/05/2013 - 08:39.</div>
    <div class="content">
     <p>I look forward to that Mattia, as there are quite a few members wanting to use the event module.</p>
<p>The addition of <a href="http://boxcar.io/">Boxcar prowl</a> would be a welcome addition especially for iPhone/iPad users. The app is free, reliable and very popular, and they have full api details on their website.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12162"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 16/05/2013 - 09:16.</div>
    <div class="content">
     <p>Hi,</p>
<p>@xz81: you already have this functionality in the event module, the problem is that at the moment it is disabled because of a couple of problems.</p>
<p>The problems I have found (so far) :</p>
<ul>
<li>
		adding new events</li>
<li>
		firing the event check function</li>
<li>
		being able to use the data stored in the event settings to send emalis (I haven&#39;t checked twitter and prowl ... I have no twitter account and don&#39;t use ios in general so you will be on your own there .... or at least until I finish with the base install and can get back to it ...)</li>
</ul>
<p>and what I have fixed so far:</p>
<ul>
<li>
		firing the event check function: patch&nbsp;Modules/feed/feed_model.php with the following:</li>
</ul>
<blockquote><p>diff --git a/Modules/feed/feed_model.php b/Modules/feed/feed_model.php<br />
		index f6db96c..4d34a7e 100644<br />
		--- a/Modules/feed/feed_model.php<br />
		+++ b/Modules/feed/feed_model.php<br />
		@@ -275,11 +275,12 @@ class Feed<br />
		&nbsp;&nbsp;&nbsp;&nbsp; $updatetime = date(&quot;Y-n-j H:i:s&quot;, $updatetime);<br />
		&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;mysqli-&gt;query(&quot;UPDATE feeds SET value = &#39;$value&#39;, time = &#39;$updatetime&#39; WHERE id=&#39;$feedid&#39;&quot;);</p>
<p>-&nbsp;&nbsp;&nbsp; // Check feed event if event module is installed<br />
		-&nbsp;&nbsp;&nbsp; // if (is_dir(realpath(dirname(__FILE__)).&#39;/../event/&#39;)) {<br />
		-&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp; require_once(realpath(dirname(__FILE__)).&#39;/../event/event_model.php&#39;);<br />
		-&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp; check_feed_event($feedid,$updatetime,$feedtime,$value);<br />
		-&nbsp;&nbsp;&nbsp; // }<br />
		+&nbsp;&nbsp;&nbsp; //Check feed event if event module is installed<br />
		+&nbsp;&nbsp;&nbsp; if (is_dir(realpath(dirname(__FILE__)).&#39;/../event/&#39;)) {<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; require_once(realpath(dirname(__FILE__)).&#39;/../event/event_model.php&#39;);<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $event = new Event($this-&gt;mysqli);<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $event-&gt;check_feed_event($feedid,$updatetime,$feedtime,$value);<br />
		+&nbsp;&nbsp;&nbsp; }</p>
<p>	&nbsp;&nbsp;&nbsp;&nbsp; return $value;<br />
	&nbsp;&nbsp; }<br />
	@@ -307,11 +308,12 @@ class Feed<br />
	&nbsp;&nbsp;&nbsp;&nbsp; $updatetime = date(&quot;Y-n-j H:i:s&quot;, $updatetime);<br />
	&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;mysqli-&gt;query(&quot;UPDATE feeds SET value = &#39;$value&#39;, time = &#39;$updatetime&#39; WHERE id=&#39;$feedid&#39;&quot;);</p>
<p>-&nbsp;&nbsp;&nbsp; // Check feed event if event module is installed<br />
		-&nbsp;&nbsp;&nbsp; // if (is_dir(realpath(dirname(__FILE__)).&#39;/../event/&#39;)) {<br />
		-&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp; require_once(realpath(dirname(__FILE__)).&#39;/../event/event_model.php&#39;);<br />
		-&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp; check_feed_event($feedid,$updatetime,$feedtime,$value);<br />
		-&nbsp;&nbsp;&nbsp; // }<br />
		+&nbsp;&nbsp;&nbsp; //Check feed event if event module is installed<br />
		+&nbsp;&nbsp;&nbsp; if (is_dir(realpath(dirname(__FILE__)).&#39;/../event/&#39;)) {<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; require_once(realpath(dirname(__FILE__)).&#39;/../event/event_model.php&#39;);<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $event = new Event($this-&gt;mysqli);<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $event-&gt;check_feed_event($feedid,$updatetime,$feedtime,$value);<br />
		+&nbsp;&nbsp;&nbsp; }</p>
</blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp; return $value;<br />
	&nbsp;&nbsp; }</p>
<ul>
<li>
		Apply the following patch to Modules/event/event_model.php in order to correctly read the settings (and to give a more meaningful subject to the email sent):</li>
</ul>
<blockquote><p>diff --git a/event_model.php b/event_model.php<br />
		index 1b5b13d..e6ac6ad 100644<br />
		--- a/event_model.php<br />
		+++ b/event_model.php<br />
		@@ -112,19 +112,21 @@ class Event<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $row;<br />
		&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>		+<br />
		&nbsp;&nbsp;&nbsp;&nbsp; public function check_feed_event($feedid,$updatetime,$feedtime,$value,$row=NULL) {</p>
<p>		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; global $session;<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; global $user,$session,$feed;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $userid = $session[&#39;userid&#39;];</p>
<p>		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $result = $this-&gt;mysqli-&gt;query(&quot;SELECT * FROM event WHERE eventfeed = $feedid&quot;);</p>
<p>		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // check type<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while ($row = $result-&gt;fetch_array()) {<br />
		+<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($row[&#39;lasttime&#39;]+$row[&#39;mutetime&#39;] &gt; time() ) {<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $sendAlert = 0;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch($row[&#39;eventtype&#39;]) {<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 0:<br />
		@@ -184,7 +186,7 @@ class Event<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 0:<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // email<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; require_once(realpath(dirname(__FILE__)).&#39;/../event/scripts/phpmailer/class.phpmailer.php&#39;);<br />
		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $smtp = get_user_smtp($userid);<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $smtp = $this-&gt;get_settings($userid);</p>
<p>		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = new PHPMailer();<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		@@ -200,24 +202,24 @@ class Event<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;SMTPAuth&nbsp;&nbsp; = true;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // enable SMTP authentication<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;SMTPSecure = &quot;ssl&quot;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // sets the prefix to the servier</p>
<p>		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $smtp[&#39;smtpserver&#39;];&nbsp;&nbsp;&nbsp;&nbsp; // sets GMAIL as the SMTP server<br />
		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;Port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $smtp[&#39;smtpport&#39;];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // set the SMTP port for the GMAIL server<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;Host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $smtp[&#39;smtpserver&#39;];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // sets GMAIL as the SMTP server<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;Port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $smtp[&#39;smtpport&#39;];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // set the SMTP port for the GMAIL server<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;Username&nbsp;&nbsp; = $smtp[&#39;smtpuser&#39;];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // GMAIL username<br />
		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $salt = get_user_salt($row[&#39;userid&#39;]);<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $salt = $user-&gt;get_salt($userid);</p>
<p>		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;Password&nbsp;&nbsp; = trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $salt, base64_decode($smtp[&#39;smtppassword&#39;]), MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)));&nbsp;&nbsp; // GMAIL password<br />
		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;SetFrom($smtp[&#39;smtpuser&#39;], &#39;emoncms&#39;);<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $address = $smtp[&#39;smtpuser&#39;];<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;SetFrom($address, &#39;emoncms&#39;);<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //$mail-&gt;AddReplyTo(&quot;user2@gmail.com&#39;, &#39;First Last&quot;);<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;Subject&nbsp;&nbsp;&nbsp; = &quot;emoncms update&quot;;<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;Subject&nbsp;&nbsp;&nbsp; = &quot;emoncms update on feed -&gt; &quot; . $feed-&gt;get_field($row[&#39;eventfeed&#39;],&#39;name&#39;);;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //$mail-&gt;AltBody&nbsp;&nbsp;&nbsp; = &quot;To view the message, please use an HTML compatible email viewer!&quot;; // optional, comment out and test<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;MsgHTML($body);<br />
		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $address = $smtp[&#39;smtpuser&#39;];<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $mail-&gt;AddAddress($address, &quot;emoncms&quot;);<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //$mail-&gt;AddAttachment(&quot;images/phpmailer.gif&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // attachment<br />
		@@ -225,8 +227,10 @@ class Event<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(!$mail-&gt;Send()) {<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo &quot;Mailer Error: &quot; . $mail-&gt;ErrorInfo;<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error_log(&quot;Mailer Error: &quot; . $mail-&gt;ErrorInfo);<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo &quot;Message sent!&quot;;<br />
		+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error_log(&quot;Message sent&quot;);<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;</p>
</blockquote>
<p>&nbsp;</p>
<p>PS: the feed.diff patch also includes a fix that enables the use of dashboards through a port forward connection to emoncms</p>
<p>PPS: don&#39;t really know whether these changes will be enough to allow the use of the event module on the hosted emoncms.org&nbsp;</p>
<p>Now I&#39;ll start looking into why the event creation doesn&#39;t get registered, looking at the chrome debugger it looks like a problem with a jquery&nbsp;call that gets canceled from the client .. re-running the query in the same browser session successfully creates the event .... will have to investigate</p>
<p>&nbsp;</p>
<p>Regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12165"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 16/05/2013 - 09:56.</div>
    <div class="content">
     <p>This is a new patch for the event module that fixes the problem when adding and deleting events :the add and delete buttons were performing an ajax call that was canceled by the page reload, added the proper login to allow for the ajax call to finish before reloading the page</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12168"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 16/05/2013 - 11:00.</div>
    <div class="content">
     <p>Mattia, have you submitted a pull request on Git&nbsp;for your work, to update the current branch.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12170"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 16/05/2013 - 11:38.</div>
    <div class="content">
     <p>Erm, no .. I think there should be more than what I changed in order to make it work as intended, otherwise the original author would have done it himself .. it realy is a couple of lines per file ... what I am thinking is that either there are complications to use this code online on emoncms.org or he wants to do a complete overhaul ...&nbsp;</p>
<p>Anyway, it&#39;s done now, just in case ....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12333"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Fri, 24/05/2013 - 14:41.</div>
    <div class="content">
     <p>Small update .. I have been able to do some electrical work and have the pump monitoring emontx up, running, tested and safe, both from electrical hazards and from accidental cable pulling, still have to work on the electrical side on the main monitoring placement , I hope tomorrow will be the day ....</p>
<p>In the meantime, I have been playing with a WH1080&nbsp;weather station (I bought only the sensors for around 40 euro) and an RFM01 .. yesterday I was able to cobble together some wires and some soldering and managed to connect it to my emonbase (raspberry) together with the rfm12 .. the idea is to receive data from the emontx nodes with the rfm12 and from the weather sensors with the RFM01.</p>
<p>So far so good, I have used this project&nbsp;https://github.com/ToninoTarsi/swpi as a (very good) starting point and have modified it to feed data to emoncms. So far I only have the temperature sensor up and running, will try to get everything (rain and wind sensors) up and running in the weeknd .. will post some photos once everything is working</p>
<p>&nbsp;</p>
<p>Still amazed about how easy it is to get things going with the raspberry in general and the RFMxx modules in particular ...</p>
<p>&nbsp;</p>
<p>Regards</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12334"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 24/05/2013 - 17:48.</div>
    <div class="content">
     <p><em>madmatt: I have a 5-7% discrepancy between the calibrated watt calculation and the power sensor calculation.</em></p>
<p>My suggestion would be to adjust your cal value(s) until your system records exactly the same amount of consumed power as does your meter.&nbsp;&nbsp; Once the measured and actual values match, one would hope that this state of alignment would be maintained.&nbsp; Alternatively, if nothing is changed, you would hope that the &quot;discrepancy&quot; would remain at &quot;5 to 7%&quot; as before.</p>
<p>When using a standard sketch, power is not sensed continuously, so any rapid variations in the rate of consumed power may not be detected by your system.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12383"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Sun, 26/05/2013 - 12:26.</div>
    <div class="content">
     <p>Thanks calypso_rae , I already realized I would have to do some additional calibration. At the moment I am waiting to complete the electrical re-wiring before tackling the problem of fixing properly the optical sensor ... electrician tape, even for tests, won&#39;t do ... I get a lot of spurious inputs (I guess because of external light filtering in ...)</p>
<p>&nbsp;</p>
<p>On the other hand I am almost done (I hope) with the weather data logging and monitoring, these are my dashboards and teh events I have set up so far:</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12388"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 26/05/2013 - 16:28.</div>
    <div class="content">
     <p>A blob of Blu-tac should keep stray light out without any problems.&nbsp; It works fine with my (polled) LDR approach.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12394"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New entry</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Sun, 26/05/2013 - 18:30.</div>
    <div class="content">
     <p>Doh ... I was already thinking about a 3d&nbsp;printed custom &nbsp;cover that would probably have cost me more than the emontx ... Sometimes us software guys really get lost while playing instead of getting things done ... Thanks calypso</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2359"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-F5P_SDl8sR8voxlMWuI8r71COhXOrbxR2w55JbslBWU" value="form-F5P_SDl8sR8voxlMWuI8r71COhXOrbxR2w55JbslBWU"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2359 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:19:20 GMT -->
</html>
