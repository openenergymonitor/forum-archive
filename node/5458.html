<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5458 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:42:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>shieldv2+emoncms says my apartment uses 50MW of  power!? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">shieldv2+emoncms says my apartment uses 50MW of  power!?</h3>
        <span class="submitted">Submitted by <a href="../user/6713.html" title="View user profile.">vputz</a> on Mon, 28/07/2014 - 09:08</span>
        <div class="content"><p>Okay, so I feel mildly foolish, but I assembled an Arduino and emonTx shield v2 with a Raspberry Pi forwarding station and set up my emonCMS account...</p>
<p>&nbsp;</p>
<p>...and honestly everything works really well!&nbsp; I&#39;m very impressed with how smoothly everything came together.&nbsp; The CT sensor clipped onto my power input, and the AC-AC adapter (for 220V) plugged in no problem.</p>
<p>&nbsp;</p>
<p>...well, maybe one problem, because the stock sketch seems to be telling emonCMS that I&#39;m using about 2000 A (with my stove on; otherwise only about 400A or so) at 26,000V.&nbsp; I&#39;m hesitant to change anything because I&#39;m just a bit confused.&nbsp; It certainly does work for letting me know if the stove is on, but...</p>
<p>&nbsp;</p>
<p>Is there an obvious calibration step I missed in the assembly and flash?&nbsp; I&#39;m pleased that my apartment could supply the electrical needs of a small city, but it&#39;d be nice if the readings were accurate and I suspect I just missed something obvious.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5470.html" class="topic-previous" title="Go to previous forum topic">‹ Accessing on-board DS18B20 (on EmonTX Shield) when using an ethernet shield</a>
              <a href="5463.html" class="topic-next" title="Go to next forum topic">Arduino and RFM12B connections ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22722"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: shieldv2+emoncms says my apartment uses 50MW of  power!?</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 28/07/2014 - 09:27.</div>
    <div class="content">
     <p>Hi,</p>
<p>The standard sketches all report power rather than current so 400w to 2000w&nbsp;sounds far more feasible and the voltage needs to be scaled by multiplying input by 0.01 in emoncms to be 260v. The sketches mainly transmit whole numbers (ints and longs) so voltage is multiplied&nbsp;by 100 before transmission to give accuracy to 2 decimal places.</p>
<p>May still need a little calibrating, but at least the figures will no longer &nbsp;suggest you need to remortgage your house to pay your next utillity bill :-)</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22726"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: shieldv2+emoncms says my apartment uses 50MW of  power!?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/07/2014 - 11:03.</div>
    <div class="content">
     <p>To add to what Paul wrote above, if you download the default sketch from Github and trace the numbers through (unless you need to change the calibration, there&#39;s no need to upload it to your emonTx - you are only looking at it!) you will see that power is in watts, and it is sent as watts, but other values like voltage are multiplied by 10 or 100 before they are sent:</p>
<p>e.g. line 278:&nbsp;&nbsp; emontx.Vrms=ct1.Vrms*100;<br />
	and line 346: &nbsp; emontx.temp=(temp*10);</p>
<p>It is things like that you need to look out for and reverse in emonCMS.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22727"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6713.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="vputz&#039;s picture" title="vputz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: shieldv2+emoncms says my apartment uses 50MW of  power!?</h3>

    <div class="submitted">Submitted by <a href="../user/6713.html" title="View user profile.">vputz</a> on Mon, 28/07/2014 - 13:51.</div>
    <div class="content">
     <p>Hmm, curious choice; I would have expected the emonTX to transmit the most basic information possible (voltage and current) rather than power, and do the post processing to power in emonCMS.&nbsp; I&#39;ll take a look when I get home (and maybe modify it to do so rather than reversing it in emonCMS).</p>
<p>&nbsp;</p>
<p>260v seems an odd measurement as well; I&#39;ll try to verify with my multimeter (UK power and I&#39;ve tested it before and&nbsp;the wall voltage&nbsp;seemed on target with that).</p>
<p>&nbsp;</p>
<p>Thanks much for the help, though--I wish that had been mildly more obvious (not that I don&#39;t greatly appreciate the work everyone has done, but buying the turnkey SD card and flashing the &quot;stock&quot; sketch, one does sort of anticipate it all &quot;just working&quot;).&nbsp; Additionally the RPi seems to lock up after several hours, which I need to investigate (and could be my fault; it wasn&#39;t booting without the HDMI cable attached, so I tried rpi-update to update the firmware, which didn&#39;t fix the HDMI cable business but may have introduced something else).</p>
<p>&nbsp;</p>
<p>(I&#39;m still a big fan of the project)</p>
<p>Thanks a ton for setting me straight!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22731"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: shieldv2+emoncms says my apartment uses 50MW of  power!?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 28/07/2014 - 14:38.</div>
    <div class="content">
     <p>Most people want power &#39;out of the box&#39;, so that is what the default sketch (which incidentally is pre-loaded into the emonTx V3) gives. You can&#39;t get real power from rms current and rms voltage, neither can you get current from power and voltage (unless of course you always have unity power factor), so if you want current, you need to add it to the PayloadTX structure. My guess is it was done that way to keep the RF transmissions to a minimum, which of course helps if you&#39;re running off batteries but doesn&#39;t really concern you when running off mains power.</p>
<p>Your maximum voltage if you are in the UK should be 253 V, so you do need to check the voltage calibration. I presume you bought the standard AC-AC adapter from the shop? Any other and you will almost certainly need to calibrate the voltage.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22767"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6713.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="vputz&#039;s picture" title="vputz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: shieldv2+emoncms says my apartment uses 50MW of  power!?</h3>

    <div class="submitted">Submitted by <a href="../user/6713.html" title="View user profile.">vputz</a> on Wed, 30/07/2014 - 13:48.</div>
    <div class="content">
     <p>I did use the standard AC-AC adapter from the shop, so I&#39;ll take a gander at some point.&nbsp; I made the mods in my emoncms setup and it&#39;s looking much more reasonable... although the rPi gateway seems to crash after several hours and I&#39;m not clear why (I left my desktop shelled in watching the log, so hopefully there&#39;ll be a clue; last time I was able to ssh in after the crash, so maybe it&#39;s just a python problem).&nbsp; It seems to be mostly on the transmission end, because when I start it up again it spools all the buffered data for a while before settling into the every-second-or-so business.</p>
<p>&nbsp;</p>
<p>Still, it&#39;s already doing what I wanted: showing me when things are off or on and the relative impact of different items being turned on or off.&nbsp; I&#39;ve recommended it to&nbsp;a friend; good project with a couple of bumps.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5458"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-n4GORQRg3XpyI6_ceC_Oz4chE-8Ux5cEca6a0euFe5c" value="form-n4GORQRg3XpyI6_ceC_Oz4chE-8Ux5cEca6a0euFe5c"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
