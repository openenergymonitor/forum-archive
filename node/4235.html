<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/4235 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:56:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>New emontx v3 - suddenly stopped reporting Vrms | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">New emontx v3 - suddenly stopped reporting Vrms</h3>
        <span class="submitted">Submitted by <a href="../user/5825.html" title="View user profile.">MrOrange</a> on Thu, 20/03/2014 - 11:32</span>
        <div class="content"><p>Hi There - I just received my emonTx v3&nbsp;(pre assembled) in the post. I hooked it up to the UK AC-AC adapter and fired it up with a single CT connected to CT 4.</p>
<p>I&#39;m using the Rasp pi as the base station reporting to emoncms. Everything was working great, I am getting CT power readings and Vrms was reporting ~ 240-245V</p>
<p>Then, all of a sudden Vrms (Input #5 on emoncms) reported 0.00. I logged into the Pi and re-ran the script to show output and Input #5 was reporting 0.00</p>
<blockquote><p>2014-03-20 11:30:09,976 DEBUG Data string: &amp;node=10&amp;json={1:0,2:0,3:0,4:104,5:0,6:0}<br />
		2014-03-20 11:30:09,979 DEBUG URL string: http://emoncms.org/input/post.json?apikey=[removed]&amp;node=10&amp;json={1:0,2:0,3:0,4:104,5:0,6:0}<br />
		2014-03-20 11:30:09,982 INFO Sending to emoncms.org<br />
		2014-03-20 11:30:10,738 DEBUG Send ok</p>
</blockquote>
<p>I hooked up my USB to UART adapter and connected via serial. It successfully detects the AC-AC adapter but reports Vrms as 0 :(</p>
<blockquote><p>OpenEnergyMonitor.org</p>
<p>CT 1 Calibration: 90.90<br />
		CT 2 Calibration: 90.90<br />
		CT 3 Calibration: 90.90<br />
		CT 4 Calibration: 16.60<br />
		RMS Voltage on AC-AC Adapter input is: ~185V<br />
		AC-AC adapter detected - Real Power measurements enabled<br />
		assuming powering from AC-AC adapter (jumper closed)<br />
		Vcal: 276.90<br />
		Phase Shift: 1.70<br />
		CT 4 detected<br />
		Unable to detect DS18B20 temperature sensor<br />
		RFM12B Initiated:<br />
		Node: 10 Freq: 433Mhz Network: 210<br />
		2846 0.00<br />
		140 0.00<br />
		103 0.00<br />
		104 0.00</p>
</blockquote>
<p>Can anyone help me on why Vrms&nbsp;suddenly stopped working in the emonTX v3? No amount of power cycling it has seemed to resolve the issue.</p>
<p>Just to be clear, it worked for ~5minutes&nbsp;before it then started reporting 0. Brand new emonTX received yesterday powered on first time today.</p>
<p>&nbsp;</p>
<p>Thanks,</p>
<p>James</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11893.html" class="topic-previous" title="Go to previous forum topic">‹ git pull overwrites config changes?</a>
              <a href="11892.html" class="topic-next" title="Go to next forum topic">What set-up would I need?: 3 Phase Supply and SMA Solar Inverter ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-19536"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emontx v3 - suddenly stopped reporting Vrms</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 20/03/2014 - 15:02.</div>
    <div class="content">
     <p>Hi James,&nbsp;</p>
<p>There is a bug in the version of the emonTx firmware which was shipping on your unit which requires CT1 to be connected in order&nbsp;for Vmrs&nbsp;calculation to work.&nbsp;</p>
<p>This has now been fixed, if you like you can download the latest firmware for GitHub and compile and upload via the Arduino IDE, or you can just download the pre-compiled hex and upload via avrdude.&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV3/RFM12B/emonTxV3_RFM12B_DiscreteSampling">https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV3/RFM12B/emonTxV3_RFM12B_DiscreteSampling</a></p>
<p><a href="http://wiki.openenergymonitor.org/index.php?title=EmonTx_V3#Uploading_Arduino_Firmware">http://wiki.openenergymonitor.org/index.php?title=EmonTx_V3#Uploading_Arduino_Firmware</a></p>
<p><span style="font-size: 12px;">Alternatively the issue could be fixed by just inserting a blank 3.5mm jack plug into </span>CT1<span style="font-size: 12px;">, it just requires a plug in there, it does not need to be a CT.&nbsp;</span></p>
<p><span style="font-size: 12px;">Very sorry about this,this issue was just brought to our attention yesterday.&nbsp;</span></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19557"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5825.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MrOrange&#039;s picture" title="MrOrange&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emontx v3 - suddenly stopped reporting Vrms</h3>

    <div class="submitted">Submitted by <a href="../user/5825.html" title="View user profile.">MrOrange</a> on Thu, 20/03/2014 - 22:49.</div>
    <div class="content">
     <p>Thanks Glyn that seems to have done the trick! I mustve moved the CT from 1 to 4 without equating it to Vrms stopping. Just wondering see on my emontx serial session the very first output from CT4 is huge and messes up my emoncms graphing and calcs - is this related to the same issue?</p>
<p>Thanks again for your help </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19559"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emontx v3 - suddenly stopped reporting Vrms</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 20/03/2014 - 23:28.</div>
    <div class="content">
     <p>No, that is the software filters settling. The RF output is inhibited for a short time at start-up, but not the serial output. However, looking at the sketch, I don&#39;t think FILTERSETTLETIME is enough at 5 s because the filters don&#39;t actually get going until a little more than 22 s in, so (having got a NanodeRF out to check) I think FILTERSETTLETIME should be at least 25000 - 25 s (which gives enough iterations of the filter as there is no delay while the RF is inhibited - after which the filter is sensibly stable).</p>
<p>That algorithm (inhibit the RF for a few seconds) was OK for the emonTx V2, which did not have the protracted start-up sequence. I think there may be a better way to handle it for the V3.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19590"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5825.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MrOrange&#039;s picture" title="MrOrange&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emontx v3 - suddenly stopped reporting Vrms</h3>

    <div class="submitted">Submitted by <a href="../user/5825.html" title="View user profile.">MrOrange</a> on Sat, 22/03/2014 - 00:40.</div>
    <div class="content">
     <p>Thanks guys! Bit of a learning curve right there but I setup the Arduino env following the wiki guides and downloaded the updated 1.2 Discrete Sampling ino&nbsp;that resolved the Vrms issue. I also updated the&nbsp;FILTERSETTLETIME&nbsp;variable to be 30000 and can report that the initial high readings are not being uploaded to emoncms and Vrms is reported correctly even with CT 1 disconnected.</p>
<p>So far so good! Thanks again</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27232"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7625.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7625.png" alt="xrayman&#039;s picture" title="xrayman&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emontx v3 - suddenly stopped reporting Vrms</h3>

    <div class="submitted">Submitted by <a href="../user/7625.html" title="View user profile.">xrayman</a> on Thu, 29/01/2015 - 23:04.</div>
    <div class="content">
     <p>I have also lost VMRS but oddly it seems to have coincided with the upgrade of my RPi to emoncms 8.3.2. I have also gained a node 0 which has numbers in but which I have no idea of where the data is coming from? I am running an emontx v3.2 bought at the end of 2013 if that helps. I think I may need to update the firmware as my temperature sensor bought and installed today also does not give a readying?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27254"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7625.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7625.png" alt="xrayman&#039;s picture" title="xrayman&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emontx v3 - suddenly stopped reporting Vrms</h3>

    <div class="submitted">Submitted by <a href="../user/7625.html" title="View user profile.">xrayman</a> on Sat, 31/01/2015 - 11:50.</div>
    <div class="content">
     <p>My VMRS feed is now back. I had noticed that the recorded feed power in Watts had gain about 30 W recently with no obvious reason. So I:</p>
<ol>
<li>rebooted my Pi</li>
<li>turned off AC-AC unit</li>
<li>unplugged AC-AC unit</li>
<li>unplugged all emonTX connections</li>
<li>plugged in all emonTX connections</li>
<li>plugged in AC-AC unit</li>
<li>turned on AC-AC unit</li>
</ol>
<p>I then observed the expected LED flashes and the 10 seconds pulsed light which had been absent since the whole VMRS/temperature sensor thing.</p>
<p>I then checked my power and it is back to how I would expected it to be. WHAT FUN. I missed from the list - did a little &quot;please work dance&quot;.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37608"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7625.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7625.png" alt="xrayman&#039;s picture" title="xrayman&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emontx v3 - suddenly stopped reporting Vrms</h3>

    <div class="submitted">Submitted by <a href="../user/7625.html" title="View user profile.">xrayman</a> on Tue, 29/12/2015 - 00:10.</div>
    <div class="content">
     <p>Sorry to dig up this old thread but I&#39;ve just had the same thing happen to me as my previous post. I noticed my power usage had gone up by ~30 W more than the norm. On finally getting around to checking my feeds I found the VMRS value to be 0. I followed my own advice as described above and it fixed the issue (for now at least) very odd.</p>
<p>The only things I can think of causing issues are:</p>
<p>I&#39;ve rebooted my Pi &amp;</p>
<p>I&#39;ve turned on my iRobot electric vacuum cleaner.</p>
<p>I&#39;ve also noticed there is data showing up in nodes 9, 16, 24, 25, 26 and 28 there is a lot of data on the nodes some are 28 lines long?</p>
<p>Very odd.</p>
<p>Anyone else had random VMRS loss without unplugging the CT1 cable.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37627"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: New emontx v3 - suddenly stopped reporting Vrms</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 29/12/2015 - 13:16.</div>
    <div class="content">
     <p>I don't quite see how unplugging CT1 cable can affect the voltage measurement. The emonTx senses the voltage at startup, so you would need to remove the ac adapter input <u>and</u> restart the emonTx using the USB, programmer or battery power for it to believe that there was no ac adapter. </p>
<p>The rogue data seems to indicate that you have interference, and at best that will confuse the issue. The interference needs to be traced and eliminated.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/4235"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-7L_Xksnyy9gQ22J0NKCjSxpBayrkqNaIcqfvoN7QzM4" value="form-7L_Xksnyy9gQ22J0NKCjSxpBayrkqNaIcqfvoN7QzM4"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
