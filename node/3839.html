<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3839 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:28:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Calculating the kwh in the arduino  | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Calculating the kwh in the arduino </h3>
        <span class="submitted">Submitted by <a href="../user/5458.html" title="View user profile.">fca</a> on Wed, 12/02/2014 - 14:26</span>
        <div class="content"><p>hi need some help on calculating the kwh in the arduino</p>
<p>	I already have the arduino reading the current and multiplying by 230v i have the&nbsp; power&nbsp; calculated.<br />
	As i will read the the data from the arduino by modbus tcp to my scada software i also want co calculate&nbsp; the kwh on the arduino<br />
	What i want is something that will calculate the kwh usage along the 24h and then reset it back to zero so i have the kwh reading by day...</p>
<p>	Can someone please give me a help with algorithm to calculate the kwh ?</p>
<p>	thanks</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3756.html" class="topic-previous" title="Go to previous forum topic">‹ Strange results with 3-phase 400V input</a>
              <a href="3844.html" class="topic-next" title="Go to next forum topic">9V AC - AC transformer Din Rail mount. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-18363"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating the kwh in the arduino </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 12/02/2014 - 14:54.</div>
    <div class="content">
     <p>The energy value you require is the integral over the 24 hour period of the power.</p>
<p>So in very general terms you must measure the power at intervals and multiply by the time period. That assumes that the power is constant over the period in question so the more frequently you measure the power and compute the energy, the more accurate your total accumulated energy value will be. Then you need to know the time of day in order to reset the accumulator. In the emonGLCD, the time is requested from the server where emoncms is running. You could use that, or Internet time from an NTP server, or you could add a radio code clock or another real time clock to your Arduino.</p>
<p>You will find some code that might help you in the emonGLCD sketches.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18364"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5458.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fca&#039;s picture" title="fca&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating the kwh in the arduino </h3>

    <div class="submitted">Submitted by <a href="../user/5458.html" title="View user profile.">fca</a> on Wed, 12/02/2014 - 15:04.</div>
    <div class="content">
     <p>thanks , i will have the a RTC connected to arduino..</p>
<p>but forgetting the 24h so... i will read the power average it and then divide by 3600.... bit lost</p>
<p>i will check the glcd skteches</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18417"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5458.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fca&#039;s picture" title="fca&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating the kwh in the arduino </h3>

    <div class="submitted">Submitted by <a href="../user/5458.html" title="View user profile.">fca</a> on Fri, 14/02/2014 - 05:47.</div>
    <div class="content">
     <p>Still lost on this tried to search info on this here and internet and nothing&nbsp;</p>
<p>some help appreciated&nbsp;</p>
<p>thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18418"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating the kwh in the arduino </h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 14/02/2014 - 08:58.</div>
    <div class="content">
     <p>kwH is a measure of energy, and energy is power times time.&nbsp; To find the total amunt of energy that has flowed, you need to add together all the individual energy contributions.&nbsp; If your energy calculations occur every N seconds, then each one will be the average power times the period for which that power was flowing (i.e. N seconds)</p>
<p>As has been discussed recently on the forum, it&#39;s a good idea to record the consumption of each whole Watt Hour separately.&nbsp; So, every time your accumulator exceeds 3600, just subtract 3600 from its value and add one to your WattHour register.&nbsp; At the end of the day, your kWH value is just the WattHour value divided by 1000.</p>
<p>There&#39;s a simple description of power and energy in pages 1 &amp; 2 of my <a href="../mk2.html">PV Router article</a> which you may find helpful.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18429"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5455.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="keduro&#039;s picture" title="keduro&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Calculating the kwh in the arduino </h3>

    <div class="submitted">Submitted by <a href="../user/5455.html" title="View user profile.">keduro</a> on Fri, 14/02/2014 - 13:04.</div>
    <div class="content">
     <p>fca,&nbsp;</p>
<p>Hi .... In my derivative of Robin&#39;s and other&#39;s codes, I calculate energy imported, exported, and diverted in kwh and accumulate the values over a 24 hour period. The values are displayed on an LCD, and reset every night at midnight. I use an RTC to keep track of time. More detail and the Arduino sketch can be found on <a href="3759.html">this thread</a>.</p>
<p>keduro</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3839"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-_9VCeiMHke2haq5G61oul66hnoEtNkQtUUKdiko5C-w" value="form-_9VCeiMHke2haq5G61oul66hnoEtNkQtUUKdiko5C-w"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/3839 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:28:45 GMT -->
</html>
