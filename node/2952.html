<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2952 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:21:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Problem with CT ecs-1030 | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Problem with CT ecs-1030</h3>
        <span class="submitted">Submitted by Guest on Thu, 17/10/2013 - 16:39</span>
        <div class="content"><p>Hii..<br />
	I have the same two CT ecs-1030, and I want to read the current in the cables. In monophase circuit the same current&nbsp;entering is the same out (Kirchhoff&#39;s current law). So I have to compare this current and turn off the circuit if the difference of the currents are grater&nbsp; than 30mA.<br />
	I&#39;m using 33ohm burden resistor, 2 10k ohm divide resistor, 10uF capacitor, and Arduino Mega 2560<br />
	I get strange values testing one CT.</p>
<p>Please help me. Thanks</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3153.html" class="topic-previous" title="Go to previous forum topic">‹ Monitoring Sunny Boy 5000TL-US</a>
              <a href="3205.html" class="topic-next" title="Go to next forum topic">Just to say thanks ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-15753"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Problem with CT ecs-1030</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 17/10/2013 - 22:49.</div>
    <div class="content">
     <p>Sorry, but with so little information from you about what is going wrong, nobody will be able to help you. You need to tell us more.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15807"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pceng&#039;s picture" title="pceng&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Problem with CT ecs-1030</h3>

    <div class="submitted">Submitted by pceng (not verified) on Sun, 20/10/2013 - 06:11.</div>
    <div class="content">
     <p>Sorry men...</p>
<p>I&#39;m doing a project, I have to measure the current in a two wires single-phase motor at the same time. If the difference between these currents are greater than 1 Ampere for a period of 0.5 seconds, I have to turn off the circuit.<br />
	Using the example of <a href="https://learn.openenergymonitor.org/?redirect=arduino-sketch-current-only" title="http://openenergymonitor.org/emon/buildingblocks/arduino-sketch-current-only">http://openenergymonitor.org/emon/buildingblocks/arduino-sketch-current-...</a>, I just saw these values ​​when nothing was on the inputs:</p>
<p>2150.94 &nbsp; 9.35<br />
	2091.40 &nbsp; 9.09<br />
	2117.81 &nbsp; 9.21<br />
	2151.48 &nbsp; 9.35<br />
	2294.22 &nbsp; 9.97<br />
	2163.98 &nbsp; 9.41</p>
<p>Is this normal?</p>
<p>I have 2 ct ecs-1030-L72, I put 120ohm burden resistors&nbsp;as shown in the calculation..</p>
<p>sorry for the English, and I appreciate the help.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15810"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Problem with CT ecs-1030</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 20/10/2013 - 12:45.</div>
    <div class="content">
     <p>OK, I think I understand a little.</p>
<p>First, the calibration in that sketch is for a 18 &Omega; burden resistor. You are using the calibration value 111.1 which is for a 18 &Omega; burden. For a 120 &Omega; burden you need a calibration of&nbsp; 16.67. All the calculations that explain how to get that number are <a href="https://learn.openenergymonitor.org/?redirect=ct-and-ac-power-adaptor-installation-and-calibration-theory">here</a>.</p>
<p>So the current you are measuring is approximately 9.3 * 18 / 120 A&nbsp; =&nbsp; 1.39 A</p>
<p>That is still wrong. We expect to measure a very small current which is not real - it is digital noise from the processor - of perhaps 0.001 x maximum current. In your case, the maximum current is approximately 30 A,&nbsp; so that would be 15 - 30 mA of &quot;noise&quot;.</p>
<p>You need to find out why you are measuring a current when there is none.</p>
<p>If you look at <a href="1757.html">Robin&#39;s Tools</a>, try running &quot;MinMaxAndRangeChecker.&quot;&nbsp; If I remember correctly, this will print the values from the Analogue to Digital Converter and let you see exactly that the input is.&nbsp; With nothing connected, the input you are using should be approximately 512 and not changing by more than 2 or 3 numbers from that.</p>
<p>&nbsp;</p>
<p>But you say you have two current transformers. I think you might be doing the measurement the wrong way.&nbsp; Take a look at how a &quot;Residual Current Device&quot; works and think whether that is doing what you want. (The Wikipedia page has a good explanation.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15826"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pceng&#039;s picture" title="pceng&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Problem with CT ecs-1030</h3>

    <div class="submitted">Submitted by pceng (not verified) on Mon, 21/10/2013 - 00:10.</div>
    <div class="content">
     <p>Exactly Robert, I want to make a prototipode&nbsp;of RCD using the arduino.&nbsp;</p>
<p>In RCB regular the two conductors pass the same coil. I thought of making a model that I would examine the current in the two conductors (each CT with a conductor) and compare to make decision making.</p>
<p>Do you think it&#39;s the best way?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-15840"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Problem with CT ecs-1030</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 21/10/2013 - 16:43.</div>
    <div class="content">
     <p>You need to consider the accuracy with which you can measure the two currents if you use two c.t&#39;s. You can adjust the calibration at high currents, but at very low currents you are likely to have problems with random or processor noise. That usually amounts to two or three counts peak-peak amplitude. So when you subtract the two currents to get the &quot;leakage&quot; current, you will have 4-6 counts of uncertainty in there.</p>
<p>If you do the difference in the c.t, you need to think about how the c.t. actually works. The flux in the core arises from the difference in the currents - no noise, no linearity problems there. You still have one lot of noise remaining of course - at the ADC input.</p>
<p>I think you should do both and compare the results.</p>
<p>(You must calculate what the noise represents in terms of current using your resistor and calibration values.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16349"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pceng&#039;s picture" title="pceng&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Problem with CT ecs-1030</h3>

    <div class="submitted">Submitted by pceng (not verified) on Sun, 17/11/2013 - 22:48.</div>
    <div class="content">
     <p>Should I to change something in the program to put the two sensors?</p>
<p>double Irms = emon1.calcIrms (1480) / / Calculate Irms only<br />
	What is this value &nbsp;1480?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16350"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Problem with CT ecs-1030</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 18/11/2013 - 01:34.</div>
    <div class="content">
     <p>Have a look at the comment in the source code of emonLib - &quot;1480&quot; is explained in there.</p>
<p>Remember that emonLib was designed to sample power at intervals and report the value back by radio. What you are trying to do is quite different, so you need to design your hardware and software from the beginning. emonLib will help with some parts but you must not think it will do exactly what you want.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2952"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-cYX7IC93r8fEt22RNep6ICuNiOkr0CHOMQ9dZHyf-Hw" value="form-cYX7IC93r8fEt22RNep6ICuNiOkr0CHOMQ9dZHyf-Hw"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
