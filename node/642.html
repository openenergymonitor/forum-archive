<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/642 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:33:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonTx New Version Dev Ideas  | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonTx New Version Dev Ideas </h3>
        <span class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 30/04/2012 - 18:21</span>
        <div class="content"><p>Recently we have been thinking about what changes and new features would be good to have in the new version of the emonTx.</p>
<p>The general idea is that the next version will be pre-assembled with SMT electronics, we plan to keep the current features such:</p>
<ul>
<li>Arduino compatible Atmega 328 running at 3.3V&nbsp;</li>
<li>RFM12B wireless</li>
<li>3 x CT channels</li>
<li>Pulse counting - digital I/O</li>
<li>low power</li>
</ul>
<p>New features we are considering adding are:</p>
<p><strong>Wireless:</strong></p>
<ul>
<li>Xbee socket option, could also be used for<a href="http://shop.ciseco.co.uk/roving-network-rn-xv-xbee-shaped-wifi-module-xmas-price/"> WiFly Rover networks wifi module</a>&nbsp;or<a href="http://shop.ciseco.co.uk/xrf-wireless-rf-radio-uart-rs232-serial-data-module-xbee-shape-arduino-pic-etc/"> XRF</a> for extra range&ndash; RFM12B will still be the default wireless option.</li>
<li>Option to use SMA&nbsp;antenna&nbsp;</li>
</ul>
<p><strong>Sensor connections:</strong></p>
<ul>
<li>Terminal blocks for connecting eight DS18B20 temperature sensors - horizontal insertion?</li>
</ul>
<p><strong>Indication &amp; buttons:</strong></p>
<ul>
<li>Tri-colour indicator LED &ndash; green = good, red = bad (low battery etc..)</li>
<li>Push button to be configured for pairing</li>
<li>Reset button?</li>
</ul>
<p><strong>Power</strong></p>
<ul>
<li>3.7V Lipo battery compatibility &ndash; with USB charging (MAX1555&nbsp;/&nbsp;MCP73833 or&nbsp;<span style="color: rgb(51, 51, 51); font-family: Arial, Verdana, Helvetica, sans-serif; text-align: -webkit-left; ">MCP73871&nbsp;</span>control IC?) <a href="http://jeelabs.org/2010/05/29/using-lipo-batteries/">JeeNode&nbsp;example</a>, <a href="https://www.adafruit.com/products/259">adafruit example</a></li>
<li>Option to power from mini solar panel for remote installations - <a href="https://www.adafruit.com/products/390">Adafruit example&nbsp;</a>&nbsp;- need to check that switching frequencies from DC-DC converters don't interfere with analog CT readings.&nbsp;</li>
<li>Option to fix 2xAA battery holder onto rear of PCB</li>
</ul>
<p><strong>Casing</strong></p>
<p>Size the PCB to slide into an aluminum&nbsp;case such as the one below. An acrylic/ply-wood fascia can then easily be laser cut the accommodate the ports. See <a href="http://openenergymonitor.blogspot.com/2012/05/embodied-energy-of-electronic-enclosure.html">blog post</a> on&nbsp;embodied energy of Aluminium Vs ABS plastic:&nbsp;</p>
<p><strong><img alt="" src="../sites/default/files/e_case_d.jpg" /></strong></p>
<p>​It would be great to hear your thoughts on our ideas.....</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2220.html" class="topic-previous" title="Go to previous forum topic">‹ How to set up basic communication signals with emontx and Nanode RF basestation </a>
              <a href="2227.html" class="topic-next" title="Go to next forum topic">Wattcher Energy Meter and NanodeRF it&#039;s Possible ? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-4131"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Mon, 30/04/2012 - 18:49.</div>
    <div class="content">
     <p>My opinion is that remote sensors must be as cheap as possible and the fancy staff will be at the internet-connected module - a Raspberry Pi for example. The WiFi or Zigbee stuff is good, but pricey and I personally wouldn&#39;t use it. I&#39;d love to see dedicated micro sensors (attiny series) all around the house reporting things to the Raspberry Pi. Hopefully, there will be a LAMP port for it one day and it may host emoncms as well, so no need to have external hosting.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4136"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 01/05/2012 - 08:41.</div>
    <div class="content">
     <p>Yeah I agree, the idea we have is to add an Xbee holder onto the board but by default this would be un-populated, RFM12B is the cheapest option. We are trying to make the hardware as flexible and future proof as possible.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4147"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jonathanfurness&#039;s picture" title="jonathanfurness&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by jonathanfurness (not verified) on Tue, 01/05/2012 - 13:37.</div>
    <div class="content">
     <p>I really like the idea of adding more&nbsp;DS18B20 sensors. Is it worth exploring if other environmental sensors could be added as well or does that change the intention for the project? thinking of a counting module? humidity?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4148"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/450.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Tue, 01/05/2012 - 14:09.</div>
    <div class="content">
     <p>I like the idea of a IR sensor to read the data from electric meters with IRDA senders in them</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4149"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Tue, 01/05/2012 - 15:50.</div>
    <div class="content">
     <p>I also think the aluminum casing suggested in post one will act as a shield to RF waves and may reduce and even cease signals. Give it a try.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4151"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/905.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/905.html" title="View user profile.">robw</a> on Tue, 01/05/2012 - 19:17.</div>
    <div class="content">
     <p>Could you use the case as an aerial? Or is that a crazy idea as im finding the range of the current RF to be VERY small. Eg&nbsp;through 1 wall only.</p>
<p>Humidity sounds like a great idea although it may have to be a remote sensor not built on this maybe better suited to the GLCD. The DHTXX are worth a look at, iv got a couple im using to monitor inside and outside.</p>
<p>Gas meters. Could this be done. If were trying to monitor our energy consuption&nbsp;gas should be a part (although this may be a problem with regs)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4153"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1001.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Automate&#039;s picture" title="Automate&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1001.html" title="View user profile.">Automate</a> on Tue, 01/05/2012 - 22:20.</div>
    <div class="content">
     <p>I would like to see more CT input channels. &nbsp;The Brultech&nbsp;<a href="http://www.brultech.com/">http://www.brultech.com/</a>&nbsp;energy monitor has 7 inputs and they are developing a new model with 32. &nbsp;More input channels allow you to monitor every individual circuit in your house.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4155"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1001.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Automate&#039;s picture" title="Automate&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1001.html" title="View user profile.">Automate</a> on Tue, 01/05/2012 - 22:26.</div>
    <div class="content">
     <p><span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 17px; text-align: left; ">I like this IR sensor idea but most times the emonTx will be a good distance from the electric meter. &nbsp;Anybody know how far you could run the wires and still get a good pulse from the IR sensor?</span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4158"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Wed, 02/05/2012 - 07:39.</div>
    <div class="content">
     <p>Here is what I think is the future for remote sensors, here is one temperature sender using ATTiny85&#39;s internal temperature sensor and RFM12B on the bottom; The PCB and schematic seem different from the end product but the idea is nice, coin cell sized battery operated remote sensor. Give that I2C connectivity (supported by Attiny84) and it is irresistible&nbsp;</p>
<p>&nbsp;</p>
<p><a href="http://olivier.gelux.ch/?q=taxonomy/term/41">http://olivier.gelux.ch/?q=taxonomy/term/41</a>:</p>
<p>&nbsp;</p>
<p><img alt="" src="../../../olivier.gelux.ch/files/ebikelab-attinyb-large.png" style="width: 294px; height: 328px; " /></p>
<p>&nbsp;</p>
<p><img alt="" src="../../../olivier.gelux.ch/files/rfm12pcb.jpg" style="width: 600px; height: 424px; " /></p>
<p>&nbsp;</p>
<p><img alt="" src="../../../olivier.gelux.ch/files/ebikelab-attiny-large.png" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4243"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="prensel&#039;s picture" title="prensel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by prensel (not verified) on Sun, 06/05/2012 - 10:31.</div>
    <div class="content">
     <p>Leaving out the burden resistor in SMD but keep the possibility to add it later on for using different types of CT would work for me.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4245"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Gijs&#039;s picture" title="Gijs&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Gijs (not verified) on Sun, 06/05/2012 - 11:41.</div>
    <div class="content">
     <p>1 extra CT-sensor would be great, you could use, 3 for mains consumption (one per fase) and one for a PV system. An rs232/485 port for communication with an invertor&nbsp;would be a big plus. The tri-color led is a good feature to expand the feedback possibilities om the print.</p>
<p>A DIN-rail housing might be handy to use, it would fit into a household switchboard/fusepanel, and has lots of possibilities for connectors etc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4332"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 10/05/2012 - 08:43.</div>
    <div class="content">
     <p>Thank you for all the ideas. Sorry for the delay in posting, Trystan and I have been travelling this last week. We now have stable internet, normal operation is resumed!</p>
<p><strong>Case and antenna:</strong><br />
	The idea is that we external SMA whip antenna would be used with the aluminium case. Such as <a href="http://cpc.farnell.com/jsp/level5/module.jsp?moduleId=cpc/407338.xml">http://cpc.farnell.com/jsp/level5/module.jsp?moduleId=cpc/407338.xml</a>, that way the case won&#39;t effect the signal. I think the range could be improved be using a whip antenna since it&#39;s RF output is helical not as much RF power is lost upwards and downwards. We have had a bit of a debate going regarding the embodied energy in Aluminium, I did a blog post on this last night: <a href="http://openenergymonitor.blogspot.com/2012/05/embodied-energy-of-electronic-enclosure.html">http://openenergymonitor.blogspot.com/2012/05/embodied-energy-of-electronic-enclosure.html</a></p>
<p><strong>Sensors:</strong><br />
	Humidity sensors are interesting, I have experimented using the DHT11 humidity sensor, this sensor requires 3-5V and a single data line pulled high with a 5K resistor. It wouldn&rsquo;t be difficult to wire in the sensor either into a JeePort or the pulse counting I/O. I&#39;m not sure if humidity is important enough to merit it&#39;s own dedicated port on the emonTx.</p>
<p><strong>Form factor:</strong><br />
	I like the idea of lots of low power, small and cheap sensors such as the design posted by mharizanov. This form factor would be ideal for a distributed wireless temperature network. The emonTx however will need to larger to accommodate the number of I/O ports required.</p>
<p><strong>Burden Resistor:</strong><br />
	Great idea posted by prensel regarding having an interchangeable burden resistor for different CT&#39;s and measurement ranges. I think the best compromise is to have an SMT burden resistor and include the holes and pads to solder in a thru-hole burden resistor and de-solder the SMT if required.</p>
<p><strong>Number of CT channels:</strong><br />
	I think three is a good number, we haven&rsquo;t really needed extra channels, the limiting factor is board space for any extra 3.5mm jacks, more channels would also increase the cost and probably only be utilised by a few users. If more channels are required it&#39;s quite easy to have multiple emonTx&#39;s on the same network. If there is free space I&#39;ll see if it&#39;s possible to squeeze one extra channel on.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4429"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 14/05/2012 - 16:18.</div>
    <div class="content">
     <blockquote><p><strong>&quot;Burden Resistor:</strong><br />
		Great idea posted by prensel regarding having an interchangeable burden resistor for different CT&#39;s and measurement ranges. I think the best compromise is to have an SMT burden resistor and include the holes and pads to solder in a thru-hole burden resistor and de-solder the SMT if required.&quot;</p>
</blockquote>
<p>Or even easier: a cuttable re-solderable link to the SMT burden.</p>
<p>(N.B. Bad link to the aluminium case blog).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4432"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 14/05/2012 - 22:45.</div>
    <div class="content">
     <p>Yup that would be even better. I think I will also do the same for the DS18B20 temperate pull up and pulse counting pull down resistors to add the flexibility&nbsp;of changing their values.</p>
<p>Link has been fixed, thanks.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4607"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Sun, 27/05/2012 - 11:19.</div>
    <div class="content">
     <p>There are cases where an ethernet port is available next to where emonTx is installed. We can avoid the RF link and have the footpring&nbsp;for an ethernet module like this one on emonTx:&nbsp;http://de.mouser.com/ProductDetail/WIZnet/WIZ820io/?qs=b%252bXOOdUOuvbhJrgcuv9kFavdJpKDMM33eUcvAcab6Bc%3d</p>
<p><img alt="" src="../../../de.mouser.com/images/wiznet/lrg/WIZ820io.jpg" style="width: 268px; height: 253px; " /></p>
<p>it&#39;s just 12 pins = two 6pins headers</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4618"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 28/05/2012 - 11:43.</div>
    <div class="content">
     <p>That&#39;s a great idea! I like that little Wiznet module. It&#39;s used on the Open Kontol Gateway, it&#39;s really tidy. Adding the headers will keep the connectivity options open with no extra cost.&nbsp;</p>
<p>Cheers Amin.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4638"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Thu, 31/05/2012 - 05:14.</div>
    <div class="content">
     <p>It would also be great to breakout two or three digital outputs (with PWM) on the side of emonTx board to screw terminals. I know the firmware does not allow it now, but we could add code in the future that makes it possible to control external relays mounted in the electrical box.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4644"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="AndyB&#039;s picture" title="AndyB&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by AndyB (not verified) on Fri, 01/06/2012 - 02:25.</div>
    <div class="content">
     <p>I agree that adding terminals or solder pads for other I/O would be good.&nbsp; Personally I am trying to use a digital input for monitoring pulses from a water meter (to record hot water usage), and a couple of inputs for temperature and humidity (inside and outside) so the system can calculate dew point and indicate when best to open windows as the humidity drops outside.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4646"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Andygodber&#039;s picture" title="Andygodber&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Andygodber (not verified) on Fri, 01/06/2012 - 08:35.</div>
    <div class="content">
     <p>Rather than the aluminium case, could you use a PSU &#39;wall-wart&#39; case (Like Maplin&nbsp;N04KH) and hack a 5V PSU from a phone charger into it, leaving space on a second level for the TX board.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4870"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1233.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="footswitch&#039;s picture" title="footswitch&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1233.html" title="View user profile.">footswitch</a> on Tue, 19/06/2012 - 11:28.</div>
    <div class="content">
     <p>I fancy the optional wireless header &amp; Ethernet suggestion :)</p>
<p>But this kind of imposes equivalent upgrades to the emonBase and emonGLCD, right?</p>
<p>&nbsp;</p>
<p>For power I&#39;m planning on using Seeed Studio&#39;s Lipo Rider Pro, while there is no integrated solution. If you want, I can perform some tests to verify any impact resulting from interference caused by the DC-DC boost converter. However I don&#39;t predict any visible impact, since we already power our emon devices with switched-mode power supplies. Unless the proximity of such circuitry could have a different impact.</p>
<p>&nbsp;</p>
<p>Four CT channels would be awesome, but please clarify, were these CT channels designed to separate energy consumption by type, rather than by phase? i.e. lighting / heating / devices within the *same* phase</p>
<p>I&#39;m concerned as to how I can measure power usage on 3 distinct phases accurately, when we only have one AC input from the AC-AC transformer (Each phase has its own fluctuating voltage. Is my assumption correct?). And if space is a concern for an extra CT connector, I can&#39;t begin to imagine if we talked about extra AC inputs. But then again, I don&#39;t have three outlets installed next to each other and each with a different phase; maybe one needs to place the outlets right in the electrical board, and plug the transformers there?</p>
<p>&nbsp;</p>
<p>I&#39;m building the current version of emonTx very soon, it&#39;s probably best that I avoid further commenting before I spend some time with it ;)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4872"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 19/06/2012 - 13:09.</div>
    <div class="content">
     <blockquote><p>&quot;(Each phase has its own fluctuating voltage. Is my assumption correct?)&quot;</p>
</blockquote>
<p>Yes, in the ideal world where everything is perfectly balanced, all three phase voltages would be the same. But in the real world you are correct, different loads on different phases will cause the three line voltages and the neutral voltage to move relative to each other and to earth.</p>
<blockquote><p>&quot;I don&#39;t have three outlets installed next to each other and each with a different phase...&quot;</p>
</blockquote>
<p>I imagine few people do. I would have concerns over safety in a domestic environment with up to 440 V between any two lines.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4873"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Javierete&#039;s picture" title="Javierete&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Javierete (not verified) on Tue, 19/06/2012 - 13:35.</div>
    <div class="content">
     <p>Hi!</p>
<p>I have recently buyed &nbsp;an Emontx&nbsp;+ Nanode, and my goal is to measure currents and all the data possible on three phase installation in order to have the system in more &quot;professional way&quot;.</p>
<p>I&#39;m not sure if hardware will permit this, or maybe there&#39;s the need of small hardware tweaks, maybe one transformer and CT for each phase??</p>
<p>Regards, and excuse my English</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4874"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 19/06/2012 - 14:18.</div>
    <div class="content">
     <p>To accurately measure voltage, current, real and apparent power on each of 3 phases you need to have 3 voltage inputs and 3 current inputs, therefore 3 voltage adapters and 3 CTs.</p>
<p>The EmonTx does not have the necessary 3 voltage inputs. But two analogue inputs are not used - ADC 4 on pin 27 and ADC5 on pin 28, I think it would be possible for you to repeat the circuit components that measure voltage (R11, R12, R13, R14, C10) two times on an external board and connect to these pins.&nbsp; I have to tried to do this, so I do not know whether it would work.</p>
<p>[Edit]</p>
<p>I modified a copy of EmonLib and wrote a test sketch to measure the voltages on ADC4 and ADC5 - these are available as SDA and SCK on the PWR/SER/I2C header on the EmonTx board. To test, I placed a jumper wire between P3 - AIO2 (the voltage input) and SDA or SCK, and I read the correct voltage. So I think it will work.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4902"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Javierete&#039;s picture" title="Javierete&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Javierete (not verified) on Wed, 20/06/2012 - 15:46.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>Hi have the needed components to make two extra inputs, if my work permit I will try to duplicate the inputs and see...</p>
<p>Many thanks!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-4914"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 20/06/2012 - 19:58.</div>
    <div class="content">
     <p>You will of course need to make a copy of EmonLib and edit it to (a) add the correct input pins for the new voltage inputs and (b) pair them with the correct CT to calculate the powers, possibly each with its own calibration factor and phase angle correction.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5006"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/728.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="seannation&#039;s picture" title="seannation&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/728.html" title="View user profile.">seannation</a> on Mon, 25/06/2012 - 19:15.</div>
    <div class="content">
     <p>Am I&nbsp;right that in Europe (well, the UK specifically), we only need one voltage input (alongside the current measurement) in order to calculate real power from apparent?</p>
<p></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5091"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Mon, 02/07/2012 - 20:24.</div>
    <div class="content">
     <p>&nbsp;You are right</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5100"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Mon, 02/07/2012 - 22:49.</div>
    <div class="content">
     <p>&nbsp;The ultimate emonTx would have headers for an ethernet module, digital programmable outputs (screw terminals) but also something very important: I think there should be the possibility to connect up to 3 emonTx slaves to an emonTx master that would have ethernet connectivity.</p>
<p>This is the case for example when you have a massive circuits breakers board and you want to install more than 4 CTs, then one emonTx would have Ethernet (or maybe RFM12B), one AC voltage sensor, and would be connected over I2C to 1, 2 or 3 other emonTx's. The master would measure Vrms, 4CT's and communicate the Vrms value over I2C to slaves.&nbsp;</p>
<p>Slaves would have up to 4 CT's connected to them, no connectivity options other than the I2C communication with the master. This would take only two pins and one resistor.</p>
<p>Five connections must be made between the master and the slaves: SCL, SDA, GND, Vin and reset. I can imagine that a normal RJ 45 connector would be suitable.</p>
<p>With this we can have a very modular system that is also suitable for bigger installations</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5106"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sir.bacon&#039;s picture" title="sir.bacon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by sir.bacon (not verified) on Wed, 04/07/2012 - 09:05.</div>
    <div class="content">
     <p>Hi, first post on the forum. I have been following your project for some time as I am searching for a good way to monitor my total energy use and production (PV panels on the roof). So far I have not yet found the perfect solution, so may I add some ideas for the next emonTx.</p>
<p><strong>Additional pulse inputs</strong><br />
This would be great to measure all energy use. At least in the Netherlands we have a sort of 'E-closet' where electricity, gas and water enters the home. The last 2 can best be measured using pulse sensors. Additionally a pulse input could be used to differ between high and low electricity tariff, if applicable for some people (including myself).</p>
<p>So in short: 3 pulse inputs would be well appreciated</p>
<p><strong>Offline local storage<br />
</strong>Using a SD-card on the emonTx would give the opportunity to store the data locally, have it run fully autonomously, and retrieve data later. Possible setup could be like making data-files for each day, read those files on a local networked computer once a week and input that in a database. So no live view (which can be retained using the RFM12B anyway), but data-processing later.</p>
<p><strong>Retain 1 open Jeeport</strong><br />
Jeelabs has wonderfull extension plugs available. If you could leave one Jeeport open, people can extend the emonTx with these plugs as required.</p>
<p>So far for my ideas. Any comments are appreciated.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5274"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mattvenn&#039;s picture" title="mattvenn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by mattvenn (not verified) on Thu, 19/07/2012 - 14:00.</div>
    <div class="content">
     <p>&nbsp;I'm interested in helping out with the hardware. Let me know if you want anything tested or prototyped.</p>
<p>Matt</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5533"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Sun, 05/08/2012 - 20:57.</div>
    <div class="content">
     <p>&nbsp;Hey people,</p>
<p>I needed an SMD version of emonTx, but with an ATMega 328, arduino shields compatibility and 4 CT's, so the new A32u4 based emonTx doesn't suit my needs.</p>
<p>This is my attempt to make an SMD emonTX with my above requirements (see attached schematics and board). I still need to include a master-slave method to interconnect several emonTx's, but I alreay had a hard time routing this board. It is more like an exercice to get a working SMD microcontroller design. All credit goes to the Arduino team, Trystan, Glyn and JCW of Jeelabs.</p>
<p>My final board will probably have a different layout and a master-slave bus.</p>
<p>If you have any comments or suggestions please share them :)</p>
<p>&nbsp;</p>
<p><img alt="" src="../sites/default/files/board.png" /></p>
<p><img alt="" src="../sites/default/files/Schematics.png" />&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5541"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Mon, 06/08/2012 - 10:19.</div>
    <div class="content">
     <p>Very nice board, I would like to have one (I need 4 CTs)!</p>
<p>One question:</p>
<p>- how is the WIZ820 powered when it is mounted? I think it draws quite a lot of current (&gt;100mA?). The power dissipation can possibly not be handled by the SOT23 version of MCP1703 and R5 would also prevent this.</p>
<p>Regards, J&ouml;rg.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5543"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Mon, 06/08/2012 - 10:30.</div>
    <div class="content">
     <p>&nbsp;Hey&nbsp;<span class="Apple-style-span" style="border-collapse: collapse; font-family: Verdana, Arial, Helvetica, sans-serif; ">&nbsp;J&ouml;rg,</span></p>
<p>I also had my doubts about that, even though the datasheet says it can supply up to 200mA. I'll get one pcb made and test it, then maybe I'll have to choose another regulator or another resistor.</p>
<p>Now that I think about it, so you think another package than 0603 is more suitable for that resistor?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5546"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Mon, 06/08/2012 - 11:48.</div>
    <div class="content">
     <p>The original value of R5 56 Ohms was calculated for the Emontx power consumption without the extra 100mA of the WIZ820. Since the input is AC, C5 has to deliver the consumed current for roughly one periode means 20ms, until it is recharged again. The values for C5, R5 have to be recalculated for the much higher consumption with the WIZ820 module. This also depends on the voltage of the wall transformer.&nbsp; </p>
<p>Question is if the distortion of the input voltage is still within acceptable limits then. Perhaps Glyn could test this with his LTSpice simulation.</p>
<p>For the MCP1703 you could choose the SOT223 package which has a much lower thermal resistance and try to dump as much heat as possible into the GND plane.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5624"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 10/08/2012 - 00:00.</div>
    <div class="content">
     <p>I think my post here is on the same topic:<a href="736.html#comment-5623">&nbsp;http://openenergymonitor.org/emon/node/736#comment-5623</a>. Good effort Amin, I'll get back to you with my thoughs on your design soon. Sorry, things are very busy at the moment. I need to get some sleep now.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5649"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Sat, 11/08/2012 - 12:16.</div>
    <div class="content">
     <p>&nbsp;Hello Joerg,</p>
<p>your guess was right! Even with an R5 value of 10R and a C5 of 470uF the MCP 1702 (that's what I'm using, but I didn't have the corrsponding eagle part), this power supply can not provide more than 126mA, which is too little.I noticed that the waveform distortion is not that important (very negligeable actually) even with a 126mA load. I have doubts that this is wrong.</p>
<p>I think a full wave rectifier design is necessary to power the extra modules (ethernet, etc), I'll do some reading and try to come up with an acceptable design.</p>
<p>I will share it here on the forum, or on a new topic. All help is appreciated, since I didn't do this before.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5650"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Sat, 11/08/2012 - 13:06.</div>
    <div class="content">
     <p>&nbsp;Main dilemna now is the choice of a regulator: Low-dropout regulator, or switching regulator. The latter heats up less, which may be a decisive factor here.</p>
<p>Any thoughts?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5652"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Sat, 11/08/2012 - 13:14.</div>
    <div class="content">
     <p>&nbsp;This regulator seems to be adequate: STMicroelectronics LF33CDT (<a href="http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/DATASHEET/CD00000546.pdf">Datasheet</a>)</p>
<p>Especially these characteristics:</p>
<p>Output current: up to 500mA</p>
<p>Input voltage:16V</p>
<p>Should do the trick with a full wave rectifier no?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5658"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 11/08/2012 - 23:00.</div>
    <div class="content">
     <p><a title="View user profile." href="../user/15.html">Amin Zayani</a></p>
<p>You cannot go to a full-wave rectifier without one of:</p>
<ol>
<li>A centre-tapped transformer,</li>
<li>Another isolating transformer,</li>
<li>An isolating op-amp.</li>
</ol>
<p>If you try to use a single winding transformer and a bridge rectifier, one way or another you end up shorting part of the bridge. (That's what Mark Beal's circuit, that was picked up and promoted elsewhere, did, with as a consequence a voltage wave that bore little resemblance to what came out of the power station!).</p>
<p>The whole purpose of the single supply was to remove the need for those things and the separate 5 V supply. If you want to have a high-powered radio or Ethernet, or multiple temperature sensors, then the single supply is simply not appropriate and was never intended for that purpose.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5660"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Sat, 11/08/2012 - 23:31.</div>
    <div class="content">
     <p>Amin,</p>
<p>the LF33 is a good choice although with a much higher quiescent current than the MCP1702. It is easy to use, does not need too much C on the output and the package allows for easy cooling.</p>
<p>If you want to keep the MCP1702 you could just use a second one for powering the WIZ820.</p>
<p>But Robert is certainly right with his remarks regarding the limitations of the single supply (and that the full wave rectified version will not work).</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5662"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Sun, 12/08/2012 - 00:32.</div>
    <div class="content">
     <p>&nbsp;Robert, Joerg,</p>
<p>thanks for your comments. I am aware of the complications of using a full wave rectifier design, I'll try to find a center tapped design for later versions, for the moment back to the drawing board with 2 MCP 1702 in mind. I'll post my simulation files tomorrow.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5663"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 12/08/2012 - 00:50.</div>
    <div class="content">
     <p>Your problem will be finding a centre-tapped adapter. Your alternative is an on-board transformer that needs to remain well out of saturation at the UK maximum voltage of 253 V, and then you still have the attendant clearance problems etc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5677"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Sun, 12/08/2012 - 13:34.</div>
    <div class="content">
     <p><em>.... with 2 MCP 1702 ... </em></p>
<p>I think this is a good idea (well known parts, keeps the number of different parts low, scalable, etc.). And please give them a bit of copper area (connected to one or several pins) where they can sink the heat. GND plane can also be used for this. Keeping the temperature low improves reliability and reduces output voltage drift.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5692"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Mon, 13/08/2012 - 23:03.</div>
    <div class="content">
     <p>&nbsp;This is my last attempt with only one MCP1702:</p>
<p><img alt="" src="../sites/default/files/schematics-2.png" /></p>
<p>R5= 10 R, C1= 470uF and that should be good for a load of 120mA as shown in the simulation graph:</p>
<p><img alt="" src="../sites/default/files/graph_0.png" /></p>
<p>The AC adapter I use supplies up to 830mA so it shouldn't be the bottleneck. I just need to choose the right resistor, capacitor, and regulator packages for such an application.To my surprise, the waveform is not very much disturbed. Any thoughts on this one?</p>
<p>I uploaded the LTspice file (credt goes to Glyn) <a href="https://dl.dropbox.com/u/8031173/Half-wave rectifer DC power supply and AC voltage sample.asc">here</a>&nbsp;if you need to experiment with it.</p>
<p>I have another thought in mind: what happens if a DC adapter is connected instead of AC? My educated guess is that it will also work properly. What do you think?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5696"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 14/08/2012 - 00:11.</div>
    <div class="content">
     <p><em>&quot;what happens if a DC adapter is connected instead of AC? My educated guess is that it will also work properly.&quot;</em></p>
<p>Sorry,&nbsp; a bad guess and wrong. If you rectify the a.c., you won't be able to tell the difference between imported and exported power because you won't know the relative phase of voltage and current. And if your d.c. supply has a smoothing capacitor inside (most have), you've lost the ability to calculate true power too (for that, you need the average of the product of instantaneous voltage and current).&nbsp; <br />
So you have at best a voltage that has some relationship to the peak voltage, and you can only get an estimate of VA with no knowledge of whether it's import or export.</p>
<p>&quot;To my surprise, the waveform is not very much disturbed.&quot; - Yes, that's because you are taking the same energy over a longer time and drawing a lower current, hence the internal drop in the transformer (from both copper and iron) is less. A higher VA rating helps here with a lower source impedance, but it has no connection with the inherent distortion of the voltage waveform that arises from saturation effects in the tranformer core.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5704"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Tue, 14/08/2012 - 08:47.</div>
    <div class="content">
     <p><em>&nbsp;&quot;<span class="Apple-style-span" style="border-collapse: collapse; font-family: Verdana, Arial, Helvetica, sans-serif; line-height: 15px; ">Sorry,&nbsp; a bad guess and wrong. If you rectify the a.c., you won't be able to tell the difference between imported and exported power because you won't know the relative phase of voltage and current. And if your d.c. supply has a smoothing capacitor inside (most have), you've lost the ability to calculate true power too (for that, you need the average of the product of instantaneous voltage and current). &nbsp;&quot;</span></em></p>
<p>That much is clear Robert :) I meant for the power supply. The board will be powered without problems, and it will be a current only monitor.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5705"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Tue, 14/08/2012 - 09:04.</div>
    <div class="content">
     <p>Amin,</p>
<p>this was also how I understood your question. You just have to make sure that + is on the right contact&nbsp;<img src="../sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/shades_smile.html" alt="" /> and that the power dissipation will be roughly doubled (if you use a wall supply with the same DC voltage as AC RMS). </p>
<p>And then, I am also suprised that the waveforem is not very much disturbed! I understood from Glyns post that 20mA will be the maximum before distortion will make the circuit useless?!? How does this fit together? (and this has absulutely nothing to do with transformer saturation at higher voltages?!?)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5706"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Tue, 14/08/2012 - 09:09.</div>
    <div class="content">
     <p>&nbsp;Sizing R5:</p>
<p>It seems to me that the maximum possible power dissipated by R5 is the maximum voltage times the max current (to stay on the safe side), so R5 should be able to handle 3.5W heat dissipation. It was impossible for me to find an SMD resistor that can dissipate so much heat, my options are:</p>
<ul>
<li>4 BIG smd resistors in parallels</li>
<li>1throughhole resistor</li>
</ul>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5708"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 14/08/2012 - 11:10.</div>
    <div class="content">
     <p><a href="../user/15.html" title="View user profile.">Amin Zayani</a></p>
<p>I must be missing something! The whole purpose of the single supply was to give the option of a minimal performance  'bare bones' emonTx measuring real power without the need for both a.c. and d.c adapters. If you need more options that draw more power, then a separate d.c. supply was always envisaged. That's what the optional break / link on Glyn's layout is for!</p>
<p>If your extras need more current, or for another reason you do not want the single supply option, then you have no need to worry about R5, you leave it out and feed a clean smoothed d.c. supply across C1, and use the a.c. adapter for the voltage reference only.</p>
<p><a href="../user/1332.html" title="View user profile.">JBecker</a></p>
<p>The specification was indeed for 20 mA - the ATmega328 and RFM12B at 14mA &nbsp;when the RF12B is transmitting, and 2.3 mA each for two DS18B20 temperature sensors. The components were chosen so that at that current and the minimum theoretical supply voltage and worst case component tolerances, the MCP1702 just ran out of headroom and failed to regulate. The distortion on the voltage sample was deemed acceptable, the harmonics introduced are around 1% and the change in rms value is minimal (or to put it another way, I could not discern a difference in the rms voltage readings when the supply was loaded with 20 mA and when it was not - the difference was swamped by normal fluctuations in the mains voltage, so in practice it is likely to be quite immaterial).</p>
<div>&nbsp;</div>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5709"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Amin Zayani&#039;s picture" title="Amin Zayani&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by Amin Zayani (not verified) on Tue, 14/08/2012 - 11:19.</div>
    <div class="content">
     <p>&nbsp;R5: I think I'll go ahead with such a 5W resistor:</p>
<p><img alt="" src="../sites/default/files/00003ef4.jpg" /></p>
<p>and I simulated the thermal dissipation of the MCP 1702 at 120mA load, it should be around half a watt:</p>
<p><img alt="" src="../sites/default/files/thermal.png" />&nbsp;So I think I'll go with a TO92 package for this first try and clean up all this later.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5712"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Tue, 14/08/2012 - 13:42.</div>
    <div class="content">
     <p>Robert,</p>
<p>thanks for making the reason for 20mA clear. This is more or less as I understood it. More current <em>can</em> be drawn (with different component values) but distortion will certainly increase, possibly up to a level where everybody has to decide for himself if it is still acceptable for his purpose.</p>
<p>And you can clearly see in Amins simulation that the voltage drop in large parts of the positive halfwave is considerable. All this might 'average out' with calibration but will for sure increase the overall measurement error.</p>
<p>&nbsp;</p>
<p>BR, J&ouml;rg.</p>
<p>PS: I understand Amins question regarding DC supply in that way that he wants to be able to use the exactly same hardware with AC and DC wall adapters (off course without voltage measurement with the DC adapter).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5734"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Thu, 16/08/2012 - 09:15.</div>
    <div class="content">
     <p>Could I&nbsp;make a request please for any future re-design of the EmonTX to have more space around the screw holes?</p>
<p>The current EmonTX board does not have sufficient clearence around the holes for an M3 nut plus spanner, making fixing it with nuts/bolts very tricky.</p>
<p>&nbsp;</p>
<p>Thanks,</p>
<p>Martin</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5805"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 18/08/2012 - 20:50.</div>
    <div class="content">
     <p>Hi Martin,</p>
<p>I've also had this problem, I'll fix it in future designs.</p>
<p>Thanks for flagging it up.</p>
<p>All the best,</p>
<p>Glyn.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5828"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 20/08/2012 - 21:18.</div>
    <div class="content">
     <p>I think the shop needs to stock 8BA mounting kits, because the holes in the existing are 3/32&quot; diameter and that's 8BA clearance size <img alt="" src="../sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/embaressed_smile.html" /></p>
<p>(For the metrically inclined, 8BA is between M2 and M2.5)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5884"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Thu, 23/08/2012 - 11:53.</div>
    <div class="content">
     <p>Something else you might consider:</p>
<p>The original emonTx has no over-voltage protection on the CT&nbsp;inputs. What happens if the CT sees a current of more than 100A? Or in fact, any current great enough for the voltage across the burden resistor to exceed Vcc/2?&nbsp;This will pull the analog input on the CPU outside the 0-Vcc allowed range.</p>
<p>The Atmel datasheet states that the absolute max voltage an any pin is from -0.5 to Vcc + 0.5.</p>
<p>This leads me to believe that it would rather easy to destroy the CPU if there was a current surge caused by a fault somewhere.</p>
<p>This would be&nbsp;especially true if using a larger burden resistor in order to increase the resolution when using the CT on a circuit with a smaller design current. E.g. on a PV inverter, the max expected current might be only 16A not 100A, it would be reasonable to scale up the burden resistor to match.</p>
<p>With the new design, if the op-amp is powered off the 3.3V supply, then I guess this is fine. If powered of 5V, then this could easily drive the analogue-in line above the 3.3+0.5 limit (assuming its output can swing up to the supply), when used on one of the higher gain settings.</p>
<p>Have you considered this? Should you add a couple of diodes to ov and Vcc to limit the swing?</p>
<p>Martin</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5885"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Thu, 23/08/2012 - 12:00.</div>
    <div class="content">
     <p>You can probably ignore my last comment! I just check the specs of the lmv324, and I assume that you must be running it from 3.3 volts, so it can't possible over-drive the input.</p>
<p>However, the observation about the lack of over-voltage protection on the non-smd emonTx design still holds.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5886"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Thu, 23/08/2012 - 12:15.</div>
    <div class="content">
     <p>I drilled my holes out to 3mm (from 2.5) &nbsp;'cos I only has m3 nuts/bolts to hand, and some m3 stand-offs. Then I discovered that the nuts were too big!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5887"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 23/08/2012 - 12:41.</div>
    <div class="content">
     <p>I think you need to consider the characteristics - particularly the VA rating - of the c.t., and the circuit around it. We know what happens when the c.t. sees a current up to 250 A (been there, done that!) and we know what happens when the burden is changed from the recommended value (been there, done that too!). And it's all documented.</p>
<blockquote><p>&quot;The Atmel datasheet states that the absolute max voltage an any pin is from -0.5 to Vcc + 0.5.&quot;</p>
</blockquote>
<p>That assumes a voltage source of sufficiently low impedance. Yes, it <em>might</em> over-volt the input, but the current available is just within the maximum current for the internal protection diodes. A simple series resistor of a couple of thousand ohms will limit the current to a safe value under all circumstances that I've been able to envisage.</p>
<blockquote><p>&quot;only 16A .... it would be reasonable to scale up the burden resistor to match.&quot;</p>
</blockquote>
<p>No, it wouldn't be reasonable, again because the c.t. has a limited VA rating and you will overload the c.t. if you increase the burden resistance too much. (And before you point out the 30 A c.t. with the internal burden, I believe - but don't have evidence - that this is the same part as the 100 A, but with a burden resistor added).</p>
<blockquote><p>&quot;Should you add a couple of diodes to ov and Vcc to limit the swing?&quot;</p>
</blockquote>
<p>But not any old diodes. They'd need to be Schottky to assure that they would take the lion's share of the current. A series resistor is cheaper and simpler (but maybe not as a retro-fit).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5888"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 23/08/2012 - 13:31.</div>
    <div class="content">
     <p><em>I just check the specs of the lmv324, and I assume that you must be  running it from 3.3 volts, so it can't possible over-drive the input.</em></p>
<p>If supplied with 3.3V the upper level of the common mode input range is limited to 2.5V!! So be careful not to 'overdrive' the input.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5889"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robinsmh&#039;s picture" title="robinsmh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by robinsmh (not verified) on Thu, 23/08/2012 - 14:25.</div>
    <div class="content">
     <p>My point was that we need to be careful not to over-drive the AtMega analogue input. A lmv324 run from 3.3 volts can't do that. The op-amp (and anlogue switch) &nbsp;input itself is probably safe from damage from&nbsp;an over-driven&nbsp;CT due to the series resistors.</p>
<p>The common-mode input voltage operating point is set at Vcc/2 which will be 1.65V. The high open-loop gain of the op-amp and feedback network will ensure that the op-amp input pins won't move much from that.</p>
<p>So in other words, it will work fine.</p>
<p>It's not so clear-cut with the old emonTx design, where the CT burden resistor is connected directly to the CPU with no series resistor or protection diodes or anything. Here, it looks as if we are relying on the CT secondary saturation current being small enough to be safely handled by the CPU's built-in protection diodes. It may be just-about ok with the standard 100A CT, but it's not a great piece of design in my opinion.</p>
<p>&nbsp;</p>
<p>Martin</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5890"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 23/08/2012 - 14:49.</div>
    <div class="content">
     <p>Martin,</p>
<p>fully understood and agreed. My remark was just meant as a general warning regarding the LMV324 (possibly a bit off-topic for the subject of this thread, the emontx smd, where the opamp will work fine, as you said).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6059"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 05/09/2012 - 13:48.</div>
    <div class="content">
     <p><a href="../user/1365.html" title="View user profile.">robinsmh</a>,</p>
<p>Seconded about the old emonTx input. <em>Provided</em> (big IF) the voltage across the burden remains more or less sinusoidal (which it won't), it is only the series impedance of the decoupling capacitor (10&micro;F) at 50 Hz along with the limitations of the c.t&nbsp; that can keep the current within the absolute maximum rating for that input (if all 3 c.t's get saturated at the same time, it's also heading towards the per chip limit as well). I think it's just about OK on a good day, but as you say there's no certainty about it, and I'm just a little bit surprised we haven't seen blown up Atmel chips before now. It only needs a 1 kOhm series resistor to be pretty much guaranteed to be safe even if the burden resistor falls off, provided you have the 22 V zeners still across the c.t. secondary of course. If you're worried about those being absent (30 A c.t with internal burden removed?), the alternative is to clamp the input to the supply rails before the series resistor.</p>
<p>I've been meaning to make a Spice model of the YHDC c.t. so that we can explore that area a bit more thoroughly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10564"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jdthood&#039;s picture" title="jdthood&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by jdthood (not verified) on Thu, 21/03/2013 - 13:47.</div>
    <div class="content">
     <p>In the Netherlands almost everyone will soon (within a few years) have a &quot;smart&quot; electricity meter. The smart meter has a serial port on it (port P1) which supplies information about the metered electrical and gas usage. If we can interface P1 with OpenEnergyMonitor&nbsp;(and of course we should) then this will make it unnecessary to monitor electricity meter pulses. P1&nbsp;also supplies gas meter information but that is only updated hourly.</p>
<p>There is some talk of this system becoming a European standard, but I have no idea how realistic that is.</p>
<p>Ref:&nbsp;http://www.netbeheernederland.nl/DecosDocument/Download/?fileName=a-n579CEVhC-PRRFqtN5bZIjj5OT0osfD6_rJVUBnU5V5SSv8hiUTEpArs1SnYWOgvEUytnuOapmyNRQgnv22w&amp;name=Dutch-Smart-Meter-Requirements-v4-0-5-P2</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11389"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonTx New Version Dev Ideas </h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Wed, 17/04/2013 - 15:18.</div>
    <div class="content">
     <blockquote><p>The general idea is that the next version will be pre-assembled with SMT electronics, we plan to keep the current features such:</p>
<ul>
<li>
			RFM12B wireless</li>
</ul>
</blockquote>
<p>We may want to reconsider this since the RFM12B won&#39;t be available anymore:</p>
<p><a href="http://harizanov.com/2013/04/rfm12b-end-of-life/" title="http://harizanov.com/2013/04/rfm12b-end-of-life/">http://harizanov.com/2013/04/rfm12b-end-of-life/</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/642"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-3tc7wyQNWOWiqPwmCsNt9Yu-YuCATJhKUtaAOGoUDpk" value="form-3tc7wyQNWOWiqPwmCsNt9Yu-YuCATJhKUtaAOGoUDpk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
