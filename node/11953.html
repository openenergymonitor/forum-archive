<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11953 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:51:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>22dec image WiFi issues | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">22dec image WiFi issues</h3>
        <span class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 07/01/2016 - 19:32</span>
        <div class="content"><p>For some reason my emonPi, fitted with a newly downloaded 22dec image, freshly updated and otherwise&nbsp;unadulterated, will&nbsp;only connect to the wifi&nbsp;IF the Ethernet connection is present !!!</p>
<p>Started out with an Ethernet cable to set the wifi settings all appeared fine, but when I disconnect the Ethernet the network connections disappear, even a reboot will not cause the wifi to reconnect, only if I reconnect the Ethernet will the wifi&nbsp;connect.</p>
<p>I have confirmed this with fing, with the cable connected there are 2 ip addresses for my emonPi, I can typr either IP into a browser and get to emoncms, (and using &quot;emonpi/&quot; too)&nbsp;but when I disconnect the cable I can see both the IP&#39;s vanish from fing and I cannot connect via either ip address or &quot;emonpi/&quot;</p>
<p>neither the&nbsp;ifconfig or iwconfig&nbsp;commands are recognised and I haven&#39;t (yet) installed any other tools etc as it was my intention to keep this image as &quot;stock&quot; as possible to aid supporting other users,&nbsp;</p>
<p>Any pointers ?</p>
<p>Paul&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12081.html" class="topic-previous" title="Go to previous forum topic">‹ Is there a numbering range for RFM Devices?</a>
              <a href="12087.html" class="topic-next" title="Go to next forum topic">emonhub.conf not reporting to emoncms.org? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-38000"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6518.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="JD&#039;s picture" title="JD&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/6518.html" title="View user profile.">JD</a> on Thu, 07/01/2016 - 20:33.</div>
    <div class="content">
     <p>I&#39;m not having that problem here. &nbsp;Wifi works as expected.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38003"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 07/01/2016 - 21:46.</div>
    <div class="content">
     <p>Works fine for me. Can you take a look at /var/log/wificheck.log?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38004"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 07/01/2016 - 22:11.</div>
    <div class="content">
     <p>These are the last 3 entries of the wifi log, for this I unplugged the Ethernet cable at 21:53 and reconnected it at 22:00, during those 7mins&nbsp;I could not ssh in nor open emoncms in a browser, I tried both ip addresses and &quot;emonpi/&quot;. I also refreshed the device list on my router and there was no mention of the emonPi, I also have fing&nbsp;connected on my phone which showed the emonPi disappear at 21:53 and reappear at 22:00 (with 2 ip addresses). These 3 logs are before, during and after the 7mins &quot;no cable&quot;, bizarre I know !!!&nbsp;</p>
<blockquote><p>Starting WiFi check for wlan0<br />
Thu &nbsp;7 Jan 21:50:01 GMT 2016</p>
<p>Performing Network check for wlan0<br />
Network is Okay</p>
<p>Current Setting:<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.69 &nbsp;Bcast:192.168.1.255 &nbsp;Mask:255.255.255.0</p>
<p>
Starting WiFi check for wlan0<br />
Thu &nbsp;7 Jan 21:55:01 GMT 2016</p>
<p>Performing Network check for wlan0<br />
Network is Okay</p>
<p>Current Setting:<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.69 &nbsp;Bcast:192.168.1.255 &nbsp;Mask:255.255.255.0</p>
<p>
Starting WiFi check for wlan0<br />
Thu &nbsp;7 Jan 22:00:01 GMT 2016</p>
<p>Performing Network check for wlan0<br />
Network is Okay</p>
<p>Current Setting:<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.69 &nbsp;Bcast:192.168.1.255 &nbsp;Mask:255.255.255.0</p>
<p>pi@emonpi:~$</p>
</blockquote>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38025"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 08/01/2016 - 13:42.</div>
    <div class="content">
     <p>Ok tried this again from a fresh&nbsp;22dec&nbsp;image downloaded and installed&nbsp;to a formatted&nbsp;sdcard, this time I had also taken the steps of deleting any reference to emonpi from my routers dchp tables, I even cleared my windows pc&#39;s browser cache and even run &quot;IPConfig /flushDNS&quot; to remove any trace of emonpi. I even deleted it from the fing app on my phone.</p>
<p>emoncms wifi&nbsp;scan shows my usual networks (2 of my own, plus I recognize the neighbours too), I am able to add my psk &quot;connect&quot; and &quot;refresh&quot;, the fields are fully populated&nbsp;and &quot;connected&quot;. I can navigate to the IP given in the wifi&nbsp;details and arrive at emoncms, in fact&nbsp;I can open 4 different pages,&nbsp;the ip of emonpi&#39;s eth0, the ip of emonpi&#39;s wlan0, the url&nbsp;&quot;emonpi/&quot; and also &quot;emonpi.home/&quot;.</p>
<p>Both ip&#39;s are listed in the router, (and the wifi ip has been changed this time around so I know it is a new record), bothe&nbsp;ip&#39;s are found in fing.</p>
<p>As soon as I remove the Ethernet cable all 4 pages will not refresh, &quot;page not found&quot;. there are no active connections in the router table for emonpi nor is it found by fing.&nbsp;</p>
<p>I waited 10 mins for the &quot;wifi script&quot; to have been called twice&nbsp;and tried all again no change,</p>
<p>Plugged the Ethernet cable back in and all 4 pages refresh, fing shows 2 connections (2x ip&#39;s) as does the router.</p>
<p>I have been through this multiple times now and the result is the same.</p>
<p>Is there a full build guide for the 22dec image for me to check?</p>
<p>For the record this is using a standard edimax&nbsp;wifi dongle, I have several but this particular one was supplied by the OEM shop, It was working perfectly ok on this emonpi with the previous image, unfortunately I do not recall which it was probably the 17june&nbsp;but I cannot ne sure.</p>
<p>I have multiple Pi&#39;s using various dongles and I do not have any wifi issues usually, this emonpi hardware has also never posed a problem before, this can only&nbsp;be an issue with this image, granted other uses may not of experienced this issue but I have nothing non-standard and have not altered the image in any way other than copying the default.emonpi.settings.php over to settings.php and using the wifi&nbsp;module to connect to the network.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38027"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 08/01/2016 - 15:57.</div>
    <div class="content">
     <p>Ok, I have now found if I reboot without the Ethernet connected it&#39;s a very slow process but eventually it will connect via wifi, I noticed there is absolutely&nbsp;no led activity on the dongle for a considerable amount of time though, in fact I had pretty much given up and was doing something else&nbsp;when I saw a blue flicker and moments later the &quot;unfound&quot; page refreshed in the open browser. I thought maybe it was dependent on the reconnection script to make the initial connection which could take up&nbsp;to&nbsp;5mins but the wifi check script logs still show&nbsp;no problems.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38040"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 08/01/2016 - 20:20.</div>
    <div class="content">
     <p>Hi Paul,&nbsp;</p>
<p>Thanks for testing this. I would love to get to the bottom of what is causing the issue for you. I am also running the stock 22nd Dec image and wifi has been totally solid on my emonPi since I powered up before Christmas.&nbsp;</p>
<p>There was a long standing problem with the old 17thJune image that the wifi-check script was being called in the &#39;pi&#39; user crontab&nbsp;but it requires root to run properly. In the 22nd Dec image the cron entry was moved to the root sudo crontab.</p>
<p>The wifi check script is installed with:</p>
<p>sudo cp /home/pi/emonpi/wifi-check /usr/local/bin/wifi-check<br />
sudo chmod +x /usr/local/bin/wifi-check</p>
<p>Here is the script:&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/blob/master/wifi-check">https://github.com/openenergymonitor/emonpi/blob/master/wifi-check</a></p>
<p>Thinking more about it, maybe it would be best so symlink the script to rather than cp so we can update if needed?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38060"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 09/01/2016 - 13:32.</div>
    <div class="content">
     <p>Hi Glyn</p>
<p>I do not think this has anything to do with the &quot;reconnection&quot; script, my logs above seem to prove that and as you point out those permission issues where resolved before the 22dec image. Plus this should not be dependent on the &quot;reconnection&quot; script for the initial connection. With or without a &quot;reconnection&quot; script all my Pi&#39;s have always been able to switch to the wifi&nbsp;connection after removing the Ethernet cable, in fact I would usually ssh in set up wifi, use ifup and ifdown to establish the wifi connection, ssh in via the wifi&nbsp;ip to confirm the wifi, then unplug the Ethernet thus losing the first &quot;Ethernet&quot; ssh console connection, but the second &quot;wifi&quot; console&nbsp;would continue without any interruption. This is not possible (for me)&nbsp;with this image.</p>
<p>I previously mentioned that iwconfig and ifconfig tools were not installed on this image. I have since found this to not be the case. There is in fact, a &quot;difference&quot; in the PATH settings, (I would consider it broken, but cannot rule out it&#39;s intentional) on both &quot;normal&quot; jessie and wheezy. Both those commands get a result. Yes, you probably need to elevate with &quot;sudo&quot; for actions, but for checking connections, it&#39;s not required. But in this image, you get</p>
<p>-bash: ifconfig: command not found</p>
<p>Whilst trying to establish the origin of this OS build, I tried tools such as &quot;hostnamectl&quot; which too works fine on &quot;stock&quot;&nbsp;jessie. It&#39;s not found on this image, and even sudo&nbsp;doesn&#39;t work this time. But&nbsp;&nbsp;&quot;/usr/bin/hostnamectl&quot; does work.</p>
<p>Is the PATH issue by design? Is that why the prompt is red, not green? Or is that just a colour&nbsp;preference?</p>
<p>Now I have the use of ifconfig&nbsp;and iwconfig the plot thickens. Right now, I have the emonPi/22dec.img and a Pi2/Jessie.img side by side on the bench. Both have the same dongles and are connected to the same network. However they are also both showing an active eth0&nbsp;connection which is odd, as I only have one Ethernet cable.</p>
<p>When I checked, the cable is connected to the Pi2, not the emonPi When I unplug it and run ifconfig, it no longer shows an ip address for the eth0. If i connect it again, &quot;ifconfig&quot;&nbsp;shows an ip. This is as I expected based on recollection. The emonPi however, does not show any signs of recognizing the Ethernet cable is present or not, using &quot;sudo&nbsp;ifconfig&quot; it seems to retain&nbsp;the ip and shows an active connection, despite the cable not being connected, this is unlikely to be a retention/retrying&nbsp;&nbsp;scenario as when I first noticed it the Ethernet cable had not been connected for over 12hrs.</p>
<p>Currently, I believe the emonPi is not switching to the wifi connection automatically as it is not aware the Ethernet is missing, unless rebooted without the cable, as I found. Now I have &quot;found&quot; the tools I can do some further&nbsp;ifup and ifdown tests, but I have no idea why the eth0 is not updating, could it be somewhere in the ifup ifdown type scripts there is a path issue?</p>
<p>I&#39;ve spent a considerable amount of time on this however&nbsp;I do not intend using this image, if you wish to get to the bottom of it I will continue some tests, but there is little point pursuing this for my benefit alone. I&#39;m surprised I&#39;m alone in this as I am using a stock emonPi, freshly downloaded 22dec.img, edimax dongle and a very standard bthomehub&nbsp;router/network, there is nothing odd there! and I have&nbsp;no issues on any of my other Pi&#39;s.</p>
<p>I am pretty confident the PATH issue&nbsp;though, will&nbsp;probably cause other issues even if it&#39;s not the root cause for the wifi issue that currently only effects me.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38075"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sat, 09/01/2016 - 22:22.</div>
    <div class="content">
     <p>Hi Paul,&nbsp;</p>
<p>Thanks for helping debug this. Yes on the on&nbsp;MINIBIAN image ifconfig must be launched by /sbin/ifconfig. Does&nbsp;your emonPi&nbsp;wifi work after a reboot after Ethernet is removed? Do you know how the Path issue could be fixed so ifconfig another other scrips could be executed without specifying /sbin?&nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38082"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 10/01/2016 - 12:20.</div>
    <div class="content">
     <p>Yes, wifi will work after a reboot&nbsp;after Ethernet is removed if the Ethernet is removed before the reboot, if rebooted with the Ethernet connected and then disconnected nothing changes.</p>
<p>I think this is to do with not having the &quot;allow-hotplug&quot;&nbsp;stanza in /etc/network/interfaces, I haven&#39;t had a chance to test it yet but it stands to reason as the &quot;auto&quot; setting will only do something at boot not on a system event.</p>
<p>It seems the PATH is intentionally configured differently in this image, there are no paths to any system&nbsp;files for a standard user, on the minibian site it says a&nbsp;root user is enabled and the password is raspberry, but this isn&#39;t the case on this image, did&nbsp;you change it? if so how? I&#39;m guessing the pi user is not that root account due to the path issue.</p>
<p>Paul&nbsp;</p>
<p>some useful links&nbsp;</p>
<p><a href="https://minibianpi.wordpress.com/how-to/wifi/">https://minibianpi.wordpress.com/how-to/wifi/</a></p>
<p><a href="https://www.raspberrypi.org/forums/viewtopic.php?f=66&amp;t=108863">MiniBian and wifi (HOWTO &amp; preconfigured image)</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38092"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 10/01/2016 - 16:50.</div>
    <div class="content">
     <p>Hi Paul,&nbsp;</p>
<p>Ah great, so the WIFI is working after a reboot once Ethernet is un plugged. To me this seems like acceptable&nbsp;operation since the user flow at setup is to connect&nbsp;&nbsp;to Ethernet&nbsp;to setup Emoncms user account and connect to Wifi then shutdown and move the emonPi to desired install location and connect CT&#39;s etc and then power up without Ethernet what which point Wifi will connect.&nbsp;</p>
<p>I have just looked at mt network interfaces file and I actually have &quot;allow-hotplug wlan0&quot;, I must have added this manually. I will make sure this is included in the next image release. Can you confirm that it does fix this issue.&nbsp;</p>
<p>Yes, I manually created the Pi user on first boot of Minibian:</p>
<p>apt-get install sudo</p>
<p>adduser pi</p>
<p>adduser pi&nbsp;sudo​</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38096"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 10/01/2016 - 17:54.</div>
    <div class="content">
     <p>allow-hotplug wlan0&nbsp;will not affect whether the eth0&nbsp;reacts to being connected or not.</p>
<p>Reading some more, it seems allow-hotplug is dependent on some other stuff that I&#39;m unfamiliar with &quot;udev&quot;? and I do not know if it&#39;s fully functional in Minibian or not. The more I learn bout Minibian, the less I like it.</p>
<p>If you are happy with that level of operation, I think I&#39;ll leave it there. Personally, I would expect&nbsp;<em>at least</em> the same level of operation to be tempted away from&nbsp;official&nbsp;Raspbian. IMO, by far the biggest advantage&nbsp;of the official releases is we know more about them and what we don&#39;t know, is easily found.&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38169"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8298.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8298.jpg" alt="Jon&#039;s picture" title="Jon&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/8298.html" title="View user profile.">Jon</a> on Tue, 12/01/2016 - 01:14.</div>
    <div class="content">
     <p>Paul - just wanted you to know you are not alone. &nbsp;I am seeing some of these same issues.</p>
<p>I am using a new SD card&nbsp;and&nbsp;the emonSD-22Dec2015.img file. &nbsp;With both the ethernet &amp; wifi connected, I did&nbsp;the initial setup of user ID &amp; password&nbsp;and wifi&nbsp;ID and password. &nbsp;I think the emonPi did its first boot emonpi update soon after. &nbsp;I eventually removed&nbsp;the ethernet&nbsp;connection and I lost connection to the&nbsp;emonPi. &nbsp;I could not connect via the wifi&nbsp;IP address.</p>
<p>I did a paper clip shutdown, removed the ethernet and then&nbsp;powered up the emonPi. &nbsp;It was a&nbsp;very s-l-o-w process to connect via wifi. &nbsp;I am guessing 5 minutes and maybe closer to 10 minutes before I could get any webpage loaded.</p>
<p><strong>ifconfig</strong> does not work. &nbsp;<strong>sudo ifconfig</strong> works as expected.<br />
<strong>route -n</strong> doesn&rsquo;t work. &nbsp;<strong>sudo route -n</strong> works as expected.</p>
<p>I know none of this is new info.</p>
<p>I normally connect the emonPi via ethernet but I&#39;d be happy to connect via wifi and test something to help.</p>
<p>Jon</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38182"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 12/01/2016 - 13:17.</div>
    <div class="content">
     <p>Thanks for letting us know. I&#39;m not the only one seeing this. At least now it&#39;s validated as not a one of a kind. Anyone else experiencing the same issue and reading this, will know&nbsp;not to spend too much time trying to resolve it unless needed.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38486"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Tue, 19/01/2016 - 18:26.</div>
    <div class="content">
     <p>Hmm same problem here. Spent hours trying to work it out before coming to this thread! Unfortunately I do not have the skills to debug this so I hope it will be solved by one of you gents.</p>
<p>Did a complete reset of the software. reregistered and set up wifi with lan cable connected. Hot unplugged the lan cable and it continued to work.</p>
<p>Powered down and restarted and connected immediatly.</p>
<p>Has the software been updated?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38525"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6165.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Dvbit&#039;s picture" title="Dvbit&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/6165.html" title="View user profile.">Dvbit</a> on Tue, 19/01/2016 - 22:36.</div>
    <div class="content">
     <p>3 days up , no issue</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38745"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Tue, 26/01/2016 - 08:43.</div>
    <div class="content">
     <p>see thread by Jmoloney&nbsp;re similar issues. Having spent some time trying to work out what is physically causing this: Hot unplug or plug of lan cable. wifi dongle seems to take 5+ mins to come alive and reconnect. Which initially confused me. My issue then is if wifi AP or router is rebooted whilst Pi is connected by Wifi. the connection is lost and does not restart. If the lan cable is then hot plugged in the wifi does come back up but only after 5+ mins.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38797"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 27/01/2016 - 11:36.</div>
    <div class="content">
     <p>Hi guys,&nbsp;</p>
<p>I feel your pain, I have been doing my best to try and get to the bottom of this issue. Unfortunately&nbsp;I have not been able to replicate.&nbsp;Every&nbsp;emonPi&nbsp;and&nbsp;emonBase&nbsp;that we have running at home or in the lab have never disconnected from&nbsp;Wifi. I am using the standard&nbsp;Edimax&nbsp;Wifi&nbsp;dongle with a Sky router with a&nbsp;WPA2-PSK&nbsp;Wifi&nbsp;network.&nbsp;Over 1.5K&nbsp;emonPi&#39;s&nbsp;have been shipped and to my knowledge this thread is the only reports of&nbsp;WiFi&nbsp;issues.&nbsp;I think we need to try and collate some better info as to what could be the common cause:</p>
<p>I have started an open google&nbsp;doc spreadsheet, I would be most grateful if you could fill out your details:</p>
<p><a href="https://docs.google.com/spreadsheets/d/1B7n57g2iOf-2OJGQMFfXknhfroisKn1AtAnDEzWmS98/edit?usp=sharing">https://docs.google.com/spreadsheets/d/1B7n57g2iOf-2OJGQMFfXknhfroisKn1AtAnDEzWmS98/edit?usp=sharing</a></p>
<p>One thing that all my emonPi install locations have in common is relative quite WiFi&nbsp;spectrum, there are only a couple of other WiFi networks present in the vicinity. I don&#39;t know if this could make a difference. I think this is a Linux / Raspberry Pi issue rather than a specific emonPi issue.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38798"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 22dec image WiFi issues</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 27/01/2016 - 11:37.</div>
    <div class="content">
     <p>I am currently working on rebuilding the Dec22 image from scratch using Raspbian Jessie minimal as the base image. Hopefully this will help fix the Wifi issues. I will post new beta image&nbsp;in a week so.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11953"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-GsSv90YCYy5hYUzXgAZyFTh7VEZsl5VGsLdj_WaOqn8" value="form-GsSv90YCYy5hYUzXgAZyFTh7VEZsl5VGsLdj_WaOqn8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
