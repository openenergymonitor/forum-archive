<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2658 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:39:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Error calculando voltaje(Solucionado) | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Error calculando voltaje(Solucionado)</h3>
        <span class="submitted">Submitted by <a href="../user/4151.html" title="View user profile.">mirasu</a> on Mon, 05/08/2013 - 17:00</span>
        <div class="content"><p>Hola, alguien me puede ayudar en espa&ntilde;ol?</p>
<p>Estoy&nbsp;haciendo el montaje&nbsp;http://openenergymonitor.org/emon/buildingblocks/how-to-build-an-arduino-energy-monitor?page=7</p>
<p>Pero tengo un problema. el arduino&nbsp;muestra&nbsp;550V en mi casa. yo estoy usando&nbsp;un transformador de 220v a 9v&nbsp;AC. Mi casa esta en espa&ntilde;a pero tiene una peculiaridad&nbsp;tengo 2 fases de 125V&nbsp;que dan un total de 230V&nbsp;mas o menos. pero&nbsp;no creo que sea el problema.</p>
<p>He medido entre&nbsp;GND y el cable que va al arduino y da 4,8V en DC y 8v en AC.</p>
<p>hay muchos&nbsp;links en el articulo que no funcionan.</p>
<p>&nbsp;</p>
<p>Gracias y perdon por no saber ingles.</p>
<p>&nbsp;</p>
<p>PD. no lo he traducido al ingles con google porque&nbsp;la gente me dice que no se entiende&nbsp;nada&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2671.html" class="topic-previous" title="Go to previous forum topic">‹ emonGLCD spare pin out, need a PWM</a>
              <a href="2672.html" class="topic-next" title="Go to next forum topic">Help with EmonTX Dead On Arrival ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-14099"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Error calculando voltaje(Solucionado)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 05/08/2013 - 18:29.</div>
    <div class="content">
     <p>I think there is a mistake in your wiring from the 9 V transformer output.</p>
<p>The 9 V transformer does not have a big load, therefore the voltage out will be more than 9 V, I expect 11 V approximately. That is normal. I think 8 V is incorrect.</p>
<p>4.8 V d.c. on the transformer is incorrect. This page <a href="https://learn.openenergymonitor.org/?redirect=measuring-voltage-with-an-acac-power-adapter" title="http://openenergymonitor.org/emon/buildingblocks/measuring-voltage-with-an-acac-power-adapter">http://openenergymonitor.org/emon/buildingblocks/measuring-voltage-with-...</a> shows the voltages you should measure.</p>
<p>And my apologies, because I do not know Spanish.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14103"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3734.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="PhilThy&#039;s picture" title="PhilThy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Error calculando voltaje(Solucionado)</h3>

    <div class="submitted">Submitted by <a href="../user/3734.html" title="View user profile.">PhilThy</a> on Mon, 05/08/2013 - 18:54.</div>
    <div class="content">
     <p>Wouldn&#39;t the 4.8v dc between GND and the cable to the arduino, be the arduino power supply?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14183"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4151.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mirasu&#039;s picture" title="mirasu&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Error calculando voltaje(Solucionado)</h3>

    <div class="submitted">Submitted by <a href="../user/4151.html" title="View user profile.">mirasu</a> on Thu, 08/08/2013 - 12:11.</div>
    <div class="content">
     <p>Hola y gracias a los 2 por contestar&nbsp;y perdonar que tarde tanto en contestar.</p>
<p>He descubierto un mala soldadura en GND y ahora arduino marca 337V</p>
<p>La medicion entre&nbsp;GND y A2 del arduino me marca&nbsp;2,37 Vdc y 4,8Vac</p>
<p>Mi trasformador es&nbsp;interno de 230v a 9vac&nbsp; en la salida en vacio me da&nbsp;18vac</p>
<p>He leido&nbsp;el link que me dices y los links que hay dentro Robert Muro. y aunque con la traduccion de google y que no se mucho de electronica, me parece que&nbsp;esta todo bien y los 2,37v en la entrada A2 de arduino es correcto.</p>
<p>aunque he visto en uno de los links que la resistencia de 100K podria ser&nbsp;mejor de 62K, yo tengo&nbsp;1x100K&nbsp;y 3x10K, es ta bien asi?</p>
<p>&nbsp;</p>
<p>me pudirais&nbsp;ayudar&nbsp;diciendome que V tendria que tener entre varios&nbsp;puntos para comprobar mi circuito?</p>
<p>Gracias</p>
<p>&nbsp;</p>
<p>Hello and thanks for the answer and forgive 2 take so long to answer.</p>
<p>I discovered a bad solder arduino GND and now brand 337V</p>
<p>The measurement between GND and I mark arduino A2 2.37 4.8 Vdc and Vac</p>
<p>My transformer is 230v domestic output 9VAC in vacuum gives me 18VAC</p>
<p>I have read the link you&#39;re saying and the links inside Robert Wall. and although the translation of google and not much of electronica, I think everything is fine and 2.37 A2 v on arduino input is correct.</p>
<p>although I have seen one of the links that the 100K resistor 62K could be better, I have 1x100K and 3x10K, is ta good way?</p>
<p>&nbsp;</p>
<p>pudirais help me telling me that V would have to be between several points to check my circuit?</p>
<p>thanks</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14185"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Error calculando voltaje(Solucionado)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 08/08/2013 - 12:46.</div>
    <div class="content">
     <p>In this circuit diagram here <a href="https://learn.openenergymonitor.org/?redirect=measuring-voltage-with-an-acac-power-adapter">http://openenergymonitor.org/emon/buildingblocks/measuring-voltage-with-...</a></p>
<p>R3 = R4 = 10 k&nbsp; -&nbsp; 470 k</p>
<p>R1 &asymp; 10 k</p>
<p>R2 &asymp; ((V_transformador_sa&iacute;da_sem_carga&nbsp; / 1.5) - 1)&nbsp; x&nbsp; 10 k</p>
<p>If R2 is too large, make R1 smaller.&nbsp; Some people say make R3 &amp; R4 smaller because smaller resistors generate less thermal noise, but that is no help because C1 removes the noise.</p>
<p>The resistors you have at R3 &amp; R4 are good.</p>
<p>When you measure a.c. voltage across R1, you should read &asymp; 1.5 V and never more than 1.75 V.</p>
<p>When you measure d.c. voltage you should read &asymp; 2.5 V&nbsp; at all places except the 5 V supply.&nbsp; It is possible your meter will not measure d.c. correctly when a.c. is also on that place. If you have 2.5 V d.c. across C1, all is probably correct.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14225"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4151.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mirasu&#039;s picture" title="mirasu&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Error calculando voltaje(Solucionado)</h3>

    <div class="submitted">Submitted by <a href="../user/4151.html" title="View user profile.">mirasu</a> on Fri, 09/08/2013 - 19:00.</div>
    <div class="content">
     <p>Hola&nbsp;Robert Wall</p>
<p>En la salida del transformador en vacio me da&nbsp;14,5 a 14,6V ac. No 18V Como dije mas arriba (perdon)&nbsp;</p>
<p>he medido&nbsp;el vooltaje en R1 y me marca&nbsp;0,9V ac.</p>
<p>asi si no me equivoco&nbsp;segun la formula que me dices el valor de es&nbsp;R2&nbsp;=&nbsp;87K, es correcto?</p>
<p>Asi cambio R2&nbsp;a 87K o me recomiendas otro valor?</p>
<p>&nbsp;</p>
<p>Gracias</p>
<p>&nbsp;</p>
<p>Hi Robert Wall</p>
<p>In the vacuum transformer output gives me 14.5 to 14.6 V ac. No more 18V As I said above (sorry)</p>
<p>I measured the vooltaje in R1 and 0.9 V ac brand me.</p>
<p>so if I&#39;m not mistaken according to the formula you tell me the value is R2 = 87K, is that correct?</p>
<p>So change R2 to 87K or other value do you recommend?</p>
<p>&nbsp;</p>
<p>thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14228"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Error calculando voltaje(Solucionado)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 09/08/2013 - 20:42.</div>
    <div class="content">
     <p>No, do not change R2. It is close enough. You can correct the voltage that you read with the voltage calibration constant.&nbsp;</p>
<p>I use the sketch from Github as my example <a href="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTx_CT123_Voltage/emonTx_CT123_Voltage.ino" title="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTx_CT123_Voltage/emonTx_CT123_Voltage.ino">https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTx_C...</a></p>
<p>Change:</p>
<p>ct1.voltageTX(<strong>228.268</strong>, 1.7);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; // ct.voltageTX(calibration, phase_shift) - make sure to select correct<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; calibration for AC-AC adapter&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../modules/emontx/firmware/calibration.html" title="http://openenergymonitor.org/emon/modules/emontx/firmware/calibration">http://openenergymonitor.org/emon/modules/emontx/firmware/calibration</a>. Default is set for Ideal Power voltage adapter.</p>
<p>If your supply is 230 V when you measured 0.9 V across R1 then 228.268 changes to 255 approximately. But I think 0.9 V is not correct: if R1 = 10 k &amp; R2 = 100 k,&nbsp; the voltage should be 1.3 V and the number should be 175 approximately.</p>
<p>You measure your supply, and you change the number so that the Arduino Serial Monitor reads the same voltage as your meter.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14236"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3980.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="jan&#039;s picture" title="jan&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Error calculando voltaje(Solucionado)</h3>

    <div class="submitted">Submitted by <a href="../user/3980.html" title="View user profile.">jan</a> on Sat, 10/08/2013 - 08:31.</div>
    <div class="content">
     <p>Hola,</p>
<p>yo tambien tengo en casa suministro trifasico a 220V, que me daria 125 entre fase i neutro, pero tomo los 220 entre fases.</p>
<p>Tengo en funcionamiento un medidor de OpenEnergyMonitor con 3 pinzas i un transformador para el voltaje, todo en la misma fase, y funcionando correctamente.</p>
<p>Al principio tambien me daba un valor de tension medido superior, pero tal como dice Robert, debes hacer un ensayo para determinar el valor del coeficiente de calibracion de tu sistema en concreto, que puede diferir ligerament del que viene en el sketch debido a diferencias de construccion de los distintos componentes del medidor (transformador, resistencias). Es un proceso de ensayo-error (alguna regla de tres ayuda) hasta que el valor medido con un voltimetro coincida con el valor leido en el Serial Monitor.</p>
<p>Idem con los coeficientes de calibracion de corriente. Yo use una estufa de ba&ntilde;o y un amperimetro, y busque el coeficiente para cada una de las pinzas (las tengo marcadas con 1,2 y 3, y una vez calibradas ya no las voy a intercanviar).</p>
<p>De los valores a medir en las patillas de las resistencias no tengo ni idea.</p>
<p>Espero te sirva de ayuda.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14239"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Error calculando voltaje(Solucionado)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 10/08/2013 - 09:57.</div>
    <div class="content">
     <p>Yes, jan is correct.</p>
<p>The values you calculate will be wrong because of the tolerances in the components. In the worst case the error might be as large as 15%. &nbsp; Hopefully, there will be a page in &quot;Building Blocks&quot; soon to explain the errors in the emonTx.</p>
<p>Your multimeter will almost certainly be better than 15%, therefore changing the value of the calibration coefficient to make the emonTx read the same as your meter will give you the best accuracy.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14266"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4151.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mirasu&#039;s picture" title="mirasu&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Error calculando voltaje(Solucionado)</h3>

    <div class="submitted">Submitted by <a href="../user/4151.html" title="View user profile.">mirasu</a> on Sun, 11/08/2013 - 21:02.</div>
    <div class="content">
     <p>Muchas gracias&nbsp;Jan y&nbsp;Robert Wall Ya&nbsp;he conseguido&nbsp;calibrar el voltaje, con la corriente&nbsp;hare como decis y seguro que no tendre problema.</p>
<p>Gracias de nuevo!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2658"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-jchAqTc6xDrHHC7XABmF7hTNC6dbnplaNtdcG-QrKJI" value="form-jchAqTc6xDrHHC7XABmF7hTNC6dbnplaNtdcG-QrKJI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
