<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5389 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:05:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>EmonTx not in sync error with a twist (SOLVED) | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">EmonTx not in sync error with a twist (SOLVED)</h3>
        <span class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Mon, 07/07/2014 - 20:19</span>
        <div class="content"><p>Hi. just built he EmonTx2 and having the following problem which I dont understand:</p>
<p>FTDI&nbsp;plugged in doesn&#39;t seem to power the EmonTx, and any uploading results in a not in sync error</p>
<p>FTDI blue light does come on and driver registers for FTDI fine.&nbsp;</p>
<p>Same FTDI plugged into NanodeRF does get the Nanode&#39;s&nbsp;red light to flash for a bit</p>
<p>EmonTx&nbsp;plugged in via USB port registers 3.3V and around 5V&nbsp;all around the board except around the RF module</p>
<p>If I plug both in, the board powers up, but I still get the not in sync error on uploading a sketch</p>
<p>I can&#39;t see any short circuits on the board but can post pics if that helps?</p>
<p>does that make any sense.&nbsp;</p>
<p>grateful for any advice.&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5443.html" class="topic-previous" title="Go to previous forum topic">‹ NanodeRF serial comms sensitivities</a>
              <a href="5396.html" class="topic-next" title="Go to next forum topic">Arduino build  ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22373"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 07/07/2014 - 22:29.</div>
    <div class="content">
     <p>Points to check:</p>
<p>1. You have the programmer the right way round on the FTDI header. GND is nearest the USB socket.<br />
	2. The 10 k connected to pin 1 of the processor (RESET) is not shorting to the ground plane.<br />
	3. You have 5 V on pin 3 of the FTDI when the programmer is connected.<br />
	4. Did you get the programmer from the shop? There are two sorts, I&#39;m not sure of the difference, so can&#39;t help any more there.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22375"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Mon, 07/07/2014 - 22:59.</div>
    <div class="content">
     <p>Thanks for this</p>
<p>I did some resoldering and managed to get power via the FTDI. I successfully used the FTDI to upload a Sketch to the NanodeRF as well, so the FTDI must be working.</p>
<p>But the &#39;not in sync&#39; error remains on the EmonTx:</p>
<p>1. You have the programmer the right way round on the FTDI header. GND is nearest the USB socket. - YES<br />
	2. The 10 k connected to pin 1 of the processor (RESET) is not shorting to the ground plane. - NO, READS 3.3v and 3.27V&nbsp;<br />
	3. You have 5 V on pin 3 of the FTDI when the programmer is connected. - YES 5.17V<br />
	4. Did you get the programmer from the shop? There are two sorts, I&#39;m not sure of the difference, so can&#39;t help any more there. - YES, from the shop</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22377"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 07/07/2014 - 23:19.</div>
    <div class="content">
     <p>This isn&#39;t making sense at the moment. Obviously correct: Your programmer, drivers, USB lead, power supplies on your emonTx.</p>
<p>If you put the processor from the emonTx into the Nanode, can you program it there?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22378"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Tue, 08/07/2014 - 07:00.</div>
    <div class="content">
     <p>The Nanode processor looks soldered on.&nbsp;</p>
<p>I&#39;m ordering a Funduino where I can then hopefully swap out the processor and check if this one is working.&nbsp;</p>
<p>I wonder whether the FTDI&nbsp;interface pins are long enough in my Emontx</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22384"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 08/07/2014 - 10:01.</div>
    <div class="content">
     <p><em>I wonder whether the FTDI interface pins are long enough in my Emontx</em></p>
<p>If you can&#39;t feel the contact springs making, it&#39;s easily verified with a continuity test! Did you solder the header in the wrong way round (short side should go through the PCB).</p>
<p>If it does prove to be the processor, it might be that is is missing its bootloader. In that case, an email to the shop should solve the problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22391"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Tue, 08/07/2014 - 16:00.</div>
    <div class="content">
     <p>Thanks</p>
<p>Please advise what you mean by a continuity test? Short side of FTDI definitely goes through PCB, and the fact that power is registering means that at least the power pins are reaching. But some of the other pins are a couple of mm lower. How long do the pins need to be to make contact with the FTDI?</p>
<p>When you say drop an email to the shop on the processor regarding the bootloader. What does that mean in practice? Can I not install the bootloader using the&nbsp;Arduini&nbsp;IDE?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22406"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Tue, 08/07/2014 - 22:31.</div>
    <div class="content">
     <p><em>Can I not install the bootloader using the Arduini IDE?</em></p>
<p>You&#39;ll need an ISP and an ISP header on the device where you plan installing the bootloader (those empty 6 holes at the bottom of your CPU in your second photo). &nbsp; &nbsp;You can also build an ISP out of an Arduino.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22407"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Tue, 08/07/2014 - 22:40.</div>
    <div class="content">
     <p>Thanks, I&#39;ve got an Arduino on its way in the post. &nbsp;</p>
<p>Do I need to get resistors as well?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22409"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 09/07/2014 - 21:47.</div>
    <div class="content">
     <p>I&#39;m not sure what resistors you&#39;re referring to. &nbsp;But you want to do something like this:</p>
<p><a href="http://arduino.cc/en/Tutorial/ArduinoISP" title="http://arduino.cc/en/Tutorial/ArduinoISP">http://arduino.cc/en/Tutorial/ArduinoISP</a></p>
<p>I&#39;ve not tried it myself. &nbsp;I use an AVRISP MarkII, but it should be pretty straight forward.</p>
<p><b>[EDIT]</b></p>
<p><b>CAUTION:&nbsp;</b>You need to be aware of the Vcc voltages. &nbsp;If you&#39;re programming an 3.3V AVR in-situ, then you need to use a 3.3V ISP. &nbsp;The AVRISP MarkII senses your target&#39;s&nbsp;Vcc via the 6-pin header and then uses the appropriate voltage. &nbsp;The ISP built out of an Arduino probably doesn&#39;t / can&#39;t. &nbsp;So you&#39;ll need to either move the AVR to a 5V environment before programming with that, or use a proper ISP.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22423"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Wed, 09/07/2014 - 23:42.</div>
    <div class="content">
     <p>Hi. I don&#39;t need to install the bootloader after all. The problem is not the chip:</p>
<p>I swapped the Atmel chip into an Arduino, and it works fine. I got the LED blink sketch working on it, and (after changing the LED pin number) I also got the chip blinking the LED in the EmonTX.</p>
<p>I then installed the EmonTX&nbsp;CT sketch via the Arduino and swapped the chip back into the EmonTX. It doesn&#39;t transmit anything to the NanodeRF. (both are set in the their Sketches to use 433hz&nbsp;to match their boards).</p>
<p>So clearly the chip works, the LED part of the EmonTX works, but the circuits that attach the RF module and FTDI&nbsp;have problems. Not sure how to test these.</p>
<p>NB. I resoldered so the FTDI pins on the EmonTX stick out all the same length out of the board.</p>
<p>Thanks to you all for you help - I realy appreciate this</p>
<p>Any advice on my next move?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22425"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Thu, 10/07/2014 - 01:33.</div>
    <div class="content">
     <p>You&#39;ve certainly narrowed it down a lot then. &nbsp;Robert&#39;s suggestion of a continuity test would be your best bet next. &nbsp;And I see nobody answered your query about that. &nbsp; With the power off on your EmonTX, your multimeter set to continuity-test mode, &nbsp;and a copy of the schematic by your side, you want to buzz out the circuits that appear not to be &nbsp;working. &nbsp;So for example, confirm that each of the FTDI pins run all the way to where they&#39;re supposed to run. &nbsp;I don&#39;t have the schematic handy, but presumably most of them end up at the AVR pins.</p>
<p>Now that you have an image that at least flashes the LED on the EmonTx, you should also be able to determine if your IDE is able to reset the AVR by observing the LED when you attempt do download a new image. &nbsp;It&#39;s only by &nbsp;yanking on /RESET (via RTS or DTR) that the IDE is then able to talk to the bootloader and send it a new system image. &nbsp;If your blinking LED sketch remains undisturbed during a failed system image download, that would suggest that reset path is not working. &nbsp;You might want to change it so that it&#39;s blinking the LED fairly rapidly, so you can notice any disturbances to the beat. &nbsp;If the reset path is working, but the data path isn&#39;t, the bootloader will wait for about a second, see that it&#39;s not getting a new image and jump back to the current LED flashing image, so you&#39;re looking for a 1 second interruption to the LED flashing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22429"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Thu, 10/07/2014 - 12:10.</div>
    <div class="content">
     <p>Oh dear!</p>
<p>The LED is not flashing this morning on the EmonTX.&nbsp;</p>
<p>The chip however is still working fine as I have checked a number of times by swapping it into the Arduino</p>
<p>Checking voltage readings on the chip when in the EmonTX:</p>
<p>PIN 15 (for the LED pin) reads zero - but should be oscillating&nbsp;between high and low</p>
<p>PIN 1 (Reset) reads 2.89V</p>
<p>PIN 7 (VCC) reads 3.3V</p>
<p>PIN 20 (AVCC) reads 2.59V</p>
<p>PIN 26 (ADC3) reads 1.4V</p>
<p>PIN 24 (ADC1) reads 1.75V</p>
<p>PIN 9 and 10 (TOSC) read low V around 0.4-0.6V</p>
<p>PIN 6 (XCK) reads 3.95V</p>
<p>Does any of this make sense? In the Arduino&nbsp;PIN 15 as expected registers HIGH and LOW V as per sketch.</p>
<p>I also tried the continuity test on the reset path from the FTDI, and circuit is fine on both sides of capacitor C1, but could&nbsp;C1 be bust?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22437"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 10/07/2014 - 16:15.</div>
    <div class="content">
     <p>If the LED was flashing, and now it isn&#39;t, and you have touched nothing else, there has to be a bad joint or a component that is physically strained and/or damaged.</p>
<p>Pin 15 not switching means the sketch is not running, therefore either it&#39;s perpetually reset, the clock oscillator isn&#39;t running or, if you&#39;ve moved away from the LED blink sketch and have a sketch that drives the RFM12B module, it&#39;s sticking while trying to initialise that. Pin 1 high rules out the perpetual reset.</p>
<p>Pin 20 not reading the same as Pin 7 is a worry - it&#39;s only a short track away so that needs checking. They read the same (to 2 decimal places - 3.27 V) on mine.</p>
<p>Are the USB connector pins soldered properly - it&#39;s hard to tell from the picture (but irrelevant if you&#39;re powering via the FTDI).<br />
	C5 also appears to not have enough solder on one leg.</p>
<p>Pins 24 &amp; 26 should be 1.65 V - but that isn&#39;t this problem, those not being exactly mid-voltage between 0 V and Vcc will restrict the analogue input range, but not stop it working.</p>
<p>You won&#39;t read a sensible voltage on the oscillator pins (9 &amp; 10) - mine read about the same as yours on a normal multimeter.</p>
<p>C1 only comes into play when programming - if the reset line is high, it&#39;s not going to stop the sketch from working. But if it is broken/lost capacitance, the processor won&#39;t program.</p>
<p>&nbsp;</p>
<p>So sorry, but apart from the AVcc voltage, there&#39;s nothing abnormal there.</p>
<p>There appear to be some solder splashes. You could clean the board (solder side) by scrubbing the excess flux off with a hard brush (e.g. a discarded toothbrush) dipped in white spirit, afterwards wash the board in warm soapy water and allow to dry thoroughly (and by thoroughly I mean underneath all the components and inside the connectors, including beneath the RF module). Doing that might make it easier for you to see any soldering faults.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Thu, 10/07/2014 - 21:41.</div>
    <div class="content">
     <p>Thanks again Robert</p>
<p>I&#39;ve cleaned the board as you suggested. Still waiting for it to dry completely, but from what I can see there aren&#39;t any solder short circuits. I had previously resoldered the FTDI pins and had already patched up C5.</p>
<p>There is some minor heat damage to the PCB around a couple of the FTDI pins now and also around between the aerial and adjacent pins of the RF module. Looking closely at these though I can&#39;t see any shorts or splatter. I&#39;m thinking that I should probably remove the RF module completely once the board is dry. However I haven&#39;t&nbsp;used any sketches beyond the modified blink sketch for testing, so RF shouldn&#39;t have been engaged.&nbsp;</p>
<p>I keep wondering whether the most suspicious component here is the Crystal or a capacitor. (But I note that C1 is not relevant if the sketch is already on the chip). Are there any other capacitors that I should worry about at this stage?</p>
<p>I&#39;m wondering whether desoldering&nbsp;some&nbsp;components now would help to narrow down the problem. Which ones should come off first? Also, does the&nbsp;soldering of the DIL socket in my pic look dodgy?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22452"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 10/07/2014 - 22:52.</div>
    <div class="content">
     <p>At this stage, until you have proved a faulty component, I would suggest that desoldering anything should be kept as the means of last resort. I have to recommend that you do <strong>NOT</strong> try to remove the RFM12B. Unless you have access to the proper desoldering station, it&#39;s very likely that you will damage either the RF module or the PCB or both in the attempt. If you you are not driving the RF module, I think it can be discounted.</p>
<p>I didn&#39;t notice any other suspect soldering - I&#39;ve seen a lot worse that has been OK, but it&#39;s much easier when you are looking at it for real than in a photo.</p>
<p>If you&#39;re still using the blink sketch, then provided all the soldering is good, I have to think it&#39;s got to be the crystal or the capacitors around it. I think it&#39;s possible to use an internal oscillator to drive the processor, but I&#39;d need to look it up - unless of course someone else wants to chip in here?</p>
<p>I think you let it dry thoroughly, then check the AVcc voltage again. If that&#39;s still wrong, you need to find out why (with the processor out).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22453"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Fri, 11/07/2014 - 00:00.</div>
    <div class="content">
     <p><em>If you&#39;re still using the blink sketch, then provided all the soldering is good, I have to think it&#39;s got to be the crystal or the capacitors around it.</em></p>
<p>I&#39;d concur with that. &nbsp;If you give these AVRs a good Vcc and a good crystal, they can&#39;t help but run.</p>
<p><em>I think it&#39;s possible to use an internal oscillator to drive the processor, but I&#39;d need to look it up - unless of course someone else wants to chip in here?</em></p>
<p>Yes, the CKSEL&nbsp;bits in the Fuse Low Byte lets you control the clock source, &nbsp;and it also lets you control how big a swing you put into the crystal. &nbsp;If you set it to Full Swing you can generally see it on a scope. &nbsp; But you&#39;ll need an ISP to change those fuse bits, and if you do decide to go that way, recall my Vcc caution above. &nbsp;Using the internal oscillator has it&#39;s own issues: you&#39;d need to calibrate it if you want accurate timing (and you do want accurate timing to drive the UARTs at the correct baud rate). &nbsp;So going that route might help narrow down the problem, but probably isn&#39;t where you want to end up. &nbsp; And given it involves ISPs etc. it may be more trouble than it&#39;s worth.</p>
<p><em>then check the AVcc voltage again. If that&#39;s still wrong, you need to find out why (with the processor out).</em></p>
<p>Yes, that&#39;s very odd. &nbsp;It would be interesting to see if AVCC is still low when the AVR is removed, i.e. is it the AVR that&#39;s dragging it low? &nbsp;Is anything getting warm?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22456"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Fri, 11/07/2014 - 08:37.</div>
    <div class="content">
     <p>Thanks both</p>
<p>The board is dry and I&#39;ve rechecked the voltages with the chip back in and the AVCC is still 2.something while the VCC is 3.2x.&nbsp;</p>
<p>I also checked the the LED with the chip out, by shorting one of the 3.3V keyholes to the pin 15 on the DIL socket. LED lights up fine.&nbsp;</p>
<p>I&#39;ll measure the Vs with the chip out and see what readings I get on the empty DIL socket:</p>
<p>(PIN numbers relate to Atmega328 mapping with PIN 1 = reset)</p>
<p>PINs 1-5 = 0V</p>
<p>PIN 6 = 5.14V</p>
<p>PIN 7&nbsp;= 3.30V</p>
<p>PINs&nbsp;8-14 = 0V</p>
<p>PINs 15 - 22 = 0V</p>
<p>PIN 23 = 1.34V (takes a few secs to settle)</p>
<p>PIN 24 = 1.35V</p>
<p>PIN 25 = 0</p>
<p>PIN 26 = 1.35V</p>
<p>PINs 27-28 = 0</p>
<p>So, I wonder why Pin 20&nbsp;AVCC is reading 0V!!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22457"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Fri, 11/07/2014 - 08:40.</div>
    <div class="content">
     <p>So the schematic shows Pin 20 (AVCC) and Pin 7 (VCC) are connected, and should both read 3.3V. &nbsp;It looks to me like your Pin20 is for some reason not connected. &nbsp;With the power off you should be able to buzz out Pin7, Pin20 and VCC (picked up somewhere else on the board). They should all be connected.</p>
<p>Pin6 looks a bit high for a part that is being run 3.3V. &nbsp;The schematic shows it runs via a 4.7K R to either VCC (3.3V) or PWR (5V) depending on the setting of SJ2. &nbsp;It looks like there are a couple of jumpers that select VCC or PWR (SJ1 and SJ2). &nbsp;I&#39;ll hand over to someone more familiar with the schematic than I am to explain what that&#39;s all about.</p>
<p><strong>[EDIT]</strong></p>
<p>I&#39;m not sure why your Pin1 (/RESET) is 0V either. &nbsp;That suggests something (presumably the FTDI programmer?) is holding the AVR in reset. &nbsp; With the power off, you might want to check the path from Pin1 thru the 10K pull-up to Vcc also.</p>
<p>I&#39;m almost starting to wonder if all your Vcc are actually at Vcc.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22458"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 11/07/2014 - 08:48.</div>
    <div class="content">
     <p>Pin 20 should definietly be the same voltage as p7 as they are connected by track under the AVR (see shop pic attached - the track just clips the bottom of the screenprinted &quot;8&quot;)</p>
<p>Pin 6 does look high but is probably the result of 5v being picked up via the 4.7K res. There was an error on the first PCB&#39;s and a permanent short to 5v is present on the temp senser jumper pads, this was never changed as it panned out the temp sensor worked better at 5v even on a 3.3v based circuit.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22463"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Fri, 11/07/2014 - 16:58.</div>
    <div class="content">
     <p>Great work guys, and thanks for your help.</p>
<p>I resoldered some of the DIL pins (created a bit of a mess on PIN 20 which makes it now stick out above).</p>
<p>Now - my modified blink sketch is working, and the FTDI is working, and allowing me to upload sketch.</p>
<p>Next step now is to check if the RFM12b module is working. However, given the progress, I&#39;m marking this thread as solved.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22464"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Fri, 11/07/2014 - 17:52.</div>
    <div class="content">
     <p>The RFM12b module is not working: the EmonTX&nbsp;Sketches don&#39;t work.</p>
<p>To test further, I set up a Sketch to initialise the module, as per the EmontTX transmit test example Sketch. I added in the lines required to blink the LED. If I comment out the rfm calls, then the blinks work.</p>
<p>I guess therefore that the RFM12b needs to be resoldered as well. Are there any voltages it should read that I should check for first?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22465"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 11/07/2014 - 23:03.</div>
    <div class="content">
     <p>Your photo is not quite pin-sharp, but it looks as if the middle pad on the left-hand side of the RFM12B is a bit dodgy. I can&#39;t really tell for any of the others.</p>
<p>I did note that the module is twisted slightly, before you touch anything make certain that it is not skewed so far so as to make one of the pads touch the adjacent pad as well. Whatever you do, remember my warning above about unsoldering the module.</p>
<p>Robin Emley&#39;s technique for the RFM12B is to sit the module on a pad of double-sided tape to position it, then solder. (Obviously, that&#39;s too late for you.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22491"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Sat, 12/07/2014 - 17:55.</div>
    <div class="content">
     <p>Okay. Had a go at resoldering the RFM12b.&nbsp;</p>
<p>Terrible result &nbsp;burned three slots - see the pic attached.&nbsp;</p>
<p>To my total surprise, it works and the NanodeRF is receiving data from this EmonTx!</p>
<p>thanks again Robert, Paul and &#39;dBc&#39;</p>
<p>&nbsp;</p>
<p>Given the resoldering damage, I don&#39;t know if thus is going to work for long, and I still need to check the CT sensor inputs but very glad for now for the advice and persisting with this.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22499"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 12/07/2014 - 23:34.</div>
    <div class="content">
     <p>In all honesty, I think you need some soldering practice before you next embark on something of this complexity and size, and I wonder whether the tools you are using are up to the job. The best advice I can give you is buy a mixed bag of cheap components and some stripboard, look at one of the many soldering guides and practice. Then when it comes to small stuff like the RFM12B and smaller still like the emonTx, get a big stand-mounted magnifier as well. You also need to make sure your soldering iron has the correct sized bit and is at the correct temperature. Generally, you&#39;ll do more damage if it is not hot enough (yes!) because you&#39;ll apply the heat for too long. You should be able to solder a single joint on stripboard in about 1 s. The usual reason tracks and pads lift is because the heat was on for too long.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22508"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ruchir&#039;s picture" title="Ruchir&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/6582.html" title="View user profile.">Ruchir</a> on Sun, 13/07/2014 - 07:01.</div>
    <div class="content">
     <blockquote><p><i>In all honesty, I think you need some soldering practice before you next embark on something of this complexity and size</i></p>
</blockquote>
<p>LOL. Yes, this was my first electronics soldering project. I also wanted to go lead free.</p>
<p>My next project will be to burn a few PCBs. ;)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22511"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTx not in sync error with a twist (SOLVED)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 13/07/2014 - 12:05.</div>
    <div class="content">
     <p>You seem to have got away with it, but I&#39;m afraid you came very close to making an expensive mistake. Get a handful of cheap components, some stripboard and practice, before you try your next plated-through double-sided PCB. Seriously.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5389"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Q1DltcAxVeD1rvddekqIzcWK4flYB9SRVHST4UmJ4j8" value="form-Q1DltcAxVeD1rvddekqIzcWK4flYB9SRVHST4UmJ4j8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
