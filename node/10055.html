<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10055 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:44:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>First open energy monitor project (PART 2) | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">First open energy monitor project (PART 2)</h3>
        <span class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 23/01/2015 - 12:09</span>
        <div class="content"><p>Ok, Firstly the &quot;pre built image&quot; is built on a full&nbsp;Raspbian&nbsp;OS and is then put into &quot;read-only&quot; mode to protect the SD card (and your system settings) you can over rule the &quot;read-only&quot; mode at any time using the&nbsp;&quot;&nbsp;rpi-rw&nbsp;&quot; command.</p>
<p>When you first boot up the&nbsp;&quot;pre built image&quot; it is in&nbsp;&quot;read-only&quot; mode by default, therefore the &quot;raspi-config&quot; set-up menu (for keyboard, locale,&nbsp;timezone&nbsp;etc) will not work because it cannot save the new settings. If you exit the menu and&nbsp;once the Pi has booted up, type</p>
<blockquote><p><strong>rpi-rw<br />
sudo&nbsp;raspi-config&nbsp;</strong></p>
</blockquote>
<p>this will allow you to use the menu&nbsp;(but NOT&nbsp;the expanding file-system option)&nbsp;and the settings will be saved.</p>
<p>The &quot;wiki&quot; you linked to is more about the design and technical aspects of the&nbsp;RFM2Pi&nbsp;such as firmware uploads and debugging. It doesn&#39;t tell you about the basic install steps which involve changing /boot/cmdline.txt and /etc/inittab&nbsp;to release the serial port from being used by the serial console (default on&nbsp;raspbian)</p>
<p>Firstly edit the&nbsp;inittab&nbsp;file&nbsp;by adding a &#39;#&#39; to the beginning of the last line, so it reads;</p>
<p><strong># T0:23:respawn:/sbin/getty&nbsp;-L&nbsp;ttyAMA0&nbsp;115200&nbsp;vt100</strong></p>
<p>​...and edit the cmdline.txt file by&nbsp;changing the single line to;</p>
<p><strong>dwc_otg.lpm_enable=0 console=tty1&nbsp;root=/dev/mmcblk0p2&nbsp;rootfstype=ext4&nbsp;elevator=deadline&nbsp;rootwait</strong></p>
<p>This&nbsp;&quot;conflict&quot;&nbsp;is probably the reason the Pi is not happy to see the&nbsp;RFM2Pi&nbsp;module plugged in, but it could also be due to the limited amount of spare space in the&nbsp;Raspbian&nbsp;image, since you have installed&nbsp;arduino&nbsp;the space must be very low. How much disk&nbsp;space&nbsp;is available&nbsp;if you run &quot;&nbsp;df -h&nbsp;&quot;&nbsp;?</p>
<p>Paul</p>
<p>NOTE - I have been unable to post this reply to&nbsp;<a href="10039.html">http://openenergymonitor.org/emon/node/10039</a>&nbsp;so have had to try starting a new thread instaed.</p>
<p>&nbsp;</p>
<p>​</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11539.html" class="topic-previous" title="Go to previous forum topic">‹ Measure Harmonics using Emonlib</a>
              <a href="11523.html" class="topic-next" title="Go to next forum topic">power measurement with variable frequencies ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-27050"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 23/01/2015 - 16:21.</div>
    <div class="content">
     <p>I&#39;ll try this method as soon as possible. What do you say about the serial cable?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27051"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 23/01/2015 - 17:18.</div>
    <div class="content">
     <p>I have no experience with that cable, it looks like it should work ok, the pinout seems to be the same except for &quot;cts&quot; but that pin is not used on emonTx headers so should be of no consequence.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27072"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Sat, 24/01/2015 - 17:45.</div>
    <div class="content">
     <p>Raspberry works good after changing files. Disk space available is 601 M . Now what I have to do for wireless connection?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27075"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 26/01/2015 - 13:03.</div>
    <div class="content">
     <p>As I previously commented, most of the time you can just plug it on and it works.</p>
<p>If it&#39;s not working you need to give us more detail. Have you configured emonhub.conf? what&nbsp;freq&nbsp;is&nbsp;RFM2Pi?&nbsp;RFM12&nbsp;or 69? Is the&nbsp;emonTx&nbsp;connected and working ? Does the&nbsp;RFM2Pi&nbsp;led flash? Have you checked emonhub.log? or&nbsp;minicom?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27302"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Mon, 02/02/2015 - 10:00.</div>
    <div class="content">
     <p>emonhub.conf is configured . I set the read apikey. RFM12Pi v 2.6 work at 433 MHz&nbsp; group 210 baseid 15 . Is it right with the emontx pre-installed firmware? The led flashes sometimes. The file var/log/emonhub/emonhub.log is empty</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27308"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 02/02/2015 - 11:53.</div>
    <div class="content">
     <p><i>"I set the read apikey..."</i> Not the Read &amp; Write APIkey? The Read one is read-only (good for getting the time) but if you want to send data, you're writing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27311"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 02/02/2015 - 13:21.</div>
    <div class="content">
     <p>Also while you are in the conf changing the apikey, if you set loglevel&nbsp;to DEBUG you will get more info in the log.&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27312"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Tue, 03/02/2015 - 03:43.</div>
    <div class="content">
     <p>Now I wont to visualize data from emontx to raspberry. I&#39;m using the&nbsp;emoncms&nbsp;read &nbsp;apikey. Can I visualize data on&nbsp;screen&nbsp;without emoncms&nbsp;key?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27407"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Wed, 04/02/2015 - 09:03.</div>
    <div class="content">
     <p>When I start the service it appears:</p>
<p>root@raspberrypi:/home/pi# service emonhub start<br />
[....] Starting OpenEnergyMonitor emonHub: emonhubstart-stop-daemon: unable to start /usr/share/emonhub/emonhub.py (Permission denied)<br />
[ ok been started ok.</p>
<p>And when I try to to see the emonhub.log nothing appears</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27409"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 05/02/2015 - 11:52.</div>
    <div class="content">
     <p>how did you install emonhub? did you create a user &quot;emonhub&quot;? this is done automatically by the dev-emonhub&nbsp;installer script.</p>
<p>Why are you running as root user? normally as user &quot;pi&quot; you would use &quot;sudo service emonhub&nbsp;start&quot;and the service would be started to run&nbsp;in the background using user &quot;emonhub&quot;</p>
<p>I don&#39;t think &quot;root&quot; has full&nbsp;access to &quot;pi&quot; homedir, try changing back to user &quot;pi&quot; and use &quot;sudo&quot; to get the elevated permission to run daemon&nbsp;while retaining access to /home/pi.</p>
<p>Also check emonhub.py permissions</p>
<blockquote><p>ls -la&nbsp;/usr/share/emonhub/emonhub.py</p>
</blockquote>
<p>(edit - corrected typo in command)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27410"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Wed, 04/02/2015 - 10:56.</div>
    <div class="content">
     <p>Before the connection to the server, seems that there is a transmission problem between RFM12pi module, Raspberry and Emontx. The rf expansion is connected to rasperry via gpio, precisely gpio pin 1 to 10 are dedicated to radio module. So I will try to use a python script to test wireless trasmission. Only if the transmission will exist the data can be sent on emoncms server. What are the rules of each rfm pin?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27425"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 04/02/2015 - 20:59.</div>
    <div class="content">
     <p>is the green led flashing on Pi to confirm packets are being received? if so you could use minicom​</p>
<blockquote><p>sudo apt-get install minicom</p>
<p>minicom -bBAUD -D/dev/ttyAMA0​</p>
</blockquote>
<p>BAUD can be 9600, 57600 or 38400 depending on model of rfm2pi.</p>
<p>emonhub is the python script that passes the data from the rfm2pi to emoncms, checking the emonhub log can also tell you if packets are arriving at Pi but not going to emoncms.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27430"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Thu, 05/02/2015 - 09:25.</div>
    <div class="content">
     <p>I really don&#39;t know why my raspberry pi do strange things. Today the green led is always on and I didn&#39;t touch nothing else. Emontx is connected to 9V AC.</p>
<p>When minicom starts, it appears the welcome and I can use a combination [ctrl+ z] . This combination is not functioning. The resolution is more simple than it appears but it makes me crazy.</p>
<p>&quot;s command not found&quot;</p>
<p>I also tried &quot;chmod 777 &quot; on the python file with the same result when the service try to start</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27432"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 05/02/2015 - 11:53.</div>
    <div class="content">
     <p>&quot;<em>s command not found&quot;&nbsp;</em>sorry that was a typo (ls not s, corrected now), it should have been</p>
<blockquote><p><strong>l</strong>s -la&nbsp;/usr/share/emonhub/emonhub.py</p>
</blockquote>
<p>But now you have changed the permissions it won&#39;t reveal anything,</p>
<p>The LED should not be &quot;always on&quot;, if it is there is something using the serial port or a physical issue with the rfm2pi&nbsp;(which is highly unlikely)&nbsp;&nbsp;do you mean &quot;constantly flashing&quot;?&nbsp;</p>
<p>Since you do not have emonhub running it cannot configure the rfm2pi, so if there is an incorrect setting you can not see or change it, without emonhub or a serial console (eg minicom, picocom etc)</p>
<p>It may be easier to go back to using the sd card image, the reason you stopped using it&nbsp;was because you couldn&#39;t get&nbsp;raspi-config to work, now you know it can be used maybe you should try it again.</p>
<p>If you do not want to use to pre-built image you should start again with a fresh new raspian&nbsp;downloaded image on the sd card and just free up the serial port by editing 2 files&nbsp;(use&nbsp;&quot;sudo&nbsp;nano&quot; to do&nbsp;the editing)&nbsp;, /etc/inittab&nbsp;(add # to start of last line) and /boot/cmdline.txt (remove &quot;console=ttyAMA0,115200&quot;) then&nbsp;reboot and&nbsp;install emonhub using</p>
<p><strong>git clone <a href="https://github.com/emonhub/dev-emonhub.git" title="https://github.com/emonhub/dev-emonhub.git">https://github.com/emonhub/dev-emonhub.git</a> ~/dev-emonhub &amp;&amp; ~/dev-emonhub/install</strong></p>
<p>the default settings should work and you can confirm this by setting loglevel&nbsp;= debug (currently warning)&nbsp;in /etc/emonhub/emonhub.conf and then run <strong>tail -f /var/log/emonhub/emonhub.log</strong> to display the log messages as they happen. All this is done by user pi not root.</p>
<p>If you still have problems post again <u>without changing anything else</u> as it&#39;s easier to resolve when you know what has or has not been done. a log output.would help too.</p>
<p>Paul<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27451"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 06/02/2015 - 15:50.</div>
    <div class="content">
     <p>Log file result:</p>
<p>2015-02-06 15:34:43,083 INFO Opening hub...<br />
2015-02-06 15:34:43,086 INFO Logging level set to DEBUG<br />
2015-02-06 15:34:43,089 INFO Creating EmonHubEmoncmsReporter &#39;emonCMS&#39;&nbsp;<br />
2015-02-06 15:34:43,094 INFO Set up reporter &#39;emonCMS&#39; (buffer: memory | size: 1000)<br />
2015-02-06 15:34:43,099 INFO Setting emonCMS url: <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2015-02-06 15:34:43,102 WARNING Setting emonCMS apikey: invalid format<br />
2015-02-06 15:34:43,105 INFO Creating EmonHubJeeInterfacer &#39;RFM2Pi&#39;&nbsp;<br />
2015-02-06 15:34:43,110 DEBUG Opening serial port: /dev/ttyAMA0 @ 38400 bits/s<br />
2015-02-06 15:34:45,120 DEBUG Opening serial port: /dev/ttyAMA0 @ 9600 bits/s<br />
2015-02-06 15:34:47,124 ERROR Unable to create &#39;RFM2Pi&#39; interfacer: Attempting to use a port that is not open</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27453"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 06/02/2015 - 16:48.</div>
    <div class="content">
     <p>Good, you have emonhub running, I&#39;m guessing you have used the dev-emonhub installer ?</p>
<p>Did you also do the cmdline.txt and inittab edits?</p>
<p>Have you rebooted since those edits? did you &quot;powerdown&quot; or properly with <strong>sudo shutdown -r now ?</strong></p>
<p>Is the rfm2pi&nbsp;connected? is the led still &quot;always on&quot;? or does&nbsp;it flash? was it connected before you rebooted ?</p>
<p>Occasionally the first connection after&nbsp;the&nbsp;rfm2pi is powered up fails, try rebooting and rechecking the log.</p>
<p>Assuming all the above is in order and&nbsp;emonhub&nbsp;still&nbsp;isn&#39;t able to establish a connection&nbsp;with the rfm2pi, you should try manually setting the com baud speed rather than letting emonhub&nbsp;&quot;auto detect&quot; this is done by adding a <strong>com_baud = x</strong>&nbsp;line in emonhub.conf to the [[RFM2Pi]] [[[init_settings]]] section, where x = 9600, 38400 or 57600 depending on model of rfm2pi, they were all 9600 until&nbsp;autumn&nbsp;last year, then a handful were 57600 and then&nbsp;38400&nbsp;(if you are not sure try each in turn) the log will increase when it is able to communicate.</p>
<p>You could reboot&nbsp;inbetween&nbsp;attempts<span style="line-height:20.7999992370605px">&nbsp;</span><span style="line-height:20.7999992370605px">to be sure&nbsp;</span><span style="line-height:1.6">the serial buffers get cleared&nbsp;just until you establish a </span>connection.</p>
<p>​Some info AS&nbsp;WELL as a log would be useful if you still have problems</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27455"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 06/02/2015 - 17:16.</div>
    <div class="content">
     <p>I have used dev emonhub installer as you said via git. I also edited cmdline.txt and inittab. I rebooted the system. LED is still green.&nbsp;Module was connected before rebooted. Log file reports the same results.</p>
<p>Do I add the com baud in emonhub.conf here: ?</p>
<p># This interfacer manages the RFM2Pi module<br />
[[RFM2Pi]]<br />
&nbsp; &nbsp; Type = EmonHubJeeInterfacer<br />
&nbsp; &nbsp; [[[init_settings]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp; com_port = /dev/ttyAMA0<br />
&nbsp; &nbsp; [[[runtimesettings]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp; group = 210<br />
&nbsp; &nbsp; &nbsp; &nbsp; frequency = 433<br />
&nbsp; &nbsp; &nbsp; &nbsp; baseid = 15</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27456"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 06/02/2015 - 17:53.</div>
    <div class="content">
     <p>Yes you can add it like this (comment optional)</p>
<p># This interfacer manages the RFM2Pi module<br />
[[RFM2Pi]]<br />
&nbsp; &nbsp; Type = EmonHubJeeInterfacer<br />
&nbsp; &nbsp; [[[init_settings]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp; com_port = /dev/ttyAMA0<br />
&nbsp; &nbsp; &nbsp; &nbsp; <strong>com_baud&nbsp;= 9600</strong><br />
&nbsp; &nbsp; &nbsp; &nbsp; <strong># common com_baud options are 9600 39400 57600</strong><br />
&nbsp; &nbsp; [[[runtimesettings]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp; group = 210<br />
&nbsp; &nbsp; &nbsp; &nbsp; frequency = 433<br />
&nbsp; &nbsp; &nbsp; &nbsp; baseid = 15</p>
<p>However if the led is permanently lit it&#39;s unlikely (but not impossible) to be the baud setting, I would still try it but it maybe&nbsp;an issue with the firmware&nbsp;from the attempts to use avrdude&nbsp;while the serial console was active.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27467"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Sat, 07/02/2015 - 10:08.</div>
    <div class="content">
     <p>I used all the baud rate with this log report:</p>
<p>tail -f /var/log/emonhub/emonhub.log<br />
2015-02-07 11:02:07,344 INFO Set up reporter &#39;emonCMS&#39; (buffer: memory | size: 1000)<br />
2015-02-07 11:02:07,349 INFO Setting emonCMS url: <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2015-02-07 11:02:07,351 WARNING Setting emonCMS apikey: invalid format<br />
2015-02-07 11:02:07,361 INFO Creating EmonHubJeeInterfacer &#39;RFM2Pi&#39;&nbsp;<br />
2015-02-07 11:02:07,366 DEBUG Opening serial port: /dev/ttyAMA0 @ 38400 bits/s<br />
2015-02-07 11:02:09,371 WARNING Device communication error - check settings<br />
2015-02-07 11:02:09,374 INFO Setting RFM2Pi frequency: 433 (4b)<br />
2015-02-07 11:02:10,378 INFO Setting RFM2Pi group: 210 (210g)<br />
2015-02-07 11:02:11,382 INFO Setting RFM2Pi quiet: 1 (1q)<br />
2015-02-07 11:02:12,385 INFO Setting RFM2Pi baseid: 15 (15i)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27468"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 07/02/2015 - 11:12.</div>
    <div class="content">
     <p>Were the results EXACTLY the same for each baud?&nbsp;</p>
<p>Did you reboot (<u>without</u> removing power) in between attempts?</p>
<p>Did the LED still remain on throughout all three tests?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27471"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Sat, 07/02/2015 - 11:33.</div>
    <div class="content">
     <p>Yes, the results are the same. I rebooted &nbsp;without removing power. The rfm led remain.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27474"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 07/02/2015 - 12:11.</div>
    <div class="content">
     <p>It suggests the issue is on-board the RFM2Pi, you will need to set up avrdude to proceed</p>
<blockquote><p>sudo apt-get install arduino-core<br />
git clone <a href="https://github.com/pb66/avrdude-rpi.git" title="https://github.com/pb66/avrdude-rpi.git">https://github.com/pb66/avrdude-rpi.git</a> ~/avrdude-rpi&nbsp;<br />
sudo&nbsp;mv /usr/bin/avrdude&nbsp;/usr/bin/avrdude-original&nbsp;<br />
sudo&nbsp;ln ~/avrdude-rpi/autoreset&nbsp;/usr/bin&nbsp;<br />
sudo&nbsp;ln ~/avrdude-rpi/avrdude-autoreset&nbsp;/usr/bin&nbsp;<br />
sudo&nbsp;ln -s /usr/bin/avrdude-autoreset&nbsp;/usr/bin/avrdude​</p>
</blockquote>
<p>once that&#39;s installed try&nbsp;<span style="line-height:20.7999992370605px">stopping&nbsp;</span>emonhub<span style="line-height:20.7999992370605px">&nbsp;and&nbsp;</span><span style="line-height:1.6">getting a response from the </span>RFM2Pi<span style="line-height:1.6">&nbsp;using</span></p>
<blockquote><p>sudo service emonhub stop<br />
avrdude&nbsp;-v -c&nbsp;arduino&nbsp;-p&nbsp;ATMEGA328P&nbsp;-P /dev/ttyAMA0&nbsp;-b 38400</p>
</blockquote>
<p>The response from this should tell us a bit more about it&#39;s current state, if it fails first time try the last line a second time.&nbsp;</p>
<p>Just to confirm 100% the RFM2Pi is definately on the end 10 pins of the Pi&#39;s gpio connector and orientated like this picture<a href="../../../wiki.openenergymonitor.org/index.php/File_RFM12PiV2_Pi_small.html?title=File:RFM12PiV2_Pi_small.png">&nbsp;http://wiki.openenergymonitor.org/index.php?title=File:RFM12PiV2_Pi_small.png</a>&nbsp;correct?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27477"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Sat, 07/02/2015 - 13:18.</div>
    <div class="content">
     <p>Module is placed as figured</p>
<p>This is the response of the last command:</p>
<p>&nbsp;</p>
<p>pi@raspberrypi ~ $ avrdude -v -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 38400</p>
<p>avrdude-original: Version 5.11.1, compiled on May 23 2012 at 11:08:25<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Copyright (c) 2000-2005 Brian Dean, <a href="http://www.bdmicro.com/" title="http://www.bdmicro.com/">http://www.bdmicro.com/</a><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Copyright (c) 2007-2009 Joerg Wunsch</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System wide configuration file is &quot;/etc/avrdude.conf&quot;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; User configuration file is &quot;/root/.avrduderc&quot;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; User configuration file does not exist or is not a regular file, skipping</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Using Port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: /dev/ttyAMA0<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Using Programmer &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: arduino<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Overriding Baud Rate &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 38400<br />
avrdude-original: Using autoreset DTR on GPIO 4<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AVR Part &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: ATMEGA328P<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Chip Erase delay &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 9000 us<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PAGEL &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : PD7<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BS2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : PC2<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RESET disposition &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : dedicated<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RETRY pulse &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : SCK<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; serial program mode &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : yes<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parallel program mode &nbsp; &nbsp; &nbsp; &nbsp; : yes<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Timeout &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 200<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StabDelay &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 100<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CmdexeDelay &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 25<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SyncLoops &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 32<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ByteDelay &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PollIndex &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 3<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PollValue &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0x53<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Memory Detail &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Block Poll &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Page &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Polled<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Memory Type Mode Delay Size &nbsp;Indx Paged &nbsp;Size &nbsp; Size #Pages MinW &nbsp;MaxW &nbsp; ReadBack<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ----------- ---- ----- ----- ---- ------ ------ ---- ------ ----- ----- ---------<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eeprom &nbsp; &nbsp; &nbsp; &nbsp;65 &nbsp; &nbsp;20 &nbsp; &nbsp; 4 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; 1024 &nbsp; &nbsp;4 &nbsp; &nbsp; &nbsp;0 &nbsp;3600 &nbsp;3600 0xff 0xff<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flash &nbsp; &nbsp; &nbsp; &nbsp; 65 &nbsp; &nbsp; 6 &nbsp; 128 &nbsp; &nbsp;0 yes &nbsp; &nbsp; 32768 &nbsp;128 &nbsp; &nbsp;256 &nbsp;4500 &nbsp;4500 0xff 0xff<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lfuse &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp;4500 &nbsp;4500 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hfuse &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp;4500 &nbsp;4500 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; efuse &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp;4500 &nbsp;4500 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp;4500 &nbsp;4500 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; calibration &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 0x00 0x00<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; signature &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 &nbsp; &nbsp;0 no &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 0x00 0x00</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Programmer Type : Arduino<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Description &nbsp; &nbsp; : Arduino<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Hardware Version: 3<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Firmware Version: 4.4<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Vtarget &nbsp; &nbsp; &nbsp; &nbsp; : 0.3 V<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Varef &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0.3 V<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Oscillator &nbsp; &nbsp; &nbsp;: 28.800 kHz<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SCK period &nbsp; &nbsp; &nbsp;: 3.3 us</p>
<p>avrdude-original: AVR device initialized and ready to accept instructions</p>
<p>Reading | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 0% 0.0Reading | ################################################## | 100% 0.01s</p>
<p>avrdude-original: Device signature = 0x1e950f<br />
avrdude-original: safemode: lfuse reads as 0<br />
avrdude-original: safemode: hfuse reads as 0<br />
avrdude-original: safemode: efuse reads as 0</p>
<p>avrdude-original: safemode: lfuse reads as 0<br />
avrdude-original: safemode: hfuse reads as 0<br />
avrdude-original: safemode: efuse reads as 0<br />
avrdude-original: safemode: Fuses OK</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27507"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Sun, 08/02/2015 - 08:35.</div>
    <div class="content">
     <p>I continue here in a sort of continuity discussion. Sorry about past problem thread.</p>
<p>After following the flash procedure as explained in part 4, &nbsp;emontx and raspberry are in communication. When&nbsp;emontx&#39; red led flashes, rfm green led flashes and the emonhub.log updates.</p>
<p>Here a frame log:</p>
<p>2015-02-08 09:11:27,864 DEBUG 17 Timestamp : 1423383087.86<br />
2015-02-08 09:11:27,867 DEBUG 17 &nbsp; &nbsp; &nbsp;Node : 10<br />
2015-02-08 09:11:27,870 DEBUG 17 &nbsp; &nbsp;Values : [0, 0, 0, 0, 24022, 0]<br />
2015-02-08 09:11:27,880 DEBUG 17 &nbsp; &nbsp; &nbsp;RSSI : -18<br />
2015-02-08 09:11:27,985 DEBUG 17 Append to &#39;emonCMS&#39; buffer =&gt; time: 1423383087.86, data: [10, 0, 0, 0, 0, 24022, 0, -18], ref: 17<br />
2015-02-08 09:11:38,611 DEBUG 18 NEW FRAME : 1423383098.61 OK 10 0 0 0 0 0 0 0 0 177 93 0 0 (-31)&nbsp;<br />
2015-02-08 09:11:38,621 DEBUG 18 Timestamp : 1423383098.61<br />
2015-02-08 09:11:38,624 DEBUG 18 &nbsp; &nbsp; &nbsp;Node : 10<br />
2015-02-08 09:11:38,635 DEBUG 18 &nbsp; &nbsp;Values : [0, 0, 0, 0, 23985, 0]<br />
2015-02-08 09:11:38,638 DEBUG 18 &nbsp; &nbsp; &nbsp;RSSI : -31<br />
2015-02-08 09:11:38,685 DEBUG 18 Append to &#39;emonCMS&#39; buffer =&gt; time: 1423383098.61, data: [10, 0, 0, 0, 0, 23985, 0, -31], ref: 18</p>
<p>Can&nbsp;you explain me the meaning of each line?&nbsp;I haven&#39;t connected any ct sensors to phase cable.Emontx is connected to 9V AC. Probably the values are referenced to ct4 ct3 ct2 ct1 9v ac and 5v dc ? How do I stop the emonhub log visualization via lxterminal?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27509"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 08/02/2015 - 11:00.</div>
    <div class="content">
     <p><a href="10136.html">First open energy project (Part 3)</a></p>
<p><a href="10138.html">First open energy monitor project (part 4)</a></p>
<p>I think most of the log entries are fairly self explanatory, each &quot;NEW FRAME&quot; of data&nbsp;is prefixed with a unix timestamp&nbsp;and&nbsp;logged as it&#39;s&nbsp;<span style="line-height:20.7999992370605px">received</span><span style="line-height:20.7999992370605px">&nbsp;</span><span style="line-height:1.6">before any processing. It is then processed&nbsp;as &quot;Timestamp&quot;,&nbsp;&quot;Node&quot; id,&nbsp;&nbsp;data &quot;Values&quot; and if applicable the rfm69&#39;s&nbsp;&quot;RSSI&quot;.</span></p>
<p><span style="line-height:1.6">The &quot;standard&quot; processing will take each pair of byte values from the input string and create a list of&nbsp;signed int&#39;s (hence&nbsp;</span>0 0 0 0 0 0 0 0 177 93 0 0 becomes&nbsp;[0, 0, 0, 0, 23985, 0]) more complex data stuctures&nbsp;can be handled by matching a sketches typedef struct&#39;s payload to a &quot;datacodes&quot; entry in emonhub.conf.</p>
<p>The processed data then gets &quot;Append&quot;ed to a buffer to send on to a local or remote&nbsp;<span style="line-height:20.7999992370605px">emoncms. A note hear about your apikey not being correct in a earlier log &quot;</span>WARNING Setting emonCMS apikey: invalid format&quot; suggests it&#39;s not a 32 character alpha-numeric string, without that corrected emonhub will not attempt to pass data to emoncms.</p>
<p>If you are using the stock emontx v3 sketch the 4 zero&#39;s are ct1 to 4 the &quot;23985&quot; is 239.85 Vac and the last zero is temperture.</p>
<p>​Use&nbsp;control +&nbsp;c exit&nbsp;&quot;tail&nbsp;emonhub.log&quot;</p>
<p>once you have finished setting up emonhub and emoncms&nbsp;you can change loglevel back to warning in&nbsp;emonhub.conf so only errors get logged.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27594"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Wed, 11/02/2015 - 12:43.</div>
    <div class="content">
     <p>I use the read write apikey given by emocms after registration. I&#39;ve inserted it in emonhub.conf.</p>
<p>To see the temperature, do I change the node id to 19? But if I change this id, can I see sensors data and Vac already?</p>
<p>When I connect 5V dc I see the data like this [0, 14, 0, 0, 525, 0]</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27598"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 11/02/2015 - 13:07.</div>
    <div class="content">
     <p><em>&quot;I use the read write apikey&nbsp;........ I&#39;ve inserted it in emonhub.conf.&quot;</em></p>
<p>Has this changed the &nbsp;&quot;WARNING Setting emonCMS apikey: invalid format&quot; log entry to&nbsp;&nbsp;&quot;INFO Setting emonCMS apikey: obscured&quot; ?&nbsp;</p>
<p>There is both a &quot;read apikey&quot; and a &quot;write apikey&quot; you must use the write api key in emonhub.conf,</p>
<p><em>&quot;To see the temperature, do I change the node id to 19? But if I change this id, can I see sensors data and Vac already?&quot; &nbsp;&nbsp;</em>I&#39;m sorry but I&#39;m not sure what you are asking here!</p>
<p><em>&quot;When I connect 5V dc I see the data like this [0, 14, 0, 0, 525, 0]&quot; &nbsp;-&nbsp;</em>I&#39;m guessing a bit here to, do you mean when you power up the emonTx&nbsp;using 5vdc (only)&nbsp;you receive&nbsp;data at the Pi that shows as these &quot;values&quot; in emonhub&#39;s log, then good, a step in the right direction&nbsp;the format looks correct the 14 is 14watts on ct2 and the AC voltage is 5.25vac which may just be noise if you dont have a 9vac adapter connected.</p>
<p>But from here I cannot be sure of much as I only have what little info you share with me to help you.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27601"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Wed, 11/02/2015 - 14:27.</div>
    <div class="content">
     <p>I read somethnig on the wiki about temperature. When it is read by emonth the group id, for wireless transmission, is 19. My intention is to read temperature values. The answer of the 5 volt is what I would know, so the sensor measure power in this case. Now I don&#39;t understand why there is an ac component if I disconnected the 9 v ac.</p>
<p>I&#39;ll set the write apikey for emoncms.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 11/02/2015 - 15:27.</div>
    <div class="content">
     <p>Do you have an emonTH as well as a emonTx&nbsp;or are you just trying to get a temperture reading from a emonTx?</p>
<p>I understand you have a emonTx and that is able to read temperture&nbsp;IF you connect a temperture probe to it.</p>
<p>The emonTx&nbsp;default firmware has a standard payload of values ct1 ct2 ct3 ct4 Vac Temp if you want different values you will need to change the firmware (sketch). Although the standard firmware is providing the standard payload the actual values will be dependent on the sensors attached eg if you do not connect ct3&nbsp;you will not get a ct3&nbsp;value it will remain 0 same for Vac and Temperture.</p>
<p>​However , whilst the firmware actually sets the ct value to 0 if there is no sensor connected it doesn&#39;t do this for the Vac, all analog inputs have a little noise (there are several discussions on this currently)&nbsp;&nbsp;you just cannot see it when a ct is not connected as the value is &quot;zeroed&quot;, the temperture is digital and won&#39;t show a false reading without a sensor.</p>
<p>The default node id for an emonth is 19 (where as a emontx&nbsp;is 10) but either a emontx or a emonth can have any value between 1 and 30 as a node id to give it a unique identifier, it is set in the sketch an serves no purpose other than to identify WHERE the data come from, not what it is or what the values are directly, but by identifying itself you can tell what the data should be eg if you call your emontx node 2 and it is loaded with firmware to give you temperture&nbsp;Vac ct1, then you know any data identified as node 2 will be&nbsp;&nbsp;temperture&nbsp;Vac&nbsp;ct1 because you defined it.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27603"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 11/02/2015 - 15:30.</div>
    <div class="content">
     <p><i>"I read somethnig on the wiki about temperature. When it is read by emonth the group id, for wireless transmission, is 19."</i></p>
<p>You're misunderstanding the whole system there. It is not the <b><i>temperature</i></b> that is 19, it it is the <b>EmonTH Sensor Node</b> that is given the default node ID of 19. Each node that transmits data must have an unique node number, so that the source of the data is known and you can attach a meaningful label to it in emonCMS. We always use the Group ID = 210. Node ID and Group ID are different. Every node on the system must belong to Group 210.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27611"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Wed, 11/02/2015 - 17:20.</div>
    <div class="content">
     <p>Yes Robert, I know the same thing, I was imprecise. I intended the default node, 19, not temperature. The mistake is group /id.&nbsp;I also have a emonth. Can I read temperature from emontx using node id 10?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27612"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 11/02/2015 - 18:38.</div>
    <div class="content">
     <p>The default group id for your whole network is 210 all devices must have this set the same, within your group (network) the default node id for the emonTx&nbsp;is 10, the default node id for the emonTH&nbsp;is 19 and the default node id for the base (ie the Pi and RFM2P) is 15 which is also refered to as the base id.</p>
<p>So you will have 3 nodes (1 base, 1 Tx and 1 TH) each with a unique node id and the same group id.</p>
<p>The emonhub.conf is where you set the base settings (group 210, baseid 15 and frequency 433) and in the firmware for the emonTH or Tx is where the node settings are done (prior to installing the firmware).</p>
<p>In emonhub.conf there is also a nodes section at the bottom for declaring more elaborate data payloads but you are using standard data types so should not define any nodes here. (unless you change the firmwares first)</p>
<p>You can measure temperture using the emonTx&nbsp;IF you attach a temperture sensor to the terminals at the back, you can find more info on this in the wiki. The temperture read by the temperture sensor you fit to the emonTx will be transmited as the 5th value in&nbsp;node 10&#39;s&nbsp;payloadeg Values [0, 14, 0, 0, 525, <strong>225</strong>] is 22.5 deg C.</p>
<p>The emonTH&nbsp;has a temperture sensor built in and if you just add batteries it should show up in emonhub.logs as node 19.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27631"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Thu, 12/02/2015 - 14:35.</div>
    <div class="content">
     <p>Firstly thank you very much for support. I&#39;m lost withouth your help. I can read temperature and humiditiy data in the log file under node 19.</p>
<p>I have another question. I solded an emontx shield v 2.5 and mounted on an Arduino uno. Then I connected Arduino to computer via usb and uploaded the Shield_CT_123_Voltage sketch. But when I open the log file, nothing happens, there is not connection between arduino and raspberry:</p>
<p>2015-02-10 21:57:34,737 INFO Opening hub...<br />
2015-02-10 21:57:34,740 INFO Logging level set to DEBUG<br />
2015-02-10 21:57:34,743 INFO Creating EmonHubEmoncmsReporter &#39;emonCMS&#39;&nbsp;<br />
2015-02-10 21:57:34,749 INFO Set up reporter &#39;emonCMS&#39; (buffer: memory | size: 1000)<br />
2015-02-10 21:57:34,753 INFO Setting emonCMS url: <a href="http://localhost/emoncms" title="http://localhost/emoncms">http://localhost/emoncms</a><br />
2015-02-10 21:57:34,756 WARNING Setting emonCMS apikey: invalid format<br />
2015-02-10 21:57:34,759 INFO Creating EmonHubJeeInterfacer &#39;RFM2Pi&#39;&nbsp;<br />
2015-02-10 21:57:34,765 DEBUG Opening serial port: /dev/ttyAMA0 @ 38400 bits/s<br />
2015-02-10 21:57:36,779 INFO RFM2Pi device firmware version: [RF12demo.12]<br />
2015-02-10 21:57:36,782 INFO RFM2Pi device current settings: &nbsp;O i15 g210 @ 433 MHz q1<br />
^C</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27642"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 12/02/2015 - 16:46.</div>
    <div class="content">
     <p>Do you have both an emonTx and an emonTx Shield? If you do, you must change the Node ID of one, because as I wrote earlier, every Node ID on your system must be different.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27647"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Thu, 12/02/2015 - 17:41.</div>
    <div class="content">
     <p>I changed these 2 instructions:</p>
<p>const int nodeID= 9 (originally was 10)</p>
<p>#define RF69_COMPAT 1 (because my raspi has rf69)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27651"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 12/02/2015 - 21:27.</div>
    <div class="content">
     <blockquote><p>&quot;#define RF69_COMPAT 1 (because my raspi has rf69)&quot;</p>
</blockquote>
<p>This should only be defined if the physically&nbsp;attached rfm transceiver is an rfm 69. If your node has a rfm12&nbsp;you do not define RF69_COMPAT even if the RFM2Pi&nbsp;is an rfm69.</p>
<p>A rfm12&nbsp;can communicate with a rfm69&nbsp;in &quot;COMPAT&quot; mode and the RFM2Pi will already be running in &quot;COMPAT&quot; mode if you are receiving&nbsp;data.</p>
<p>The log is still showing &quot;WARNING Setting emonCMS apikey: invalid format&quot; in emonhub.conf the emoncms apikey must be a 32 character alpha-numeric string, no spaces or symbols.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27654"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 13/02/2015 - 07:26.</div>
    <div class="content">
     <p>I sold a rfm69 on emonshield. Do I change something in the sketch?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27664"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 13/02/2015 - 11:35.</div>
    <div class="content">
     <p>If you are using a rfm69&nbsp;on the shield then yes&nbsp;&quot;#define RF69_COMPAT 1 (because my raspi has rf69)&quot; is correct.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27672"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 13/02/2015 - 14:13.</div>
    <div class="content">
     <p>when I use the serial sketch, te red led of emontx shield bright, and I can see via serial monitor emontx data. When I upload a rfm sketch, seems that nothing happen, the red led remains off, emonhub don&#39;t show data from the node id chosen (9 ). The pi&#39;s rfm led don&#39;t blink when emontx v3 and emonth are power off and the emonhub.log is the same as previous posted.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27674"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 13/02/2015 - 14:26.</div>
    <div class="content">
     <p>This sounds like a problem in the node (arduino or&nbsp;sheild&nbsp;or sketch or rfm69&nbsp;or jeelib&nbsp;etc) do you get a positive confirmation when you upload a sketch to the shield? What serial output do you see from the arduino? are you sure the rfm on the shield is definitely&nbsp;69 not 12?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27680"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 13/02/2015 - 15:02.</div>
    <div class="content">
     <p>Yes, I get&nbsp; positive confirmation.</p>
<p>﻿some lines from arduino serial monitor with voltage serial only sketch:</p>
<p>emonTX Shield CT123 Voltage Serial Only example<br />
OpenEnergyMonitor.org<br />
63222.62 77283.63 2239.04 64552.96 562.33<br />
25395.62 42898.58 0.29 30085.94 358.24<br />
5516.43 23245.80 0.25 15827.68 166.51<br />
484.48 12005.82 0.12 7560.14 49.91<br />
202.09 5711.47 0.12 3298.06 32.79<br />
109.92 2454.89 0.12 1249.48 24.28<br />
54.82 1109.05 -0.31 508.69 16.82<br />
22.36 471.09 1.67 51.69 11.18<br />
12.48 183.17 0.68 1.03 7.90<br />
3.80 75.57 0.18 0.15 4.54</p>
<p>The rfm &quot;chip&quot; is quite equal to this: <a href="http://www.grandtech.lv/shop/popup_image.php?pID=90364">http://www.grandtech.lv/shop/popup_image.php?pID=90364</a> with st8886 1422AR FOYA and CEC 4F 10.000L<br />
&nbsp;</p>
<p>And this for shield ct1234 voltage . only one time, not looped or updated:</p>
<p>emonTX Shield CT123 Voltage example<br />
OpenEnergyMonitor.org<br />
Node: 9 Freq: 433Mhz Network: 210<br />
&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27681"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 13/02/2015 - 16:10.</div>
    <div class="content">
     <p>The main part of the Shield works. But you have no voltage and no current - is that correct? What you see there is false numbers generated by the software filters and the numbers get smaller as the filters reach their working point. This is normal.</p>
<p>If you see only this with the radio sketch:</p>
<pre>
 emonTX Shield CT123 Voltage example
 OpenEnergyMonitor.org
 Node: 9 Freq: 433Mhz Network: 210
</pre><p>
then I think there is a problem with the RFM69CW not responding when it is initialised.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27684"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 13/02/2015 - 18:46.</div>
    <div class="content">
     <p>I think you have a new rfm12b&nbsp;with a SMD crystal, the rfm69&nbsp;has far more smaller SMD&#39;s&nbsp;and the layout of your rfm is similar to the &quot;usual&quot; rfm12 with the 2 SMD&#39;s on one side, ( <s>I think one cap can be removed to convert from 433 to 868 or vise versa</s>&nbsp;edit wrong part)</p>
<p><a href="http://www.ebay.com/itm/RFM69CW-HopeRF-433Mhz-Wireless-Transceiver-with-RFM12B-compatible-Footprint-/181643908981?pt=LH_DefaultDomain_0&amp;hash=item2a4ad21775">​http://www.tme.eu/pl/details/rfm12b-433s2p/moduly-komunikacyjne-rf/hope-microelectronics/</a></p>
<p>Maybe try uploading the sketch without COMPAT&nbsp;defined.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27686"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 13/02/2015 - 17:33.</div>
    <div class="content">
     <p>The EmonTx V3.4 I have is supposed to have the RFM69CW (it has the wire-ended can crystal but the same IC) but does NOT work with "#define RF69_COMPAT 1" - it needs RF69_COMPAT 0. </p>
<p>[Edit:] (Glyn wrote: [it is] "an emonTx V3.4 with 433Mhz RFM69Pi")</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27687"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 13/02/2015 - 19:40.</div>
    <div class="content">
     <p>Robert - I wouldn&#39;t be surprised if your v3.4 has an rfm12 too! &quot;Glyn wrote: &quot;an emonTx V3.4 with 433Mhz RFM69<strong>Pi</strong>&quot;&quot; sounds to me like it&#39;s 2 devices, a v3.4 with an unspecified rfm device and a RFM69Pi&nbsp;(aka a rfm2pi with a rfm69 fitted and extra IO broken out) I can&#39;t be sur but I haven&#39;t heard of a rfm69&nbsp;not in COMPAT mode working, (or at least not on a rfm12 network) as JeeLib is different.</p>
<p>I have however seen rfm12&#39;s with either a 16pin DIL SMT chip or the familiar &quot;black blob&quot; with either the usual can or the newer SMT xtal. Of all the rfm69&#39;s I have seen (mainly online) they all seem to sport a square SMT chip with the SMT xtal, They also seem to all have &quot;RF69&quot; in a larger typeface on the chip itself as per the link supplied by mike_86.</p>
<p><a href="../sites/default/files/rfm12_868.jpg">familiar rfm12b&nbsp;&quot;black blob&quot; and can</a></p>
<p><a href="http://www.ebay.co.uk/itm/RFM12B-434MHz-Wireless-Transceiver-Module-S1P-6pack-Tested-and-Ready-to-Go-/161563853992?pt=UK_BOI_Electrical_Components_Supplies_ET&amp;hash=item259df4c4a8">rfm12b 16pin DIL SMT and can xtal</a></p>
<p><a href="http://www.tme.eu/html/PL/miniaturowe-cyfrowe-transceivery-rf-___-868-mhz-fsk-spi/ramka_4072_PL_pelny.html">​rfm12b&nbsp;&quot;black blob&quot; and SMT xtal</a></p>
<p><a href="http://www.grandtech.lv/shop/popup_image.php?pID=90364">​rfm12b&nbsp;16pin&nbsp;DIL SMT and SMT xtal</a></p>
<p><a href="http://www.hoperf.com/rf/fsk_module/RFM69HCW.htm">​rfm69&nbsp;square 28pin&nbsp;SMT and SMT xtal</a></p>
<p>​The shop listing states</p>
<p>&quot;Fully Built Unit:&nbsp;emonTx V3.4, fully assembled with RF module, firmware (DiscreteSampling RFM12B&nbsp;or Discrete Sampling RFM69CW)&nbsp;uploaded and tested.&quot;</p>
<p>and</p>
<p>&quot;Firmware uploaded and tested -&nbsp;&nbsp;emonTxV3.4_RFM12B_DiscreteSampling firmware&nbsp;for single phase installations&quot;</p>
<p>and</p>
<p>&quot;The emonTx comes pre-loaded with the Discrete Sampling firmware for RFM12B or Discrete Sampling firmware for RFM69CW&quot;</p>
<p>but doesn&#39;t have any method of selection for rfm12 or 69 so I suspect they were rfm12&nbsp;to begin with and changed in production to rfm69&nbsp;with a different sketch loaded and only 2 of the 3 mentions got edited to show both, but that&#39;s just a guess.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27809"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Tue, 17/02/2015 - 05:42.</div>
    <div class="content">
     <p>I uploaded the rfm12b simple sketch, nothing happens. Do I change something or use something special in minicom&nbsp;et similia to test the radio communication between raspberry and emontx shield?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27827"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 17/02/2015 - 17:05.</div>
    <div class="content">
     <p>Does the led on the rfm2pi flash? can you link to the &quot;rfm12b simple sketch&quot; I&#39;m not sure what that&nbsp;is so not sure what to expect it&nbsp;to do.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27831"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Tue, 17/02/2015 - 18:16.</div>
    <div class="content">
     <p><a href="https://github.com/openenergymonitor/RFM12B_Simple">https://github.com/openenergymonitor/RFM12B_Simple</a></p>
<p>No the led don&#39;t flash .</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27866"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 18/02/2015 - 16:02.</div>
    <div class="content">
     <p>My RFM module is not one of those, but it&#39;s close to the &quot;rfm12b 16pin DIL SMT and can xtal&quot;</p>
<p><img alt="" src="../sites/default/files/RFM.jpg" style="height:255px; width:300px" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27871"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 18/02/2015 - 17:20.</div>
    <div class="content">
     <p>I would say that&#39;s closer than close to an rfm12b, as far as I can tell that is definitely a rfm12b&nbsp;what makes you think otherwise?</p>
<p><img alt="" src="../sites/default/files/RFM2.jpg" style="width:300px" /></p>
<p>Your link goes to a folder containing&nbsp;4 sketches so I still don&#39;t know which you are definitely running, however I didn&#39;t see a sketch there specifically for the shield, maybe someone can confirm if those sketches are shield compatible or not.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27872"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 18/02/2015 - 17:39.</div>
    <div class="content">
     <p>I thought otherwise because Glyn inferred he'd sent me a V3.4 with an RFM69, but maybe not.</p>
<p>Are you addressing Mike with the question about the sketches? Those are not engineered working sketches - they are purely to illustrate how to send and receive data. At a quick glance, they should work for any emonTx <i>except</i> the V3.2 (aka plain "V3"), for which you change "&lt;JeeLib.h&gt;" into "&lt;RFu_JeeLib.h&gt;". The radio side should work but there is no code in there to measure voltages or currents. The "transmit" sketch just sends an ever incrementing stream of numbers. The receive sketches just listen for those numbers and print to the serial (programmer) output.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27873"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 18/02/2015 - 18:00.</div>
    <div class="content">
     <p>Cheers Robert, no I was looking for someone with some sheild&nbsp;knowledge to confirm Mike is using a sketch that will work to test his shield&#39;s rf side is working.,</p>
<p>I&#39;m trying to help him get a shield working and can&#39;t even determine what sketch and/or settings he should be using. I&#39;m pretty sure that is an rfm12.</p>
<p>​I have linked above to all the variants as I know them. Can you see rf69&nbsp;screen printed on the chip itself? and is it 16pin dil or 28pin square?&nbsp;the fact you said it won&#39;t run using rf69 code and it looks like a rfm12&nbsp;casts doubt. I think you have a rfm12 v3.4 and a rfm69<strong>pi</strong><strong>,</strong> was there a rfm2pi on a orange pcb with the emontx?</p>
<p>Perhaps glyn or someone else in the know could confirm,&nbsp;appearance isn&#39;t the best method of identifying&nbsp;electronic circuits.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27876"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Wed, 18/02/2015 - 18:03.</div>
    <div class="content">
     <p><img alt="" src="../../../i57.tinypic.com/okto39.jpg" style="height:300px; width:400px" /></p>
<p>This is an image of the Emontx shield on an Arduino UNO. Do I sold correctly? Do I miss something important?</p>
<p>If the sketch transmit data, Raspberry pi would receive and I would visualize numbers in minicom, right? It is not important to see energy values, it&#39;s sufficient to be successful in trasmit - send data wirelessly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27878"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 18/02/2015 - 19:12.</div>
    <div class="content">
     <p>Although thats not the board previously shown, It still looks like a rfm12b&nbsp;see these&nbsp;links</p>
<p><a href="http://www.grandtech.lv/shop/product_info.php?manufacturers_id=5&amp;products_id=90364">http://www.grandtech.lv/shop/product_info.php?manufacturers_id=5&amp;products_id=90364</a></p>
<p><a href="http://www.tme.eu/en/details/rfm12b-433s2p_sp/rf-communication-modules/hope-microelectronics/rfm12b-433s2p/">http://www.tme.eu/en/details/rfm12b-433s2p_sp/rf-communication-modules/hope-microelectronics/rfm12b-433s2p/</a></p>
<p>Do you have an invoice or email you can check? where did you buy&nbsp;it?</p>
<p>You have tried rfm12 sketch and rfm69 sketch, neither worked. We are not going to be able to move forward until&nbsp;we can be sure of what software to run. it is pointless trying to debug with incompatible software.</p>
<p>looking at your board it looks like the slave select and rfm interrupt&nbsp;links ( red link blocks in the picture below) are missing do you have pins 10 and 2 linked?</p>
<p><img alt="" src="../../../raw.githubusercontent.com/openenergymonitor/Hardware/master/emontx-shield-smt/photo.jpg" style="height:501px; width:700px" /></p>
<p>I think you need to put those 2&nbsp;links in place and reload the correct&nbsp;sketch for a rfm12b&nbsp;(COMPAT&nbsp;0)&nbsp;and it&#39;ll work.</p>
<p>PS - It also looks like the 3.5mm sockets are on the wrong side, Robert maybe able to give you some pointers there I think he&#39;s seen that before.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27881"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 18/02/2015 - 19:47.</div>
    <div class="content">
     <p>You are right about the 3.5 mm sockets - they are WRONG. The outline of the socket printed on the board does show which side they should be on - the side where you have the ac adapter socket, as in the picture immediately above. Your CTs will not work because the tip and ring connections are swapped. If you cannot unsolder the sockets (and I expect you will not be able to), the easy way to rectify the fault is to move the white wire in the plug from the plug tip to the ring. Leave the red wire where it is.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27900"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 18/02/2015 - 22:09.</div>
    <div class="content">
     <p><a href="https://twitter.com/Openenergymon/status/568164618381737985/photo/1">This just tweeted from the shop shows the&nbsp;shield with RFM69&nbsp;fitted&nbsp;</a></p>
<p><img alt="" src="../sites/default/files/RFM69_shield.jpg" style="height:455px; width:720px" /></p>
<p>you can clearly see the difference</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27906"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 18/02/2015 - 23:07.</div>
    <div class="content">
     <p>I clearly don't have a '69er. Boo! Hiss!</p>
<p>Which probably explains why RF69_COMPAT 1 makes it lock up.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27910"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 18/02/2015 - 23:21.</div>
    <div class="content">
     <p>That was primarily directed to Mike, but I&#39;m glad we cleared that little mystery up too :-)</p>
<p>I wouldn&#39;t be too worried about the emonTx end currently, until they start receiving control data, depend heavily on ACK&#39;s or the COMPAT mode gets dropped for a&nbsp;full blown RFM69&nbsp;featureset, it&#39;s unlikely you will notice the difference.</p>
<p>The main difference from a users perspective (aside from different drivers) is the RFM69&nbsp;has&nbsp;noticeably better reception rather than&nbsp;transmission and the receiver&nbsp;provides&nbsp;RSSI data which is really handy. So if you use a RFM69 at the emonBase (rfm2pi(69) or rfm69pi) you will get better reception and RSSI data&nbsp;from all your nodes regardless of whether they are 12 or 69.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27917"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Thu, 19/02/2015 - 06:41.</div>
    <div class="content">
     <p>But&nbsp;raspberrypi&nbsp;needs rf69 firmware, emonhub&nbsp;and &nbsp;minicom don&#39;t visualize any data without it. When I go in lab I make other photos, including raspberry. After solved this radio problem, I&#39;ll show emonglcd too. I bought the whole&nbsp;system&nbsp;from your own main oem site, section shopping.</p>
<p>&nbsp;</p>
<p>I&nbsp;can unsolder ct jackets, removing the tin by aspiring.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27923"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 19/02/2015 - 10:52.</div>
    <div class="content">
     <p>Every RFM device&nbsp;currently sold in the shop (and near as damn it,&nbsp;all RFM&nbsp;devices discussed on the forum) are rfm12 or <strong>rfm69&nbsp;running in rfm12 compatibility mode. </strong>The define COMPAT&#39;s&nbsp;in the sketches are to switch between rfm12 native code and COMPATibility mode to make a rfm69 run as a rfm12, either way the result is a rfm12&nbsp;compatible result.</p>
<p>So it doesn&#39;t matter what is on one end of the radio transmission, the other end can still be either. You can have a mixture of rfm12&#39;s and rfm69&#39;s on the same network because the current OEM softwares will only run rfm12&#39;s or rfm69&#39;s in COMPAT&nbsp;mode there is no native rfm69 support yet.</p>
<p>When you see COMPAT&nbsp;read &quot;run this rfm12 code using a rfm69&quot;. So &quot;COMPAT 0&quot; is for running rfm12 code on a rfm12 and COMPAT&nbsp;1 is to run rfm12 code on a rfm69.</p>
<p>Therefore yes the Pi ans all the stuff that works is correct and you do not need to change any software sketches anywhere but on the sheild. You have a <strong>rfm12&nbsp;type network</strong>&nbsp;with rfm69 devices in compatibility mode&nbsp;that is working fine and to that you want to add your rfm12 shield. You can do that bt installing the sketch with COMPAT 0 because it doesn&#39;t need converting to an rfm12 it is already an rfm12.</p>
<p>The reason your shield didn&#39;t communicate first time is because 2 connections were mising&nbsp;as you didn&#39;t fit the supplied linking blocks. If you fit fit those it should communicate fine.</p>
<p>As for the sockets, only try and remove them if you are very sure of your (un)soldering skills, you can damage the board very very easily. Robert has given you an alternative route if you are less than sure about removing the sockets.</p>
<p>Before trying the sockets fit the links and load the sketch for rfm12, solve that problem before engaging another.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27925"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Thu, 19/02/2015 - 11:55.</div>
    <div class="content">
     <p>Fortunately, I&#39;ve got another emontx shield. I solder it as you written. I can&#39;t upload an image now, I&#39;ll post it as soon as possible. I solder the slave and interrupts on the pin named &#39;RFM12B SS&#39; and &#39;RFM12B IRQ&#39;. Looking at your image previously posted, shields have &#39;rfm12&#39; and raspberry has &#39;rfm69&#39;. So I have to upload sketches with COMPAT 0.</p>
<p>I uploaded the Shield_CT1234_Voltage . Previously, The sketch was changed with this: CT1 CT2...Ct4=0 because cts are physically disconnected, nodeID=9, RF_freq RF12_433MHZ , RF69_COMPAT 0.</p>
<p>9V AC is connected but I see via serial&nbsp; 0.00. Radio is ever died.</p>
<p>Unsoldering and removing the ct sockets is very hard (because of twisted contacts), I tried and I give up on unsolder sockets. Other pieces like the serial UART are simpler than sockets, I did it successfully.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27928"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 19/02/2015 - 12:35.</div>
    <div class="content">
     <blockquote><p><em>&quot;Looking at your image previously posted, shields have &#39;rfm12&#39; and raspberry has &#39;rfm69&#39;. So I have to upload sketches with COMPAT 0.&quot;</em></p>
</blockquote>
<p>Correct, however&nbsp;</p>
<blockquote><p><em>&quot;Looking at your image previously posted, shields have &#39;rfm12&#39; <s>and raspberry has &#39;rfm69&#39;. </s>So I&nbsp;have to upload sketches with&nbsp;COMPAT&nbsp;0.&quot;</em></p>
</blockquote>
<p>Is more accurate and&nbsp;simpler ! you only need to concider the device in hand &quot;Does the device I am loading the sketch to have a rfm69&nbsp;fitted&nbsp;to it?&quot; and the answer is &quot;No, therefore I do not need to run the COMPAT&nbsp;code to convert to a rfm12&quot;. It does not matter what is on the Pi or any other device (as long as they are the same frequency)</p>
<p>Robert - Is it feasible to link the ring and tip pins of the socket on the shield if the ring is open circuit in the ct?&nbsp;as long as he doesn&#39;t go shoving a &quot;mono&quot; 3.5mm plug in there at some point&nbsp;that is (no reason&nbsp;he should though) that would save having 2 varieties of ct which is bound to cause further confusion.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27935"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Thu, 19/02/2015 - 16:26.</div>
    <div class="content">
     <p>This is the &#39;new&#39; emontx shield:</p>
<p><img alt="" src="../../../i62.tinypic.com/24eqkc1.jpg" style="height:330px; width:440px" /></p>
<p>And this is the raspberry pi:</p>
<p><img alt="" src="../../../i58.tinypic.com/2rcmnoo.jpg" style="height:330px; width:440px" /></p>
<p>It&#39;s visible the rfm12b expansion with rfm69.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27942"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 19/02/2015 - 18:16.</div>
    <div class="content">
     <p><i>"Robert - Is it feasible to link the ring and tip pins of the socket on the shield if the ring is open circuit in the ct? "</i></p>
<p>Yes, he could indeed do that. The link needs to be between the "outer" pair of pins belonging to the socket.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27947"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 19/02/2015 - 19:47.</div>
    <div class="content">
     <p>Yes the shield looks ok, the links are correct, the sockets are on the right side. That is a rfm12 so load your sketch with &quot;RF69_COMPAT&nbsp;0&quot;.</p>
<p>The Pi looks fine yes its a rfm69 fitted to the RFM2Pi&nbsp;but that doesn&#39;t effect what you are doing to the shield.</p>
<p>Robert has confirmed for us that you can &quot;fix&quot; your <u>other </u>shield without removing the sockets. On the opposite side of the board where the pins are soldered you should link the outer most 2 pins together on each socket like this.</p>
<p><img alt="" src="../sites/default/files/shield%20links.png" style="height:298px; width:400px" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27973"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 20/02/2015 - 10:33.</div>
    <div class="content">
     <p>I upload the tx_SimpleRFM12B_demo. Here is the code:</p>
<p>//Simple RFM12B wireless demo - transimtter - no ack<br />
//Glyn Hudson openenergymonitor.org GNU GPL V3 7/7/11<br />
//Credit to JCW from Jeelabs.org for RFM12&nbsp;<br />
#define RF69_COMPAT 0 &nbsp;// define this to use the RF69 driver i.s.o. RF12<br />
#include &lt;JeeLib.h&gt; &nbsp;//from jeelabs.org</p>
<p>#define myNodeID 9 &nbsp; &nbsp; &nbsp; &nbsp; //node ID of tx (range 0-30)<br />
#define network &nbsp; &nbsp; 210 &nbsp; &nbsp; &nbsp;//network group (can be in the range 1-250).<br />
#define RF_freq RF12_433MHZ &nbsp; &nbsp; //Freq of RF12B can be RF12_433MHZ, RF12_868MHZ or RF12_915MHZ. Match freq to module</p>
<p>
typedef struct { int power1, power2, power3, battery; } PayloadTX; &nbsp; &nbsp; &nbsp;// create structure - a neat way of packaging data for RF comms<br />
PayloadTX emontx; &nbsp;</p>
<p>const int LED = 6; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //emonTx V3<br />
void setup() {<br />
&nbsp; rf12_initialize(myNodeID,RF_freq,network); &nbsp; //Initialize RFM12 with settings defined above &nbsp;<br />
Serial.begin(9600);<br />
Serial.println(&quot;RFM12B Transmitter - Simple demo&quot;);</p>
<p>&nbsp;Serial.print(&quot;Node: &quot;);&nbsp;<br />
&nbsp;Serial.print(myNodeID);&nbsp;<br />
&nbsp;Serial.print(&quot; Freq: &quot;);&nbsp;<br />
&nbsp;if (RF_freq == RF12_433MHZ) Serial.print(&quot;433Mhz&quot;);<br />
&nbsp;if (RF_freq == RF12_868MHZ) Serial.print(&quot;868Mhz&quot;);<br />
&nbsp;if (RF_freq == RF12_915MHZ) Serial.print(&quot;915Mhz&quot;);&nbsp;<br />
&nbsp;Serial.print(&quot; Network: &quot;);&nbsp;<br />
&nbsp;Serial.println(network);</p>
<p>pinMode(LED, OUTPUT);</p>
<p>}</p>
<p>void loop() {<br />
&nbsp; emontx.power1=emontx.power1+1;<br />
&nbsp; emontx.power2=emontx.power2+2;<br />
&nbsp; emontx.power3=emontx.power3+3;<br />
&nbsp; emontx.battery=emontx.battery+4;<br />
&nbsp; &nbsp;&nbsp;<br />
&nbsp; &nbsp; rf12_sendNow(0, &amp;emontx, sizeof emontx); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; rf12_sendWait(2);<br />
&nbsp; &nbsp;&nbsp;<br />
&nbsp; Serial.print(&quot;power1: &quot;); Serial.println(emontx.power1);&nbsp;<br />
&nbsp; Serial.print(&quot;power2: &quot;); Serial.println(emontx.power2);&nbsp;<br />
&nbsp; Serial.print(&quot;power3: &quot;); Serial.println(emontx.power3);&nbsp;<br />
&nbsp; Serial.print(&quot;battery: &quot;); Serial.println(emontx.battery);&nbsp;<br />
&nbsp; Serial.println(&quot; &nbsp;&quot;);&nbsp;<br />
&nbsp;&nbsp;<br />
&nbsp; digitalWrite(LED, HIGH); delay(500); digitalWrite(LED, LOW); &nbsp;&nbsp;<br />
&nbsp; delay(2000);<br />
}</p>
<p>Both emon LED&nbsp;and rasp LED don&#39;t blink (then there is not radio transmission).&nbsp;Do I change jeelib files and other? If so, what do I do? I have not written this program files.&nbsp;If I&nbsp;touch randomly&nbsp;, I&nbsp;could damage files and shield.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27974"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 20/02/2015 - 10:44.</div>
    <div class="content">
     <p>The first thing I notice is the led pin is wrong, the shield uses pin 9. I&#39;m unsure of any other differences off the top of my head as I&#39;m unfamiliar with the shield.</p>
<p>Do you get any serial output?</p>
<p>Why are you trying to get this sketch working rather than the correct one?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27976"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 20/02/2015 - 11:22.</div>
    <div class="content">
     <p>The shield pin is 9, written in shield too. I understood that one pin is probably wrong but I know that Arduino uno has also dedicated pins for its LEDs and functionalities.&nbsp;Surely there is other wrong and I will change it.</p>
<p>The serial output is only &#39;RFM1&#39;</p>
<p>What is the correct one? I&#39;m trying to transmit data from shield to raspberry.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27986"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 20/02/2015 - 18:53.</div>
    <div class="content">
     <p>Some good news: after uploaded &quot;Shield_CT1234&quot; , the red led flashes every 3 seconds. Raspi rfm69&nbsp;seems to sleep. The led don&#39;t flash. I tried to&nbsp;change&nbsp;the baud&nbsp;rate in emonhub.conf.&nbsp;The log set&nbsp;to debug show &nbsp;a warning when the baud rate is changed:Device communication error - check settings</p>
<p>&nbsp;The emontx shield is v2.5 Oct 2013. Do I change the firmware? If so, can I already see data from emontx v3 and emonth?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27987"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 20/02/2015 - 19:09.</div>
    <div class="content">
     <p>If the led does not flash on the RFM2Pi&nbsp;indicating receipt of the packet just sent by the shield, ie if the leds don&#39;t flash together then there is no point looking at the Pi because the rf packet is not getting there.</p>
<p>The Pi receives&nbsp;from the emonTH and emonTx&nbsp;so assume the Pi is good.</p>
<p>How close is the shield to the Pi?</p>
<p>Did you set the group ID (and Node ID) ?</p>
<p>The default for sketch looks like it is 868MHz&nbsp;did you remove the &quot; # &quot; to uncomment the&nbsp;RF_freq RF12_433MHZ define? taht line should read</p>
<blockquote><p>define RF_freq RF12_433MHZ</p>
</blockquote>
<p>If still no joy you will need to hook up a serial programmer to see what serial output you are getting.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27989"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Fri, 20/02/2015 - 19:50.</div>
    <div class="content">
     <p>&nbsp;But in this case emontx v3 and emonth are not present. I&#39;m only working with emontx shield and raspi. They are nearby, few centimeters. In c language the # has another meaning, when you want a comment you add // for a line comment or /* for multiline comment. The # is used for preprocessing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27991"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 20/02/2015 - 20:15.</div>
    <div class="content">
     <p>Sorry yes you are right about the &quot; # &quot;, I&#39;m spending a lot of time with python and bash,</p>
<p>The point I make about the Pi is you know it works and can receive correctly BECAUSE you have had the emonTx and the emonTH working..</p>
<p>If the led on the RFM2Pi&nbsp;doesn&#39;t flash it hasn&#39;t received, how can changing anything in the Pi change the fact the RF packet isn&#39;t arriving at the RFM2Pi?</p>
<p>If the led was flashing to confirm receipt but you where getting no data that&#39;s a different matter, but that is not the case. The RFM2Pi&nbsp;is not receiving from the shield but was recieving from the emonTx and emonTH, so unless you have altered something on the Pi or&nbsp;RFM2Pi to stop it receiving, you can assume it&#39;s ok and focus on the shield.</p>
<p>Time to connect the serial programmer and see what is happening there.</p>
<p>Also check your soldering at the RFM12 module&nbsp;and confirm the SS and IRQ links are correctly placed etc</p>
<p>There is no point looking at the Pi until that led flashes on the RFM2Pi.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28021"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Sat, 21/02/2015 - 17:35.</div>
    <div class="content">
     <p>Now &nbsp;I have no possibilities to use the serial uart ports.</p>
<p>Meanwhile I can&nbsp;do the contrary. Raspberry send data to emontx. Is it possible?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28027"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 21/02/2015 - 21:43.</div>
    <div class="content">
     <p>It&#39;s certainly possible but not as widely implemented as receiving from a emonTx, OEM is primarily a sensor network and moving into control is a whole different kettle of fish.</p>
<p>You will at the very least need a custom sketch for the emonTx&nbsp;that can accept your transmissions, Then you need something to encode and send the transmisions via the rfm2pi.&nbsp;</p>
<p>emonHub, packetgen, heating controller are terms you can search and catch up with the status of various projects and find some info if you want to do something yourself.</p>
<p>There is no current &quot;easy&quot; solution, but we&#39;re working on it.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28039"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Sun, 22/02/2015 - 06:43.</div>
    <div class="content">
     <p>Nothing impossible. I can do it. I want know if a code already exists. I have to work on this also because the next project step is a control for monitoring. I hope&nbsp;that the rm shield receive without other problems.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28108"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Tue, 24/02/2015 - 10:11.</div>
    <div class="content">
     <p>I&#39;ve done what I have to do</p>
<p>I&#39;m returning back some shields, Emontx shields and EmonGLCD so that you can solve directly the problem. They don&#39;t work. Can you give me an Address? I&#39;m a Thesist and I have to solve the problems as soon as possible.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28127"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 24/02/2015 - 16:14.</div>
    <div class="content">
     <p>I&#39;m glad you&#39;ve done what you set out to do.&nbsp;</p>
<p>If you have stuff to return to the shop you need to speak to them directly. I&#39;m just a user much like yourself and while Robert is a forum moderator he isn&#39;t involved with the shop. The&nbsp;contact details are on this support page</p>
<p><a href="http://shop.openenergymonitor.com/support/">http://shop.openenergymonitor.com/support/</a></p>
<p>We haven&#39;t really established if any are faulty yet and I would guess that any units you have used/modified will not be re-saleable, certainly the one with the sockets on the wrong side isn&#39;t. Or do you just have surplus units?</p>
<p>The likelihood that you have more than one faulty unit is highly remote, faulty units are almost non-existent.</p>
<p>Did you try putting a programmer to the shield with a correct sketch loaded?&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28338"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Mon, 02/03/2015 - 16:27.</div>
    <div class="content">
     <p>I&#39;m trying to connect&nbsp;emoncms. Log file shows this lines:</p>
<p>2015-03-02 17:19:07,533 INFO emonCMS sending: http://localhost/emoncms/input/bulk.json?apikey=E-M-O-N-C-M-S-A-P-I-K-E-Y&amp;data=[[1425312792.24,10,10,0,0,0,0,0,-27],[1425312792.47,10,9,0,0,0,0,0,-25],[1425312792.73,10,8,0,0,0,0,0,-25],[1425312792.98,10,7,0,0,0,0,0,-26],[1425312793.23,10,6,0,0,0,0,0,-26],[1425312793.47,10,5,0,0,0,0,0,-25],[1425312793.72,10,4,0,0,0,0,0,-25],[1425312793.97,10,3,0,0,0,0,0,-27],[1425312794.22,10,2,0,0,0,0,0,-31],[1425312794.47,10,1,0,0,0,0,0,-28],[1425312794.73,10,0,0,0,0,0,0,-28],[1425312812.82,10,0,0,0,0,24663,0,-28],<br />
2015-03-02 17:19:07,628 WARNING emonCMS couldn&#39;t send to server, URLError: [Errno 97] Address family not supported by protocol<br />
2015-03-02 17:19:07,635 WARNING emonCMS send failure: wanted &#39;ok&#39; but got &#39;&#39;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28341"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 02/03/2015 - 17:09.</div>
    <div class="content">
     <p>Have you tried the dotted IP address assigned by your router, rather than "localhost"? Quite often, "localhost" is only known <i>inside</i> that machine, elsewhere on your network you need the IP address.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28343"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Mon, 02/03/2015 - 18:06.</div>
    <div class="content">
     <p>I used ip address in emonhub.conf&nbsp;</p>
<p>url=http://192.168.0.103/emoncms</p>
<p>Result is the same as previosly posted.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28715"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Mon, 16/03/2015 - 14:34.</div>
    <div class="content">
     <p>Hello everybody, after setting the right apikey and emoncms.org I sent a lot of data to emoncms. Now, when I put in the command line the instruction &quot;make codesend&quot;, emonhub don&#39;t pick up emontx/th data. The log shows warning device communication error check settings. I tried to re-flash with avrdude, the result is:</p>
<p>pi@raspberrypi ~/RFM2Pi/firmware/RFM69CW_RF_Demo_ATmega328 $ avrdude -v -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 38400 -U flash:w:RFM69CW_RF12_Demo_ATmega328.cpp.hex</p>
<p>avrdude-original: Version 5.11.1, compiled on May 23 2012 at 11:08:25<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Copyright (c) 2000-2005 Brian Dean, <a href="http://www.bdmicro.com/" title="http://www.bdmicro.com/">http://www.bdmicro.com/</a><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Copyright (c) 2007-2009 Joerg Wunsch</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System wide configuration file is &quot;/etc/avrdude.conf&quot;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; User configuration file is &quot;/root/.avrduderc&quot;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; User configuration file does not exist or is not a regular file, skipping</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Using Port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: /dev/ttyAMA0<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Using Programmer &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: arduino<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Overriding Baud Rate &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 38400<br />
avrdude-original: Using autoreset DTR on GPIO 4<br />
avrdude-original: stk500_recv(): programmer is not responding</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28744"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 17/03/2015 - 13:26.</div>
    <div class="content">
     <blockquote><p>&quot;when I put in the command line the instruction &quot;make codesend&quot;, &quot;</p>
</blockquote>
<p>I&#39;m not really sure what you are&nbsp;referring&nbsp;to there.</p>
<blockquote><p>&quot;The log shows warning device communication error <strong>check settings</strong>&quot;</p>
</blockquote>
<p>Did you check the settings ? Is the log&nbsp;entry&nbsp;before this, that states the attempted baud setting, correct?</p>
<p>Have you tried manually setting the baud in the settings to ensure the correct baud is set ?</p>
<p>you have successfully updated the firmware previously, there should be no reason to do it again as it was working ok&nbsp;and you certainly <u>should not</u>&nbsp;try and update the firmware unless you know you can communicate with the board, unless all else fails as you may corrupt it.</p>
<p>Are you able to use minicom or arduino ide etc to access it via serial?&nbsp;<span style="line-height: 20.7999992370605px;">Can you confirm the settings by typing &quot;v&quot;?&nbsp;</span><span style="line-height: 1.6;">you should get something like</span></p>
<blockquote><p>[RF12demo.12]&nbsp;O i15 g210 @ 433 MHz q1</p>
</blockquote>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29191"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7582.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mike_86&#039;s picture" title="mike_86&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/7582.html" title="View user profile.">mike_86</a> on Mon, 30/03/2015 - 15:31.</div>
    <div class="content">
     <p>I solved the device communication error: only a reboot was necessary! I did not connect to the forum, so I answer now.</p>
<p>Now, when I connect a current sensor on the neutral wire and an other onthe three fase line, the power value is the same. Is it possible? When data are sent through serial port and seen with python script or minicom, data strange are seen. How can I convert it to real values? And when I try to write a string on /dev/ttyAMA0, no other shields receive this data from raspberry ( Node id 15, group 210, frequency 433 MHz). Shields have rfm12b_recv.ino sketch:</p>
<p>#include &lt;JeeLib.h&gt;</p>
<p>// must match the ID set in the linux driver (either as compile-time option or via ioctl()).<br />
#define GROUP_ID&nbsp;&nbsp; 210<br />
// must match the ID set in the linux driver (either as compile-time option or via ioctl()).<br />
#define BAND_ID&nbsp;&nbsp;&nbsp; RF12_433MHZ<br />
// not relevant for the linux driver, but still...<br />
#define NODE_ID&nbsp;&nbsp;&nbsp; 16<br />
// amount of time in milliseconds the sketch is blocked to let the LED shine<br />
#define LED_DELAY&nbsp; 100</p>
<p>/**************************/</p>
<p>Port leds (1);</p>
<p>static void recvLed(int state)<br />
{<br />
&nbsp;&nbsp; leds.mode(OUTPUT);<br />
&nbsp;&nbsp; leds.digiWrite(state);<br />
}</p>
<p>static void sendLed(int state)<br />
{<br />
&nbsp;&nbsp; leds.mode2(OUTPUT);<br />
&nbsp;&nbsp; leds.digiWrite2(!state);<br />
}</p>
<p>static void printBuffer(byte* buf, int len)<br />
{<br />
&nbsp;&nbsp; for (byte i = 0; i &lt; len; ++i) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Serial.print(buf[i]);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Serial.print(&#39; &#39;);&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp; Serial.println();<br />
}</p>
<p>void setup()<br />
{<br />
&nbsp;&nbsp; Serial.begin(57600);<br />
&nbsp;&nbsp; rf12_initialize(NODE_ID, BAND_ID, GROUP_ID);<br />
}</p>
<p>void loop()<br />
{<br />
&nbsp;&nbsp; if (rf12_recvDone() &amp;&amp; rf12_crc == 0) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; recvLed(1);<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Serial.print(&quot;RECV &quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printBuffer((byte*)rf12_data, rf12_len);<br />
&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; delay(LED_DELAY);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; recvLed(0);&nbsp;<br />
&nbsp;&nbsp; }<br />
}</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35667"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8963.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mnmn&#039;s picture" title="mnmn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/8963.html" title="View user profile.">mnmn</a> on Thu, 05/11/2015 - 13:29.</div>
    <div class="content">
     <p>Problem with emonhub on standard Wheezy distro.</p>
<p>In emonhub.log I&#39;ve got the &quot;ERROR Unable to create &#39;RFM2Pi&#39; interfacer: Attempting to use a port that is not open&quot; message.</p>
<p>Backgrounds:<br />
I have purchased the devices (emonBase, emonTX, emonTH, pre-installed 4GB SDCard) 2 weeks ago.<br />
I have set up the system, and used the 4GB SDCard successfully, and everything was working perfectly.<br />
Then I wanted to install additional sw components (openHAB, node-red), and I had to realize, that the root partition on the 4GB card is just not enough.<br />
I successfully &quot;expanded&quot; the system to a 32GB SDCard, and everything was working perfectly.<br />
Then (unfortunately :) ) I got the idea, that a &quot;full-functional&quot; emonCMS would fit my needs more, than the current low-write version. So I&#39;ve just bought a 128GB SDD.<br />
I was hesitating, which way to go:<br />
1. do a full Rasbian Wheezy install, and then install emonCMS+emonHUB<br />
2. &quot;expand&quot; an existing emonSD image.<br />
Somewhere in the forum topics, I have read, that the &quot;upgrade&quot; from low-write to full version is not a good choice, so I have choosen the 1 option.<br />
I installed a &quot;stock&quot; Wheezy on the SDD, and got it working with my Raspi.</p>
<p>I have modified the /boot/cmdline.txt, and the inittab, just as it&#39;s recommended here.<br />
Then I have installed the emonCMS and the emonHUB, trying to follow the latest guides.</p>
<p>However, now I&#39;v got the feeling, that maybe I have &quot;mixed&quot; the guides from the github (for example: <a href="https://github.com/emoncms/emoncms/blob/9.0/docs/LinuxInstall.md" title="https://github.com/emoncms/emoncms/blob/9.0/docs/LinuxInstall.md">https://github.com/emoncms/emoncms/blob/9.0/docs/LinuxInstall.md</a> )&nbsp;<br />
and from the forums ( for example: <a href="11186.html" title="http://openenergymonitor.org/emon/node/11186">http://openenergymonitor.org/emon/node/11186</a>, <a href="5986.html" title="http://openenergymonitor.org/emon/node/5986">http://openenergymonitor.org/emon/node/5986</a> )<br />
&nbsp;&nbsp;<br />
I have spent days and nights with reading, but the &quot;bigdata&quot; on openergymonitor.org, is not user-friendly at all...</p>
<p>Right now, I have a working emonCMS (the 9.1@2015.11.02 version: <a href="11009.html" title="http://openenergymonitor.org/emon/node/11009">http://openenergymonitor.org/emon/node/11009</a> )<br />
and emonHUB service is also running, but can&#39;t communicate with the radio module.</p>
<p>If the com_baud option is not specified in emonhub.conf, then the error message is:<br />
&quot;ERROR Unable to create &#39;RFM2Pi&#39; interfacer: Attempting to use a port that is not open&quot;</p>
<p>If I specify 9600 or 38400 or 57600 with com_baud, the message is other:<br />
&quot;WARNING Device communication error - check settings&quot;</p>
<p>I&#39;ve tried minicom, but that does not do anything. Starts, the screen is blank. I exit without reset, start it again, screen blank.<br />
I exit with reset, and the start again, then the minicom related sentences appear on the screen, but the module does not send anything.<br />
The lower-right corner shows: &quot;Offline&quot;<br />
I hit the keyboard without any response.<br />
CTRL+X exits...</p>
<p>Any toughts, advices?</p>
<p>thanks,<br />
Norbert</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35676"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 05/11/2015 - 19:20.</div>
    <div class="content">
     <p>Hi&nbsp;Norbert. I can probably see why you found the installation guide location confusing, because there is no clear pathway from OEM&#39;s home page with most links pointing to the pre-loaded image.</p>
<p>Having said that, it&#39;s not a good start for a new system to dip in and out of different guides, and although your current issue could probably be fixed, it would be good to have the confidence that your system is installed correctly, and prevent any problems further down the road. You may have it installed for a long time!</p>
<p>I suppose I am asking whether you want to fix the issue you have, or start afresh.</p>
<p>If you choose to start afresh, the guide that you should follow is the dedicated <a href="https://github.com/emoncms/emoncms/blob/9.0/docs/RaspberryPi/readme.md">Raspberry Pi (Wheezy) guide</a>, which I would follow and install it on your SD card. Once you get to the end of the guide there is a link to run a script to automatically copy and switch your OS root to your external drive.</p>
<p>Wheezy is the OEM &#39;endorsed&#39; operating system which has been used for some time, therefore most of the anomalies&nbsp;&amp; bugs have been sorted. But there is nothing to stop you installing it on Jessie if you prefer, <a href="https://github.com/emoncms/emoncms/blob/9.0/docs/RaspberryPi/install_Raspbian_Jessie.md">using this guide</a>. I&#39;m running emoncms on Jessie and it works absolutely&nbsp;fine, but the choice is yours.</p>
<p>If you have&nbsp;any issues it would probably be better to start a new thread, rather than adding to this one.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35678"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8963.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mnmn&#039;s picture" title="mnmn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/8963.html" title="View user profile.">mnmn</a> on Thu, 05/11/2015 - 20:44.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>thank you very much for the rapid and very helpful reply.</p>
<p>I think, at the moment I&#39;ve got nothing to lose, so I will do a new install.</p>
<p>If I got stucked&nbsp;somewhere, then I will come back :)</p>
<p>thanks for the links,</p>
<p>I&#39;m downloading a Jessie image...</p>
<p>best regards,</p>
<p>Norbert</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35680"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Thu, 05/11/2015 - 20:50.</div>
    <div class="content">
     <p><em>there is no clear pathway from OEM&#39;s home page with most links pointing to the pre-loaded image.</em></p>
<p>I added installation instruction links to the FAQ page.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35685"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 05/11/2015 - 22:33.</div>
    <div class="content">
     <p><em>I added installation instruction links to the FAQ page.</em></p>
<p>Got to say, I wouldn&#39;t intuitively have gone to the FAQ to look for installation guides. I&#39;ve just had a look how the two most &#39;oem&nbsp;quoted&#39; websites deal with installations;</p>
<p><a href="http://nodered.org/">http://nodered.org/</a><br />
Front and center&nbsp;- &#39;Getting Started&#39; on home page shows&nbsp;simplistic&nbsp;installation, with a link beneath giving detailed instructions.</p>
<p><a href="http://www.openhab.org/">http://www.openhab.org/</a><br />
Again, right from home page - &#39;Getting Started&#39; which links into detailed instructions.</p>
<p>Hardly an objective analysis, but I think the installation guides do need promoting to make it easier for visitors to get the correct guide.</p>
<p>As a &#39;user&#39; Norbert, what was your experience?</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35687"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8963.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="mnmn&#039;s picture" title="mnmn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/8963.html" title="View user profile.">mnmn</a> on Thu, 05/11/2015 - 23:18.</div>
    <div class="content">
     <p>&gt;As a &#39;user&#39; Norbert, what was your experience?</p>
<p>:)</p>
<p>Thanks for the question :)</p>
<p>To tell the truth: I was lost on the site.</p>
<p>I&#39;m an IT guy, with a huge geek-factor, and I like to try out new, interesting things (either devices or softwares). And I do this on a daily basis. I usually try to find user descriptions first, because (in my practise) they are much more up-to-date and detailed, than the &quot;factory-made&quot; guides. Simply because they are really doing the steps, that they write down, whereas the official guides are often only a more-or-less revisited stuffs, from 2 years before...</p>
<p>Maybe that&#39;s why I give up searching for the install guide. I do scan the sentences&nbsp;under the&nbsp;FAQ menu, and click on the Getting started link, but I couldn&#39;t find anything similar to what I was searching.</p>
<p>However, here I realized, that the the discussions in the&nbsp;forum topics&nbsp;are very useful and detailed enough, but there are simply too many topics, and the forum&nbsp;lacks the most important thing: which is the latest, and exactly what alternatives are there at all. I read at least 60 topics, each was held open on the&nbsp;tabs of my browser, and I tried to &quot;accumulate&quot; the information, and filter to my needs...&nbsp;</p>
<p>I wasn&#39;t really sucessful :)</p>
<p>A simple &quot;Installation&quot; menu item would be really useful.</p>
<p>&nbsp;</p>
<p>By the way:</p>
<p>I&#39;ve just ended the fresh install process, and everything seems to work well.</p>
<p>Thank you very much for pointing me to the good guide :)</p>
<p>(I&#39;ve installed Jessie)</p>
<p>Even the 3relay WIfi thermostat is working now, and emonCMS is recording the data from the DHT sensor :)</p>
<p>I&#39;m very happy, and tomorrow (today) I will start customizing the inputs/feeds/etc.</p>
<p>Thanks again,</p>
<p>and please keep on developing this fantastic product! :)</p>
<p>best regards,</p>
<p>Norbert</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-35690"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: First open energy monitor project (PART 2)</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 06/11/2015 - 00:20.</div>
    <div class="content">
     <p>Thanks for the feedback Norbert, and I think that you made the wise decision.<br />
I also&nbsp;agree with your comments, I hope that they&nbsp;trigger a change in the oem website structure...</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10055"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-KwaJmlJXIgOCk7NE64vIZbApd09Q1b7VOF4oPMXQX7I" value="form-KwaJmlJXIgOCk7NE64vIZbApd09Q1b7VOF4oPMXQX7I"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
