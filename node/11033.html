<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11033 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:56:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Logging import/export separately (from one input) | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Logging import/export separately (from one input)</h3>
        <span class="submitted">Submitted by <a href="../user/8471.html" title="View user profile.">ChrisBirkett</a> on Sat, 25/07/2015 - 14:20</span>
        <div class="content"><p>I&#39;m sending my fusebox &lt;-&gt; grid reading to a house_power feed, which is negative when exporting and positive when importing. I&#39;m also sending the same input to Power to kWh (house_kwh) and Power to kWh/d (house_kwh_daily) feeds.</p>
<p>I&#39;d like to log my import and export in two new, separate feeds. I can&#39;t see a way to use both Allow positive and Allow negative for one input. Should I subtract my unfiltered value from my Allow positive to derive my Allow negative, or is there a &#39;neater&#39; way?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10190.html" class="topic-previous" title="Go to previous forum topic">‹ Application specific dashboards: Solar PV</a>
              <a href="5308.html" class="topic-next" title="Go to next forum topic">eMonCMS with nGinX ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-32611"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Logging import/export separately (from one input)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 25/07/2015 - 18:43.</div>
    <div class="content">
     <p>There is&nbsp;more than one way to do it but the better way IMO is to use a &quot;reset to zero&quot; -&gt; &quot;+ input&quot; effectively reseting your processlist back to it&#39;s starting point again for a 2nd chain of processes. You can to this multiple times and you don&#39;t necessarily&nbsp;<em>need</em> to use the + input, in fact using a&nbsp;+feed if at all possible is much more robust.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32616"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8471.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChrisBirkett&#039;s picture" title="ChrisBirkett&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Logging import/export separately (from one input)</h3>

    <div class="submitted">Submitted by <a href="../user/8471.html" title="View user profile.">ChrisBirkett</a> on Sat, 25/07/2015 - 19:38.</div>
    <div class="content">
     <p>Perfect, just what I needed, thanks Paul.</p>
<p>Out of curiosity, can I ask what makes +feed more robust than +input?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32618"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Logging import/export separately (from one input)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 25/07/2015 - 19:57.</div>
    <div class="content">
     <p>Inputs are very easy to delete without confirmation and then they get replaced automatically when the next packet arrives. Any processlists&nbsp;referencing the deleted input will stop at that point and not finish the processes so usually means data doesn&#39;t get logged untill&nbsp;you figure it out. where as feeds are A) not so freely deleted as they hold valuable data and when you do try to delete one emoncms&nbsp;gives a warning and asks you to confirm.</p>
<p>Also if you have inputs that are only used in other processing lists and do not have their own processes, when emoncms.org is &quot;purged&quot; of&nbsp;&quot;rogue&quot;&nbsp;inputs,it could&nbsp;be&nbsp;considered&nbsp;unused and therefore deleted.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32621"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8471.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChrisBirkett&#039;s picture" title="ChrisBirkett&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Logging import/export separately (from one input)</h3>

    <div class="submitted">Submitted by <a href="../user/8471.html" title="View user profile.">ChrisBirkett</a> on Sat, 25/07/2015 - 20:41.</div>
    <div class="content">
     <p>All good to know! I&#39;m actually sending my inputs to my own emoncms installation (probably a good thing as I&#39;m&nbsp;now logging 16 feeds and counting.. plus I wanted to stop all SD logging on my emonpi)</p>
<p>On the subject of feeds and inputs, I noticed this in my emonpi &gt; Emonhub &gt; emoncms.log.&nbsp;I had a quick look at the code but haven&#39;t as yet found what is trying to &#39;get&#39; these feeds. Is there an easy way to find out where these phantom references are? Right now this log is hitting the SD way more than the feeds would do, so I&#39;m tempted just to put them back!</p>
<pre>
2015-7-25 21:38:09 FEED WARN Feed model: Requested feed does not exist feedid=3
2015-7-25 21:38:09 FEED WARN Feed model: Requested feed does not exist feedid=2
2015-7-25 21:38:09 FEED WARN Feed model: Requested feed does not exist feedid=4
2015-7-25 21:38:09 FEED WARN Feed model: Requested feed does not exist feedid=5
2015-7-25 21:38:09 FEED WARN Feed model: Requested feed does not exist feedid=6
2015-7-25 21:38:14 MQTT INFO Reloading config
2015-7-25 21:38:14 MQTT INFO Received mqtt message: emonhub/rx/5/values
 353,1,354,249.04,0,0,0,0,0,0,0
2015-7-25 21:38:14 FEED WARN Feed model: Requested feed does not exist feedid=1
2015-7-25 21:38:14 FEED WARN Feed model: Requested feed does not exist feedid=3
2015-7-25 21:38:14 FEED WARN Feed model: Requested feed does not exist feedid=2
2015-7-25 21:38:14 FEED WARN Feed model: Requested feed does not exist feedid=4
2015-7-25 21:38:14 FEED WARN Feed model: Requested feed does not exist feedid=5
2015-7-25 21:38:14 FEED WARN Feed model: Requested feed does not exist feedid=6
2015-7-25 21:38:20 MQTT INFO Reloading config
2015-7-25 21:38:24 MQTT INFO Received mqtt message: emonhub/rx/5/values
 345,0,345,249.81,0,0,0,0,0,0,0</pre><p>&nbsp;</p>
<p><em>Edit - wrapped long lines - BT</em></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32623"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Logging import/export separately (from one input)</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 25/07/2015 - 21:05.</div>
    <div class="content">
     <p>Unfortunately that&#39;s not a fault I&#39;ve seen and I&#39;m not familiar with PHP or that version of emoncms.</p>
<p>It looks like the error is being written by <a href="https://github.com/emoncms/emoncms/blob/low-write/Modules/feed/feed_model.php#L435">line 435 of feed_model.php</a>&nbsp;but thats&nbsp;not very enlightening. If you are using a pre-configure SDcard image ie read-only image then the log files are kept in ram and the SDcard should be spared the logfile writes but it is best to sort it regardless.</p>
<p>Paul&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32646"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8471.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChrisBirkett&#039;s picture" title="ChrisBirkett&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Logging import/export separately (from one input)</h3>

    <div class="submitted">Submitted by <a href="../user/8471.html" title="View user profile.">ChrisBirkett</a> on Sun, 26/07/2015 - 21:27.</div>
    <div class="content">
     <p>Just a quick follow up for anyone who else who sees this in future:</p>
<pre>
2015-7-25 21:38:09 FEED WARN Feed model: Requested feed does not exist feedid=3</pre><p>I had deleted feeds from my emonpi&nbsp;but references to these feeds remained associated with my inputs - I needed to remove these on the Inputs page.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11033"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-uwX2lA9QLRCpap0gjRi-IrX0Km0BpYk7Tl4ePktxjMM" value="form-uwX2lA9QLRCpap0gjRi-IrX0Km0BpYk7Tl4ePktxjMM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/11033 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:56:59 GMT -->
</html>
