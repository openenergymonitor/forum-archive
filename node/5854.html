<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5854 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:24:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>How to clear all datapoints? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">How to clear all datapoints?</h3>
        <span class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Wed, 01/10/2014 - 21:18</span>
        <div class="content"><p>Hi guys...</p>
<p>i have asked this a lot and there it seems that nobody knows....</p>
<p>&nbsp;</p>
<p>but are thare not a command i can fire so that the datapoints are cleared but everything else i keept intact...</p>
<p>&nbsp;</p>
<p>i want to do this when the pi finds its final install place... for now its on a shelf near the router and not in the utility closet where i want...</p>
<p>&nbsp;</p>
<p>so the data its logging now is just kind of test data... but i have build dashboards etc just to my liking... dont want to do that all over again</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5996.html" class="topic-previous" title="Go to previous forum topic">‹ Emoncms.org IP address update 176.227.193.50 ==&gt; 80.243.190.58</a>
              <a href="1048.html" class="topic-next" title="Go to next forum topic">Almost blank page when trying to register ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-24221"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 01/10/2014 - 21:23.</div>
    <div class="content">
     <p>Bo, can you edit your post and give it a proper title please, relative to the issue that you are raising.&nbsp;<br />
	<span style="font-size: 12px;">Calling it &#39;</span>@Glyn<span style="font-size: 12px;"> or </span>Trystan<span style="font-size: 12px;">&#39; is not helpful when members review or search posts, and directing your question to named persons goes against forum etiquette.<br />
	If you wish to restrict your question to T&amp;G, then perhaps you should PM them instead of posting in a members forum.</span></p>
<p>Thanks</p>
<p>Paul - <em>forum moderator</em></p>
<p><em>Edit 2/10 --&gt; Post Title changed by me....</em></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24257"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Thu, 02/10/2014 - 22:48.</div>
    <div class="content">
     <p>well... i have asked and no other user knew... i could PM them but then the other users would not benefit from the answer....&nbsp;</p>
<p>&nbsp;</p>
<p>the @ was just to attract attention...</p>
<p>&nbsp;</p>
<p>EDIT: have put back the @ part but also keept the better topic...&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24258"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-349.jpg" alt="EnergyRnR&#039;s picture" title="EnergyRnR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/349.html" title="View user profile.">EnergyRnR</a> on Thu, 02/10/2014 - 23:07.</div>
    <div class="content">
     <p>I would use phpmyadmin and delete the data you don&#39;t need ( i.e. between certain dates) in sql.&nbsp;</p>
<p>Another option, if you have too much data, would be to just save the source for the dashboard (i.e. back them up) and then d a clean install of everything from the beginning. Then manually put the dashboard source code into sql, and do some minor edits in emoncms to set up the appropriate feeds.&nbsp;</p>
<p>Eamonn</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24260"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Fri, 03/10/2014 - 02:21.</div>
    <div class="content">
     <p>If you delete, then recreate your feeds, that will do what you want. After recreating your feeds, you&#39;ll have to go into the dashboard editor and reassign the feeds to your widgets and visualizations, but you shouldn&#39;t have to rebuild them. I&#39;ve done this several times with no problems.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24268"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 03/10/2014 - 10:41.</div>
    <div class="content">
     <p>@boelle, Seconding Bill Thomson, deleting and recreating the feeds is currently the way to do this. A clear feed function would be a nice feature to add.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24271"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 03/10/2014 - 11:35.</div>
    <div class="content">
     <p>I think i will opt for the phpmyadmin&nbsp;way....&nbsp;</p>
<p>&nbsp;</p>
<p>deleting all feeds and recreate them means that they are not in sync so to speak.... my feeds for district hot water has to start at the same time so i can compare them...</p>
<p>&nbsp;</p>
<p>but yes a clear all data botton&nbsp;would be damm nice :-D</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24571"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Wed, 15/10/2014 - 12:11.</div>
    <div class="content">
     <p>how would you do it via phpadmin? i can see the feeds table but not the data...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24572"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Wed, 15/10/2014 - 12:15.</div>
    <div class="content">
     <p>could it be that its now timeseries&nbsp;and not sql? so i have to edit a text file instead and clear it that way?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24573"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Wed, 15/10/2014 - 12:25.</div>
    <div class="content">
     <p>figuered one way to do it</p>
<p>&nbsp;</p>
<p>log in as pi</p>
<p>&nbsp;</p>
<p>go to /data/phptimeseries... simply delete the feed file you want to clear...</p>
<p>&nbsp;</p>
<p>wait a bit and the file is recreated</p>
<p>&nbsp;</p>
<p>can an expert confirm its a valid way to do it?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24575"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Wed, 15/10/2014 - 12:31.</div>
    <div class="content">
     <p>did almost work... it keeps the last data... prob&nbsp;because the logging is running in background</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24589"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 16/10/2014 - 11:17.</div>
    <div class="content">
     <p>I assume you are using the latest SD card image. you could try stopping emonHub before deleting the feed data</p>
<p><strong>&nbsp;&nbsp;&nbsp; sudo service emonhub stop</strong></p>
<p>and then after you&#39;ve finished</p>
<p><strong>&nbsp;&nbsp;&nbsp; sudo service emonhub start</strong></p>
<p>But if you still have &quot;old&quot; data showing up after that, you may need to try again but this time also flush any data from redis</p>
<p><strong>&nbsp;&nbsp;&nbsp; sudo redis-cli FLUSHALL</strong></p>
<p>will flush all redis data from all feeds.</p>
<p>The &quot;safe&quot; way is to delete the feed as previously suggested but in theory yes there should be a way of deleting just the feed data. You can see what happens when you delete a feed the correct way in emoncms by looking at this code.</p>
<p><a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/Modules/feed/feed_model.php#L436">https://github.com/emoncms/emoncms/blob/bufferedwrite/Modules/feed/feed_model.php#L436</a></p>
<p>It seems 3 things are done:</p>
<ol>
<li>
		Delete the feed, which you are doing</li>
<li>
		Delete the SQL data - which you don&#39;t want to do so that it&#39;s retained</li>
<li>
		Delete redis data.</li>
</ol>
<p>Then if the data feed is recreated ok it would appear this method works. There is also a feed value retained in the SQL table but I do not know if that will effect the new data or not so you may also need to delete that value also but its unlikely.</p>
<p>Interested to hear how you get on.</p>
<p>Paul</p>
<p>EDIT - in fact you will probally also need to stop apache, depending on the data feed type, as even with no new data coming in to emonCMS the data engine may continue to create data points at regular intervals.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24769"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3149.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3149.jpg" alt="boelle&#039;s picture" title="boelle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to clear all datapoints?</h3>

    <div class="submitted">Submitted by <a href="../user/3149.html" title="View user profile.">boelle</a> on Fri, 24/10/2014 - 11:11.</div>
    <div class="content">
     <p>having gotten my kwh data poisened&nbsp;by the 1970 issue i would wish emoncms came with a tool to edit datapoints&nbsp;rather than clearing data</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5854"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-4703wWN4iP7jFVk2_V0N1d2E3NjMFnMFWBbNTjf5sDY" value="form-4703wWN4iP7jFVk2_V0N1d2E3NjMFnMFWBbNTjf5sDY"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
