<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12444 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:19:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Apps menu on emonPi broken, shows &#039;Notice: Undefined offset: 0&#039; | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Apps menu on emonPi broken, shows &#039;Notice: Undefined offset: 0&#039;</h3>
        <span class="submitted">Submitted by <a href="../user/9734.html" title="View user profile.">rtyley</a> on Fri, 01/04/2016 - 12:30</span>
        <div class="content"><p>All 4 menu items under &#39;Apps&#39; on my emonPi are showing&nbsp;&#39;Notice: Undefined offset: 0 in /var/www/emoncms/Theme/menu_view.php&nbsp;on line 42&#39; and linking to this url:</p>
<p><a href="http://emonpi.local/emoncms/feed/%3Cbr /%3E%3Cb%3ENotice%3C/b%3E:  Undefined offset: 1 in %3Cb%3E/var/www/emoncms/Theme/menu_view.php%3C/b%3E on line %3Cb%3E41%3C/b%3E%3Cbr /%3Ehttp://emonpi.local/emoncms/" title="http://emonpi.local/emoncms/feed/%3Cbr%20/%3E%3Cb%3ENotice%3C/b%3E:%20%20Undefined%20offset:%201%20in%20%3Cb%3E/var/www/emoncms/Theme/menu_view.php%3C/b%3E%20on%20line%20%3Cb%3E41%3C/b%3E%3Cbr%20/%3Ehttp://emonpi.local/emoncms/">http://emonpi.local/emoncms/feed/%3Cbr%20/%3E%3Cb%3ENotice%3C/b%3E:%20%2...</a></p>
<p>&nbsp;</p>
<p>I&#39;ve got feeds for PV generation and power consumption working, and can use entries under &#39;Vis&#39;, but I believe the most attractive displays are under &#39;Apps&#39;, and I&#39;d like to see them!</p>
<p>&nbsp;</p>
<p>I&#39;ve performed the emon&nbsp;software&nbsp;update at <a href="http://emonpi.local/emoncms/admin/view" title="http://emonpi.local/emoncms/admin/view">http://emonpi.local/emoncms/admin/view</a>, so I should have the latest version. I notice these ominious lines in&nbsp;http://emonpi.local/emoncms/admin/getemonpiupdatelog&nbsp;:</p>
<pre>

git pull /var/www/emoncms/Modules/graph
* master
Already up-to-date.

git clone <a href="https://github.com/emoncms/graph" title="https://github.com/emoncms/graph">https://github.com/emoncms/graph</a>
fatal: destination path &#39;graph&#39; already exists and is not an empty directory.

Copy new default.emonpi.settings.php to settings.php &amp; make backup old.emonpi.settings.php
</pre><p>&nbsp;</p>
<p>I&#39;ve attempted to rectify this problem by running &#39;sudo emonpi/factoryreset&#39;, but without any luck - (and&nbsp;had to set the wifi &amp; feeds up again).</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&#39;emonPi&nbsp;- Solar PV&#39; purchased 29th February 2016 from <a href="http://shop.openenergymonitor.com/" title="http://shop.openenergymonitor.com/">http://shop.openenergymonitor.com/</a></p>
<p>emoncms:&nbsp;vlow-write-v8.5</p>
<p>pi@emonpi ~ $ uname -a<br />
Linux emonpi 3.18.11-v7+ #781 SMP PREEMPT Tue Apr 21 18:07:59 BST 2015 armv7l GNU/Linux</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12533.html" class="topic-previous" title="Go to previous forum topic">‹ Can I &quot;debounce&quot; in emoncms feed processing?</a>
              <a href="12536.html" class="topic-next" title="Go to next forum topic">Retrospectively write data to a feed? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-40830"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9743.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="braind&#039;s picture" title="braind&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Apps menu on emonPi broken, shows 'Notice: Undefined offset: 0'</h3>

    <div class="submitted">Submitted by <a href="../user/9743.html" title="View user profile.">braind</a> on Sat, 02/04/2016 - 15:14.</div>
    <div class="content">
     <p>Following the summer time change I&#39;ve had problems with no bargraph in the myelectric app on the emoncms site. I also updated my local emonpi exactly as the above poster has (with the same message about graph) and now have the apps menu showing undefined error exactly as the poster above describes. I&#39;m using emoncms v8.5 lo write.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40873"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8475.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="NeilW&#039;s picture" title="NeilW&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Apps menu on emonPi broken, shows 'Notice: Undefined offset: 0'</h3>

    <div class="submitted">Submitted by <a href="../user/8475.html" title="View user profile.">NeilW</a> on Mon, 04/04/2016 - 16:13.</div>
    <div class="content">
     <p>The update script is broken. I&#39;ve sent an email to Glyn&nbsp;pointing out the problem. Hopefully he&#39;ll be able to get it sorted.&nbsp;</p>
<p>Not sure what is going on, but that bit is trying to create a postprocess directory and failing.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40879"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8475.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="NeilW&#039;s picture" title="NeilW&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Apps menu on emonPi broken, shows 'Notice: Undefined offset: 0'</h3>

    <div class="submitted">Submitted by <a href="../user/8475.html" title="View user profile.">NeilW</a> on Mon, 04/04/2016 - 17:11.</div>
    <div class="content">
     <p>The Menu is broken because the Theme in use isn&#39;t designed to work with the new menu array structure. The low-write branch of emoncms&nbsp;has the wrong Theme.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40884"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Apps menu on emonPi broken, shows 'Notice: Undefined offset: 0'</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Mon, 04/04/2016 - 19:20.</div>
    <div class="content">
     <p>Update script has been fixed, thanks for letting me know. I&#39;ve notified Trystan about the Apps URL issue.&nbsp;</p>
<p><a href="https://github.com/openenergymonitor/emonpi/commit/903d9bb7a41f0a41f14c7ee697ce59653143b105" title="https://github.com/openenergymonitor/emonpi/commit/903d9bb7a41f0a41f14c7ee697ce59653143b105">https://github.com/openenergymonitor/emonpi/commit/903d9bb7a41f0a41f14c7...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41098"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9217.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="AndyMc&#039;s picture" title="AndyMc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Apps menu on emonPi broken, shows 'Notice: Undefined offset: 0'</h3>

    <div class="submitted">Submitted by <a href="../user/9217.html" title="View user profile.">AndyMc</a> on Tue, 12/04/2016 - 13:19.</div>
    <div class="content">
     <p>I am experiencing the same issue and have updated the emoncmsupdate file with the new lines of code (74 thru 77). I then re-ran the Update emonpi from the Admin page of&nbsp;Emoncms. This did not restore the Apps.</p>
<p>The nodes and feeds appear to work correctly.</p>
<p>I am using low-write-V8.5.</p>
<p>Because of the time it takes to set up the nodes and feeds as well as the calibration of the CT&#39;s i am loath to start over with a fresh image.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41113"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rjsears&#039;s picture" title="rjsears&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Apps menu on emonPi broken, shows 'Notice: Undefined offset: 0'</h3>

    <div class="submitted">Submitted by <a href="../user/9729.html" title="View user profile.">rjsears</a> on Tue, 12/04/2016 - 21:40.</div>
    <div class="content">
     <p>I am having the exact same problem. BRAND NEW emonpi and 5 x emonTX3, 4 x emonTH.</p>
<p>Followed update instructions, watched logs, got this error in logs:</p>
<p>
git pull /home/pi/postprocess error: unknown option `set-upstream-to=origin/emonpi&#39;</p>
<p>&nbsp;</p>
<p>Now apps menu&nbsp;is broken (Notice:Undefined offset: 0) like the others. Don&#39;t want to spend hours setting this up just to have to redo it, how do I fix the errors?</p>
<p>&nbsp;</p>
<p>Many Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41276"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8353.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Westerner&#039;s picture" title="Westerner&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Apps menu on emonPi broken, shows 'Notice: Undefined offset: 0'</h3>

    <div class="submitted">Submitted by <a href="../user/8353.html" title="View user profile.">Westerner</a> on Wed, 20/04/2016 - 07:22.</div>
    <div class="content">
     <p>Has anyone arrived at a solution for the lost Apps (undefined offset) problem?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41315"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Apps menu on emonPi broken, shows 'Notice: Undefined offset: 0'</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 21/04/2016 - 16:08.</div>
    <div class="content">
     <p>This bug is now fixed sorry for the delay. The fix is in the low-write branch of emoncms rather than the app module and can be updated by running the emonpi update.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-41323"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8353.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Westerner&#039;s picture" title="Westerner&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Apps menu on emonPi broken, shows 'Notice: Undefined offset: 0'</h3>

    <div class="submitted">Submitted by <a href="../user/8353.html" title="View user profile.">Westerner</a> on Thu, 21/04/2016 - 20:12.</div>
    <div class="content">
     <p>Many thanks, Trystan. Apps are back. In the update log file there is the following error message:</p>
<p>git pull /home/pi/postprocess</p>
<p>error: unknown option `set-upstream-to=origin/emonpi&#39;</p>
<p>Is that of any concern?<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12444"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-BWXdICH5JGJGKSp2A7Ci42Y_jq2yk-lnk53hfiWCPoY" value="form-BWXdICH5JGJGKSp2A7Ci42Y_jq2yk-lnk53hfiWCPoY"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/12444 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:19:01 GMT -->
</html>
