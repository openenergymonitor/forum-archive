<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5915 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:11:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Inactive inputs | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Inactive inputs</h3>
        <span class="submitted">Submitted by <a href="../user/7035.html" title="View user profile.">snerone</a> on Thu, 09/10/2014 - 15:00</span>
        <div class="content"><p>A couple of days ago I set up my raspberry pi with the pre-installed emonhub&nbsp;SD card +&nbsp;RFM12P1 unit together with the emonTX V3. Stupidly, I hadn&#39;t ordered the CT clamps. But I thought I&#39;d still complete the basic set up whlie I waited for the clamps to arrive.&nbsp;</p>
<p>I created a new account on emoncms.org. I logged into the raspberry and configured the econhub.conf file as per the instructions: url set to emoncms.org, apikey&nbsp;set to the write API key in my new account, I left group, frequency and baseid to default values and altered the datacodes as instructed. Saved and put the pi back to read only.&nbsp;</p>
<p>Then I plugged&nbsp;in the emonTX with only its charger (no CT clamps), I checked my emoncms account (&quot;snerone&quot;) and bingo, it gave me an input reading on Key 5 for the voltage reading. Brilliant, I thought. Everyone&#39;s talking to each other. I&#39;m not using any local installation of emoncms.</p>
<p>Today I received the two CT sensors and got clamping. I clamped the sensors around the incoming PV live and the other on the mains incoming live. Then I carefully set up the pi and the emonTX&nbsp;aerials so that they had a clear line of sight across the kitchen and dining room (c.10m). I logged into my emoncms&nbsp;account and saw inactive input readings - only the first reading from my initial set up and test a couple of days ago was there:&nbsp;</p>
<p><img alt="" src="../../../digital-pencil.com/img/emoncms.first.reading.html" style="width: 700px; height: 172px;" /></p>
<p>[I don&#39;t like the 280V reading. It&#39;s a bit too high. But we&#39;re at the end of the line in the middle of the countryside and with the solar PV&#39;s now online I&#39;ve seen it fluctuating between 240V and 268V. I&#39;m ignoring it for now, but will call in our providers to install a regulator of some sort.]</p>
<p>So, I tried switching the CT sensors onto the neutral wires. But still nothing. Reset the EmonTX a couple of times. Thinking that maybe it was a signal issue, I removed the CT sensors and moved the emonTX right next to the raspberry with only the voltage adapter plugged in. But still no readings. What&#39;s going on?</p>
<p>In the meantime, I found the <a href="https://github.com/emoncms/raspberrypi">RFM12P1 Interface module for emoncms&nbsp;github</a> page and followed the instructions until I got stuck at:</p>
<blockquote><p>Clone the repository into the Modules/ directory of your emoncms installation.</p>
</blockquote>
<p>Clone who? How?&nbsp;</p>
<p>&nbsp;</p>
<p>Thanks!</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5963.html" class="topic-previous" title="Go to previous forum topic">‹ getting started with rfm12pi</a>
              <a href="5929.html" class="topic-next" title="Go to next forum topic">EmonTX PhaseShift Value Outside Range ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-24427"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 09/10/2014 - 15:18.</div>
    <div class="content">
     <p>Hi, the raspberrypi&nbsp;module for emoncms&nbsp;you refer to is specific to a local emoncms installation and was the interface between emonCMS&nbsp;and the RFM2Pi&nbsp;board before emonHub. The SD card has emonHub&nbsp;installed and that interfaces directly with the RFM2Pi and then forwards the data to emonCMS. So you don&#39;t need the raspberrypi&nbsp;module and in fact installing it will cause a conflict with emonHub.</p>
<p>Have you had a look at the emonhub log file ?</p>
<blockquote><p><strong>cat /var/log/emonhub/emonhub.log&nbsp;</strong></p>
</blockquote>
<p>will show you the contents of the file since boot and</p>
<blockquote><p><strong>tail -f&nbsp;</strong><strong>/var/log/emonhub/emonhub.log</strong></p>
</blockquote>
<p>will show you the last 10 log messages and any new ones as they happen</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24436"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7035.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7035.png" alt="snerone&#039;s picture" title="snerone&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/7035.html" title="View user profile.">snerone</a> on Thu, 09/10/2014 - 17:40.</div>
    <div class="content">
     <p>&nbsp;</p>
<p>Ah! Thank you. A log to look at :)&nbsp;<br />
	It&#39;s full of error warnings. The first three warnings are:&nbsp;</p>
<blockquote><p>
		<strong>1970-01-01 00:00:26,495 WARNING 1 Discarded RX frame &#39;non-numerical content&#39; : [&#39;&gt;\x00&#39;, &#39;84b&#39;] <br />
		1970-01-01 00:00:26,901 WARNING 3 Discard RX frame &#39;information&#39; : [&#39;&gt;&#39;, &#39;210g&#39;]<br />
		 1970-01-01 00:00:27,308 WARNING 5 Discard RX frame &#39;information&#39; : [&#39;&gt;&#39;, &#39;15i&#39;]</strong></p>
</blockquote>
<p>
	Then there&#39;s an endless slew of:</p>
<blockquote><p>
		<strong>.... data length: 12 is not valid for datacodes [&#39;L&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;]</strong></p>
</blockquote>
<p>And yet, I followed the guide here which states to change the datacodes in /boot/emonhub.conf:</p>
<blockquote><p><strong>Under the title &#39;Nodes&#39; replace the lines:<br />
		[[99]] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; datacode = h &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; datacodes = l, h, h, h, with:<br />
		[[10]] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; datacodes = L, h, h, h, h, l, l, l, l</strong></p>
</blockquote>
<p>Have I done something daft?<br />
	Also, should I uninstall what I&#39;ve done so far? Or can the php,&nbsp;pecl and emoncms-module-rfm12pi&nbsp;libraries sit wherever they are as I haven&#39;t moved them to the rpi Module folder yet?</p>
<p><em>[2 near duplicate posts deleted - Moderator (RW)]</em></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7035.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7035.png" alt="snerone&#039;s picture" title="snerone&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/7035.html" title="View user profile.">snerone</a> on Fri, 10/10/2014 - 08:22.</div>
    <div class="content">
     <p>I&#39;ve done a bit more reading on my log warnings.&nbsp;</p>
<p>I saw your post (paul) re the 1970 date quirk and may follow that route. But I don&#39;t think it&#39;s the issue. Only the first 6 lines of the log display the wrong date. Subsequent warning logs , instead, display the correct time (minus 2hrs):</p>
<blockquote><p>1970-01-01 00:00:23,427 INFO EmonHub Pre-Release Development Version (rc1.0)<br />
		1970-01-01 00:00:23,429 INFO Opening hub...<br />
		1970-01-01 00:00:26,463 WARNING 1 Discarded RX frame &#39;non-numerical content&#39; : [&#39;&gt;\x00&#39;, &#39;4b&#39;]<br />
		1970-01-01 00:00:26,870 WARNING 3 Discard RX frame &#39;information&#39; : [&#39;&gt;&#39;, &#39;210g&#39;]<br />
		1970-01-01 00:00:27,283 WARNING 5 RX data length: 12 is not valid for datacodes [&#39;L&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;]<br />
		1970-01-01 00:00:27,499 WARNING 6 Discard RX frame &#39;information&#39; : [&#39;&gt;&#39;, &#39;15i&#39;]<br />
		2014-10-10 06:06:32,230 WARNING 8 RX data length: 12 is not valid for datacodes [&#39;L&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;]</p>
</blockquote>
<p>So I assume that emonhub is setting the time to 0 (1970) in the 27seconds&nbsp;or so that it takes the raspberry to retrieve the real network&#39;s time.&nbsp;</p>
<p>If I run&nbsp;the the fake-hwclock command and then the date command I&#39;m &quot;roughly&quot; in the right place give or take an hour or two:</p>
<blockquote><p>pi@raspberrypi ~ $ cat /etc/fake-hwclock.data<br />
		<strong>2014-10-10 07:17:0</strong>1<br />
		pi@raspberrypi ~ $ date<br />
		<strong>Fri Oct 10 08:16:45 UTC 2014</strong></p>
</blockquote>
<p>I&#39;ve checked my router and it&#39;s correctly set to GMT+1, which is my current location. I&#39;m not too worried about the +1-2 hour discrepency.</p>
<p>Following another post I&#39;ve just set the loglevel (/boot/emonhub.conf) to DEBUG and this is what the log reports:</p>
<blockquote><p>2014-10-10 08:01:43,409 INFO Logging level set to DEBUG<br />
		2014-10-10 08:01:50,734 DEBUG 667 NEW FRAME : 1412928110.73&nbsp; 10 55 2 0 0 0 0 0 0 248 104 0 0<br />
		2014-10-10 08:01:50,738 WARNING 667 RX data length: 12 is not valid for datacodes [&#39;L&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;]<br />
		2014-10-10 08:02:01,305 DEBUG 668 NEW FRAME : 1412928121.31&nbsp; 10 155 1 0 0 0 0 0 0 230 103 0 0<br />
		2014-10-10 08:02:01,309 WARNING 668 RX data length: 12 is not valid for datacodes [&#39;L&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;]<br />
		2014-10-10 08:02:11,893 DEBUG 669 NEW FRAME : 1412928131.89&nbsp; 10 63 2 0 0 0 0 0 0 242 104 0 0<br />
		2014-10-10 08:02:11,897 WARNING 669 RX data length: 12 is not valid for datacodes [&#39;L&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;]<br />
		2014-10-10 08:02:22,465 DEBUG 670 NEW FRAME : 1412928142.47&nbsp; 10 44 1 0 0 0 0 0 0 18 103 0 0<br />
		2014-10-10 08:02:22,471 WARNING 670 RX data length: 12 is not valid for datacodes [&#39;L&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;]<br />
		2014-10-10 08:02:33,039 DEBUG 671 NEW FRAME : 1412928153.04&nbsp; 10 119 1 0 0 0 0 0 0 197 103 0 0<br />
		2014-10-10 08:02:33,044 WARNING 671 RX data length: 12 is not valid for datacodes [&#39;L&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;]</p>
</blockquote>
<p>&nbsp;</p>
<p>Seb</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24457"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 10/10/2014 - 10:33.</div>
    <div class="content">
     <p>The most important issue here is the incorrect time and date, see&nbsp;<a href="5899.html">http://openenergymonitor.org/emon/node/5899</a>&nbsp;for more insight and how to reset the time.&nbsp;</p>
<p>The datacodes error says the frame received only contains 12 byte values and therefore it cannot translate it to the string of datacodes you have specified (1 unsigned long (4bytes) + 4 signed ints&nbsp;(8bytes) + 4 signed longs (16bytes) = 28 bytes) I suspect you are running the standard sketch on the emonTx, if that is the case the payload is all ints and requires no declaration in emonhub.conf [nodes].</p>
<p>you can remove the emoncms&nbsp;module using</p>
<blockquote><p>
		<strong>sudo&nbsp;apt-get remove&nbsp;</strong><strong>emoncms-module-rfm12pi</strong></p>
</blockquote>
<p>just to avoid any future clashes or confusion and I suspect the php stuff should be ok.</p>
<p>Once you&#39;ve sorted those and tried again we can have another look, the 1st line of your log looks a little odd too, that frame would normally end&nbsp;[&#39;&gt;&#39;, &#39;4b&#39;] or&nbsp;[&#39;&gt;&#39;, &#39;8b&#39;] depending on if you are using 433 or 868 MHz so that looks a little confused but may clear with the above items.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24461"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7035.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7035.png" alt="snerone&#039;s picture" title="snerone&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/7035.html" title="View user profile.">snerone</a> on Fri, 10/10/2014 - 11:14.</div>
    <div class="content">
     <p>Thanks Paul.</p>
<p>Fristly, there&#39;s a post to this thread that&#39;s still awaiting moderation. It&#39;s got some extra details to what&nbsp;I&#39;ve done so far and some more logs and readings re the date issue and debug log.</p>
<p>Secondly, I&#39;ve got it working without tackling the date stamp issue. Although I&#39;ve got a sneaking suspicion that it&#39;s still not quite right. Here&#39;s what I&#39;ve done:&nbsp;</p>
<p>I re-instated the default&nbsp;datacodes in /boot/emonhub.conf file to:</p>
<blockquote><p>[[99]]<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #datacodes = L, h, h, h, h, l, l, l, l<br />
		&nbsp;&nbsp;&nbsp; datacode = h<br />
		&nbsp;&nbsp;&nbsp; datacodes = l, h, h, h,</p>
</blockquote>
<p>And now the input feeds are displaying and actively updating my readings. Hurrah! One of the CT Sensors isn&#39;t giving me anything, but that&#39;s probably my goof and needs reclamping elsewhere.&nbsp;</p>
<p>That aside. Just before (partially?) solving the palava I restarted emonhub&nbsp;and ran&nbsp;<strong>cat /var/log/emonhub/emonhub.log&nbsp;</strong>just to check what was going on. It still displays the 1970 datestamp&nbsp;for the first 27 seconds, thereafter it finds the network reading (-2hrs):&nbsp;</p>
<blockquote><p>1970-01-01 00:00:23,429 INFO EmonHub Pre-Release Development Version (rc1.0)<br />
		1970-01-01 00:00:23,432 INFO Opening hub...<br />
		1970-01-01 00:00:23,435 INFO Logging level set to DEBUG<br />
		1970-01-01 00:00:23,438 INFO Creating EmonHubEmoncmsReporter &#39;emonCMS&#39;<br />
		1970-01-01 00:00:23,443 INFO Set up reporter &#39;emonCMS&#39; (buffer: memory | size: 1000)<br />
		1970-01-01 00:00:23,448 INFO Creating EmonHubJeeInterfacer &#39;RFM2Pi&#39;<br />
		1970-01-01 00:00:23,451 DEBUG Opening serial port: /dev/ttyAMA0<br />
		1970-01-01 00:00:23,455 INFO Opened serial port: /dev/ttyAMA0 9600 bits/s<br />
		1970-01-01 00:00:23,457 DEBUG Setting RFM2Pi frequency: 433 (4b)<br />
		1970-01-01 00:00:24,462 DEBUG Setting RFM2Pi group: 210 (210g)<br />
		1970-01-01 00:00:25,466 DEBUG Setting RFM2Pi baseid: 15 (15i)<br />
		1970-01-01 00:00:26,487 DEBUG 1 NEW FRAME : 26.49 &gt; 84b<br />
		1970-01-01 00:00:26,490 WARNING 1 Discarded RX frame &#39;non-numerical content&#39; : [&#39;&gt;\x00&#39;, &#39;84b&#39;]<br />
		1970-01-01 00:00:26,694 DEBUG 2 NEW FRAME : 26.69<br />
		1970-01-01 00:00:26,696 INFO 2 Ignoring frame consisting of SOH character<br />
		1970-01-01 00:00:26,901 DEBUG 3 NEW FRAME : 26.9 &gt; 210g<br />
		1970-01-01 00:00:26,903 WARNING 3 Discard RX frame &#39;information&#39; : [&#39;&gt;&#39;, &#39;210g&#39;]<br />
		1970-01-01 00:00:27,107 DEBUG 4 NEW FRAME : 27.11<br />
		1970-01-01 00:00:27,109 INFO 4 Ignoring frame consisting of SOH character<br />
		1970-01-01 00:00:27,313 DEBUG 5 NEW FRAME : 27.31 &gt; 15i<br />
		1970-01-01 00:00:27,316 WARNING 5 Discard RX frame &#39;information&#39; : [&#39;&gt;&#39;, &#39;15i&#39;]<br />
		1970-01-01 00:00:27,532 DEBUG 6 NEW FRAME : 27.53<br />
		1970-01-01 00:00:27,534 INFO 6 Ignoring frame consisting of SOH character<br />
		1970-01-01 00:00:27,744 DEBUG 7 NEW FRAME : 27.74&nbsp; 10 21 8 0 0 0 0 0 0 91 112 0 0<br />
		1970-01-01 00:00:27,748 DEBUG 7 Timestamp : 27.74<br />
		1970-01-01 00:00:27,751 DEBUG 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Node : 10<br />
		1970-01-01 00:00:27,753 DEBUG 7&nbsp;&nbsp;&nbsp; Values : [2069, 0, 0, 0, 28763, 0]<br />
		1970-01-01 00:00:27,781 DEBUG 7 Append to &#39;emonCMS&#39; buffer =&gt; time: 27.74, data: [10, 2069, 0, 0, 0, 28763, 0], ref: 7<br />
		1970-01-01 00:00:27,884 INFO Sending: http://emoncms.org/input/bulk.json?apikey=E-M-O-N-C-M-S-A-P-I-K-E-Y&amp;data=[[27.74,10,2069,0,0,0,28763,0]]&amp;sentat=27<br />
		1970-01-01 00:00:28,382 DEBUG Receipt acknowledged with &#39;ok&#39; from <a href="http://emoncms.org/" title="http://emoncms.org">http://emoncms.org</a><br />
		2014-10-10 10:56:48,473 DEBUG 8 NEW FRAME : 1412938608.47&nbsp; 10 154 7 0 0 0 0 0 0 240 111 0 0<br />
		2014-10-10 10:56:48,478 DEBUG 8 Timestamp : 1412938608.47<br />
		2014-10-10 10:56:48,480 DEBUG 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Node : 10<br />
		2014-10-10 10:56:48,482 DEBUG 8&nbsp;&nbsp;&nbsp; Values : [1946, 0, 0, 0, 28656, 0]<br />
		2014-10-10 10:56:48,517 DEBUG 8 Append to &#39;emonCMS&#39; buffer =&gt; time: 1412938608.47, data: [10, 1946, 0, 0, 0, 28656, 0], ref: 8<br />
		2014-10-10 10:56:48,621 INFO Sending: http://emoncms.org/input/bulk.json?apikey=E-M-O-N-C-M-S-A-P-I-K-E-Y&amp;data=[[1412938608.47,10,1946,0,0,0,28656,0]]&amp;sentat=1412938608</p>
</blockquote>
<p>Another thing from the above log struck me: I&#39;m running EmonHub rc1.0. Digging around I&#39;ve seen that there&#39;s an rc1.1. Could this be the source of my problems?</p>
<p>Many thanks for the support.&nbsp;</p>
<p>&nbsp;</p>
<p>Seb</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24466"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 10/10/2014 - 13:20.</div>
    <div class="content">
     <p>The fact that the time can some, maybe even most of the time correct itself isn&#39;t really reliable and can cause issues of varying degrees. The topic is discussed in some detail on this&nbsp;<a href="5877.html">Read-only image time issues</a>&nbsp;thread.</p>
<p>Aside from the date issue that last log looks fine except for the odd &quot;&nbsp;[&#39;&gt;\x00&#39;, &#39;84b&#39;] &quot; response from the RFM2Pi, I can&#39;t tell why that is happening at this point but It seems to have no effect on the function. The &quot;Setting RFM2Pi frequency: 433 (4b)&quot; log confirms the correct command was sent by emonHub and the successful&nbsp;receipt of data confirms the RFM2Pi is on 433MHz. I&#39;m not sure where the &quot;8&quot; comes from but the &quot;&#39;&gt;\x00&#39;&quot; is frequently seen the first time the RFM2Pi&nbsp;communicates following powering up.</p>
<p>The rc1.1 version has very minor changes and is &quot;in testing&quot; at the moment so you must of seen one of my posted logs, it offers very little and will probably&nbsp;get merged in time for the next SD image update, there are a couple of other tweaks that may make it into rc1.1 before then. The current version is still rc1.0 and as far as I&#39;m aware (fingers crossed and touch wood etc etc) there haven&#39;t been any issues yet ( why do I feel like I&#39;m gonna regret saying that ?)</p>
<p>The Pi&#39;s time is not sourced from your router, the Pi will check online with NTP servers to ascertain UTC, If you want GMT/BST you will need to set the timezone&nbsp;locally on the Pi (personally I leave my emonHub Pi as UTC for simple consistency) .</p>
<p>Every hour from boot the Pi&#39;s current time gets backed up by fake-hwclock and the fake-time you saw, presumably at 09:16:45 BST would of updated 16 seconds later from 07:17:01 UTC to 08:17:01 UTC so the time on the Pi looks correct at that time.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24469"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7035.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7035.png" alt="snerone&#039;s picture" title="snerone&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/7035.html" title="View user profile.">snerone</a> on Fri, 10/10/2014 - 19:22.</div>
    <div class="content">
     <p>Super.</p>
<p>So it&#39;s just the date setting thing that I should tie up. Goodie.&nbsp;</p>
<p>Re the datacodes, maybe you should add a note (for the thickies among us) about setting them in <a href="https://github.com/openenergymonitor/documentation/blob/master/Applications/HomeEnergyMonitor/HomeEnergyMonitor.md">your online guide</a>. Re-reading it I realised that I never set up the Arduino environment / firmware on the EmonTX. I just used it as is out-the-box. That&#39;s probably where I tripped over when following the instructions. I changed the datacodes that were set for something I hadn&#39;t implemented:&nbsp;</p>
<blockquote><p>&quot;The emontx firmware that we installed above has a non standard packet structure, it uses the long datatype in addition to integers. We therefore need to tell emonhub to decode the data received from the emontx accordingly. This is done in the nodes section:&quot;</p>
</blockquote>
<p>Anyhoo, thanks again for the great support. And may I also add that emoncms is deeply awesome. :)&nbsp;</p>
<p><span style="background-color: transparent;">Seb</span></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24599"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7035.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7035.png" alt="snerone&#039;s picture" title="snerone&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/7035.html" title="View user profile.">snerone</a> on Fri, 17/10/2014 - 08:15.</div>
    <div class="content">
     <p>hiya,</p>
<p>I ran your easy<a href="5877.html"> to install script here:</a></p>
<blockquote><p><strong>git clone <a href="https://github.com/emonhub/ntp-backup.git" title="https://github.com/emonhub/ntp-backup.git">https://github.com/emonhub/ntp-backup.git</a> &amp;&amp; ~/ntp-backup/install</strong></p>
</blockquote>
<p>but I&#39;m getting a no such file or directory error :(</p>
<blockquote><p>Cloning into &#39;ntp-backup&#39;...<br />
		remote: Counting objects: 58, done.<br />
		remote: Compressing objects: 100% (56/56), done.<br />
		remote: Total 58 (delta 28), reused 5 (delta 1)<br />
		Unpacking objects: 100% (58/58), done.<br />
		-bash: /home/pi/ntp-backup/install: No such file or directory</p>
</blockquote>
<p>I tried creating one (mkdir) and pulled git repo again. But I still got no joy (fatal: destination path &#39;ntp-backup&#39; already exists and is not an empty directory).</p>
<p>As you predicted the date issue has come back to bite me. I&#39;ve set up my GLCD and it&#39;s not picking up the correct time.</p>
<p>Setting emonhub.conf back to &#39;debug&#39; I get the usual 27sec lapse before the correct time kicks in:&nbsp;</p>
<blockquote><p>1970-01-01 00:00:23,572 INFO EmonHub Pre-Release Development Version (rc1.0)<br />
		1970-01-01 00:00:23,574 INFO Opening hub...<br />
		1970-01-01 00:00:26,628 WARNING 1 Discarded RX frame &#39;non-numerical content&#39; : [&#39;&gt;\x00&#39;, &#39;4b&#39;]<br />
		1970-01-01 00:00:27,035 WARNING 3 Discard RX frame &#39;information&#39; : [&#39;&gt;&#39;, &#39;210g&#39;]<br />
		1970-01-01 00:00:27,668 WARNING 6 Discard RX frame &#39;information&#39; : [&#39;&gt;&#39;, &#39;15i&#39;]<br />
		2014-10-17 07:46:39,648 INFO Logging level set to DEBUG<br />
		2014-10-17 07:46:41,074 DEBUG 121 NEW FRAME : 1413532001.07&nbsp; 20 83 9<br />
		.... [etc]</p>
</blockquote>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24600"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 17/10/2014 - 08:45.</div>
    <div class="content">
     <p>Hi Seb,</p>
<p>Did you run it from the home directory?&nbsp;</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7035.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7035.png" alt="snerone&#039;s picture" title="snerone&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/7035.html" title="View user profile.">snerone</a> on Fri, 17/10/2014 - 09:49.</div>
    <div class="content">
     <p>I think so:</p>
<p><strong>pi@raspberrypi /home $...</strong></p>
<p>Should I have been in a different home? :)</p>
<p>Seb</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24605"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 17/10/2014 - 11:46.</div>
    <div class="content">
     <p>Aha! Yes, no, well sort of !</p>
<p>I apologize for using general terms when <u>the</u> home directory is referred to, it meant the home directory of the user rather than the directory called home, so for the user pi it would be /home/pi. Its the place that the prompt starts at when first booted and where it ends up if you just type &quot;cd&quot; and enter. Perhaps I should of said the users home directory.</p>
<p>I have now changed it to be less dependent on location so you should be able to run&nbsp;</p>
<blockquote><p><strong>git clone <a href="https://github.com/emonhub/ntp-backup.git" title="https://github.com/emonhub/ntp-backup.git">https://github.com/emonhub/ntp-backup.git</a> ~/ntp-backup &amp;&amp; ~/ntp-backup/install</strong></p>
</blockquote>
<p>from anywhere or if you prefer you can still go to the users home dir&nbsp;and run the original command</p>
<blockquote><p><strong>cd</strong></p>
</blockquote>
<blockquote><p><strong>git clone <a href="https://github.com/emonhub/ntp-backup.git" title="https://github.com/emonhub/ntp-backup.git">https://github.com/emonhub/ntp-backup.git</a> &amp;&amp; ~/ntp-backup/install</strong></p>
</blockquote>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24608"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7035.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7035.png" alt="snerone&#039;s picture" title="snerone&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/7035.html" title="View user profile.">snerone</a> on Fri, 17/10/2014 - 11:53.</div>
    <div class="content">
     <p>I&#39;m kicking myself too, because I didn&#39;t heed my suspicion that there may have been &#39;another&#39; home. Doh!&nbsp;</p>
<p>Holy moly, it&#39;s worked. Lovely. Big thanks!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24609"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 17/10/2014 - 11:55.</div>
    <div class="content">
     <p>I&#39;m glad you brought it up, hopefully the changes will make it easier to use.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24668"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7035.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7035.png" alt="snerone&#039;s picture" title="snerone&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/7035.html" title="View user profile.">snerone</a> on Mon, 20/10/2014 - 09:12.</div>
    <div class="content">
     <p>btw, anyone running Paul&#39;s ntp script can also change their time zone (UTC+ whatever) by navigating to:<br />
<strong>/usr/share/zoneinfo/</strong><br />
Then find your continent or country and/or the country or city therein and then run the command:<br />
<strong>sudo ln -sf /usr/share/zoneinfo/&lt;country or zone&gt;/&lt;city&gt; /etc/localtime</strong><br />
Eg, if you&#39;re in Paris:<br />
<strong>sudo ln -sf /usr/share/zoneinfo/Europe/Paris /etc/localtime</strong><br />
Happily synced now.<br />
Seb</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24676"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Inactive inputs</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 20/10/2014 - 14:31.</div>
    <div class="content">
     <p>Good to hear you are all sorted, Seb.</p>
<p>You can also use the &quot;raspi-config&quot; menu system to select your time&nbsp;zone etc. Although it doesn&#39;t work at boot up because you are in read-only mode by default. You can start it from the command line after changing to write mode using</p>
<blockquote><p><strong>rpi-rw</strong></p>
<p><strong>sudo raspi-config</strong></p>
</blockquote>
<p>The&nbsp;only function that won&#39;t work is expanding the file&nbsp;system as the 3rd &quot;data&quot; partition confuses the process. see&nbsp;<a href="5740.html">http://openenergymonitor.org/emon/node/5740</a>&nbsp;for a workaround if you need to expand the partition sizes.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5915"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-oD_vIzK2AHZxkZr72vfuxIvxP1EgbZ9bNayKr-MVkPI" value="form-oD_vIzK2AHZxkZr72vfuxIvxP1EgbZ9bNayKr-MVkPI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/5915 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:11:07 GMT -->
</html>
