<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/4353 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>EmoncmsV8 WAMP apache error | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">EmoncmsV8 WAMP apache error</h3>
        <span class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Wed, 26/03/2014 - 08:02</span>
        <div class="content"><p>Although Emoncms V8 is now working ok for me on my Windows Home Server WAMP installation (login, inputs, feeds, graphs are all working), I get a lot of warnings and fatal errors in the apache.log. The reason is always in line 465 in PHPFiwa.php.</p>
<p>Sometimes WAMP (or apache?) stops working and then my Python script to read data from a Jeelink (and EmonTx) stops with an error mesage that apache is not responding.</p>
<p>Part of the error log:</p>
<pre>
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP Warning:&nbsp; unpack(): Type I: not enough input, need 4, have 0 in C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php on line 465
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP Stack trace:
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP&nbsp;&nbsp; 1. {main}() C:\\wamp\\www\\emoncms\\index.php:0
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP&nbsp;&nbsp; 2. controller() C:\\wamp\\www\\emoncms\\index.php:98
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP&nbsp;&nbsp; 3. input_controller() C:\\wamp\\www\\emoncms\\core.php:66
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP&nbsp;&nbsp; 4. Process-&gt;input() C:\\wamp\\www\\emoncms\\Modules\\input\\input_controller.php:249
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP&nbsp;&nbsp; 5. Process-&gt;log_to_feed() C:\\wamp\\www\\emoncms\\Modules\\input\\process_model.php:90
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP&nbsp;&nbsp; 6. Feed-&gt;insert_data() C:\\wamp\\www\\emoncms\\Modules\\input\\process_model.php:135
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP&nbsp;&nbsp; 7. PHPFiwa-&gt;post() C:\\wamp\\www\\emoncms\\Modules\\feed\\feed_model.php:397
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP&nbsp;&nbsp; 8. PHPFiwa-&gt;get_meta() C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php:102
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP&nbsp;&nbsp; 9. unpack() C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php:465[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   1. {main}() C:\\wamp\\www\\emoncms\\index.php:0
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   2. controller() C:\\wamp\\www\\emoncms\\index.php:98
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   3. input_controller() C:\\wamp\\www\\emoncms\\core.php:66
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   4. Process-&gt;input() C:\\wamp\\www\\emoncms\\Modules\\input\\input_controller.php:249
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   5. Process-&gt;log_to_feed() C:\\wamp\\www\\emoncms\\Modules\\input\\process_model.php:90
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   6. Feed-&gt;insert_data() C:\\wamp\\www\\emoncms\\Modules\\input\\process_model.php:135
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   7. PHPFiwa-&gt;post() C:\\wamp\\www\\emoncms\\Modules\\feed\\feed_model.php:397
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   8. PHPFiwa-&gt;get_meta() C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php:102
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   9. unpack() C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php:465
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 128450560 bytes) in C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php on line 465
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP Stack trace:
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   1. {main}() C:\\wamp\\www\\emoncms\\index.php:0
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   2. controller() C:\\wamp\\www\\emoncms\\index.php:98
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   3. input_controller() C:\\wamp\\www\\emoncms\\core.php:66
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   4. Process-&gt;input() C:\\wamp\\www\\emoncms\\Modules\\input\\input_controller.php:249
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   5. Process-&gt;log_to_feed() C:\\wamp\\www\\emoncms\\Modules\\input\\process_model.php:90
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   6. Feed-&gt;insert_data() C:\\wamp\\www\\emoncms\\Modules\\input\\process_model.php:135
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   7. PHPFiwa-&gt;post() C:\\wamp\\www\\emoncms\\Modules\\feed\\feed_model.php:397
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   8. PHPFiwa-&gt;get_meta() C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php:102
[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP   9. unpack() C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php:465

Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 128450560 bytes) in C:\wamp\www\emoncms\Modules\feed\engine\PHPFiwa.php on line 465</pre><p>&nbsp;</p>
<p>Does someone have a clue why this happens?</p>
<p>BR, J&ouml;rg.</p>
<p>PS: sorry, this formatted text is messing up the whole screen and overwrites the forum topics. Is there a way to show this decently?</p>
<p>PPS: after running Emoncms now for some days, my database file size is ~200kb per feed, but my apache_error.log is ~400Mb and the access.log ~50Mb. Is this &#39;healthy&#39;?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="6316.html" class="topic-previous" title="Go to previous forum topic">‹ Import_full.php script error - Undefined variable: timestore_adminkey??</a>
              <a href="6283.html" class="topic-next" title="Go to next forum topic">Request new password page is broken ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-19829"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 26/03/2014 - 08:50.</div>
    <div class="content">
     <p>Doesnt look particularly healthy, looks like its logging every function call, Can you turn off the logging, I would turn off both access logs and the php stack trace, should be possible from someware in your php or apache settings, that should sort the logging.</p>
<p>Would be good then to establish how often and why the Fatal error: Allowed memory size of 134217728 bytes exhausted error occurs.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19830"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Wed, 26/03/2014 - 09:07.</div>
    <div class="content">
     <p>Ok, have to find where I can turn off the logging.</p>
<p>The <strike>error</strike> warning that comes most often is:</p>
<p>[Wed Mar 26 08:24:36.052269 2014] [:error] [pid 7976:tid 1504] [client 127.0.0.1:63946] PHP Warning:&nbsp; unpack(): Type I: not enough input, need 4, have 0 in C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php on line 465<br />
	&nbsp;</p>
<p>I have no clue what that means.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19870"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 27/03/2014 - 08:53.</div>
    <div class="content">
     <p>After another crash (?) of the server:</p>
<p>This warning:</p>
<p>[Wed Mar 26 22:58:12.788141 2014] [:error] [pid 2040:tid 1480] [client 127.0.0.1:64724] PHP Warning:&nbsp; unpack(): Type I: not enough input, need 4, have 0 in C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php on line 465</p>
<p>seems to be the root cause for the crashes. Always after these events will the server stop working correctly. Sometimes with the fatal error shown above, this time with a hint:</p>
<p>[Thu Mar 27 01:04:26.931158 2014] [mpm_winnt:error] [pid 2040:tid 3480] AH00326: Server ran out of threads to serve requests. Consider raising the ThreadsPerChild setting</p>
<p>Anyone with an idea what happens in line 465 of PHPFiwa.php? It seems that the .meta file has fewer entries (bytes) than expected. But I checked it and all .meta files in the PHPFiwa folder have 44 bytes.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19876"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 27/03/2014 - 09:16.</div>
    <div class="content">
     <p>A bit of background on what the unpack error means. Each datapoint in a PHPFiwa feed takes up 4 bytes, which is the length of a single float value, (timestamps are calculated from the start time recorded in the meta file and the datapoint position in the file). The unpack error saying not enough input means it tried to read a location that was either partially or fully off the end of the file which would have caused not enough bytes to be given to unpack.</p>
<p>So It sounds to me like you might have one feed that is somehow corrupt, or was never created properly in the first place. Can you see a feed in your feeds list that has no data in it?</p>
<p>Can you recreate that feed and see if the error goes away?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19877"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 27/03/2014 - 09:21.</div>
    <div class="content">
     <p>Ah, just looking at the code, line 465 is actually the meta file, which also suggests the feed was not initialized properly the first time it was created</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19880"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 27/03/2014 - 10:04.</div>
    <div class="content">
     <p>This is what I thought. Can I debug somehow, which file name is causing this error (as I said already, I have no experience with Python, PHP and the like at all)?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19895"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 27/03/2014 - 12:53.</div>
    <div class="content">
     <p>And there is another warning now (have not seen that before):</p>
<pre>
[Thu Mar 27 11:24:16.162816 2014] [:error] [pid 7220:tid 1488] [client 127.0.0.1:52745] PHP Warning:  filesize(): stat failed for F:/emoncmsdata/phpfiwa/1.dat in C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php on line 437, referer: <a href="http://localhost/emoncms/feed/list" title="http://localhost/emoncms/feed/list">http://localhost/emoncms/feed/list</a>
[Thu Mar 27 11:24:16.162816 2014] [:error] [pid 7220:tid 1488] [client 127.0.0.1:52745] PHP Stack trace:, referer: <a href="http://localhost/emoncms/feed/list" title="http://localhost/emoncms/feed/list">http://localhost/emoncms/feed/list</a>
[Thu Mar 27 11:24:16.162816 2014] [:error] [pid 7220:tid 1488] [client 127.0.0.1:52745] PHP   1. {main}() C:\\wamp\\www\\emoncms\\index.php:0, referer: <a href="http://localhost/emoncms/feed/list" title="http://localhost/emoncms/feed/list">http://localhost/emoncms/feed/list</a>
[Thu Mar 27 11:24:16.162816 2014] [:error] [pid 7220:tid 1488] [client 127.0.0.1:52745] PHP   2. controller() C:\\wamp\\www\\emoncms\\index.php:98, referer: <a href="http://localhost/emoncms/feed/list" title="http://localhost/emoncms/feed/list">http://localhost/emoncms/feed/list</a>
[Thu Mar 27 11:24:16.162816 2014] [:error] [pid 7220:tid 1488] [client 127.0.0.1:52745] PHP   3. feed_controller() C:\\wamp\\www\\emoncms\\core.php:66, referer: <a href="http://localhost/emoncms/feed/list" title="http://localhost/emoncms/feed/list">http://localhost/emoncms/feed/list</a>
[Thu Mar 27 11:24:16.162816 2014] [:error] [pid 7220:tid 1488] [client 127.0.0.1:52745] PHP   4. Feed-&gt;update_user_feeds_size() C:\\wamp\\www\\emoncms\\Modules\\feed\\feed_controller.php:47, referer: <a href="http://localhost/emoncms/feed/list" title="http://localhost/emoncms/feed/list">http://localhost/emoncms/feed/list</a>
[Thu Mar 27 11:24:16.162816 2014] [:error] [pid 7220:tid 1488] [client 127.0.0.1:52745] PHP   5. PHPFiwa-&gt;get_feed_size() C:\\wamp\\www\\emoncms\\Modules\\feed\\feed_model.php:497, referer: <a href="http://localhost/emoncms/feed/list" title="http://localhost/emoncms/feed/list">http://localhost/emoncms/feed/list</a>
[Thu Mar 27 11:24:16.162816 2014] [:error] [pid 7220:tid 1488] [client 127.0.0.1:52745] PHP   6. filesize() C:\\wamp\\www\\emoncms\\Modules\\feed\\engine\\PHPFiwa.php:437, referer: http://localhost/emoncms/feed/list</pre><p>This warning comes for all feeds (1.dat, 2.dat, 3.dat, 5.dat). Why does filesize(): stat fail? Has this something to do with using slashes instead of backslashes?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19898"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 27/03/2014 - 14:27.</div>
    <div class="content">
     <p>After deleting all feeds and creating them anew, I have exactly the same errors. I have then changed all feeds to PHPFINA and this works for me. File size is shown correctly and no error messages anymore. Very strange as the code for these two feed engines is nearly identical ( e.g for function get_feed_size() which seems to throw the warning in my last posting).</p>
<p>Is there any good reason why PHPFIWA does not work (for me)?</p>
<p>BR, J&ouml;rg.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19902"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 27/03/2014 - 14:31.</div>
    <div class="content">
     <p>Could it be a folder permissions related problem, are the permissions the same on both folders?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19903"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 27/03/2014 - 14:58.</div>
    <div class="content">
     <p>Yes, as far as I can say permission is exactly the same (I have simply set all permissions for all users). The files were also created correctly and the feed data was shown correctly in the graphs.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19920"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Thu, 27/03/2014 - 18:33.</div>
    <div class="content">
     <p>I&#39;m currently posting in&nbsp;http://openenergymonitor.org/emon/node/4386 about my randomly broken &quot;live&quot; Pi. I&#39;ve got the same symptoms (PHPFIWA&nbsp;doesn&#39;t work, PHPFINA is OK) on raspian.</p>
<pre>
$ ls -al /var/lib/ | grep php
drwx-wx-wt  2 root      root       4096 Mar 27 17:46 php5
drwxrwxrwx  2 www-data  root       4096 Mar 27 18:25 phpfina
drwxrwxrwx  2 www-data  root       4096 Mar 27 18:22 phpfiwa
drwxrwxrwx  2 www-data  root       4096 Mar 18 00:46 phptimeseries</pre><p>It&#39;s a puzzler.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19921"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Thu, 27/03/2014 - 18:43.</div>
    <div class="content">
     <p>Preliminary work-around: it seems that restarting the rfm12piphp process allows the PHPFIWA&nbsp;feeds to be updated.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19922"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 27/03/2014 - 18:52.</div>
    <div class="content">
     <p>Dave,</p>
<p>my problem is a little bit different. For me the PHPFiwa feeds work as far as storing data is concerned and the data is also presented correctly in the graphs. But the size of the feeds is not shown correctly because the filesize() function returns with an error. Very strange.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19923"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Thu, 27/03/2014 - 18:53.</div>
    <div class="content">
     <p>Ah, OK. I also get the stat error, but I guess that&#39;s in addition to whatever my underlying problem is!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19925"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 27/03/2014 - 18:58.</div>
    <div class="content">
     <p>Did you perhaps relocate the directories for the feeds in settings.php into a non-default location? Then you might have to change the directory also in the PHPFiwa.php (and the others you use). I just found this by coincidence some days ago. One of the many small mistakes one can make ..... (and updating to a new version brings the same &#39;feature&#39; up again and again).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19928"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 27/03/2014 - 19:01.</div>
    <div class="content">
     <p>Ah I&#39;ve just found the problem with the getting the size of the phpfiwa feeds, i will push a fix up.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19931"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 27/03/2014 - 19:07.</div>
    <div class="content">
     <p>Fix has been uploaded v8.0.6</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19932"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Thu, 27/03/2014 - 19:07.</div>
    <div class="content">
     <p>There&#39;s no dat file (without index number) for FIWA I&#39;m guessing? :-)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19943"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 27/03/2014 - 19:36.</div>
    <div class="content">
     <p>no thats it :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25950"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6673.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="tcarlyle&#039;s picture" title="tcarlyle&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmoncmsV8 WAMP apache error</h3>

    <div class="submitted">Submitted by <a href="../user/6673.html" title="View user profile.">tcarlyle</a> on Thu, 18/12/2014 - 14:01.</div>
    <div class="content">
     <p>I&#39;m getting a similar behavior with the phptimeseries</p>
<p>​</p>
<p>2014-12-18 13:29:07: (mod_fastcgi.c.2676) FastCGI-stderr: PHP Warning: &nbsp;unpack(): Type x: not enough input, need 1, have 0 in /var/www/emoncms/Modules/feed/engine/PHPTimeSeries.php on line 248<br />
PHP Warning: &nbsp;unpack(): Type x: not enough input, need 1, have 0 in /var/www/emoncms/Modules/feed/engine/PHPTimeSeries.php on line 248</p>
<p>My machine has rebooted and that means that it may have halted at the moment of writting&nbsp;into the feeds file and that it did not logged points for a certain period. Would any of those be a reason for the feed to become corrupt?</p>
<p>&nbsp;</p>
<p>Is there an easy way to check through the MYD files if they are corrupt?</p>
<p>&nbsp;</p>
<p>Cheers</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/4353"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-dEzbOo9lrupt07cZo8-4iv_7FKoYJxmtPd9zn8TJLs8" value="form-dEzbOo9lrupt07cZo8-4iv_7FKoYJxmtPd9zn8TJLs8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/4353 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:25 GMT -->
</html>
