<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/4924 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>OEM gateway coexisting with EMONCMS | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">OEM gateway coexisting with EMONCMS</h3>
        <span class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Sat, 05/04/2014 - 14:13</span>
        <div class="content"><p>I received this as a PM from <a href="../user/5908.html">rbreuss</a>. Answering here. Please don&#39;t use PM for questions (although you may PM me if you think I can answer and may have missed your public question in the flow).</p>
<blockquote><p>[...] I have a working local EMONCMS at Raspi/HDD/SD platform and I dont know, whether or not is it possible to use OEM gateway at this platform (whether it makes sense) and if so, how to install and configure it.</p>
</blockquote>
<p>Well, if you&#39;re happy with your setup, keep it as it is. You probably run the .php script to feed emonCMS with the data from the serial port.</p>
<p>However, you may need the OEM Gateway for a specific feature (own sensor input that doesn&#39;t go through the RFM2Pi board, buffering,...). In this case, follow the installation steps in the README (see github page: <a href="https://github.com/Jerome-github/oem_gateway" title="https://github.com/Jerome-github/oem_gateway">https://github.com/Jerome-github/oem_gateway</a>). You&#39;ll need to stop the php script from running (see below).</p>
<p>The parameters are generally set through the configuration file. It is also possible to parameter through emonCMS GUI just like you currently do, but then you&#39;re limited to the options offered by the GUI, there&#39;s no use using the OEM Gateway, you might as well keep the php script,</p>
<blockquote><p>[...] Is there any step by step &quot;cookbook for dummies&quot;, how to install properly OEM gateway to Raspi with EMONCMS?</p>
</blockquote>
<p>That should be the README. Please ask if it is not clear. Maybe we need to add some info in there.</p>
<p>Regarding the currently running php script. It is running automatically on startup. You&#39;d need to stop it from running on startup, and either to stop currently running instance, or just reboot. If you decide to do this, I think you&#39;ll need to comment a line in&nbsp; /etc/rc.local. Can&#39;t say out of memory. If you decided to do that, please see the docs and/or ask here.</p>
<p>There are many possible configurations. This can be confusing. Since it is not obvious which you&#39;re using, consider specifying it when asking. For instance by referring to the names found in the docs: <a href="http://emoncms.org/" title="http://emoncms.org/">http://emoncms.org/</a>, or by saying which ready-to-go SD Card you bought, if you did buy one.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="4948.html" class="topic-previous" title="Go to previous forum topic">‹ Emoncms.org upgrade today - refresh browser cache</a>
              <a href="4950.html" class="topic-next" title="Go to next forum topic">How do you specify Unit for a Feed or input? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-20493"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5908.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rbreuss&#039;s picture" title="rbreuss&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OEM gateway coexisting with EMONCMS</h3>

    <div class="submitted">Submitted by <a href="../user/5908.html" title="View user profile.">rbreuss</a> on Sat, 05/04/2014 - 17:31.</div>
    <div class="content">
     <p>My platform is heterogenous, self made, based od various sources. Energy meter is based on Arduino Due with RFM modul, based on Boredman&nbsp;modif&nbsp;of standard EMON lib. Temperatures are meassured by Arduino Yun, sending data via Ethernet to base station json based command. Base station is based on Raspberry with HD and SD with fresh installation of EMONCMS v 8.0.9 following great tutorial of Paul. RFM&nbsp;receiver of Raspberry is Jeelink via USB. No one standard OEM module, no bought ready-to-go SD card.</p>
<p>I read that readme at OEM gateway page, but what Im missing there (and it is probably due my very limited knowledge of LINUX environment) is, how to install OEM gateway to my system. Now I have pure installation of raspbian and EMONCMS, but &nbsp;think, OEM gateway files are not in my system now. Im&nbsp;sorry, if my questions are quite stupid...</p>
<p>Radek</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20533"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OEM gateway coexisting with EMONCMS</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sun, 06/04/2014 - 20:21.</div>
    <div class="content">
     <p>@ rbreuss - You are currently using an apt installed copy of emoncms, beware of making any unusual changes to the installation that may get overwritten by using apt-get update. with that array of inputs the oemgateway may work better for you but you would be better off without the emoncms-module-rfn12pi installed if you are installing oemgateway as that has it&#39;s own rfm12pi access.</p>
<p>@&nbsp;&nbsp;J&eacute;r&ocirc;me - is it a must to disable the php script ? will the 2 clash or cause problem? I have had both running at once without an issue, or was that just a lucky fluke ?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20540"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5190.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5190.jpg" alt="Schism&#039;s picture" title="Schism&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OEM gateway coexisting with EMONCMS</h3>

    <div class="submitted">Submitted by <a href="../user/5190.html" title="View user profile.">Schism</a> on Sun, 06/04/2014 - 21:37.</div>
    <div class="content">
     <p>@rbreuss, I&#39;m hoping to try and make the oem_gateway available through APT in the next couple of days, if you can hang on that long. If not, you&#39;ll need to clone it from github and follow the install instructions in the readme.</p>
<p>&nbsp;</p>
<p><a href="https://github.com/Jerome-github/oem_gateway" title="https://github.com/Jerome-github/oem_gateway">https://github.com/Jerome-github/oem_gateway</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20549"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OEM gateway coexisting with EMONCMS</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 07/04/2014 - 07:20.</div>
    <div class="content">
     <p>@pb66</p>
<p>I don&#39;t see how one can have both the php and the python script reading the same serial port. I think when OEM Gateway opens it, it keeps it open, so no one else can open it. Then perhaps the php script tries and fails at opening then just quits.</p>
<p>If the two are running, which one do you expect to read the serial port ? Which one deals with a specific frame of data ? Can it be any ? But then, what if you configured the gateway differently from the php script ?</p>
<p>Of course, you could think of a tricky case where you&#39;d configure the Gateway not to read the serial port, and the php script to send the data to the Gateway on localhost, once this one is able to receive data through emoncms API like you suggested. (I still need to think about and answer that request...), although I don&#39;t see the point.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20555"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OEM gateway coexisting with EMONCMS</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 07/04/2014 - 08:35.</div>
    <div class="content">
     <p>OK thanks J&eacute;r&ocirc;me, I have no desire to run both as such, I was just thrown by your comment as I knew I had not previously disabled php when oemgateway was running and wanted to understand the situation better.</p>
<p>When i had both running I was not accessing the serial port so that will explain how I &quot;fluked&quot; it. I didn&#39;t have the rfm2pi installed, most local data was coming in via port 50011 and some arrived via apikey&#39;d url.</p>
<p>I hadn&#39;t considered the serial port maybe an issue as I wasn&#39;t using it at the time.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20577"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5908.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rbreuss&#039;s picture" title="rbreuss&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OEM gateway coexisting with EMONCMS</h3>

    <div class="submitted">Submitted by <a href="../user/5908.html" title="View user profile.">rbreuss</a> on Mon, 07/04/2014 - 12:57.</div>
    <div class="content">
     <p>Sure I can wait, no prob. Just let me know then, please.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/4924"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-do13b2x4MPnBrdcDoHIpeqzU1Vh3wzTTaX0hl0HyCrQ" value="form-do13b2x4MPnBrdcDoHIpeqzU1Vh3wzTTaX0hl0HyCrQ"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
