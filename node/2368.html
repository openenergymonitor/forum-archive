<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2368 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:19:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Pool temperature monitor | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Pool temperature monitor</h3>
        <span class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Sat, 11/05/2013 - 10:22</span>
        <div class="content"><p>Hello,</p>
<p>first of all: congrat for the community great job, really interesting stuff !</p>
<p>I built a natural&nbsp;swimming pool (yes, with laguna, frog and other little animals ...) and I plan to use my raspberry to setup a remote temperature monitor for the water, and maybe a consumption&nbsp;monitor for the pump. The idea is to log water temperature over months, in order to prevent for algae ...</p>
<p>For the water temperature, do you think the kit <a href="http://shop.openenergymonitor.com/emontx-temperature-node">(http://shop.openenergymonitor.com/emontx-temperature-node</a>/) could be used for that ? It seems to be waterproof, but what about staying under water 365 days/year ? Also, I will need to protect the EmonTX in a box against hot sun and snow in winter. Do you now some waterproof boxes ?&nbsp;</p>
<p>Sincereley,<br />
	David</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3989.html" class="topic-previous" title="Go to previous forum topic">‹ Importing data from external M-Bus Logger</a>
              <a href="3954.html" class="topic-next" title="Go to next forum topic">Gas monitoring - direct pulse with EmontxV3 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-12031"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 11/05/2013 - 12:00.</div>
    <div class="content">
     <p><strong><a href="http://shop.openenergymonitor.com/encapsulated-ds18b20-temperature-sensor/">Encapsulated DS18B20 temperature sensor</a></strong> looks to me to be waterproof, but you could check with the shop. If they don&#39;t pick this up, PM Trystan Lea or Glyn Hudson. You can probably negotiate the encapsulated sensor in place of the on-board one in the kit, if you ask nicely.</p>
<p>You cannot of course put the box and transmitter under water - the r.f. will struggle to get out. Most suppliers do a range of IP65 enclosures, e.g. <a href="http://spiratronics.com/pcb-hardware-and-enclosures/project-cases/ip-rated-boxes-cases/ip65-sealed-enclosures.html" title="http://spiratronics.com/pcb-hardware-and-enclosures/project-cases/ip-rated-boxes-cases/ip65-sealed-enclosures.html">http://spiratronics.com/pcb-hardware-and-enclosures/project-cases/ip-rat...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12054"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Sun, 12/05/2013 - 07:53.</div>
    <div class="content">
     <p>I am in a process of doing the same, to start measuring pool temperature and also heater consumption. Yes its very good to have water resitant sensor but I would never put that to hang inside the pool for three reasons: 1) water gets eventually in as water resistant sensors are not intended to be used underwater. 2) if the measurement electronics is mains powered there is always a risk for s shock in case of a fault. 3) estethically hanging wires are not really appreciatwd and generate a tangling risk for children etc. My preferred installation is inside the filtration housing with a proper brass sensor pocket. This way the water temp is measured in a point of constant flow near the pump allowing also the current consumption being measured. Most likely will take the needed 5v &nbsp;from pump control electronics and install CT to the power input cable and just run the ds18b20 cable out from the pool electronics control box to have a watertight installation.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12055"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Sun, 12/05/2013 - 07:55.</div>
    <div class="content">
     <p>Thanks Robert, I will ask Trystan/Glyn. Also thank for the url for cases.&nbsp;</p>
<p>Any hint to help me choose between 433 Mhz vs 868 Mhz ?</p>
<p>	David</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12056"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Sun, 12/05/2013 - 08:09.</div>
    <div class="content">
     <p>sorry I found a post :&nbsp;<a href="502.html">http://openenergymonitor.org/emon/node/502</a>&nbsp;on that question</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12057"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Sun, 12/05/2013 - 08:21.</div>
    <div class="content">
     <p>Hello Petrick,&nbsp;</p>
<p>right ! My first intent was to hide the&nbsp;EmonTX&nbsp;box with stones (this is a natural pool, so with lot of stones nearby), but it is better to put the system near the filtration, that&#39;s a really good idea !&nbsp;</p>
<p>	You mention a &quot;brass sensor pocket&quot;, is the DS18b20 already delivered with such thing ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12059"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Sun, 12/05/2013 - 09:33.</div>
    <div class="content">
     <p>Any plumbing supplier should do thermopockets, does not need to be so long but tip in the flow more or less. Threads make it easy to install to a plastics cabinet into a hole with a bit smaller than threaed diameter ... and just with some pvc glue or silicone it makes a watertight seal. The 18b20 sensor goes inside.</p>
<p><a href="http://www.mkwheatingcontrols.co.uk/advanced_search_result.php?keywords=Brass+pocket&amp;x=0&amp;y=0">http://www.mkwheatingcontrols.co.uk/advanced_search_result.php?keywords=Brass+pocket&amp;x=0&amp;y=0</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12103"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Mon, 13/05/2013 - 18:14.</div>
    <div class="content">
     <p>Here is a similar project that what I am working with. The YHDC TA12L CT saturation current is still to be tested. I used 100 Ohm burden sensor with it and it seems to work just fine with calibration value 19.6. 1-wire sensor is water resistant model as you can see from the picture.</p>
<p>Attached preliminary script for it, should be fully compatible with emontx too (even I used jeenode as happened to have one).</p>
<p>&nbsp;</p>
<p><img alt="" src="../../../www.macmadigan.com/mk2i/pooltempwatt.JPG" style="width: 523px; height: 369px;" /></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12141"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Wed, 15/05/2013 - 10:11.</div>
    <div class="content">
     <p>wow ! Thanks for the information, I still need to dig a bit for the system that I have in mind, but I will probably give it a try in the next weeks ...</p>
<p>thanks,&nbsp;</p>
<p>David</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12166"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1817.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="StuntMonkeh&#039;s picture" title="StuntMonkeh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1817.html" title="View user profile.">StuntMonkeh</a> on Thu, 16/05/2013 - 10:04.</div>
    <div class="content">
     <p>You could always use a thermistor based temperature sensor.</p>
<p>I use flying lead thermistors with a potted end in cold water storage tanks.&nbsp; You just need to weigh the sensor down at the end or it tends to want to float.</p>
<p>The alternative is to have a thermistor based immersion sensor mounted on a float.&nbsp; You wouldn&#39;t need a pocket for it.&nbsp; Pockets are only used in pipe work so you can remove the sensor.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12177"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Thu, 16/05/2013 - 19:00.</div>
    <div class="content">
     <p>&nbsp;</p>
<p>stuntmonkey, is the view about not needing a pocket based on an experience or a point of a view ? My personal expererience with diving and underwater electronics suggest that waterproof sensors lifetime expectance underwater is very short increasing need for service.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-12183"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1817.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="StuntMonkeh&#039;s picture" title="StuntMonkeh&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1817.html" title="View user profile.">StuntMonkeh</a> on Fri, 17/05/2013 - 09:59.</div>
    <div class="content">
     <p>You can buy thermistors as just a bead if you search around but I buy them packaged as a room sensor, immersion sensor, duct sensor, outside air sensor etc.</p>
<p>The immersion sensor is already pre-packaged in a metal probe with a plastic head which is waterproof.&nbsp; If you power the node via a battery you could enclose everything in the plastic head of the sensor.</p>
<p><a href="http://www.sontay.com/products/temperature/temperature-sensors-and-pockets">http://www.sontay.com/products/temperature/temperature-sensors-and-pockets</a></p>
<p>From memory the potted flying lead sensors have a stainless steel end.</p>
<p>Below is a picture of a long duct sensor I have hooked up to a JeeNode.&nbsp; Its identical to the immersion sensor but about twice the length.</p>
<p><a href="https://www.dropbox.com/sc/wbi6zwlu9q7aqe7/0Fd9ZhGkfq">https://www.dropbox.com/sc/wbi6zwlu9q7aqe7/0Fd9ZhGkfq</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13925"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Mon, 29/07/2013 - 19:10.</div>
    <div class="content">
     <p>Hello,&nbsp;</p>
<p>it has been a while since I can find time to continue ... (too much work ;) )</p>
<p>However, now, everything is built and seems ok. The emontx send correct temperature values to the raspberry and the nice&nbsp;emoncs do the rest.&nbsp;</p>
<p>However, I am a bit surprised by the&nbsp;RFM12b, 868 Mhz (or maybe I do not get it right) : I initially wanted to place the emontx&nbsp;near the pool and the raspberry inside the house, about 15 meters away max, but I can get no signal. I manage to have a reliable connection only when I position the raspberry at the first floor with the window open. When it is closed: no signal. I am a bit surprised&nbsp;because I read that distance around 100m could be reach and I did not think that a simple window can change reception.&nbsp;</p>
<p>I used the&nbsp;emontx_lowpower_temperature.ino from the github. I only change the&nbsp;time_between_readings to be 1.5 min.</p>
<p>Any hints &nbsp;?</p>
<p>thanks,<br />
	David</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13927"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1001.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Automate&#039;s picture" title="Automate&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1001.html" title="View user profile.">Automate</a> on Mon, 29/07/2013 - 20:08.</div>
    <div class="content">
     <p>Do you have efficient Low E windows? &nbsp;If so they can have a metal coating that blocks radio waves.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13945"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Tue, 30/07/2013 - 18:13.</div>
    <div class="content">
     <p>no ... I tried at another place, and tried to orient the antenna in a better way. It seems to work more or less ... With a 1.5 min update, I manage to have about 1 measure every 10-15 min ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13947"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 30/07/2013 - 21:25.</div>
    <div class="content">
     <p>You could slow the data rate for the link. The rate is set (in the emonTx) with a low-level statement similar to this:</p>
<p>rfm_write(0xC606); // approx 49.2 Kbps, as used by emonTx</p>
<p>You will need to look at the RFM12B data sheet to work out the number to write knowing the rate you want (generally the slower you transmit, the more it reduces the bandwidth and increases the range), and of course you&#39;ll need to do the same thing with the RFM12B at the receiving end.</p>
<p>Do you think you might not have two 868 MHz modules? There&#39;s a photo showing the difference between a 433 MHz and an 868 MHz module in <a href="https://learn.openenergymonitor.org/?redirect=rfm12b-wireless">RFM12B - Part 1 - Hardware Overview</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13950"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bis69&#039;s picture" title="bis69&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by bis69 (not verified) on Wed, 31/07/2013 - 07:34.</div>
    <div class="content">
     <p>Hi Petrik. I read your sketch for Arduino and I have one question for you. In description in your sketch you have calibration 20, but calculate is 5A / 0.005A(5mA) / 100ohm(burden resistor) = 10. Why do you have in loop calibration 19.6? I don&#39;t understand that. Thanks for your answer. Dan</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13955"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Wed, 31/07/2013 - 15:15.</div>
    <div class="content">
     <p>Thanks for your advices.</p>
<p>I tried to set the data rate to&nbsp;9.579kbps with :&nbsp;rf12_control(0xC623); //Data Rate = 9.579kbps&nbsp;</p>
<p>in the&nbsp;emontx_lowpower_temperature.ino file but I do not know in which file to change this value on the raspberry/emoncms. Maybe somewhere in &nbsp;/var/www/emoncms/Modules/raspberrypi ?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13957"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Wed, 31/07/2013 - 15:15.</div>
    <div class="content">
     <p>quick update : it seems related to the elevation of the emontx. The connexion is bad when it is to close to the ground...&nbsp;</p>
<p>Strange behavior in the emoncms : I updated it (git pull) and recreate the database (to remove old values), but now, my &quot;input&quot; tab shows about 30 different nodes with numerous &quot;name&quot; in each, while I only have one emontx (node=18). Anyone experienced similar thing ?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13960"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 31/07/2013 - 16:17.</div>
    <div class="content">
     <p>If you have the two ends of the radio link set to different data rates, then the receiver cannot properly interpret the data and you are seeing rubbish. It is exactly the same thing as when the emonTx serial port is set to one baud rate and the Arduino serial window is set to another. You&#39;ll need a Raspberry Pi expert to tell you where to set it in there. You could try searching likely looking files for the text string &quot;0xC606&quot;, or this page: <a href="http://wiki.openenergymonitor.org/index.php?title=RFM12Pi_V2" title="http://wiki.openenergymonitor.org/index.php?title=RFM12Pi_V2">http://wiki.openenergymonitor.org/index.php?title=RFM12Pi_V2</a> might give you some clues.</p>
<p>MartinR has in the past suggested 0xC657 for 3.8918 kbps.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13985"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Thu, 01/08/2013 - 17:45.</div>
    <div class="content">
     <p>Hello,&nbsp;</p>
<p>I still havent find how to change on the rfm12pi side ...</p>
<p>However, I think &nbsp;(not sure) that my still increasing numbers of nodes in the emoncms (more than 30000 !) could come from the upgrade I did : I follow the steps : <a href="http://wiki.openenergymonitor.org/index.php?title=RFM12Pi_V2#Upgrading_RFM12Pi_Firmware_Direct_from_the_Pi" title="http://wiki.openenergymonitor.org/index.php?title=RFM12Pi_V2#Upgrading_RFM12Pi_Firmware_Direct_from_the_Pi">http://wiki.openenergymonitor.org/index.php?title=RFM12Pi_V2#Upgrading_R...</a></p>
<p>and this strange crazy number of inputs seems to be related to this firmware upgrade. Maybe I did something wrong ?&nbsp;<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13991"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Thu, 01/08/2013 - 21:38.</div>
    <div class="content">
     <p>Hi,</p>
<p>I think Robert is right, if you look at the source code for the firmware you uploaded to the rfm12pi&nbsp;(<a href="https://github.com/mharizanov/RFM2Pi/blob/master/firmware/RF12_Demo_atmega328/RF12_Demo_atmega328.ino" title="https://github.com/mharizanov/RFM2Pi/blob/master/firmware/RF12_Demo_atmega328/RF12_Demo_atmega328.ino">https://github.com/mharizanov/RFM2Pi/blob/master/firmware/RF12_Demo_atme...</a> ) at line 233 you have</p>
<p>
	rf12_control(0xC049); &nbsp;</p>
<p>You will probably have to change that to the same value you used in your transmitter sketch, compile it and upload it following the procedure described in the page you linked ... Please be aware that it is just an educated guess :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13994"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 01/08/2013 - 22:45.</div>
    <div class="content">
     <p>No, it&#39;s not that line - the hex value must be C6xx. &quot;C0xx&quot; is a low battery &amp; clock divider command.</p>
<p>I think you&#39;ll need to add a similar line but using the same constant as you use in your emonTx:</p>
<p class="rteindent1">rf12_control(0xC657);</p>
<p>How to obtain the last 2 digits is on Page 17 of the Hope RFM12B data sheet: 4. Data Rate Command.</p>
<p>(Thanks for the source file reference, madmatt.)</p>
<p>dsarrut:</p>
<p>You&#39;re not saying whether you have different rates at each end. If you have, you cannot come to any conclusions about another fault because that alone will turn the data stream into rubbish. If you have gone back and the same data rate is the same at both ends, then you need to check what you did to upgrade.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14008"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Fri, 02/08/2013 - 12:32.</div>
    <div class="content">
     <p>Robert: I used the same rate at each end.</p>
<p>I tried to add a line with rf12_control, and upload to the raspberry (I compile with arduino and upload the hex file), but no luck yet ... I will continue next time ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14011"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Fri, 02/08/2013 - 13:18.</div>
    <div class="content">
     <p>If there is a lot of noise (other transmissions in air) then 1.5min may be too long interval, sometimes in here&nbsp;it takes 2-3 transmissions to get through as a lot of other transmissions on 868mhz area too.</p>
<p>maybe there is an overflow error in the emontx script that has been modified so that <em>something overflows to &quot;node&quot; variable space</em>. my pool monitor script has been working now for few months so that can be tried too if there is an error. distance is 15m through 3-4 brick walls in between tx and rfm12pi, for my rfm12pi i have an <em>external 868mhz antenna </em>with magnetic base just to be sure.</p>
<p>(the calibration value was based on different ct and different burden - but at the end i ended up using normal ct as the wire was too thick for this kind of smaller ct)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14731"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Sun, 01/09/2013 - 14:06.</div>
    <div class="content">
     <p>Hello !</p>
<p>back from vacation, I tried to setup again the emontx&nbsp;+ temp sensor. I set the interval to 10sec. &nbsp;The distance between emontx and the raspberry is about 20m, but the emontx is very close to the ground. Here are the results :&nbsp;</p>
<p>1 - the &quot;node&quot; variable space is still growing in the emoncms interface, with tens of &quot;fake&quot; nodes. Even if I delete them, they reappear&nbsp;with seconds/minutes later.&nbsp;</p>
<p>2 - the temperature is sometimes correct but sometimes not, with random values (105 C, -40, or change in temperature of more than few tenth of degree), making the daily monitoring unusable&nbsp;</p>
<p>I don&#39;t know what to do now ... Maybe adding an external antenna could help ?&nbsp;</p>
<p>I also tried to change the datarate&nbsp;with&nbsp;rf12_control on the&nbsp;rfm12pi, but when I compile the&nbsp;RF12_Demo_atmega328.ino and upload on the pi (using&nbsp;avrdude -v&nbsp; -c arduino -p ATMEGA328P -P /dev/ttyAMA0 -b 38400 -U flash:w:Rf12_Demo_atmega328.cpp.hex) it does not work anymore : I probably do not know how to proceed&nbsp;...</p>
<p>Any hints ?</p>
<p>David</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14733"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3717.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dsarrut&#039;s picture" title="dsarrut&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/3717.html" title="View user profile.">dsarrut</a> on Sun, 01/09/2013 - 16:22.</div>
    <div class="content">
     <p>Regarding the unsuccessful trial to change the data rate : I probably did not select the correct board type into arduino&nbsp;in order to obtain the .hx from the corrected RF12_Demo_atmega328.ino ... Is it Arduino&nbsp;Nano ATMega328 ?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14854"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Wed, 04/09/2013 - 15:34.</div>
    <div class="content">
     <p>There may be something wrong with the code or even noise on same band ?</p>
<p>I have around 15 meters from pool with 3 thick concrete walls in between and no issues except these odd collisions using script posted here and rfm12pi.</p>
<p>The temperature odd reading is most likely the way how 1-wire is implemented and fails sometimes to read the sensor.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18914"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pool temperature monitor</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Sun, 02/03/2014 - 20:39.</div>
    <div class="content">
     <blockquote><p>Regarding the unsuccessful trial to change the data rate : I probably did not select the correct board type into arduino in order to obtain the .hx from the corrected RF12_Demo_atmega328.ino ... Is it Arduino Nano ATMega328 ?</p>
</blockquote>
<p>Probably late for you, but the answer is no.</p>
<p><a href="http://wiki.openenergymonitor.org/index.php?title=RFM12Pi_V2#Modified_OptiBoot_Bootloader" title="http://wiki.openenergymonitor.org/index.php?title=RFM12Pi_V2#Modified_OptiBoot_Bootloader">http://wiki.openenergymonitor.org/index.php?title=RFM12Pi_V2#Modified_Op...</a></p>
<blockquote><p>In order to compile Arduino sketches to work for this modified bootloder, we need to add a new entry in arduino-1.0.2\hardware\arduino\boards.txt.</p>
</blockquote>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2368"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-pEtrh3jzHyciNmsc_KW7Loi2Jtxi-KbtNXUPXPM68Ic" value="form-pEtrh3jzHyciNmsc_KW7Loi2Jtxi-KbtNXUPXPM68Ic"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
