<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11246 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:39:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>A new problem with emonGLCD | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">A new problem with emonGLCD</h3>
        <span class="submitted">Submitted by <a href="../user/8558.html" title="View user profile.">Yukimura Sanada</a> on Fri, 11/09/2015 - 16:22</span>
        <div class="content"><p>Hi, thanks to Paul my&nbsp;emonGLCD&nbsp;have correct time.</p>
<p>But don&#39;t send temperature to emonbase. I look at every line of sketch but i don&#39;t be able to send temperature.</p>
<p>I use the original sketch without modification for&nbsp;emonGLCD&nbsp;but no temp.</p>
<p>Thanks for&nbsp;help.</p>
<p>Yuki</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11263.html" class="topic-previous" title="Go to previous forum topic">‹ v9 on Hosted Server</a>
              <a href="11258.html" class="topic-next" title="Go to next forum topic">Data Upload to server ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-34078"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: A new problem with emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 11/09/2015 - 19:02.</div>
    <div class="content">
     <p>Which sketch is the "original sketch"?</p>
<p>Does the emonGLCD not send the temperature, or does the emonBase not receive the temperature?</p>
<p>Does the emonGLCD receive anything from your emonTx?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34080"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8558.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Yukimura Sanada&#039;s picture" title="Yukimura Sanada&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: A new problem with emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/8558.html" title="View user profile.">Yukimura Sanada</a> on Fri, 11/09/2015 - 19:48.</div>
    <div class="content">
     <p>Ok. Sorry.</p>
<p>1) The sketch is SolarPV</p>
<p>​2) i don&#39;t&nbsp;know but emonBase receive from emonTX</p>
<p>3) emonGLCD&nbsp;receive from emonTX and receive time from emonBase</p>
<p>Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34083"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: A new problem with emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 11/09/2015 - 20:27.</div>
    <div class="content">
     <p>The part of the sketch that sends the temperature is right at the end, starting at line 258.</p>
<p>Have you got the emonGLCD node defined in emonhub.conf to receive the temperature measurement?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34085"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8558.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Yukimura Sanada&#039;s picture" title="Yukimura Sanada&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: A new problem with emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/8558.html" title="View user profile.">Yukimura Sanada</a> on Fri, 11/09/2015 - 21:05.</div>
    <div class="content">
     <p>emonGLCD&nbsp;sketch solar PV send temp</p>
<p>emonglcd.temperature = (int) (temp * 100); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// set emonglcd payload<br />
&nbsp; &nbsp; rf12_sendNow(0, &amp;emonglcd, sizeof emonglcd); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //send temperature data via RFM12B using new rf12_sendNow wrapper -glynhudson<br />
&nbsp; &nbsp; rf12_sendWait(2); &nbsp; &nbsp;<br />
&nbsp; }</p>
<p>emonGLCD&nbsp;sketch solarPV&nbsp;node</p>
<p>//--------------------------------------------------------------------------------------------<br />
// RFM12B Settings<br />
//--------------------------------------------------------------------------------------------<br />
#define MYNODE 20 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Should be unique on network, node ID 30 reserved for base station<br />
#define RF_freq RF12_868MHZ &nbsp; &nbsp; // frequency - match to same frequency as RFM12B module (change to 868Mhz or 915Mhz if appropriate)<br />
#define group 210 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// network group, must be same as emonTx and emonBase</p>
<p>emonhub&nbsp;</p>
<p>&nbsp;[[[runtimesettings]]]<br />
&nbsp; &nbsp; &nbsp; &nbsp; pubchannels = ToEmonCMS,<br />
&nbsp; &nbsp; &nbsp; &nbsp; subchannels = ToRFM12,<br />
&nbsp; &nbsp; &nbsp; &nbsp; interval = 300<br />
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; # datacode = B #(default:h)<br />
&nbsp; &nbsp; &nbsp; &nbsp; # scale = 100 #(default:1)<br />
&nbsp; &nbsp; &nbsp; &nbsp; group = 210 #(default:210)<br />
&nbsp; &nbsp; &nbsp; &nbsp; frequency = 868 #(default:433)<br />
&nbsp; &nbsp; &nbsp; &nbsp; baseid = 20 #(emonPi default:5)<br />
&nbsp; &nbsp; &nbsp; &nbsp; quiet = false #(default:true)<br />
&nbsp; &nbsp; &nbsp; &nbsp; calibration = 230V #(UK/EU: 230V, US: 110V)<br />
&nbsp; &nbsp; &nbsp; &nbsp; sendtimeinterval = 60<br />
&nbsp; &nbsp; &nbsp; &nbsp; # interval = 300 #(default:0)<br />
&nbsp; &nbsp; &nbsp; &nbsp; # nodeoffset = 32 #(default:0)</p>
<p>&nbsp;</p>
<p>is right?</p>
<p>Yuki</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34087"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: A new problem with emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 11/09/2015 - 21:55.</div>
    <div class="content">
     <p>You need to ask pb66, do you not have a section that might look like:</p>
<pre>
[[20]]
    nodename = emonGLCD
    firmware = SolarPV.ino
    hardware = emonGLCD
    [[[rx]]]
       names = internal_temperature
       datacodes = h
       scales = 0.01
       units = C
</pre><p>
This node number(20) conflicts with the default Node number for the second emonTH, therefore you must either comment that out, or change this and the node number of your GLCD (to 23?)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34099"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: A new problem with emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 12/09/2015 - 09:55.</div>
    <div class="content">
     <p>Indeed since every node must have a unique nodeid&nbsp;on any JeeLib&nbsp;based network,</p>
<p>As for defining the emonGLCD in the nodes section of emonhub.conf,&nbsp;I don&#39;t actually recall this ever&nbsp;coming up about the emonGLCD on the &quot;emon-pi&quot; variant&nbsp;emonHub and&nbsp;it isn&#39;t an issue for original emonhub since it does not force the user to fully define every node, so providing the nodes have unique node id&#39;s it will just work,<span style="line-height: 20.8px;">&nbsp;</span></p>
<p><span style="line-height: 20.8px;">I</span><span style="line-height: 20.8px;">f the&nbsp;</span>emonGLCD<span style="line-height: 20.8px;">&nbsp;is&nbsp;transmitting as node 20 and node 20 is defined as an&nbsp;</span>emonTH<span style="line-height: 20.8px;">&nbsp;in the nodes section the packets will be discarded as they don&#39;t fit the definition. The easy way to over come this (if not using an&nbsp;</span>emonTH<span style="line-height: 20.8px;">&nbsp;on node 20) would be as Robert says, to delete or&nbsp;comment out the&nbsp;</span>emonTH<span style="line-height: 20.8px;">&nbsp;</span>node20<span style="line-height: 20.8px;">&nbsp;and add the&nbsp;</span>emonGLCD<span style="line-height: 20.8px;">&nbsp;</span>node20<span style="line-height: 20.8px;">&nbsp;as per his example, although (personally) I would be inclined to avoid using spaces in the name to reduce&nbsp;the chance of&nbsp;future surprises, use &quot;int_temp&quot; or &quot;</span>glcdTemp<span style="line-height: 20.8px;">&quot; or something similar,&nbsp;</span></p>
<p><span style="line-height: 20.8px;">Paul</span></p>
<p>[Edited the snip above to incorporate your suggestion - RW]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-34170"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8558.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Yukimura Sanada&#039;s picture" title="Yukimura Sanada&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: A new problem with emonGLCD</h3>

    <div class="submitted">Submitted by <a href="../user/8558.html" title="View user profile.">Yukimura Sanada</a> on Tue, 15/09/2015 - 18:50.</div>
    <div class="content">
     <p>Sorry for the delay but my computer was dead!!!!</p>
<p>Thanks to Robert and to Paul.</p>
<p>I comment out the&nbsp;emonTH&nbsp;node20 and create a new emonGLCD&nbsp;node20&nbsp;and it work.</p>
<p>Thanks again guys.</p>
<p>Yuki</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11246"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-MoK_L17wF1CfRywp8nKeLPsKM1prRfhpXf1KzU-Cx_U" value="form-MoK_L17wF1CfRywp8nKeLPsKM1prRfhpXf1KzU-Cx_U"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/11246 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:39:47 GMT -->
</html>
