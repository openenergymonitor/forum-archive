<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10938 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:46:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>What&#039;s wrong with Wh Accumulator | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">What&#039;s wrong with Wh Accumulator</h3>
        <span class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Sat, 04/07/2015 - 11:48</span>
        <div class="content"><p>I seem to have an issue with Wh Accumultor numbers and am hoping that someone can shed some light.</p>
<p>A picture is worth 1000 words (pictures in this case)</p>
<p>All metrics are focused on July 2nd 2015</p>
<p><strong>Pic1</strong>: My EmonPi node CT1 Settings</p>
<ol>
<li>Ignore the multiplier for now, this is to match the numbers to the readings from the meter on the Pool Pump.</li>
<li>I&#39;m logging the node readings to &quot;Pool Pump&quot; Feed</li>
<li>Converting Power to KWh</li>
<li>Accumulating Wh</li>
</ol>
<p><strong>Pic2</strong>: Graph of &quot;Pool Pump Readings&quot;</p>
<ul>
<li>The graph reflects exactly what I&#39;m expecting, and the numbers match the readings on the pump</li>
<li>10:00 AM to 12:00 PM spike represents the pump running at a higher speed.</li>
<li>The spikes at 3hr intervals represents the SWG Chrlorinator running.</li>
</ul>
<p><strong>Pic3</strong>: &quot;Power to KWh&quot; Readings</p>
<ul>
<li>Again all good, and the difference between Max and Min matches the data from Pic2</li>
</ul>
<p><strong>Pic4</strong>: &quot;Wh Accumulator&quot; Readings</p>
<ul>
<li><strong>This is where I don&#39;t get the numbers</strong>, Why is this figure not around 5150? is there something wrong on how this is being calculated or is it my wrong interpretation / expectation?</li>
</ul>
<p><strong>Pic5</strong>: Visualzation from Wh Readings to get daily conumption Bargraph</p>
<ul>
<li>Had Wh reading been accurate, this bargraph would have represented my daily consumption</li>
</ul>
<p>&nbsp;</p>
<p>I also log to EmonCMS, so let&#39;s compare the data there to see if things are different (which they are)</p>
<p><strong>Pic6</strong>: Node config (I log to more feeds)</p>
<ol>
<li>Ignore the 2.23 multiplier difference</li>
<li>Same as before</li>
<li>Same as before</li>
<li>My Attempt to findout out the best way to calculate Daily consumption (more on this below)</li>
<li>Again my Attempt to findout out the best way to calculate Daily consumption (more on this below)</li>
<li>Wh Accumulator (see info under section pic9)</li>
<li>Another feed of Wh accumulator (see why in info under section pic9)</li>
<li>My attempt at understanding Histogram (still don&#39;t, but that&#39;s another story for another day)</li>
<li>Again my Attempt to findout out the best way to calculate Daily consumption (more on this below)</li>
</ol>
<p><strong>Pic7</strong>: Same as Pic2 but on EmonCMS</p>
<ul>
<li>Data is accurate</li>
<li>The delta is due to the multiplier difference which is expected.</li>
</ul>
<p><strong>Pic8</strong>: Same as Pic3 but on EmonCMS</p>
<ul>
<li>Again all the numbers are as expected.</li>
</ul>
<p><strong>Pic9</strong>: Same as Pic 3 but on EmonCMS (Wh Accumulator)</p>
<ul>
<li>Max and Min the same, <strong>for some reason Accumulation has stopped on EmonCMS, Why?</strong></li>
<li>Looking at Wh accumlator over a longer period (<strong>Pic10</strong>), I see that it is not a slope, but rather two chunks. why is that?</li>
<li><strong>Pic11 </strong>Started another feed of Wh accumlator when I realized it was not accumulating, but it is still not working.</li>
</ul>
<p><strong>Pic12</strong>: KWh to KWh/d on EmonCMS</p>
<ul>
<li>My attempt to understand and find out the best way to calculate daily consumption</li>
<li><strong>I have no idea why the reading is 0 on July 2nd, kind of matches Wh Accumulator, but isn&#39;t this supposed to be just a matter of Kwh - Kwh/d conversion? KWh figures are right.</strong></li>
<li>Confused</li>
</ul>
<p><strong>Pic13</strong>: Power to KWh/d</p>
<ul>
<li>Similar to section under pic12, my attempt to try a different approach</li>
<li><strong>Yet again, the feed had stopped working June 20th</strong></li>
</ul>
<p><strong>Pic14</strong>: Wh increments to KWh/d on EmonCMS</p>
<ul>
<li><strong>Truely confusing</strong>, if Wh had stopped accumulating / logging, then how is it possible that I have 15182.1 Wh usage?</li>
<li>Even if we assume that for some reason the Wh data is accumulated, but somehow mising from the feeds, we&#39;re back to the original question of <strong>why the numbers don&#39;t match</strong> the power readings for that day?</li>
</ul>
<p>I&#39;m really hoping that someone can make sense out of all this,</p>
<p>Sorry for the long post, I tried to be as verbose as possible to avoid confusion and multiple back and forths.</p>
<p>Thanks in advance</p>
<p>Hrant</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11086.html" class="topic-previous" title="Go to previous forum topic">‹ emonPi USA CTs</a>
              <a href="11082.html" class="topic-next" title="Go to next forum topic">Euronet 50-50max ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-31997"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Tue, 07/07/2015 - 01:14.</div>
    <div class="content">
     <p>Was it the fact that it was a long post that bore most reasders? or was it one that stumped all 177 viewers just like it had me?</p>
<p>Not sure which one to hope for, but I&#39;ll even take any speculative answers at this point as I&#39;m trying to make sense of all this data.</p>
<p>&nbsp;</p>
<p>Thanks</p>
<p>Hrant</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31999"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 07/07/2015 - 08:48.</div>
    <div class="content">
     <p>Hi Hrant</p>
<p>There is alot&nbsp;there to digest and although&nbsp;did take a look over it, I couldn&#39;t understand why you were using accumulators&nbsp;and assumed I was missing something.</p>
<p>Wh accumulator process will deduct the last value from the latest value to determine the change and add that to an ever accumulating total to track meter readings etc.It has some quite specific coding to work with ever&nbsp;increasing values that can restart from zero at any time (device is reset or rollover when a variable reaches it&#39;s max value) like a ratcheting effect.</p>
<p>What is the purpose of line 4 in pic 1?&nbsp;</p>
<p>In pic6&nbsp;line 4 shouldn&#39;t be there as the Power to KWh in line 3 passes the power value to the next process. Line 6 is&nbsp;also getting fed a power value,&nbsp;</p>
<p>As far as I can see, you should have no need for any accumulators based on the data you have provided, unless, of cause I am missing something.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32017"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Tue, 07/07/2015 - 18:58.</div>
    <div class="content">
     <p>Thanks Paul, I appreciate your response, you always come true.</p>
<p>Let me try to answer the points your raised.</p>
<blockquote><p>There is alot&nbsp;there to digest and although&nbsp;did take a look over it, I couldn&#39;t understand why you were using accumulators&nbsp;and assumed I was missing something.</p>
</blockquote>
<p>For lack of better understanding I&#39;m using the Wh accumulator to basically accumulate the total power used over a period, then I could graph daily, weekly, monthly, or event match my utility bill period (which is not constant)</p>
<p>I&#39;ve seen few guides / tutorials using it, so I thought to use it.</p>
<p>Example: <a href="http://openenergymonitor.blogspot.ca/2014/08/monitoring-solarpv-heatpump-and-house.html" title="http://openenergymonitor.blogspot.ca/2014/08/monitoring-solarpv-heatpump-and-house.html">http://openenergymonitor.blogspot.ca/2014/08/monitoring-solarpv-heatpump...</a></p>
<blockquote><p>Wh accumulator process will deduct the last value from the latest value to determine the change and add that to an ever accumulating total to track meter readings etc.It has some quite specific coding to work with ever&nbsp;increasing values that can restart from zero at any time (device is reset or rollover when a variable reaches it&#39;s max value) like a ratcheting effect.</p>
</blockquote>
<p>I didn&#39;t know that it had such issues, I was thinking that it is an accumulator on the feed, not effected by restarts, and all it does was add the latest power read values (every 10 sec) to the feed total and display the current total.</p>
<p>I&#39;ll avoid using it, but that still does not explain the wrong totals, unless if it is buggy or I&#39;m not using it correctly.</p>
<blockquote><p>What is the purpose of line 4 in pic 1?</p>
</blockquote>
<p>See above</p>
<blockquote><p>In pic6&nbsp;line 4 shouldn&#39;t be there as the Power to KWh in line 3 passes the power value to the next process. Line 6 is&nbsp;also getting fed a power value,</p>
</blockquote>
<p>Yeah, the node configuration is a bit confusing to me, and probably the root of my problems.</p>
<p>It&#39;s not clear what is the input, is it the node data? the output of the first operation feeds to the input of the second operation? and then the second&#39;s output to third&#39;s input?</p>
<p>What if the output is not the same data type as the input?</p>
<p>what if I want to use the output of one operation for multiple operations?</p>
<p>Or the node data for multiple feeds / operations? Do I need to revert back to</p>
<p>Had the feed configuration accepted input from other feeds instead of just nodes, then it would have been intutitve and easy to use.</p>
<p>My reasoning of the setup up to lines 4 in pic 6 was as follows</p>
<p>Input: Node power, multiple to by 2.23, store it in feed &quot;Pool Pump&quot;, convert it to Kwh, store it in Pool Pump KWh, convert it to KWh/d and store it in Pool Pump KWh-d</p>
<p>Hoping that KWh-d (pic12) would be a feed of daily consumption.</p>
<p>Was that wrong thinking? what should have I done?</p>
<p>Why is it reading zero for the period in question?</p>
<p>Lines 5-9 are my attempts trying to deduce how it functions to get my daily data.</p>
<p>but lines 1-4 shouldn&#39;t be wrong, at least I thought so.</p>
<p>&nbsp;</p>
<p>I have managed to get daily consumption by using a visualization source of which being: &quot;Power: Pool Pump&quot;</p>
<p>But I would have prefered getting that as feed, hence why I used the different lines in the setup.</p>
<p>&nbsp;</p>
<p>Thanks for your feedback, if there is any document explaining each item of a configuration in detail, i&#39;d love to learn by reading rather than trial and error, forgive me if I missed the doc.</p>
<p>&nbsp;</p>
<p>Hrant</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32031"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 08/07/2015 - 07:54.</div>
    <div class="content">
     <p>I wasn&#39;t actually saying the Whaccumulator&nbsp;had issues, rather that it was designed to deal with the particular issues encountered with logging kWh feeds derived from <em>other devices that could reset</em></p>
<p>You do not seem to be doing that, so shouldn&#39;t need Wh accumulators.&nbsp;&nbsp;</p>
<p><em>&quot;I have managed to get daily consumption by using a visualization source of which being: &quot;Power: Pool Pump&quot;&nbsp;But I would have prefered getting that as feed, hence why I used the different lines in the setup.&quot;</em></p>
<p>Pic1 line 3 is an accumulating total kWh for the pool pump.</p>
<p>each node consists of 1 or more inputs. ech input has a processing chain, which processes the inputs value as defined saving the results to 1 or more feeds.</p>
<p>The output of each process is passed to the next process in the chain, but be aware <em>some</em> processes do not pass their <em>result</em> to the next, eg power to kWh/d saves the daily total but passes the current input value to it&#39;s output, ie it has no effect on the processing chain, think of it as a &quot;T&quot; piece, the input is passed through unchanged to the output while at the same time a &quot;copy&quot; goes off to the daily total.</p>
<p>If you want to do multiple chains from the same input, once you have completed one chain, use the &quot;reset to zero&quot; process then use &quot;+input&quot; and do the second chain, you can do this multiple times.</p>
<p>I would expect erratic results from using the wh accumulators as you have, so I would try and explain the results, try removing them and using the basic power to kwh and power to kwh/d etc&nbsp;</p>
<p>Paul</p>
<p>(Corrected the example)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32033"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Tue, 07/07/2015 - 22:10.</div>
    <div class="content">
     <p><em>but be aware some processes do not pass their result to the next, eg power to kWh saves the daily total but passes the current kWh input value to it&#39;s output, ie it has no effect on the processing chain,</em></p>
<p>Paul,</p>
<p>I haven&#39;t seen <em>that</em> info, (was able to figure it out, though) could you post a list of which processes behave that way? It might help prevent/resolve confusion down the road, as it were, regarding input processing.</p>
<p>Thanks!</p>
<p>BT</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32038"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Wed, 08/07/2015 - 00:07.</div>
    <div class="content">
     <p>Thanks a lot Paul, this helps out immensely</p>
<p>I will reconfigure things and see how the data gathering goes, will post back if I have further questions.</p>
<p>In the meantime I have one question re:</p>
<blockquote><p>but be aware some processes do not pass their result to the next, eg <strong>power to kWh</strong> saves the daily total but passes the current kWh input value to it&#39;s output, ie it has no effect on the processing chain</p>
</blockquote>
<p>Did you mean KWh to KWh/d or is it power to KWh</p>
<blockquote><p>but passes the current kWh input value to it&#39;s output</p>
</blockquote>
<p>Leads me to think it is KWh to KWh/d</p>
<p>&nbsp;</p>
<p>Thanks a bunch</p>
<p>Hrant</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32039"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Wed, 08/07/2015 - 01:17.</div>
    <div class="content">
     <blockquote><p>Was it the fact that it was a long post that bore most readers? Or was it one that stumped all 177 viewers just like it had me?</p>
</blockquote>
<p>&nbsp;</p>
<p>Oh, yes; it stumped me. Too much information, I think.</p>
<p>It&#39;s not your fault. I think that you probably provided all the information needed and everything I would have posted in your place, but I have a feeling that, like me, many people are trying to get their heads around their own, similar issues and don&#39;t have the head-space to analyse yours.</p>
<p>Amongst other things I, too am having a hard time in figuring how the kWh &amp; kWh/d thing is supposed to work, based on the instructions in the guide (in fact, I can&#39;t actually seem to find a kWh/d entry in the feed process dialog of my emonCMS). I don&#39;t wish to derail this thread by going too &#39;meta&#39; with this, but we need to have a better wiki, with wider, more up-to-date input , which can be used as an authoritative source for noobs, as well as advanced users. Ideally I&#39;m thinking of something like the Arch wiki.</p>
<p>Anyway, here&#39;s my emonCMS dash, along with an example node and the feeds:</p>
<p><img alt="Dash" src="../sites/default/files/Selection_011.png" style="width: 1024px; height: 682px;" /><img alt="Node" src="../sites/default/files/Selection_009.png" style="width: 1024px; height: 740px;" /><img alt="Feeds" src="../sites/default/files/Selection_010.png" style="width: 1024px; height: 629px;" />Notice how the feed to kWh just accumulates and doesn&#39;t give a daily total. You can also see that there is no option to give kWh/d on the log-to-feed menu.</p>
<p>Sorry. If this de-rails the thread, then let me know and I&#39;ll post elsewhere, but I feel that it is related.</p>
<p>Thanks,</p>
<p>Rich.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32040"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Wed, 08/07/2015 - 02:31.</div>
    <div class="content">
     <p>Hi Rick,</p>
<p>Thanks for the moral support, I don&#39;t feel alone (in being noob) but thankfully we have people like Paul who chime in and help out all the time.</p>
<blockquote><p>I can&#39;t actually seem to find a kWh/d entry in the feed process dialog of my emonCMS</p>
</blockquote>
<p>That&#39;s probably because you are logging on EmonPi, my EmonPi does not have those processors either, you need to use EmonCMS (emoncms.org) to get those processors.</p>
<blockquote><p>Notice how the feed to kWh just accumulates and doesn&#39;t give a daily total</p>
</blockquote>
<p>Yeah, you can get a daily total if you configure the bargraph, with interval value = d and delta set to 1</p>
<p>See attached pics (Feed being KWh)</p>
<p>Thanks</p>
<p>Hrant</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32053"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 08/07/2015 - 08:34.</div>
    <div class="content">
     <p>@Hrant, sorry that example wasn&#39;t very clear and the&nbsp;&quot;kWh&quot; should have been &quot;kWh/d&quot;, I&#39;ve corrected it now. The power to kWh does do the same,&nbsp;I&#39;m not 100% sure about the kWh to kWh/d without testing. sorry for adding to the confusion,</p>
<p>@Bill, I don&#39;t know the fill list off the top of my head I&#39;m afraid. I did start tackling documenting all the processes for the emoncms.org documentation but it all got deleted sometime ago.</p>
<p>@Rich, Documentation for emoncms&nbsp;does indeed&nbsp;need tackling, as to whether a wiki suits the purpose I&#39;m not entirely sure. it&#39;s a complex topic that is constantly evolving and added to the mix is the different variants as well as different versions, what is accurate in one instance one day&nbsp;may&nbsp;not be in another version/variant/platform,&nbsp;for it to be &quot;<em>used as an authoritative source for noobs, as well as advanced users&quot; </em>would need careful structuring and constant review,&nbsp;</p>
<p>The kWh/d is not an option in the low-write versions, Daily totals can be displayed using a bargraph as shown by&nbsp;Hrant.&nbsp;&nbsp;</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32059"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8340.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="psg&#039;s picture" title="psg&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8340.html" title="View user profile.">psg</a> on Wed, 08/07/2015 - 10:44.</div>
    <div class="content">
     <p>I agree that any attempt at updating the documentation is fraught with variant and time issues. However the EmonPi&nbsp; is a new &quot;Product&quot; with software components &quot;EmonHub&quot; unfamiliar to new, and existing, implementers. &nbsp;</p>
<p>I too took &quot; Wh accumulator&quot; to mean an ever accumulating energy value which could be bar&nbsp;graphed into daily, weekly, etc, vis or dashboards. I wished to use it instead of kWh as it hopefully would give more precision than whole kWh. to compare with my PV meter which records kWh to two decimal places.&nbsp;</p>
<p>Any documentation on the process operators &nbsp;and Emonhub&nbsp;configuration would be most welcome, even just a couple of pages. I am sure it would cut down on the number of confused Noobs posts.&nbsp;Perhaps there should be an&nbsp;EmonPi&nbsp;link from the main OPenEnergyMonitor&nbsp;menu.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32061"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 08/07/2015 - 11:35.</div>
    <div class="content">
     <p><em>&quot;I too took &quot; Wh accumulator&quot; to mean an ever accumulating energy value which could be bar&nbsp;graphed into daily, weekly, etc, vis or dashboards.&quot;&nbsp;</em></p>
<p>it is, but it&#39;s intended input source is an ever increasing value that could roll over or reset to zero. It&#39;s a different tool to achieve similar results from a different input type. If you were using the continuous sampling sketch on the emonTx v3 the Wh counters would start counting at zero each time it&#39;s restarted, so emoncms&nbsp;is armed with the &quot;ratcheting&quot; Wh accumulator.&nbsp;</p>
<p>The precision of the feeds and processors fairly uniform, the power to kWh has inbuilt&nbsp;x0.001 scaling so only the units change, but the displayed value is rounded by the page set-up the retained value is higher precision.</p>
<p>Try adding a x1000&nbsp;processor after a power to KWh to see the value in Wh.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32063"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8237.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hrant&#039;s picture" title="hrant&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8237.html" title="View user profile.">hrant</a> on Wed, 08/07/2015 - 12:00.</div>
    <div class="content">
     <p>Thanks Paul for the clarification.</p>
<p>Hrant</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32801"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Thu, 30/07/2015 - 13:44.</div>
    <div class="content">
     <p>I set up my dash as suggested by hrant above and it worked just as described, so thanks very much!</p>
<p>Unfortunately, I have been having another problem with the Wh feed: Massive, unexplainable spikes in the feed data:</p>
<p><img alt="Spikes" src="../sites/default/files/Selection_012.png" style="width: 1024px; height: 701px;" /></p>
<p>Can anybody here explain this, or at least point me in the right direction?</p>
<p>Has anyone else encountered the same behavior?</p>
<p>Also, I have been experiencing irregular WIFI connectivity issues, whereby from what I can gather, my internet router (BT home hub) seems to be resetting occasionally (confirmed by checking router logs) and my emonpi&#39;s WIFI fails to reconnect properly, if at all.</p>
<p>These two issues could be in some way related, but I am no sure at all why this should be so.</p>
<p>Can anyone help?</p>
<p>Rich.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32802"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 30/07/2015 - 14:31.</div>
    <div class="content">
     <p>Hello Rich, looking at your earlier post I assume the daily graphs your showing there are generated from a feed generated by the power to kwh processor?</p>
<p>Can you show the raw output of that feed using the normal line graph viewer? A large negative value like that would suggest that its being reset but that&#39;s not something I&#39;ve ever experienced with a feed created by the power to kwh processor and since this is all on the emonpi is should be independent of wifi..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32990"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Tue, 04/08/2015 - 08:12.</div>
    <div class="content">
     <p>Sorry for the delay.</p>
<p>Unfortunately, I&#39;m still getting spikes:</p>
<p><img alt="" src="../sites/default/files/Selection_013.png" /></p>
<p>Each of the feeds <em>are</em> from the power to kWh processor; as seen in the last post:</p>
<p>i.e. mains_power -&gt; log to feed -&gt; Power to kWh -&gt; mains_energy</p>
<p><img alt="" src="../sites/default/files/Selection_009.png" style="width: 1024px; height: 740px;" /></p>
<p>The *_energy feeds are fed into the three bottom bargraphs above, like so (in order, left to right):</p>
<p><img alt="" src="../sites/default/files/Selection_014.png" style="width: 429px; height: 392px;" /><img alt="" src="../sites/default/files/Selection_015_0.png" style="width: 397px; height: 396px;" /><img alt="" src="../sites/default/files/Selection_016.png" style="width: 378px; height: 390px;" /></p>
<p>Here&#39;s what I get from the normal line graph for each of these feeds:</p>
<p>&nbsp;</p>
<p>mains_energy (kWh):</p>
<p><img alt="" src="../sites/default/files/Selection_017.png" style="width: 714px; height: 589px;" /></p>
<p>solar_energy (kWh):<img alt="" src="../sites/default/files/Selection_018.png" style="width: 715px; height: 582px;" /></p>
<p>house_energy (kWh):<img alt="" src="../sites/default/files/Selection_019.png" style="width: 709px; height: 589px;" /></p>
<p>For what it&#39;s worth, the My Solar app seems to be OK:</p>
<p><img alt="" src="../sites/default/files/Selection_020.png" style="width: 733px; height: 663px;" /></p>
<p>At least it&#39;s not showing <em>thousands</em> of kWh.</p>
<p>Any Ideas?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33113"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8204.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8204.png" alt="Rich.T.&#039;s picture" title="Rich.T.&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: What's wrong with Wh Accumulator</h3>

    <div class="submitted">Submitted by <a href="../user/8204.html" title="View user profile.">Rich.T.</a> on Fri, 07/08/2015 - 15:52.</div>
    <div class="content">
     <p>HI.</p>
<p>I&#39;ve had <em>very</em> little time to diagnose this over the last few days, but here&#39;s some clarifications and thoughts on my situation:</p>
<ul>
<li>The bottom three <strong>Data Viewer</strong> graphs from the above post <em>(above the My Solar screenshot)</em> are from Feeds -&gt; Data Viewer [click on the <em>eye</em> icon].</li>
<li>The <strong>Data Viewer</strong> feeds above don&#39;t marry up on screen <em>here</em> very well, but if you compare the x-axis dates, the spikes are obviously concurrent.</li>
<li>The <strong>Data Viewer</strong> graphs really need to have a title to identify them and aid in diagnosis.</li>
<li>A little circle appears on these graphs when you mouse over them, but a <em>tooltip</em> would be very handy here, in order to pinpoint the relevant data point. Perhaps a <em>right-click menu</em> with an option to display the raw data around this point would be useful. This would come in extremely handy in this case, in identifying precisely the times that spikes in the data occurred and therefore enabling comparison with with my internet router logs (see my comments above). It might help narrow down my investigation in this case. For example: If these spikes occurred at the same instant that the router reset or power-cycled; is this due to a network outage / scheduled reset, or is it due to a black/brown-out which took out both the emonPi and the router?</li>
<li>I registered for an emonCMS.org account online, but I cannot log into the account; possibly because I generated the password using <strong>LastPass</strong> and it is too long and/or contains the wrong characters: Please clarify the parameters for logins. It might help you in helping me if you had direct access to my data in this case.</li>
<li>Also; my live power feeds (top ot the dash, pictured above) will show graphs for 30m, 15m, 5m, and 1m, but come up blank when I try clicking on the <strong>1h</strong> button.</li>
</ul>
<p>That&#39;s all I can think of at the moment, but I will be back when I get some more time to spend investigating this.</p>
<p>Sorry for posting some unrelated issues here, but I needed to get them down before I forgot them and they were fresh in my mind.</p>
<p><strong>TrystanLea</strong> or anyone else, please reply if you can help me to get my head around what&#39;s going on here, because much of it seems inexplicable to me at the moment.</p>
<p>Thanks,</p>
<p>Rich</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10938"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-x0lqO5oD5MeXl4kzF2wP8F5LG3DWkOFnLSfVY1NHsv0" value="form-x0lqO5oD5MeXl4kzF2wP8F5LG3DWkOFnLSfVY1NHsv0"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
