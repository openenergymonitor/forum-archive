<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2718 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:24:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Solved - NanodeRF and Synology | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Solved - NanodeRF and Synology</h3>
        <span class="submitted">Submitted by Guest on Tue, 20/08/2013 - 22:06</span>
        <div class="content"><p>HI</p>
<p>I am running emoncms on synology NAS, until now I was using raspberry with RFM12Pi expansion to send data to synology emoncms webpage and everything worked. But now I decided, because I was only forwarding data to synology to use NanodeRF but here is where things go wrong :). I use NanodeRF_multinode code<br />
	and I can send data to emoncms.org but not on my Synology emoncms webpage the red led is on. I tried and checked everything (IP addresses, subfolders, api keys). Is there anyone using similar setup and can tell me what am I missing?</p>
<p>THX</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2722.html" class="topic-previous" title="Go to previous forum topic">‹ EMONGLCD: workaround for lockups</a>
              <a href="2678.html" class="topic-next" title="Go to next forum topic">Visualization of feeds on emoncms.org not working? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-14468"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3367.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3367.jpg" alt="Dan Woodie&#039;s picture" title="Dan Woodie&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Solved - NanodeRF and Synology</h3>

    <div class="submitted">Submitted by <a href="../user/3367.html" title="View user profile.">Dan Woodie</a> on Wed, 21/08/2013 - 02:24.</div>
    <div class="content">
     <p>Ripster,</p>
<p>I run my Emoncms install on a NAS4FREE server, which may or may not have some similarities with your Synology install. I had issues with it not receiving data from my NanodeRF using the static IP due to the Host name being blank in the GET packet issued from the NanodeRF. It would receive packets directly from my browser fine since my browser was properly listing the IP address in the host field instead of leaving it blank. The required edit was to the configuration file for Apache on the server to direct all requests that did not match an existing host to my Emoncms host. More information can be found on the thread here:</p>
<p><a href="2576.html">http://openenergymonitor.org/emon/node/2576</a></p>
<p>Look to the bottom of the post for the solution that worked for me. I hope this helps!</p>
<p>Dan</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14469"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Solved - NanodeRF and Synology</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Wed, 21/08/2013 - 03:59.</div>
    <div class="content">
     <p>Ripster - could you point a direction to find&nbsp;a writeup about how to make emoncms installation to Synology NAS including nanode RF setup ? Very interested doing the same but found it somewhat difficult without linux skills.</p>
<p>Raspberry pi is not really an option due to the database size.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14472"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ripster&#039;s picture" title="Ripster&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solved - NanodeRF and Synology</h3>

    <div class="submitted">Submitted by Ripster (not verified) on Wed, 21/08/2013 - 07:04.</div>
    <div class="content">
     <p>Hi Dan,&nbsp;</p>
<p>I will work on that, did some this morning but no success.<br />
	I did enable apache log, can you just help me how to get complete request, now i just get one line in log file.</p>
<p>&nbsp;</p>
<p>@Petrik&nbsp;for emoncms&nbsp;webpage you dont need any linux skills :)</p>
<p>Here is a&nbsp;<a href="http://www.synology.com/support/tutorials_show.php?q_id=480#t3">How to host a website on Synology NAS</a></p>
<p>You will need to create mysql databse&nbsp;with&nbsp;phyMyAdmin and put everything to your emoncms&nbsp;default.settings.php and rename it to settings.php.</p>
<p>$username = &quot;USERNAME&quot;; &lt;--- username to acces your phpmyadmin<br />
	$password = &quot;PASSWORD&quot;; &lt;--- password&nbsp;to acces your phpmyadmin<br />
	$server&nbsp;&nbsp; = &quot;localhost&quot;; &lt;---&nbsp;<strong>leave this alone</strong><br />
	$database = &quot;emoncms&quot;; &lt;--- database name you created in phpmyadmin for emoncms.</p>
<p>This is it. Now comes the part that I am struggling with, to accept data from nanodeRF, no problem with data send from raspberry. Will write more when I make some progress.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14473"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3657.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3657.jpg" alt="Mattia Rossi&#039;s picture" title="Mattia Rossi&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Solved - NanodeRF and Synology</h3>

    <div class="submitted">Submitted by <a href="../user/3657.html" title="View user profile.">Mattia Rossi</a> on Wed, 21/08/2013 - 09:00.</div>
    <div class="content">
     <p>Ripster, you could post the sketch you are using on the nanode and the log you get both on the synology and on the serial console of the nanode, maybe with that info we would be able to help ....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14478"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3367.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3367.jpg" alt="Dan Woodie&#039;s picture" title="Dan Woodie&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Solved - NanodeRF and Synology</h3>

    <div class="submitted">Submitted by <a href="../user/3367.html" title="View user profile.">Dan Woodie</a> on Wed, 21/08/2013 - 13:02.</div>
    <div class="content">
     <p>Ripster,</p>
<p>I determined I was receiving a 403 Forbidden response from Apache on my server by packet sniffing. I cannot help you much on that as the packet sniffing was mostly done by my father, who has much higher network expertise than I. Here is some information on the basics:</p>
<p><a href="http://www.linuxjournal.com/content/packet-sniffing-basics">http://www.linuxjournal.com/content/packet-sniffing-basics</a></p>
<p>Logging for Apache can be found at:</p>
<p><a href="http://httpd.apache.org/docs/2.2/logs.html">http://httpd.apache.org/docs/2.2/logs.html</a></p>
<p>I am not at home now, but from what I recall, the Apache logs when viewed showed the requests coming in and listed the 403 error, so that might confirm that this is the issue and not something else. The fix was listed in that previous post, editing the httpd.conf file to include a wildcard pointing towards the root of the apache install.</p>
<p>Hope you are able to find the issue.</p>
<p>Dan</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14484"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ripster&#039;s picture" title="Ripster&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solved - NanodeRF and Synology</h3>

    <div class="submitted">Submitted by Ripster (not verified) on Wed, 21/08/2013 - 16:34.</div>
    <div class="content">
     <p>So I use <a href="https://github.com/openenergymonitor/NanodeRF/tree/master/NanodeRF_multinode">Nanode_multimode.ino</a> code. Only changes are made to this lines.</p>
<p>// 1) Set this to the domain name of your hosted emoncms - leave blank if posting to IP address<br />
	char website[] PROGMEM = &quot;&quot;;</p>
<p>// or if your posting to a static IP server:<br />
	static byte hisip[] = { 192,168,1,106 };&nbsp;&nbsp;</p>
<p>// change to true if you would like the sketch to use hisip<br />
	boolean use_hisip = true;&nbsp;</p>
<p>// 2) If your emoncms install is in a subdirectory add details here i.e &quot;/emoncms3&quot;<br />
	char basedir[] = &quot;/emoncms&quot;;</p>
<p>// 3) Set to your account write apikey<br />
	char apikey[] = &quot;----MY-API-KEY------&quot;;</p>
<p>This is the apache log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.1 - - [21/Aug/2013:07:19:38 +0200] &quot;GET /emoncms/api/post.json?apikey=----MY-API-KEY------&amp;node=10&amp;csv=2093,3094 HTTP/1.0&quot; 200 2 &quot;-&quot; &quot;-&quot;</p>
<p>192.168.1.1 - - [21/Aug/2013:18:29:35 +0200] &quot;GET /emoncms/time/local.json?apikey=----MY-API-KEY------ HTTP/1.0&quot; 200 9 &quot;-&quot; &quot;-&quot;</p>
<p>&nbsp;</p>
<p>Now I need some more info from apache since it is geting data.</p>
<p>Will post some more, any idea is appreciated....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14485"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ripster&#039;s picture" title="Ripster&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solved - NanodeRF and Synology</h3>

    <div class="submitted">Submitted by Ripster (not verified) on Wed, 21/08/2013 - 18:00.</div>
    <div class="content">
     <p>i think i am onto something. i think nanoderf is pointing to a wrong path. Bolded is the difference.</p>
<p>this is nanoderf path</p>
<p>192.168.1.1 - - [21/Aug/2013:07:19:38 +0200] &quot;GET /emoncms<strong>/api/</strong>post.json?apikey=----MY-API-KEY------&amp;node=10&amp;csv=2093,3094 HTTP/1.0&quot; 200 2 &quot;-&quot; &quot;-&quot;</p>
<p>and this is from raspberry</p>
<p>192.168.1.1 - - [21/Aug/2013:19:43:31 +0200] &quot;GET /emoncms<strong>/input</strong>/bulk.json?apikey=----MY-API-KEY------&amp;data=[[11,18,2537,3060],[16,10,2225,3094],[35,18,2537,3060]] HTTP/1.1&quot; 200 2 &quot;-&quot; &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)&quot;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14487"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ripster&#039;s picture" title="Ripster&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Solved - NanodeRF and Synology</h3>

    <div class="submitted">Submitted by Ripster (not verified) on Wed, 21/08/2013 - 19:10.</div>
    <div class="content">
     <p>Well the incorrect path in the code was the problem.<br />
	I just corrected the path from /api&nbsp;&nbsp; to /input and now it works.</p>
<p>thx all</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2718"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-7sZ_BJLrqb6M-wQ8rbxeJCMCGXHpexHsjEHv4FIVXvA" value="form-7sZ_BJLrqb6M-wQ8rbxeJCMCGXHpexHsjEHv4FIVXvA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
