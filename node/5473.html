<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5473 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:39:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>&#039;Low write load&#039; image on HDD | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">&#039;Low write load&#039; image on HDD</h3>
        <span class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 31/07/2014 - 11:38</span>
        <div class="content"><p>Having nuked 3 SD cards I moved my system to a USB HDD about a year ago, and it ran well, except after about 9 months I started getting disk errors, which eventually prevented me from running a dd backup routine.</p>
<p>Eventually, at the weekend, the whole lot ground to a halt, I couldn&#39;t access it via IP or SSH, and upon checking the HDD, I found lots of serious problems, so I decided to start again, using the new &#39;low write load&#39; image.</p>
<p>However, despite getting the system to function via the SD card, I&#39;m struggling getting it to run via a USB HDD.</p>
<p>The process that I followed was to start with a 8GB SD card with the &#39;low write load&#39; image installed, and which worked OK when booted, and allowed me to SSH&nbsp;in the the Pi and also via it&#39;s IP. So far so good!</p>
<p>I setup my USB HDD as follows via my windows laptop running a Debian Live disk;</p>
<ul>
<li>
		sdb1 = a backup &amp; storage volume, holding about 40GB of pre-existing data <em>not associated with emoncms.</em></li>
<li>
		sdb2 = a 10GB FAT32 formatted volume (to house the emoncms root files.</li>
<li>
		sdb3 = a 10GB FAT32 formatted volume (to house the emoncms data files.</li>
</ul>
<p>Firstly, I replicated the volumes from the SD card to the HDD using <strong>$ sudo dd if=/dev/sdc2 of=/dev/sdb2 bs=4M</strong> and <strong>$ sudo dd if=/dev/sdc3 of=/dev/sdb3 bs=4M</strong> and which seemed to go well, no errors reported and I could see the various files in sdb2 &amp; sdb3 which were now listed as ext4 &amp; ext2 format respectively.</p>
<p>I edited the HDD /etc/fstab to show sda2 &amp; sda3 (the allocated volume addresses by the Rasp Pi), and also the cmdline.txt on the SD card to show sda2 as &#39;root&#39; as per the guide.</p>
<p>But when I assemble the Raspi and HDD, emoncms is not accessible via IP or SSH, although the 4 Raspi&#39;s LEDs are lit and the RFM2PI LED flashes every few seconds.</p>
<p>....very close to reaching for my 7lb hammer and starting a new hobby!</p>
<p>Paul</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5505.html" class="topic-previous" title="Go to previous forum topic">‹ jgauge : Value is &quot;wrong rounded&quot;!  Math.floor &lt;-&gt; Math.round</a>
              <a href="5493.html" class="topic-next" title="Go to next forum topic">No more multigraph after update ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22786"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 31/07/2014 - 12:52.</div>
    <div class="content">
     <p>Hello Paul, I found I needed to use at least ext2 with raspbian because raspbian requires the ability to set mixed permissions and ownership on files, could that be the problem I wonder?</p>
<p>If you can create an ext2 partition with a block size of 1024 bytes rather than default 4096 bytes that will better suited to emoncms, see the note here: <a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/install.md" title="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/install.md">https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/install.md</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22787"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 31/07/2014 - 13:04.</div>
    <div class="content">
     <p>But wouldn't that format be automatically created, as I've used dd to replicate the volumes from the SD card to the HDD?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22788"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 31/07/2014 - 14:08.</div>
    <div class="content">
     <p>Ah yes sorry, Im not sure what could be the cause, can you connect up a hdmi display to the pi to see if its giving any errors?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22789"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 31/07/2014 - 15:02.</div>
    <div class="content">
     <p>It does show errors, but I&#39;m not sure what it all means;</p>
<p>--------------------------------------------------------------------</p>
<p>fsck: WARNING: bad format on line 7 of /etc/fstab</p>
<p>/dev/sda3: Superblock last mount time (Thu Jul 31 12:17:29 2014,<br />
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;now = Mon Jul 28 18:07:00 2014) is in the future.</p>
<p>/dev/sda3: UNEXPECTED INCONSISTENCY; RUN fsck MANUALLY<br />
	&nbsp; &nbsp; (i.e., without -a or -p options)<br />
	fsck died with exit status 4<br />
	failed (code 4).<br />
	[FAIL] File system check failed. A log is being saved in &nbsp;/var/log/fsck/checkfs&nbsp;if that location is writable. Please repair the file system manually. ... failed!<br />
	[warn] A maintenance shell will be started. CONTROL-D will terminate this shell and resume system boot ... (warning).<br />
	Give root password for maintance<br />
	(or type Control-D to continue):</p>
<p>------------------------------------------------------------------</p>
<p>I&#39;ve attached a keyboard, and have got a prompt. Looked at the error log &#39;checkfs&#39; and it shows pretty much the same info as above.</p>
<p>Running<strong> $&nbsp;sudo fdisk -l </strong>does list sda1, sda2, and sda3<br />
	and $ lsblk shows;</p>
<table border="1" cellpadding="1" cellspacing="1" style="width: 500px;">
<tbody>
<tr>
<td>
				NAME</td>
<td>
				MAJ/MIN</td>
<td>
				SIZE</td>
<td>
				RO</td>
<td>
				TYPE</td>
<td>
				MOUNTPOINT</td>
</tr>
<tr>
<td>
				sda1</td>
<td>
				8:1</td>
<td>
				813.9G</td>
<td>
				0</td>
<td>
				part</td>
<td>
				&nbsp;</td>
</tr>
<tr>
<td>
				sda2</td>
<td>
				8:2</td>
<td>
				9.8G</td>
<td>
				0</td>
<td>
				part</td>
<td>
				/</td>
</tr>
<tr>
<td>
				sda3</td>
<td>
				8:3</td>
<td>
				9.8G</td>
<td>
				0</td>
<td>
				part</td>
<td>
				&nbsp;</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22791"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 31/07/2014 - 15:36.</div>
    <div class="content">
     <p>Hi Paul,</p>
<p>I&#39;ve seen this a few times basically there&#39;s a time discrepancy&nbsp;between the time recorded on the boot partition and sda3, because the image was written on the 28th and that&#39;s the time it thinks it is at boot but the sda3&nbsp;has a timestamp for today.</p>
<p>it&#39;s a daft system and not always easy to get around. sometime just running ctrl-d will work but other times not. the time it referencing is kept in&nbsp;/etc/fake-hwclock.data on the root partition, I have in the past just deleted the contents of that file so it has to look up the time and date.</p>
<p>Try ctrl-D if that doesn&#39;t work, try booting to an&nbsp;sd card, update the time, mount the hdd and copy over the timestamp ,</p>
<p class="rteindent1">sudo&nbsp;fake-hwclock</p>
<p class="rteindent1">sudo mkdir /media/hdd</p>
<p class="rteindent1">sudo mount /dev/sda2 /media/hdd</p>
<p class="rteindent1">sudo&nbsp;cp /etc/fake-hwclock.data /media/hdd/etc/fake-hwclock.data</p>
<p>Then reboot back to the hdd, it should no longer have an issue with the time difference, but there no guarantees :-)</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22795"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 31/07/2014 - 21:34.</div>
    <div class="content">
     <p>Paul, Ctrl-D worked for me, and that appears to have resolved the issue, which has taken 3 days for me to sort out! - I wish I had posted earlier!</p>
<p>Just one other question, whilst locking the file system I get a message &#39;mount: you must specify the filesystem type&#39;, is that normal?</p>
<p><strong>pi@raspberrypi ~ $ rpi-rw</strong><br />
	Filesystem is unlocked - Write access<br />
	type &#39; rpi-ro &#39; to lock<br />
	<strong>pi@raspberrypi ~ $ rpi-ro</strong><br />
	mount: you must specify the filesystem type<br />
	Filesystem is locked - Read Only access<br />
	type &#39; rpi-rw &#39; to unlock</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22798"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 31/07/2014 - 22:29.</div>
    <div class="content">
     <p>&nbsp;As you are booting to hdd&nbsp;you&#39;ll need to edit /usr/bin/rpi-rw&nbsp;and&nbsp;/usr/bin/rpi-ro&nbsp;to point to /dev/sda2&nbsp;rather than /dev/mmcblk0p2, I&#39;ve not seen it before but you shouldn&#39;t need to specify the file system.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22800"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Thu, 31/07/2014 - 22:58.</div>
    <div class="content">
     <p>Aaah, I think this error has been created because I only have the &#39;boot&#39; partition on my SD card, and don&#39;t have the other two &#39;root&#39; &amp; &#39;data&#39; partitions, and looking at the files you have highlighted, they were trying to access them on the SD card.</p>
<p>Does the <a href="https://github.com/emoncms/emoncms/blob/bufferedwrite/docs/hddsetup.md">emoncms&nbsp;guide </a>need amending to include a change, as I assume we are currently probably wrongly locking &amp; unlocking the file system on the SD card (when we should be locking/unlocking the file system on the HDD).</p>
<p>However, the flaw in this is that having changed both files to point to sda2, I still get the same result!</p>
<p>Paul</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22807"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 31/07/2014 - 23:46.</div>
    <div class="content">
     <p>Sorry, i haven&#39;t tried running a hdd&nbsp;read-only so cannot speak from experience, have you tried writing to a file to confirm if it is RO or RW, I assume it&#39;s not RO although the message isn&#39;t explicit.</p>
<p>The guide doesn&#39;t&#39; mention rpi-rw&nbsp;or rpi-ro, it should highlight the edits required if they are to be used on hdd, but it does mention switching the root partition&nbsp;to RW also.</p>
<p>Trystan may well be able to confirm from experience if rpi-rw/ro work with hdd&nbsp;image</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22814"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 01/08/2014 - 08:57.</div>
    <div class="content">
     <p>Will it help if I delete /etc/fake-hwclock.data prior to creating the image? I could do that for the next update.</p>
<p>I've experienced the rpi-rw error too, sometimes it appears to just get stuck in write mode and gives that error. I think something must have a write lock.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22815"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Fri, 01/08/2014 - 09:55.</div>
    <div class="content">
     <p>Trystan - This should only be an issue if like Paul, users alter the image. If Paul had for example, just put the image on the hdd&nbsp;and booted to it, all the partitions&nbsp;would be equally time stamped and the time updated in due course. when he created his own partitions, new times were introduced by his linux live cd but not to fake-hwclock since it wasn&#39;t the os in use.</p>
<p>Changing partition sizes and adding partitions using a second machine, after running on new image on&nbsp;hdd&nbsp;should not pose an issue either as I believe there is an &quot;ignored time difference&quot; built in so if on returning to the pi a new partition is apparently dated&nbsp;30mins&nbsp;in the future its ignored (that&#39;s&nbsp;from memory and I cannot recall if its 1hr or 1day etc)</p>
<p>I think this will crop up again, so it may well be worth pre-empting this in the image but I&#39;m unsure of the &quot;right&quot; method you could try deleting the file and/or it&#39;s contents and see what messages you get booting with a screen to determine which is better a missing or empty&nbsp;/etc/fake-hwclock.data.</p>
<p>Paul - does the rpi-ro error still occur if you remove &quot;errors=remount-ro&quot; from the /dev/sda2 line of the /etc/fstab? Just a test not a solution I&#39;m afraid. I have some distant memory of experiencing&nbsp;something like this when trying to lock the /boot partition sometime ago</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22831"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Fri, 01/08/2014 - 16:44.</div>
    <div class="content">
     <p>Paul, yes the error still exists if I remove &#39;errors=remount-ro&#39; from fstab.</p>
<p>...and rpi-ro does not prevent sda2 from being written to.</p>
<p>Is it necessary to keep sda2&nbsp;as read only, and would ro interfere with other software such as node-red or my blog site installed in sda2?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22834"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 01/08/2014 - 17:51.</div>
    <div class="content">
     <p>There&#39;s no requirement to run it in read only mode, its just for peace of mind, to be sure that the os isnt doing lots of writing to a file that might cause sd card wear. As your running other things and your using a harddrive you might need to use read-write</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22850"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 02/08/2014 - 12:13.</div>
    <div class="content">
     <p>If you want to revert to a fully RW system to re-enable caching and retain logfiles&nbsp;when rebooting etc the original files were &nbsp;retained with a .orig extension when the &quot;change to RO script&quot; was run.</p>
<p>To revert the original fstab&nbsp;will need editing to boot to the hdd and also add the extra partition(s).</p>
<p class="rteindent1">sudo nano&nbsp;/etc/fstab.orig</p>
<p>once you have made the fstab changes, to reinstate the originals (including the updated fstab), delete the rpi-ro/rw batch files and reboot, run</p>
<p class="rteindent1">sudo mv /etc/default/rcS.orig /etc/default/rcS<br />
	sudo mv /etc/fstab.orig /etc/fstab<br />
	sudo mv /etc/mtab.orig /etc/mtab<br />
	sudo rm /usr/bin/rpi-rw<br />
	sudo rm /usr/bin/rpi-ro<br />
	sudo shutdown -r now</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22851"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 02/08/2014 - 14:32.</div>
    <div class="content">
     <p>Just followed your post, and made the changes, and the&nbsp;kb_wrtn/s has understandably increased from 0.6&nbsp;kb_wrtn/s to 3.06 kb_wrtn/s.</p>
<p>&nbsp;</p>
<p>Paul</p>
<p>PS. I presume that I no longer need the temp volumes in fstab;<br />
	tmpfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /tmp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpfs&nbsp;&nbsp;&nbsp;&nbsp; nodev,nosuid,size=30M,mode=1777&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0<br />
	tmpfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tmpfs&nbsp;&nbsp;&nbsp;&nbsp; nodev,nosuid,size=30M,mode=1777&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 0</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22852"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: 'Low write load' image on HDD</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Sat, 02/08/2014 - 14:53.</div>
    <div class="content">
     <p>Correct, they were temporary locations set up in RAM at every boot-up, only needed because the main partition was RO.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5473"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-kPaiMeYML20w4uzyRZxeUTpnb27dy9vi89m87UNnsVE" value="form-kPaiMeYML20w4uzyRZxeUTpnb27dy9vi89m87UNnsVE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
