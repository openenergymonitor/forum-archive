<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/11972 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:56:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Hybrid inverter in the mix | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Hybrid inverter in the mix</h3>
        <span class="submitted">Submitted by <a href="../user/9233.html" title="View user profile.">Rhys</a> on Mon, 11/01/2016 - 15:19</span>
        <div class="content"><p>Below is a basic diagram of my solar PV and electric setup and part of my intended OEM setup.<br />
I have an InfiniSolar hybrid inverter that has a battery bank attached and solar PV panels and it has a load circuit and feed from utility power.</p>
<p>I have setup a separate new DB (about 2 meters above, in the loft/attic room, the main house DB) that is fed from the inverter&#39;s load circuit so that the attached devices (PC&#39;s, server, lights, entertainment center) would then be fed from the inverter connected battery bank during a power failure.<br />
Any excess solar energy, not fed to the load circuit, or the trickle charge for the batteries, is fed back on the utility line. Most days now, if we&#39;re not running the air-cons, the utility meter turn backwards.<br />
Apart from the CT&#39;s ,the emonTX will also have temp sensors, in my office, in my roof, one under each PV array (seeing as heat effects PV efficiency - very hot here in summer) and one outside (probably in a ventilated piece of electrical PVC conduit to raise it off the hot roof). Someday I&#39;d like to add light meters on each PV array to measure the light level the arrays are receiving.</p>
<p>My 2 DB&#39;s are reasonably close to each other, just separated vertically, so I&#39;d probably attach all the CTs within the DB&#39;s, instead of trying to extend CT3 to get closer to the inverter (very much oversized cable from the inverter to the new DB).<br />
<img alt="" src="../sites/default/files/House%20setup.jpg" style="width: 600px; height: 480px;" /><br />
CT1 will monitor the main line from the utility.<br />
CT2 will be on the cable from the utility (after the main DB earth leakage) to the inverter<br />
CT3 will be on the load cable from the inverter<br />
(I&#39;ll probably have an additional CT on my solar/electric immersion water heater line to get an idea of it&#39;s usage separately, mainly for the cooler winter months)</p>
<p>The solar PV setup documentation mentions 2 types of setup which I don&#39;t seem to fall into either, mainly because of the load circuit from my inverter.<br />
They way I see it, my solar PV generation value would be the sum of my CT3 (inverter load) <strong>MINUS</strong> CT2 (utility&lt;-&gt;inverter).<br />
If the result is lower than the reading from CT3 then the panels are producing energy.<br />
If the result is a positive number then my solar is producing less than the inverter load and if the result is a negative then the inverter is feeding the excess back on the utility line.<br />
Would I be able to setup this simple equation in emonCMS to calculate the solar generation?<br />
Is there anything wrong/incorrect about my intended setup as above?</p>
<p><em>Edit: I&#39;ve found references to &quot;virtual feeds&quot; that sound like that might do what I need. Is that correct?</em></p>
<p>Please forgive the ignorance of this question...<br />
Lets say that by chance my neighbour also installs an OEM system, would they be able to &quot;highjack&quot; my emonTX (other other transmitted devices) and prevent me from receiving my data or would they also just be able to receive my data but not effect my data collection or would my emonTX be &quot;tied&quot; to my emonBase once connected?</p>
<p>Thank you to all who read and respond to these annoying newbie questions, it helps a great deal in deciding on what kit I&#39;ll be ordering so I don&#39;t order too little or too much, especially with our shoddy exchange rate (currently about ZAR 24 to &pound;1).</p>
<p>Rhys</p>
  <div class="forum-topic-navigation clear-block">
          <a href="11998.html" class="topic-previous" title="Go to previous forum topic">‹ Emonhub and kodi media center</a>
              <a href="11554.html" class="topic-next" title="Go to next forum topic">WiFi reconnection issues. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-38235"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Hybrid inverter in the mix</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 13/01/2016 - 23:32.</div>
    <div class="content">
     <p>I&#39;m no emoncms expert, but I think it&#39;s quite simple to derive your nett&nbsp;inverter power because,&nbsp;in the input processing,&nbsp;you can do &quot;+ input&quot; or &quot;- input&quot; - that&#39;s a different input to the one you&#39;re working on. The only possible problem that I can see is whether the voltage is the same each side of the inverter - is its output voltage the same as the input voltage and exactly in phase with it? That&#39;s relevant as you must be&nbsp;measuring the voltage somewhere so that you have a measure of real power, which you need&nbsp;to determine the direction of power flow on CTs 1 &amp; 2. If CT3 uses what is essentially a different supply, you can&#39;t use a voltage measured&nbsp;on the supply side of the inverter to get real power in the load side (CT3), you can only have an estimate of apparent power.</p>
<p>If your neighbour&nbsp;installs a similar system, then he will be able to gather data from your emonTx&nbsp;as you will from his, and if both happen to transmit at exactly the same instant, it&#39;s likely that each&nbsp;will block the other and neither of you will receive your respective&nbsp;messages, so you&#39;ll both miss the odd message occasionally as the two systems drift in and out of synchronism. You&#39;ll both need to use a different &quot;nodeID&quot; for your two emonTx&#39;s, so that you know whose is whose.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38243"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9233.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9233.jpg" alt="Rhys&#039;s picture" title="Rhys&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Hybrid inverter in the mix</h3>

    <div class="submitted">Submitted by <a href="../user/9233.html" title="View user profile.">Rhys</a> on Thu, 14/01/2016 - 10:27.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>The inverter references and synchronises its load output to the utility power, when utility power is available so CT1 CT2 and CT3 all would have the same voltage and frequency.<br />
If solar is providing power (in part or full) for the load then the output is still sync&#39;d to the utility supply values as the utility feed is used as top-up if the solar is not providing enough power to fully supply the load. The provided software shows the utility voltage, which my mulitmeter agrees with on both the utility and load side of the inverter, while utility power is available.</p>
<p>When utility power is not available then the inverter runs from solar and/or battery and its AC output would then be the configured 230V and 50Hz.<br />
If the solar is producing more than the load, then batteries would not be needed and CT2 would potentially see a negative current as the excess solar energy is fed back on the utility line (I can&#39;t find any documentation that states whether the inverter will still feed to the utility line when utility power is off).<br />
I intended powering the AC-AC PSU from a power socket connected to the inverter load supply DB, thereby always being connected to a relevant AC supply.</p>
<p>One thing the &quot;CT3 minus CT2&quot; calculation would not take into account is the inverter&#39;s battery charge current when drawn from the solar, and therefore not really be a true reading of the solar generation, but I&#39;m willing to have a marginally skewed solar generation value. The float charge current is typically 0.3A (at 54V DC) when keeping the batteries on float charge but of course that would be higher if the batteries had been used (utility off) and now needed to be charged.<br />
If the batteries are being charged from utility power then that would just increase the reading on CT2.<br />
I suppose I need to try set the calculated value of CT3 minus CT2 to also be a minimum of zero as if the PV is not generating power (at night etc) then CT2 reading would be the load (CT3) plus the float/full charge current giving a negative result for the supposed PV generation.</p>
<p>I would eventually like to get the inverter data to feed into emonCMS, which would potentially provide the PV values (DC though) and load and battery charge, but I haven&#39;t started looking into the RS232 or USB data (supports both) from the inverter yet. I&#39;m currently only using the supplied GUI application (Windows) to see the inverter data. The application does support <strong>manual</strong> export of data to either PDF or Microsoft Excel formats, but not simple CSV.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38244"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Hybrid inverter in the mix</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Thu, 14/01/2016 - 10:37.</div>
    <div class="content">
     <p><em>I can&#39;t find any documentation that states whether the inverter will still feed to the utility line when utility power is off</em></p>
<p>It won&#39;t be allowed to do that. &nbsp;Grid-tied inverters have to go to great lengths to ensure they don&#39;t feed power back out to the grid when the grid has gone away, for fear of electrocuting the linesman trying to fix the grid fault. &nbsp;The inverters run anti-islanding&nbsp;algorithms so as not to be fooled into thinking the grid is still alive by all your neighbours&#39; inverters.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38245"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9233.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9233.jpg" alt="Rhys&#039;s picture" title="Rhys&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Hybrid inverter in the mix</h3>

    <div class="submitted">Submitted by <a href="../user/9233.html" title="View user profile.">Rhys</a> on Thu, 14/01/2016 - 10:49.</div>
    <div class="content">
     <p>Thanks dBC, I wasn&#39;t sure about how it would handle that but figured it would not feed back when utility power was not available.<br />
I had wondered what would happen if it did feed back and we were running an air-con and the supplied current from the inverter was not enough to correctly power the appliances, didn&#39;t have good thoughts. I know motors, air-cons, fridges etc, would not be very happy.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38247"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Hybrid inverter in the mix</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 14/01/2016 - 16:12.</div>
    <div class="content">
     <p>I don&#39;t see any serious problems with that. You will probably need to budget for a programmer, as there may well be a small phase shift between the supply side and the load side of the inverter, and if there is you&#39;ll need to adjust the phase compensation for CT1 &amp; CT2.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38248"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9233.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-9233.jpg" alt="Rhys&#039;s picture" title="Rhys&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Hybrid inverter in the mix</h3>

    <div class="submitted">Submitted by <a href="../user/9233.html" title="View user profile.">Rhys</a> on Thu, 14/01/2016 - 16:42.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>Thanks, I do actually have a programmer in my shopping cart with the rest of the kit,waiting to be ordered. Just waiting for our exchange rate to strengthen a little, it&#39;s currently about ZAR 24.50 to &pound;1</p>
<p>I can&#39;t say I know what you&#39;re talking about regarding &quot;phase shift&quot; but I guess I&#39;ll find some info in the building blocks AC sections...</p>
<p>Thanks again all, for the assistance to all my questions, I&#39;m really looking forward to getting my OEN kit. I was going to wait until June when I&#39;m possibly going to be over in the UK but I don&#39;t think I can wait that long:)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38259"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Hybrid inverter in the mix</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 14/01/2016 - 20:50.</div>
    <div class="content">
     <p><em>&quot;Phase shift&quot;</em></p>
<p>To&nbsp;calculate real power, you multiply current and voltage. If the current and the voltage are perfectly in step, you get the correct answer if you multiply the rms current as read by your meter by the rms voltage as read by your meter. If they are not exactly in step, that gives you&nbsp;the wrong answer. To get the right answer, you need to take very frequent samples of the two waves (current and voltage, many tens of times per cycle) and multiply&nbsp;each sample pair together then average the result. In the worst case, when the two waves are exactly a quarter of a cycle apart, the average works out to be zero - although there is a current and a voltage, there&#39;s no power flowing. If your voltage and current are out of step because the inverter inserts a small time shift between the input&nbsp;voltage and the output voltage (the one your emonTx is using as a reference), then it&#39;ll&nbsp;look like the current and voltage are out of step when in fact the current is in step with its own voltage but not with the inverter output&nbsp;voltage. The way the emonTx measures current and voltage also introduces a delay that looks like the current and voltage&nbsp;are out of step, and that&#39;s compensated for in the software. It&#39;s that compensation coefficient (phasecal) that you&#39;ll possibly need to tweak to include&nbsp;compensation for any delay in the inverter.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/11972"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Nzp8b6kSrOC34sP3UyFdpz0PPgNfRat0mpfI8MARTgo" value="form-Nzp8b6kSrOC34sP3UyFdpz0PPgNfRat0mpfI8MARTgo"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
