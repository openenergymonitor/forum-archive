<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10370 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:01:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Import .csv files | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Import .csv files</h3>
        <span class="submitted">Submitted by <a href="../user/7889.html" title="View user profile.">Bruno</a> on Mon, 23/03/2015 - 11:52</span>
        <div class="content"><p>Hi all! My name&#39;s Bruno and I&#39;m new around here :)</p>
<p>&nbsp;</p>
<p>I&#39;m just an electrical and electronics engineer and my programming skills are slim&nbsp;to none. I&#39;ve learned a bit of C++ in college...</p>
<p>&nbsp;</p>
<p>I&#39;m currently using a payied&nbsp;software to analyze electrical, temperature, thermal and gas data from a building. That software is pretty straightforward. I send data automatically via .csv file&nbsp;and the software create all graphs and stuff. The .csv file is sent to the software&#39;s&nbsp;FTPserver&nbsp;and is sent one file every 15 minutes but can be configured to any interval needed.</p>
<p>&nbsp;</p>
<p>Some people from my old college told me about emoncms software and that I should give it a try because it&#39;s doing all the things I&#39;m using in that software.</p>
<p>I&#39;ve being looking in the site and forum on how to import .csv file to emoncms so I could use what is already done and start testing emoncms asap. Unfortunately, I&#39;m not having&nbsp;success&nbsp;in these endeavor.</p>
<p>&nbsp;</p>
<p>I&#39;ve found one thread (<a href="3220.html" title="http://openenergymonitor.org/emon/node/3220">http://openenergymonitor.org/emon/node/3220</a>) from late 2013 and I wonder if, since there, there&#39;s some kind of new feature where I don&#39;t need to use scripts (since I have no clue what they are and how to create one...) to insert data in emoncms from .csv files.</p>
<p>If there&#39;s no way to&nbsp;directly import .csv file to emoncms, what do you advice me to do?</p>
<p>&nbsp;</p>
<p>Thank you :)</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10447.html" class="topic-previous" title="Go to previous forum topic">‹ Is emonTx able to use with high-voltage and large-current?</a>
              <a href="10405.html" class="topic-next" title="Go to next forum topic">trying to start my emontx v2 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-28936"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 23/03/2015 - 12:50.</div>
    <div class="content">
     <p>Paul (pb66) will probably come to your rescue regarding importing into emonCMS.</p>
<p>On the general question of programming, you don't need to be an expert to survive here, but the basic skills will help. There are 3 main languages we use: C++ for the sketches in the emonTx/Arduino, PHP for emonCMS, possibly Perl, and then there's the BASH script you referred to. </p>
<p>My bible for C is of course "Kernigan &amp; Ritchie" <a href="http://www.amazon.co.uk/C-Programming-Language-2nd/dp/0131103628/ref=sr_1_3?s=books&amp;ie=UTF8&amp;qid=1292502807&amp;sr=1-3" title="http://www.amazon.co.uk/C-Programming-Language-2nd/dp/0131103628/ref=sr_1_3?s=books&amp;ie=UTF8&amp;qid=1292502807&amp;sr=1-3">http://www.amazon.co.uk/C-Programming-Language-2nd/dp/0131103628/ref=sr_...</a>. This is the standard text book.  The normal place I point people at who want to move up to C++ is <a href="http://www.relisoft.com/book/index.htm" title="http://www.relisoft.com/book/index.htm">http://www.relisoft.com/book/index.htm</a>  and that assumes you know C. Because the Arduino environment normally uses a very small subset of the language, neither are the best place for a beginner to start, nor are many of the other on-line tutorials. I'd still suggest you have both of those, and maybe Bruce Eckel's "Thinking in C++" <a href="http://www.planetpdf.com/developer/article.asp?ContentID=6634" title="http://www.planetpdf.com/developer/article.asp?ContentID=6634">http://www.planetpdf.com/developer/article.asp?ContentID=6634</a> available for reference.</p>
<p>However, there is this: <a href="http://www.me.umn.edu/courses/me2011/arduino/arduinoGuide.pdf" title="http://www.me.umn.edu/courses/me2011/arduino/arduinoGuide.pdf">http://www.me.umn.edu/courses/me2011/arduino/arduinoGuide.pdf</a> which does look to be a good starting place for a beginner. It does not go as far as classes and methods that are used here, though.</p>
<p>For PHP, the on-line manual is good, though as you're probably not going to actually do much with PHP, all you need to do is skim through it so that you know just enough to recognise it.</p>
<p>For scripts, think about the old DOS batch files, BASH is (very) roughly the Linux equivalent. I admit I have to look those up as I've touched on so many that I lose track of which one I'm using, and need to check. But essentially they are a means of stringing together a sequence of commands that you could type in yourself. Most can check the result that comes back and make a decision and branch based on that. </p>
<p>Perl I don't know at all.</p>
<p>For advice is what to do: The first question is do you have any control over the source of the data? If you do, the easy and best way is to format the data at source in the way that emonCMS expects it. Otherwise, how do the csv files get sent? - it can't be manually (can it?) so you'd need to intercept the data, read the csv file and reformat the data. All you're doing here is replicating externally what you would have done internally if only you could have altered the output format. The third way, if you have your own emonCMS, is to write a 'front end' that will accept the csv files that you already have. But to do that, if Paul cannot help, you'd have a very steep learning curve for both PHP and emonCMS, and I wouldn't recommend it as the first choice. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28945"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7889.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bruno&#039;s picture" title="Bruno&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7889.html" title="View user profile.">Bruno</a> on Mon, 23/03/2015 - 14:35.</div>
    <div class="content">
     <p>Wow! Thank you for your fast reply :D</p>
<p>&nbsp;</p>
<p>I can have control over the data source. I didn&#39;t programmed it, but I can reach the one who did and ask to change things in my favor (if it doesn&#39;t implicate to many changes).</p>
<p>&nbsp;</p>
<p>The files are sent automatically through FTP (don&#39;t really know exactly how this is being doing).</p>
<p>For now I only want to use emonCMS to visualize data, use some dashboards and, if possible, generate some alerts via email. Needing this, I won&#39;t need C++ right? Only a little of PHP?</p>
<p>Never eared&nbsp;about Perl...</p>
<p>If I&#39;m not wrong, I&#39;ll need those bash files to send data to emonCMS is it?</p>
<p>&nbsp;</p>
<p>Let&#39;s wait and see if Paul see this thread and helps :)</p>
<p>&nbsp;</p>
<p>Thanks!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28954"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7889.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bruno&#039;s picture" title="Bruno&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7889.html" title="View user profile.">Bruno</a> on Mon, 23/03/2015 - 16:55.</div>
    <div class="content">
     <p>Just a quick question!</p>
<p>The data sent to the current software I&#39;m using is the cumulative data, not the energy consumed in the last 15 minutes.</p>
<p>Does emonCMS&nbsp;receive cumulative data and transform it in 15 minutes (or any other interval) consumption?</p>
<p>&nbsp;</p>
<p>Quick example of what it&#39;s being done:</p>
<p>Hour | Kitchen Electrical Energy</p>
<p>12:00 | 1354 kW</p>
<p>12:15 | 1359 kW</p>
<p>12:30 | 1370 kW</p>
<p>12:45 | 1382 kW</p>
<p>13:00 | 1389 kW</p>
<p>&nbsp;</p>
<p>Then the software process the data and returns the following energy comsumption:</p>
<p>12:00 | 0&nbsp;kW (no previous data available)</p>
<p>12:15 | 5 kWh</p>
<p>12:30 | 11 kWh</p>
<p>12:45 | 12 kWh</p>
<p>13:00 | 7 kWh</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28955"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Mon, 23/03/2015 - 17:37.</div>
    <div class="content">
     <p>Hello Bruno, yes you can do this using the bargraph visualisation tool, you can select the interval and then request the difference. There a little documentation on how to do this at the bottom of this blog post: <a href="http://openenergymonitor.blogspot.co.uk/2014/08/monitoring-solarpv-heatpump-and-house.html" title="http://openenergymonitor.blogspot.co.uk/2014/08/monitoring-solarpv-heatpump-and-house.html">http://openenergymonitor.blogspot.co.uk/2014/08/monitoring-solarpv-heatp...</a></p>
<p>in the section: &quot;Creating a daily electricity consumption graph in a dashboard using watt hour feeds (instead of the old power_to_kwhd method).&quot;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28956"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 23/03/2015 - 19:28.</div>
    <div class="content">
     <p>What I think your next move should be is to check the formats (there are several) that emonCMS accepts, and see how easy (or difficult) it will be for your programmer to give you the data in one of those formats. What happens next will depend upon the answer you get. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28960"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 23/03/2015 - 22:29.</div>
    <div class="content">
     <p>The best place to collate or format the data is usually at source if you can, However you can probably&nbsp;just run a script to rearrange&nbsp;the csv and submit to emoncms&nbsp;quite easily.</p>
<p>Currently is the csv file replaced or&nbsp;overwritten every 15mins&nbsp;or is the data appended ? Is the new csv file named differently each time or does it always have the same name?</p>
<p>Also what is the current format of the data within the csv file? can you provide a bit of raw csv?</p>
<p>There are several options but I&#39;m guessing you are not running any other OEM stuff and therefore are not using emonHub. That being the case you will probably use the emoncms&nbsp;input api directly so its probally just a case of looping through each entry converting the time to a unix timestamp adding a node id of choice and formatting the data(s) so we have a string of &quot;unixtimestamp&nbsp;nodeid val1&nbsp;val2 val3....&quot;and then post all of those strings in one hit using &quot;bulk input&quot;</p>
<p>This will give you access to all the normal processing etc including calculating power from energy or vice versa</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28961"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7780.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7780.jpg" alt="mpruessmeier&#039;s picture" title="mpruessmeier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7780.html" title="View user profile.">mpruessmeier</a> on Tue, 24/03/2015 - 08:08.</div>
    <div class="content">
     <p>On my old piece of software i was doing the same.<br />
I got Values fetched by a WAGO installation and send the data every 10 Minutes by a *.csv file to my monitoring system. Data ware dropped by ftp on the server. On the server there was a spooler process running, waiting for new packages. Inside the packages ware the description of the data. the spooler process took the new package and moved it in the right place (destination folder), so the sender could see over ftp that the package is moved and set it to recived.</p>
<p>No the spooler process starts the import process for the new package.</p>
<p>the import process reads the csv and push data to my monitoring script.<br />
At this destination i think it would be either good to process data by emonHUB or by emonCMS.</p>
<p>if you like to, i lay down the source code to github and help optimizing the import process of .csv data.<br />
I am at the same difficulty in the moment and have to do this for our old data fetchers to.</p>
<p>The processes are named ecccombie and you find it under<br />
<a href="https://github.com/mpruessmeier/eccombie" title="https://github.com/mpruessmeier/eccombie">https://github.com/mpruessmeier/eccombie</a></p>
<p>the project is dead since round a year, but now i will get it alive</p>
<p>Greetings Marc</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28962"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7780.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7780.jpg" alt="mpruessmeier&#039;s picture" title="mpruessmeier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7780.html" title="View user profile.">mpruessmeier</a> on Tue, 24/03/2015 - 08:37.</div>
    <div class="content">
     <p>Hi, Bruno.</p>
<p>I have the same things to do on myself.<br />
I have another datafetching system running on some WAGO Hardware. In my old monitoring system i am sending the data packages as csv via ftp to my server. My old process picks up the data and moves it to the right destination (importfolder) so the sender can see via ftp that the package is gone (taken) and sign it as sended.</p>
<p>the pickup process starts then the import process on the importfolder.</p>
<p>I started the process a year ago and the essence is put on github. you can find it here.<br />
<a href="https://github.com/mpruessmeier/eccombie" title="https://github.com/mpruessmeier/eccombie">https://github.com/mpruessmeier/eccombie</a></p>
<p>I changed now the README.md so it is clear what should happen.<br />
I will start on my own next days with coding, cause I am in the moment in different projects.</p>
<p>The questions to @TristanLea and @pb66 is,<br />
- whether it is better to use emonhub or emoncms to insert the data readed by the csv file<br />
- what happens, when resend the same time-value (maybe over bulk) to emoncms</p>
<p>Greetings Marc<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28965"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7889.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bruno&#039;s picture" title="Bruno&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7889.html" title="View user profile.">Bruno</a> on Tue, 24/03/2015 - 10:40.</div>
    <div class="content">
     <p>Hi guys!</p>
<p>&nbsp;</p>
<p>Thank you again for all the answers, really appreciate&nbsp;that!</p>
<p>The current .csv file is named&nbsp;after the date and hour it is created, so every 15 minutes it has a different name. The name for the 09h30&nbsp;data exported was&nbsp;24-03-2015_09-30-20.csv</p>
<p>&nbsp;</p>
<p>The .csv has 2 lines and several columns, each column&nbsp;is one different meter, with the exception of the first 2 columns. The first column is the Date and the 2nd is the Hour.&nbsp;</p>
<p>This is what my file looks like (columns are separated by |):</p>
<p>Date | Hour | Temperature | KitchenGaz | DHW | General | Kitchen | ExternalPool | Lighting</p>
<p>24-03-2015 | 09:30:00 | 11,7 | 11142,3 | 9406,7 | 1334631,8 | 337914,9 | 68146,9 | &nbsp;200092,6</p>
<p>&nbsp;</p>
<p>All data is cumulative with the exception of the temperature for obvious reasons.</p>
<p>DHW and Gaz are in&nbsp;m3. The current software then calculates the kWh of Gaz (the formula I use&nbsp;is 1m3 = 11,72 kWh).</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28971"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 24/03/2015 - 15:06.</div>
    <div class="content">
     <p>So I just knocked up a bash script to get you started. In its current form it just looks in a preset&nbsp;folder for A file ending &quot;.csv&quot; I don&#39;t know the logistics of your file so have left it there to test and decide how it can be integrated.</p>
<p>It currently assumes there will only ever be one file there and it needs to be run manually. If the file count is ever increasing some sort of &quot;last updated&quot; check will be needed.</p>
<p>It can probally be run from cron every 15mins&nbsp;but if the csv files are regularly moved or deleted it may be better to run the script more frequently with a test like above so as not to miss any files.</p>
<p>I have commented throughout so you can alter it as required.</p>
<p>There is no error checking or logging etc</p>
<p>All the values are passed to emoncms&nbsp;as floats except the date/time which is converted to a unix&nbsp;timestamp, so after the first use you will have 7 inputs in the same order&nbsp;for the node id you set.</p>
<p>Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28973"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7889.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bruno&#039;s picture" title="Bruno&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7889.html" title="View user profile.">Bruno</a> on Tue, 24/03/2015 - 16:58.</div>
    <div class="content">
     <p>I got all confused with your script LOL</p>
<p>First I read BATCH instead of BASH, so I was trying to run it as a .bat file but, of course, without good results. I must have spent an hour until I noticed I was working with a bash file :D</p>
<p>Now, for some minutes now, I was trying to run the .sh file on my Windows 7 OS. After some digging in google, I&#39;ve discovered windows don&#39;t run .sh files :P</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28985"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7780.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7780.jpg" alt="mpruessmeier&#039;s picture" title="mpruessmeier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7780.html" title="View user profile.">mpruessmeier</a> on Tue, 24/03/2015 - 23:38.</div>
    <div class="content">
     <p>Isnt it possible to run the script under Powershell.exe under WIN7?<br />
​Powershell&nbsp;should be standard under WIN7.<br />
Press Window Start Button, enter Powershell and ENTER.</p>
<p>Greetings Marc</p>
<p>PS: Paul thanks for the script, i will use it under ecccombie</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28993"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Wed, 25/03/2015 - 11:34.</div>
    <div class="content">
     <p>Bruno - I wasn&#39;t aware you were on windows, the previous undisputed mention of bash just led be to think linux. I have never done any dev work in DOS the only dev stuff I do on windows is in an arduino or python IDE so I&#39;m not sure how I will be able to help you.</p>
<p>I have not tried any, but there are apparently, ways to run bash on a windows PC (other than a linux VM) eg git for windows has an in-built bash interpreter.</p>
<p>My initial choice would of been to write it in python for use with emonHub&nbsp;but went the route of bash as I didn&#39;t expect you to have emonHub&nbsp;and possibly not python either. I am a bit tied up right now but if I get a chance before you find an alternative way,&nbsp;I will port it to Python.</p>
<p>Marc - You are welcome to use what you can from the script, I think everyone&#39;s &quot;csv&quot; will differ so it was more of an example than a solution. to answer your previous questions, My own&nbsp;preference is that all data should come via emonHub, but that is far from mandatory, some users don&#39;t even use emonHub. emonHub&nbsp;(to me) is an independent&nbsp;interface or input stage for emoncms. If I point everything at emonhub then I can manage where my data goes from one place&nbsp;(emonhub.conf) rather than individual scripts or hardware settings, plus if you want to post to multiple locations etc</p>
<p>In this instance it&#39;s less of an issue but with larger csv uploads, as long as&nbsp;the buffer size is larger than the number of csv entries you need&#39;nt worry about network connection, server load or receipt confirmation as if you send via emonHub it will manage this by sending the data in manageable &quot;bulk&quot; batches, only delete the copy in memory after receipt is acknowledged and persevere&nbsp;until all data is posted regardless of how poor the network connection is (provided the hub isn&#39;t restarted or the frame count pushed over the buffer&nbsp;size)</p>
<p>On emoncms.org and full local&nbsp;versions of emoncms any new &quot;duplicated&quot;&nbsp;data will overwrite old data as a rule, but the feed engines in the buffered-write version (and probably emonView) are append only so you cannot insert or edit anything earlier than the last entry.So <em>duplicate</em> data posted is just extra work for client, network and server but <em>shouldn&#39;t </em>cause a lasting problem ie no corrupt or duplicate data saved. I&#39;m not entirely sure myself of the impact of fresh historical data for fixed interval feeds,, timeseries&nbsp;will edit any existing datapoints of the same timestamp or&nbsp;insert new if the timestamp is unique.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29330"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7889.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bruno&#039;s picture" title="Bruno&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7889.html" title="View user profile.">Bruno</a> on Thu, 02/04/2015 - 13:39.</div>
    <div class="content">
     <p>Hi all!</p>
<p>I&#39;m not posting here but I&#39;m working on EmonCMS&nbsp;:)</p>
<p>I&#39;ve started learning Python and already made a script to upload my data to EmonCMS. So this thread could be treated as solved (hoorray!)&nbsp;</p>
<p>&nbsp;</p>
<p>Thank you all for your help :D</p>
<p>&nbsp;</p>
<p>I&#39;ll need more of it to set proper feeds and visualizations, but first I&#39;ll have a look in forum&#39;s topics to see if I find the help I need!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29375"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7780.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7780.jpg" alt="mpruessmeier&#039;s picture" title="mpruessmeier&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7780.html" title="View user profile.">mpruessmeier</a> on Fri, 03/04/2015 - 22:11.</div>
    <div class="content">
     <p>What did you change for importing data?</p>
<p>I opened a own issue, cause in standard it&#39;s not possible to import data older then 2 hours.&nbsp;</p>
<p>Look&nbsp;at&nbsp;at my open post.</p>
<p>if you reimport&nbsp;your data, don&#39;t you have any problems?</p>
<p><a href="10386.html" title="http://openenergymonitor.org/emon/node/10386">http://openenergymonitor.org/emon/node/10386</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29420"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7889.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bruno&#039;s picture" title="Bruno&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7889.html" title="View user profile.">Bruno</a> on Mon, 06/04/2015 - 08:31.</div>
    <div class="content">
     <p>I&#39;m having troubles generating feeds, so I don&#39;t know if there&#39;s a problem importing data or no.&nbsp;</p>
<p>I&#39;m generating a link like this to send data every 5 minutes -&nbsp;http://.../..../input/post.json?time=1428308951&amp;node=1&amp;csv=100,200,300</p>
<p>&nbsp;</p>
<p>I opened another thread to see if someone can help me -&nbsp;http://openenergymonitor.org/emon/node/10427</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29498"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3818.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3818.png" alt="fversteegen&#039;s picture" title="fversteegen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/3818.html" title="View user profile.">fversteegen</a> on Thu, 09/04/2015 - 12:42.</div>
    <div class="content">
     <p>Hi Bruno,</p>
<p>Care to share the script? I am looking for a script to upload 2 years of Emoncms data from an older installation to a new one running PHPtimeseries. My scripting skills are next to 0, so I need a basic script to work upon...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29514"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7889.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bruno&#039;s picture" title="Bruno&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7889.html" title="View user profile.">Bruno</a> on Thu, 09/04/2015 - 16:36.</div>
    <div class="content">
     <p>The variables names and comments are in Portuguese (sorry for that!). Google translate should be enough for you to understand the comments and variables since I didn&#39;t used any abreviations, but if you encounter some translation issue just ask here and I&#39;ll translate as soon as I see it.</p>
<p>&nbsp;</p>
<p>My next step (after makings emon fully operational with data I already have) will be to upload a bunch of historical data so I&#39;ll be interested in that script you want to make :p</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29515"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3818.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3818.png" alt="fversteegen&#039;s picture" title="fversteegen&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/3818.html" title="View user profile.">fversteegen</a> on Thu, 09/04/2015 - 17:06.</div>
    <div class="content">
     <p>Obrigado! So based on the comments in the scripts (I have a CSV with a column epoch and a column with the value) I need to:</p>
<p>- remove the epoch time conversion</p>
<p>- Change the emoncms link (and reduce the amount of variables inside the link)</p>
<p>And then I should be good to go, or am I missing something?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-29535"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7889.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Bruno&#039;s picture" title="Bruno&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Import .csv files</h3>

    <div class="submitted">Submitted by <a href="../user/7889.html" title="View user profile.">Bruno</a> on Fri, 10/04/2015 - 08:56.</div>
    <div class="content">
     <p>Yes, that should be enough. There&#39;s more &quot;garbage&quot; code there for some tests I made (some prints) that you can also remove if you don&#39;t want them.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10370"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-xsqcnllEkreKuzJyEGPaz3bUjL7SPffVybQ4VJh8aK4" value="form-xsqcnllEkreKuzJyEGPaz3bUjL7SPffVybQ4VJh8aK4"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/10370 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:01:07 GMT -->
</html>
