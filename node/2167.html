<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2167 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Resolved - Installing emonCMS on a Synology NAS | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Resolved - Installing emonCMS on a Synology NAS</h3>
        <span class="submitted">Submitted by <a href="../user/905.html" title="View user profile.">robw</a> on Wed, 27/03/2013 - 21:36</span>
        <div class="content"><p>Hi guys..</p>
<p>Iv got emonCMS&nbsp;installed fine running on my pi but getting it to display graphs is getting painful..</p>
<p>	I thought i give installing emoncms on my synology nas as it supports mysql&nbsp;and has more grunt than the pi..</p>
<p>But im having a problem getting it to work..</p>
<p>It has created the database structure fine but when ever i try to register a user it fails.. &nbsp;I get a red box under the confirm password box but it has no text or error message not even in the source html.&nbsp;</p>
<p>Anyideas as im a bit suck..</p>
<p>PS im&nbsp;not a lunix expert at all.</p>
<p>PPS im&nbsp;guessing this is a mod rewrite problem but iv not got a clue on where to look for the file to change..</p>
<p>Taken from the Pi setup guide.</p>
<p>4) Enable mod rewrite</p>
<p>$ sudo a2enmod rewrite<br />
	$ sudo nano /etc/apache2/sites-enabled/000-default</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2322.html" class="topic-previous" title="Go to previous forum topic">‹ Degrees symbol in Emoncms</a>
              <a href="2278.html" class="topic-next" title="Go to next forum topic">emoncms RaspPi image torrent ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-10686"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 27/03/2013 - 22:11.</div>
    <div class="content">
     <p>On my Wamp, there&#39;s an Apache configuration file httpd.conf, in that is a line:</p>
<p class="rteindent1">LoadModule rewrite_module modules/mod_rewrite.so</p>
<p>(A line starting with a hash character is a comment - the line may well be there but commented out).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10691"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/905.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/905.html" title="View user profile.">robw</a> on Thu, 28/03/2013 - 20:35.</div>
    <div class="content">
     <p>Robert Thanks for replying.</p>
<p>Found that line and its not commented out. so i guess is active..&nbsp;</p>
<p>	Im not sure if the NAS has two versions of Apache or Web servers running one for its admin pages and one for the users.. I cant seem to see any other by running top.</p>
<p>See below..</p>
<pre>
Mem: 497040K used, 14160K free, 0K shrd, 154136K buff, 222544K cached
CPU:  0.1% usr  0.0% sys  0.0% nic 99.8% idle  0.0% io  0.0% irq  0.0% sirq
Load average: 0.02 0.03 0.08 1/155 9932
  PID  PPID USER     STAT   VSZ %MEM %CPU COMMAND
4699  4630 admin    S     108m 21.6  0.0 /usr/syno/mysql/libexec/mysqld --basedir=/usr/syno/mysql --datadir=/volume1/@database/mysql --user=admin --max_allowed_packet=8M
9576     1 root     S    65104 12.7  0.0 /usr/syno/apache/bin/httpd -DHAVE_PHP
9581  9576 nobody   S    65104 12.7  0.0 /usr/syno/apache/bin/httpd -DHAVE_PHP
9579  9576 nobody   S    65104 12.7  0.0 /usr/syno/apache/bin/httpd -DHAVE_PHP
9580  9576 nobody   S    65104 12.7  0.0 /usr/syno/apache/bin/httpd -DHAVE_PHP 
4887     1 root     S N  33216  6.4  0.0 /usr/syno/sbin/synoindexd
4892     1 root     S N  32224  6.2  0.0 /usr/syno/bin/synomkthumbd
5433     1 root     S N  32216  6.2  0.0 /usr/syno/sbin/synomkflvd
5256  5240 root     S    25728  5.0  0.0 /usr/syno/sbin/smbd -D
9271     1 root     S    25656  5.0  0.0 /var/packages/iTunesServer/target/sbin/mt-daapd
5240     1 root     S    25600  5.0  0.0 /usr/syno/sbin/smbd -D
5027     1 root     S    19220  3.7  0.0 /usr/syno/sbin/nmbd -D
9808  5472 root     S    19156  3.7  0.0 sshd: admin [priv]
9814  9808 root     S    19156  3.7  0.0 sshd: admin@pts/0
9451     1 root     S    17112  3.3  0.0 /var/packages/DownloadStation/target/sbin/scheduler
3332     1 root     S    17092  3.3  0.0 scemd
6803  5600 root     S    14352  2.8  0.0 /usr/syno/apache/bin/httpd -DSSL -f /usr/syno/apache/conf/httpd.conf-sys
6804  5600 root     S    14352  2.8  0.0 /usr/syno/apache/bin/httpd -DSSL -f /usr/syno/apache/conf/httpd.conf-sys
9692  5600 root     S    14352  2.8  0.0 /usr/syno/apache/bin/httpd -DSSL -f /usr/syno/apache/conf/httpd.conf-sys
5261     1 root     S    14216  2.7  0.0 /usr/syno/sbin/afpd -g guest -c 256 -n NAS AFPServer -l default log_error
5600     1 root     S    14216  2.7  0.0 /usr/syno/apache/bin/httpd -DSSL -f /usr/syno/apache/conf/httpd.conf-sys
5684  5681 root     S    14068  2.7  0.0 /usr/syno/apache/bin/httpd -f /usr/syno/apache/conf/httpd-webdav.conf-sys
5685  5681 root     S    14068  2.7  0.0 /usr/syno/apache/bin/httpd -f /usr/syno/apache/conf/httpd-webdav.conf-sys
4215     1 root     S    13984  2.7  0.0 /usr/syno/sbin/snmpd -Ln -c /usr/syno/etc/snmpd.conf -p /var/run/snmpd.pid udp:161,udp6:161,tcp:161,tcp6:161
5681     1 root     S    13932  2.7  0.0 /usr/syno/apache/bin/httpd -f /usr/syno/apache/conf/httpd-webdav.conf-sys
4188     1 root     S    13408  2.6  0.0 /usr/syno/sbin/hotplugd
4877     1 root     S N  13024  2.5  0.0 /usr/syno/sbin/fileindexd</pre><p>&nbsp;Thanks again.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10692"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 28/03/2013 - 20:58.</div>
    <div class="content">
     <p>I&#39;ll have to leave it to someone more knowledgeable to help you. I doubt that there are 2 Apaches running, though. From what I&#39;ve read here about Raspberry Pi setups, emoncms is fairly particular about where it is installed. I&#39;d suggest you plod through the forums looking for similar failure modes - I think I&#39;ve seen something similar reported - and take it from there. Sorry I can&#39;t help any more.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10693"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/905.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/905.html" title="View user profile.">robw</a> on Thu, 28/03/2013 - 21:16.</div>
    <div class="content">
     <p>Robert No worries Thanks for spending the time to have a think about it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10694"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/905.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/905.html" title="View user profile.">robw</a> on Thu, 28/03/2013 - 21:59.</div>
    <div class="content">
     <p>seems the mod rewrite is not working.. Even though its uncommitted&nbsp;</p>
<p>as going to&nbsp;http://localhost/dev/admin/view i get a 404 error&nbsp;</p>
<p>&nbsp;</p>
<p>correction it is enabled..</p>
<p>Loaded Modules core mod_authn_file mod_authn_default mod_authz_host mod_authz_groupfile mod_authz_user mod_authz_default mod_auth_basic mod_include mod_filter mod_log_config mod_env mod_mime_magic mod_setenvif prefork http_core mod_mime mod_status mod_autoindex mod_asis mod_cgi mod_negotiation mod_dir mod_actions mod_userdir mod_alias mod_so mod_rewrite mod_xsendfile mod_php5 mod_deflate mod_headers</p>
<p>do i need a .htaccess file????</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10696"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 28/03/2013 - 23:05.</div>
    <div class="content">
     <p>The rewrite rules can appear either in .htaccess or in the Apache httpd.conf file. I have a .htaccess in the emoncms directory, courtesy of the emoncms installation (.htaccess is &#39;per directory and children&#39;,&nbsp; httpd.conf is processed once and is system-wide).</p>
<p>.htaccess is of course a hidden file (that&#39;s what the preceding &#39;.&#39; does). So <strong> ls -al </strong>to see it.</p>
<p>I think you can prove whether mod-rewrite is working by making a new .htaccess in a test directory (&quot;NewTestDir&quot;) and just see if it does work on a test file - e.g. make a one-liner &quot;Hello World&quot; php web page, then make a rule (check Google - what else!) to change the request from .html to .php:</p>
<p class="rteindent1">RewriteEngine On<br />
	Redirect 301 HelloWorld.html <a href="http://localhost/NewTestDir/HelloWorld.php" title="http://localhost/NewTestDir/HelloWorld.php">http://localhost/NewTestDir/HelloWorld.php</a></p>
<p>(Note the target must be the fully qualified URL)</p>
<p>Then use the browser to request HelloWorld.html.&nbsp; If you get the php page, it&#39;s working!</p>
<p>But as I wrote above, if you haven&#39;t - because of existing material on your server - got emoncms in the place it expects to be, your rewrite rules will need changing.<br />
	&nbsp;</p>
<p>[Edit]</p>
<p>Have you set up permissions properly? As I understand it, you need to change ownership of the emoncms www directory to be owned by a user &#39;pi&#39;. That might be different in your case.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10746"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/905.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="robw&#039;s picture" title="robw&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/905.html" title="View user profile.">robw</a> on Sat, 30/03/2013 - 21:34.</div>
    <div class="content">
     <p>Well after looking at this after a good nights sleep. It seems the .htaccess file was missing.. Some how not copied over or not in the zip file when downloaded.. &nbsp;<br />
	Anyway created it and all fine now..&nbsp;</p>
<p>I will say seems alot&nbsp;snappier on the NAS than on the pi.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-10749"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 30/03/2013 - 22:37.</div>
    <div class="content">
     <p>Well, I&#39;ve just installed emoncms-the-latest on Wampserver under Windows XP, and the .htaccess is there for me. So it looks as if being hidden, it didn&#39;t get copied...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11627"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Fri, 26/04/2013 - 16:58.</div>
    <div class="content">
     <p>Cool, need to do the same. Do you use pi as forwarder or nanoderf ? Would be interesting to hear of your experiences of the topic.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11682"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1747.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1747.jpg" alt="Petrik&#039;s picture" title="Petrik&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Resolved - Installing emonCMS on a Synology NAS</h3>

    <div class="submitted">Submitted by <a href="../user/1747.html" title="View user profile.">Petrik</a> on Sun, 28/04/2013 - 18:12.</div>
    <div class="content">
     <p>zEVOK - so lets try this out...</p>
<p>&nbsp;1) installed emoncms - OK</p>
<p>2) installed myphpadmin, created database emoncms - OK</p>
<p>stopped here: 3) added user emon, thats not visble on priviledges screen. when starting emoncms get an errormessage: Warning: mysqli::mysqli(): (28000/1045): Access denied for user &#39;emon&#39;@&#39;localhost&#39; (using password: YES) in /volume1/web/emoncms/index.php on line 26</p>
<p>now trying to figure out whats going on. can not see user emon, can not delete user emon .. ?</p>
<p>...continued...</p>
<p>4) edited settings.php, changed to user root and correct password</p>
<p>5) typed <a href="http://localhost/emoncms/index.php" title="http://localhost/emoncms/index.php">http://localhost/emoncms/index.php</a> and logged into emoncms using user root and correct password</p>
<p>... stopped here ...</p>
<p>Now I see a vulnerability due to storing my root password to settings.php - wow how can I overcome that ???</p>
<p>recall vaguely that there is a scipt to import input feeds from emoncms.org. need to also find that thread. having talked to Glyn I understand that need to regenerate the dashoards by hand.</p>
<p>... to be continued when have more time...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2167"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-eWYt_XkziFrXQsNzB3kYDOI3F5u1K9jqejHUHW_oQxw" value="form-eWYt_XkziFrXQsNzB3kYDOI3F5u1K9jqejHUHW_oQxw"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2167 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:38 GMT -->
</html>
