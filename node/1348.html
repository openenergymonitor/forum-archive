<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/1348 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Modification to RFM12Pi software | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Modification to RFM12Pi software</h3>
        <span class="submitted">Submitted by Guest on Fri, 16/11/2012 - 14:33</span>
        <div class="content"><p>I have just received and built a RFM12Pi and managed to connect it to emoncms etc, all appears to be working well.</p>
<p>I currently have an EmonTX, EmonBase and EmonGLCD.</p>
<p>I am now thinking to stopping using the Emonbase as the updating of emoncms can be done via the Raspberry Pi + RFM12Pi setup, however currently the Emonbase unit I have sends out the current time which the EmonGLCD displays which is something I want to keep if possible.</p>
<p>What changes do I have to make to the RFM12Pi software to allow the RFM12Pi to send the date/time out instead, unfortunately my C++ knowledge is very limited.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1623.html" class="topic-previous" title="Go to previous forum topic">‹ Unusual figures and defaulting multigraph to day</a>
              <a href="1567.html" class="topic-next" title="Go to next forum topic">History graph for the temperature ›</a>
      </div>
</div>
      </div>
    
      </div>
<div id="comments">
  <a id="comment-7355"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Mon, 19/11/2012 - 21:09.</div>
    <div class="content">
     <p>Th RFM2Pi board can send data packets, I have experimented with this in my early designs (in perl)</p>
<p>Something like this (&gt;&gt;&gt;UNTESTED&lt;&lt;&lt;&lt;) in PHP should work:</p>
<p></p>
<p>$hour = date(&#39;H&#39;);</p>
<p>$min = date(&#39;i&#39;);</p>
<p>fprintf($f,$hour.&quot;,00&quot;.$min.&quot;,00,s&quot;); &nbsp;</p>
<p>sleep(1);</p>
<p>inserted right after posting the data to emoncms</p>
<p><a href="https://github.com/emoncms/raspberrypi/blob/master/raspberrypi_run.php#L100" title="https://github.com/emoncms/raspberrypi/blob/master/raspberrypi_run.php#L100">https://github.com/emoncms/raspberrypi/blob/master/raspberrypi_run.php#L100</a></p>
<p>&nbsp;</p>
<p>[fprintf statement edited to fix a typo where I had comma instead of dot]</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7382"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Sun, 18/11/2012 - 03:05.</div>
    <div class="content">
     <p>Thanks for your reply.</p>
<p>I have updated the perl script but cant seem to see any data coming from the RFM2Pi board.</p>
<p>Are there any error logs I can check to see if the perl script is working ? or any way of checking to see what the RFM2Pi module is transmitting ?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7383"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Sun, 18/11/2012 - 08:09.</div>
    <div class="content">
     <p>EmonGLCD expects the time packet from certain NodeID. Make sure that NodeID is the same as the RFM2Pi&#39;s - you can either modify emonGLCD&#39;s code or easier - configure the RFM2Pi board to use that NodeID</p>
<p>To test the sending , you can load the RF12demo sketch on another node and watch the serial output</p>
<p><a href="https://github.com/jcw/jeelib/tree/master/examples/RF12/RF12demo" title="https://github.com/jcw/jeelib/tree/master/examples/RF12/RF12demo">https://github.com/jcw/jeelib/tree/master/examples/RF12/RF12demo</a></p>
<p>Also, you can manually send test packet from minicom by typing:</p>
<p>17,00,30,00,s</p>
<p>that should post a message telling emonGLCD that it is 17:30 now</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7391"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Sun, 18/11/2012 - 14:47.</div>
    <div class="content">
     <p>Thanks, I am getting closer.</p>
<p>If I go into minicom and enter the time manually is works, the GLCD display changes, so I know the nodeid etc is correct.</p>
<p>However it doesn&#39;t pick it up from the PHP script.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7392"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1741.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1741.jpg" alt="ukmoose&#039;s picture" title="ukmoose&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/1741.html" title="View user profile.">ukmoose</a> on Sun, 18/11/2012 - 15:49.</div>
    <div class="content">
     <p>Try&nbsp;</p>
<pre>
fprintf($f,$hour.&quot;,00<strong>,&quot;.</strong>$min.&quot;,00,s&quot;);</pre>         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7404"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Sun, 18/11/2012 - 18:41.</div>
    <div class="content">
     <p>Still doesn&#39;t work unfortunately, the frustrating thing is I have echo&#39;ed the line out and it all looks ok, it&#39;s as if it&#39;s not being transmitted ?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7405"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1741.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1741.jpg" alt="ukmoose&#039;s picture" title="ukmoose&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/1741.html" title="View user profile.">ukmoose</a> on Sun, 18/11/2012 - 19:24.</div>
    <div class="content">
     <p>Have you rebooted since using minicom? &nbsp;The first process that grabs the serial port doesn&#39;t play well with anything else that tries to use it.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7409"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Sun, 18/11/2012 - 19:55.</div>
    <div class="content">
     <p>Yes, I have rebooted a few times, but thanks for the information as I didn&#39;t know that.</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7424"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Sun, 18/11/2012 - 22:36.</div>
    <div class="content">
     <p>I have updated the raspberrypi_run.php script with the following lines</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $url = &quot;/emoncms/input/post?apikey=&quot;.$apikey.&quot;&amp;node=&quot;.$values[1].&quot;&amp;csv=&quot;.$msubs;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getcontent(&quot;localhost&quot;,80,$url);</p>
<p>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $hour = date(&#39;H&#39;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $min = date(&#39;i&#39;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fprintf($f,$hour.&#39;,00,&#39;,$min.&#39;,00,s&#39;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo $f,$hour.&#39;,00,&#39;,$min.&#39;,00,s&#39;;</p>
<p>The output from the PHP is</p>
<p>SERIAL RX: 10 3 0 122 5 44 13 113 3<br />
	3,1402,3372,881<br />
	Resource id #10<strong>22</strong>,00,<strong>28</strong>,00,sSERIAL RX: 10 2 0 117 5 44 13 113 3<br />
	2,1397,3372,881<br />
	Resource id #10<strong>22</strong>,00,<strong>29</strong>,00,sSERIAL RX: 10 1 0 126 5 44 13 113 3<br />
	1,1406,3372,881<br />
	Resource id #10<strong>22</strong>,00,<strong>29</strong>,00,sSERIAL RX: 10 0 0 120 5 44 13 113 3</p>
<p>The local time was 22:28 to a minute later which you can see above, but the thing that confuses me is the Resource id which looks to be 10.</p>
<p>I need the time sending out as though it&#39;s come from node 15, should that say resource id #15 ? and if so how do I change it ?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7432"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Sun, 18/11/2012 - 23:24.</div>
    <div class="content">
     <p>$f is the file handler, so resource id #10 is something to do with that rather than the node id,&nbsp;</p>
<p>echo &#39;$values[1],$hour.&#39;,00,&#39;,$min.&#39;,00,s&#39;; should give the node id. EDIT, or am I missing something and your using $f for the node id?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7433"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Sun, 18/11/2012 - 23:52.</div>
    <div class="content">
     <p>Hi Trystan,</p>
<p>Thanks for the info, still doesn&#39;t look right though, still says &quot;10&quot; from the following code.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $hour = date(&#39;H&#39;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $min = date(&#39;i&#39;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fprintf($f,$hour.&#39;,00,&#39;,$min.&#39;,00,s&#39;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo $values[1],$hour.&#39;,00,&#39;,$min.&#39;,00,s&#39;;</p>
<p>SERIAL RX: 10 4 0 245 2 44 13 132 3<br />
	4,757,3372,900<br />
	<strong>10</strong>23,00,44,00,s</p>
<p>SERIAL RX: 10 4 0 243 2 44 13 132 3<br />
	4,755,3372,900</p>
<p>EDIT, All I am trying to do is get the RaspberryPi to send out the current time so that the GLCD can pick it out, The GLCD is expecting the transmission to come from a nodeid of 15.</p>
<p>Currently I have an emonTX as node 10, a raspberrypi as 15 and a GLCD of 20.<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Mon, 19/11/2012 - 20:58.</div>
    <div class="content">
     <p>Managed to fix it.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $hour = date(&#39;H&#39;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $min = date(&#39;i&#39;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fprintf($f,$hour.&quot;,00,&quot;.$min.&quot;,00,s&quot;);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep(1);</p>
<p>&nbsp;</p>
<p>Inserted after line 100</p>
<p><a href="https://github.com/emoncms/raspberrypi/blob/master/raspberrypi_run.php#L100" title="https://github.com/emoncms/raspberrypi/blob/master/raspberrypi_run.php#L100">https://github.com/emoncms/raspberrypi/blob/master/raspberrypi_run.php#L100</a></p>
<p>&nbsp;</p>
<p>Is there any chance it can be incorporated into the standard version ?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7643"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Mon, 26/11/2012 - 01:40.</div>
    <div class="content">
     <p>Indeed, I think this is interesting to have by default :-) !! I would like to have a &#39;correct&#39; clock on the emonGLCD.</p>
<p>EDIT:</p>
<p>Tried to insert your code after line 100, it freezes my inputs/feeds. Inserting it before line 100 works, but funny enough only the minutes on my emonGLCD are updated. The hour remains 0. Insertion after line 100 doesn&#39;t work at all, also the inputs/feeds get frozen.</p>
<p>I also set my time zone to Europe/Brussels in the PHP ini file. Used the following command&nbsp;<strong>sudo nano&nbsp;/etc/php5/apache2/php.ini</strong></p>
<p>I attached&nbsp;a screencap from the modifications in <strong>raspberrypi_run.php</strong></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7680"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-380.jpg" alt="mharizanov&#039;s picture" title="mharizanov&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/380.html" title="View user profile.">mharizanov</a> on Mon, 26/11/2012 - 10:53.</div>
    <div class="content">
     <p>There have been quite a few revisions thereafter, it is no longer on line 100.</p>
<p>&nbsp;</p>
<p>look up this code and insert that snippet after it:</p>
<p>&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//echo $msubs.&quot;\n&quot;;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $url = &quot;/emoncms/input/post?apikey=&quot;.$apikey.&quot;&amp;node=&quot;.$values[1].&quot;&amp;csv=&quot;.$msubs;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getcontent(&quot;localhost&quot;,80,$url);</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7683"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Mon, 26/11/2012 - 11:21.</div>
    <div class="content">
     <p>At this moment this is after line 134. <a href="https://github.com/emoncms/raspberrypi/blob/master/raspberrypi_run.php#L134" title="https://github.com/emoncms/raspberrypi/blob/master/raspberrypi_run.php#L134">https://github.com/emoncms/raspberrypi/blob/master/raspberrypi_run.php#L134</a></p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7763"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Wed, 28/11/2012 - 09:24.</div>
    <div class="content">
     <p>In my case, it works for only the minutes. Hours won&#39;t get updated, they stay 0 at all hours.</p>
<p>	What also is weird is that the emonCMS server freezes/locks up after +- 2 hours. Rebooting the Pi solves the problem. I removed the &quot;time updater&quot; from the PHP file and now my Pi logs without any problem. So I guess this still isn&#39;t a 100% working solution?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7814"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gb095666&#039;s picture" title="gb095666&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by gb095666 (not verified) on Thu, 29/11/2012 - 18:38.</div>
    <div class="content">
     <p>I think I am close to solving this, just one more bug to get through and then I will have all the piece&#39;s I think.</p>
<p>The only problem I have now is after roughly 20 mins the RaspberryPi seems to start transmitting under a different BaseID</p>
<p>I have a spare NanodeRF which I have basically set it up to monitor what transmission come from which node, when I boot the RaspberryPi it starts sending time information from a BaseID of 15 which is correct, but after 20 mins it changes to transmitting from BaseID 14 ?</p>
<p>I have checked the SQL database and it&#39;s OK in there.</p>
<p>Any idea&#39;s why the baseID is changing ?</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7822"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1958.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1958.png" alt="fluppie007&#039;s picture" title="fluppie007&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/1958.html" title="View user profile.">fluppie007</a> on Thu, 29/11/2012 - 21:53.</div>
    <div class="content">
     <p>Don&#39;t have a clue but could it help (just for debugging) to set your RFM2Pi board to node ID 14? Cool that you&#39;re looking after it :-)!!</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7983"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="TheBluProject&#039;s picture" title="TheBluProject&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by TheBluProject (not verified) on Wed, 05/12/2012 - 21:25.</div>
    <div class="content">
     <p>Same here, I&#39;m afraid, It updates my minutes, but the hour is 0 ... Haven&#39;t tested long enough to tell if it locks out my feeds / inputs. I&#39;m using the ready-made rasbian with emoncms built by tristan, maybe there are some variable name differences or something ?&nbsp;</p>
<p>When I&#39;m trying to do the manual minicom&nbsp; time instertion it throws some random chars @ me, even with the crontab entry commented out and process killed. When I&#39;m inserting the RasPI&nbsp;shield it should spit out the command list, but it gives u partial content mixed with random characters. Reception from both EmonTX and EmonGLCD is fine, tho .. Any ideas ??</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<a id="comment-7985"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1741.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1741.jpg" alt="ukmoose&#039;s picture" title="ukmoose&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Modification to RFM12Pi software</h3>

    <div class="submitted">Submitted by <a href="../user/1741.html" title="View user profile.">ukmoose</a> on Fri, 07/12/2012 - 20:59.</div>
    <div class="content">
     <p>The code to send the time to emonglcd has moved on since this topic was active ( a week ago!)</p>
<p>In order to get the RFM12PI board transmitting time data to your emonGLCD and requires a firmware update to the&nbsp;</p>
<p>software running on the&nbsp;RFM12PI board.</p>
<p>Please look at and follow the instructions at:</p>
<p><a href="1506.html" title="http://openenergymonitor.org/emon/node/1506">http://openenergymonitor.org/emon/node/1506</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; </div>
  </div>
<form action="https://openenergymonitor.org/emon/node/1348"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-RGFmncfjHjH2Jequac57BdYLLeQoNjOOw01cVdrDfMM" value="form-RGFmncfjHjH2Jequac57BdYLLeQoNjOOw01cVdrDfMM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/1348 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:53:23 GMT -->
</html>
