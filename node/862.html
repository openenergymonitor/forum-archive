<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/862 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:05:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Emoncms on IIS problem | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Emoncms on IIS problem</h3>
        <span class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Wed, 18/07/2012 - 16:59</span>
        <div class="content"><p>Hi,</p>
<p>I am trying to install emoncms on my WHS 2011. After a lot of trying around I have come to a point where the database is created in MySql, Emoncms has created the tables after connecting to 'localhost\emoncms'.</p>
<p>But now i have a problem to register (and login with) a new user. After putting in email and password and pressing 'register' or 'login', the answer is an Error 404.0 page. The error description says that the 'physical path' 'C:\Program files\Windows Server\Bin\WebApps\Site\emoncms\user\create' does not exist. And this is true, as under '\emoncms\' there is no folder 'user'.</p>
<p>Everything works on my (Win XP with Xampp) test system.</p>
<p>Can anybody give me a hint?</p>
<p>BR, J&ouml;rg. &nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="894.html" class="topic-previous" title="Go to previous forum topic">‹ EmonBase capacity with multiple TXs</a>
              <a href="747.html" class="topic-next" title="Go to next forum topic">Mystic: Different readings in different rooms ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-5270"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms on IIS problem</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 19/07/2012 - 11:05.</div>
    <div class="content">
     <p>Hello Jorg,&nbsp;A yes, you need to enable mod_rewrite as described on the bottom of this page:&nbsp;<a href="../emoncms/installation.html">http://openenergymonitor.org/emon/emoncms/installation</a>.</p>
<p>Im not sure exactly how to do this on windows but it should be straightforward to do as its often used by applications like drupal and others.</p>
<p>It might be worth you installing the new version of emoncms now as its much better and we just merged the dev branch into the master last night.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5271"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms on IIS problem</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Thu, 19/07/2012 - 21:23.</div>
    <div class="content">
     <p>Thanks a lot Trystan, I overlooked that.</p>
<p>It is sometimes not so easy to 'translate' installation guides from Linux (Apache, ....) to Windows (IIS, ...)&nbsp; :-(</p>
<p>And then I am only an 'embedded' developer with not more than just very little insight into all this Web, PHP, MySql stuff.</p>
<p>I will try this evening when I am home again. Next thing will be to connect a Jeelink to the server and see how to send data from there to the database. I have a temperature/humidity Jeenode running and hope that my Emontx will arrive soon :-)</p>
<p>BR, J&ouml;rg.</p>
<p>&nbsp;</p>
<p>edit: installed 'URL Rewrite 2.0' for IIS. But now I'm completely lost, because I have to define a redirection rule somehow. No idea what this means. For me the main problem is to understand what I really want to achieve !?!</p>
<p>If I type the user name and password into the form and press 'Login' or 'Register', what should happen next? Where is this user and password evaluated? I have no idea.......</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5280"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms on IIS problem</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 19/07/2012 - 22:28.</div>
    <div class="content">
     <p>Hello Jorg, ah yes, the purpose of mod_rewrite is to convert</p>
<pre>
emoncms/user/login </pre><p>to:</p>
<pre>
emoncms/index.php?q=user/login</pre><p>index.php then fetches the property q with <em>$_GET['q'] </em>and builds the page accordingly. Emoncms follows the Model-View-Controller architecture - Im working on better documenting exactly how emoncms works, there is a start on it here:&nbsp;</p>
<p><a href="312.html">http://openenergymonitor.org/emon/node/312</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5284"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms on IIS problem</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Fri, 20/07/2012 - 07:45.</div>
    <div class="content">
     <p>Wow, that is easy to understand (even for me <img alt="" src="../sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/regular_smile.html" />)! Thanks again for your fast response. And I am far away from blaming your documentation, I understand that most users will run this on Linux and it also worked for me on Win XP with XAMPP more or less out of the box. But I have this WHS running since some years now and don't want to change to Linux there (this is also my TV server and I already had to fight hard to push the WAF to an acceptable level).</p>
<p>Ok, next try this evening. Should be possible to do in this 'URL Rewrite'.</p>
<p>BR, J&ouml;rg.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5287"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms on IIS problem</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Fri, 20/07/2012 - 11:09.</div>
    <div class="content">
     <p>Great, good to hear its understandable.</p>
<p>I should proably add that the mod_rewrite settings are usually contained in the .htaccess file that is one of the files in the root directory of the emoncms install. Will your server be able to make sure of that file and therfore save you having to construct the rewrite rule manually?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5289"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms on IIS problem</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Fri, 20/07/2012 - 12:00.</div>
    <div class="content">
     <p>Trystan,</p>
<p>I feel like a pig looking into a clockwork....</p>
<p>&nbsp;</p>
<p>If the rewrite rules are there already (in the .htaccess file), then it should have recognized them. But as far as I can see, these rewrite rules are in Apache syntax !?</p>
<p>I understood that 'Apache' rules can be imported in URL Rewrite and transformed into IIS rules, but have to try this evening (or weekend).</p>
<p>Will come back with results. J&ouml;rg.</p>
<p>&nbsp;</p>
<p>PS (OT): Emontx arrived yesterday <img src="../sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/regular_smile.html" alt="" />, built and put into operation with three CTs, calibrated with 300W halogen flood ligth (resistive load). Data received with a Jeelink, everything working so far<img src="../sites/all/modules/fckeditor/fckeditor/editor/images/smiley/msn/regular_smile.html" alt="" />. But now I realize that the existing scripts are not really suitable for real power three-phase monitoring !?! I will try to do something with only the one existing voltage input&nbsp; and use fixed 120&deg; and 240&deg; phaseshifted voltage sample table for calculation of L2 and L3. This should be 'good enough' and within some percent error. Hopefully the weekend will be long enough ....</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-5412"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1332.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1332.jpg" alt="JBecker&#039;s picture" title="JBecker&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Emoncms on IIS problem</h3>

    <div class="submitted">Submitted by <a href="../user/1332.html" title="View user profile.">JBecker</a> on Fri, 27/07/2012 - 11:31.</div>
    <div class="content">
     <p>Sorry for bothering you again, but I still have not much progress here.</p>
<p>Now that I have 'implemented' some rewrite rules in the web.config of IIS following examples how to translate Apache into IIS syntax, I get a wrong substituion:</p>
<p>When the web browser 'URL line' (how is this called correctly?) shows:</p>
<pre>
localhost/emoncms3/user/login </pre><p>then the webserver gives a message that the requested URL is :</p>
<pre>
http;//localhost:80/index.php?q=emoncms3/user/login</pre><p>Seems that the parsing of the original URl does not work correctly. I do have absolutely no experience with the regular expressions used there nor with the whole syntax of these rules, so I have no clue how to solve that.</p>
<p>Is the problem somewhere in here?:</p>
<p>&nbsp; &lt;rule name=&quot;Imported Rule 2&quot; stopProcessing=&quot;true&quot;&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match url=&quot;^(.*)$&quot; ignoreCase=&quot;false&quot; /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;conditions&gt;<br />
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsFile&quot; ignoreCase=&quot;false&quot; negate=&quot;true&quot; /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsDirectory&quot; ignoreCase=&quot;false&quot; negate=&quot;true&quot; /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add input=&quot;{URL}&quot; pattern=&quot;^/favicon.ico$&quot; ignoreCase=&quot;false&quot; negate=&quot;true&quot; /&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/conditions&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;index.php?q={R:1}&quot; appendQueryString=&quot;true&quot; /&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/rule&gt;</p>
<p>Trystan, I know that you have other things to do and I really do not want to keep you busy with my very personal problems. Is there nobody else who wants to use emoncms on a windows home server and IIS and can help me?</p>
<p>BR, J&ouml;rg.</p>
<p>PS: my three-phase measuring setup with one voltage sensor and three CTs is now running near perfect (using the somwhat rewritten interrupt code of user Pcunha). So now I really want to have these data stored and presented. What emoncms does with presenting these data is absolutely fantastic. If I cannot get this to run on IIS then I will have another try on my RasPi (if and when it arrives hopefully the next days).&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/862"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-zE4rUmJ5QhNIRIo5uGYXcuY-qfVvOx-QMoZnQhsFObM" value="form-zE4rUmJ5QhNIRIo5uGYXcuY-qfVvOx-QMoZnQhsFObM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/862 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:05:09 GMT -->
</html>
