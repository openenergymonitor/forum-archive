<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12041 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:56:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Really struggling with just one feed configuration | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Really struggling with just one feed configuration</h3>
        <span class="submitted">Submitted by <a href="../user/8666.html" title="View user profile.">Cyberslow</a> on Wed, 20/01/2016 - 10:12</span>
        <div class="content"><p>Hi all,</p>
<p>I have a number of feeds configured to do a number of really cool things but my nemesis&nbsp;is :-</p>
<p>I want to configure a feed, based on a pulse input as follows :-</p>
<p>Each pulse is 0.11kWh (Gas equivalent)</p>
<p>I want to get a daily total gas consumption in kWh feed from this input.</p>
<p>Simples....NOT (for me at least)</p>
<p>My motivation is that I&nbsp;primarily use gas for heating water, I have PV and an energy diverter. &nbsp;I can easily get daily totals of diverted electrical energy and want to end up with a stacked bargraph showing total energy used for water heating and the split between diverted PV and bought in gas.</p>
<p>There is no point posting the numerous options i&#39;ve tried, as I&nbsp;have now tied myself in knots</p>
<p>Any help appreciated</p>
<p>Keith</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12061.html" class="topic-previous" title="Go to previous forum topic">‹ PHPFina.php: &quot;WARN Posting too fast?&quot;</a>
              <a href="12053.html" class="topic-next" title="Go to next forum topic">Trouble getting started ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-38578"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Really struggling with just one feed configuration</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 21/01/2016 - 11:36.</div>
    <div class="content">
     <p>What version emoncms? emoncms.org or local? Inputs page or nodes nodes module?&nbsp;</p>
<p>Or more specifically what processes do you have at your disposal?&nbsp;</p>
<p>Is the incoming data an accumulating total pulse count? or is it the number of pulses since last update? is the input data received regularly or sporadically ?&nbsp;&nbsp;</p>
<p>To &quot;scale&quot; the pulse count to kWh you will probally need to multiply by 9.09 (1/0.11kWh) at some&nbsp;point, unless using a processor that requires a W input rather than KW so the &quot;kilo&quot; scaling should be factored in to.&nbsp;</p>
<p>Many of the processes used for pulse counting do not seem to be available on emoncms.org or in nodes module so your options may be limited unless using the inputs page of a local install.&nbsp;</p>
<p>Do you have kWh&nbsp;to kWh/d ? if not you may need to just use an accumulating total and a bar graph as that is the current trend, as used in &quot;MyElectric&quot;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38579"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8666.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Cyberslow&#039;s picture" title="Cyberslow&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Really struggling with just one feed configuration</h3>

    <div class="submitted">Submitted by <a href="../user/8666.html" title="View user profile.">Cyberslow</a> on Thu, 21/01/2016 - 12:57.</div>
    <div class="content">
     <p>Thanks for the reply</p>
<p>emoncms.org is where I&nbsp;am trying to achieve the result but I&nbsp;do have an emonpi gathering data from various sources before those inputs are sent to emoncms.org where i doo all my input and feed processing</p>
<p>I have an accumulating pulse count regularly transmitted from the emonpi to emoncms.org</p>
<p>Any guidance appreciated</p>
<p>Keith</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38580"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Really struggling with just one feed configuration</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 21/01/2016 - 13:48.</div>
    <div class="content">
     <p>The easiest way is probably to just multiply the input by 110 to get a Wh value (0.11kWh = 110Wh). You can do this in the input processing or in emonhub.conf.</p>
<p>Currently emonhub sends &quot;number of pulses&quot; with a &quot;scale&quot; of 1 and a &quot;Unit&quot; of p for pulse. By setting a scale of 110 and a unit of Wh it changes the pulse count to a Wh total system wide.</p>
<p>If you wish to stick to the &quot;stock&quot; emonhub.conf settings for your device to avoid any confusion when G&amp;T do updates on the emonPi image then you can just add the scaling in at emoncms.org as the first process. Personally I would recommend the first (in emonhub) way&nbsp;as that is how emonhub is designed to be used,&nbsp;but that seems to go against the current flow, the choice is yours.</p>
<p>Once in emoncms and scaled to Wh, you can use the Wh accumulator if the pulse count is subject to rollover or resets. That process is designed to record only the increase of the last post and add it to the current value. Like a ratchet effect, if your device resets and starts from zero again, this process will continue logging a total based on the pre-reset value rather than dropping.</p>
<p>If your &quot;pulse count&quot; is never reset, i.e. a numerical count is passed from a meter or inverter, rather than counting led flashes, etc then you can just log directly to a feed.</p>
<p>Then, for the daily totals, you can use a kWh to kWh/d process or, using the barcharts&nbsp;as per &quot;myelectric&quot;, just keep an eye on &quot;kilo&quot; scaling. You may need to scale by x1000&nbsp;or x0.001 depending on which method(s) you use.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38582"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8666.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Cyberslow&#039;s picture" title="Cyberslow&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Really struggling with just one feed configuration</h3>

    <div class="submitted">Submitted by <a href="../user/8666.html" title="View user profile.">Cyberslow</a> on Thu, 21/01/2016 - 14:09.</div>
    <div class="content">
     <p>Thanks Paul, will try again this evening</p>
<p>Keith</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38588"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Really struggling with just one feed configuration</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Thu, 21/01/2016 - 15:05.</div>
    <div class="content">
     <p>I have a std gas meter reading in cubic feet with a rj11 port connected to an emontx3.2 via a small circuit to stop bounce etc. I then use the&nbsp;following to get KW&nbsp;and KW/daily. accumulatex0.01X2.83X1.02264x39.3x0.2777777log-kwhKWd</p>
<p>So 1 pulse is 1 cubic ft x0.01 converts to 100cf&nbsp;x2.83 converts to m3 x1.02264 is a volume correction factor used by gas co&#39;s x39.3 is calorific value x0.2777777 converts to KW</p>
<p>Some new meters read in m3 so the calcs are easy. It should say on your meter what it reads.</p>
<p>I think that the emontx3.4 has a pulse count input built in which MAY&nbsp;use a software debounce. This wasn&#39;t written when I did mine.</p>
<p>Please note that there are possible safety issue when doing this and your gas supplier might get funny!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38603"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8666.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Cyberslow&#039;s picture" title="Cyberslow&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Really struggling with just one feed configuration</h3>

    <div class="submitted">Submitted by <a href="../user/8666.html" title="View user profile.">Cyberslow</a> on Thu, 21/01/2016 - 20:31.</div>
    <div class="content">
     <p>Thanks both, recommendations taken on board, we&#39;ll see what happens overnight</p>
<p>&nbsp;</p>
<p>Keith</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38607"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5606.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="webby&#039;s picture" title="webby&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Really struggling with just one feed configuration</h3>

    <div class="submitted">Submitted by <a href="../user/5606.html" title="View user profile.">webby</a> on Thu, 21/01/2016 - 23:26.</div>
    <div class="content">
     <p>Just to note. If you are reading pulses using a reed switch. Some kind of debounce will be needed. I seem to remember the hardware one which I built was recommended to be most reliable.</p>
<p>If you are reading a flashing led then no problem.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-38614"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8666.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Cyberslow&#039;s picture" title="Cyberslow&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Really struggling with just one feed configuration</h3>

    <div class="submitted">Submitted by <a href="../user/8666.html" title="View user profile.">Cyberslow</a> on Fri, 22/01/2016 - 08:51.</div>
    <div class="content">
     <p>Thanks Webby</p>
<p>I suspect the pulse input on the EMONPi&nbsp;incorporates something similar&nbsp;as i do not heave a bounce issue</p>
<p>Keith</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12041"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Y4jLDApDQPA_XAbrG5NilgBpqAr_TL_MJDft_VpuaOM" value="form-Y4jLDApDQPA_XAbrG5NilgBpqAr_TL_MJDft_VpuaOM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/12041 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:56:05 GMT -->
</html>
