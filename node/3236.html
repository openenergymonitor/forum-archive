<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3236 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:07:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>EmonTX: Understanding inputs and outputs | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">EmonTX: Understanding inputs and outputs</h3>
        <span class="submitted">Submitted by Guest on Thu, 28/11/2013 - 09:12</span>
        <div class="content"><p>I have the following config:</p>
<p>- emonTx V2</p>
<p>- Raspberry Pi&nbsp;</p>
<p>- ready-to-go SD card image as OS</p>
<p>- clip-on current sensor CT</p>
<p>-&nbsp;AC-AC Power Supply Adapter - AC voltage sensor</p>
<p>-&nbsp;emonTx_CT123_Voltage&nbsp;firmware</p>
<p>---&nbsp;emonTx_CT123_Voltage.ino</p>
<p>---&nbsp;emontx_lib.ino</p>
<p>&nbsp;</p>
<p>After playing with code and sacrificing several virgins to EmonTx&nbsp;gods it finally works!</p>
<p>Now I try to understand, what exactly works and why it works like this...</p>
<p>I have the following data in the log and try to interpret it.</p>
<p><a href="../../../petrenko.com.ua/images/forums/output-log.jpg"><img alt="" height="78px" src="../../../petrenko.com.ua/images/forums/output-log.jpg" width="700" /></a></p>
<p>&nbsp;</p>
<p>10 - ID of node</p>
<p>18 - Watts used by CT1</p>
<p>0 - Watts used by CT2</p>
<p>17 - Watts used by CT3</p>
<p>(am I right?)</p>
<p>23931- Volts x 100</p>
<p>Looks logical and clear except that there is no power sensors installed and all&nbsp;CT1 - CT3&nbsp;readings should be zero. To make it worse - CT1 and CT3 constantly changing.</p>
<p>&nbsp;</p>
<p>OK, assume that device is not calibrated, but when I connect some (heavy, 200W) load to one of the inputs both 18 and 17 change to something like 22 or 27.. Or 9 and 18. No trend.</p>
<p>Additionally, the numbers constantly change, even without load.</p>
<p>So, what could be the problem here?</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3154.html" class="topic-previous" title="Go to previous forum topic">‹ Dual Solar PV Diverter - With Completed Write-up</a>
              <a href="3230.html" class="topic-next" title="Go to next forum topic">Noob question about current sensing build ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-16475"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX: Understanding inputs and outputs</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 28/11/2013 - 11:26.</div>
    <div class="content">
     <p>The easiest place to pick up the numbers is via the serial monitor of the Arduino IDE when you have the programming lead plugged in to your emonTx. If you look at the sketch you&#39;re running on it, you should see two sections that you are interested in. The first is a data structure that tells you the variables sent to you RPi and the order in which they are sent. It should be something like:</p>
<p class="rteindent1">typedef struct { int power1, power2, power3, Vrms; } PayloadTX;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // neat way of packaging data for RF comms<br />
	PayloadTX emontx;</p>
<p>The second is a series of &quot;Serial.print(.....)&quot; statements that send the data to the serial monitor.</p>
<p>Coming to the numbers varying, 200 W is not a heavy load. Your c.t is rated at 100 A which is roughly 24 kW, so 200 W is only 0.8% of full scale. The ADC is only 10 bits (and one of those is effectively a sign bit), and we expect&nbsp; a few tens of &quot;watts&quot; of noise from the digital circuits in the processor. Here is some reading:</p>
<p><a href="https://learn.openenergymonitor.org/?redirect=measurement-implications-of-adc-resolution-at-low-current-values" title="http://openenergymonitor.org/emon/buildingblocks/measurement-implications-of-adc-resolution-at-low-current-values">http://openenergymonitor.org/emon/buildingblocks/measurement-implication...</a><br />
	<a href="../emontx/accuracy.html" title="http://openenergymonitor.org/emon/emontx/accuracy">http://openenergymonitor.org/emon/emontx/accuracy</a><br />
	<a href="1385.html" title="http://openenergymonitor.org/emon/node/1385">http://openenergymonitor.org/emon/node/1385</a><br />
	<a href="2311.html" title="http://openenergymonitor.org/emon/node/2311">http://openenergymonitor.org/emon/node/2311</a><br />
	Trystan did some wonderful animated pages demonstrating how the errors vary here:&nbsp; <a href="http://vis.openenergymonitor.org/dev/adc/noiseless" title="http://vis.openenergymonitor.org/dev/adc/noiseless">http://vis.openenergymonitor.org/dev/adc/noiseless</a>, here: <a href="http://vis.openenergymonitor.org/dev/adc/noisy" title="http://vis.openenergymonitor.org/dev/adc/noisy">http://vis.openenergymonitor.org/dev/adc/noisy</a> and here: <a href="http://vis.openenergymonitor.org/dev/adc/noise.mp4" title="http://vis.openenergymonitor.org/dev/adc/noise.mp4">http://vis.openenergymonitor.org/dev/adc/noise.mp4</a>.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16479"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="wbuilder&#039;s picture" title="wbuilder&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX: Understanding inputs and outputs</h3>

    <div class="submitted">Submitted by wbuilder (not verified) on Thu, 28/11/2013 - 14:01.</div>
    <div class="content">
     <p>Thanks a lot. Pretty explanatory. (only &quot;wonderful animated pages&quot; produce 404)</p>
<p>&nbsp;</p>
<p>Then, if we take that we have 512 (2^9) steps of 24kW, then 200W will take at least 4 of these steps...</p>
<p>&nbsp;</p>
<p>And &nbsp;how can I diagnose why there is no change in readings when I connect clamp to some ports?</p>
<p>And these are W, which are sent from EmonTX or some &quot;Steps&quot; of this 512/1024 scale?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16481"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX: Understanding inputs and outputs</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 28/11/2013 - 14:35.</div>
    <div class="content">
     <p><em>&quot;Then, if we take that we have 512 (2^9) steps of 24kW, then 200W will take at least 4 of these steps...&quot;</em></p>
<p>I think you are saying you can draw out the top half of the current wave as a set of 2-bit numbers. You should certainly see a 200 W load, but you cannot expect to measure it with any great accuracy. If you can&#39;t see a current, it is usually one of two things: you haven&#39;t pushed the plug on the c.t. fully home, or you&#39;ve clipped the c.t. around both line and neutral.</p>
<p>Provided you have calibrated the emonTx, the numbers should be Watts for real power and 1/100 V for the voltage. You can always work through the sketch to verify that. If you have not calibrated it, the numbers will only be close.</p>
<p>(I get 404 for those diagrams too now - I&#39;ll ask Trystan what he&#39;s done with them.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16486"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="wbuilder&#039;s picture" title="wbuilder&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX: Understanding inputs and outputs</h3>

    <div class="submitted">Submitted by wbuilder (not verified) on Thu, 28/11/2013 - 15:52.</div>
    <div class="content">
     <p><em>you&#39;ve clipped the c.t. around both line and neutral</em></p>
<p>&nbsp;</p>
<p>Sure, I did it! It is so logical, taking into account diameter of the clamp :) I think that it should be written in large red letters for those, like me, who think that electricity is sold in barrels on farmers&#39; markets :)</p>
<p>&nbsp;</p>
<p>I fixed this and now my readings are much closer to the reality.</p>
<p>&nbsp;</p>
<p>Thanks a lot, you made my day! :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16489"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: EmonTX: Understanding inputs and outputs</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 28/11/2013 - 16:35.</div>
    <div class="content">
     <p>&quot;<em>It is so logical,...&quot;</em></p>
<p>Not when you consider that the c.t. usually needs to go around a meter tail! Our USA constructors can&#39;t even use our standard 100 A c.t. because at half our voltage, they need twice the current for the same power, hence their cables are even thicker.</p>
<p><em>&quot;I think that it should be written in large red letters for those, like me, who think that electricity is sold in barrels on farmers&#39; markets :)&quot;</em></p>
<p>I shall send the Marcolins to get you for heresy like that!&nbsp; Actually, it is spelled out quite clearly in a few places - like the installation notes...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3236"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-DkuKpgspWfPgWsyajQ_Ao0TFA84WK9f9K-1Y1zXVsn4" value="form-DkuKpgspWfPgWsyajQ_Ao0TFA84WK9f9K-1Y1zXVsn4"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
