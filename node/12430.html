<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/12430 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:47:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Feed Type Documentation | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Feed Type Documentation</h3>
        <span class="submitted">Submitted by <a href="../user/9711.html" title="View user profile.">simonog</a> on Wed, 30/03/2016 - 18:20</span>
        <div class="content"><p>Please can someone point me to a description of exactly what each feed type does?</p>
<p>I have tried google, site search and various other routes to no avail.</p>
<p>For those of you around from the beginning, I suspect that the names are enough to tell you conceptually what the feed does. &nbsp;As a very new user, it&#39;s more of a challenge.</p>
<p>I have wired my gas meter to my emonPI and the pulse field increments nicely. &nbsp;I am aware, however, that the value will reset to zero any time the emonPI is reset.</p>
<p>Having logged the feed, I tried a feed process of Accumulate. &nbsp;Not only is it not updated when the pulse count updates, it instead updates by some large number periodically. &nbsp;This showed me that I do not understand how the feed processes actually work ie what each takes in and then outputs.</p>
<p>Hence the plea for a pointer to documentation.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12443.html" class="topic-previous" title="Go to previous forum topic">‹ EmonCMS IoT Dashboard without OpenEnergyMonitor hardware</a>
              <a href="12431.html" class="topic-next" title="Go to next forum topic">Scaling of visualizations? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-40746"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feed Type Documentation</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 30/03/2016 - 23:42.</div>
    <div class="content">
     <p>Hello Simon, we will soon have better documentation for this.</p>
<p>The input process you want for this is the wh_accumulator that will remove the resets continuing on from the point prior to the reset. I would then recommend using the PHPFina feed engine. What are you measuring with the pulse count? is it one pulse per watt hour? or something different?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40751"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9711.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="simonog&#039;s picture" title="simonog&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feed Type Documentation</h3>

    <div class="submitted">Submitted by <a href="../user/9711.html" title="View user profile.">simonog</a> on Thu, 31/03/2016 - 01:44.</div>
    <div class="content">
     <p>Thank you. &nbsp;Very happy to help by reading a beta version and suggesting where a beginner would benefit from more clarity (as I am!). &nbsp;Just let me know. &nbsp;I&#39;d offer a quick turnaround :)</p>
<p>meter reads 1 pulse per cubic metre of gas consumed. &nbsp;The kWh value varies with gas composition so I wanted to track the meter&#39;s readings for ease of bill checking etc. &nbsp;Trying Wh does seem to be adding just 1 each time though the units are of course not Wh. &nbsp;What does Accumulate do please - what is it adding?</p>
<p>it&#39;s&nbsp;a brand new meter, and has a relay which pulses closed as it goes through zero in the LSD. &nbsp;I am getting a few (3 per hour approx) random pulses when no gas is being drawn so tomorrow will switch the 10k pull-up resistor to a pull down one.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40754"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feed Type Documentation</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 31/03/2016 - 07:05.</div>
    <div class="content">
     <p>Thanks, Yes the accumulator just adds the input value to a cumulative total, If the input value is 10 and the present total is 100, the result will be 110.</p>
<p>The wh_accumulator takes an input that is already accumulating such as the pulse count on the emonpi and then gets the difference between the present value and the last and then adds that difference to the total. If the difference between the present value and the last value is negative which would indicate a reset it ignores that update.</p>
<p>It also has a check that is designed to allow the input data to have a very breif reset to zero and then for the pulse count to jump back up again such as if there is a temporary blip in the monitoring equipment. It limits the maximum equivalent power that it can accumulate to 23kW if the pulse rate is 1 Wh per pulse. Im not completely happy with this part. It can avoid jumps in the data but is only applicable to an input in watt hours and a power limit of 23kW which may well vary from system to system. For your gas pulse, it sounds like the pulse rate will be significantly below this threshold for it to not to engage this part.</p>
<p>You could log the pulse count to a feed in parallel so that you can double check to see that the wh_accumulator is behaving. At least then you can rebuild from the raw data if something goes wrong.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40755"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9711.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="simonog&#039;s picture" title="simonog&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feed Type Documentation</h3>

    <div class="submitted">Submitted by <a href="../user/9711.html" title="View user profile.">simonog</a> on Thu, 31/03/2016 - 07:41.</div>
    <div class="content">
     <p>Thank you - the Wh explanation makes total sense.</p>
<p>i am unclear on Accumulate. &nbsp;What actually is the input value when it&#39;s a pulse input? &nbsp;Surely 1?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40757"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feed Type Documentation</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 31/03/2016 - 08:09.</div>
    <div class="content">
     <p>the pulse input from the emonpi is cumulative pulse count, i.e:</p>
<p>15001<br />
15001<br />
15002<br />
15003</p>
<p>This would result in an output with the accumulate process that would sum all of these together.</p>
<p>If instead the monitoring device just sent the total number of pulses in the last period:</p>
<p>1<br />
0<br />
1<br />
1</p>
<p>the result would accumulate to produce an accumulating timeseries as is needed in this application. However there is a danger with this approach of sending the number of pulses in the last period of data loss both if data is sent over radio (rfm12/69) and then with the internet connection. Sending the cumulative pulse count as done in the first approach and then using the wh_accumulator that removes resets gets around this as a couple of missed packets will not matter&nbsp; as the pulse count is updated correctly on the next successful update.<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40769"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9711.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="simonog&#039;s picture" title="simonog&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feed Type Documentation</h3>

    <div class="submitted">Submitted by <a href="../user/9711.html" title="View user profile.">simonog</a> on Thu, 31/03/2016 - 16:39.</div>
    <div class="content">
     <p>Very logical and elegant (= I like it).</p>
<p>Presumably all process lists should end with a log to feed in order to allow graphs etc to operate? &nbsp;Are there circumstances where one wouldn&#39;t?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40781"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feed Type Documentation</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 31/03/2016 - 20:04.</div>
    <div class="content">
     <p>the process wh_accumulator, power_to_kwh and many of the others have the log_to_feed bit built in so you dont have to add this in addition. You can tell if it does log to a feed if the feed create options appear when you select the process - it gives you the option to name the feed or select an existing one - you need to watch logging from multiple input processors to the same feed though..</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40786"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9711.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="simonog&#039;s picture" title="simonog&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Feed Type Documentation</h3>

    <div class="submitted">Submitted by <a href="../user/9711.html" title="View user profile.">simonog</a> on Thu, 31/03/2016 - 23:22.</div>
    <div class="content">
     <p>That&#39;s clever and simple, once one understands the concept.</p>
<p>As the system doesn&#39;t seem to permit the name to be reused when setting up a feed, I think it self-protects against different entities trying to climb into the same feed.</p>
<p>thank you for all the clarity - much appreciated. &nbsp;Hooks me even more!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/12430"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-qBu6OMC7dkvNdjz26VxumDMbi8IGpVBc3fjab5Npexs" value="form-qBu6OMC7dkvNdjz26VxumDMbi8IGpVBc3fjab5Npexs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
