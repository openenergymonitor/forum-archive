<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5323 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:07:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Fast calibration method | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Fast calibration method</h3>
        <span class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Fri, 20/06/2014 - 16:44</span>
        <div class="content"><p>Hi,</p>
<p>I am using a &quot;fast&quot; calibration method to calibrate my CTs.<br />
	I know it works very well (accuracy&lt;0,1%) with the continuous sampling sketch.<br />
	I would like to know if it can work too with the discrete sampling sketch.</p>
<p>Here is the method. During a couple of hours. I monitor the main power with the continuous sampling sketch with a CT round the main cable. Then, EmonCMS calculates the elapsed kWh seen by the CT. During the same time, another sketch counts the number of optical pulses emitted by my electric meter. This second value gives me the &quot;real&quot; elapsed kWh. In order to calibrate my CT, I just add a correcting factor in EmonCMS ( x 2nd value / 1st value).</p>
<p>I know it works with the continuous sampling sketch as the calibration of real power is done using a single variable (powerCal). Knowing that I don&#39;t care to measure the exact voltage, can I use this method with the discrete sampling sketch ? (my final goal is to get the real power)</p>
<p>I guess it&#39;s ok but I would like to be sure.</p>
<p>I hope it&#39;s clear ;)</p>
<p>Eric</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5331.html" class="topic-previous" title="Go to previous forum topic">‹ Configuring Raspbian as Read-Only</a>
              <a href="5320.html" class="topic-next" title="Go to next forum topic">using sparkio wifi / cloud base arduio ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-22081"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Fast calibration method</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Fri, 20/06/2014 - 17:45.</div>
    <div class="content">
     <p>Hi Eric, I&#39;m pleased to hear that my &#39;Continuous Monitoring&#39; sketch is of use to you.</p>
<p>I&#39;m not sure that I would claim quite such a high degree of accuracy, but my powerCal scheme is very straightforward to use for measuring real power.&nbsp; This approach has not changed since I posted the first Mk2 PV Router sketch.&nbsp; The small numerical value is because of the mismatch between Amps and ADC steps for the current sensor.&nbsp; There are roughly 20 ADC steps per Amp, so the powerCal value needs to be the inverse of this, i.e. roughly 0.05. &nbsp; The voltage sensor has roughly one ADC step per volt, so has little effect.</p>
<p>When calibrating any new hardware on the bench, I use a conventional supply meter that pulses every Watt Hour.&nbsp; On the Atmega, I run my DigitalMeterEmulator sketch which can be &#39;calibrated&#39; using exactly the same powerCal value.&nbsp; When both systems are pulsing at the same rate, calibration has been achieved.&nbsp; Finding the optimal powerCal value in this way takes just a few minutes.&nbsp;</p>
<p>The discrete sketches have separate cal values for Voltage and Current, so it all gets a bit more complicated.&nbsp; If your real power values are found to be incorrect, should you adjust Vcal or Ical or both?&nbsp; Who knows, which is why I went for the simpler all-in-one approach.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22085"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Fast calibration method</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 22/06/2014 - 06:05.</div>
    <div class="content">
     <p>I can see how how a linear multiplier like that could calibrate away any amplitude errors in V or I, provided they&#39;re in phase (i.e. a resistive load), but I&#39;m struggling to see how it could work under other conditions, or how it could correct any phase errors in the measurements.</p>
<p><strong>[EDIT]</strong></p>
<p>Actually, I take that back. &nbsp;I think I was being overly pessimistic there. &nbsp;Your single multiplier should work fine regardless of whether V and I are in phase. &nbsp;Imagine a perfect world with no phase errors in your measurements, where you could precisely capture V and I at the exact same instant. &nbsp;Then say you did decide to calibrate the individual readings so you could display real Volts and real Amps, and you came up with V&#39; as your voltage multiplier and I&#39; as your current multiplier. &nbsp;To calculate Power, you&#39;d then sum up all the:</p>
<p>V&#39; * voltage-reading * I&#39; * current-reading</p>
<p>Effectively, all you&#39;ve done is come with a new multiplier, P&#39; that equals V&#39; * I&#39;. &nbsp; If you&#39;ve no interest in displaying Volts and Amps, then you really don&#39;t care which multiplier was 3 and which one was 2, you just need to multiply the product of the readings by 6, which is effectively what your approach does.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22102"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Fast calibration method</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 22/06/2014 - 08:48.</div>
    <div class="content">
     <p>Isn&#39;t it better to calibrate the measurement system at source rather than when the data is being processed in emonCMS?</p>
<p>That&#39;s what the calibration values are for ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22103"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Fast calibration method</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 22/06/2014 - 11:47.</div>
    <div class="content">
     <p>I will just note that phase calibration cannot be done in emonCMS. I have to agree with Robin that, as a general principle, it is indeed best to calibrate as close to the source of the error as possible. One obvious case is where you have an emonGLCD in addition to data logging with emonCMS. In that case, if you do not calibrate the emonTx, you would need to introduce one or more calibration constants into the GLCD as well as into emonCMS, and manage and maintain both. The only time I would calibrate at a distance from the source is when the source is inaccessible, for whatever reason.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5323"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-ehlW2GYkm6P7lJW2UD3hr5eQ9AGdU4siIgpfFSFW6D4" value="form-ehlW2GYkm6P7lJW2UD3hr5eQ9AGdU4siIgpfFSFW6D4"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
