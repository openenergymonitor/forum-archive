<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3265 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:19:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Use in the US  | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Use in the US </h3>
        <span class="submitted">Submitted by Guest on Wed, 04/12/2013 - 20:51</span>
        <div class="content"><p>I am new to the forum and searched through a lot of threads and have not been able to determine for sure if the openenergymonitor system will work for me in the US -- any information/advice would be greatly appreciated</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12016.html" class="topic-previous" title="Go to previous forum topic">‹ Emontx arduino shield and Pi on 915MHz?</a>
              <a href="12455.html" class="topic-next" title="Go to next forum topic">Bulk data max upload size ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-16549"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 04/12/2013 - 21:11.</div>
    <div class="content">
     <p>Basically - yes.</p>
<p>The system was designed for the UK system: 240 V, 50 Hz, single phase <a href="http://en.wikipedia.org/wiki/Earthing_system">TN-S or TN-C-S</a> so you need to adapt somewhat. You might need a c.t that is different to our standard because I understand that thicker cables are common there, and you might need a different voltage monitor - depending on what mains supply you have. The higher supply frequency means that you get a few less voltage and current samples per cycle, but in practice that won&#39;t make any real difference. It has been done, obviously you&#39;ve missed the pertinent threads.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16569"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hooiser13&#039;s picture" title="hooiser13&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by hooiser13 (not verified) on Thu, 05/12/2013 - 14:41.</div>
    <div class="content">
     <p>Thanks, do you anticipate a system marketing in the US, I would think the demand would be significant. &nbsp;I also think this sort of solution would be beneficial&nbsp;in industrial&nbsp;applications. &nbsp;I would be interested in using this solution at my company to monitor power consumption on the manufacturing floor.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16578"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 06/12/2013 - 08:12.</div>
    <div class="content">
     <p>Please let us know how you get on with the system in the US. We are keen to get a setup in the US documented on the website. It&#39;s a little bit strange how there has been few few forum threads regarding this, as you say I&#39;m sure they would be lots of interested people in the US.&nbsp;</p>
<p>Robert: do you know of anyone maintaining an OEM steup with stock hardware in the US?</p>
<p>Best of luck,&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16588"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 06/12/2013 - 16:38.</div>
    <div class="content">
     <p>The most recent report was from Dan Woodie: He adapted MartinR&#39;s PLL energy diverter, which of course uses the standard emonTx, to use 3 c.t&#39;s at 60 Hz.&nbsp; <a href="2624.html" title="http://openenergymonitor.org/emon/node/2624">http://openenergymonitor.org/emon/node/2624</a> and <a href="2679.html" title="http://openenergymonitor.org/emon/node/2679">http://openenergymonitor.org/emon/node/2679</a>. Also more from Dan in here: <a href="2835.html" title="http://openenergymonitor.org/emon/node/2835">http://openenergymonitor.org/emon/node/2835</a></p>
<p>Magnelab CT&#39;s are available without a burden (one in each range) and when derated and fitted with the correct (larger) value burden can be used with the higher voltage emonTx input. E.g. the 600 A&nbsp; SCT-1250-000 (ratio 1:7500) is good for 200 A @ 1 V output + 120% overload and has a much bigger opening that our standard 100 A YHDC one (which is often too small to fit around their main incomers).</p>
<p>The earthed centre-tapped supply is the main problem since they treat it simultaneously as both two single 115 V supplies and one 230 V supply, therefore it has to be treated as a two-phase system, two CTs are required, one on each line and the neutral current is indeterminate. Classical theory says you need one fewer wattmeter than the number of wires, and a voltage and current input pair to the emonTx is exactly equivalent to a wattmeter, so you must measure two line currents and two line-neutral voltages. Apparently, the voltage balance is normally good and there is little inaccuracy if the voltage on one line only is measured and the other is assumed to be the same (but negative of course).</p>
<p>A three-phase 7-wire supply would be out of the question with or without a PV input - you&#39;d need to go for three stacked emonTx&#39;s as per MartinR&#39;s solution, or a larger processor and a custom pcb, though of course the sketches and library will work with a little modification to suit the different I/O mapping.</p>
<p>This <a href="2400.html" title="http://openenergymonitor.org/emon/node/2400">http://openenergymonitor.org/emon/node/2400</a> seems to indicate a successful system, whilst this thread <a href="711.html" title="http://openenergymonitor.org/emon/node/711">http://openenergymonitor.org/emon/node/711</a> has a number of contributors all seemingly having success. This thread also has some good points <a href="1959.html" title="http://openenergymonitor.org/emon/node/1959">http://openenergymonitor.org/emon/node/1959</a> (though I have my doubts about using a doorbell transformer - the output waveform might well be a less than faithful reproduction of the input).</p>
<p>There&#39;s some more discussion in <a href="1768.html" title="http://openenergymonitor.org/emon/node/1768">http://openenergymonitor.org/emon/node/1768</a> that might help, and as Marquis27 is now discussing emoncms and data points, he&#39;s probably got a working system!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16607"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3367.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3367.jpg" alt="Dan Woodie&#039;s picture" title="Dan Woodie&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3367.html" title="View user profile.">Dan Woodie</a> on Sat, 07/12/2013 - 15:02.</div>
    <div class="content">
     <p>Robert,</p>
<p>Thanks for the mention and the good summary. The system has been very stable lately and running well. I am actually running a variant of the EmonLibPro by Chaveiro as I found that to be slightly more accurate for measurement than the PV Router sketch in my situation, but everything else was spot on.</p>
<p>hoosier13, I am happy to post the code I am using for you if you want. The Magnelab CTs are working well and giving stable results. I use two of the Magnelab CTs for my house mains and one of the standard CTs from the shop for the smaller gauge wires coming out of my PV inverter. I changed the burden resistors on the EmonTx board to better suit the current range and CTs I have, but otherwise left everything standard.</p>
<p>Sorry for going silent recently. I have been tied up with local events. Tomorrow I am heading with my oldest son to the regional <a href="http://firstlegoleague.org/">FIRST LEGO League </a>Robot competition in Rochester, NY. I coach two teams and have been busy in our fall season. Once the season has finished I hope to post the comparision of the different code derivatives I performed late summer / early fall. I also asked Santa for an EmonGLCD kit ;-). Hopefully I have been a good boy...</p>
<p>Dan</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16617"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Sun, 08/12/2013 - 01:13.</div>
    <div class="content">
     <p>Thanks a lot guys for info. I hadn&#39;t appreciated the needs of a larger diameter CT opening until now. We have had some interest from resellers in the US: namely Wicked Devices and Modern Devices. I think the best way to go forward with developing he system in the US is to work with a local reseller who can also engage with the system and together the the community develop a version of the system which is more tailored to US users. I would be interested to hear your thoughts on this and an estimation of the work load required by such a reseller.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16625"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 08/12/2013 - 02:42.</div>
    <div class="content">
     <p>I can&#39;t help thinking that a US version with 2 voltage and 4 current inputs would fill a need. For a 3-phase (or is that 6-phase?) supply you need 6 voltage and 6 current inputs just for imported power and no generation, and given the shorter cycle period as well, that&#39;s looking decidedly dodgy for a single ATmega 328P. It could be a case for MartinR&#39;s &quot;Full Fat&quot; stacked design as standard (sold as a starter unit with radio for 1/2 phase and 2 non-radio add-ons for 3/6 phase). Work load - how long is your piece of string? I should imagine it would be broadly similar to the UK operation given the same sales volume. However, the potential sales volume is probably not broadly similar!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16644"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pbadger&#039;s picture" title="pbadger&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by pbadger (not verified) on Sun, 08/12/2013 - 17:42.</div>
    <div class="content">
     <p>The national electrical code in the US specifies conduit between the meter and the panel in the US, so the current transformers that you are using in the EU are slightly problematic.</p>
<p>This means that customers will be left with three options.</p>
<ul>
<li>
		Opening the panel themselves to install the current transformers. This might work for the advanced hobbyist or homeowner who has done some wiring and is not terrified of panels.</li>
<li>
		Hire an electrician. This will require finding an electrician who works on old construction and remodeling and convincing them to come out for what is likely under an hour of work. Cost is likely to be between $100 - 200</li>
<li>
		Using another current sensing method.</p>
<ul>
<li>
				This could involve a couple of different methods. I have a non contact current sensor at Modern Device that might work through pvc conduit (but not metal), especially for heavier loads. It&#39;s based on amplified linear analog hall effect sensors. It works on the service entrance to my house which is some kind of fabric casing (asbestos?) I had never seen the stuff before moving into Rhode Island so I doubt it&#39;s common.</li>
<li>
				Covering the meter to block a certain portion of light and then sensing the dark or light spot on the turning wheel - for older &quot;wheel&quot; type meters. It looks like that is the way that black and decker does it on their unit - available in the US for around $100. The radio signal for this is also 433 Mhz. I didn&#39;t look to see if people had hacked the signal. For what it&#39;s worth their published resolution is 100 watts, with a 300 watt minimum.</p>
<p>				Most smart meters have a blinking light I believe that would be easy to sense with similar techniques. There are several varieties of meters in use in the US.</li>
</ul>
</li>
</ul>
<ul class="rteindent1">
<li>
		Decoding the radio on the smart meters. When I last checked on this, some people had made some progress on this. That was several years ago.</li>
<li>
		Other ideas such as measuring specific appliances using my sensor, or current sensors etc. I&#39;m probably missing others - Hacking Kill a Watt units to add compatible radio units the way Lady Ada did with xbee?</li>
</ul>
<p>best regards,</p>
<p>Paul Badger<br />
	Modern Device</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16724"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4907.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pmscientist&#039;s picture" title="pmscientist&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/4907.html" title="View user profile.">pmscientist</a> on Thu, 12/12/2013 - 00:57.</div>
    <div class="content">
     <p>I&#39;m in the US, and have had success getting this to work. While the posts mentioned earlier and the main documentation did provide everything necessary to get it going, it would be nice to have documentation that&#39;s specific to a variety of areas. Documentation for US/Canada/Mexico would be nice in my case, and I&#39;ve seen at least one question from someone in Brazil.</p>
<p>I&#39;d be happy to help with getting documentation consolidated for adapting emontx to the US power configuration. I&#39;d also be happy to work on elements of making this more easily installable in the US, especially if there&#39;s someone coordinating such efforts. I&#39;m thinking things like a standard wall adapter or two w/known attributes, testing different current sensor arrangements, etc.</p>
<p>Since this ended up being a bit long, here&#39;s a summary of my thoughts for those that don&#39;t feel the need to read everything.</p>
<p>1. The US has a wide variation in potential conditions, which presents challenges for providing standardized power monitoring, especially of current</p>
<p>2. Use of existing emontx hardware is feasible for US, and probably desireable<br />
	- 2 CTs + 1 voltage sensor is sufficient for monitoring a US residential supply<br />
	- 3 phase has the same sensor needs as European 3 phase (US doesn&#39;t center tap power supplied as 3 phase)<br />
	- Most if not all adjustments needed are software based, with the potential exception of resistor values (I haven&#39;t needed to modify these)</p>
<p>Paul provides a good view of the monitoring practicalities here in the US. Another possible alternative is to attach the CTs prior to the meter, but then you&#39;ll likely have some weatherproofing to do as well (though if you&#39;re afraid of opening the panel, not sure you&#39;d do this either, not to mention the likelihood of needing a ladder for access). Another route I&#39;ve seen some people take is placing smaller CTs on most/all of the wires that exit each breaker. While you could wire things up to do some input summing, this method pretty much requires more CT inputs. If I had a smart meter, I&#39;d gladly use it, but seems like the US is behind a bit in terms of deploying those meters.</p>
<p>In regards to current taps and feed wires in the US, different CTs aren&#39;t always needed. I picked up a couple of the ones used by emontx from seeed studio. I&#39;ve got 150A service (not entirely sure of wire gauge) and had to wrap some electrical tape around the conductors to ensure the CTs stayed in place. It would be nice to have wider reports of success using the documented sensors, but the existing ones can work for many over here.</p>
<p>I&#39;ve used Paul&#39;s hall sensor for some individual appliance monitoring. I&#39;ve been happy with it for that application. One complicating factor for using it as a general solution on the main supply is that some local building codes require the use of metal conduit. On the other hand, it might be easier to weatherproof than CTs.</p>
<p>Honestly, one of the biggest challenges in the US is probably the sheer variety of conditions one can encounter. Other than the electrical parameters, the adoption of standards here really doesn&#39;t exist except on a local/regional level. The age of supply wiring varies greatly, and mandatory updates due to code changes isn&#39;t really a concept embraced at the residential level. Sounds like Paul has either quite old or quite updated wiring. I&#39;ve got a moderate age home, but with updated supply wiring. The meter to breaker box wiring requirements vary. The radio protocols for smart meters vary, as do the stacks on top of the radio signal. Not sure how much of this variation is similar across the pond.</p>
<p>In regards to voltage monitoring, a single sense point is sufficient for US. As mentioned in other posts, there are other points in the emontx system with wider tolerance than the voltage difference between each side of the center tap. From a practical perspective, if a truly meaninful difference developed between the two sides of the center tap, it&#39;s not likely that the monitoring implications would be the biggest concern at that point.</p>
<p>In regards to inputs needed for US supply wiring, there&#39;s no fundamental need for more than 2 CTs for basic residential monitoring here. Similarly, for 3 phase, there&#39;s no need for any more sensors than in other countries. While the votages may differ, the potential 3 phase wiring setups are the same.</p>
<p>In regards to hardware specific to particular areas, I&#39;d argue that the current platform is sufficient to provide basic monitoring capabilities in the US without modification, at least for the present emontx implementation. With the possible exception of resistor values, the necessary adjustments are supported by current software.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16728"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 12/12/2013 - 17:11.</div>
    <div class="content">
     <p>Very many thanks for that. It&#39;s not for me to say, but I think Glyn &amp; Trystan would very much appreciate any help you can offer on the ground. As you point out, knowledge of and the availability of a &#39;standard&#39; a.c-a.c adapter would be a great help. It&#39;s interesting that you say the US doesn&#39;t centre-tap the 3-phase supplies - the poster who said they had a 7-wire supply could have been mistaken, or maybe he was elsewhere on the American continent.</p>
<p>How then are micro-generation schemes connected in the USA? If they feed in at 230 V, then is there a neutral connection (which would imply 2 more c.t&#39;s) or is it 2-wire so that only one additional c.t. is needed?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16730"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4907.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pmscientist&#039;s picture" title="pmscientist&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/4907.html" title="View user profile.">pmscientist</a> on Thu, 12/12/2013 - 23:50.</div>
    <div class="content">
     <p>Yea, not sure where the 7 wire supply came from. I&#39;ve done a fair amount of datacenter work, and it&#39;s all been 4 wire @ either 480 or 208V. One possiblity is there&#39;s a backup generator involved. In that case, you would have 7 wires feeding a load transfer switch that moves the facility supply between grid and backup. In that case you&#39;d only have one supply connected to load at a time, and monitoring both simultaneously may not be needed. Another possibility I&#39;ve seen is multiple utility feeds, in which case you would need simultaneous monitoring at 6 or more points.</p>
<p>There is a form of neutral in a delta 3 phase configuration where one of the 3 phases is center tapped to provide the neutral. I could see someone extrapolating that idea and coming up with 7 wires, but since only one of the 3 phases is center tapped only 4 wires are presented. My understanding is that&#39;s a rare setup and I&#39;ve no experience with it.</p>
<p>I wish I knew more about grid tie inverter hookups for micro-generation in the US. Judging from what I&#39;ve read, inverters authorized for grid-tie installations are almost always 240V. The only ones I&#39;ve seen w/120V output are &lt;1kW. What I don&#39;t know is if/how the neutral line is typically hooked up. My guess would be that, as with so many things here, it varies and that both 2 and 3 wire connections are possible. Seems like emontx can handle even the worst case here, at least in terms of CT inputs. Although, the differences on the 4th channel could present some issues. OTOH, I&#39;d say that most in the US with a grid-tie PV system who are also interested in using an emon would be able to handle those issues ok.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16732"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 13/12/2013 - 00:39.</div>
    <div class="content">
     <p>From the context (I can&#39;t find the post now) I got the impression that the 7-wire system was in essence 6 phases 60&deg; apart (IIRC, I think it was a commercial building and they had their own final distribution transformer) so that there was the option of 115 V or 230 V to various areas, with the load (roughly) balanced across the phases.</p>
<p>That certainly sounded plausible to me. ( But the idea of 3 phases with the neutral being the centre tap of one - <a href="../../../upload.wikimedia.org/wikipedia/commons/thumb/1/1c/High_leg_delta_transformer.png/220px-High_leg_delta_transformer.png">like this?</a> from <a href="http://en.wikipedia.org/wiki/Three-phase_electric_power">Wikipedia</a> - leaves me incredulous.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16733"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2161.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="09540&#039;s picture" title="09540&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/2161.html" title="View user profile.">09540</a> on Fri, 13/12/2013 - 04:07.</div>
    <div class="content">
     <p>Yep, closed Delta. Power companies hate to install it because it takes an additional transformer compared to open delta, but the delivered power has a lot less harmonic distortion than the more common open Delta. You have to be real careful when working in load centers not to connect single-phase 120 volt loads to the wild leg (N->L3), makes for exciting times and ~really~ bright lights!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16735"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 13/12/2013 - 10:09.</div>
    <div class="content">
     <p>This sounds optimistic, although the amount of variation&nbsp;sounds a bit of a nightmare! At least in the UK installations are pretty standardized. I&#39;ve been in contact with our supplier of AC-AC adapters and the adapter we use is also available with a US plug. I will see if we can get some for the shop since it would be good if we were all using the same adapter in terms of calibration etc.&nbsp;</p>
<p>Have you got any recommendations regarding CT&#39;s (with larger diameter openings) which will work on many US system?</p>
<p>Paul: I will be in touch with how we can take this forward.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16745"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 13/12/2013 - 15:13.</div>
    <div class="content">
     <p><em>&quot;Have you got any recommendations regarding CT&#39;s (with larger diameter openings)&quot;</em></p>
<p>Yes, units from the Magnelab range without a burden resistor are suitable. Those supplied with an internal burden are designed for 0.333 V output, but without their internal burden and derating to 33% to stay within the VA rating, Magnelab have confirmed their suitability for the emonTx. So for example a 600 A one is good to 200 A with an external burden calculated to give a 1 V rms output to exactly suit the emonTx running at 3.3 V).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16746"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3367.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3367.jpg" alt="Dan Woodie&#039;s picture" title="Dan Woodie&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3367.html" title="View user profile.">Dan Woodie</a> on Fri, 13/12/2013 - 15:26.</div>
    <div class="content">
     <p>I am not a electrical engineer (chemical eng by trade), but from my experience, domestic US power is almost exclusively 2 phase 120V power with a common neutral. The phases are 180 degrees apart, and most circuits in the house run from one leg to the common neutral. High wattage devices like ovens, electric furnaces, and electric clothes dryers will run between the two phases for 240V power. Most solar installs I have seen (which are not many, but at least a few) are 120 V installations. Mine is a 4.5 kW install that supplies power at 120 V on one of the two 120 V phases, including net metering (export) to the power grid on the one 120V leg of the 2 phase power. Commercial power does have a large amount of options including 3 phase power but domestically that is very rare.</p>
<p>For my install I used a AC/AC transformer that should be widely available here in the US at Radioshack, a common electronic hobbyist store here in the US.</p>
<p><a href="http://www.radioshack.com/product/index.jsp?productId=3875403">http://www.radioshack.com/product/index.jsp?productId=3875403</a></p>
<p>In terms of the proper CT, I did a large amount of searching to try and find an inexpensive CT that would fit the large diameter (18 mm) mains in my panel box (150 A service). In general the mains in the US are larger although they will vary by the service provided. I would say that 100A service will in general be the minimum although older homes (&gt;50 years) may have smaller. I did find a CT similar to the one offered in the Emon shop that was larger, but it was an import business that had a min order of 10 pieces, when I only needed 3. I ended up going with the Magnelab units that were $45 each for my two mains, and the Emon standard CT for the PV output, which is a much lower gauge wire. The SCT-075-000 comes without a burden resister and zener protection diodes. I emailed the manufaturer and was was told that the # of turns is 7356:1.</p>
<p><a href="http://www.magnelab.com/products/Current-Voltage-Sensors/Split-Core-AC-Current-Sensor-SCT-0750">http://www.magnelab.com/products/Current-Voltage-Sensors/Split-Core-AC-Current-Sensor-SCT-0750</a></p>
<p>So far these have worked well for my install. Let me know if there is anything else I can do to assist in getting US compatible parts more widely available.</p>
<p>Dan</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16754"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2161.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="09540&#039;s picture" title="09540&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/2161.html" title="View user profile.">09540</a> on Fri, 13/12/2013 - 18:09.</div>
    <div class="content">
     <p>Dan has given a good overview of the "typical" US household utility service. I would take issue with one point, though. A properly installed load center and the connections made to the single-phase (120V) circuits in the facility would normally more-or-less evenly connect those circuits between the two phases and neutral, balancing the load to the utility transformer. 240V loads, of course, would be connected between the two phases.</p>
<p>Service entrance wire here is normally sized (at least in newer installations) for 200 ampere service. Since the use of aluminum conductors is so prevalent, #0000 (four-aught) wire is the norm. I just went out an measured a hank of this wire I have out in the garage, and it was 17mm in diameter, including the insulation. As Dan noted, an 18mm CT would fit, but depending on the amount of open area inside the enclosure (load center, panel board, etc), you may or may not be able to get the clamp to stick out perpendicularly to the conductor. A larger CT might be necessary in some installations so the the CT can rest at a lesser angle to clear the enclosure or other wiring inside.</p>
<p>As time goes on, there will be fewer and fewer of the lower capacity services such as those Dan describes (150A and less) Aside from the obvious fact that newer buildings are likely to consume more, requiring larger load centers and wire feeding them, the NEC (National Electrical Code, the guide which nearly all municipalities use to set electrical installation standards) has required for some time that equipment used for service entrance and disconnect be capable of withstanding fault currents in excess of 10,000 amperes. Mostly, this means that larger conductors are going to be the only ones acceptable to the AHJ (Authority Having Jurisdiction). In short, even though you might only need to power 20 amperes of load, you'll have to install conductors and service entrance equipment rated for the full 200A to meet code requirements.</p>
<p>For the purposes of OEM, this may or may not be an issue, but most, if not all installations in the US will need to be able to apply a CT to those larger sized conductors if "whole house" monitoring is to be possible.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16761"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sat, 14/12/2013 - 04:54.</div>
    <div class="content">
     <p>Dan&#39;s overview is essentially correct, but as Robert pointed out:</p>
<p><em>don&#39;t confuse phase shift with inverting the wave. I believe the American system is what I would call 115 - 0 - 115 V, where the final supply transformer measures 230 V between the ends of the windings and the neutral centre tap is connected to earth. In that case, what you are calling a 180&deg; phase shift isn&#39;t really a phase shift at all, but a mirror image of the voltage. </em></p>
<p>The North American system isn&#39;t a two-phase system, but rather a single 240V phase split into two 120V &quot;legs.&quot; Hence the term &quot;split-phase.&quot; The folks in the electrical trade refer to them as Leg 1 and Leg 2. Leg to leg voltage is 240, leg to neutral voltage is 120. The neutral is typically connected to ground at the transformer, and the service entrance. Most newer homes will have a 200A service which uses 4/0 aluminum wire as pointed out above. Larger homes typically have a 320A service and older homes 100, 125 or 150A service depending on when the building was constructed. Residences built prior to the 1940s typically have 60A service.</p>
<p>I have a 7kW system that uses Enphase M215 microinverters. The M215 output is 240 Volts, and does indeed, use the neutral. The M215 <em>can</em> be used in a three phase environment, (with Enphase&#39;s three phase trunk cable - which differs from their single phase trunk) but residential three phase service in the US is quite rare.</p>
<p>Another aspect Robert pointed out -- the split-phase system is treated as two 120VAC sources, and a single 240VAC source. <em>Ususally,</em> the loads will be more or less balanced across the two 120V legs. If there are a large number of 240V circuits, say for example, a house has two central electric heater/air con units, a large window mount aircon unit, two electric water heaters, an electric oven, electric clothes dryer and an electric stove, as well as a large number of 120V circuits, then the load on one leg may be considerably more than the load on the other leg. This is exactly how my house is set up. (Hence, the 7 kW PV system!) Despite the load imbalance, the voltage difference between the two legs is .2 to .3 volts. I use a 240V to 2.5V control transformer as a voltage reference.</p>
<p>I use a Magnelab SCT-075-005 CT on each leg. According to the whitepaper on the Magnelab site, the -005 CT can be operated at 200A with no core saturation or heating problems. The 075 series CTs have .75 inch (19mm) openings, so they fit round 4/0 wire with room to spare.&nbsp; Since my max load is typically 20 to 22A, the CT output at max current is approximately 1.33V RMS.&nbsp; I use the YHDC CT sold in the OEM shop to measure PV output, as the wires from my PV junction box are AWG 6 which the SCT013 CT fits around easily.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16880"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4907.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="pmscientist&#039;s picture" title="pmscientist&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/4907.html" title="View user profile.">pmscientist</a> on Wed, 18/12/2013 - 22:58.</div>
    <div class="content">
     <p>All in all, it sounds like there is decent agreement that the existing emontx is usable in North America pretty much as is for most installations. Has anyone in that region needed to use different resistor values? I&#39;ve been fine with the documented values.</p>
<p>If some standard hardware (wall wart, CT, etc.) for these installations is agreed upon, I&#39;m on board to switch my setup. Especially if it&#39;s carried by Paul or another vendor in the region. My offer of helping with documentation for installs in this region stands as well.</p>
<p>Paul, if you&#39;re thinking of adapting your hall sensor for use in this kind of application, I&#39;d be willing to try things out.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19859"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sd solar&#039;s picture" title="sd solar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/5888.html" title="View user profile.">sd solar</a> on Wed, 26/03/2014 - 21:32.</div>
    <div class="content">
     <p>Hi Bill<br />
	I&rsquo;ve got a similar situation here in South Dakota, where I will need CT&rsquo;s of at least .75&rdquo; or 19 mm openings to make it around the 4/0 feeders.</p>
<p>
	The installation here is a 13.2KW Grid Tie,&nbsp; (44) 300W Suniva panels,&nbsp; Fronius IG Plus V 11.4-1 with an Onset Hobo wireless Data Logger for the monitoring system --- works well, but this monitoring system is pretty expensive.</p>
<p>
	I am going to be doing a similar installation at my son&rsquo;s farm this Spring and hope to use the emonTx with a Raspberry Pi Base Station for the monitoring and some load switching at his site.</p>
<p>
	The normal load current range I wish to fairly accurately monitor will be in the 10 to 70 A range but at a few unusual times, the load could approach the upper 90 Amp area.</p>
<p>
	I would like to use that same CT&rsquo;s you have --- Magnelab SCT-0750-005 and from the info on Magnelab&rsquo;s web site it looks like they can easily handle loads up to 100 Amps, so should only need to get the CT&rsquo;s output voltage in a range the emononTx can use.</p>
<p>
	From Magnelab&rsquo;s web site and some calculations, it appears this CT has a built in burden resistor of 490 ohms and a Turns ratio of 7,356 Turns, so at a 100 A load would output a V = (100A X 490 ohms) / 7,356 T = 6.66 volts and at a load of 10 Amps that would be 0.666 volts. Is this in a range the emonX can use as an input? I do not need a high level of accuracy at the 10 A and below level.</p>
<p>
	Did you put CT&rsquo;s on both output legs of the Inverter output? When I measure mine the leg Amps are about identical, so I would think one could make that assumption and with only (1) CT input, use the same data for the other leg in the logging software.&nbsp; That way I would not have to use the CT 4 Input ( with a 4.6 KW limit) which is below the Inverter output for this leg.</p>
<p>
	Any help or ideas are appreciated.<br />
	Thanks Wallace<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19861"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 26/03/2014 - 22:09.</div>
    <div class="content">
     <p>The best Magnelab ct&#39;s to use are those <strong><u>without</u></strong> a built-in burden resistor, but choose one three times the current rating you need. You can then, by using a higher value burden resistor, get enough voltage to fully drive the emonTx input. It&#39;s all a matter of staying within the VA rating of the ct. Go above and it will saturate and you sacrifice accuracy. You will need to remove the SMT burden resistor on the emonTx PCB as it will be the wrong value, but there is a position for a though-hole component to replace it.</p>
<p>For example, the Magnelab split core 600 A&nbsp; SCT-1250-000&nbsp; (ratio 1:7500) is good for 200 A @ 1 V output + 120% overload, using a burden resistor of 37.5 Ohms.</p>
<p>You can change the scale of CT4 input by either removing the SMT burden and replacing, or paralleling, it with a through-hole resistor of the appropriate value.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19864"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sd solar&#039;s picture" title="sd solar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/5888.html" title="View user profile.">sd solar</a> on Wed, 26/03/2014 - 23:21.</div>
    <div class="content">
     <p>Hi Robert</p>
<p>Thanks for the reply.</p>
<p>The built - in burden resistors CT&#39;s are a lot easier to find and less expensive --- under $20 for a SCT-0750-005 so if I can get them to work, I&nbsp;would prefer that.</p>
<p>I am definitely not an expert on CT&#39;s so can use all the help I can get.</p>
<p>The Magnelab web site seem to indicate that CT can handle a load of 200 Amps without overheating or saturation so I would think it would work OK for the range I need 10 to 70 Amps with occasional highs of 90 Amps or so.</p>
<p>It&#39;s output volts would be 0.666 V to about 6.66 V in that range --- would that be compatible with the emonTx input range?</p>
<p>********************************************************************</p>
<p>&quot;Frequently Asked Question on Magnelab Standard Series</p>
<p>The following is applicable to the SCT (split-core Transformer) and UCT (solid-core Transformer) series products unless otherwise specified</p>
<p>Q- Can an SCT-0750-005 Current Sensor be used on a 30, 50 or even 200 Amp circuit?</p>
<p>A- Magnelab SCT-0750 Current Transformers can function safely from zero to 200 Amps. A 5 Amp unit will have an output of 0.333 Volt at 5 Amps and the same unit used at 200 Amps will have an ideal output of 13.33 Volts. The temperature rise at 200 Amps will be only a few degrees due to low current in the secondary winding. Therefore, an SCT-0750-005 (5 Amp unit) could be used at 200 Amps since the core does not saturate and the temperature increase is minimal.&quot;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19865"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Thu, 27/03/2014 - 13:00.</div>
    <div class="content">
     <p>Hi Wallace,</p>
<p>Despite the text on the Magnelab&nbsp;website, I&#39;ve found the Magnelab&nbsp;CTs&nbsp;start to saturate when the load reaches ~6kw. I&#39;ve since switched to Wattcore WC-1&nbsp;CTs&nbsp;from Byram Labs, that have a&nbsp;1 VRMS output. They&#39;re available in ratings from 25 to 200A. The Wattcore&nbsp;WC-1&nbsp;opening is .72 x .62 inches, and with a little trimming of the inside of the plastic shell, will fit a 4/0 conductor. Their WC-3 model has a .73 x .93 inch opening, is about the same size and shape as the Magnelab SCT unit, and fits a 4/0 conductor as is. The WC-1 costs $18, the WC-3, $33.</p>
<p>EDIT - The WC-3 CT also has a 1VRMS output.</p>
<p>&nbsp; <a href="http://www.byramlabs.com/wattcore.php " title="www.byramlabs.com/wattcore.php ">www.byramlabs.com/wattcore.php </a></p>
<p>Regards,</p>
<p>Bill</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19882"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 27/03/2014 - 10:02.</div>
    <div class="content">
     <p>Answering the emonTx input question, the available voltage range nominally is the supply voltage, 3.3 V. You need to subtract from that 1% to allow for the regulator being at the low end of tolerance, 1.2% similarly for the voltage bias resistors, and 1% for the burden resistor. That gives you the peak-peak voltage. Assuming a pure sine wave, which you won&#39;t necessarily get with the current, that gives you a little less than 1.13 V rms. Aiming for 1 V rms at the maximum current you want to measure seems reasonable to me, and gives you a bit of headroom for inrush and waveform distortion.</p>
<p>As Bill says, the ct will saturate when you overload it, then the waveform accuracy disappears and takes the measurement accuracy with it. There&#39;s a difference between safely and accurately. Remember a ct for protection has to safely operate the protective device at the maximum fault level - it only has to be accurate at the trip setting, it does not have to be accurate at that maximum fault level.</p>
<p>Magnelab say their cts are good to 120%, and they should know. My source was Jeff Lawson, V.P. of Sales and Support at Magnelab.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19890"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5619.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-5619.jpg" alt="knicely&#039;s picture" title="knicely&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/5619.html" title="View user profile.">knicely</a> on Thu, 27/03/2014 - 11:02.</div>
    <div class="content">
     <p>Regarding CTs for the US. &nbsp;I am using the The Energy Detective CTs on my system for monitoring the mains. &nbsp;Before installing them I did a teardown of one CT. &nbsp;I did not count the windings, but I would estimate somewhere between 5000 and 6000 turns on each one. &nbsp; The CTs have an internal burden resister network which is adjustable, so you can just hook them up and calibrate them to match the input. &nbsp;I removed the burden resistors from CT1 and CT2&nbsp;on the emontx3 to accommodate the internal burden resistors in the CTs. &nbsp;I plan on doing a full post here sometime soon with photos and more details on how I calibrated them sometime soon, &nbsp; I have only had them installed for 4 days, but they seem to be working fine.</p>
<p><a href="http://www.theenergydetective.com/set-of-current-transformers-cts.html">http://www.theenergydetective.com/set-of-current-transformers-cts.html</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19907"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 27/03/2014 - 16:15.</div>
    <div class="content">
     <p>As I implied above, you need to find the VA rating of the ct, and stay within that when setting the maximum primary current and the burden voltage. Inside that, it should be fine. Exceed it, and you can expect trouble.</p>
<p>You can of course get a close approximation to the turns ratio by measuring the primary and secondary currents. The actual ratio will be adjusted slightly to take account of errors arising from the magnetising component of the current.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19909"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sd solar&#039;s picture" title="sd solar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/5888.html" title="View user profile.">sd solar</a> on Thu, 27/03/2014 - 16:18.</div>
    <div class="content">
     <p>Thanks guys for some great info.&nbsp; I think I will use Robert&rsquo;s advice and order a couple of CT&rsquo;s without the built &ndash; in burden resistor.</p>
<p>
	The Wattcore&nbsp; WC1-100-MA100 specs a secondary output of 100ma at a rated input of 100amps, so I assume this CT has a Turn Ratio of 1000.&nbsp; And Bill listed an outlet for these at a very reasonable $18.</p>
<p>
	If I use 75A as the upper end of the Loads I wish to fairly accurately measure --- the Peak Primary current would be 75A X sqrt(2) = 85.6A and then the Seconday Peak current would be 0.086A</p>
<p>
	Using 3.3V for the reference voltage for the emonTx less 3.2% or 0.1V for the tolerance issues Robert listed = 3.2 V.<br />
	The Burden resistor required then would be (3.2V/2) / 0.086A = 18.6 ohms.</p>
<p>
	Placing a 120 ohm resistor in parallel with the 22 ohm on the emon Tx board would give very close to this 18.6 value.</p>
<p>
	Does this seem like it will work for the Load range I wish to measure --- 0 to 75A ?<br />
	Thanks<br />
	Wallace<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19924"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Thu, 27/03/2014 - 18:58.</div>
    <div class="content">
     <p>Question for Robert...</p>
<p>For Wallace&#39;s application, would&nbsp;a CT that supplies 1 VRMS at&nbsp;100A,&nbsp;be a good choice for&nbsp;what he wants to do? (the WC1-100-RV001 specs are 1000 mVRMS out&nbsp;at 100A)</p>
<p>Thanks,</p>
<p>Bill</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19948"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sd solar&#039;s picture" title="sd solar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/5888.html" title="View user profile.">sd solar</a> on Thu, 27/03/2014 - 20:45.</div>
    <div class="content">
     <p>Bill<br />
	I&rsquo;m going to be very interested in what Robert has to say on that also.</p>
<p>
	It amazes me how skimpy on the tech data the CT manufacturers are --- like in this case no Turns Ratio or internal burden resistor info is published.</p>
<p>
	I think if one assumed that CT also has a 1000 Turn Ratio (Big assumption),&nbsp; then it also would have a secondary current of 100ma at an Input of 100 amps. So to get an published output of 1 volt it would have a 10 ohm internal resistor value.&nbsp; (R= 1V/.1A)</p>
<p>
	That would make those 2 CT&rsquo;s very similar except for the internal resistor.</p>
<p>
	Not sure about any of this though.&nbsp; <br />
	Wallace<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19953"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 27/03/2014 - 23:22.</div>
    <div class="content">
     <p>I see what you mean about that data sheet. It&#39;s a leap of faith to guess that the WC1-100-MA10 is actually 100 A : 100 mA (which is traditionally how CTs are defined - by the <strong><em>currents</em></strong>, not the ratio) but let&#39;s assume that to be the case.</p>
<p>Then 75 A primary current will give you 75 mA secondary current, and the burden needs to develop 1 V (all in rms!). I make that a 13.33 &Omega; resistor, or 33 &Omega; in parallel with the existing 22 &Omega; is reasonably close. (I think you had digitus erroneous with your &radic;2. In my humble opinion, 75A X sqrt(2) != 85.6A.)&nbsp; I can&#39;t offer a view on whether saturation would be a problem. Normally, I&#39;d expect at least a suggestion of a suitable value for a burden, but there&#39;s absolutely no indication of what the VA rating is. All I can suggest is you ask the manufacturer, or test it yourself!</p>
<p>The version that gives 1 V at 100 A would clearly do the job, but you&#39;d be using only &frac34; of the available range of the input, so you&#39;d be losing resolution, and that would most likely show up as a greater inaccuracy at very low currents. The 80 A version would clearly be a better match.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19957"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Fri, 28/03/2014 - 03:16.</div>
    <div class="content">
     <p>The question came to mind because Wallace mentioned he didn&#39;t need accuracy below 10 A, and his max could be in the high nineties.</p>
<pre>
The normal load current range I wish to fairly accurately monitor will be in the 10 to
70A range but at a few unusual times, the load could approach the upper 90 Amp area.

I do not need a high level of accuracy at the 10 A and below level.</pre><p>Understood, regarding the resolution. Thanks!</p>
<p>Bill</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20272"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="smolz&#039;s picture" title="smolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by smolz (not verified) on Mon, 31/03/2014 - 23:33.</div>
    <div class="content">
     <p>So if i just wanted to monitor the mains for voltage in my house in the US.&nbsp; Would i just need the following:</p>
<p>&nbsp;</p>
<p>1 x emonTx V3</p>
<p>1 x emonGLCD</p>
<p>1 x RFM12Pi - Raspberry Pi Base Station Receiver Board</p>
<p>1 x Pre-Loaded Raspberry Pi Base Station Gateway SD card</p>
<p>1 x Raspberry Pi (Model B)</p>
<p>1 x AC-AC 120v to 9V transformer</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20273"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 01/04/2014 - 00:00.</div>
    <div class="content">
     <p>You will also need 5 V USB power supplies and leads for the GLCD and RPi. As you will not be using our standard AC-AC adapter, you will probably need to calibrate the emonTx. To do that, and to program the emonGLCD, you will need to add a programmer and lead. You will need an Ethernet jumper to connect the RPi to your router.</p>
<p>The GLCD will give you a local display in addition to the browser display (both present and historical) via emoncms.org.</p>
<p>And I assume you&#39;ve read the caveats about balance of the two &#39;legs&#39; of the supply in the posts above. But you are not interested in power/energy? (You can add CTs later if you change your mind.)<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20339"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6092.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bill&#039;s picture" title="bill&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6092.html" title="View user profile.">bill</a> on Wed, 02/04/2014 - 12:28.</div>
    <div class="content">
     <p>Based on the&nbsp;SCT-1250-000 without the built-in&nbsp;burden resistor. &nbsp; Your calculation of a 37.5 Ohms burden resistor would the &nbsp;R1&nbsp;be 10K resistor and R2&nbsp;be&nbsp;1K resistor? &nbsp;Would the capacitor be a 10uF&nbsp;for C1? &nbsp;See diagram <a href="../sites/default/files/Arduino%20AC%20current%20input%20A.png" title="http://openenergymonitor.org/emon/sites/default/files/Arduino%20AC%20current%20input%20A.png">http://openenergymonitor.org/emon/sites/default/files/Arduino%20AC%20cur...</a></p>
<p>I am already getting good data out of my solar system and storing it in&nbsp;emoncms.org. &nbsp; &nbsp;Now I want to start tracking my home usage.</p>
<p>&nbsp;</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20837"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6192.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6192.jpg" alt="Patricio Duenas&#039;s picture" title="Patricio Duenas&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6192.html" title="View user profile.">Patricio Duenas</a> on Fri, 18/04/2014 - 01:13.</div>
    <div class="content">
     <p>Hi</p>
<p>I read this thread thru and I still have a couple of questions, so I kindly ask for your help.</p>
<p>I have just purchased an EmonTx V3&nbsp;(and a raspberry base station, radios, etc). I live in Mexico with a 3 phase (common neutral) 137 V, 60 Hz as a mains supply. The CTs I use are the same as you sell (SCT-013-000) and the mains wire fits in perfectly so no issues&nbsp;with the CT.</p>
<p>Do I need to modify something in the EmonTx code to adapt it to the voltage and phase that I have?</p>
<p>Could I follow the same calibration procedure you use?</p>
<p>Will the 3.3V used as a reference suffice to my voltage samples?</p>
<p>1,000 thanks!</p>
<p>&nbsp;</p>
<p>Patricio Duenas</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20838"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 18/04/2014 - 02:04.</div>
    <div class="content">
     <p>Bill:</p>
<p>No, as per the diagram, the two resistors that bias the input must be equal, so that the voltage developed by the burden resistor can swing equal distances towards each supply rail. The CT chosen doesn&#39;t affect this.</p>
<p>10&micro;F is a suitable value for the capacitor.</p>
<p>Patricio Duenas:</p>
<p>The voltage transformer you use will determine the calibration. You can calculate your calibration constants by following <a href="https://learn.openenergymonitor.org/?redirect=ct-and-ac-power-adaptor-installation-and-calibration-theory">this page</a>. The procedure for checking (and making the final corrections because the calculated value will not take component tolerances into account) is <a href="https://learn.openenergymonitor.org/?redirect=calibration">here</a>. The 3.3 V reference used in the V3 is more accurate than the internal reference in the ADC, but it might not be more stable. By default, EmonLib uses the 3.3 V supply as the voltage reference for the V3.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21343"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Mon, 12/05/2014 - 18:54.</div>
    <div class="content">
     <p>This might not be the right thread for this, but I&#39;m hoping it is (if not, I would be grateful if someone would be so kind as to post a link to the proper thread for this question).</p>
<p>I live in the US, and have 60Hz &quot;split-phase&quot; (center-tapped) power. It is generally referred to as 120V on each leg to neutral, with 240 across the two legs.&nbsp; As I understand it, the sine wave of one phase is the opposite of the other. From what I&#39;ve read here, there isn&#39;t a very large user base here in the US, and an even smaller group who are doing this on Arduino (as I&#39;m attempting to do).</p>
<p>I just got solar panels (I hired SolarCity - I didn&#39;t do it myself), and I&#39;m waiting for the power company to finish up their part to enable me for net-metering. In the meantime, I want to build a system to monitor the output of the solar panels and the total load of the house, and store all that in a mySQL database (for display).</p>
<p>I already have the data storage and display part worked out - I&#39;ve been monitoring temperature and thermostat (the on/off of the control lines) for over two years now. Adding in the power production/consumption will increase the &quot;geek factor&quot;. I&#39;m doing all this with an Arduino, and I&#39;ve added a second one to capture the power data and pass it up to the main unit.</p>
<p>The wires carrying the output from the inverters are connected to the wires coming from the utility inside my breaker box. The connection is made between the meter and the main breaker, with one &quot;leg&quot; from the inverters going to each of the two &quot;legs&quot; in the breaker box.</p>
<p>My goal is the take measurements at four points: on each leg of the output from the inverters (which should give me the total inverter output), and on each leg of the input to the main breaker (which should give me the total power consumption). Subtracting one from the other will give me the amount being pulled from/pushed to the utility. My goal is not to be 100% precise - but to give me a general idea of how much power I&#39;m generating/using/buying/selling at different times of the day. However, the more accurate I can get - the better.</p>
<p>I bought four SCT-016-000 current transformer, only to find that they are too small to get around the main feeds in the breaker box. So, I bought two SCT-0750-200&#39;s for those. I&#39;m only measuring current - not voltage (At this time at least).</p>
<p>I haven&#39;t installed anything on the &quot;live&quot; system, but I&#39;ve been testing (with the help of my dad - who is an EE) to try and find the right calibration factors. The SCT-016-000 doesn&#39;t come with a burden resistor, and we calculated that a 33-Ohm resistor was about right. I made a modified extension cord (that allows us to clip a current transformer around only the hot leg), and plugged that into a Kill-A-Watt to verify the readings. We tested with various combinations of a 60W lamp, a 250W lamp, and a vacuum cleaner, and we came very close to true readings. We will have to do some tests with higher loads (clipping it around the wires feeling the air conditioner/stove/electric dryer/etc).</p>
<p>Since I&#39;m going to add the values from both legs of the source together(I won&#39;t need to see separate values), I took a second CT, flipped it around, and installed it on the neutral wire of the extension cord. I put a second burden resistor across it, and then put the two CTs in series. The numbers I got were just about double (within margin of error) what I saw on the Kill-a-watt, so I was happy with that test.</p>
<p>Next, I tried to test the SCT-0750-200&#39;s. Since those come with a burden resistor already (I read somewhere that it is a 12/3-Ohm, and I with some math I estimated the ratio to be around 7400:1 (I later found out it is 7356:1 - so I was pretty close). I put them in series, and installed them next to the SCT-016&#39;s on the same wires. I wanted to calibrate the two against each other, since the current being measured by the two (in this test setup) should be the same.</p>
<p>However, I found that not to be the case. With the 250W lamp on, I was not that far off between the two. However, with the lamp off, I am getting a lot more &quot;noise&quot; on the circuit with the STC-0750&#39;s on it.</p>
<p>Right now, the calibration factor I am using are:</p>
<p>For the SCT-016-000: 90.90&nbsp; (120A:40mA/33Ohm = 90.9090909090909....)</p>
<p>For the SCT-0750-200: 601.6 (7400:1/12.3Ohm = 601.6260162...).</p>
<p>I know that the ratio on the SCT-0750 is really 73.56, so the calibration factor should really be 598.048780487... I figured I&#39;m close enough for the moment.</p>
<p>Are any of the members here in the US using the SCT-016-000&#39;s and/or SCT-0750-200&#39;s (or one of the other versions of it WITH the built-in resistor), and can tell me if I&#39;m completely off-track here with my calibrations? I plan to do some tests measuring higher current amounts (trying to verify my readings with a clip-around ammeter), but I really wanted to open up the breaker box only one time if I could (take some test measurements, and then install the CTs in their final positions).</p>
<p>Thanks.</p>
<p>--Noam</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21345"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 12/05/2014 - 21:08.</div>
    <div class="content">
     <p>Welcome, Noam.</p>
<p>Everything you&#39;ve written above sounds OK to me. I&#39;m in the UK of course, but I&#39;m led to believe your electricity obeys the same rules as ours, it&#39;s only the installation practice that&#39;s different!</p>
<p>I assume you&#39;ve read the Building Blocks piece on the theory of calibration, and you&#39;re working from that. But I think you may have run into trouble with your Magnelab SCT-0750-200 (it is Magnelab?). Those with the built-in burden are designed to give you 0.333 V out at full load, so even with two in series, you are looking at 0.666 V rms. I assume your Arduino is running at 5 V, therefore you want 5 V p-p, or 1.75V rms in round figures, to fully drive the input. Your best trick, had you not already bought the CTs, would have been to derate them by about 2.5 times so that you can get 2.5 times the voltage, i.e. get an SCT-1250-000 without a burden resistor - that model is good to 600 A @ 0.333 V out, or 200 A @ 1 V out. Then, by using a higher value of burden resistor, you could get the required output voltage without overloading the CT. It&#39;s all down to the VA rating of the CT, which is rarely directly specified. We know the YHDC SCT-013-000 has a sufficiently big VA rating to drive the required voltage.</p>
<p>I&#39;m not at all surprised that you&#39;re seeing a lot of noise. The Arduino, as far as I&#39;m aware, does not have any filtering between the analogue and the digital power supplies, and it looks as if you are working at 0.5% of full scale on the CT, and the CT output is using below half of the input range of the Arduino. And all this is with a 10-bit ADC. Our experience is that below about 1%, you cannot get accurate measurements. The situation should improve dramatically when you have larger loads.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21346"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Tue, 13/05/2014 - 04:07.</div>
    <div class="content">
     <p>Noam,</p>
<p>Here&#39;s a link to a 200 amp CT with a 1 Volt RMS output and physical dimensions nearly the same dimensions (0.06 inches taller) as the magnelab CTs you have. (the SCT1250 is a bit over an inch larger in length and width than the SCT750, they might be a tight fit in your load center)</p>
<p><a href="http://www.byramlabs.com/product_info.php/products_id/20527">http://www.byramlabs.com/product_info.php/products_id/20527</a></p>
<p>regards,</p>
<p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21350"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Tue, 13/05/2014 - 18:42.</div>
    <div class="content">
     <p>Robert, Bill -&nbsp;</p>
<p>Thanks for the assistance. I&#39;m going to try and respond to all the points you both made in order (or something close to it):</p>
<p>1. Yes, electricity tends to follow the same rules, just the local standards and codes differ from place to place.</p>
<p>2. I did read through the Building Blocks section, and (with some help from my dad - he&#39;s the EE) I think I understand most of the parts that apply in my case (I&#39;m not measuring voltage, so I didn&#39;t delve into that part).</p>
<p>3. Yes, it is a Magnelab CT. I do realize that I&#39;ll only get 0.666V out at max load, and that really limits the potential for accuracy. I understand that they are not the ideal ones for my setup - but I was still trying to understand some of the fundamentals when I found them and placed my order. I wasn&#39;t able to find much out about them before I bought them, which only made things harder. At this point, I&#39;m inclined to try and make the CT&#39;s I got work - since I already bought them.</p>
<p>4a. I did read, however (not sure I understand it, though), that the ATMega328 (I&#39;m soldering up a custom Arduino-clone board for this - I&#39;ve gotten pretty good at making those) has a built-in option of using either 5V or 1.1V as the reference voltage for the analog input, or I can input any voltage between 0V and 5V as a reference. I just don&#39;t know if I can do that for one set of CTs, and leave the other ones (the SCT-016&#39;s) the way they are, on the same chip.&nbsp; I might need a separate chip for each pair of CTs. But perhaps I don&#39;t have to...</p>
<p>4b. If I use a resistor divider to produce something close to .666 V for the offset voltage for the CTs, and use an analog reference close to 1.3V, I&#39;ll have about as much precision as I can (unless I totally misunderstood how it works).&nbsp;</p>
<p>4c. Alternatively, I&#39;m told I can use an op-amp to boost the max output of the CTs to something close to the 2.5V reference voltage.</p>
<p>4d. If I am able to make the SCT-0750-200&#39;s work by using lower offset and reference voltages, can I adjust the burden resistor I put across the SCT-016&#39;s, and use those same offset and reference voltages for those, too? Based on my math, if I use an 8.3 Ohm (approx) burden resistor, I should get a max voltage output of .333V per CT. Putting the two in series gives me the .666 to match the other pair. Of course, I don&#39;t expect to come close to that output - the system is fused for 70A on each leg. so, I could use a 14.2Ohm resistor for those.</p>
<p>5. I know that the noise should settle down once I have &quot;real&quot; loads to measure. If I can tune the measurement to the smaller range of the values I&#39;ll get (see #4 above), that will probably help, too.</p>
<p>6. Thanks for the link to the Wattcore CT. I had a lot of trouble finding CTs that would fit over my main feed wires, and wouldn&#39;t cost me a fortune (see #3 above).</p>
<p>Sorry for the long replies.</p>
<p>--Noam</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21353"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Tue, 13/05/2014 - 21:00.</div>
    <div class="content">
     <p>After doing more reading, and since I know nothing about op-amps, I am leaning toward trying the voltage divider with an external analog reference voltage.</p>
<p>Based on the drawing here: <a href="https://learn.openenergymonitor.org/?redirect=ct-sensors-interface">http://openenergymonitor.org/emon/buildingblocks/ct-sensors-interface</a>, I think the following will work:</p>
<p>A voltage divider made up of a 47k resistor followed by two 10k resistors should drop the 5V to around 1.5V after the first resistor, and around 0.75V after the second.</p>
<p>If I connect the 1.5V to the AREF pin on my Arduino, and use the 0.75V to feed the one side of the CT, I *should* get voltages in the 0.084V to 1.42V range with the pair of CTs maxing out at 0.666V.</p>
<p>A 15-Ohm resistor across the SCT-016&#39;s should hit close to 0.333V at around 65A, which is above the maximum expected output of my solar inverters.</p>
<p>I couldn&#39;t figure out where in the code to specify that I&#39;m using the AREF pin instead of Vcc. Can anyone tell me how to do that?</p>
<p>Thanks.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21354"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 13/05/2014 - 22:04.</div>
    <div class="content">
     <p>The first thing I&#39;ve picked up on is I think you need to read the data sheet concerning the use of the A<sub>REF</sub> pin. I&#39;m no expert on the Atmel chip, but the way I read it, it is there only to allow an external decoupling capacitor to be connected. Therefore, you might not be able to use it as you suggest, and you have to use the internal 1.1 V reference instead and tailor the rest of your design to that.</p>
<p>You can switch the reference in software, but you&#39;d have to dig deep to find out the pitfalls, like how long it takes to settle before you can get an accurate measurement. It might well be prohibitive, and it would certainly be messy and you&#39;d need to check very carefully that our libraries did the right thing, if you intend to use them.</p>
<p>If you do work with a 1.1 V reference, it means that you can use lower valued burden resistors, adding external ones in parallel with the internal ones if necessary, to reduce the burden voltages to the value you require. (Remember, a CT is a <strong><em>current</em></strong> source and so you overload it by allowing it to generate excess voltage, it is quite happy working into a short circuit!). Of course you can set the burden so that whatever current you want gives you your maximum input voltage (subject of course to the VA limit of the CT, and as you are well below the rated maximum current, that&#39;s way above where you are working it, so no worries there).&nbsp; I have not checked your calculations for the burden resistor values.</p>
<p>You will need to be pretty accurate in calculating the resistors for the 0.55 V midpoint bias. Any move away from 0.55 V will limit the input range.</p>
<p>What I would suggest you pay close attention to, especially if you use the 1.1 V reference and as you&#39;re soldering up your own board, is earthing and decoupling for the analogue parts of the circuit and segregation from the digital parts. I&#39;ve tended to notice more complaints about input noise from people who have Arduino boards, and as I understand it, these have no decoupling between the analogue AV<sub>CC</sub> and the digital V<sub>CC</sub>. Our emonTx V3, which has decoupling, performs better than the V2 in this respect.</p>
<p>It might pay you to put a 1 k&Omega; resistor in series with each input, as in the emonTx V3. I won&#39;t affect accuracy, but it will limit the maximum current that can flow into the protection diodes if you get a wiring fault that operates the protection in your distribution board.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21355"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Tue, 13/05/2014 - 22:13.</div>
    <div class="content">
     <p>I&#39;m not familiar with the sketches used here, but the general way to do that within the Arduino environment is an early call to&nbsp;analogReference():</p>
<p><a href="http://arduino.cc/en/Reference/AnalogReference" title="http://arduino.cc/en/Reference/AnalogReference">http://arduino.cc/en/Reference/AnalogReference</a></p>
<p>Note that once you&#39;ve got an external reference voltage wired to the AREF pin, it&#39;s critical that you never accidentally run a sketch that uses one of the internal bandgaps instead (i.e. most sketches). &nbsp; When you are using one of the internal bandgaps, it gets fed out to AREF for de-coupling, and the device expects nothing but a capacitor out there. &nbsp; If you accidentally select an internal bandgap with your setup, you&#39;ll be feeding your external voltage directly into the bandgap generator. &nbsp;I&#39;ve not tried it, but I&#39;m told that destroys the device pretty quickly.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21357"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Tue, 13/05/2014 - 22:27.</div>
    <div class="content">
     <p><em>but the way I read it, it is there only to allow an external decoupling capacitor to be connected</em></p>
<p>That&#39;s true when you&#39;re using an internal voltage ref. &nbsp;But AREF can also be used to supply an external reference voltage.</p>
<p><em>You can switch the reference in software, but you&#39;d have to dig deep to find out the pitfalls, like how long it takes to settle before you can get an accurate measurement. It might well be prohibitive,</em></p>
<p>While the datasheet on the ADC calls for the first conversion after changing Vref to be discarded it&#39;s actually a lot worse than that. &nbsp; The much bigger problem is caused by the decoupling&nbsp;cap on AREF. &nbsp;If that&#39;s big, then it can take a long time (msecs) for the freshly selected Vref to become stable. &nbsp; &nbsp;When going from a high Vref&nbsp;to a lower one, that external cap causes Vref to slowly decay down to the new value, and any readings during that decay are &nbsp;unusable.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21358"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 13/05/2014 - 23:00.</div>
    <div class="content">
     <p>dBC:</p>
<p>Thanks for clarifying the reference.</p>
<p>It means then (a) you can&#39;t realistically use the continuous monitoring sketches and change it on the fly, and (b) if you use the emonLib library and the discrete sampling sketches, changes might be necessary because of the different reference.</p>
<p>I have no idea where the reference is selected, if it is indeed selected and doesn&#39;t default to V<sub>CC</sub>. It needs checking.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21361"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Wed, 14/05/2014 - 00:30.</div>
    <div class="content">
     <p>dBC,</p>
<p>If I understand your question correctly, acording to the data here:<a href="http://arduino.cc/en/Reference/AnalogReference">http://arduino.cc/en/Reference/AnalogReference</a></p>
<p>the analog reference defaults to either 5 or 3.3 volts (depending on the board) unless explicitly set to internal or external.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21362"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 14/05/2014 - 00:52.</div>
    <div class="content">
     <p>I don&#39;t think I asked a question did I?</p>
<p><em>the analog reference defaults to either 5 or 3.3 volts (depending on the board) unless explicitly set to internal or external.</em></p>
<p>Yes, and I agree that&#39;s the most likely scenario in this case. &nbsp;But given the dire consequences of getting it wrong once noamparn has wired up his external reference, I think Robert&#39;s &nbsp;<strong><em> It needs checking &nbsp; </em></strong> advice&nbsp;is sound.</p>
<p>A quick grep for calls to&nbsp;analogReference() or writes to the ADMUX register throughout all the code would be a good starting point.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21363"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Wed, 14/05/2014 - 02:25.</div>
    <div class="content">
     <p>That&#39;s why I asked in the first place.&nbsp;</p>
<p>I saw the ADMUX references, and I just don&#39;t understand that part of the code. I was hoping that someone here was familiar enough with the code to give me a hand with it.&nbsp;</p>
<p>I decided to play with the resistor divider and the aref pin a little, usig a test sketch.&nbsp;</p>
<p>Of course, I didn&#39;t have the 47k resistor I needed, so I improvised with a 56k (close enough for now).&nbsp;</p>
<p>It seems that the calculations in the emon.cpp use a variable called SUPPLYVOLTAGE, which is obtained by reading the Vcc&nbsp;value from the Arduino. I *could* set that manually in the code (there already is a line that hard-codes it for the emonTx), but I&#39;d rather not - since I&#39;m not using a regulated source to get it (although I could use something like an LM7805....).&nbsp;</p>
<p>When I supplied a lower voltage to the Aref pin, the readings changed (I didn&#39;t try it with a CT hooked up, though - I did it on a separate test arduino I have), however, the Irms&nbsp;is still calculated based on the SUPPLYVOLTAGE value.&nbsp;</p>
<p>When I adjusted the formula (I used a 56k resistor and two 10k resistors, so I multiplied SUPPLYVOLTAGE by (56/76), the numbers lined up to where I expected them.&nbsp;</p>
<p>So, it looks like it can be done -just that the emonlib library doesn&#39;t have a provision for it built-in.&nbsp;</p>
<p>I&#39;ll have to do some more tests with the CTs hooked up, to see how that goes.&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21365"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 14/05/2014 - 04:22.</div>
    <div class="content">
     <p>Are you referring to the code discussed in this thread?:</p>
<p><a href="2522.html" title="http://openenergymonitor.org/emon/node/2522">http://openenergymonitor.org/emon/node/2522</a></p>
<p>I had a crack at describing how it works (final post) and included some relevant stuff from the datasheet. &nbsp;I used the 2560 because that&#39;s what I had handy, but they&#39;re all very similar. &nbsp;The 2560 has an extra bandgap voltage available (2.56V), and a wider input MUX. &nbsp; If it still doesn&#39;t make sense after reading that, feel free to ask further.</p>
<p>But yes, a call to readVcc() will indeed unconditionally select AVCC as the reference voltage, so you really don&#39;t want to be calling that routine (in its current form) if you&#39;ve wired up an external voltage reference to the AREF pin.</p>
<p>I&#39;m afraid I&#39;m not &nbsp;at all familiar with the rest of the code you refer to (the stuff that calls readVcc and calculates other things) so I&#39;ll defer discussion of that to those more qualified.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21390"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Thu, 15/05/2014 - 13:37.</div>
    <div class="content">
     <p>Thanks to all who replied.</p>
<p>Well, I played around with the code, and I think I have it working.</p>
<p>I added&nbsp; &quot;analogReference(EXTERNAL)&quot; to the beginning of the setup() routine, and I changed the following section in emonlib.cpp:</p>
<p>#if defined(__AVR_ATmega168__) || defined(__AVR_ATmega328__) || defined (__AVR_ATmega328P__)<br />
	&nbsp; ADMUX = <strong>_BV(REFS0) |</strong> _BV(MUX3) | _BV(MUX2) | _BV(MUX1);</p>
<p>became</p>
<p>#if defined(__AVR_ATmega168__) || defined(__AVR_ATmega328__) || defined (__AVR_ATmega328P__)<br />
	&nbsp; ADMUX =&nbsp;&nbsp; _BV(MUX3) | _BV(MUX2) | _BV(MUX1);</p>
<p>&nbsp;</p>
<p>By removing the &quot;_BV(REFS0) | &quot; portion, I told it to use the external reference pin, into which I put about 1.5 volts in as the reference pin. I used a 47k resistor from a 5v DC adapter, followed by a 10k, and another 10k to ground.</p>
<p>The voltage after the first resistor is about 1.5v, and the voltage between the two 10k resistors is about 0.75v.</p>
<p>After compiling and re-downloading the code, everything seems to be working (based on my 0-10A tests so far).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21497"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 21/05/2014 - 16:33.</div>
    <div class="content">
     <p>We are now stocking US plug AC/AC adapters in our shop: <a href="http://shop.openenergymonitor.com/ac-ac-power-supply-adapter-ac-voltage-sensor-us-plug/" title="http://shop.openenergymonitor.com/ac-ac-power-supply-adapter-ac-voltage-sensor-us-plug/">http://shop.openenergymonitor.com/ac-ac-power-supply-adapter-ac-voltage-...</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21502"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Thu, 22/05/2014 - 01:12.</div>
    <div class="content">
     <p>I installed the CTs in the breaker box, and the ones for my consumption seem to be registering okay (based on tests I did with a clip-on ammeter).</p>
<p>I just got final approval to turn on the solar inverters today. They were only on for a short while before the sun went down, but I got some readings at least.</p>
<p>I&#39;m not sure I have the system calibrated correctly, though.</p>
<p>I am using a pair of SCT-016-000&#39;s, one on each half of the split phase, with one flipped backward (reversed polarity) so they sum together instead of cancelling each other out.</p>
<p>I have a burden resistor across each, and they are connected in series, feeding into the pin on the Arduino.</p>
<p>I could be wrong here (I&#39;m not the EE in the family), but I think I was measuring about double what I should have been.</p>
<p>The inverters reported (on their little digital displays) around 338 W each, at 245 volts. Dividing watts by volts, I get about 1.37 Amps each, or 2.76 A total. However, the Arduino was reporting around 5.5 A. So, I&#39;m wondering if I either need to adjust my calibration factor to account for the doubled CTs, or if I should only be measuring one of the two phases of the supply from the solar inverters.</p>
<p>I need to do more tests during the day (when the panels are producing more power), but I can&#39;t do that easily (I need to open the breaker box up and use the clip-on ammeter again), and I won&#39;t have time during the day until the weekend.</p>
<p>Can anyone confirm for me how I should be adjusting the calibration formula when dealing with two CTs in series on opposite legs of split-phase power?</p>
<p>Thanks.</p>
<p>--Noam</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21504"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Thu, 22/05/2014 - 05:07.</div>
    <div class="content">
     <p>Hi Noam,</p>
<p>I have the same split-phase wiring as you. My PV system uses inverters with 240 Volt outputs, so I use a single CT to monitor PV energy generation. (One less meter than the number of wires, in my case, as yours, the two hot legs)</p>
<p>However, I *do* use two CTs installed back to back as you described above, to feed my emonTx to measure the house load.</p>
<p>Regards,</p>
<p>Bill</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21506"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 22/05/2014 - 10:54.</div>
    <div class="content">
     <p>What voltage are you measuring - it sounds as if you might be measuring line-line voltage <strong>and</strong> both currents. If you measure line-line voltage, you only need to measure one current (i.e. it&#39;s then behaving as a single phase supply), if you measure both currents, you only need to measure line-neutral voltage.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21511"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Thu, 22/05/2014 - 13:53.</div>
    <div class="content">
     <p>Robert -</p>
<p>Thanks for getting back to me so quickly.</p>
<p>Your description of my setup was pretty close. I have a CT on each leg feeding into the breaker box (below the tie-in from the inverters) to measure the house load. I also have a CT on each leg of the feed from the inverters (those are installed in the inverter shutoff box - since there was more room in there to do it). However, I&#39;m not (yet) measuring voltage on the Arduino. I got the voltage from the status screen on the inverters themselves.</p>
<p>Your answer makes sense, I guess, since the inverters are outputting on both legs, and the current levels should be equal (but 180 degrees opposite) each other. So I think all I need to do is remove one of them, or divide the number in half in the software.</p>
<p>At this point, I&#39;m not tracking power (in kW) but current (in Amps). If that&#39;s the case, then I think I am confused about when to measure the production current only one leg, and when to measure on both.&nbsp;</p>
<p>When measuring the house load, I have a CT on each leg. So, when I turn on a lamp (connected between one of the legs and neutral), the current flowing through that leg is the current going to the lamp (for this simple example - assume *everything* else is turned off). The &quot;return&quot; on the neutral (yes, I know it flips direction at 60Hz) would also measure the same current (in the opposite direction), so I can understand why summing those would give me a double reading.</p>
<p>However, I don&#39;t understand how to measure 240V (leg-leg) loads. Since the current &quot;enters&quot; on one leg, and &quot;returns&quot; on the other (and not the neutral), wouldn&#39;t the pair of CTs in that case be measuring the current twice, resulting in the wrong number again?</p>
<p>Thanks.</p>
<p>--Noam</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21513"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 22/05/2014 - 17:18.</div>
    <div class="content">
     <p>You need to go back to basics. Also, let&#39;s forget things like power factor and assume everything is purely resistive, i.e. voltage and current are exactly in phase.</p>
<p>Now, the simple case: you have a load connected to a supply with two wires. Current flows into the load on one, and out on the other. You can measure the current in either, and it&#39;s the same. You measure the voltage between the wires, multiply that by the current, and you get the power in the load. If you substitute a generator for the load, it&#39;s exactly the same. Note that I&#39;ve not labelled any of the wires! They could be line and neutral, or your two lines.</p>
<p>Now if those two wires happen to be two lines, and the voltage from each to neutral happens to be exactly the same magnitude but at any instant the opposite sign, you have your set-up.</p>
<p>Now is it making sense?</p>
<p>If you have a load connected line-neutral, you use one line current and line-neutral voltage.<br />
	If you have a load connected line-line, you use one line current and line-line voltage, <strong>or</strong> both line currents and line-neutral voltage.</p>
<p>So what voltage did you tell it, line-neutral (120 V), or line-line (240 V)?</p>
<p>The complicated case: If you&#39;ve got a mix of loads, some 120 V and some 240 V, and the 120 V ones not evenly balanced on the two legs, then you&#39;ve got to measure the two line currents, because they can and generally will be different, and you use the line-neutral voltage. Ideally of&nbsp; course you&#39;d measure both line-neutral voltages, calculate the powers in the two halves of the supply separately and add them. But I&#39;m assured the voltage balance is good, so the error in assuming both voltages are the same is negligible.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21527"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sd solar&#039;s picture" title="sd solar&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/5888.html" title="View user profile.">sd solar</a> on Fri, 23/05/2014 - 13:35.</div>
    <div class="content">
     <p>I just received one of Robin&rsquo;s MK2 diverters and have a similar problem of combining the outputs of the two CT&rsquo;s on each feeder leg of a split phase system here in the U.S. as an input into the one CT jack on the unit.</p>
<p>
	I noticed that Noam said he put a burden resistor across each legs CT and&nbsp; then connected them in series to feed the pin on the Arduino.</p>
<p>
	I had originally thought about connecting them in parallel, that is connect the 2 white wires together and connect that to the tip and then the 2 black wires to the sleeve, also with suitable burden resistors between the leads of each CT.</p>
<p>
	Will either way work ?&nbsp; Are there any advantages / disadvantages provided proper burden resistors are selected?</p>
<p>
	Is it correct to assume that in series, you are adding the 2 voltages developed across each CT&rsquo;s resistor and that is the input to the pin ?&nbsp; And in parallel you are adding the 2 secondary currents as an input ?</p>
<p>
	I am starting to think that connecting them in series may be the better method.<br />
	Wallace<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21529"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 23/05/2014 - 15:01.</div>
    <div class="content">
     <p><em>Will either way work ?&nbsp;</em> Yes</p>
<p><em>Are there any advantages / disadvantages provided proper burden resistors are selected?</em> Not really. There may be a marginal advantage in keeping the voltage developed by the CT down, i.e. use individual burden resistors and add the voltages.</p>
<p><em>Is it correct to assume that in series, you are adding the 2 voltages developed across each CT&rsquo;s resistor and that is the input to the pin ?&nbsp;</em>Yes, that&#39;s absolutely right.</p>
<p><em>And in parallel you are adding the 2 secondary currents as an input ?</em> Maybe not quite, you are adding the currents in the burden resistor, and then feeding that voltage in. If you are using the internal burden, then yes, you were right.</p>
<p><em>I am starting to think that connecting them in series may be the better method.</em> See above. I would not worry too much - any difference is down to second-order effects like the onset of saturation and distortion.</p>
<p>If you parallel the CTs, you do of course only need one burden resistor, but remember that you have twice the current so the value is half - exactly the same as two parallel resistors! (But it may in fact be convenient to do exactly that - use the internal burden plus an external one in parallel. If you can get the second one inside the plug, there&#39;s little risk of open-circuiting the CT when you unplug it.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21582"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Mon, 26/05/2014 - 16:59.</div>
    <div class="content">
     <p>I wanted to give an update on my setup:</p>
<p>I was getting numbers that didn&#39;t seem to be quire right, so I decided to simplify things (from a schematic standpoint, at least), and then try going forward again.</p>
<p>To that end, I now have four separate voltage divider circuits, each splitting the 5V reference voltage in half for the offset voltage, and each with its own capacitor from that midpoint to ground).</p>
<p>I have each of the four current transformers on their own input pin and voltage divider.</p>
<p>I&#39;m still not measuring voltage with the Arduino yet. Since my main goal was to compare production with (solar) consumption, the voltage is the same on both sides at any point I measure. Eventually, I want to add the voltage measurement also.</p>
<p>I opened up the breaker box again yesterday, so I could use the clip-on ammeter to compare the CT readings with a known (assumed) good meter. By splitting the four CTs out to separate input pins, I had a better way to test and calibrate each one individually.</p>
<p>The readings for the two CTs on the house loads were reading the same as the meter (which is analog, so it was as close as I could tell at least).</p>
<p>However, the ones for the feeds from the solar inverters were not lining up properly. For one thing, there was almost a 20% difference between the readings from the two CTs (one on each leg of the 240V output), but the ammeter showed no difference between the two. We determined the difference must be coming from the not-so-tight tolerances of the CTs I bought, combined with the tolerances of the burden resistors. Since neither CT was reading quite right, we took a lot of readings on each (as the solar production went up and down with the moving clouds), and figured out the right multiplier we needed for each to bring them in line with the ammeter readings.</p>
<p>After making the proper adjustments in my code, I&#39;m again reading the right numbers. I even created a simple PHP script to give me the latest solar production number (in Amps), and the multiply by 125 (the average voltage I observed) to get the real-time wattage output of the system. I then compared this number to the one on the inverters&#39; digital readouts, and I&#39;m within a few percent (much better than I&#39;d hoped).</p>
<p>The whole thing is still on the (large) breadboard, with jumpers running to an Arduino Uno. I added my status LEDs (to show under/overproduction at a glance), and I also want to add a small 2x20 character LCD screen.</p>
<p>I have to figure out the best way to lay it out on one (or several) boards, and get it all mounted in a project box.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21593"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 26/05/2014 - 19:53.</div>
    <div class="content">
     <p>To get a 20% difference from 4 components means you are well out of luck, you don&#39;t want to buy a lottery ticket any time soon!&nbsp; Basically, if each ct and resistor had a 5% tolerance, all would have had to have been at the wrong end to get that. It would be interesting to know who your suppliers were so that we could avoid them in future. It&#39;s rarely worth penny-pinching on resistors, the 1% 0.25 W or 0.6 W metal film are (quoting my favourite UK supplier) 39 p each, the same as 5% 0.5 W carbon film.</p>
<p>The downside of having 4 inputs is you won&#39;t be measuring the currents in each leg at the same instant. Depending on how your loads change and whether you use the &#39;discrete sample&#39; approach or the interrupt-driven one, that could be a problem.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21621"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Tue, 27/05/2014 - 16:28.</div>
    <div class="content">
     <p>Robert -</p>
<p>The difference seemed to be specifically with the two SCT-016-000 CT&#39;s that I&#39;d ordered, and less with the resistors (I swapped the inputs and the variation moved with them). I bought a total of four of them (originally thinking I could use two of them for the main loads - not realizing they were too small to clamp around those wires). Had I not been able to figure out the calibration factor for the two of them I&#39;m using, my next step would have been to temporarily set up all four of them on the same wire (possibly my test wire with just a relatively stable load like my big halogen lamp on the end), take some measurements, and see if I can find two of them that seem to match. I still would have needed a calibration factor to get to reality, but I would be starting out with more equal measurements.</p>
<p>As for the timing of measuring each phase separately, that&#39;s a really good point.</p>
<p>I&#39;m taking 1280 measurements on each of the four CTs, and it all happens awfully fast. I&#39;d imagine I&#39;m getting numbers that are close enough to rely on.</p>
<p>Now that I understand the differences between the two CTs on the solar side, I guess I could go back to putting each pair in series, and figuring out the correct multiplier to account for the offset. That might save me a drop of time on the reads (although I had doubled the number of samples when I had half the number of CT circuits - so it is probably a wash).</p>
<p>I&#39;m not sure I understand your comment about the &quot;discrete sample&quot; vs. &quot;interrupt driven&quot; approaches. If you don&#39;t mind explaining the difference to me, I could probably give you an answer (and possibly improve the accuracy of my system at the same time).</p>
<p>Thanks.</p>
<p>--Noam</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21630"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 27/05/2014 - 20:39.</div>
    <div class="content">
     <p>OK, the easiest way to calibrate the CTs, assuming you will put them in series, is to tweak the value of the burden resistor. The best way is to choose a higher value that required for one (or choose the one that gives the highest output), and put high value resistors in parallel to bring the value down. And the most sensitive way to do that is put them both on the same cable, secondaries in series, but with one facing the wrong way, and adjust for zero voltage out across the pair (then they are both giving equal voltages at that current). Then you tweak the overall calibration for that pair in software.</p>
<p>The standard &quot;Discrete sample&quot; sketch uses emonLib. If you&#39;re only measuring current, that takes approx 2500 samples per second, then calculates the rms value over that interval. Then the sketch repeats that for the other lines, then sleeps for 10 s.</p>
<p>The &quot;continuous&quot; sketch runs the ADC continuously in the background, and by tweaking the order in which it measures the inputs, you can arrange it to measure (say) voltage, line 1a current, line 1b current, line 2a current, line 2b current, then repeating immediately, the main sketch processes the accumulated values and sends the result every 10 s. (This method is necessary if you are using an energy diverter that uses burst fire mode to control the dump load.)&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21639"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6316.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="noamparn&#039;s picture" title="noamparn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6316.html" title="View user profile.">noamparn</a> on Wed, 28/05/2014 - 14:44.</div>
    <div class="content">
     <p>Robert -</p>
<p>Thanks for the explanation (I think I get it now).</p>
<p>I decided to split each of the four CTs to its own input pin for testing, instead of putting them in series. It made my troubleshooting a whole lot easier. Other than the time it takes to take another set of readings, I don&#39;t see any reason I need to go back and combine them. I have plenty of pins available.</p>
<p>From your explanation, I think I&#39;m using the &quot;discrete sample&quot; option. Because this unit does other things (waits for a request for data, displays out the complete data it receives from the master, etc), I figured this was the easiest (and first) way I figured out to do it.</p>
<p>--Noam</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22172"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6548.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="billvolz&#039;s picture" title="billvolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Tue, 24/06/2014 - 16:39.</div>
    <div class="content">
     <p>Hi, New here so bear with me.</p>
<p>My house in the US will have 2-phase 120VAC with a 200A service so I assume 100A&nbsp;max on each leg. I will also have a 20KW back up generator so I assume 10KW each leg and a max of about 83A. The generator will be on an automatic transfer switch.</p>
<p>I want to monitor both the main service and generator so I&#39;ll need 4 CT&#39;s. I think the Wattcore WC1 with 1V&nbsp;output would work. Some Q&#39;s on the CT&#39;s...</p>
<p>1) I&#39;d need to remove the burden resistor on the emonTX3&nbsp;on all of CT inputs, right?</p>
<p>2) would the 2V CT&#39;s be better?</p>
<p>3) Do I need to change anything else?&nbsp;</p>
<p>4) How do CT&#39;s connect to the emonTX3? (and I need to connect the CT to the cable one backward from the other).</p>
<p>5) the generator will run in test mode once a week but not transfer power. Will I be able to detect that even if the generator has little or no load?</p>
<p>Powering the emonTX3 - I&#39;ll use the wall wart available on this site. It&#39;ll be plugged into an outlet that will be powered from main and the generator when the power is out.</p>
<p>6) How much power does the emonTX3 draw?</p>
<p>7) When I lose main service power, it takes tens of seconds before the generator kicks in. Once main power is restored I do not know how long it takes for the transfer switch to go off generator and back to main. It could be milliseconds to seconds. I assume that the emonTX3 has a very low power draw and that if the switch over is milliseconds there may be enough energy in the wall wart to continue powering the emonTX3. Would that be a problem in any way? Would the emontx3 recover from the different phase and possibly&nbsp;sightly different voltages?</p>
<p>Transmitting to the RMF12B. &nbsp;The emonTX3 will be next to the breaker panel in the garage. The Raspberry with the receiver will be in a basement closet under the stairs. The Raspberry will be on a UPS power supply so it&#39;ll keep running during outages. The straight line distance is about 35-40 ft (~12 M). The signal will need to go through 2 2x6 exterior walls and 3 2x4 interior walls plus a floor (and perhaps some 8&quot; concrete walls rather than 2x6 - not at the house so not sure).</p>
<p>8) &nbsp;will the signal be be able to make it?</p>
<p>9) should I consider using the SMA antenna and extend it closer to the Raspberry and eliminate some walls and floor?</p>
<p>10) what is the maximum distance I can extend the SMA antenna?</p>
<p>Assuming the radio won&#39;t work, serial connection between the emonTx3 and Raspberry</p>
<p>11) the distance I&#39;d need to run a serial cable line would be about 70-80 ft. Is that feasible?</p>
<p>12) with that long wire, and lightning, would I run the risk of killing the Raspberry due to induced currents from a nearby lightning strike? Isolation and how?</p>
<p>13) how many conductors would I need and what gauge wire?</p>
<p>General Q&#39;s</p>
<p>14) do I need the programming interface and mini USB cable?</p>
<p>15) this is what I&#39;m planning to get. I already have the Raspberry. I&#39;ll pass on the emonGLCD for now and use emoncms pages.&nbsp;</p>
<p>a)&nbsp;1x emonTX3</p>
<p>b) 4 WC1 CT&#39;s in either 1 or 2V</p>
<p>c) wall wart AC adapter to power emonTx3 and provide AC reference</p>
<p>d) RFM12B</p>
<p>15a) I assume I need to create a different account to purchase?</p>
<p>15b) if I get a bundle what is the discount and when is it applied?</p>
<p>16) what did I leave out? Anything else I need to know?</p>
<p>Emoncms&nbsp;Q&#39;s. I have already installed emoncms on the Raspberry. I&#39;ll add a power USB hub and a hard drive.</p>
<p>17) Can emoncms send emails based on events such as main power out or power on or usage goes above or below a threshold?</p>
<p>18) where do I set the calibration factors? Can I use a full month of use and get the KWH for the month and use that to derive calibration factors? I don&#39;t have an ampmeter and don&#39;t want to buy one for one time use. If so, how?</p>
<p>I think that&#39;ll enough for now. Thanks for your help.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22175"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 24/06/2014 - 19:45.</div>
    <div class="content">
     <p><em>My house in the US will have 2-phase 120VAC with a 200A service so I assume 100A max on each leg.</em></p>
<p>That&#39;s a dangerous assumption. Any 240 V loads will carry the same current in each line conductor (and zero in the neutral). And the case where you have unequal 120 V loads distributed over the 2 legs will be very similar - only the difference current flows in the neutral - the major proportion of the current will flow in the two lines.</p>
<p><em>I will also have a 20KW back up generator so I assume 10KW each leg and a max of about 83A. The generator will be on an automatic transfer switch.</em></p>
<p><em>I want to monitor both the main service and generator so I&#39;ll need 4 CT&#39;s. I think the Wattcore WC1 with 1V output would work. Some Q&#39;s on the CT&#39;s...</em></p>
<p>That would not be my preferred choice. The emonTx requires about 1.6 V rms to fully utilise the input range available, hence you need a CT capable of giving at least that voltage at maximum current.</p>
<p><em>1) I&#39;d need to remove the burden resistor on the emonTX3 on all of CT inputs, right?</em></p>
<p>Most probably yes. There are holes for wire-ended resistors if you need a custom burden resistor (and you most probably will).</p>
<p><em>2) would the 2V CT&#39;s be better?</em></p>
<p>Most probably yes. You&#39;d choose your burden resistor (or have another external one in parallel if your CT is the &quot;voltage output&quot; variety) to give you full scale input at the maximum current you want to measure.</p>
<p><em>3) Do I need to change anything else?</em></p>
<p>On the emonTx - you&#39;ll probably need to adjust the calibration coefficients in the software. But hardware - not that I can think of.</p>
<p><em>4) How do CT&#39;s connect to the emonTX3? (and I need to connect the CT to the cable one backward from the other).</em></p>
<p>By a 3.5 mm &quot;stereo&quot; plug - wired tip and sleeve, no connection to the ring.</p>
<p><em>5) the generator will run in test mode once a week but not transfer power. Will I be able to detect that even if the generator has little or no load?</em></p>
<p>Probably not. If it&#39;s not transferring power, you won&#39;t measure any current. But if there&#39;s a a step change in voltage, you might see that if you&#39;re recording/displaying the voltage.</p>
<p><em>Powering the emonTX3 - I&#39;ll use the wall wart available on this site. It&#39;ll be plugged into an outlet that will be powered from main and the generator when the power is out.</em></p>
<p>That&#39;s fine.</p>
<p><em>6) How much power does the emonTX3 draw?</em></p>
<p>Very little. There is probably more in losses in the ac-ac adapter than is drawn by the emonTx, which is about 20 mA at 3.3 V.</p>
<p><em>7) When I lose main service power, it takes tens of seconds before the generator kicks in. Once main power is restored I do not know how long it takes for the transfer switch to go off generator and back to main. It could be milliseconds to seconds. I assume that the emonTX3 has a very low power draw and that if the switch over is milliseconds there may be enough energy in the wall wart to continue powering the emonTX3. Would that be a problem in any way? Would the emontx3 recover from the different phase and possibly sightly different voltages?</em></p>
<p>No, there&#39;s no way the emonTx will ride through the generator running up. The other way, if the break is less than 20 ms, you stand a chance. What will happen is if the 3.3 V rail inside the emonTx falls below its minimum of 1.8 V, the processor will the emonTx will stop, then reboot as the voltage is restored and the emonTx will perform its power-up sequence. That in itself takes between 10 &amp; 20 s (though if you modify the sketch, that could be shortened as it incorporates various tests to determine what is connected, that you might not need).&nbsp; The different supply won&#39;t affect it. You&#39;ll lose data during the changeover, that&#39;s all. To get around that, you could supply the emonTx by battery, but there&#39;s no facility for it to recharge a battery on-board (nor could you easily add that as the power supply circuit design is critical to accurate voltage monitoring).</p>
<p><em>Transmitting to the RMF12B.&nbsp; The emonTX3 will be next to the breaker panel in the garage. The Raspberry with the receiver will be in a basement closet under the stairs. The Raspberry will be on a UPS power supply so it&#39;ll keep running during outages. The straight line distance is about 35-40 ft (~12 M). The signal will need to go through 2 2x6 exterior walls and 3 2x4 interior walls plus a floor (and perhaps some 8&quot; concrete walls rather than 2x6 - not at the house so not sure).</em></p>
<p><em>8)&nbsp; will the signal be be able to make it?</em></p>
<p>I can&#39;t promise that. There&#39;s reasonable evidence that it can get through 2 ft stone walls, so I&#39;m hopeful that it might.</p>
<p><em>9) should I consider using the SMA antenna and extend it closer to the Raspberry and eliminate some walls and floor?</em></p>
<p>Yes you should, but probably not initially. I&#39;d try it and see.</p>
<p><em>10) what is the maximum distance I can extend the SMA antenna?</em></p>
<p>Sorry, I&#39;m not a radio specialist, so I can&#39;t help with this. It depends on using the correct low-loss cable and the accuracy of the termination between the RFM12B and the socket. Some have expressed doubts as to the accuracy of the impedance match there. We&#39;ve found that with an antenna directly connected to the socket, there&#39;s no performance gain (<a href="http://wiki.openenergymonitor.org/index.php?title=EmonTx_V3#RF_Connectivity">see the Wiki</a>)</p>
<p><em>Assuming the radio won&#39;t work, serial connection between the emonTx3 and Raspberry</em></p>
<p><em>11) the distance I&#39;d need to run a serial cable line would be about 70-80 ft. Is that feasible?</em></p>
<p><em>12) with that long wire, and lightning, would I run the risk of killing the Raspberry due to induced currents from a nearby lightning strike? Isolation and how?</em></p>
<p><em>13) how many conductors would I need and what gauge wire?</em></p>
<p>I have not tried to do it, so I can&#39;t give you an answer to that.</p>
<p>General Q&#39;s</p>
<p><em>14) do I need the programming interface and mini USB cable?</em></p>
<p>You will in all probability need to adjust the calibration, so yes.</p>
<p>15) this is what I&#39;m planning to get. I already have the Raspberry. I&#39;ll pass on the emonGLCD for now and use emoncms pages.</p>
<p><em>a) 1x emonTX3</em></p>
<p><em>b) 4 WC1 CT&#39;s in either 1 or 2V</em></p>
<p><em>c) wall wart AC adapter to power emonTx3 and provide AC reference</em><br />
	&nbsp;&nbsp; and cable.</p>
<p>d) RFM12B</p>
<p><em>15a) I assume I need to create a different account to purchase?</em></p>
<p>Yes, you can&#39;t use this (forums) account.</p>
<p><em>15b) if I get a bundle what is the discount and when is it applied?</em></p>
<p>Any questions on this are best answered by the shop direct: <a href="mailto:sales@openenergymonitor.zendesk.com">sales@openenergymonitor.zendesk.com</a></p>
<p><em>16) what did I leave out? Anything else I need to know?</em></p>
<p>Have you got a RFM12Pi receiver for your Pi?</p>
<p><em>Emoncms Q&#39;s. I have already installed emoncms on the Raspberry. I&#39;ll add a power USB hub and a hard drive.</em></p>
<p><em>17) Can emoncms send emails based on events such as main power out or power on or usage goes above or below a threshold?</em></p>
<p>I believe there&#39;s an events module for that.</p>
<p><em>18) where do I set the calibration factors? Can I use a full month of use and get the KWH for the month and use that to derive calibration factors? I don&#39;t have an ampmeter and don&#39;t want to buy one for one time use. If so, how?</em></p>
<p>The word is ammeter! As I wrote above, the main calibration is per-channel in the emonTx. If you try to calibrate the way you suggest, it will give you an average (because of course you need to add the powers/energies of both legs) and in the short term, the accuracy (or maybe I mean repeatability) will depend on your usage pattern remaining the same. However, in the long term that will probably give you the best calibration. Others who have done that but on a UK single phase system, reckon they get better than 1% agreement between Emon and their meter. You could consider hiring a meter, and you might need one to calibrate the generator infeed.<br />
	You can add a calibration tweak as part of the emonCMS input processing - but it will be of no use unless the emonTx is able to process the numbers properly first.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22177"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6548.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="billvolz&#039;s picture" title="billvolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Tue, 24/06/2014 - 23:25.</div>
    <div class="content">
     <p>Thanks Robert for the info. A couple of follow up Q&#39;s</p>
<p>As for assumption of equal load across the two legs, good point. I don&#39;t know if the circuit breakers here trip if either leg is over 1/2 the rated amperage or if total amperage exceeds rated or both. I was also told be an electrician that they actually trip at about 90% of rated, probably for safety (and so the manufacturer doesn&#39;t get sued).</p>
<p>Rather than the Wattcore WC1&nbsp;CT, what would you suggest? The Magnelab&nbsp;SCT-1250-000 for 100A max to produce 1.6V (and assuming the winding ratio at 7500 is correct) would need a 120 ohm burden resistor, correct? If so that would then be a 1/2 watt, 1% resistor replacing the ones on the emonTX3? Why not use a SCT-0750 instead? Or can I use either?</p>
<p>One reason I like the WC1 is that it fits the 4/0 cable while the Magnelab&nbsp; 1250 is likely going to have a larger opening than the cable and is a larger form factor too. Would I need to build up the cable with some tape? The 0750 is closer.</p>
<p>When I typed RFM12B I meant RFM12PI so yes I&#39;d be getting that. I&#39;ll try the radio and see what happens.</p>
<p>Looks I&#39;ll be getting an ammeter for calibration. Not sure we can rent them here in the US but I might find a neighbor that has one.</p>
<p>Thanks,</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22468"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6548.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="billvolz&#039;s picture" title="billvolz&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/6548.html" title="View user profile.">billvolz</a> on Sat, 12/07/2014 - 04:57.</div>
    <div class="content">
     <p>A question on using a CT with 4/0 cable. I was at my local home center and saw the 4/0 cable - it has a red and black wire for the two hot wire, 180 degrees out of phase, a white common wire and a bare twisted wire for ground.</p>
<p>The question is what happens if I put a CT on this? It would seem &nbsp;that since the hot wires are 180 deg out of phase, that I&#39;d be measuring the difference in the amps in the two hot wires. Is that true? If not I need a CT that would fit over a wire about 1/4 inch in diameter rather than 3/4 inch.</p>
<p>Thanks,</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-22479"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 12/07/2014 - 11:26.</div>
    <div class="content">
     <p>You will see absolutely nothing (except extraneous pickup due to noise). Current flowing in any one of the live wires (line A leg, line B leg or neutral) exactly balances the vector sum of the currents in the other two, therefore the overall view of your cable is the nett current passing through the CT is zero, because the current has nowhere else to go (unless there is an earth fault somewhere, in which case it needs repairing - fast). The CT responds to the magnetic field around the bunch of conductors, and that should be non-existent.</p>
<p>You will need two CTs, one on each of the line legs of your supply (as discussed in most of the posts above) and you will sum the currents detected. The physical size of the CT opening doesn&#39;t matter, as long as the cable will pass through without damage.</p>
<p>(N.B. &quot;4/0&quot; cable means nothing to me - we specify cables by cross-sectional area - 16 mm<sup>2</sup> for example.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31836"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7515.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7515.jpg" alt="KWells&#039;s picture" title="KWells&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/7515.html" title="View user profile.">KWells</a> on Thu, 02/07/2015 - 01:01.</div>
    <div class="content">
     <p>Has anyone used the EmonTx to measures USA 240VAC split phase power using CT1 and CT2 and summing the power1 and power2 variables in the software sketch? I would prefer to use two CTs and modify the sketch instead of summing the CTs externally. Any help before I try this is greatly appreciated. Sincerely, Kevin</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31837"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Thu, 02/07/2015 - 01:33.</div>
    <div class="content">
     <p>Hi Kevin,</p>
<p>I have an emonTX v2 on a split-phase 240V system configured in the manner you&#39;re asking about. i.e the CT outputs are summed in the sketch. It&#39;s worked without any issues for almost two years.</p>
<p>Quoting a post by Robert Wall:<em> If you&#39;ve got a mix of loads, some 120 V and some 240 V, and the 120 V loads are not evenly balanced on the two legs, then you&#39;ve got to measure the two line currents, because they can and generally will be different, and you use the line-neutral voltage. Ideally, you&#39;d measure both line-neutral voltages, calculate the powers in the two halves of the supply separately and add them. But I&#39;m assured the voltage balance is good, so the error in assuming both voltages are the same is negligible.</em></p>
<p>Regards,</p>
<p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31838"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7515.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7515.jpg" alt="KWells&#039;s picture" title="KWells&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/7515.html" title="View user profile.">KWells</a> on Thu, 02/07/2015 - 02:31.</div>
    <div class="content">
     <p>Bill, Thank you for taking the time to reply. I will give it a try and add a power1+power2 variable to the emontx.struct and upload the sketch. Sincerely, Kevin</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39234"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Mon, 08/02/2016 - 22:03.</div>
    <div class="content">
     <p>Its been a while since anyone posted here, but hopefully the smart people are still monitoring....</p>
<p>I have read and read and read.... &nbsp;I had plenty of time while waiting for everything to arrive. &nbsp;I just want to make sure I have my burden resistors right. &nbsp;I am in the US and have 200A&nbsp;service, but NEVER pull near that (even though I realize its probably not even possible). &nbsp;On a typical day, I only use about 20kwh&nbsp;and the biggest pull is 16A each for the A/C (which has locked rotor amperage of 82A, but I&#39;ll probably just live with that small error) and car charger&nbsp;.</p>
<p>As a starting point, I got the WC1-80-MA100 CTs. &nbsp;I&#39;ll keep an eye on them, and if they saturate, I&#39;ll move up. &nbsp;If I am reading everything right, I should need 11 ohm as a burden resistor to get the full 1.1v at 100ma that the CT should put out at 80A.... &nbsp;Or, 1.1v/.1a = 11ohm. &nbsp;I was just going to add another 22ohm in parallel to the existing SMT. &nbsp;Do I need to factor in any overhead on those? &nbsp;I will monitor each leg incoming and combine the values in s/w. &nbsp;At this point, I&#39;m really only interested in hourly usage. &nbsp;The other two sensors probably will go unused. &nbsp;I suppose that once I get an idea of max current, I will probably adjust the burden resistors to get max accuracy.</p>
<p>I presume, since they are using a 1.1v reference, they are using the optional internal reference voltage on the arduino (I guess I should have said I have the emonTx shield). &nbsp;From all I read, that is the most accurate with the 8 bit AD converter.</p>
<p>Am I on point here, or do I need to get back in the books?</p>
<p><em>[Duplicate post deleted - Moderator.]</em></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39247"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 09/02/2016 - 00:21.</div>
    <div class="content">
     <p>A few mistakes, I&#39;m afraid. For best resolution, you need to increase that burden value a little. You should be aiming for about 1.6 V&nbsp;rms at the maximum current that you want to measure - that&#39;s 5 V p-p less some for component tolerances and headroom, as the Shield Arduino&nbsp;works on 5 V, not the 3.3 V that the emonTx itself uses. So more like 27&nbsp;&Omega;&nbsp;or better still&nbsp;30&nbsp;&Omega; wire-ended in parallel with the existing <strong>33&nbsp;&Omega;</strong>&nbsp;burden. (Always&nbsp;go down unless you can tolerate reducing your maximum current.)&nbsp;As Wattcore offer a 2 V output version, you should be OK on VA rating.</p>
<p>BTW, it&#39;s a 10-bit ADC, and the d.c. supply is the ADC maximum input voltage and the reference.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39251"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Tue, 09/02/2016 - 01:07.</div>
    <div class="content">
     <p>Thanks for the quick reply....</p>
<p>And the pointer on my mistake with the built-in resistor. &nbsp;Some of the other posts I read above seemed to say to aim for 1.1v, but I guess thats the difference in the Arduino&nbsp;reference voltage? &nbsp;Anyway, I&#39;ll be doing lots of trial and error, I presume, so mostly looking for the best place to start.</p>
<p>As for the ADC, yeah, I missed that too... &nbsp;I knew it was 1024 steps, but I didnt&nbsp;even bother to notice that was the wrong number of bits.... &nbsp;I cant subnet without a calculator either....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39264"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 09/02/2016 - 12:06.</div>
    <div class="content">
     <p>1.1 V rms is a good voltage to aim at for the emonTx, but not the emonTx Shield, for the reasons above. And the reference and supply voltages&nbsp;for the emonTx are 3.3 V. We no longer use the internal 1.1 V internal reference due to the uncertainty in its initial value. You&#39;ll&nbsp;find all the calibration data in Resources &gt; Building Blocks.</p>
<p>(N.B. Don&#39;t ever omit &quot;Shield&quot; when you&#39;re talking about the emonTx Shield, because it and the emonTx are quite different beasts.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39294"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Tue, 09/02/2016 - 23:47.</div>
    <div class="content">
     <p>Thanks for the warning on the name! &nbsp;If half the people who come here looking for answers are as confused as me, I dont want to muddy the waters!</p>
<p>TCs came today, so I guess I&#39;ll begin assembly. &nbsp;For now, without anything big running, I think I can just go with the built-in 33 ohm resistors, which should give me 1.6v at about 40A (right?). &nbsp;I&#39;m looking forward to picking through the code. &nbsp;In reality, to start, I&#39;m probably just looking for a 1 pulse per watt (or similar) signal. &nbsp;Before my meter got exchanged, I was monitoring using the status LED on the meter and had an arduino sketch that was converting the pulses from the IR LED into 3.3v pulses which my raspberry pi counted. &nbsp;Once I get it all going, I know I&#39;ll have a lot more data available to log....</p>
<p>I did want to add one thing. &nbsp;A while back in this thread, Bill mentioned having to trim WC1 CTs. &nbsp;I have what appears today to be standard XHHW-2&nbsp;service wire, 4/0 x 2. &nbsp;However, apparently due to improvements in insulation, the WC1 actually fits a little loose. &nbsp;I still measure the narrowest part of the opening as about 5/8&quot; (16mm). &nbsp;A chart I found said .588 for diameter vs the .62&quot; for the WC1 opening. &nbsp;No trimming required!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39295"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 10/02/2016 - 00:49.</div>
    <div class="content">
     <p>The 33&nbsp;&Omega; burden will give you just short of 40 A maximum current, but -&nbsp;if you use the emonLib library and our sketches on Github -&nbsp;you won&#39;t get pulses, you get (every 10 s by default) a number sent to your Pi (assuming you have a serial connection, either wired or by radio). You can run emoncms on your Pi if you wish. A hard disc is recommended for the full version, or the &#39;low write&#39; version can use an SD card.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39297"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Wed, 10/02/2016 - 03:07.</div>
    <div class="content">
     <p>Thanks.... &nbsp;I have a lot more studying to do in the building blocks...</p>
<p>I realize its not the way its set up to do pulses. &nbsp;I&#39;ll have to look it over. &nbsp;Dont have the serial stuff right now, but might give it a try. &nbsp;Doing the pulses the old way worked great for realtime processing, but I realize it might not work as well with all the other stuff. &nbsp;Still, I&#39;m doing all this mostly &quot;because its there&quot; so half the fun is trying something new....</p>
<p>Thanks again for all the help!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39298"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Wed, 10/02/2016 - 04:17.</div>
    <div class="content">
     <p><em>I have what appears today to be standard XHHW-2&nbsp;service wire, 4/0 x 2. &nbsp;However, apparently due to improvements in insulation, the WC1 actually fits a little loose.</em></p>
<p>Hi HD,</p>
<p>What you&#39;ve got is the <em>good stuff</em>. THHN is actually what&#39;s used most of the time, as it costs less than XHHW/XHHW-2. Hats off to the person who spec&#39;d your wiring!</p>
<p>Good to hear you didn&#39;t have to break out the X-Acto knife.</p>
<p>I take it from your forum user name you&#39;re a chopper pilot?</p>
<p>Regards,</p>
<p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39319"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Thu, 11/02/2016 - 01:11.</div>
    <div class="content">
     <p>Well, I have to assume it was a mistake on my electricians part, because I can assure you he WOULDN&#39;T have intentionally picked something more expensive (even if better)! &nbsp;Although, it was just a short run (20&#39;) due to installing a new base...</p>
<p>Just figured I would make the comment that the WC1s worked.... &nbsp;Might help someone down the line.</p>
<p>Things seem to be functioning, although I still need to fine tune calibrations. &nbsp;Like others, my preference is to mirror as closely as possible whatever the power company reads. &nbsp;I dont have any PV input (yet). &nbsp;Since I am on peak metering, I just want to tune our usage as much as possible, and still see where the car charger is running, etc. &nbsp;Although Dominion does provide a monthly download of usage in 30 minute intervals, just nothing &#39;real time&#39;.... &nbsp;So, since I USED to have it with my old meter, just trying to get that back again.</p>
<p>I do have a weird-ism tho, that one of my CTs is showing negative real power and power factor. &nbsp;When I turn it around, it shows positive values, but thats&nbsp;against what the flow direction on the CT indicates. &nbsp;I am fine with the solution, but curious about the problem.... &nbsp;I&#39;ll check in to it more.</p>
<p>@Bill, thanks for your help.... &nbsp;You&#39;re right. &nbsp;I was a UH-1 pilot from 90 to&nbsp;about 03. &nbsp;Sometimes I miss it, other times I dont&nbsp;miss the work!</p>
<p>Thanks to all for the help, and the great reference materials (Building Blocks)....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39320"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 11/02/2016 - 02:20.</div>
    <div class="content">
     <p><em>&quot;I do have a weird-ism tho&quot;&nbsp;</em><br />
Is that CT&nbsp;on the other leg of your supply? That would explain it (see Building Blocks again!), as would swapping tip and sleeve on the plug. But swapping the a.c. adapter would reverse all the powers, not just one.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39321"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Thu, 11/02/2016 - 03:48.</div>
    <div class="content">
     <p><em>he WOULDN&#39;T have intentionally picked something more expensive (even if better)! &nbsp;Although, it was just a short run (20&#39;) due to installing a new base...</em></p>
<p>Sounds like it might have been &quot;what was left on the spool&quot; from another job.</p>
<p><em>I was a UH-1 pilot from 90 to&nbsp;about 03. &nbsp;Sometimes I miss it, other times I dont&nbsp;miss the work!</em></p>
<p>I was a Avionics Navigation Systems tech on KC/RC-135s from 73 to 80. Like you, sometimes it&#39;s missed, other times not. Especially wintertime flightline work at Eielson AFB! (near Fairbanks, AK)</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39334"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Fri, 12/02/2016 - 00:55.</div>
    <div class="content">
     <p>Ok, I have everything running, with two CTs (one on each leg of my power)...</p>
<p>I have been through the building blocks, but with all due respect to the developers, it is a bit hard for me to differentiate what is US and what is UK... &nbsp;And some very minor differences in wording add to the confusion.... &nbsp;I&#39;m just a software (and budding hardware) guy with at most, one college semester in physics....</p>
<p>I am running the arduino shield on an Uno, using WC1-080-MA100&nbsp;CTs and the Ideal Power 77DA-10-09&nbsp;AC-AC adapter. &nbsp;I&#39;m running the emonTx Shield firmware version &quot;voltage_serialonly&quot;. &nbsp;The arduino is plugged into a Raspberry Pi 1 model B and for now I&#39;m just reading the serial by &quot;cat /dev/ttyACO0&quot;....</p>
<p>First off, I know there are accuracy issues all through the system, but my objective is to try and get as consistent as possible, then just adjust calibrations over time by comparing to actual power company meter readings. &nbsp;As previously mentioned, I&#39;m not trying to challenge the power company (or monitor net metering), only to replicate the readings they wil use to bill me.</p>
<p>First off, I&#39;m guessing that since I am using a wall wart, I dont&nbsp;need to do the internal reference voltage calibration. &nbsp;Just curious because it says this dramatically improves accuracy, but is optional for using mains power supply...</p>
<p>Second, I am using 130.0 for voltage calibration, but consistently off by&nbsp;about 1v&nbsp;from my meter reading, using a non-RMS&nbsp;multimeter. &nbsp;I&#39;m currently getting 121.2 and 122.6 on my two legs using multimeter (121.2 on the leg with the adapter).</p>
<p>I am using 24.24 as cal factor for current. &nbsp;This seems wild, but its at least CLOSE to the Irms&nbsp;I am getting out when compared to my clamp-on (again, non-RMS). &nbsp;I arrive at this value by using (80A/.1A)/33ohms=24.24.</p>
<p>Finally, all I REALLY am looking for is an accurate reading of watts consumed over a period of time. &nbsp;I think there is only one ADC in the Uno and there is some amount of time required to let things settle before taking readings. &nbsp;I saw there was at least some discussion about calculating consumption on the arduino, but havent dug in that far. &nbsp;Basically, I used to take hourly readings and keep track of how many kw were consumed and then sum up the various categories (super off-peak, off-peak, peak) in my billing plan.&nbsp;</p>
<p>I&#39;m assuming that the value returned in &#39;calcVI&#39; is an instantaneous reading. &nbsp;Thats fine. &nbsp;But how frequently can I run this to improve the accuracy, assuming that I could calculate that if I was getting 600 in &quot;realPower&quot; that over a 10 second period that would be 1.6 watts. &nbsp;Again, I presume the more samples I take, the more accurate that reading over a 60 minute period.</p>
<p>As I mentioned before, I used to use a phototransistor to read the pulses from my meter. &nbsp;There was 1000 pulses per KW. &nbsp;I know I probably have the units all messed up but I know what I am aiming at. &nbsp;And as I said, if I can just get values that are consistent (vs accurate), I can start messing with the CT calibration factor, or even program in a hard coded calibration. &nbsp;Over time, I can tweak it by comparing the meter values to the emon values... &nbsp;It wont be perfect, but I would hope that I&#39;d only need to &#39;re-center&#39; the emon values every week or month or something and still stay within a KW or two of the meter readings....</p>
<p>Does any of that make sense? &nbsp;And while I know that some of these settings are unique to this thread (&quot;Use in the US&quot;), maybe more appropriate for the specific Shield forum (which I have searched but not finding anything closely related to this &quot;US initialization&quot;)....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39347"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 12/02/2016 - 12:53.</div>
    <div class="content">
     <p>There are a few questions there. (Completely off-topic, noting Bill&#39;s earlier comments, I&#39;m a lapsed PPL - but I did all my flying with a fan on the front!).</p>
<p>First, everything on this site except the one article about use in N. America is directed towards the UK single phase system (where we generally have an earthed&nbsp;neutral and 240 V nominal at 50 Hz).</p>
<p>Calibrating the internal reference: The internal reference has an uncertainty of &plusmn;0.1 V in 1.1 V&nbsp; It&#39;s thought that the internal regulator in the emonTx is more precise than this - certainly that&#39;s true for the initial value, but I can&#39;t find data to establish which is better for&nbsp;the long-term <em>stability</em>. If your sketch says &quot;#if defined emonTxV3&quot; - which it won&#39;t and mustn&#39;t for the Shield, then the nominal 3.3 V supply voltage is used as the reference. In your case, the library uses the internal 1.1&nbsp;V reference to calibrate the 5&nbsp;V supply. (This is primarily for battery-powered applications, where the supply voltage changes markedly.) As you point out, there&#39;s only one ADC so the 1.1&nbsp;V reference being out&nbsp;affects all channels equally, and doesn&#39;t&nbsp;<em>have</em> to be calibrated, but doing so should make the individual voltage and current calibration factors come closer to the nominal values. As I think you&#39;ve seen, there&#39;s a BB page about where the errors come from, so you must expect a few percent differences. 1&nbsp;V in 120 is well inside what I&#39;d expect. So you can and should tweak the voltage and current calibrations as necessary.</p>
<p>If you really want watt-hours, then you need to change to a &#39;continuous&#39; sketch. The bad news there is there isn&#39;t one for the Shield and an emonTx one&nbsp;needs to be converted. The slightly worse news is there are problems with the emonLibCM library, which&nbsp;I&#39;m working on&nbsp;but had to stop for non-OEM stuff that takes&nbsp;priority. As you know, the &#39;discrete sample&#39; sketch uses calcVI( ), which reports the average over 10 cycles, repeating that measurement every 10 s approx. That&#39;s good enough over time if you don&#39;t have rapidly switching loads (because what you miss between samples averages out), but if you do have - say - an induction hob, then you really need the &#39;continuous&#39; sketch. This works much more like your meter, but it totals Wh continuously on a per-cycle basis, reporting the average power over the previous 10&nbsp;s every 10&nbsp;s.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39378"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Sat, 13/02/2016 - 13:41.</div>
    <div class="content">
     <p>Well, not to pander, but I flew both airplanes and helicopters.... &nbsp;So I certainly appreciate the compulsion with both.... &nbsp;:-)</p>
<p>I should explain my long post. &nbsp;The way I figure, there are 3 (or more, if I missed one) variables. &nbsp;The voltage, CT and internal reference calibrations. I realized how hard it was going to be to tweak all three, so I wanted to nail down two as well established, and then tweak the third. &nbsp;After I posted, I did a little thinking and realized that my &#39;error&#39; of less than 1% was pretty damn good for the AC-AC factor.</p>
<p>This will probably be pretty crazy, but here&#39;s what I did today. &nbsp;I have the standard sketch loaded (from emonTxFirmware on github), but it seems to be what I see around. &nbsp;Set the calibrations, do the calcVI and work with the numbers. &nbsp;I realize its a calculus problem, but I took out the delay and do as many samples as I can in a 30 second period. &nbsp;With one CT, it was right at 58 samples per 30 seconds, no idea since I added the second. &nbsp;I average the real power from those samples over the 30 second period and divide by the period of time. &nbsp;I compared the captures over a 90 minute period against a kill-a-watt and its actually pretty close!</p>
<p>I&#39;ll post all the code from this when I get more time (and clean it up a little).</p>
<p>So I print the number of watts used over the 30 second period to serial and capture it using the raspberry pi the arduino is plugged in to. &nbsp;I try to stay on 30 second intervals by calculating how many milliseconds to the next 30 second interval (so my readings are made at 30000, 60000, 90000 millis&nbsp;etc). &nbsp;I&#39;m still getting a little drift, about 3 seconds over a six hour period so far. &nbsp;But there is much to clean up on that loop. &nbsp;I also realized while pondering that while I am figuring my average over say a 29 second period because of some processor overhead, I need to calculate usage over 30 seconds (instead of the 29 seconds).</p>
<p>Just to kind of show where my thinking is. &nbsp;I use a python script to read the serial data, then call a netcat procedure to transfer to another Pi where I accumulate the values and do whatever processing (snapshots of peak/off-peak usage) etc. &nbsp;I have a shell script that reads the netcat on the receiving end and inserts the &#39;readings&#39; into the process I was using back when I had a pulse reader. &nbsp;All in all, its just an elaborate scheme to get that data stream back.</p>
<p>Again, thinking about it, this kind of cries out for a timer with interrupts, but I need to do some more figuring on that.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39380"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 13/02/2016 - 20:34.</div>
    <div class="content">
     <p><em>&quot;I took out the delay and do as many samples as I can in a 30 second period&quot;</em></p>
<p>Er... &nbsp;Actually, that&#39;s pretty close to what the &#39;continuous&#39; sketches do. But they&#39;re a bit cleverer and let the ADC free-run, so they get a lot more samples per second than the calcVI( ) method that uses analogRead( ). If I remember correctly, the timing between reports is taken from the mains cycle count.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39391"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sat, 13/02/2016 - 22:16.</div>
    <div class="content">
     <p>The other big advantage of free-running mode is that it&#39;s jitter-free. &nbsp;You can have long code paths and short code paths, and it doesn&#39;t matter. &nbsp;Those ADC samples will come in every 104&nbsp;usecs no matter what your code is doing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-39396"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Sat, 13/02/2016 - 23:14.</div>
    <div class="content">
     <p>Thats what I&#39;m going to have to read up on. &nbsp;I saw in the calcVI code that I think there was a timer in there to let the line settle once its connected to the ADC. &nbsp;All that is very new to me, so I have more reading to do.</p>
<p>I was actually thinking of somehow just branching off the emonTX shield into another arduino and dedicating one each to the CTs. &nbsp;I pick up arduinos when they are sale here and can usually get them for $5(US). &nbsp;I probably have 3 or 4 spares sitting in my project boxes...</p>
<p>I have one question that will help save me a few minutes of research (or trial and error). &nbsp;If my shield is reading a little lower than actual, which way would I adjust the CT calibration (assuming voltage remains at 130)? &nbsp;It seems I saw a little bump up in my readings when I dropped the calibration from 24.24 to 24.00....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40142"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Sun, 06/03/2016 - 19:22.</div>
    <div class="content">
     <p>Its been a bit since I posted, but I figured I would add some observations&nbsp;here in case it would help anyone.</p>
<p>Once installed, everything worked fine. &nbsp;The sketch is intuitive, although the calculations are beyond my understanding, so, I just accept them. &nbsp;Running with two CTs, which means I instantiate&nbsp;EnergyMonitor&nbsp;twice, I found that my loop was taking 8 samples in my 30 second period, 4 samples per CT. &nbsp;This is MUCH worse than the 58 I was getting using 1 CT, probably due to the wait required when changing the ADC input. &nbsp;So, while a sample every 8 seconds isnt bad, its going to induce some error.</p>
<p>I really think what I might try is soldering the CTs together and using free-running. &nbsp;I have read up on it and it seems like it would be fairly easy, not withstanding having to brush up on interrupts. &nbsp;I dont want to bastardize this great project, but in reality, the shield was the best option I saw. &nbsp;I read some articles on building my own, but I figured the best thing to do would be to take the hardware out of the equation when I jumped in.</p>
<p>I have been using 130.0 as the voltage calibration, but calculating kwh usage about 10% high. &nbsp;Again, I realize there are lots of variables in the loop, but my usage is fairly consistent, so if I get numbers that work for me, thats fine as a start. &nbsp;I&#39;ll figure the variables out later. &nbsp;I adjusted the calibration down to 123 and was accurate to about 0.5% (over about 48&nbsp;hours). &nbsp;I know &#39;technically&#39; this isnt achievable, but again, my objective is to read the same as my meter, so however I get there (including &#39;predicting&#39; normal usage) works for me.</p>
<p>I dont want to clog up the forums, but would be happy to have an off-line discussion if anyone else is interested. &nbsp;I just post this here in case there is someone out there looking for the same answers as me....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40145"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 06/03/2016 - 22:52.</div>
    <div class="content">
     <p>The bad news is I&#39;m still working on the CM Library. I&#39;ve actually got back onto it this weekend, so there is movement. The CM Library as it was published after being derived from Robin&#39;s diverted sketches has bugs and is inaccurate, so I advise that you&nbsp;don&#39;t waste time on it until I offer it for testing.</p>
<p>&quot;<em>I really think what I might try is soldering the CTs together and using free-running.&quot;</em><br />
Is what you&#39;re saying there &quot;It&#39;s faster to do the addition in the wires&nbsp;than in software&quot;? If so, I totally agree!</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40186"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9447.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="hueydriver&#039;s picture" title="hueydriver&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/9447.html" title="View user profile.">hueydriver</a> on Wed, 09/03/2016 - 00:18.</div>
    <div class="content">
     <p>If I can help or test, let me know. &nbsp;I have some very vague ideas on what I would try, but havent even put them to paper yet. &nbsp;Still mulling it.</p>
<p>Since you agree, I guess it would work? &nbsp;As soon as I hit send, I wondered if the &#39;phase&#39; difference on US 220v&nbsp;would cancel each other out, or if combining the CTs would be &#39;cumulative&#39;. &nbsp;I presume its the latter.</p>
<p>Originally my inclination was to keep things separate, but the more I thought about it, the more I realized that there really was nothing quite so useless as knowing my total power consumption on each leg (main). &nbsp;About all it could tell me is if my panel was balanced which I can find out any time with my multimeter. &nbsp;And I know it probably isnt very well balanced as I have a 120v&nbsp;generator backup and put the more critical items (internet, TV, beer fridge) on the leg with the backup!</p>
<p>At first I kind of gave thought to buying another shield and running both shields in free running mode and combining values on my pi, but the thought of syncing up the two (so I was combining the same time frame) made my head hurt. &nbsp;Syncing up two &#39;real-time&#39; microprocessors and a task scheduling service just seems a bit much right now....</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40188"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 09/03/2016 - 00:56.</div>
    <div class="content">
     <p>Have you not read the page about use in N.America? I think your answer is in there.</p>
<p>How many inputs&nbsp;do you need if you&#39;re looking at 2 emonTx&nbsp;Shields? &nbsp;</p>
<p>If you run the CM sketch, you&#39;ll be taking a set of 3 samples (one V, two I) every 3 &times; 104 &mu;s, so you&#39;ll get approx. 53 sample sets per cycle - continuously. That, according to Nyquist, means you should see up to the 25th harmonic.</p>
<p> If you use the other 2 inputs, you&#39;ll be taking a set of 5 samples (one V, four I) every 5 &times; 104 &mu;s, so you&#39;ll get approx. 32 sample sets per cycle.</p>
<p>Thanks for the offer to test - I'll try to remember who it was!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40849"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Use in the US </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 03/04/2016 - 12:11.</div>
    <div class="content">
     <p><strong>For anyone waiting for&nbsp;the &#39;continuous monitoring&#39; library emonLibCM</strong></p>
<p>There is&nbsp;more bad news regarding the re-release of this library. As testing progresses, yet more serious shortcomings in the conversion and expansion of Robin&#39;s original code into this library are being revealed. I am unable at this juncture to even estimate when a proven version could be released for testing.</p>
<p>So&nbsp;I reiterate: the CM Library as it was published has serious bugs and is inaccurate, so I must&nbsp;advise against its use.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3265"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-zwfl59HYOvVjwhq8LhDBvaFRFjYPNg-Tdf5GvLgIWaE" value="form-zwfl59HYOvVjwhq8LhDBvaFRFjYPNg-Tdf5GvLgIWaE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/3265 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:19:22 GMT -->
</html>
