<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3675 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:47:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Post EMONCMS value to PVOUTPUT | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Post EMONCMS value to PVOUTPUT</h3>
        <span class="submitted">Submitted by <a href="../user/1513.html" title="View user profile.">nerdy</a> on Sun, 19/01/2014 - 05:20</span>
        <div class="content"><p>Hi all, I had a bit of a play around with some PHP yesterday and came up with a very basic script that reads to current value from EMONCMS and uploads it to your PVOUTPUT system. I just run it using cron on my NAS every 5 minutes. I tried to run it from my shared hosting but they have blocked shell_exec and I ended up going crosseyed&nbsp;trying to get curl to do the same thing. Even thought the values aren&#39;t averaged over the 5 minute period the results are very similar between Emoncms and PVOutput.&nbsp;</p>
<p>Just add the info as required and give it a go. Please note that this doens&#39;t include any error checking or debugging. It&#39;s my first attempt :)</p>
<p>My system is here&nbsp;http://www.pvoutput.org/intraday.jsp?id=12278&amp;sid=10211</p>
<p><a href="https://www.dropbox.com/s/s8qvbqkhi3g3ko9/pvoutput_total_power_public.php" title="https://www.dropbox.com/s/s8qvbqkhi3g3ko9/pvoutput_total_power_public.php">https://www.dropbox.com/s/s8qvbqkhi3g3ko9/pvoutput_total_power_public.php</a></p>
<p>If anybody can help with an alternative to shell_exec it would be greatly appreciated.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12308.html" class="topic-previous" title="Go to previous forum topic">‹ Creating kWh per day bar graphs from Accumulating kWh </a>
              <a href="12304.html" class="topic-next" title="Go to next forum topic">(SOLVED) Inputs page loading.... ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-17737"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sun, 19/01/2014 - 08:45.</div>
    <div class="content">
     <p>Hi Nerdy,</p>
<p>Here&#39;s what I use. It&#39;s a rework of a script originally written by forum member nothing clever.</p>
<p>The rewrite was done by ngbod. Although I didn&#39;t modify my rc.local startup script, it works as it&#39;s supposed to. (for me anyway) It&#39;s a modified raspberrypi_run.php file, and is a drop-in replacement.</p>
<p>The file is in the thread here: <a href="2293.html" title="http://openenergymonitor.org/emon/node/2293">http://openenergymonitor.org/emon/node/2293</a></p>
<p>Search for:</p>
<pre>
raspberrypi_run.php_.txt</pre><p>(that&#39;s how it&#39;s named in the post)</p>
<p>&nbsp;</p>
<p>regards,</p>
<p>Bill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17740"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Sun, 19/01/2014 - 10:49.</div>
    <div class="content">
     <p>Nerdy, thanks for posting this.</p>
<p>I think your way of uploading to pvoutput&nbsp;will be preferable to the way I have been doing it as it doesn&#39;t mess with core emoncms files like raspberry_run.php. &nbsp;</p>
<p>Your way should survive a major update to emoncms or at least be trivial to add back in after an update.</p>
<p>Maybe this could be added as an emoncms&nbsp;&quot;Module&quot;?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17762"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Mon, 20/01/2014 - 08:06.</div>
    <div class="content">
     <p>Nerdy,</p>
<p>Gave your script a go, and it worked OK for me with the &#39;exec&#39; call (instead of shell_exec).</p>
<p>The only other thing I did was use the -s switch with curl.</p>
<p>-s (silent mode) keeps it from sending any output to the console.</p>
<p>Definitely agree with ngbod though, it&#39;ll be a lot easier to re-implement after an upgrade.</p>
<p>&nbsp;</p>
<p>EDIT:</p>
<p>I added</p>
<pre>
if ($tpower &lt; 20)

  exit;</pre><p>to stop the script from sending data when PV output falls below 20 Watts.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17769"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1513.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="nerdy&#039;s picture" title="nerdy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/1513.html" title="View user profile.">nerdy</a> on Mon, 20/01/2014 - 12:30.</div>
    <div class="content">
     <p>Excellent, glad people find it at least a little useful. Mine has been running great. The module sounds like a great idea.&nbsp;</p>
<p>I will try replace shell_exec with exec Bill and give it a go on my shared hosting instead of my NAS.&nbsp;</p>
<p>I was just browsing through some of the posts on this forum and was wondering if I could incorporate Trystan&#39;s&nbsp;post here to try and get 5 min averages send instead of instantaneous values.</p>
<p><a href="3666.html" title="http://openenergymonitor.org/emon/node/3666">http://openenergymonitor.org/emon/node/3666</a></p>
<p>Is this achievable?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17829"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ngbod&#039;s picture" title="ngbod&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/3824.html" title="View user profile.">ngbod</a> on Wed, 22/01/2014 - 11:02.</div>
    <div class="content">
     <p>Nerdy, I have edited your script to add in other feeds to send to pvoutput as well. I&#39;ve been using this script for the last couple of days and it seems to be working well so far.</p>
<p>With regards to averaging, I am now sending Wh/d energy generated figures to pvoutput V1 feed. This way V1uses an averaged emoncms&nbsp;feed value instead of allowing&nbsp;pvoutput&nbsp;to calculate the daily energy generated from the 5 minute spot power feed. &nbsp;</p>
<p>IMO as long as the daily energy generated is accurately derived, then the 5 minute spot power figures are more than good enough to &nbsp;depict the power graphically.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-20537"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Sun, 06/04/2014 - 21:25.</div>
    <div class="content">
     <p>I modified ngbod&#39;s pvoutput upload script by replacing the exec(curl...) line with the code snippet below.</p>
<p>This shortens the line and simplifies the quoting. Additional variables, e.g. temperature are easily added by including them in the CURLOPT_POSTFIELDS string.</p>
<p>$ch = curl_init();// curl handle<br />
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // same as -s (silent) option<br />
curl_setopt($ch, CURLOPT_URL, &#39;http://pvoutput.org/service/r2/addstatus.jsp&#39;);<br />
curl_setopt($ch, CURLOPT_POSTFIELDS, &quot;d=$date&amp;t=$time&amp;v2=$GENERATED&amp;v4=$CONSUMPTION&amp;v6=$VOLTAGE&quot;);<br />
curl_setopt($ch, CURLOPT_HTTPHEADER, array(&quot;X-Pvoutput-Apikey:$pvo_api&quot;,&quot;X-Pvoutput-SystemId:$pvo_sysid&quot;));<br />
curl_setopt($ch, CURLOPT_POST, 1);<br />
curl_exec&nbsp; ($ch);<br />
curl_close ($ch);</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23221"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6745.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="normosb&#039;s picture" title="normosb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/6745.html" title="View user profile.">normosb</a> on Wed, 20/08/2014 - 05:56.</div>
    <div class="content">
     <p>I edited the php file with my pvoutput key, system id and url for local emoncms&nbsp;instance etc and placed it in/var/www/emoncms/&nbsp;</p>
<p>I tested with php&nbsp;/var/www/emoncms/pvoutput.php command. executed with no errors, no output &nbsp;and did not add the temperature to pvoutput. Temperature was the only feed i enabled in the php file.</p>
<p>Am i missing somethere&nbsp;here? should i get any output if i execute php&nbsp;as above?&nbsp;</p>
<p>Thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23224"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4277.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4277.jpg" alt="warlock&#039;s picture" title="warlock&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/4277.html" title="View user profile.">warlock</a> on Wed, 20/08/2014 - 07:52.</div>
    <div class="content">
     <p>if I am not mistaken you need to pass the option -f &nbsp;like this</p>
<p>&nbsp;</p>
<p>php&nbsp;-f /var/www/emoncms/pvoutput.php</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26809"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4180.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Wombatsev&#039;s picture" title="Wombatsev&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/4180.html" title="View user profile.">Wombatsev</a> on Sat, 17/01/2015 - 08:12.</div>
    <div class="content">
     <p>Hi All</p>
<p>Thanks to all that have contributed to this thread and the development of the PVoutput.org script.</p>
<p>I thought I would just add a note regarding an issue I had whilst implementing it. The data would not load in the variables and returned with &quot;false&quot;. It turned out the only feeds that would work were ones that were public.</p>
<p>I found that adding &quot;&amp;apikey=MY_EMONCMS_READ_API_KEY&quot; to the json request fixed the issue. Like this</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http ://url_of_EMONCMS/emoncms/feed/value.json?id=8&amp;apikey=MY_EMONCMS_READ_API_KEY</p>
<p>I was hitting my local EMON install.</p>
<p>Hope this helps and that is not too confusing.</p>
<p>Cheers</p>
<p>Mark 7</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-26812"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 17/01/2015 - 13:03.</div>
    <div class="content">
     <p>You need the API key for any writes to the database that originate outside the machine that physically holds the data. (Else anyone and his dog could send data to your database!)<br />
And similarly to read from it (privacy? - you don't want anyone to be able to infer what you're doing and when).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27117"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7561.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7561.jpg" alt="grantwatson&#039;s picture" title="grantwatson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/7561.html" title="View user profile.">grantwatson</a> on Mon, 26/01/2015 - 20:42.</div>
    <div class="content">
     <p>Hi All,</p>
<p>I have managed to get a script working great from the command line, however it does not appear to work from Crontab.</p>
<p>I have added it into root&#39;s crontab to run every 5 minutes. nothing updates on the pv output website.</p>
<p>Thoughts?</p>
<p>///Double post deleted - Paul\\\</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27133"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Tue, 27/01/2015 - 03:00.</div>
    <div class="content">
     <p>Hello Grant,</p>
<p>Have you tried using the fully qualified path name to your script, in your crontab?</p>
<p>Are you running your cron job as the system user, or as the root user?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27136"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7561.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7561.jpg" alt="grantwatson&#039;s picture" title="grantwatson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/7561.html" title="View user profile.">grantwatson</a> on Tue, 27/01/2015 - 05:05.</div>
    <div class="content">
     <p>Hi,</p>
<p>crontab entry is as follows</p>
<p>0,5,10,15,20,25,30,35,40,45,50,55 * * * *&nbsp; root&nbsp;&nbsp;&nbsp; /usr/bin/php -f /var/www/emoncms/pvoutput.php</p>
<p>Running it as root.<br />
&nbsp;an entry appears in syslog to say its run.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27137"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7561.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-7561.jpg" alt="grantwatson&#039;s picture" title="grantwatson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/7561.html" title="View user profile.">grantwatson</a> on Tue, 27/01/2015 - 05:10.</div>
    <div class="content">
     <p>now i print the crontab out i see the error, fixed thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33536"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8541.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Toberwine&#039;s picture" title="Toberwine&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/8541.html" title="View user profile.">Toberwine</a> on Tue, 22/09/2015 - 21:50.</div>
    <div class="content">
     <p>Hi can someone tell me exactly how to get my Emonpi to upload data to pvoutput? I have no idea what to do with scripts, I just access the Emonpi&nbsp;using my web browser.</p>
<p>Update - I have now figured out how to get data from my Emonpi uploaded to emoncms.org. I&#39;d love to have the functionality of being able to automate data uploading to pvoutput.org!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40148"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8729.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Peter Galbavy&#039;s picture" title="Peter Galbavy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Post EMONCMS value to PVOUTPUT</h3>

    <div class="submitted">Submitted by <a href="../user/8729.html" title="View user profile.">Peter Galbavy</a> on Mon, 07/03/2016 - 15:01.</div>
    <div class="content">
     <p>My very quick and dirty perl script is attached. You need to edit the API keys, the system ID and the feeds and as I use my own emoncms server the root URL of the emoncms system to get the data from.</p>
<p>Comments welcome, but this is very hacky. I run it every 5 minutes from cron and that&#39;s it. Works for me.</p>
<p>Note that cumulative values (which this script uses for the consumption kWh) only really start working from the next midnight as the pvoutput system uses the first value of the day as the starting point for the consumption.</p>
<p>I tried using &quot;live&quot; consumption but that would have required keeping track of power consumed between posting intervals. It was easier to let them calculate it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3675"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-R4ACizkmf_jTkpoldfc6N9DrWM5CPgdnF-lUAki-NEk" value="form-R4ACizkmf_jTkpoldfc6N9DrWM5CPgdnF-lUAki-NEk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
