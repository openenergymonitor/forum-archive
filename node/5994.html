<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5994 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:27:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emoncms over https [Solved} | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emoncms over https [Solved}</h3>
        <span class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sat, 25/10/2014 - 21:32</span>
        <div class="content"><p>As IoT develops, and emoncms&nbsp;becomes a player in MQTT, the issue of security is becoming more important, so I&#39;ve got a freebie SSL certificate (being a Yorkshireman!)&nbsp;from&nbsp;<a href="https://www.startssl.com/">https://www.startssl.com/</a> and am enabling https for both servers.<br />
Node-red has https options built in, so it was pretty easy to implement, and my apache&nbsp;server&nbsp;likewise.</p>
<p>However emoncms&nbsp;does not take kindly to https, and the only page which opens is the &#39;Account&#39; landing page, all other menu items create a 404 error.</p>
<p>I see that a <a href="354.html">patch was implemented</a> almost 3 years ago into index.php but there is no mention of it now (has it got lost in the revisions?</p>
<p>Has anyone had any success using emoncms over a secure connection?</p>
<p>&nbsp;</p>
<p>Paul</p>
  <div class="forum-topic-navigation clear-block">
          <a href="6006.html" class="topic-previous" title="Go to previous forum topic">‹ What is the node ID if using direct serial connection</a>
              <a href="3919.html" class="topic-next" title="Go to next forum topic">Debian packaging emoncms &amp; modules ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-24796"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms over https [Solved}</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Sun, 26/10/2014 - 02:14.</div>
    <div class="content">
     <p>I haven&#39;t sorry Paul but I am interested in this, for the same reasons as you. Did you follow a guide for setting up your certificate on Apache? I have already obtained a certificate from startssl, like you, but am pretty lost as to how to configure my web server...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24799"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6952.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bond79&#039;s picture" title="bond79&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms over https [Solved}</h3>

    <div class="submitted">Submitted by <a href="../user/6952.html" title="View user profile.">bond79</a> on Sun, 26/10/2014 - 08:19.</div>
    <div class="content">
     <p>I have my local emoncms working in https with a self-signed SSL certificate on debian/apache2 and I haven&#39;t noticed any problems, with the website or posting new data. I haven&#39;t changed anything particular regarding the emoncms installation.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24800"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms over https [Solved}</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 26/10/2014 - 09:25.</div>
    <div class="content">
     <p>bond79 - did you change to https before or after installing emoncms?<br />
I suspect the the former.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24802"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6952.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bond79&#039;s picture" title="bond79&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms over https [Solved}</h3>

    <div class="submitted">Submitted by <a href="../user/6952.html" title="View user profile.">bond79</a> on Sun, 26/10/2014 - 09:42.</div>
    <div class="content">
     <p>Yes, I had https installed before and used the https url to setup emoncms.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24803"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms over https [Solved}</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 26/10/2014 - 10:05.</div>
    <div class="content">
     <p>In that case, it's possibly URLs saved in MYSQL that is causing issues.<br />
I'm aware that emoncms does use absolute URLs for certain functions instead of relative URLs, such as graphs, So maybe need to have a look around the MYSQL table and see if I can spot any URLs needing updating that would affect the config.</p>
<p>Ben - I'll post something about https setup when I get home this evening.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24806"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6952.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bond79&#039;s picture" title="bond79&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms over https [Solved}</h3>

    <div class="submitted">Submitted by <a href="../user/6952.html" title="View user profile.">bond79</a> on Sun, 26/10/2014 - 10:50.</div>
    <div class="content">
     <p>The absolute URL is indeed used in the dashboard settings in MySQL when referring to embedded graphs. I didn&#39;t find any other references. These of course should be changed to allow dashboard to function properly but I don&#39;t think it&#39;s the problem.</p>
<p>The 404 problems make me suspect that the https virtualhost of apache is not setup correctly to allow .htaccess rewrites. Https and http use seperate virtualhost entries and it must be configured seperately for the emoncms directory or the whole server.<br />
&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24807"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms over https [Solved}</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Sun, 26/10/2014 - 11:45.</div>
    <div class="content">
     <p>I&#39;ve changed the default-ssl file from;</p>
<p>
&lt;Directory /&gt;<br />
&nbsp; &nbsp; Options FollowSymLinks<br />
&nbsp; &nbsp; AllowOverride None<br />
&lt;/Directory&gt;<br />
&lt;Directory /var/www&gt;<br />
&nbsp; &nbsp; Options Indexes FollowSymLinks MultiViews<br />
&nbsp; &nbsp; AllowOverride None<br />
&nbsp; &nbsp; Order allow,deny<br />
&nbsp; &nbsp; allow from all<br />
&lt;/Directory&gt;</p>
<p>to</p>
<p>&lt;Directory /&gt;<br />
&nbsp; &nbsp; Options FollowSymLinks<br />
&nbsp; &nbsp; AllowOverride <strong>All</strong><br />
&lt;/Directory&gt;<br />
&lt;Directory /var/www&gt;<br />
&nbsp; &nbsp; Options Indexes FollowSymLinks MultiViews<br />
&nbsp; &nbsp; AllowOverride <strong>All</strong><br />
&nbsp; &nbsp; Order allow,deny<br />
&nbsp; &nbsp; allow from all<br />
&lt;/Directory&gt;</p>
<p>And now it works fine, and I can access all of the emoncms&nbsp;links over https.&nbsp;</p>
<p>I just need to access phpmyadmin and change the dashboard column to &#39;https&#39; instead of &#39;http&#39; and try to find a way of getting rid of the Gravatar&nbsp;link&nbsp;from the &#39;account&#39; page as the&nbsp;link is an insecure resource and affects the secure certification. Does anyone really use the gravatar feature anyway - I don&#39;t think it&#39;s even documented anywhere or mentioned in the forums...?</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-24825"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emoncms over https [Solved}</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Mon, 27/10/2014 - 09:03.</div>
    <div class="content">
     <p>For info, I've documented the whole process in this post - <a href="5997.html" title="http://openenergymonitor.org/emon/node/5997">http://openenergymonitor.org/emon/node/5997</a></p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5994"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-CPIneUPOAYiCjc-f006bKaQ5Kyot10jFix5asONPN5Y" value="form-CPIneUPOAYiCjc-f006bKaQ5Kyot10jFix5asONPN5Y"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
