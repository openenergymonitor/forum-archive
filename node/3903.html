<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3903 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:43:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Raspberry Pi + Open Energy Monitor Setup Problems | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Raspberry Pi + Open Energy Monitor Setup Problems</h3>
        <span class="submitted">Submitted by <a href="../user/5621.html" title="View user profile.">ebob</a> on Sun, 23/02/2014 - 04:46</span>
        <div class="content"><p>Hi,</p>
<p>Just purchased the following in order to log electrical consumption data and running into problems getting the system working.</p>
<p>- EmonTx V3 (433Mhz) - 1x CT and AC adapter</p>
<p>- EmonBase via Raspberry Pi &amp; RFM12Pi @ 433Mhz</p>
<p>I have followed the steps here to set it up using the ready to go SD card &amp; gateway - <a href="http://emoncms.org/site/docs/raspberrypigateway" title="http://emoncms.org/site/docs/raspberrypigateway">http://emoncms.org/site/docs/raspberrypigateway</a></p>
<p>Problem(s):</p>
<p>- Don&#39;t seem to be logging anything to emoncms.org</p>
<p>- Green LED on RFM12Pi does not come on/flash (apart from when powered on).</p>
<p><strong>EmonTx</strong></p>
<p>CT and/or AC adaptor plugged and powered via a USB DC power source.</p>
<p>I note that the red LED (near the USB connector) only ever flashes approximately every 5s.&nbsp; Isn&#39;t this meant to be solid initially and then flash?</p>
<p>Is there a way to check the configuration of the EmonTx or to rule out if it is/isn&#39;t OK?</p>
<p><strong>RFM12Pi</strong></p>
<p>Is there any way to test this without a working EmonTx?&nbsp; Want to make sure this is setup OK and is talking to emoncms.org.</p>
<p>I&#39;ve installed the minicom driver and the default settings are as follows:</p>
<p>&gt;minicom -b 9600 -o -D /dev/ttyAMA0</p>
<p>Available commands:<br />
	&nbsp; 123 x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Toggle configuration change protection, 1=Unlocked<br />
	&nbsp; &lt;nn&gt; i&nbsp;&nbsp;&nbsp;&nbsp; - set node ID (standard node ids are 1..26)<br />
	&nbsp; &lt;n&gt; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set MHz band (4 = 433, 8 = 868, 9 = 915)<br />
	&nbsp; &lt;nnn&gt; g&nbsp;&nbsp;&nbsp; - set network group (RFM12 only allows 212, 0 = any)<br />
	&nbsp; &lt;n&gt; c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - set collect mode (advanced, normally 0)<br />
	&nbsp; ...,&lt;nn&gt; a - send data packet to node &lt;nn&gt;, with ack<br />
	&nbsp; ...,&lt;nn&gt; s - send data packet to node &lt;nn&gt;, no ack<br />
	&nbsp; &lt;n&gt; l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - turn activity LED on DIG8 on or off<br />
	Current configuration:<br />
	79 i15 g210 @ 433 MHz&nbsp; Lock: 1</p>
<p>How do I change the node ID to 10 and get it to stay at that?&nbsp; I assume this is the standard for the the EmonTx?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="4057.html" class="topic-previous" title="Go to previous forum topic">‹ Burden Resistor Value.</a>
              <a href="3746.html" class="topic-next" title="Go to next forum topic">USB RFM12 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-18675"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1741.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1741.jpg" alt="ukmoose&#039;s picture" title="ukmoose&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/1741.html" title="View user profile.">ukmoose</a> on Sun, 23/02/2014 - 10:19.</div>
    <div class="content">
     <p>The good news is that your RFM12Pi is configured correctly. &nbsp;The current configuration you are reading there is the settings of the RFM12Pi. &nbsp;The standard ID for that is 15 which is what you can see.</p>
<p>I&#39;m guessing that if you stay looking at minicom you don&#39;t see any other lines of data appearing?</p>
<p>If so the problem you have is on the EmonTX. &nbsp;</p>
<p>So there are a couple of initial things to check.</p>
<p>1) Which plug are you plugging the CT into? &nbsp;Are you doubly sure you have it all the way in? (they can be very stiff!)</p>
<p>2) You don&#39;t say if you went for the&nbsp;fully built or the PCB version. &nbsp;If you went of the PCB version and soldered on the RFM12&nbsp;unit, the first step is to check your soldering.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18708"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5621.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ebob&#039;s picture" title="ebob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/5621.html" title="View user profile.">ebob</a> on Mon, 24/02/2014 - 11:24.</div>
    <div class="content">
     <blockquote><p>I&#39;m guessing that if you stay looking at minicom you don&#39;t see any other lines of data appearing?</p>
</blockquote>
<p>I see the following, sorry should have been a bit more patient..&nbsp;</p>
<p><img alt="" src="../sites/default/files/minicom_0.png" style="width: 629px; height: 384px;" /></p>
<blockquote><p>1) Which plug are you plugging the CT into?&nbsp; Are you doubly sure you have it all the way in? (they can be very stiff!)</p>
</blockquote>
<p>I&#39;ve tried CT1, CT2 and CT4 (only have 1 sensor).&nbsp; Have got it plugged fully in.&nbsp;</p>
<blockquote><p>2) You don&#39;t say if you went for the fully built or the PCB version.&nbsp; If you went of the PCB version and soldered on the RFM12 unit, the first step is to check your soldering.</p>
</blockquote>
<p>Got the fully built version.</p>
<p>Let me know if you need anymore information.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18758"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 25/02/2014 - 14:07.</div>
    <div class="content">
     <p>Have you got a USB to UART cable? Using this cable you should be able to read the serial output of the emonTx&nbsp;V3 (default 9600 baud). This output will help us debug further&nbsp;</p>
<p>The CT needs to be plugged in before powering on the emonTx, or hit the reset switch after plugging in a cable, it does a search at startup.&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18760"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Tue, 25/02/2014 - 14:13.</div>
    <div class="content">
     <p>I have posted instructions of how to debug the emonTx V3 by reading it&#39;s serial output at the bottom of this page:&nbsp;<a href="../modules/emonTxV3.html">http://openenergymonitor.org/emon/modules/emonTxV3</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18780"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5621.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ebob&#039;s picture" title="ebob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/5621.html" title="View user profile.">ebob</a> on Tue, 25/02/2014 - 20:46.</div>
    <div class="content">
     <p>Hi, </p>
<p>I haven't got a USB to UART cable. </p>
<p>Yes, have plugged the CT in prior to powering it up. Have also hit the reset button after power up. </p>
<p>The frequency of the LED flashes (5 sec) seems strange and I haven't seen anyone else experience this. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19027"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5621.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ebob&#039;s picture" title="ebob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/5621.html" title="View user profile.">ebob</a> on Thu, 06/03/2014 - 04:55.</div>
    <div class="content">
     <p>Hi,</p>
<p>Thanks for sending the USB-UART cable.&nbsp; Much apprecaited.</p>
<p>What is the best way to diagnose this?</p>
<p>I have:</p>
<p>1. Setup the Arduino enviroment</p>
<p>2. installed the USB-UART driver</p>
<p>3 Opened up Arduino IDE and it shows COM3 under Tools-&gt; Serial Port when I plug the USB cable in</p>
<p>4. Tools -&gt; Serial Monitor is empty (baud 9600 is selected)</p>
<p>5. Have tried hitting reset on the emontx with no luck.&nbsp; Powered via USB cable with jump off.</p>
<p>Is it possible that there is no sketch loaded on to the emontx?</p>
<p>Please let me know what should be done next.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19029"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 06/03/2014 - 07:18.</div>
    <div class="content">
     <p>This is strange. You should not need to power the emonTx&nbsp;via USB it should self power via the UART cable, double check is been inserted the correct orientation. Do you still see the red led flash on the emonTx? What flashing pattern do you see? Does it only flash at startup?&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19036"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5621.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ebob&#039;s picture" title="ebob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/5621.html" title="View user profile.">ebob</a> on Thu, 06/03/2014 - 10:05.</div>
    <div class="content">
     <p>Hi,</p>
<p>Yes, don&#39;t need to power it separately (I just did thinking it maybe required) and it does power itself off the UART cable.&nbsp; The little board on the USB-UART cable has a Blue light permanent lit.</p>
<p>The Red light on the emontx flashes every 5 seconds.&nbsp; Same as before.&nbsp; No flashing sequence and no change in flashing sequence.</p>
<p>I have no devices connected to it when connected via the UART cable btw.</p>
<p>What&#39;s next?&nbsp; Would appreciate a series of steps and options to try as opposed to trying to troubleshoot this one micro step at a time.&nbsp;</p>
<p>Should I try reloading the default sketch on to it?&nbsp; Is it likely that there is no sketch loaded onto it?</p>
<p>Please give me a few things to try so that I can go away and try them.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19042"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 06/03/2014 - 12:09.</div>
    <div class="content">
     <p>Debugging steps are detailed at the bottom of this page:&nbsp;<a href="../modules/emonTxV3.html">http://openenergymonitor.org/emon/modules/emonTxV3</a></p>
<p>If your not seeing a serial output it could mean that some some reason there is no firmware on the emonTx.&nbsp;</p>
<p>Try pasting the following into the Arduino IDE and selecting upload, you should see the LED flash every second and print &#39;hello world&#39; to the serial window</p>
<p>&nbsp;</p>
<pre>
int led = 6;

// the setup routine runs once when you press reset:
void setup() {               
  // initialize the digital pin as an output.
  pinMode(led, OUTPUT);    
  Serial.begin(9600);
}

// the loop routine runs over and over again forever:
void loop() {
  digitalWrite(led, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(1000);               // wait for a second
  Serial.println(&quot;hello world&quot;);
  digitalWrite(led, LOW);    // turn the LED off by making the voltage LOW
  delay(1000);               // wait for a second</pre><p>If this works the next step is to upload the emonTx firmware from Github</p>
<p><a href="https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV3/RFM12B/emonTxV3_RFM12B_DiscreteSampling">https://github.com/openenergymonitor/emonTxFirmware/tree/master/emonTxV3/RFM12B/emonTxV3_RFM12B_DiscreteSampling</a></p>
<p><a href="http://wiki.openenergymonitor.org/index.php?title=EmonTx_V3#Uploading_Arduino_Firmware"><sup>http://wiki.openenergymonitor.org/index.php?title=EmonTx_V3#Uploading_Arduino_Firmware</sup></a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19175"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5621.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ebob&#039;s picture" title="ebob&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/5621.html" title="View user profile.">ebob</a> on Wed, 12/03/2014 - 08:37.</div>
    <div class="content">
     <p>Hi,</p>
<p>Loaded up that test program and it worked fine.&nbsp; Seems like the firmware was not uploaded.</p>
<p>Have uploaded the firmware and all is well now.&nbsp; Thanks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-19190"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Raspberry Pi + Open Energy Monitor Setup Problems</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 12/03/2014 - 22:35.</div>
    <div class="content">
     <p>Very sorry about that, not sure what went wrong. glad you got it sorted. Ah, the wonders of open software</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3903"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-9nsfPJJkyywsgcl_JyOtOsOdiX9F82YVLlBk9p3t6As" value="form-9nsfPJJkyywsgcl_JyOtOsOdiX9F82YVLlBk9p3t6As"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/3903 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:43:34 GMT -->
</html>
