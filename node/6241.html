<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/6241 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:01:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Addition Of Other Building Energy Flows | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Addition Of Other Building Energy Flows</h3>
        <span class="submitted">Submitted by <a href="../user/7049.html" title="View user profile.">christophe_meyers</a> on Thu, 04/12/2014 - 14:54</span>
        <div class="content"><p>Hello,</p>
<p>I really enjoy working with the OEM project and am looking to contribute in expanding its functionality during my Master thesis.</p>
<p>The idea is being able to implement full monitoring of all energy flows at building block&nbsp;level in the&nbsp;Hammarby Sj&ouml;stad&nbsp;district of Stockholm. I am looking to additionally monitor water,&nbsp;gas and HVDC flows in addition to electric power and temperature&nbsp;currently offered by OEM.&nbsp;</p>
<p>My question is in regards to the emonTX Shield V2/Nanode RF, given the availability of extra&nbsp;pins in comparison to emonTX V3. Which pins can be used, without conflicting with the 4&nbsp;power and 1 temperature measurements ? Also given memory limitations of the Arduino, would it make sense to measure more inputs on top of 4 power and 1 temperature reading ? Or simply make these measurements with a parallel Arduino ?</p>
<p>I am in the process of&nbsp;estimating&nbsp;the cost of installing such a building level full energy monitoring system, so would appreciate any advice.</p>
<p>Thanks in advance</p>
<p>Christophe</p>
  <div class="forum-topic-navigation clear-block">
          <a href="6048.html" class="topic-previous" title="Go to previous forum topic">‹ Serial link RPI&lt;-&gt;EMonTX using Emonhub (emonSD-13-08-14.img)</a>
              <a href="5766.html" class="topic-next" title="Go to next forum topic">3G Data usage ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-25631"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Addition Of Other Building Energy Flows</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 04/12/2014 - 23:37.</div>
    <div class="content">
     <p>Certainly, from what you write, the emonTx V2 is more attractive in terms of the availability of I/O pins, than the V3.</p>
<p>As far as analogue inputs are concerned, you are limited to the 6 that the Atmel 328P provides - unless of course you build your own signal conditioning front end to a more powerful processor. For temperature, the DS18B20 uses a One-Wire bus, so many devices can be connected to one I/O pin. I cannot give you a number, it depends on the configuration of the sensor network as well as cable lengths, but it's said to be larger (in number or area covered) if you use the correct external bus driver i.c. There is much data about this on the Maxim website.</p>
<p>The basic Arduino / emonTx with 6 analogue inputs would, I think, be on the edge of acceptable performance. Given that you would be measuring temperatures relatively infrequently, those are not likely to have a significant effect on performance.</p>
<p>You don't say how you intend to measure water and gas. If these are flowmeters that output a pulse at a variable rate, or instruments that send serial data by infra-red or hard-wired connection, then you might find you need a separate processor for that.</p>
<p>How do you intend to transmit and collate the data? That could have an influence on your choice.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25650"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7049.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="christophe_meyers&#039;s picture" title="christophe_meyers&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Addition Of Other Building Energy Flows</h3>

    <div class="submitted">Submitted by <a href="../user/7049.html" title="View user profile.">christophe_meyers</a> on Fri, 05/12/2014 - 16:30.</div>
    <div class="content">
     <p>Thanks for your&nbsp;input.</p>
<p>I found a&nbsp;portmap for the emonTX V2 (<a href="../emontx/reference%20.html" title="http://openenergymonitor.org/emon/emontx/reference%20">http://openenergymonitor.org/emon/emontx/reference%20</a>).<br />
Seems like there are 4 digital and&nbsp;2 analog/digital (Arduino PWM) available, for these eventual measurements.&nbsp;</p>
<p>For the water flow I intend to use what is proposed at&nbsp;http://www.seeedstudio.com/forum/viewtopic.php?f=4&amp;t=989&amp;p=3632 .<br />
The problem is that I require an&nbsp;interrupt pin, which are used by other emonTX&nbsp;functions.<br />
At least there, that would mean a seperate&nbsp;Arduino or use of Raspberry Pi GPIO&nbsp;where multiple inputs.<br />
Gas and HVDC would most probably be pulse based as well.</p>
<p>Data would not be sent via RFM12B in a multi-person environment, for privacy reasons.<br />
Instead I would directly use the emonTX shield in conjunction with NanodeRF/Arduino.<br />
All data would then be sent to a web-hosted emonCMS server.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25657"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Addition Of Other Building Energy Flows</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 05/12/2014 - 23:02.</div>
    <div class="content">
     <p>Another reason for not using radio, especially if you have a large number of data nodes, is collisions in the RF band. The absence of a radio would free up a few I/O pins and an interrupt pin (but only one).</p>
<p>All the analogue pins are available on the NanodeRF, but I've never tried to run the Ethernet stack as well as the energy monitor sketch. If it would fit into memory, I suspect the 'discrete sample' sketches might run when merged with the Ethernet code, but I would not like to say the same thing about the 'continuous' sketches.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25659"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Addition Of Other Building Energy Flows</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Sat, 06/12/2014 - 02:27.</div>
    <div class="content">
     <p>I am running a modified version of the continuous monitoring sketch on an Uno + &nbsp;Ethernet clone&nbsp;which is publishing results using MQTT. This is monitoring 4 CT clamps and reporting all readings. Works like a dream ;-).</p>
<p><a href="5922.html" title="http://openenergymonitor.org/emon/node/5922">http://openenergymonitor.org/emon/node/5922</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25660"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Addition Of Other Building Energy Flows</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 06/12/2014 - 11:49.</div>
    <div class="content">
     <p>I bow to your experience.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25661"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Addition Of Other Building Energy Flows</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Sat, 06/12/2014 - 23:57.</div>
    <div class="content">
     <p>Hardly! I wouldn&#39;t have gotten anywhere without your help and that of Robin!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25663"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Addition Of Other Building Energy Flows</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 07/12/2014 - 13:12.</div>
    <div class="content">
     <p>Thanks! But what I meant was I hadn't tried that particular combination, and while I could not foresee a problem with running Ethernet to send the data between sets of discrete samples, I wasn't certain that there would be enough slack processor time for the Ethernet with continuous sampling. You confirmed that there was. I think I'd seen your post, but it hadn't registered in my brain. So thanks again for chipping in. I'll make a note in my personal FAQ file. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25672"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Addition Of Other Building Energy Flows</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Sun, 07/12/2014 - 19:08.</div>
    <div class="content">
     <p>My pleasure - that sketch is now running Robins PV router logic as well and seems to be humming along just fine. Amazing what you can do with those little uP&#39;s!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-25694"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7049.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="christophe_meyers&#039;s picture" title="christophe_meyers&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Addition Of Other Building Energy Flows</h3>

    <div class="submitted">Submitted by <a href="../user/7049.html" title="View user profile.">christophe_meyers</a> on Mon, 08/12/2014 - 16:35.</div>
    <div class="content">
     <p>Thank you&nbsp;sumnerboy&nbsp;for confirming that Ethernet and continuous sampling can work at the same time (Ethernet stack as well as the energy monitor sketch indeed just fits into memory of&nbsp;the Nanode&nbsp;RF).<br />
Now I just need to plan my setup in terms of available pins.</p>
<p>Also have some insight when&nbsp;exploring&nbsp;the MQTT&nbsp;module, which I will definitely make use of for remote control.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/6241"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-cVhNrMjBfFpeDnPXR2nMdvEg5cTTul3FsuDqFsu86bs" value="form-cVhNrMjBfFpeDnPXR2nMdvEg5cTTul3FsuDqFsu86bs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
