<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10188 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:57:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Any success with &quot;Energy Monitor Shield v0.9b&quot; | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Any success with &quot;Energy Monitor Shield v0.9b&quot;</h3>
        <span class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Tue, 17/02/2015 - 21:27</span>
        <div class="content"><p>Hi,</p>
<p>This may not be the appropriate place to ask, so apologies if that&#39;s the case. I purchased a shield and CT sensor as described here:</p>
<p><a href="http://www.seeedstudio.com/wiki/Energy_Monitor_Shield_V0.9b" title="http://www.seeedstudio.com/wiki/Energy_Monitor_Shield_V0.9b">http://www.seeedstudio.com/wiki/Energy_Monitor_Shield_V0.9b</a></p>
<p>I&#39;m using EMonlib&nbsp;(current only -&nbsp;https://github.com/openenergymonitor/EmonLib/tree/master/examples/current_only) but am getting very sporadic readings. I&#39;ve not tried manual calibration, however have tried running with nothing clipped through the CT sensor and storing these readings then taking an average and subtracting it from calcIrms(). Still no dice.</p>
<p>If I run the&nbsp;current_only.ino sample with nothing connected I get by and large the same readings as when something is connected (difficult to say precisely due to the fluctuations), despite expecting a significant increase.</p>
<ul>
<li>Has anyone had any success using this shield? - If I&#39;d looked harder in the store I&#39;d have just picked up the one from here instead.</li>
<li>For Emonlib to function can an Arduino be powered by USB, or do I need a 9V mains DC power adapter?</li>
</ul>
<p>Thanks in advance</p>
<p>Dave</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10249.html" class="topic-previous" title="Go to previous forum topic">‹ Problems with minicom and RFM12Pi</a>
              <a href="10231.html" class="topic-next" title="Go to next forum topic">Could I use only one 9V power supply for many devices? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-27844"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Tue, 17/02/2015 - 22:56.</div>
    <div class="content">
     <p><em>For Emonlib to function can an Arduino be powered by USB, or do I need a 9V mains DC power adapter?</em></p>
<p>Either should work if you&#39;re just experimenting in the lab. &nbsp;For your final calibration/install you&#39;ll usually get much better results using the DC power adapter. &nbsp; There&#39;s a discussion on that here: &nbsp;<a href="10111.html">http://openenergymonitor.org/emon/node/10111</a>.</p>
<p>It looks like your shield can only do apparent power (no AC voltage connection) in which case it&#39;s even more important you have a nice clean Vcc as you won&#39;t benefit from the natural noise filtering that occurs when you calculate real power.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27846"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 17/02/2015 - 23:05.</div>
    <div class="content">
     <p>What current are you attempting to measure? Using which CT?</p>
<p>It appears that the input circuitry is similar to the emonTx Shield, so you'd expect similar performance. Thus with the YHDC 100 A : 50 mA CT, you need around 1 A for a reasonably accurate reading.</p>
<p>How are you using the CT? Have you looked at CT Installation in Building Blocks?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27877"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Wed, 18/02/2015 - 18:57.</div>
    <div class="content">
     <p>Thanks both,</p>
<p>Using a stable power supply has solved many of my problems.&nbsp;</p>
<p>I&#39;ve taken a look at another sample project, emonTx_continuous_watthours [1] and was wondering if simply replacing the voltageSensor&nbsp;readings with a measurement of the voltage at home would provide reasonably accurate kWh measurements? - i.e. is the logic sound?</p>
<p>&nbsp;</p>
<p>[1]&nbsp;https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV2/emonTx_continuous_watthours/emonTx_continuous_watthours.ino</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27884"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 18/02/2015 - 20:07.</div>
    <div class="content">
     <p>No, I'm afraid the logic isn't sound. The 'continuous' sketch is critically dependent upon the voltage input to get timing information, so without it, it simply won't run correctly - even if it does run at all.</p>
<p>The difference between apparent power (in VA) and real power (in W) comes when you have a load that has a reactive component - the compressor motor in a refrigerator, for example. Normally, you only pay for the real power. You can read more in Building Blocks.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27887"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Wed, 18/02/2015 - 20:24.</div>
    <div class="content">
     <p>Thanks Robert, the more I read the more I realize my knowledge is lacking. Hopefully there&#39;s a point when that will change! I will read through the &quot;Building Blocks&quot; pages.</p>
<p>Slightly off topic, does you know of somewhere where the emonTx arduino shield&nbsp;is sold pre-assembled? My soldering skills, combined with my cheap soldering iron leave much to be desired.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27899"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 18/02/2015 - 22:08.</div>
    <div class="content">
     <p>I think the SMT shield has all the very small components fitted, but requires "finishing off" with the sockets, headers, radio module etc. I don't know of anywhere/anyone who offers that service. You could try a post in "For Sale and Wanted", but we all tend to be busy doing our own thing.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27918"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Thu, 19/02/2015 - 08:35.</div>
    <div class="content">
     <p>Thanks Robert, one final question before I buy one and potentially return what I have and stop pestering you.</p>
<p>Assuming I use the&nbsp;emonTx_continuous_watthours&nbsp;example and a single CT sensor,&nbsp;replacing&nbsp;the use of RF with Ethernet (W5100), do you imagine using a&nbsp;W5100 ethernet module to make a HTTP request (in&nbsp;send_rf_data) would effect the timings of the 50Hz readings?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27922"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Thu, 19/02/2015 - 09:28.</div>
    <div class="content">
     <p>I am doing something similar Dave. I have Robin&#39;s continuous monitoring sketch (with his PV diversion logic as well) reading 4 CTs and publishing all readings over an ethernet enabled Uno clone (using MQTT). It hums along very nicely and I haven&#39;t seen any issues with timing etc. Enabling the workload checks in Robins sketch indicated there was still plenty of processing time available.</p>
<p>My sketches are available here if you want to have a look;</p>
<p><a href="https://github.com/sumnerboy12/hardwicke/blob/master/emontx_pvrouter/emontx_pvrouter.ino" title="https://github.com/sumnerboy12/hardwicke/blob/master/emontx_pvrouter/emontx_pvrouter.ino">https://github.com/sumnerboy12/hardwicke/blob/master/emontx_pvrouter/emo...</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27929"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Thu, 19/02/2015 - 12:40.</div>
    <div class="content">
     <p>Thanks Robin, good to hear - I&#39;ll pick up the shield and brush up on my soldering abilities!</p>
<p>Out of interest what Ethernet shield are you using? - I&#39;ve been using cheap W5100&nbsp;clones from eBay and am getting very mixed results with them (so far 50% failure rate!)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27949"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 19/02/2015 - 20:22.</div>
    <div class="content">
     <p>If you're not totally confident in your soldering abilities, buy a piece of stripboard and a cheap bag of mixed components, and practice on that. Double-sided boards with plated-through holes are tricky until you get the hang of it, and not the place to learn/brush up your skills.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27951"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Thu, 19/02/2015 - 20:27.</div>
    <div class="content">
     <p>Thanks for the tip Robert, I may just do that. I&#39;ll assess the difficulty once the bits have arrived and go from there.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-27952"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Thu, 19/02/2015 - 20:31.</div>
    <div class="content">
     <p>Hi there - my name is Ben, I was just referring to Robin&#39;s work ;).</p>
<p>For my EmonTx&nbsp;Shield I am using one of these;</p>
<p><a href="http://www.freetronics.com.au/products/etherten" title="http://www.freetronics.com.au/products/etherten">http://www.freetronics.com.au/products/etherten</a></p>
<p>It has ethernet built into the Uno clone itself and supports POE so I power the whole thing over ethernet as well.</p>
<p>I have a few of those cheap ethernet shields (from China) and have never had any issues. Running 2-3 in prod/live and they haven&#39;t missed a beat.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28017"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Sat, 21/02/2015 - 17:04.</div>
    <div class="content">
     <p>Sorry Ben! - I had looked at the EtherTen, but was put off due to cost. Though PoE would be awesome for most of my projects, I&#39;ll just hope the price falls at some point.</p>
<p>After spending an hour or so soldering a bunch of resistors&nbsp;onto strip board (note to self - Maplin&nbsp;is expensive), I managed to get everything onto the emontx shield and am getting current measurements when hooked upto an uno. The hardest bit were the three-pin jumpers.</p>
<p>I&#39;ll pick up a 9V adapter from eBay and see if I can now get some real power readings.&nbsp;</p>
<p>Both my Uno and the shield have a 9V power connector, will powering the shield also power the uno? - or is the 9V on the shield purely a reference voltage?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28019"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 21/02/2015 - 17:22.</div>
    <div class="content">
     <p>I hope your 9 V adapter has an ac output, because the 'power' socket on the Shield is <i>only</i> the ac voltage measurement! Feeding it 9 V dc won't work. The Shield draws its power from the Arduino. And note the recent thread that pointed out that you need a clean power supply for accuracy at low powers, due to power supply noise getting into the measurements.<br />
[Noise in Arduino-based builds: http://openenergymonitor.org/emon/node/10111]</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28024"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Sat, 21/02/2015 - 18:19.</div>
    <div class="content">
     <p>Thanks Robert, that&#39;s an interesting post. I&#39;ll play it safe and pick up the one from the OpenEnergyMonitor store, I should have thought this through more - this will be my third order in almost as many days.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28134"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Tue, 24/02/2015 - 19:47.</div>
    <div class="content">
     <p>My power adapter arrived today and I guess I should now be able to get accurate readings, assuming my soldering is up to scratch.</p>
<p>Trying to keep things simple and using the sample voltage_and_current sketch (voltage PIN0, 234.26 calibration, 1.7 power factor. Current CT1, 111.1 calibration factor) with an Arduino uno,&nbsp;I get the following:</p>
<pre>
-1315.20 1359.68 210.52 6.46 -0.97 
-1293.03 1332.01 208.48 6.39 -0.97 
-1292.86 1329.29 208.35 6.38 -0.97 
-1291.90 1327.51 208.36 6.37 -0.97 
-1305.68 1342.72 208.32 6.45 -0.97 
-1296.47 1331.38 208.68 6.38 -0.97 
-1286.88 1322.74 208.31 6.35 -0.97 
-1292.88 1328.07 208.50 6.37 -0.97 
-1292.20 1327.81 208.44 6.37 -0.97 
-1294.83 1330.60 208.39 6.39 -0.97 
-1289.58 1324.43 208.11 6.36 -0.97 
-1293.44 1328.99 208.17 6.38 -0.97 
-1290.58 1325.26 208.10 6.37 -0.97 
-1294.13 1329.76 208.22 6.39 -0.97 
-1292.73 1327.55 208.11 6.38 -0.97 
MICROWAVE ON.
-1599.34 1881.38 207.73 9.06 -0.85 
-1565.05 1854.49 207.79 8.92 -0.84 
-3278.12 3379.91 207.17 16.31 -0.97 
-3261.33 3363.46 206.57 16.28 -0.97 
-3266.01 3368.47 206.77 16.29 -0.97 
-3267.35 3370.54 206.64 16.31 -0.97 
-3273.51 3376.27 206.83 16.32 -0.97 
-3272.76 3375.20 206.72 16.33 -0.97 
MICROWAVE BACK OFF.
-1289.36 1324.61 207.75 6.38 -0.97 
-1289.86 1325.03 208.06 6.37 -0.97 
-1288.56 1322.73 208.12 6.36 -0.97 </pre><p>So I can see an increase in current when switching the Microwave on, which is good. However I notice the voltage is only reported as ~208, I was expecting close to around 231 which is what gets reported by a plug-in power monitor.&nbsp;Connections on the power socket look reasonable, I was also expecting a positive value for real power, though that could just be my misunderstanding.</p>
<p>Have I done something silly with the voltage code<sup>[0]</sup>, or have I likely not soldered something quite right?</p>
<p>[0]&nbsp;http://pastebin.com/PCR7Cs1G</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28138"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 24/02/2015 - 21:11.</div>
    <div class="content">
     <p><i>"Have I done something silly with the voltage code[0], or have I likely not soldered something quite right?"</i><br />
Probably neither. Is yours an Ideal adapter from the Shop? Which model exactly? And what are you doing between the adapter and the analogue input pin? I can't see a voltage input on their circuit diagram. The voltage calibration depends on what's going on there. If you want to flog through the theory, it's in Building Blocks. If you struggle, ask.</p>
<p><i>"I was also expecting a positive value for real power"</i><br />
That's convention. We call Import positive, Robin calls export positive. Flip your ct over if it's wrong.<br />
There are full calibration instructions in Building Blocks. </p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28139"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Tue, 24/02/2015 - 21:46.</div>
    <div class="content">
     <p>The adapter is the ideal one from the shop, model DB-06-09. At the moment the emontx&nbsp;v2 shield is connected up to an arduino uno, no RF module or temperature sensor is in use</p>
<p>If the reported voltage (Vrms) is dependent on the components, their tolerances and other factors I presume I can measure voltage using a third party monitor and then adjust the calibration factor until I get a matching Vrms&nbsp;value from emonlib? Or is this not sound logic?</p>
<p>Thanks again Robert, flipping the CT sensor over did indeed solve the problem of negative readings.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28140"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 24/02/2015 - 22:22.</div>
    <div class="content">
     <p>You confused me because you said you had that third party shield, not the emonTx Shield V2. Your voltage calibration coefficient for the emonTx Shield V2 is 268.97 - from Building Blocks > Calibration. (Theoretically - component tolerances will affect that of course.) Your logic is sound, the full calibration procedure is there in BB in the same place as the constant.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28200"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Wed, 25/02/2015 - 21:55.</div>
    <div class="content">
     <p>Thanks Robert.&nbsp;With the updated constant I&#39;m getting sensible readings with the emonTx v2 arduino shield combined with an arduino uno and the ideal&nbsp;&nbsp;DB-06-09 adapter.</p>
<p>However, when an Ethernet shield is introduced the reported Vrms&nbsp;drops:</p>
<p>193.70 238.73 77.45 3.08 0.81&nbsp;<br />
191.91 231.13 77.09 3.00 0.83&nbsp;<br />
191.54 229.00 77.20 2.97 0.84&nbsp;<br />
192.31 227.83 77.31 2.95 0.84&nbsp;<br />
190.16 225.78 77.26 2.92 0.84&nbsp;</p>
<p>The shield in question is a &quot;HanRun&quot; labeled W5100 based shield and seems to match the one described in this datasheet:</p>
<p><a href="https://www.terraelectronica.ru/ds/pdf/a/arduino-a000056-datasheet.pdf" title="https://www.terraelectronica.ru/ds/pdf/a/arduino-a000056-datasheet.pdf">https://www.terraelectronica.ru/ds/pdf/a/arduino-a000056-datasheet.pdf</a></p>
<p>To get an accurate Vrms reading I must set the voltage calibration to 795, is it normal for the calibration factor to need to be adjusted this must when using additional shields?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28202"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Wed, 25/02/2015 - 22:16.</div>
    <div class="content">
     <p>I&#39;m guessing your Vcc has sagged with the addition of the ethernet shield. &nbsp; You should be able to confirm that with a voltmeter. &nbsp;How are you powering the Arduino?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28313"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Sun, 01/03/2015 - 11:04.</div>
    <div class="content">
     <p>Hi dBC, Arduino is currently powered with a USB charging plug (Apple Branded). I plan to pick up 4xAA battery pack to use as the supply and see if that improves things.</p>
<p>Using a cheap DMM I get a fairly constant 4.85v on the 5V pin. Is that what you suggested I&nbsp;confirm?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28315"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 01/03/2015 - 11:51.</div>
    <div class="content">
     <p><em>a fairly constant 4.85v on the 5V pin. Is that what you suggested I confirm?</em></p>
<p>Yep. &nbsp;So long as it&#39;s the same with or without the ethernet shield then it&#39;s probably not the problem. &nbsp;Make sure you have the ethernet cable plugged in at both ends when you test, as those ethernet ports use more power when they&#39;re actually &quot;lit up&quot;.</p>
<p>Also check that your ethernet shield doesn&#39;t use any of the IO pins that your emonTx shield does. &nbsp;If you&#39;ve got a conflict there, that could explain it.</p>
<p><strong>[EDIT]&nbsp;</strong>It looks like your A0 might be conflicted. &nbsp;That seems to be the input the emonTx shield uses for voltage measurements, and your ethernet card appears to use it to for the SD card write protect. &nbsp; It looks like there&#39;s a solder jumper on the ethernet shield that might help. &nbsp; I vaguely recall someone else having this same problem a while back. &nbsp;A1 might be an issue too:</p>
<p><a href="http://arduino.cc/en/uploads/Main/arduino-ethernet-shield-05-schematic.pdf">http://arduino.cc/en/uploads/Main/arduino-ethernet-shield-05-schematic.pdf</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28319"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 01/03/2015 - 12:50.</div>
    <div class="content">
     <p>I put a paragraph in the Wiki about the compatability problem. If your problem turns out to be similar, let me have details so that it can be added.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28320"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7712.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="davehope&#039;s picture" title="davehope&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/7712.html" title="View user profile.">davehope</a> on Sun, 01/03/2015 - 12:52.</div>
    <div class="content">
     <p>Thanks for that, I imagine working around the A0+A1 conflict is going to be difficult at best, are you aware of any ethernet shields that do not conflict? - I was reading this post but am keen to avoid the &pound;60 cost of the EtherMega.</p>
<p><a href="10111.html" title="http://openenergymonitor.org/emon/node/10111">http://openenergymonitor.org/emon/node/10111</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-28330"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Any success with "Energy Monitor Shield v0.9b"</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 01/03/2015 - 21:41.</div>
    <div class="content">
     <p>Both A0 and A1 appear to be used for the onboard SD card features. &nbsp;If you could find an ethernet shield that doesn&#39;t have onboard SD card you might be ok. &nbsp;Alternatively, if you&#39;re not using the SD card aspect of your ethernet shield (or you are but you don&#39;t care about write protect and card present), you could put the ethernet shield on top of the emonTx shield, and simply bend or snip A0 and A1 so that those signals never get to the ethernet shield (bend them on the ethernet shield, not the emonTx shield as it does need to get to them).&nbsp; More details here:</p>
<p><a href="http://shieldlist.org/arduino/ethernet-v5">http://shieldlist.org/arduino/ethernet-v5</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10188"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-0lYQRgTGbXdXQ_GT8YSdhVEtrDFaBLRMLtgxHfbk5zs" value="form-0lYQRgTGbXdXQ_GT8YSdhVEtrDFaBLRMLtgxHfbk5zs"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/10188 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:57:29 GMT -->
</html>
