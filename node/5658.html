<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5658 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:23:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>there is a function? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">there is a function?</h3>
        <span class="submitted">Submitted by <a href="../user/6715.html" title="View user profile.">serbat</a> on Sat, 30/08/2014 - 12:23</span>
        <div class="content"><p>Hello everyone</p>
<p>Kindly ask you if there is a function to always have the value read in the positive.<br />
	Let me explain.<br />
	I&#39;m loggando with emontx and emoncms on the &quot;Log to feed&quot; as I read the instantaneous fuel consumption meter should always have a positive volore, however it happens sometimes that the value passed in the negative,<br />
	example:<br />
	I turn on a heater 1000W and the display instead read -1000W, shortly after maybe back to read properly, however in doing so I fake the total value of reading a day.</p>
<p>How can I fix it?</p>
<p>&nbsp;</p>
<p>sorry foy my bad english</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5429.html" class="topic-previous" title="Go to previous forum topic">‹ Unable to detect DS18B20 sensor addresses and long one-wire radius problem</a>
              <a href="407.html" class="topic-next" title="Go to next forum topic">EmonCMS -widget containers ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-23449"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 30/08/2014 - 13:15.</div>
    <div class="content">
     <p>I think you should first find out why your emonTx sends a negative number. If you have connected your emonTx correctly, it should not send a negative number, except when you are generating your own electricity and exporting it to the grid.</p>
<p>Which emonTx do you have?<br />
	Do you have an ac adapter?<br />
	Which sketch are you using?</p>
<p>There <strong>is</strong> a function - &quot;allow positive&quot; - but it will be much better to find the cause of the problem, than to hide it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23451"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6715.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="serbat&#039;s picture" title="serbat&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/6715.html" title="View user profile.">serbat</a> on Sat, 30/08/2014 - 17:56.</div>
    <div class="content">
     <p>Hello Robert, thanks for your reply.</p>
<p>Use emontxV2.<br />
	I have a power adapter 220V-AC other than the one recommended, but it was well calibrated the maximum error on the reading is 1-2 volts maximum.<br />
	How to use skect emonTx_CT123_Voltage_Temp. &quot;</p>
<p>But the thing is strange because this error the response with only a few watts when the power increases is okay.</p>
<p>To calibrate the various calipers use a professional tool that gives me the same time, volts, amps, kW, and cos-fi (current-voltage phase shift).<br />
	The strange thing is that for correctly detecting the watts absorbed, can you score in the negative, as in my example I lit a lamp 40w, only emontx me detects -40.</p>
<p>Accurate at the time not having connected the solar system&#39;m watching only the consumption taken from the public network.</p>
<p>So I was wondering if there was a function that despite having a negative value he added up equally as positive, while the function &quot;allow positive&quot; puts me at 0 negative value.</p>
<p>Tips?</p>
<p>Hello and thanks</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23452"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 30/08/2014 - 19:46.</div>
    <div class="content">
     <p>It is very strange. I cannot see a good reason for you to see a negative pulse of power when you switch on a lamp or a heater.&nbsp; I have never heard of this problem before.</p>
<p>What are you using to power the emonTx? If you have a 5 V USB power supply, do you have a different one that you could try?<br />
	Which current transformer are you using?</p>
<p>If you connect a computer to the serial port of the emonTx and monitor the output do you see a negative power there when you switch on the lamp or the heater?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23458"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6715.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="serbat&#039;s picture" title="serbat&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/6715.html" title="View user profile.">serbat</a> on Sun, 31/08/2014 - 09:11.</div>
    <div class="content">
     <p>emontx is powered by 5v usb power.<br />
	YES, I can try to change it with another one.<br />
	But I can not logging with a serial interface.<br />
	Now I try to explain what I explained my electrician:</p>
<p>&nbsp;</p>
<p>***********************************************************</p>
<p>The active power is the power put into play by a purely resistive load, such as a resistance of an electric oven, an incandescent lamp, an iron.<br />
	The unit of measurement of active power is W (see Watt)</p>
<p>When, however, we feed a motor, a fluorescent lamp with its reactor, or any load that has in its interior an inductance or a capacitance, we also Reactive Power.<br />
	The unit of measurement of reactive power is the VAR (see Volt Ampere Reactive)</p>
<p>This type of power, differently from the active one, (always positive) can also assume negative sign.</p>
<p>By convention, we have:</p>
<p>Positive sign - in the presence of mostly inductive loads<br />
	Negative sign - in the presence of mostly capacitive loads</p>
<p>*************************************************************</p>
<p>according to him it is normal that this happens, you have some kind of solution to this problem could be solved with a tag that reads always in the positive value.</p>
<p>&nbsp;</p>
<p>Regards</p>
<p>sergio</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23459"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 31/08/2014 - 10:50.</div>
    <div class="content">
     <p>I am an Electrical Engineer and I have earned my living at electrical engineering for 45 years. I understand what your electrician says, but it does not explain your problem. The emonLib functions measure the voltage and current 50 times during each cycle, approximately 2500 times per second, and multiply each voltage reading and each current reading together to give the power at that instant. These powers are then averaged to give you the correct value for real power (active power as your electrician calls it).&nbsp; At the same time, the voltage and current are squared and averaged to give the rms average voltage and the rms average current. These two multiplied together give apparent power, or Volt-Amperes. The library does not calculate reactive power (imaginary power as I call it) or vars. The reason that I asked you if you had generation was to check that the real power should always be positive. The emonLib library cannot give a negative number for real power unless the current and voltage waves are more than 90&deg; out of phase, which means that power is being returned to your electricity supplier. That is not possible with a heater or a lamp load, or any load no matter what the power factor is unless there is some way for it to generate electricity and return it to the supply for longer than a fraction of a cycle.</p>
<p>So I think the only real possibility is that when you switch the lamp or heater, a pulse of interference passes through the USB power supply and gives a false reading.</p>
<p>I will repeat what I wrote in my first answer to you: There is a function - &quot;allow positive&quot; - but it will be much better to find the cause of the problem, than to hide it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23460"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6715.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="serbat&#039;s picture" title="serbat&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/6715.html" title="View user profile.">serbat</a> on Sun, 31/08/2014 - 13:17.</div>
    <div class="content">
     <p>In fact, what I do not understand is why the tool I use for measurements does not give me never negative values, however emoncms you.</p>
<p>But perhaps the problem may stem from the fact that I am in my house I have 3 light lines, which in Italy are made from 3-phase 380Volt, taking one phase and the neutral line as we have 220v household.<br />
	I wonder if I can take the power from only one of these phases 220V to feed my emontx and then put the 3 clamps on each one of these 3 phases that are not at the same counter and which are probably among them sfasete 120 &deg; me cause this problem ?.</p>
<p>In essence emontx with its 3 clamps can only measure the powers derived from the same stage?</p>
<p>Note 1: the instrument for measurements takes his stage feeding on a line while the gripper is on a different line, but as explained before he ever gives me negative values.</p>
<p>Note 2: When I have negative values ​​with the function &quot;allow positive&quot;&nbsp; puts on emoncms reading to zero, but the sum of the kWh / d is increased equally or not?</p>
<p><strong>Thanks Robert </strong>for the time I spend, and I hope you can understand my bad English</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23461"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 31/08/2014 - 14:02.</div>
    <div class="content">
     <p>You did not say you have three phases! That explains everything. In England, we normally have 1 &Phi;, therefore most of the sketches are for 1 &Phi;. If you have 3 &Phi;, you must have either:</p>
<p>1. Three emonTx, one emonTx for each phase. Each emonTx has an ac-ac adapter and 1-3 current transformers; and the current transformers for each emonTx must all connect to the same phase. You will use the sketch &quot;emonTx_CT123_Voltage_Temp.ino&quot;</p>
<p>2. One emonTx with one ac-ac adapter and three current transformers, one current transformer on each phase. CT1 must be on the same phase as the ac-ac adapter. You will use the sketch &quot;emonTx_CT123_3Phase_Voltage.ino&quot;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23462"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6715.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="serbat&#039;s picture" title="serbat&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/6715.html" title="View user profile.">serbat</a> on Sun, 31/08/2014 - 14:14.</div>
    <div class="content">
     <p>Thanks again<br />
	This explains the problem, I had taken only one emontx to experiment and see if I can make it work for my goal I knew I wanted 3 emontx, now you just have to buy the two missing.</p>
<p>Thanks again for the explanation.</p>
<p>greetings sergio</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23465"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sun, 31/08/2014 - 16:28.</div>
    <div class="content">
     <p>If you want 3 x emonTx V2, look at this project: <a href="1170.html" title="http://openenergymonitor.org/emon/node/1170">http://openenergymonitor.org/emon/node/1170</a></p>
<p>As the description: it uses 3 x emonTx V2 but only one RFM12B module. The emonTx with the RFM12B is the master unit, it commands the other two to make a measurement, then it sends the result for all 3 phases by radio to the emonBase.</p>
<p>If you want to buy a 3-phase PV Diverter, see: <a href="http://www.mk2pvrouter.co.uk/" title="http://www.mk2pvrouter.co.uk/">http://www.mk2pvrouter.co.uk/</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23489"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6715.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="serbat&#039;s picture" title="serbat&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/6715.html" title="View user profile.">serbat</a> on Mon, 01/09/2014 - 10:35.</div>
    <div class="content">
     <p>Thanks for the tip Robert, always very friendly.</p>
<p>For now purchase 2 emonTx missing, then try to realize the project.</p>
<p>An information I want to ask until I can put away the reader of pulses applied to the counter, you can put a long cable 30Mt.</p>
<p>&nbsp;</p>
<p>Regards Sergio</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23493"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 01/09/2014 - 12:09.</div>
    <div class="content">
     <p>I would not wish to give you a guarantee that 30 m cable will be satisfactory, but it should work. Your biggest problem will be the possibility that the long cable will receive interference from other electrical cables nearby. To reduce that, you should use screened cable and earth the screen only at the meter end. You might need to fit a ferrite interference suppressor at the input to the emonTx.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23494"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5027.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Eric_AMANN&#039;s picture" title="Eric_AMANN&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/5027.html" title="View user profile.">Eric_AMANN</a> on Mon, 01/09/2014 - 12:32.</div>
    <div class="content">
     <p>Hi,</p>
<p>If you have some noise on the line, I suggest you to poll the state of the input rater than try to catch edges. This has been discussed <a href="5022.html">here</a>. You will find a sketch written by Robert which has been working fine with my gas counter for months.</p>
<p>Eric</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23525"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6715.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="serbat&#039;s picture" title="serbat&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: there is a function?</h3>

    <div class="submitted">Submitted by <a href="../user/6715.html" title="View user profile.">serbat</a> on Tue, 02/09/2014 - 18:39.</div>
    <div class="content">
     <p>ok, thanks guys for your suggestions</p>
<p>&nbsp;</p>
<p>sergio</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5658"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-KsW2hKzcC0fXl7WYtlZKW0V0AXNCmalbjkSmHhK3nag" value="form-KsW2hKzcC0fXl7WYtlZKW0V0AXNCmalbjkSmHhK3nag"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
