<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5613 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:03:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>PV surplus load control for heat pump | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">PV surplus load control for heat pump</h3>
        <span class="submitted">Submitted by <a href="../user/53.html" title="View user profile.">johncantor</a> on Thu, 21/08/2014 - 22:23</span>
        <div class="content"><p>I am vaguely familiar with one PV &#39;dump&#39; control on the market that progressively&nbsp;loads up a resistive load when there is a net PV export. &nbsp; I guess this is how Robin&#39;s system works? &nbsp;All good stuff.</p>
<p>However, I recently looked into the option of switching a fixed load, e.g. a 2kW&nbsp;input heat pump.</p>
<p>ImmerSun&nbsp;do quite a nice product that has a relay that can be used as final (3rd) load switch in a cascade, but I was very surprised that there is no hysterysis&nbsp;in the control</p>
<p>e.g. you can fix an export &nbsp;threshold (say 3kW) and when this is reached, the relay switches, and the load comes on (our 2kW&nbsp;heat pump). This automatically drops the export to 1kW (2kw&nbsp;below the switching threshold). &nbsp; There is a hold-on timer, this can be set to say 30 mins. unless the PV input rises by 2kW, the heat pump will stop (after the 30 mins).</p>
<p>Clearly what is needed is an start threshold (say 3kW), but a stop threshold of maybe zero, maybe a net import of 1kW?. &nbsp;along with adjustable &nbsp;time delays and&nbsp;hold-ons. &nbsp;</p>
<p>But taking it a stage further. A resistive heater can track the load nicely whereas a heat pump cannot (unless we hack into the inverter control!!) &nbsp; If we know the resistance heater is taking 2kW, we know its better to drop that out, and drop in the heat pump for a possible heat output of 4 times that. &nbsp;So the proportional resistive load should work well along side an on/off relay for a heat pump. &nbsp;i.e. the heat pump taking the base load with the resistance heater varying to mop-up any surplus (if any). &nbsp;If there is a little mains import - so be it.</p>
<p>Anyone know of a PV controller on the market with hysterysis? &nbsp;with different cut-in and cut-out thresholds?</p>
<p>Obviously a good project for an Emontx.v2 and relay shield. The import/export feeds can be monitored to see just how well the thresholds and times are set. &nbsp; &nbsp;Has this already been done?</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1548.html" class="topic-previous" title="Go to previous forum topic">‹ Extending CT cable</a>
              <a href="2787.html" class="topic-next" title="Go to next forum topic">Emoncms and Rain Gauge ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-23283"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Tinbum&#039;s picture" title="Tinbum&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV surplus load control for heat pump</h3>

    <div class="submitted">Submitted by <a href="../user/2888.html" title="View user profile.">Tinbum</a> on Fri, 22/08/2014 - 08:24.</div>
    <div class="content">
     <p>I have adapted the Mk2i to do this with a couple of heat pumps and it works really well.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23298"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV surplus load control for heat pump</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Sat, 23/08/2014 - 00:43.</div>
    <div class="content">
     <p>Tinbum - is your sketch available anywhere? I have a couple of heatpumps I would like to try to divert excess PV to if possible.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23302"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV surplus load control for heat pump</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sat, 23/08/2014 - 13:06.</div>
    <div class="content">
     <p>I started a <a href="5391.html">similar thread</a> to this one a couple of months ago whereby dump-loads are treated differently according according to their type.&nbsp;&nbsp; A &quot;conventional&quot; load can be switched on &amp; off at any time in order to maintain an accurate balance between import and export.&nbsp; A &quot;continuous&quot; load, once switched on, must remain active for a minimum period of time, whatever the weather.</p>
<p>With Robert&#39;s <a href="5589.html">recent explanation</a> (21/8/14) as to how OneWire temperature sensing can be included in code that monitors its V &amp; I sensors continuously, there no longer appears to be any fundamental difficulty in implementing the control mechanism for such diverter systems.</p>
<p>Deciding exactly how this kind of control system should behave is often more tricky that writing the code itself ...</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23310"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Tinbum&#039;s picture" title="Tinbum&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV surplus load control for heat pump</h3>

    <div class="submitted">Submitted by <a href="../user/2888.html" title="View user profile.">Tinbum</a> on Sat, 23/08/2014 - 19:14.</div>
    <div class="content">
     <p>Summerboy,&nbsp;I haven&#39;t published the sketch,&nbsp;its use is so specific for its application and I&#39;m often changing bits of it depending on what&nbsp;I want to have priority.</p>
<p>My sketch is also for 3 phase and uses an&nbsp;Arduino Mega as&nbsp;I run lots of different loads, 13 at the moment, and different types of loads eg heat pumps, chargers and normal resistive ones as well as some in anti flicker mode as well as normal.</p>
<p>As Robin has said, the actually sketch is not too complicated, its the set up of it that&#39;s the hard part. Even&nbsp;I have trouble sometimes remembering how it actually works- ie the sequence. I had very little programing skills before coming on this forum, only Basic about 30 years ago, but its been fun learning C.&nbsp;&nbsp;</p>
<p>Re hacking into the inverter control- that would probably be a good way to do it. My heat pumps don&#39;t have inverters, but its easy to add them and&nbsp;I have thought about doing that.</p>
<p>I&nbsp;don&#39;t do any temperature measurement as measuring 3 voltages and 3 currents is enough for the processor. I would like to try&nbsp;to adapt the code for an Arduino&nbsp;Due&nbsp;I have waiting.</p>
<p>Do you have any programming experience?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23311"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6498.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-6498.jpg" alt="sumnerboy&#039;s picture" title="sumnerboy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV surplus load control for heat pump</h3>

    <div class="submitted">Submitted by <a href="../user/6498.html" title="View user profile.">sumnerboy</a> on Sat, 23/08/2014 - 19:30.</div>
    <div class="content">
     <p>Robin - yep I was following that thread with great interest. I also read the thread about the temp monitoring, but I can get away without having any temp monitoring on my emontx/router since my HWC is not nearby the distribution board. I will have a separate Arduino&nbsp;that monitors the HWC temp and publishes results to my MQTT&nbsp;broker. My PV router can then subscribe to that MQTT topic and use the temps.</p>
<p>Tinbum&nbsp;- I have a lot of programming experience. It is actually my day job. C and Arduinos&nbsp;is a bit new to me but I have been writing C# and Java for 15 years. So a copy of your sketch would be useful just to pluck out the bits I need. I already have a customised version of the continuous monitoring sketch from Robin which sends reading out over MQTT rather than RF.&nbsp;</p>
<p>My PV array is only one month old so I am still doing the initial tests to see how much I am likely to have available for diversion. I also have a tariff which means I am better off exporting the first 150kWh each month. So my system will be very bespoke as well. But that is the most fun isn&#39;t it?!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-23312"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2888.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Tinbum&#039;s picture" title="Tinbum&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: PV surplus load control for heat pump</h3>

    <div class="submitted">Submitted by <a href="../user/2888.html" title="View user profile.">Tinbum</a> on Sat, 23/08/2014 - 19:53.</div>
    <div class="content">
     <p><br type="_moz" /><br />
	If you PM your e mail address&nbsp;I&#39;ll send a copy over.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5613"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-U6seSV0hlzSPF0eWWu3mQfOEqax2muLzUmXM6ck3XtM" value="form-U6seSV0hlzSPF0eWWu3mQfOEqax2muLzUmXM6ck3XtM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
