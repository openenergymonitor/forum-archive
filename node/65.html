<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Nokia 3310 LCD | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/emon/sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="/emon/modules/node/node.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/defaults.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/system/system-menus.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/user/user.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/mollom/mollom.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/forum/forum.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/modules/views/css/views.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/modules/comment/comment.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="/emon/sites/all/themes/emon3/style.css?r" />
<style type="text/css" media="all">@import "/emon/sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="/emon/" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="/emon/">Home</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
          <span class="submitted"></span>
      <div class="taxonomy"></div>
      <div class="content"><h2>Adding a Nokia 3310 LCD screen</h2>
<h2>OLD ARCHIVE - some info might be out of date&nbsp;</h2>
<p>The Nokia 3310 LCD screen is a plug-n-play display shield. Thanks to <a href="http://www.nuelectronics.com/estore/index.php?main_page=product_info&amp;cPath=1&amp;products_id=12">Nuelectronics</a>. It&#39;s a really neat way of displaying lots of information without a computer. This page goes through connecting it to Mains AC. Non-invasive 3.0, but hopefully gives enough information to interface it with any of the other basic setups or any other project.</p>
<p>The LCD can be ordered form nuelectronics for &pound;9.99 <a href="http://shieldlist.org/nuelectronics/nokia-lcd">here</a>.</p>
<p><img alt="" src="http://openenergymonitor.org/emon/sites/default/files/lcd.JPG" /></p>
<p><strong>Step one: Making a breakout adapter</strong></p>
<p>To use the display at the same time as the sensor electronics, an adapter is needed to make 5V, GND, Analog input 1 and 2 accessible. Here are couple of pictures of the way I did it. You will need two 6x3 pieces of stripboard and two 6-way sockets</p>
<p>&nbsp;<img alt="" border="0" height="263" hspace="5" name="graphics1" src="http://openenergymonitor.org/emon/sites/default/files/top.JPG" width="350" />&nbsp;&nbsp;<img alt="" border="0" height="263" hspace="5" name="graphics2" src="http://openenergymonitor.org/emon/sites/default/files/bott.JPG" width="350" /></p>
<p>Once you have that done, plug the shield into the Arduino and connect the GND, 5V and analog inputs wires 1 and 2 from the sensor electronics to the breakout pins. That completes the hardware part, on to the software.</p>
<p><strong>Step Two: Software - installing the library</strong></p>
<p>To run the LCD, the nuelectronics LCD library is needed. Download it <a href="http://www.nuelectronics.com/download/projects/nokia_3310_lcd_180110.zip">here</a>, then unzip it and insert it into your Arduino/libraries folder.</p>
<p><strong>Step Three: Software - Arduino Sketch</strong></p>
<p>Download the LCD Mains AC: non-invasive 3.0 sketch here:&nbsp;<a href="http://openenergymonitor.org/emon/sites/default/files/MainsACemonAndLCD.tar.gz">MainsACemonAndLCD.tar.gz</a>. Unzip and upload to your Arduino.</p>
<p>Thats it! When you turn it on, the screen should light up nice and blue and be displaying useful information!</p>
<p><strong>More information on the added bits of code</strong></p>
<p>There are three blocks of code that need to be added:</p>
<p>The first block goes right at the top of the program, it includes the LCD library, sets up the LCD and declares the variable used to convert integers to characters.</p>
<div class="rteindent1"><em>//Include nokia 3310 LCD library</em></div>
<div class="rteindent1"><em>#include &quot;nokia_3310_lcd.h&quot;</em></div>
<div class="rteindent1"><em>//Setup LCD</em></div>
<div class="rteindent1"><em>Nokia_3310_lcd lcd=Nokia_3310_lcd();</em></div>
<div class="rteindent1"><em>//Used to convert integer to char for LCD</em></div>
<div class="rteindent1"><em>char chvalue [10];</em></div>
<div class="rteindent1">&nbsp;</div>
<div>
<div>The second block is inserted in the void setup() procedure, initializes the LCD and clears the screen.</div>
<div>&nbsp;</div>
<div class="rteindent1"><em>//Initialize LCD and reset it</em></div>
<div class="rteindent1"><em>lcd.LCD_3310_init();</em></div>
<div class="rteindent1"><em>lcd.LCD_3310_clear();</em></div>
<div>&nbsp;</div>
<div>The third block actually displays the information on the LCD screen. Insert this wherever you want to output a value.</div>
</div>
<div class="rteindent1">&nbsp;</div>
<div class="rteindent1"><em>//Ouput Real Power to the LCD</em></div>
<div class="rteindent1"><em>itoa((int)(realPower), chvalue,10);</em></div>
<div class="rteindent1"><em>lcd.LCD_3310_clear();</em></div>
<div class="rteindent1"><em>lcd.LCD_3310_write_string_big(15, 1, chvalue, MENU_NORMAL);</em></div>
<div class="rteindent1"><em>lcd.LCD_3310_write_string(65, 3, &quot;W&quot;, MENU_NORMAL);</em>&nbsp;&nbsp;</div>
</div>
    
    
      </div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>

</html>
