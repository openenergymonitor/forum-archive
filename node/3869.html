<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3869 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:46:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>No receive data | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">No receive data</h3>
        <span class="submitted">Submitted by <a href="../user/5581.html" title="View user profile.">wichiepr</a> on Tue, 18/02/2014 - 22:48</span>
        <div class="content"><p>I just installed a Emoncms server in my computer, the server is using Wampserver 2.4. THE emoncms&nbsp; is running and the database. I have a SMS pushing data to the server but I can not received any data. I have the port open in my firewall and I can see the packet going to the server, but there is no action in the inputs at the sever. I test the EMS using the online server and is pushing data to it, I check the IP and the API and they are correct to my server.&nbsp; Any idea what may be happening?</p>
  <div class="forum-topic-navigation clear-block">
          <a href="4011.html" class="topic-previous" title="Go to previous forum topic">‹  emonTx and Mbed.org platform</a>
              <a href="3994.html" class="topic-next" title="Go to next forum topic">Packetgenerator vs Rasperry Pi Page sending time Information ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-18525"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: No receive data</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 18/02/2014 - 23:41.</div>
    <div class="content">
     <p>Is the Wampserver on-line? (If it isn&#39;t, you can only access it <strong>within</strong> the machine it&#39;s running on.)&nbsp; Did you follow all the set-up instructions for enabling the required options?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18540"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5581.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="wichiepr&#039;s picture" title="wichiepr&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: No receive data</h3>

    <div class="submitted">Submitted by <a href="../user/5581.html" title="View user profile.">wichiepr</a> on Wed, 19/02/2014 - 13:44.</div>
    <div class="content">
     <p>Thanks</p>
<p>&nbsp;</p>
<p>yes the server is ONLINE and I did follow all the WampServer Modification to all the files. My controller say it connect and pushing the data, I can see in my router that the packet is forwarded to the machine with the server, but I don&#39;t see any data in the input page.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18541"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5581.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="wichiepr&#039;s picture" title="wichiepr&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: No receive data</h3>

    <div class="submitted">Submitted by <a href="../user/5581.html" title="View user profile.">wichiepr</a> on Wed, 19/02/2014 - 13:50.</div>
    <div class="content">
     <p>Here is a the log form the Apache server,</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18544"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1741.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1741.jpg" alt="ukmoose&#039;s picture" title="ukmoose&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: No receive data</h3>

    <div class="submitted">Submitted by <a href="../user/1741.html" title="View user profile.">ukmoose</a> on Wed, 19/02/2014 - 14:43.</div>
    <div class="content">
     <p>Could it be a formatting issue in your script?</p>
<p>from your access log &nbsp;</p>
<p>GET /emoncms/input/post.json?apikey=583dfbef6ac0a135916fba49cf44a97e&amp;node=1&amp;json=[{TRTU1:74.000000},{SRTU1:75.000000},{C11:100.000000}]</p>
<p>&nbsp;</p>
<p>Emoncms expects data&nbsp;</p>
<p>http://emoncms.org/input/post.json?apikey=a924b4d95306a55445ea3a96eb17e689&amp;json={power:200,temp:21}</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18545"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5581.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="wichiepr&#039;s picture" title="wichiepr&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: No receive data</h3>

    <div class="submitted">Submitted by <a href="../user/5581.html" title="View user profile.">wichiepr</a> on Wed, 19/02/2014 - 15:59.</div>
    <div class="content">
     <p>Sorry that I ask you, But can you point me to where may be that script? IF you refer to the script that is pushing the data,&nbsp; is working fine because I test it with the emoscms.org server and is pushing data to the server, I can see it on the input page. Something on my side server that is not letting the data in.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18546"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5581.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="wichiepr&#039;s picture" title="wichiepr&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: No receive data</h3>

    <div class="submitted">Submitted by <a href="../user/5581.html" title="View user profile.">wichiepr</a> on Wed, 19/02/2014 - 16:13.</div>
    <div class="content">
     <p>I make a change to allow my using 127.0.0.1 because I am using W8 and I have now this log,&nbsp; there is no error on the Apache error log</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18547"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: No receive data</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 19/02/2014 - 17:01.</div>
    <div class="content">
     <p>127.0.0.1 will not work. That address is only good <strong>inside</strong> the machine running the Wampserver. You must get the proper address of the machine from your router.</p>
<p>&nbsp;</p>
<p>Here are my instructions for setting up to work to a local server:</p>
<p>&nbsp;</p>
<p>2. To a local server:<br />
	The server can be WAMP, LAMP or MAMP. Install it according to the provider&#39;s instructions, and any special notes here [<a href="http://emoncms.org/site/docs/installwindows">link to emcms installation</a>].</p>
<p>To set up emoncms, you must inhabit two worlds &ndash; the website and the host machine&#39;s world, and you must be clear in your mind which one you are operating in.<br />
	Fire up your browser and go to &quot;localhost&quot;.&nbsp; You are on a website now. You should see the Wamp home page and phpmyadmin, which is under &quot;Tools&quot;. Run phpmyadmin (click it). Click &quot;Databases&quot; in the top banner. In the next screen, think of a name for your database (I used &quot;emondata&quot; &ndash; make a note of what you call it) and put that in appropriate box and click &quot;Create&quot;.&nbsp;<br />
	Then set emoncms up as a user: click on Privileges in the top banner, click on Add a new user, then invent a User name for it, enter &quot;localhost&quot; as the host, and give it a password then click Create the user. Note the user name &amp; password. When it returns to the previous screen, you need to give the new user ALL PRIVILEGES in the database you just created. So click Edit privileges against the new user&#39;s name, scroll down to &ldquo;Database-specific privileges&rdquo;&nbsp; and select the database from the drop-down list. On the next screen click Check all, then Go to apply them.<br />
	Move into the machine&#39;s world and copy emoncms into a directory where it will appear in Localhost (Wampserver calls it the &ldquo;www directory&rdquo;)<br />
	When you&#39;ve copied emoncms in the machine&#39;s world, you&#39;ll find you have (in the website world) on your Wamp home page (localhost) a website called something like openenergymonitor-emoncms3. It&#39;s that which you click on to run emoncms (but don&#39;t do that yet).<br />
	N.B. Remember to put your server &ldquo;online&rdquo;.<br />
	Next tell emoncms how to log in to the database. In the machine&#39;s world, in that directory:<br />
	Do this by creating settings.php: copy default.settings.php and rename to settings.php. Edit it and set the $username, $password, $server and $database to the values you set in phpmyadmin&nbsp; ($server will be &quot;localhost&quot;).<br />
	In the website world, run emoncms and register yourself as a user and obtain an APIkey (you need not be the user that you set up in phpmyadmin).</p>
<p>Set up the NanodeRF to send the data. Use the &#39;static IP&#39; sketch:<br />
	a. Invent a MAC address for your NanodeRF. It must be unique within your LAN. Put it in here in the Nanode sketch:<br />
	// ethernet interface mac address, must be unique on the LAN<br />
	static byte mymac[] = { 0x42,0x31,0x42,0x21,0x30,0x31 };</p>
<p>b. Check your router&#39;s admin pages and find the IP address that it has allocated to the machine that your server is running on. Make the router use this IP address always (static) - check the router documentation for how to do this.<br />
	Edit the NanodeRF sketch:<br />
	c. set website[ ] to blank as you don&#39;t have a domain name (it is not &ldquo;localhost&rdquo;):<br />
	// 1) Set this to the domain name of your hosted emoncms - leave blank if posting to IP address<br />
	char website[] PROGMEM = &quot;&quot;;</p>
<p>d. Tell the NanodeRF your server&#39;s IP address. Enter the IP address you found from your router here:<br />
	// or if your posting to a static IP server:<br />
	static byte hisip[] = { 192,168,1,10 };</p>
<p>e. Instruct the Nanode to use it:<br />
	// change to true if you would like the sketch to use hisip<br />
	boolean use_hisip = true;&nbsp;</p>
<p>f. Instruct the Nanode to use a static IP for itself too:<br />
	boolean use_staticIP = true;&nbsp;</p>
<p>g. Invent an IP address within the range used by your router, but not used by any device on your local network:<br />
	static byte myip[] = { 192,168,1,66 };&nbsp;</p>
<p>h. Set your router&#39;s Gateway address (your router&#39;s admin pages will tell you this):<br />
	static byte gwip[] = { 192,168,1,254 };</p>
<p>i. Tell the Nanode the sub-directory where you installed emoncms (this will be the name you clicked on to run it)<br />
	// 2) If your emoncms install is in a subdirectory add details here i.e &quot;/emoncms3&quot;<br />
	char basedir[] = &quot;/emoncms-master&quot;;</p>
<p>j. Give the Nanode the APIkey:<br />
	// 3) Set to your account write apikey<br />
	char apikey[] = &quot;YOURAPIKEY&quot;;</p>
<p>k. Plug in an Ethernet cable to your router, compile and upload the sketch. On the serial port you should see<br />
	(with possibly a wait while it times out and retries):</p>
<p>[webClient]<br />
	IP:&nbsp; 192.168.1.66<br />
	Gateway:&nbsp; 192.168.1.254<br />
	Server: 192.168.1.69<br />
	Data sent: /emoncms-dev/input/post.json?apikey=a8bfc828b48860ca24e23cf824718cc5&amp;json={rf_fail:1}<br />
	OK recieved<br />
	Data sent: /emoncms-dev/input/post.json?apikey=a8bfc828b48860ca24e23cf824718cc5&amp;node=10&amp;csv=0,36,2,33,1,36<br />
	OK recieved<br />
	Time request sent<br />
	Time: t16,34,58<br />
	Data sent: /emoncms-dev/input/post.json?apikey=a8bfc828b48860ca24e23cf824718cc5&amp;node=10&amp;csv=0,32,0,43,0,37<br />
	OK recieved<br />
	Data sent: /emoncms-dev/input/post.json?apikey=a8bfc828b48860ca24e23cf824718cc5&amp;node=10&amp;csv=0,34,0,36,-1,31<br />
	OK received</p>
<p>[etc]</p>
<p>Explanation:</p>
<p>IP:&nbsp; 192.168.1.66&nbsp;&nbsp;<br />
	This is the content of myip[ ]&nbsp; It will appear in your Router&#39;s list against the MAC that you allocated to the NanodeRF</p>
<p>Gateway:&nbsp; 192.168.1.254<br />
	The Gateway address of your router -&nbsp; will depend on your router&#39;s settings.</p>
<p>Server: 192.168.1.69<br />
	The IP address of your server (or the machine that the server is running on, as allocated by your router)</p>
<p>Data sent: /emoncms-dev/input/post.json?apikey=a8bfc828b48860ca24e23cf824718cc5&amp;json={rf_fail:1}<br />
	OK received<br />
	The data sent by the NanodeRF, and an acknowledgement by emoncms.</p>
<p>Then, when you look at Inputs at emoncms.org, you should have and be able to click on Node 10 and it will expand to show four inputs named 1-4 (depending on the sketch you&#39;re using in the emonTx), and if you click [log] you&#39;ll see a graph of the data.<br />
	It also gets back from the server the current time: &quot;Time: t15,53,13&quot;.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18549"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5581.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="wichiepr&#039;s picture" title="wichiepr&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: No receive data</h3>

    <div class="submitted">Submitted by <a href="../user/5581.html" title="View user profile.">wichiepr</a> on Wed, 19/02/2014 - 17:47.</div>
    <div class="content">
     <p>Robert</p>
<p>&nbsp;</p>
<p>First of all THANKS for your time and help. I have the server part as you mention, But there is a different controller sending the data. Let me explain to you; this sis a EMS control made by EASYIO&nbsp; operating under SEDONA. IN the application program we have an Object&nbsp; emonpush. We set the object with the API, Port Number and the ip, with that information the internal script execute and send the input data from our controller to the server. So for testing I use the emoncsm.org server so check that the emoncmspush object is sending the data, and is working because I can get daat from it to the emoncms.org server.</p>
<p>&nbsp;</p>
<p>So what we do is find the API under the APIHElP in our server &quot;583dfbef6ac0a135916fba49cf44a97e&quot;, find my public ip an enter it in the object server ip and set the port that is 80. With this setting the controller is pushing the data to our server. I can see on my Firewall the the pack are getting to the server as you see it on the Apache Access log. &quot;64.237.163.78 - - [19/Feb/2014:12:07:15 -0400] &quot;GET /emoncms/input/post.json?apikey=583dfbef6ac0a135916fba49cf44a97e&amp;node=1&amp;json=[{TRTU1:76.000000},{SRTU1:77.000000},{C11:0.000000}] HTTP/1.1&quot; 404 221. I check at the web the last HTTPxxxxx and it say is a denied message from a server.</p>
<p>&nbsp;</p>
<p>There is&nbsp; my problem that I can find where. I am new to this, on the server side.</p>
<p>&nbsp;</p>
<p>Let mw know if you understand or need additional information and one again thanks for your time</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18973"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: No receive data</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 04/03/2014 - 22:00.</div>
    <div class="content">
     <p>Somehow, I missed your post. I am not a networking or server expert, but if your server log is reporting that it is blocking the message, then surely that must be a problem with either the server itself or your firewall.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3869"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Fb_l7OuqaHWGfWk0nSxrm4yQdGDbUVSffyu7XFpujlU" value="form-Fb_l7OuqaHWGfWk0nSxrm4yQdGDbUVSffyu7XFpujlU"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
