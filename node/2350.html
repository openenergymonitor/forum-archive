<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2350 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:08:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>How to find NodeID/Network Group for sensor node ? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">How to find NodeID/Network Group for sensor node ?</h3>
        <span class="submitted">Submitted by Guest on Wed, 08/05/2013 - 08:08</span>
        <div class="content"><p>Using an R-Pi with a self-constructed RFM12Pi. Using the <strong>emoncmspiv5avr_19-05-13</strong> image, I am able to see the web interface and the &#39;Raspberry Pi&#39; page has banner &quot;RFM12 to Pi interface script is up and running &quot;.&nbsp; I&#39;m able to SSH into the board and minicom runs on ttyAMA0 and I get &quot;Current configuration: 79 i15 g1 @ 433 MHz&nbsp; Lock: 1&quot;</p>
<p>However, I have yet to see any data on minicom, despite my two sensors working fine (as seen on their own receivers).&nbsp; So I suspect this is due to me not having set NodeID/BaseID or Network Group, so I am now stuck !</p>
<p>I have two sensor devices...</p>
<ol>
<li>
		Efergy &#39;energy monitor&#39; which sends about every 4secs with AC power consumption data and</li>
<li>
		I.T. works temperature sender KW9007B</li>
</ol>
<p>I think they are both 433Mhz band, but I don&#39;t know which channel.&nbsp; Is there any way I can discover the NodeID/BaseID and Network Group they are using ?</p>
<p>I&#39;ve searched high and low on the web without any luck, so I&#39;m wondering if I need to create some sort of scanner to see if I can capture something?</p>
<p>Would be grateful for any pointers please ?</p>
<p>GB.</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2708.html" class="topic-previous" title="Go to previous forum topic">‹ Pre Built EmonTX</a>
              <a href="2652.html" class="topic-next" title="Go to next forum topic">Transformer in place of AC_AC adapter. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-11933"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1824.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="MartinR&#039;s picture" title="MartinR&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to find NodeID/Network Group for sensor node ?</h3>

    <div class="submitted">Submitted by <a href="../user/1824.html" title="View user profile.">MartinR</a> on Wed, 08/05/2013 - 08:49.</div>
    <div class="content">
     <p>OpenEnergyMonitor is only designed to work with it&rsquo;s own transmitters.&nbsp; Your other devices are likely to be using a different frequency, baud rate, modulation method and data protocol. You may find some info from people who have hacked these devices but the protocols will be proprietary so you&rsquo;re unlikely to find any official info.</p>
<p>This is why OpenEnergyMonitor is such a great project &ndash; everything is open source.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11938"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to find NodeID/Network Group for sensor node ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 08/05/2013 - 10:40.</div>
    <div class="content">
     <p>You might find something over at JeeLabs.</p>
<p>(Just a note: as far as I&#39;m aware, Efergy sensors only transmit current, and the display makes a guess at power and energy based on that. You can read up here in the Building Blocks section why that is inaccurate.)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11970"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: How to find NodeID/Network Group for sensor node ?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Wed, 08/05/2013 - 22:54.</div>
    <div class="content">
     <p>Google for &quot;hack Efergy&quot; There are many entries.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11975"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gbrowne&#039;s picture" title="gbrowne&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to find NodeID/Network Group for sensor node ?</h3>

    <div class="submitted">Submitted by gbrowne (not verified) on Thu, 09/05/2013 - 10:13.</div>
    <div class="content">
     <p>Hi,</p>
<p>Thanks for the comments guys, but all the &#39;hack efergy&#39; entries refer to grabbing the serial data straight from the device not using the radio side at all.</p>
<p>Appreciate that OEM is really for its own sensors, but there must be loads of perfectly good sensors out in the world that could be used on this excellent project without having to junk them and buy new.&nbsp; Also, decoding the proprietary data is no problem, I&#39;ve spent a lifetime doing realtime coding !</p>
<p>One method of fonding the IDs that occurred to me is to borrow a storage scope or data analyser and capture the init sequence going into the RF module, but I don&#39;t have either of course !</p>
<p>Another would be to go through all the combinations, but life&#39;s too short for that sort of game :)</p>
<p>Any other suggestions would be most welcome ?</p>
<p>Cheers,</p>
<p>G.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14430"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="lightbulb&#039;s picture" title="lightbulb&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: How to find NodeID/Network Group for sensor node ?</h3>

    <div class="submitted">Submitted by lightbulb (not verified) on Sun, 18/08/2013 - 07:52.</div>
    <div class="content">
     <p>Hi G,</p>
<p>late reply, but only just joined forum!</p>
<p>The RFM12Pi&nbsp;v1&nbsp;uses an attiny84&nbsp;with a hoperf&nbsp;rfm12b radio. (I&#39;m sure you knew this). It has firmware very similar to jeelabs&nbsp;rfm12demo.ino, just a little trimmed and a few xtras like &#39;lock&#39;/&#39;unlock&#39; etc.&nbsp;</p>
<p>This radio in combination with the rfm12driver code, can only listen/process &nbsp;1 channel/band at a time, So whilst it is listening for packets on say 210/433 it cannot collect data from 200/433 etc. Further it is designed to reject any data packets not using the jeelib envelope format. The current jeelib address scheme allows only for 31 nodes in each of these band/frequency slots. Any foreign data being rec&#39;d in the group/freq you are listening to is omitted in the firmware. The underlying driver code can however be more flexible in that it can be told to listen for almost any data packets flying about on that frequency, but you must have a &#39;decoder&#39; routine. The emoncms&nbsp;firmware for this little board does not have these decoders built in, so you need to roll your own, your only problem is the attiny84 is a little memory constrained, (and its uart support/accuracy can be temp dependent&nbsp;without a crystal), so the number of decoders you will be able to squeeze in is limited along with its reliability in fluctuating temp extreemes. The v2 board has more breathing room as it is based upon attiny&#39;s big brother.</p>
<p>On the subject of finding ID&#39;s etc, well this is actually protocol dependent, and whilst you can use a logic analyser etc to obtain this data you are still going to have to make it &#39;fit&#39; the OEM receiver formats. One way is to have a dedicated uC&nbsp;with say another&nbsp;rfm12b&nbsp;or SAW etc, to listen to other protocols like DCF, OOK, FSH etc, and to &#39;relay&#39; the info in a more specific OEM format, in other words your other uC&nbsp;acts as a foregin gateway/protocol decoder and forwarder. I have done this for a number of protocols that dont fit the normal pattern. Also some rfm12 variants are not good with OOK without modification.</p>
<p>Unfortunately there are lots of devices all with protocols of their own and people want to handle them in specific ways, hence you will have to do a little research. You could start by specifying what your other sensors are, and forum members may already have dealt with them, or have some code you could use/incorporate.&nbsp;</p>
<p>In short, the cleanest way seems to be to build cheap radio listeners from say a atmega328/84 etc, code up your foreign decoders and have then all &#39;forward&#39; the data to emoncms&nbsp;pretending to be another OEM node. I myself use Nathan Chantrell&#39;s&nbsp;excellent tinytx&nbsp;PCB&#39;s (I ordered a few batches of v2 &amp;&nbsp;v3 from china last year). They act as proxy devices in this respect. &nbsp;I&#39;m sure there are lots of other ways, but your limiting factor is that a single &nbsp;rfm12b cannot be doing two things at the same time, not listening to two freq&#39;s nor sending AND receiving - you&#39;ll need more than 1 radio to crack this.</p>
<p>Hope that helps!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2350"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-TKR5iKz4HOKogGynvexcIg990BodbuxziUzJ5jQh-PM" value="form-TKR5iKz4HOKogGynvexcIg990BodbuxziUzJ5jQh-PM"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2350 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:08:13 GMT -->
</html>
