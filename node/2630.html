<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2630 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:26:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Pulse counting when exporting | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Pulse counting when exporting</h3>
        <span class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Sat, 27/07/2013 - 14:48</span>
        <div class="content"><p>Hi,</p>
<p>Not sure where to put this one, but thought hardware was best.</p>
<p>I have a digital Landis GYR+ which seems to be the norm these days from the pics I have seen.</p>
<p>	The display shows rEd and the LED lights up when exporting, and I was wanting to add pulse counting to the equation so I can keep a track of the display from within the house, meter has an awkward gate to get to it and since I send the meter reading off every month, I was looking for an easy way of doing this.</p>
<p>	I have built ant tested the pulse counting, and am happy with the accuracy of it, gained 2 kWh over a month to what the display said, so close enough for me. but now it counts all the exporting time as a pulse.</p>
<p>	Is it a case of testing for the duration of the pulse and if it is a flash, count it, but if it is longer, ignore it?</p>
<p>I think this would work, but not 100% sure</p>
<p>&nbsp;</p>
<p>Jimmy<br />
	&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2653.html" class="topic-previous" title="Go to previous forum topic">‹ 3 phase voltage control and logging</a>
              <a href="2626.html" class="topic-next" title="Go to next forum topic">SCT-013-030 ac voltage output ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-13886"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pulse counting when exporting</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 27/07/2013 - 22:36.</div>
    <div class="content">
     <p>I was hoping calypso_rae would answer this one - he&#39;s the expert on meter pulses and his <a href="1757.html">tools</a> contain a meter emulator, which you might like to look at.</p>
<p>I think what you say is correct, you need to distinguish between an import flash and everything else.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13902"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pulse counting when exporting</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 28/07/2013 - 11:40.</div>
    <div class="content">
     <p>Hi Jimmy,</p>
<p>If your meter has only a single LED which pulses once per WattHour (i.e. 1000 pulse per kWh), then the <em>checkLedStatus()</em> routine that&#39;s in many of my Mk2 sketches should be able to detect and analyse your meter&#39;s LED activity.&nbsp; This code and associated comments will hopefully explain my understanding of the LED&#39;s behaviour.&nbsp;</p>
<p><a href="1757.html">Mk2_PV_Router_mini_3</a> is a compact no-frills version of Mk2 which contains this function.&nbsp; The associated hardware is just an LDR and a couple of passive components, as shown at the top of the sketch.&nbsp;&nbsp; Although the call to <em>checkLedStatus()</em> is commented out as posted, the code still compiles when the &quot;//&quot; characters are removed, so I would expect this function to work as intended.</p>
<p>If your meter is of the type which has red and green LEDs (and only 1250 Joules to play with, rather than 3600), then I&#39;m afraid I can&#39;t help as I&#39;ve never run tests on that type.&nbsp; I have however installed a Mk2 system alongside such a meter.&nbsp; Providing that the energy flow oscillations remain within a 1200 Joule band, or thereabouts, the meter appears to tolerate this behaviour without charging the user.&nbsp; In this case, the green LED remains on.&nbsp; If the oscillation band is increased to, say, 2000 Joules, then this LED goes off and occasional red pulses are seen which I presume means that the user is being charged.</p>
<p>Hope this helps.&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-13976"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3623.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="manicmoddin&#039;s picture" title="manicmoddin&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pulse counting when exporting</h3>

    <div class="submitted">Submitted by <a href="../user/3623.html" title="View user profile.">manicmoddin</a> on Thu, 01/08/2013 - 06:06.</div>
    <div class="content">
     <p>Just want to say thanks for this, I have not yet had chance to look into this, Hopefully this weekend I will get some time aside to investigate, The few hours I have to myself are a little too late to be playing with the meters, so just working out how the emonGLCD works so as to customize this a little later on.</p>
<p>	My meter is the single red LED, but there is a second one next to it, This I believe is a Infra red receiver I seem to remember from reading around somewhere so as it can be programmed. Not sure how true that is though as it was going back a while to before I found this site, and was looking at getting one of the meters from eBay and watching Office consumption. I struck it off as it would mean either rewiring the downstairs ring so as that was on its own ring, or having it all on its own spur, both of which I don&#39;t like the sound of.</p>
<p>Cheers again</p>
<p>&nbsp;</p>
<p>Jimmy</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-14044"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/956.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-956.jpg" alt="calypso_rae&#039;s picture" title="calypso_rae&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Pulse counting when exporting</h3>

    <div class="submitted">Submitted by <a href="../user/956.html" title="View user profile.">calypso_rae</a> on Sun, 04/08/2013 - 07:54.</div>
    <div class="content">
     <p>The technique that I&#39;ve mentioned above is intended for use with the red LED.&nbsp;&nbsp; Our LandisGyr meter also has a second port alongside the first.&nbsp; This is some kind of comms port which I&#39;ve never tried to access.</p>
<p>The point about my <em>checkLedStatus()</em> function is that it can analyse all LED events, thereby revealing exactly what is going on behind the scenes.&nbsp; Unfortunately, digital meters only tell you in retrospect what has happened.&nbsp;</p>
<p>The Mk2&#39;s measurement system is essentially just replicating the meter in a way that provides access to real-time data.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2630"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-3zHqUhe5LPAMvmy6u1w7lmnygMmgT6lfyNo_heYRtvA" value="form-3zHqUhe5LPAMvmy6u1w7lmnygMmgT6lfyNo_heYRtvA"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
