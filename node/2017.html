<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2017 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:47:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Direct monitoring of power meter pulse using Raspberry Pi &amp; an LDR | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/5.html">Archived: Software</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Direct monitoring of power meter pulse using Raspberry Pi &amp; an LDR</h3>
        <span class="submitted">Submitted by Guest on Mon, 11/02/2013 - 20:05</span>
        <div class="content"><p>HI,</p>
<p>I was linked to this project a while ago when I was first planning on using a Pi to monitor the flashing LED on my power meter but couldn&#39;t see an easy way to do it directly, without an &#39;emonTx&#39; node. I managed to get the Pi graphing the power usage using some code from <a href="https://github.com/yfory/power">https://github.com/yfory/power</a> but the graphing wasn&#39;t great and only worked for the current day.</p>
<p>At this point I came back here to see if there was any way to get the data into EmonCMS, I didn&#39;t find anything so I started playing around with the API and realised how easy it would be!</p>
<p>I&#39;ve got my Pi up and running now logging data from the power meter directly, it counts the pulses over 60 seconds, converts it into a wattage and sends it via JSON to emoncms. I figured someone else might find this useful so I&#39;ve put the code on github for easy access.</p>
<p>I&#39;m not a programmer and the code&#39;s not exactly elegant but it works nicely, if anyone has any improvements I&#39;m all ears!</p>
<p>Here&#39;s the code: <a href="https://github.com/kieranc/power">https://github.com/kieranc/power</a></p>
<p>For an extra bonus, here&#39;s a picture of the circuitboard attached to the power meter:</p>
<p><a href="../../../www.dropbox.com/s/24ybv1xr6xdtsu8/2013-02-09%2015.31.19.html">https://www.dropbox.com/s/24ybv1xr6xdtsu8/2013-02-09%2015.31.19.jpg</a></p>
<p>Maybe I&#39;ll work out a better way of attaching it one day... :)</p>
  <div class="forum-topic-navigation clear-block">
          <a href="12263.html" class="topic-previous" title="Go to previous forum topic">‹ phpmqtt_input is not connecting to broker</a>
              <a href="10977.html" class="topic-next" title="Go to next forum topic">Virtual Feed - Post-processing data on the fly ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-9800"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2714.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="myozone&#039;s picture" title="myozone&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/2714.html" title="View user profile.">myozone</a> on Mon, 11/02/2013 - 20:28.</div>
    <div class="content">
     <p>Many thanks, - Love the clamp !</p>
<p>I used a reflective IR (on a gas meter)</p>
<p><a href="../../../farm4.staticflickr.com/3195/3127811725_326b94485e_b.jpg">http://farm4.staticflickr.com/3195/3127811725_326b94485e_b.jpg</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9804"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1531.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1531.gif" alt="Jérôme&#039;s picture" title="Jérôme&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/1531.html" title="View user profile.">Jérôme</a> on Mon, 11/02/2013 - 21:49.</div>
    <div class="content">
     <p>Thank you for sharing this.</p>
<p>The clamp definitely rules.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9862"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Delphy&#039;s picture" title="Delphy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by Delphy (not verified) on Thu, 14/02/2013 - 13:28.</div>
    <div class="content">
     <p>Thanks for the code! &nbsp;I&#39;m using a variation on this with an LDR and edge detection of the pulse in python, but it seems to work fine. :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9891"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kieranc&#039;s picture" title="kieranc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by kieranc (not verified) on Fri, 15/02/2013 - 17:10.</div>
    <div class="content">
     <p>I could not for the life of me get edge detection to work in python. As far as I could work out the new kernel patch which enables interrupt handling breaks python&#39;s ability to receive them. Is your pi up to date?</p>
<p>See here: <a href="http://code.google.com/p/raspberry-gpio-python/issues/detail?id=9" title="http://code.google.com/p/raspberry-gpio-python/issues/detail?id=9">http://code.google.com/p/raspberry-gpio-python/issues/detail?id=9</a></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9892"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Delphy&#039;s picture" title="Delphy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by Delphy (not verified) on Fri, 15/02/2013 - 19:32.</div>
    <div class="content">
     <p>Well, when I say &quot;edge detection&quot; what I mean is to &quot;detect&quot; the edge of the incoming pulse. &nbsp;I have the LDR connected to an Arduino Nano, and from there to USB on the RPi. &nbsp;The Arduino spits out any values lower than 1000 (out of a max of 1024) via serial, which Python listens to in a loop. &nbsp;So all I do is set a bit when the incoming light value drops lower than a threshold (in my case 980), and then when the light values goes *above* that threshold, register the pulse.</p>
<p>So it&#39;s really a poor mans way of detecting the trailing edge of a light pulse from the resistor. &nbsp;But, other than my RPi crashing once per day, it works pretty much perfectly for detection from my meter. &nbsp;I can share the code you if want to see it, but it&#39;s very basic. :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9894"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="kieranc&#039;s picture" title="kieranc&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by kieranc (not verified) on Sat, 16/02/2013 - 00:02.</div>
    <div class="content">
     <p>Ah fair enough, I wanted to avoid a perpetual loop on the Pi, it has little enough CPU power as it is!</p>
<p>The arduino is more than capable of detecting a falling edge quite easily, but it&#39;s also not really a problem having it run in a loop continually, it has nothing else to do.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-9901"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Delphy&#039;s picture" title="Delphy&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by Delphy (not verified) on Sat, 16/02/2013 - 14:22.</div>
    <div class="content">
     <p>Yeah unfortunately in order to read the serial I pretty much have to run in a perpetual loop (in python), although it doesn&#39;t use up that much CPU. &nbsp;Eventually I&#39;d like to use both the Arduino&nbsp;and the RPi in combination to read and detect everything in my house, so the inputs would be wired to either one depending on usage. &nbsp; I could probably move the edge detection from Python into the Arduino sketch actually, since right now it&#39;s just spitting out everything via serial, but this is outside the topic of this particular thread. :)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16424"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4782.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4782.png" alt="AllenConquest&#039;s picture" title="AllenConquest&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/4782.html" title="View user profile.">AllenConquest</a> on Sun, 24/11/2013 - 17:19.</div>
    <div class="content">
     <p>I&#39;ve only recently come across this community, but I&#39;m excited to get started building my own monitoring systems. I have a pulse meter for my incoming electricity and another pulse meter for my solar generation. Both these boxes are situated next to each other and it would be great if they could be monitored directly into the Raspberry Pi (I can situate this alongside the meters too)</p>
<p>However, I have no idea what components I need or whether this is even possible. Could you point me to the best place to find out this information?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16425"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2161.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="09540&#039;s picture" title="09540&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/2161.html" title="View user profile.">09540</a> on Mon, 25/11/2013 - 06:53.</div>
    <div class="content">
     <p>I've been trying to coax this information out of the forums and experimenting on my own for the last week or so. The information presented here, along with any ideas and advice would be appreciated. My intent was to run a C++ script and the GPIO libraries of WiringPi to detect the pulses and send the resulting data to Emoncms.</p>
<p>So far, not a lot of help has been offered, and I'm finding the learning curve on setting up Emoncms to be a bit of a challenge.</p>
<p>If you have interest, I'd be more than happy to share my progress via this topic thread.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16456"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4782.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4782.png" alt="AllenConquest&#039;s picture" title="AllenConquest&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/4782.html" title="View user profile.">AllenConquest</a> on Wed, 27/11/2013 - 07:11.</div>
    <div class="content">
     <p>It would be great to hear your progress so far. I&#39;m starting to get an idea of what I need, and I don&#39;t think I&#39;ll be using the optical pulses, but rather use a clamp round the cables. It seems that gives a more accurate result?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16467"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/2161.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="09540&#039;s picture" title="09540&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/2161.html" title="View user profile.">09540</a> on Wed, 27/11/2013 - 15:43.</div>
    <div class="content">
     <p>I don't think that there is anything more accurate than the pulses that a revenue-grade utility meter uses to track the power through it's registers. Having said that, there may be reasons you would want to use current transformers and voltage sampling for your system. Direction of energy delivery may be one of them.</p>
<p>In my case, I'll be using logic from the meter directly, not sensing the blinking of an irLED. I'll have access to the direction logic and can use that in the calculations to add, subtract and otherwise process the numbers I need for display.</p>
<p>If your meters have some method of displaying whether they are importing or exporting, along with the pulses, then you may want to continue with your original design. A CT-based system will use the phase relationships of the detected current and voltages to integrate the energy direction and calculate the power delivered. There is no reason that it will be significantly less accurate than the utility meters. although overall, I think it is somewhat more work to build, install, calibrate and maintain than one which uses the logic directly.</p>
<p>One advantage of the CT-based system is that you will get more granularity in your resulting readings, making for smoother graphs and displays. Direct readings from pulses are always going to be in one watt-hour steps, and any power displays will be calculated from that last watt-hour, not the current level (if that's important).</p>
<p>Another is if you are interested in power factor and real-vs.-apparent power calculations.</p>
<p>Overall, I'm mostly interested in keeping track of power generated-vs-power consumed, and at the end of the day (and month) whether I bought power from the utility or added to my net energy credit to be consumed another day.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-17828"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5380.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rushed&#039;s picture" title="rushed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/5380.html" title="View user profile.">rushed</a> on Wed, 22/01/2014 - 10:21.</div>
    <div class="content">
     <p>Hi,</p>
<p>&nbsp;</p>
<p>I&#39;m trying to get this to work with the recent read-only raspberry pi images.</p>
<p>When I start the monitoring script I get told that no handlers could be found for the logger.</p>
<p>&nbsp;</p>
<p>Is anyone else able to get it to work / involved in a working way of routing pulses to emoncms?</p>
<p>&nbsp;</p>
<p>Cheers</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33003"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="rabgay20509&#039;s picture" title="rabgay20509&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by rabgay20509 (not verified) on Tue, 04/08/2015 - 10:35.</div>
    <div class="content">
     <p>Hi,</p>
<p>I&#39;m planning to use Raspberry pi to monitor and send information about the energy consumption&nbsp; to consumers via SMS or email.</p>
<p>Please, advice me on how should I proceed!!!<br />
&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-33482"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/6243.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="sparky77&#039;s picture" title="sparky77&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/6243.html" title="View user profile.">sparky77</a> on Thu, 20/08/2015 - 19:40.</div>
    <div class="content">
     <p>Hi forum</p>
<p>can anyone explain where i have gone wrong, i have i install log, this is of a fresh image and the code is from the link at the 1st entry&nbsp;https://github.com/kieranc/power</p>
<p>&nbsp;</p>
<p>pi@emonbase ~ $ rpi-rw</p>
<p>Filesystem is unlocked - Write access</p>
<p>type &#39; rpi-ro &#39; to lock</p>
<p>pi@emonbase ~ $ sudo apt-get install python-dev python-pip</p>
<p>Reading package lists... Done</p>
<p>Building dependency tree&nbsp; &nbsp; &nbsp; &nbsp;</p>
<p>Reading state information... Done</p>
<p>python-dev is already the newest version.</p>
<p>python-pip is already the newest version.</p>
<p>0 upgraded, 0 newly installed, 0 to remove and 29 not upgraded.</p>
<p>pi@emonbase ~ $ sudo pip install apscheduler</p>
<p>Downloading/unpacking apscheduler</p>
<p>&nbsp; Downloading APScheduler-3.0.3.tar.gz (74Kb): 74Kb downloaded</p>
<p>&nbsp; Running setup.py egg_info for package apscheduler</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>Downloading/unpacking setuptools&gt;=0.7 (from apscheduler)</p>
<p>&nbsp; Downloading setuptools-18.2.tar.gz (630Kb): 630Kb downloaded</p>
<p>&nbsp; Running setup.py egg_info for package setuptools</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>Downloading/unpacking six&gt;=1.4.0 (from apscheduler)</p>
<p>&nbsp; Downloading six-1.9.0.tar.gz</p>
<p>&nbsp; Running setup.py egg_info for package six</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp; &nbsp; no previously-included directories found matching &#39;documentation/_build&#39;</p>
<p>Downloading/unpacking pytz (from apscheduler)</p>
<p>&nbsp; Downloading pytz-2015.4.tar.bz2 (157Kb): 157Kb downloaded</p>
<p>&nbsp; Running setup.py egg_info for package pytz</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>Downloading/unpacking tzlocal (from apscheduler)</p>
<p>&nbsp; Downloading tzlocal-1.2.tar.gz</p>
<p>&nbsp; Running setup.py egg_info for package tzlocal</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>Downloading/unpacking futures (from apscheduler)</p>
<p>&nbsp; Downloading futures-3.0.3.tar.gz</p>
<p>&nbsp; Running setup.py egg_info for package futures</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>Installing collected packages: apscheduler, setuptools, six, pytz, tzlocal, futures</p>
<p>&nbsp; Running setup.py install for apscheduler</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp; Found existing installation: distribute 0.6.24dev-r0</p>
<p>&nbsp; &nbsp; Uninstalling distribute:</p>
<p>&nbsp; &nbsp; &nbsp; Successfully uninstalled distribute</p>
<p>&nbsp; Running setup.py install for setuptools</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp; &nbsp; Installing easy_install script to /usr/local/bin</p>
<p>&nbsp; &nbsp; Installing easy_install-2.7 script to /usr/local/bin</p>
<p>&nbsp; Running setup.py install for six</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp; &nbsp; no previously-included directories found matching &#39;documentation/_build&#39;</p>
<p>&nbsp; Running setup.py install for pytz</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp; Running setup.py install for tzlocal</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp; Running setup.py install for futures</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>Successfully installed apscheduler setuptools six pytz tzlocal futures</p>
<p>Cleaning up...</p>
<p>pi@emonbase ~ $ sudo apt-get install git</p>
<p>Reading package lists... Done</p>
<p>Building dependency tree &nbsp; &nbsp; &nbsp; &nbsp;</p>
<p>Reading state information... Done</p>
<p>git is already the newest version.</p>
<p>git set to manually installed.</p>
<p>0 upgraded, 0 newly installed, 0 to remove and 29 not upgraded.</p>
<p>pi@emonbase ~ $ git clone <a href="https://github.com/kieranc/power.git" title="https://github.com/kieranc/power.git">https://github.com/kieranc/power.git</a> &amp;&amp; cd power</p>
<p>Cloning into &#39;power&#39;...</p>
<p>remote: Counting objects: 83, done.</p>
<p>remote: Total 83 (delta 0), reused 0 (delta 0), pack-reused 83</p>
<p>Unpacking objects: 100% (83/83), done.</p>
<p>pi@emonbase ~/power $ ls</p>
<p>gpio-irq-demo.c&nbsp; monitor.py&nbsp; power-monitor&nbsp; README.md&nbsp; Schematic.jpg</p>
<p>pi@emonbase ~/power $ sudo cp power-monitor /etc/init.d/</p>
<p>pi@emonbase ~/power $ sudo chmod a+x /etc/init.d/power-monitor</p>
<p>pi@emonbase ~/power $ sudo update-rc.d power-monitor defaults</p>
<p>update-rc.d: using dependency based boot sequencing</p>
<p>insserv: warning: script &#39;power-monitor&#39; missing LSB tags and overrides</p>
<p>pi@emonbase ~/power $ gcc gpio-irq-demo.c -o gpio-irq</p>
<p>pi@emonbase ~/power $ sudo /etc/init.d/power-monitor start</p>
<p>Starting power monitor...</p>
<p>pi@emonbase ~/power $ python: can&#39;t open file &#39;/root/power/monitor.py&#39;: [Errno 2] No such file or directory</p>
<p>sudo /home/pi/power/power-monitor start</p>
<p>Starting power monitor...</p>
<p>pi@emonbase ~/power $ python: can&#39;t open file &#39;/root/power/monitor.py&#39;: [Errno 2] No such file or directory</p>
<p>sudo /home/pi/power/power-monitor start</p>
<p>Starting power monitor...</p>
<p>pi@emonbase ~/power $ python: can&#39;t open file &#39;/root/power/monitor.py&#39;: [Errno 2] No such file or directory</p>
<p>sudo /home/pi/power/po</p>
<p>pi@emonbase ~/power $ sudo /home/pi/power/power-monitor start</p>
<p>Starting power monitor...</p>
<p>pi@emonbase ~/power $ python: can&#39;t open file &#39;/root/power/monitor.py&#39;: [Errno 2] No such file or directory</p>
<p>&nbsp;</p>
<p>pi@emonbase ~/power $ cd\</p>
<p>&gt;&nbsp;</p>
<p>pi@emonbase ~ $ sudo /etc/init.d/power-monitor start</p>
<p>Starting power monitor...</p>
<p>pi@emonbase ~ $ python: can&#39;t open file &#39;/root/power/monitor.py&#39;: [Errno 2] No such file or directory</p>
<p>cd /etc/init.d/</p>
<p>pi@emonbase /etc/init.d $ ls</p>
<p>alsa-utils&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ifplugd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ntp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sendsigs</p>
<p>apache2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; kbd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ntp-backup&nbsp; &nbsp; &nbsp; single</p>
<p>bootlogs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; keyboard-setup &nbsp; &nbsp; &nbsp; &nbsp; plymouth&nbsp; &nbsp; &nbsp; &nbsp; skeleton</p>
<p>bootmisc.sh &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; killprocs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; plymouth-log&nbsp; &nbsp; ssh</p>
<p>checkfs.sh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; kmod &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; power-monitor &nbsp; sudo</p>
<p>checkroot-bootclean.sh&nbsp; lightdm&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; procps&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sysstat</p>
<p>checkroot.sh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mosquitto&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raspi-config&nbsp; &nbsp; triggerhappy</p>
<p>console-setup &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; motd &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; udev</p>
<p>cron&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mountall-bootclean.sh&nbsp; rc.local&nbsp; &nbsp; &nbsp; &nbsp; udev-mtab</p>
<p>dbus&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mountall.sh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rcS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ufw</p>
<p>dphys-swapfile&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mountdevsubfs.sh &nbsp; &nbsp; &nbsp; README&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; umountfs</p>
<p>emonhub &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mountkernfs.sh &nbsp; &nbsp; &nbsp; &nbsp; reboot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; umountnfs.sh</p>
<p>emonPiLCD &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mountnfs-bootclean.sh&nbsp; redis-server&nbsp; &nbsp; umountroot</p>
<p>fake-hwclock&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mountnfs.sh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rmnologin &nbsp; &nbsp; &nbsp; urandom</p>
<p>feedwriter&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mtab.sh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rpcbind &nbsp; &nbsp; &nbsp; &nbsp; x11-common</p>
<p>halt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mysql&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rsync</p>
<p>hostname.sh &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; networking &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rsyslog</p>
<p>hwclock.sh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nfs-common &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; screen-cleanup</p>
<p>pi@emonbase /etc/init.d $ sudo power-monitor start</p>
<p>sudo: power-monitor: command not found</p>
<p>pi@emonbase /etc/init.d $ sudo su</p>
<p>root@emonbase:/etc/init.d# sudo /etc/init.d/power-monitor start</p>
<p>Starting power monitor...</p>
<p>root@emonbase:/etc/init.d# python: can&#39;t open file &#39;/root/power/monitor.py&#39;: [Errno 2] No such file or directory</p>
<p>&nbsp;</p>
<p>root@emonbase:/etc/init.d# reboot</p>
<p>&nbsp;</p>
<p>Broadcast message from root@emonbase (pts/1) (Thu Aug 20 19:13:34 2015):</p>
<p>&nbsp;</p>
<p>The system is going down for reboot NOW!</p>
<p>root@emonbase:/etc/init.d# Connection to 192.168.1.94 closed by remote host.</p>
<p>Connection to 192.168.1.94 closed.</p>
<p>Justins-MBP:~ justin$ ssh pi@192.168.1.94</p>
<p>pi@192.168.1.94&#39;s password:&nbsp;</p>
<p>Linux emonbase 3.18.7+ #755 PREEMPT Thu Feb 12 17:14:31 GMT 2015 armv6l</p>
<p>&nbsp;</p>
<p>The programs included with the Debian GNU/Linux system are free software;</p>
<p>the exact distribution terms for each program are described in the</p>
<p>individual files in /usr/share/doc/*/copyright.</p>
<p>&nbsp;</p>
<p>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</p>
<p>permitted by applicable law.</p>
<p>pi@emonbase ~ $ rpi-rw</p>
<p>Filesystem is unlocked - Write access</p>
<p>type &#39; rpi-ro &#39; to lock</p>
<p>pi@emonbase ~ $ sudo /etc/init.d/power-monitor start</p>
<p>Starting power monitor...</p>
<p>pi@emonbase ~ $ python: can&#39;t open file &#39;/root/power/monitor.py&#39;: [Errno 2] No such file or directory</p>
<p>&nbsp;</p>
<p>pi@emonbase ~ $&nbsp;</p>
<p>pi@emonbase ~ $ sudo /etc/init.d/power-monitor start</p>
<p>Starting power monitor...</p>
<p>pi@emonbase ~ $ python: can&#39;t open file &#39;/root/power/monitor.py&#39;: [Errno 2] No such file or directory</p>
<p>&nbsp;</p>
<p>pi@emonbase ~ $&nbsp;</p>
<p>pi@emonbase ~ $ cd /home/pi/power</p>
<p>&nbsp;</p>
<p>pi@emonbase ~/power $ sudo python monitor.py</p>
<p>Traceback (most recent call last):</p>
<p>&nbsp; File &quot;monitor.py&quot;, line 32, in &lt;module&gt;</p>
<p>&nbsp; &nbsp; from apscheduler.scheduler import Scheduler</p>
<p>ImportError: No module named scheduler</p>
<p>pi@emonbase ~/power $&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-37416"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/9171.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="EccentricDyslexic&#039;s picture" title="EccentricDyslexic&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/9171.html" title="View user profile.">EccentricDyslexic</a> on Wed, 23/12/2015 - 21:34.</div>
    <div class="content">
     <p>I got to same point, got round it by uninstalling apscheduler and reinstalling an earlier version 2.1.2 under sudo.</p>
<p>still having problems getting it to run though.</p>
<p>&nbsp;</p>
<p>steve</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-40382"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8255.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="goodfidelity&#039;s picture" title="goodfidelity&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Direct monitoring of power meter pulse using Raspberry Pi & an LDR</h3>

    <div class="submitted">Submitted by <a href="../user/8255.html" title="View user profile.">goodfidelity</a> on Wed, 16/03/2016 - 21:03.</div>
    <div class="content">
     <p>Some time ago there was activity in this thread.</p>
<p>Did you guys get anywhere on this?</p>
<p>Is there any nice, simple way to get pulse counting running on the Pi direct and post it to&nbsp;emoncms?</p>
<p>&nbsp;</p>
<p>//GF</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2017"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-J1yTN7WLwwb1DHy7E0Fd4Lp44Cqw1KAzR6djWbTGuq8" value="form-J1yTN7WLwwb1DHy7E0Fd4Lp44Cqw1KAzR6djWbTGuq8"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/2017 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:47:46 GMT -->
</html>
