<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10899 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:30:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>OpenEMC - An EmonTH mod for woodworkers | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">OpenEMC - An EmonTH mod for woodworkers</h3>
        <span class="submitted">Submitted by <a href="../user/8349.html" title="View user profile.">SolarMill</a> on Wed, 24/06/2015 - 17:32</span>
        <div class="content"><p>Hey Guys and Gals,</p>
<p>We&rsquo;ve been using&nbsp;Open Energy Monitoring components&nbsp;for the past few months for power&nbsp;monitoring and love its open source flexibility.&nbsp; We recently received an EmonTH to monitor Temp and Humidity values in our workshop and have developed a useful modification to the firmware.</p>
<p>As any woodworker knows, wood <a href="http://woodgears.ca/lumber/moisture.html">expands and contracts</a>&nbsp;with changes in moisture content.&nbsp; Most people notice this&nbsp;when normally free-swinging doors begin to stick in the humid summer.&nbsp; However, moisture content can be a tricky thing to measure accurately.&nbsp; There are 2-prong probes that measure MC by testing the wood&rsquo;s electrical resistance, but the calibration&nbsp;varies&nbsp;depending on&nbsp;the density of the&nbsp;species and the probes damage&nbsp;the wood because they have to be firmly pressed into the surface. &nbsp;They are also not very accurate. &nbsp;You can use an <a href="http://www.wagnermeters.com/flooring/wood-flooring/electromagnetic-wave-technology/">RF based meter</a> but these are tricky to use with thinner pieces of wood like veneers and the meters themselves are expensive. &nbsp; Furthermore, neither one of these methods allow for any data logging to record the MC over time.</p>
<p>​Wood that I&rsquo;ve bought at the local lumber yard can range&nbsp;anywhere from 9% to 18% Moisture Content,&nbsp;depending on where it&rsquo;s stored and if it got rained on.&nbsp; The ideal target MC for a finished&nbsp;wood product&nbsp;depends <a href="http://www.fpl.fs.fed.us/documnts/fplrn/fplrn268.pdf">largely on the application but also on the region&nbsp;</a>where the product will be installed or used. &nbsp; For example, a lawn chair in Florida should be made at 11% MC while cabinetry in&nbsp;Nevada might be better suited at closer to&nbsp;6% MC. &nbsp;Failure to anticipate these changes in expansion and contraction can result in failed joints, poorly fitted&nbsp;drawers, and warped or cracked surfaces.</p>
<p>It has become my preferred method to measure the MC of the wood indirectly by recording the environmental conditions. &nbsp; Depending on the thickness of the wood, it will eventually reach an equilibrium moisture content based a complex relationship between temperature and humidity.&nbsp; This is most commonly used in kiln drying, where charts <a href="http://www.conradlumberco.com/pdfs/ch12_Drying_Control_of_Moisture.pdf">allow the operator to follow a prescribed schedule</a> to drive the wood&nbsp;towards its&nbsp;target MC.</p>
<p>I do this in my shop using a more passive method.&nbsp; I have a sealed box with a <a href="http://www.amazon.com/AcuRite-75077-Wireless-Weather-Forecaster/dp/B0015KIFKG/ref=sr_1_3?ie=UTF8&amp;qid=1435164076&amp;sr=8-3&amp;keywords=wireless+weather">wireless temp/humidity sensor</a> inside and one located outside the shop.&nbsp; If it&rsquo;s a hot/dry day, I&rsquo;ll take the box outside and open it up.&nbsp; Sometimes the outside EMC can be&nbsp;as low as 3.5%&nbsp; (on a 90F day with 15% relative humidity). &nbsp; A 3.5% EMC means that if the wood stayed in those&nbsp;conditions&nbsp;for a long enough period of time, it would eventually reach a moisture content of 3.5%. &nbsp;By strategically opening and closing this box I can get my wood to within&nbsp;0.1% of my target EMC which in my application is about 7.8%.</p>
<p>I&rsquo;ve been using the environmental EMC method since before I received the EmonTH, using standard wireless weather station TH sensors.&nbsp; However, this required me to frequently enter&nbsp;the T/H <a href="http://www.csgnetwork.com/emctablecalc.html">values into a&nbsp;calculator</a>, and then manually log the results.</p>
<p>The relationship between temperature, humidity, and the resulting EMC is too complex to do with simple rules of thumb or head math. &nbsp;Here&rsquo;s the formula for calculating the Equilibrium Moisture Content based on Temp and Humidity. &nbsp;As you can see it&rsquo;s quite complex:</p>
<div>M = 1800/W [ KH/(1-KH) + (K<sub>1</sub>KH + 2K<sub>1</sub>K<sub>2</sub>K<sup>2</sup>H<sup>2</sup>) / (1&nbsp;+ K<sub>1</sub>KH + K<sub>1</sub>K<sub>2</sub>K<sup>2</sup>H<sup>2</sup>)</div>
<p>Soon after receiving the EmonTH, we realized the opportunity for this little device to perform these calculations automatically. &nbsp;We did this by editing the Arduino sketch to include the formula and to output the EMC value as a third &ldquo;virtual&rdquo; channel that could be logged directly to EmonCMS.&nbsp; This is a major improvement to our workflow, because for the first time we can visually see the environmental conditions that are affecting our wood materials.</p>
<p>We think this will be very useful for&nbsp;the following applications:</p>
<ul>
<li>Operating a <a href="https://pubs.ext.vt.edu/420/420-030/420-030_pdf.pdf">solar drying kiln</a>, that uses sunlight to dry green wood instead of burning coal or oil.&nbsp;</li>
<li>Logging the ambient conditions of a wood shop or factory space for <a href="http://www.wagnermeters.com/flooring/wood-flooring/moisture-content-data-quality-control-mmi1100/">quality control purposes</a>, such as warehouses that store wood flooring products or for contractors that are equalizing wood flooring on site prior to installation.&nbsp; Improper MC control&nbsp;in flooring products is the number one cause of loss and can result in thousands of dollars of damage if installed at the wrong MC.</li>
<li>Using a sealed box to stabilize smaller pieces of wood that need highly accurate MC, such&nbsp;as pen blanks, wood knife handles (often called scales), or thin&nbsp;veneers used for inlay or marquetry. &nbsp;</li>
<li>Restoration purposes like old houses or antique furniture.</li>
<li>Museums that display delicate wood items&nbsp;to keep them&nbsp;from cracking and falling&nbsp;apart.</li>
<li>Book repositories.&nbsp; We imagine that EMC has a similar effect on paper&nbsp;and that keeping it stable and controlled is critical for valuable collections.</li>
</ul>
<p>We have posted <a href="https://github.com/solarmill/OpenEMC/tree/origin/emc">our modified code to GitHub</a> and it&rsquo;s immediately available for public use. &nbsp; Our summer engineering intern Andy will be writing a follow up post with a technical description of how we achieved this mod, officially known as OpenEMC.</p>
<p>Please use, share, modify as needed, and enjoy! &nbsp;</p>
<p>-Bert Green</p>
<p>Founder, SolarMill<br />
&ldquo;we make things with sunshine&rdquo;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10989.html" class="topic-previous" title="Go to previous forum topic">‹ TA12-100</a>
              <a href="10970.html" class="topic-next" title="Go to next forum topic">Adding a hardware Real Time Clock (RTC) to the emonPi ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-31670"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8349.png" alt="SolarMill&#039;s picture" title="SolarMill&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/8349.html" title="View user profile.">SolarMill</a> on Wed, 24/06/2015 - 18:35.</div>
    <div class="content">
     <p><strong><u>Intro</u></strong></p>
<p>This is a follow&nbsp;up to the previous&nbsp;post&nbsp;about OpenEMC&nbsp;- our modification of the emonTH&nbsp;arduino sketch&nbsp;to output Equilibrium Moisture Content, aka EMC data.&nbsp; If you haven&#39;t read the previous post, definitely start there to learn about why&nbsp;EMC values are needed, and how an automated EMC sensor can help improve your processes.</p>
<p>I&#39;m Andy the intern, and my task for the week was to implement this system, or more specifically:</p>
<ul>
<li>fork the emonTH repository and set up a branch for our EMC code</li>
<li>modify the emonTH software to emit an EMC value along with Temperature and Humidity during each measurement</li>
<li>test this on our emonTH module and emonCMS website</li>
<li>publish our code publicly on GitHub and offer it back to OpenEnergyMonitor</li>
<li>write this&nbsp;article explaining how it was it done</li>
</ul>
<p><u><strong>Getting Started</strong></u></p>
<p>We started by forking the emonTH repo in GitHub, creating a private copy of the repo that is properly linked to the parent.&nbsp; This linkage is crucial not just for giving credit where credit&#39;s due, but also for being able to follow upstream changes.&nbsp; If the upstream code is updated, we need to be able to pull that update into our private code, and forking does this.&nbsp; Next we created a branch called &quot;emc&quot; to give a label to the changes we were making.</p>
<p><u><strong>Development</strong></u></p>
<p>First, we created a function to do the EMC calculation from measured&nbsp;temperature and humidity values.&nbsp; Many thanks to the captivatingly-named Wood Equilibrium Moisture Content Table and Calculator (<a href="http://www.csgnetwork.com/emctablecalc.html" title="http://www.csgnetwork.com/emctablecalc.html">http://www.csgnetwork.com/emctablecalc.html</a>) for their excellent tutorial on this calculation.</p>
<pre>
float EMCfromTH(float T, float H) { 
&nbsp; // formula from this page: <a href="http://www.csgnetwork.com/emctablecalc.html" title="http://www.csgnetwork.com/emctablecalc.html">http://www.csgnetwork.com/emctablecalc.html</a> 
&nbsp; H /= 100; 
&nbsp; float Tsquared = T * T; 
&nbsp; float W = 330 + 0.452 * T + 0.00415 * Tsquared; 
&nbsp; float K = 0.791 + 0.000463 * T - 0.000000844 * Tsquared; 
&nbsp; float Ka = 6.34 + 0.000775 * T - 0.0000935 * Tsquared; 
&nbsp; float Kb = 1.09 + 0.0284 * T - 0.0000904 * Tsquared; 
&nbsp; float M = 1800 / W * ( K * H / (1 - K * H) 
&nbsp;         + (Ka * K * H + 2 * Ka * Kb * K * K * H * H) 
&nbsp;         / (1 + Ka * K * H + Ka * Kb * K * K * H * H)); 
&nbsp; return M; 
}</pre><p>That formula expects temperature to be in Fahrenheit, so we added this helper function to do the conversion:</p>
<pre>
float CtoF(float C) { 
&nbsp; return C * 1.8 + 32.0; 
}</pre><p>Now that we have a working calculator, we need to connect this to the emonTH system, to feed temperature and humidity into it with each cycle, and get EMC out of it to transmit to emonCMS.&nbsp; That means two things: modifying the data structure that holds the output variables, and inserting a call to EMCfromTH into each cycle.&nbsp; Modifying the data structure is as easy as add adding an extra variable:</p>
<pre>
typedef struct { 
&nbsp; int temp; 
&nbsp; int temp_external; 
&nbsp; int humidity; 
&nbsp; int battery; 
&nbsp; int emc; 
} Payload; 
Payload emonth;
</pre><p>Finally, the line that makes it all work:</p>
<pre>
emonth.emc = EMCfromTH(CtoF(emonth.temp / 10.0), emonth.humidity / 10.0) * 10.0;
</pre><p>
<u><strong>Testing</strong></u></p>
<p>In addition to the code highlighted above, we added debugging output. &nbsp; By running the emonTH while connected to a serial port, we can see a stream of messages about the status of its systems, and the calculations it&#39;s performing.</p>
<p>Once we were able to verify that our calculated values matched the numbers on the Wood Equilibrium Moisture Content Table and Calculator Website, and that our emonTH+EMC was communicating reliably with the CMS website, we pushed our code back to github and invited the OpenEnergyMonitor folks to include the code in their system.</p>
<p><u><strong>Open-Source</strong></u></p>
<p>Full source code is available here, on the SolarMill GitHub page:<br />
<a href="https://github.com/solarmill/OpenEMC/tree/origin/emc" title="https://github.com/solarmill/OpenEMC/tree/origin/emc">https://github.com/solarmill/OpenEMC/tree/origin/emc</a><br />
&nbsp;</p>
<p>We&#39;ll be following this post to answer any questions or to fix any bugs.</p>
<p>-Andy Fabian</p>
<p>Engineering&nbsp;Intern, SolarMill<br />
&ldquo;we make things with sunshine&rdquo;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31672"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 24/06/2015 - 20:29.</div>
    <div class="content">
     <p>An interesting post guys, and very&nbsp;well structured.&nbsp;I didn&#39;t know that the moisture content of wood was so technical!&nbsp;but having read your post and some of the links I can see why it&#39;s so important.</p>
<p>One thing I didn&#39;t understand was why a sealed box, and why take it outside and open it on hot day&#39;s? Wouldn&#39;t it just be sufficient to monitor the temperature &amp; humidity (and thereby calculate the EMC) by having the sensors permanently sited in the same environment as the wood?</p>
<p>Also, as the EMC fluctuates according to the temp &amp; humidity, how will you determine the actual fixed figure, is it averaged?</p>
<p>Pau</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31674"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8349.png" alt="SolarMill&#039;s picture" title="SolarMill&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/8349.html" title="View user profile.">SolarMill</a> on Wed, 24/06/2015 - 21:58.</div>
    <div class="content">
     <p>The box curing method is specific to small pieces that need high accuracy. &nbsp;Say for example&nbsp;my piece of wood is currently at 12% MC and I need to get it to 7% MC. &nbsp;My shop might be at 9% EMC, which is better than 12% but not as dry as my target condition of 7. &nbsp;Now if it&#39;s 4% EMC outside, that will drive me towards my target condition faster, so I take my box outside and open it up. &nbsp;However, as the sun sets and the temperature drops, the humidity rises, and so does the EMC, maybe as high as 14% which is WORSE than when I started!&nbsp; &nbsp;So I have to watch the values and as soon at the ambient EMC rises above my target I close the box, locking in the drier air. &nbsp; &nbsp;More than likely my wood has still not fully reached my target. &nbsp;So over a couple hours the closed box will creep up in EMC to equalize with what my wood is currently at. &nbsp; Let&#39;s say it&#39;s at 9% now. &nbsp;I&#39;m almost there. &nbsp; After a couple of sessions using this method, I can reach my target MC. &nbsp;</p>
<p>After I reach my target MC, I keep it in the closed box until I need to shape/machine the wood. &nbsp;&nbsp;</p>
<p>This curing method is just one way of using EMC. &nbsp;There are several other applications, like knowing when the wood in a solar kiln has reached peak cure. &nbsp;(you can see the graph flat&nbsp;line when&nbsp;no more drying is happening).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31675"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8349.png" alt="SolarMill&#039;s picture" title="SolarMill&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/8349.html" title="View user profile.">SolarMill</a> on Wed, 24/06/2015 - 22:15.</div>
    <div class="content">
     <p>That&#39;s only for a situation when the wood is not as dry as I want it to be. &nbsp;If it&#39;s already at the target condition, then you&#39;re correct, nothing needs to be done but to monitor the environment. &nbsp;&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31676"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 24/06/2015 - 22:26.</div>
    <div class="content">
     <p>From your first post I hadn&#39;t realised&nbsp;that the wood was in the sealed box as well as the sensor!&nbsp;<br />
This looks like a fairly labour&nbsp;intensive process, couldn&#39;t you monitor &amp; control the environment where the wood is stored, rather than relying on prevailing environmental conditions? e.g. use a Dehumidifier on a controlled cycle?<br />
That way you could almost set the desired MC, and just sit back and wait for it to reach target.<br />
Power costs could be minimal, especially if solar powered.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31677"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8349.png" alt="SolarMill&#039;s picture" title="SolarMill&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/8349.html" title="View user profile.">SolarMill</a> on Wed, 24/06/2015 - 23:04.</div>
    <div class="content">
     <p>Which is easier: heating/cooling and dehumidifying a 2,000sq/ft workshop or opening and closing a well sealed weatherproof box? &nbsp;It&#39;s not really that labor intensive. &nbsp;I do it in the background as I&#39;m working on other things. &nbsp;It&#39;s as simple as &quot;oh look, it&#39;s really dry today, i&#39;m gonna set the box outside&quot; &nbsp;[which takes&nbsp;30sec tops] and then later in the day &quot;Hey look, the sun&#39;s setting, I need to close the box and bring it in.&quot; &nbsp; I do this occasionally&nbsp;over the course of a several&nbsp;weeks to maintain my inventory of ~80 iPhone case blanks (which are&nbsp;3.5&quot; x 12&quot; pieces of THIN wood that get&nbsp;milled into our iPhone cases).&nbsp; Since the blanks are so thin, they are easily influenced by daily swings, but likewise can be easily adjusted&nbsp;with passive, energy free methods.</p>
<p>A normal business might do as you suggest and install dehumidifiers and AC units,&nbsp;but to understand why I choose to simply open and close a box you&#39;d have to understand our business philosophy. &nbsp;We operate completely off the grid on solar power. &nbsp; We have limited energy available, certainly not enough to waste on running a dehumidifier or a heating element for a kiln. &nbsp; But also take into account the wood is already very dry. &nbsp;This&nbsp;is&nbsp;usually just to&nbsp;stabilize and equalize a box of small parts from 10%MC to 7.5% MC, which is only a&nbsp;few percentage points. &nbsp;We&#39;re not doing the initial&nbsp;drying cycle like this.&nbsp; However, those last few points are critical for our application and this simple method&nbsp;gets us better results than just leaving the wood laying around in the moist air of an unconditioned concrete wood shop. &nbsp;This is mostly about consistency and control, and working with a material at a known MC gives repeatable results! &nbsp;(these wood blanks get CNC milled to tolerances of 3thou)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31679"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/238.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-238.jpg" alt="Paul Reed&#039;s picture" title="Paul Reed&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/238.html" title="View user profile.">Paul Reed</a> on Wed, 24/06/2015 - 23:21.</div>
    <div class="content">
     <p>I never suggested &#39;heating/cooling and dehumidifying a 2,000sq/ft workshop!&nbsp;I suggested controlling the environment where your wood is stored - you&#39;re&nbsp;&#39;sealed box&#39; which I presume is fairly minimal capacity.</p>
<p>I suppose, it&#39;s whatever works for you.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31680"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8349.png" alt="SolarMill&#039;s picture" title="SolarMill&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/8349.html" title="View user profile.">SolarMill</a> on Thu, 25/06/2015 - 22:46.</div>
    <div class="content">
     <p>I reread your post and I see that now. &nbsp;We&#39;re pretty much on the same page, it&#39;s just that I don&#39;t have enough room in my box to squeeze in a dehumidifier and prefer to use a method that requires no additional electricity usage. &nbsp;Regardless of the method, you still need to know the EMC of the controlled space&nbsp;to&nbsp;know at what MC the wood will eventually equalize. &nbsp; Before this OpenEMC mod, we used weather sensors and had to put the data in manually. &nbsp;Now it&#39;s automatic! &nbsp;</p>
<p>Picture of our drying box attached. &nbsp; Fancy new sensor on the left, dumb old sensor on the right.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31682"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3426.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3426.jpg" alt="Bill Thomson&#039;s picture" title="Bill Thomson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/3426.html" title="View user profile.">Bill Thomson</a> on Thu, 25/06/2015 - 03:31.</div>
    <div class="content">
     <p><em>it&#39;s just that I don&#39;t have enough room in my box to squeeze in a dehumidifier.</em></p>
<p>Hi Bert,</p>
<p>Would desiccant crystals work? Say, on a day that&#39;s not sunny and dry, but you&#39;d like to get your project material to target MC with minimal delay.</p>
<p>Regards</p>
<p>Bill</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31687"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Thu, 25/06/2015 - 09:08.</div>
    <div class="content">
     <p>Interesting&nbsp;project thanks for sharing.</p>
<p>Could the next step be to use that data to automate the opening/closing using mini linear actuators&nbsp;for a self&nbsp;regulating version ??</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31700"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Thu, 25/06/2015 - 15:17.</div>
    <div class="content">
     <p>This is great! Thanks for sharing. I would love to do a blog post on the OpenEnergyMonitor blog about this. Have you got some more photos showing the hardware in action and some general cool shots of your workshop? Happy to include links to your website / social page. Would you be happy for me to copy and paste your post above into a blog post, include&nbsp;some photos and link back to this thread. Great application we would never have thought of! This is open-source at it&#39;s best :-D&nbsp;</p>
<p>Keep up the good work.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31711"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8349.png" alt="SolarMill&#039;s picture" title="SolarMill&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/8349.html" title="View user profile.">SolarMill</a> on Mon, 13/07/2015 - 04:46.</div>
    <div class="content">
     <p>Bill -&nbsp;Desiccant&nbsp;crystals might work ok, but there&#39;s a big difference between removing minor vapors in a sealed plastic bag with steel parts that don&#39;t absorb water and the actual drying of 20 lbs of wood which requires the removal&nbsp;of&nbsp;several milliliters&nbsp;of water. &nbsp;It would require a lot of crystals. &nbsp;I think it would be a little like trying to use desiccants&nbsp;to dry damp socks. &nbsp; However, it might be useful in keeping already dried wood in a slightly drier state. &nbsp;The other issue is that we don&#39;t want to over-dry our wood. &nbsp; We want to hit a set point and keep it there. &nbsp;When the wood gets below 5%MC, it&#39;s gets too dry to machine and is prone to splintering. &nbsp;</p>
<p>Paul- &nbsp;YES! &nbsp; We love this idea and had been thinking about something similar. &nbsp;Right now our&nbsp;needs are small enough that it&#39;s not worth it to fully automate but with OpenEMC&nbsp;used as part of a control loop, you could very easily set an Arduino&nbsp;up with something similar to&nbsp;PID control to open and close vents on a sealed box for drying, tempering, and equalizing batches of wood product. &nbsp;This could scale up larger to operate as the control system for a solar kiln. &nbsp; It could also be used for storage&nbsp;warehouses. &nbsp;Maybe the manager of a lumber or flooring warehouse&nbsp;gets an alert when the environment&nbsp;the product is stored in exceeds a certain set point, and to turn on a dehumidifier&nbsp;or fan to protect the product.</p>
<p>Glyn- &nbsp;Thanks for included our mods into the main development! &nbsp;We&#39;re very excited to be able to contribute to the awesome work your team is doing.</p>
<p>Everyone else- &nbsp;A lot of the discussion so far has focused on our wood drying box method, but I think the potential is much broader than this. &nbsp; For example, <a href="https://en.wikipedia.org/wiki/Humidor">tobacco humidors</a>&nbsp;need to be&nbsp;kept between&nbsp;65-74% RH at a temperature below 68F. &nbsp;However, people <a href="http://www.cheaphumidors.com/blog/cigar-smoking-tips/best-humidor-humidity-percentage/">can be very particular about the specific&nbsp;moisture</a> of their fine cigars. &nbsp; If kept at a constant temp of 64&deg;F, the difference&nbsp;between 65%RH and 74%RH is the difference between 12.1%MC and 14.3%MC ***(see footnote). &nbsp;Wouldn&#39;t it be easier to know the actual MC we&#39;re trying to achieve instead of guessing based&nbsp;on humidity? &nbsp;And yet, <a href="http://www.amazon.com/Quality-Importers-HygroSet-Hygrometer-Humidors/dp/B000H6CZQE">the average hygrometer</a> gives us the separate&nbsp;values without telling us what this really means in terms of MC. &nbsp;I&#39;m not even into tobacco, I&#39;m just using this as an example&nbsp;where people are looking for a specific outcome but using indirect means to achieve it.</p>
<p>Flooring installers may want to temporarily place a meter in rooms where a concrete slab has been recently poured. &nbsp;Especially if&nbsp;the space is unconditioned, the T&amp;H may swing widely, but by watching the EMC graph and looking for the line to flatten out they can know when the concrete is fully cured and no longer releasing large amounts of moisture. &nbsp;At that point it&#39;s ready for installation but before then you&#39;re looking for trouble.</p>
<p>Cabinet makers might want to monitor their general work area, if that also happens to be the space&nbsp;they store their&nbsp;lumber, to better understand where their&nbsp;wood is in terms of MC. &nbsp;If they know their shop is on the dry end and their project is shipping to rainforest, they might want to consider&nbsp;giving more allowance for the wood to expand. &nbsp;If the&nbsp;shop is on&nbsp;the wetter end and the project is going somewhere dry, they might want their tenons to be a little extra tight, knowing they will shrink. &nbsp;If you really want to be scientific about it, you can look up the species and the grain orientation (flat or plain&nbsp;sawn)&nbsp;and calculate the amount of movement. &nbsp;There&#39;s <a href="http://www.woodweb.com/knowledge_base/A_Finish_Carpenters_Guide_to_Understanding.html">a LOT of data</a> out there on this.</p>
<p>The general public might be interested in how EMC can better represent&nbsp;the general feeling of the weather. &nbsp;We all know how miserable&nbsp;a hot humid day is, but it&#39;s good validation when you can see it change from 3%EMC to 18%EMC over just a few hours&nbsp;as a&nbsp;storm rolls in.</p>
<p>The point about EMC is it gives a better representation of what&#39;s happening to wood products than temperature and humidity can tell us independently of each other.</p>
<p>We&#39;re looking forward to seeing how other people can use this</p>
<p>Bert and Andy<br />
<a href="http://www.facebook.com/SolarMill" title="http://www.facebook.com/SolarMill">http://www.facebook.com/SolarMill</a></p>
<p>***Tobacco leaves, and leaves in general,&nbsp;have a higher&nbsp;cellulose to lignin ratio&nbsp;and the formula for EMC is based on a higher lignin ratio, the dominant fiber in solid woods. &nbsp;Even so, it seems to be a really close approximation.&nbsp;&nbsp;Also, from what I&#39;ve read you don&#39;t want the tobacco to ever go&nbsp;above a certain temperature regardless of the humidity, because at 77&deg;F tobacco beetle eggs hatch. &nbsp;I guess there&#39;s always a chance they&nbsp;are in the product and you keep it cool to prevent any possible damage.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31720"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Fri, 26/06/2015 - 08:59.</div>
    <div class="content">
     <p>Blog post is up!&nbsp;<a href="http://openenergymonitor.blogspot.co.uk/2015/06/openemc-emonth-mod-for-woodworkers.html">http://openenergymonitor.blogspot.co.uk/2015/06/openemc-emonth-mod-for-woodworkers.html</a></p>
<p>Let me know if you want me to make any corrections.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31797"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8349.png" alt="SolarMill&#039;s picture" title="SolarMill&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/8349.html" title="View user profile.">SolarMill</a> on Tue, 30/06/2015 - 03:57.</div>
    <div class="content">
     <p>The blog looks awesome! &nbsp;Thanks for the shout out. &nbsp; We&#39;re working on other OpenEnergyMonitor extensions/mods as well. &nbsp;Currently we&#39;re trying to get a good DC monitoring setup going. &nbsp; We&#39;ve seen on the forum several other people working on this. &nbsp;We&#39;re using an arduino running a modified sketch connected to a 5 channel hall effect board. &nbsp; The hardest part of course is monitoring voltages. &nbsp;We have a 48v battery bank. &nbsp;It seems that measuring 48v DC&nbsp;is trickier than measuring 120v AC. &nbsp;At least with AC you can use a step down transformer. &nbsp; With DC the most common solution appears to be a voltage divider. &nbsp;Either the resistor values&nbsp;are spec&#39;d&nbsp;too low and a lot of power is wasted or the resistors are spec&#39;d too high and the impedance&nbsp;of the measuring circuit starts to affect the accuracy.</p>
<p>One post I saw recently&nbsp;solved this problem by using the data output from their inverters. &nbsp;I like this solution, but also recognize there&#39;s a need for people without such hardware to be able to monitor their battery voltages. &nbsp;Our setup is completely off grid, and it&#39;s clear that most of the intent behind the OpenEmon&nbsp;ecosystem is grid tied with a focus on import/export so someone out there needs to hash out the off-grid details.</p>
<p>When we get our version worked out, we&#39;ll be doing a thorough write-up on it as well. &nbsp;Always happy to contribute to a community that&#39;s passionate about clean energy.</p>
<p>-Bert<br />
SolarMill</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31809"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1894.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Ian Eagland&#039;s picture" title="Ian Eagland&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/1894.html" title="View user profile.">Ian Eagland</a> on Tue, 30/06/2015 - 11:41.</div>
    <div class="content">
     <p>&nbsp;Hi</p>
<p>I am no electronics engineer but when I faced this problem on 24V DC I am sure I found&nbsp;a reference to using an opamp to solve the impedance problem. I built a circuit some time ago and as far as I know it is working perfectly, the battery voltage in emon&nbsp;tracks the Inverter reading close enough for me.</p>
<p>Regards</p>
<p>Ian</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31814"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 30/06/2015 - 21:41.</div>
    <div class="content">
     <p>I don't understand where the problem is - unless it is one of isolation (which can be a very serious issue, and where it gets tricky). For an isolated voltage transducer, you might like to look at the LEM LV 25-P, which was found by dominator99, see <a href="10775.html" title="http://openenergymonitor.org/emon/node/10775">http://openenergymonitor.org/emon/node/10775</a></p>
<p>It does have a fairly high current draw on the DC side, requiring 10 mA to operate, but at 48 V that implies only &frac12;W of dissipated power in the dropper resistor, which is not all that onerous.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-32134"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8349.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-8349.png" alt="SolarMill&#039;s picture" title="SolarMill&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OpenEMC - An EmonTH mod for woodworkers</h3>

    <div class="submitted">Submitted by <a href="../user/8349.html" title="View user profile.">SolarMill</a> on Sun, 12/07/2015 - 13:43.</div>
    <div class="content">
     <p>We&#39;ve made great progress the past two weeks figuring out the details of&nbsp;a&nbsp;voltage monitoring device we&#39;re planning to build. &nbsp;Our final solution is very much like what Ian Eagland suggested, which is a voltage divider to an opamp. &nbsp; We considered Robert Wall&#39;s&nbsp;suggestion of&nbsp;the LEM LV 25-P, but deemed it to be too expensive. &nbsp; We&#39;ll be starting a new thread for this topic in the coming days.</p>
<p>Back to the Original Post- &nbsp;Has anyone else out there tried our EMC sketch? &nbsp; Have you found it to be stable and &nbsp;functional? &nbsp;<br />
We&#39;re excited to see what applications this may find. &nbsp; What have people been using it for?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10899"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-7nOk5TtmafdTStm9rQTijPmQFb-RLvcXTCCEgo2rFaI" value="form-7nOk5TtmafdTStm9rQTijPmQFb-RLvcXTCCEgo2rFaI"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
