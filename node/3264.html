<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3264 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:05:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>emonGLCD Time display erratic after 10 minutes normal running - solved | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">emonGLCD Time display erratic after 10 minutes normal running - solved</h3>
        <span class="submitted">Submitted by <a href="../user/3619.html" title="View user profile.">deskyeti</a> on Wed, 04/12/2013 - 17:31</span>
        <div class="content"><p>Just rebuilt my system using the new Raspberry Pi + Hard drive image. Sorted out the inputs and created some feeds, noticed after about 10 minutes of normal running the time displayed on the LCD suddenly starts leaping about all over the place after having correctly displayed the time. It will jump to a seemingly random time then on the Raspberry Pi time update interval display the correct time for a couple of seconds then revert back to the wrong time.</p>
<p>I am running the &quot;HomeEnergyMonitor&quot; sketch on the LCD, has the data transmitted by the rfm12PI&nbsp;module changed in this new build? Do I need to update the LCD sketch or is something else going wrong here?</p>
<p>Previously the system was working fine (till my SD card died) for a good 3 months.</p>
<p>I&#39;m going to modify the LCD sketch to add in a few print statements so I can check in the serial console what it is receiving, but if anyone has a good idea what is going on, or how to debug this I would really appreciate the help.</p>
<p>Keith</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3280.html" class="topic-previous" title="Go to previous forum topic">‹ [SOLVED] Problem with emoncms.org db replication</a>
              <a href="2995.html" class="topic-next" title="Go to next forum topic">emonCMS backup. ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-16553"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD Time display erratic after 10 minutes normal running - solved</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Wed, 04/12/2013 - 21:58.</div>
    <div class="content">
     <p>Hello Keith, my mistake, the new control packet module is sending on the same node id, I will make an update to fix it.</p>
<p>The easy way to get it to work straight away before a better fix is to remove the control packet addition which can be done by doing the following:</p>
<pre>
cd /var/www/emoncms/Modules/raspberrypi

git checkout raspberrypi_run.php

sudo /etc/init.d/rfm12piphp restart</pre>         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16554"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3619.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="deskyeti&#039;s picture" title="deskyeti&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD Time display erratic after 10 minutes normal running - solved</h3>

    <div class="submitted">Submitted by <a href="../user/3619.html" title="View user profile.">deskyeti</a> on Wed, 04/12/2013 - 22:24.</div>
    <div class="content">
     <p>Many thanks Trystan, I&#39;ll try the update first thing tomorrow. Glad it&#39;s not something I had done wrong.</p>
<p>&nbsp;</p>
<p>Keith</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16572"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD Time display erratic after 10 minutes normal running - solved</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 05/12/2013 - 20:16.</div>
    <div class="content">
     <p>For people interested in sending control packets as well as emonglcd time or sending the time to control nodes. I&#39;ve added a new feature to the packetgen module that moves the time packet generation to packetgen and out of raspberrypi_run.php<br />
	The commit is here: <a href="https://github.com/emoncms/packetgen/commit/371b9cefa5d0e1818c55d24bdfed2611796f6d61">https://github.com/emoncms/packetgen/commit/371b9cefa5d0e1818c55d24bdfed2611796f6d61</a></p>
<p>To use this update these are the steps on the raspberrypi:</p>
<pre>
cd /var/www/emoncms/Modules/packetgen
git pull
cp copyto_raspberrpi_module/raspberrypi_run.php /var/www/emoncms/Modules/raspberrypi/
sudo /etc/init.d/rfm12piphp restart</pre><p>Which moves to the packetgen folder, downloads the update from github, copies over the new raspberrypi_run.php script and then restarts the rfm12piphp service. (You can copy and paste all 4 lines at once, you may need to press enter)</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-16573"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-3.jpg" alt="TrystanLea&#039;s picture" title="TrystanLea&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: emonGLCD Time display erratic after 10 minutes normal running - solved</h3>

    <div class="submitted">Submitted by <a href="../user/3.html" title="View user profile.">TrystanLea</a> on Thu, 05/12/2013 - 20:39.</div>
    <div class="content">
     <p>For the default emonglcd sketch to detect the time packet generated by packetgen a control packet that starts like this needs to be created:</p>
<p>The variable names hour, minute, second are special names that tell the module to automatically set the values of these variables to the system time:</p>
<p><img alt="" src="../sites/default/files/timeexample.png" style="width: 600px; height: 520px;" /></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3264"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-YaO-DBVAJJN_d9qvGbDd7L3ACpeB-eO2XjxH963LJJg" value="form-YaO-DBVAJJN_d9qvGbDd7L3ACpeB-eO2XjxH963LJJg"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
