<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/2275 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:38:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>OKG getting started. | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">OKG getting started.</h3>
        <span class="submitted">Submitted by Guest on Mon, 22/04/2013 - 14:40</span>
        <div class="content"><p>Hi,</p>
<p>I&#39;ve just built up an OKG base according to the instructions with Wiznet 5200</p>
<p><a href="http://wiki.openenergymonitor.org/index.php?title=Open_Kontrol_Gateway#Using_OKG_with_Wiznet_W5200">http://wiki.openenergymonitor.org/index.php?title=Open_Kontrol_Gateway#Using_OKG_with_Wiznet_W5200</a></p>
<p>I have a enonTx running and have confirmed that the OKG is getting the Power data by commenting out the ethernet setup in the example shield.</p>
<p>I&#39;m not sure what to do next !</p>
<p>With the full sketch running I get the following on the serial monitor:</p>
<p>openenergymonitor.org RFM12B &gt; OKG &gt; Wiznet, &gt; emoncms<br />
	Failed to configure Ethernet using DHCP<br />
	Local IP address: 224.129.181.55.<br />
	Node: 15 Freq: 868Mhz Network: 210<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data</p>
<p>This is repeated every 8 seconds due to the watchdog I presume.</p>
<p>I would like to display my power data on the Emoncms.org dashboard.</p>
<p>Thanks</p>
<p>Paul</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="2307.html" class="topic-previous" title="Go to previous forum topic">‹ Led on Digital 9 not working</a>
              <a href="2305.html" class="topic-next" title="Go to next forum topic">emontTx v2 program header pinout ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-11522"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 22/04/2013 - 20:29.</div>
    <div class="content">
     <p>Register with emoncms.org and get your APIkey.</p>
<p>Then reinstate the Ethernet part of the sketch. You need to put your own settings into the constants. mac must be unique on your local net, the rest are my ISP&#39;s/my router&#39;s, you&#39;ll get yours from your router:</p>
<p>byte mac[] = {0x00, 0x14, 0xa4, 0x23, 0xa4, 0x3c };&nbsp;&nbsp; &nbsp;<br />
	byte dnsserver[] = {212,159,6,10}; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// DNS Server<br />
	byte gateway[] = {192, 168, 1, 254}; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// Gateway<br />
	byte dnss[] = {212,159,6,10}; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// DNS Server<br />
	byte subnet[] = {255, 0, 0, 0}; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// Subnet mask<br />
	&nbsp;</p>
<p>Put your APIkey into the character strings - without the [ ] :</p>
<p>char apiurl[] = &quot;http://emoncms.org/api/post.json?apikey=[YOURAPIKEY]&quot;;<br />
	char timeurl[] = &quot;http://emoncms.org/time/local.json?apikey=[YOURAPIKEY]&quot;;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11529"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bartonp&#039;s picture" title="bartonp&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by bartonp (not verified) on Mon, 22/04/2013 - 21:47.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>Thanks for the reply.</p>
<p>Excuse my ignorance, I am using the example sketch:</p>
<p><a href="https://github.com/openenergymonitor/Open-Kontrol-Gateway/blob/master/OKG_Wiz5200_RFM12B_emoncms/OKG_Wiz5200_RFM12B_emoncms.ino">https://github.com/openenergymonitor/Open-Kontrol-Gateway/blob/master/OKG_Wiz5200_RFM12B_emoncms/OKG_Wiz5200_RFM12B_emoncms.ino</a></p>
<p>could you point out exactly what I need to change from the ethernet settings.</p>
<p>Also how do I find out my</p>
<p>byte mac[] = {0x00, 0x14, 0xa4, 0x23, 0xa4, 0x3c };&nbsp;&nbsp;&nbsp;<br />
	byte dnsserver[] = {212,159,6,10};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // DNS Server<br />
	byte gateway[] = {192, 168, 1, 254};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Gateway<br />
	byte dnss[] = {212,159,6,10};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // DNS Server<br />
	byte subnet[] = {255, 0, 0, 0};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Subnet mask</p>
<p>settings.</p>
<p>Thanks in advance</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11538"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 23/04/2013 - 12:38.</div>
    <div class="content">
     <p>I get exactly the same with that sketch - and now the sketch I lifted those settings from doesn&#39;t work either! There&#39;s something else that has changed ...&nbsp; I&#39;m working on it.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11554"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 23/04/2013 - 20:15.</div>
    <div class="content">
     <p>OK, I&#39;ve located my problem - the &quot;special&quot; Ethernet and JeeLib libraries for the OKG had got overwritten when I updated the Arduino IDE. If that&#39;s your problem too, details and links are in Modules - emonBase -Open Kontrol Gateway.</p>
<p>The total changes to the file you linked to:</p>
<p>RF frequency,<br />
	mac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Choose one that does NOT exist on your local network)<br />
	apikey&nbsp;&nbsp; - in two places, apiurl &amp; timeurl<br />
	and you also need to change apiurl to<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char apiurl[] = &quot;http://emoncms.org/<strong>input</strong>/post.json?apikey=YOUR-API-KEY&quot;;</p>
<p>You can ignore everything I wrote earlier as you&#39;re starting from a different place.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11588"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bartonp&#039;s picture" title="bartonp&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by bartonp (not verified) on Thu, 25/04/2013 - 08:03.</div>
    <div class="content">
     <p>Thanks for your reply Robert,</p>
<p>Unfortunately I&#39;ve tried all that and still get the same result on the serial monitor. Any other ideas?.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11601"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 25/04/2013 - 12:42.</div>
    <div class="content">
     <p>Can we go through what you have done so far:</p>
<p>1. You&#39;ve registered with emoncms.org and got an APIkey.</p>
<p>2. You&#39;ve built your OKG base and done the reset mod.</p>
<p>3. You&#39;ve thrown away the Ethernet library that came with your Arduino IDE, and any Jeelib library you&#39;d previously downloaded, and replaced them with the special ones downloaded from the links on the our OKG page <a class="external text" href="https://github.com/openenergymonitor/Ethernet" rel="nofollow">download from OpenEnergyMonitor GitHub.</a> (And you must have restated the IDE since installing the libraries,&nbsp; they are only read - or at least recognised - on startup of the IDE. <u>All</u> instances of the IDE must be closed.)</p>
<p>4. You&#39;ve plugged your API <strong>read/write</strong> key into the sketch, and changed the other things I mentioned (not that this would prevent you connecting to the Internet).</p>
<p>How are you powering your OKG - 5 V via the coaxial d.c. connector?<br />
	Note the FTDI connector parallels the 5 V and 3.3 V lines, so if your programmer gives 5 V, you must&nbsp; <strong>NOT</strong> close the optional link to power it from the FTDI programmer as this over-volts the Wiznet adapter.</p>
<p>Is your router blocking it?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11602"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bartonp&#039;s picture" title="bartonp&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by bartonp (not verified) on Thu, 25/04/2013 - 16:48.</div>
    <div class="content">
     <p>Hi Robert,</p>
<p>As far as I know I have done all mentioned in 1,2,3,4 and powered the OKG from the 5V dc connector. ( I don&#39;t have the link fitted).</p>
<p>How do I know if my router is blocking it?. it is a TalkTalk D-Link.</p>
<p>Is there anything I can do to confirm that the ethernet is working?.</p>
<p>Paul.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11610"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Thu, 25/04/2013 - 20:58.</div>
    <div class="content">
     <p><em>How do I know if my router is blocking it?. it is a TalkTalk D-Link.</em><br />
	I don&#39;t know your router. All I can suggest is you go thought the router setup pages and check to see if there is anything that looks as if it might stop it, for example a list of permitted/restricted IP/MAC addresses, firewalls and the like.<br />
	&nbsp;</p>
<p><em>Is there anything I can do to confirm that the ethernet is working?.</em></p>
<p>I suspect the Ethernet connection isn&#39;t working, and I have found no information that can even tell me how to find out why. All I&#39;ve been able to find is &quot;This works for me&quot;.</p>
<p>I&#39;ve got to repeat that with the wrong libraries, a sketch that was known to work failed, apparently in exactly the same way as you describe. Now it&#39;s working, I see on the Wiznet Ethernet socket a continuous orange LED, and a green LED that goes out for each message whichever the direction. (If I sabotage the special libraries and restore the original ones, I get both LEDs on continuously. And in doing this test, I discovered that the libraries need to be deleted - renaming the directory isn&#39;t enough.)&nbsp; On my router (a BT/Thompson), I see, listed under devices:</p>
<p class="rteindent1"><a>WIZnet213032</a>&nbsp;&nbsp;&nbsp; 192.168.1.66</p>
<p>The IP address is allocated by the router, the 6 digits after WIZnet are the last 6 of the MAC address you gave it. But of course if it isn&#39;t connecting, you won&#39;t get this far even.</p>
<p>Edit: You do have DHCP turned on, in your router?</p>
<p>If none of that helps, we&#39;ll ask Glyn or Trystan for help, because I&#39;ve run out of ideas.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11625"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bartonp&#039;s picture" title="bartonp&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by bartonp (not verified) on Fri, 26/04/2013 - 16:08.</div>
    <div class="content">
     <p>Thanks for the tips,</p>
<p>I erased the old re-named libraries anr re-compiled. Now when powered up there is quite a long delay before the below appears on the monitor:</p>
<p>Failed to configure Ethernet using DHCP<br />
	Local IP address: 192.168.1.99.<br />
	Node: 15 Freq: 868Mhz Network: 210<br />
	Cant connect to send data<br />
	Cant connect to req time<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to req time<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to req time<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to send data<br />
	Cant connect to req time<br />
	Cant connect to send data</p>
<p>&nbsp;</p>
<p>Now the watchdog is not resetting every 8 seconds and the ethernet leds are behaving as you mentioned ie. orange on and green flashing. Progress in a way I think!</p>
<p>BTW I have no time data being broadcast so I would not expect to see that anyway, I presume it would work with just the 4 power values.</p>
<p>Paul.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11626"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bartonp&#039;s picture" title="bartonp&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by bartonp (not verified) on Fri, 26/04/2013 - 16:45.</div>
    <div class="content">
     <p>Progress:</p>
<p>I re-loaded the original example and updated the two API keys, increased the line char line_buf[512 <strong>(was 50)</strong> ]; and updated the line if (strcmp(line_buf,&quot;ok&quot;)==0) to&nbsp; if (strcmp(&amp;line_buf[pos-2],&quot;ok&quot;)==0)</p>
<p>I now get:</p>
<p>disconnecting.</p>
<p>Sent: {rf_fail:0,power1:675,power2:0,power3:0,voltage:24078}</p>
<p>disconnecting.</p>
<p>Sent: {rf_fail:0,power1:691,power2:0,power3:0,voltage:24085}</p>
<p>disconnecting.</p>
<p>Sent: {rf_fail:0,power1:680,power2:0,power3:0,voltage:24077}</p>
<p>disconnecting.</p>
<p>Sent: {rf_fail:0,power1:674,power2:0,power3:0,voltage:24075}</p>
<p>So I assume I am now outputing the values to the ethernet.</p>
<p>One last hurdle I think, How do I see the values on Emoncms. I&#39;ve setup a couple of inputs but they come up as inactive.</p>
<p>Paul.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11629"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 26/04/2013 - 17:22.</div>
    <div class="content">
     <p>That does indeed look as if data is getting out. If you go back to your emonTx, you gave it a Node number (probably 10, it&#39;s <strong>not </strong>15 because that is your OKG).</p>
<p>Did you set up Inputs or Feeds?</p>
<p>You should have under Input a &quot;Node 10&quot;. Click + to expand that and your inputs should be there, in the order they are in PayloadTX: power1, power2, power3, voltage. The names are &quot;1&quot;, &quot;2&quot; etc which you can&#39;t change, but you can click the pen icon to add a description &quot;Power 1&quot; maybe, etc. Click the tick when done. If you click the spanner icon, the easiest thing is Log to Feed, give the feed a name and &quot;create new&quot; (or send it to an existing feed if that&#39;s what you made earlier) and click &quot;add&quot;. When you&#39;ve done that it should show up on the feeds page.<br />
	&nbsp;</p>
<p>(Mine works fine with line_buf[50] ! )</p>
<p>&amp;line_buf[pos-2] means that the headers aren&#39;t being parsed out correctly! Maybe your router is stripping something out - or adding something. Or might it be your ISP? Weird. I&#39;ll bounce that one off G&amp;T.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11633"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bartonp&#039;s picture" title="bartonp&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by bartonp (not verified) on Fri, 26/04/2013 - 18:46.</div>
    <div class="content">
     <p>I Only put this in as i saw It on some post somewhere &nbsp;if (strcmp(&amp;line_buf[pos-2],&quot;ok&quot;)==0)</p>
<p>It may not be correct.</p>
<p>When i look at the input screen of emoncms i only get the message no inputs created. Should they just appear?</p>
<p>Also i noticed that the api key is slightly different in the feed screen compared to the input screen, which should i use?</p>
<p>Thanks Paul</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11636"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 26/04/2013 - 20:41.</div>
    <div class="content">
     <p><em>It may not be correct.</em> I think that is right - it should not be correct! The incoming data is parsed and copied such that &quot;ok&quot; is all there is in the string. I&#39;d need to work through parsing the headers again to check whether the two are equivalent.</p>
<p>But that won&#39;t affect data getting into emoncms - but it will cause the OKG to think the data didn&#39;t get through and reset.</p>
<p><em>i only get the message no inputs created. Should they just appear?</em> Yes they should.</p>
<p><em>Also i noticed that the api key is slightly different in the feed screen compared to the input screen, which should i use?</em><br />
	I don&#39;t believe you<em> -</em> it might be masked by the size of the window but if you click somewhere on the key and do [ctrl]+[A] then [ctrl]+[C] you should have the same key wherever you get it from. DO use the read &amp; write key, <strong>not</strong> the read-only one. A wrong APIkey will mean your data is refused, so that might explain why &quot;No inputs created&quot;.<br />
	&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11639"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="bartonp&#039;s picture" title="bartonp&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by bartonp (not verified) on Fri, 26/04/2013 - 21:33.</div>
    <div class="content">
     <p>Ahhh.... I was using the read API key.</p>
<p>I am now getting values in Emoncms. It took quite a while for the inputs to appear after resetting the OKG 2 mins say.</p>
<p>Thanks again for spoon feeding me through this process!!</p>
<p>Much appreciated.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-11642"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: OKG getting started.</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Fri, 26/04/2013 - 22:44.</div>
    <div class="content">
     <p>Phew ! ! !&nbsp;&nbsp; I&#39;m glad you got there in the end.</p>
<p>I&#39;ll bet you can put line_buf back as it was now.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/2275"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-27pOeBB9MDRWpgA6mBYj8QXNTVMY0a1-BklD0oxG-_k" value="form-27pOeBB9MDRWpgA6mBYj8QXNTVMY0a1-BklD0oxG-_k"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
