<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10820 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 14:59:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial... | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>
        <span class="submitted">Submitted by <a href="../user/8280.html" title="View user profile.">ChristianZ</a> on Mon, 08/06/2015 - 17:32</span>
        <div class="content"><p>Dear all,</p>
<p>First of all - REALLY GREAT HARD &amp; SOFTWARE as well as support here ! I really appreciate this !</p>
<p>Now for my problem:</p>
<p>I&#39;d like to record multiple power channels (9+) in our house with a short period (~1/second) each. I am currently using 1xEmonTxV3&nbsp; and 4x EmonTH for temperature and humidity with a 20s interval via RF433.</p>
<p>Time by time, the RF signals seem to overlap (in time) resulting in a &quot;last updated&quot; value of much longer then 10s/20s. Since I&#39;d like to switch to 3x EmonTxV3 with a 1s interval each I&#39;m not sure whether this works out.</p>
<p>Is there any chance to connect more then 1 TxV3 via a serial cable directly to the raspberry ? I am a novice to the RaspberryPi - so please forgive me the question - is there more then one serial interface on the Pi ?</p>
<p>Any idea on how to solve this in a totally different way are welcome as well.</p>
<p>&nbsp;</p>
<p>Best regards - Christian</p>
  <div class="forum-topic-navigation clear-block">
          <a href="10819.html" class="topic-previous" title="Go to previous forum topic">‹ Emoncms v8.4.0 timestamp error</a>
              <a href="10818.html" class="topic-next" title="Go to next forum topic">Emon pi &amp; electric car ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-31068"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8280.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChristianZ&#039;s picture" title="ChristianZ&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/8280.html" title="View user profile.">ChristianZ</a> on Mon, 08/06/2015 - 18:05.</div>
    <div class="content">
     <p>Just one short addition here - just after writing the text above I did a short search for Raspberry UART count and found someone&#39;s idea of using USB-to-UART(TTL) converters which would give additional serial inputs.</p>
<p>Would it be possible for emonHub to receive data from multiple serial interfacers ?</p>
<p>Could emonHub add additional infos to the serial stream - like a node id ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31069"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 08/06/2015 - 18:56.</div>
    <div class="content">
     <p>you can indeed use usb&lt;-&gt;serial adapters, I frequently hook up nodes via a FTDI programmer. In emonhub&nbsp;you would need to define the additional interfacers&nbsp;in emonhub.conf probably using /dev/ttyUSB0 and /dev/ttyUSB1 in place of the /dev/ttyAMA0,</p>
<p>​I would recommend setting them up identically in emonhub.conf and define the&nbsp;node id&#39;s&nbsp;in the emontx sketches as the way Raspbian&nbsp;allocates the device ref&#39;s (ttyUSB0 and ttyUSB1) is not absolutely&nbsp;guaranteed to be the same&nbsp;at each reboot, they are allocated in order as the devices are discovered but if they are configured to be identical&nbsp;and the node id is part of the incoming payload it doesn&#39;t matter.</p>
<p>If you search the forum for&nbsp;&quot;serial-direct&quot; you will see it&#39;s quite common and quite easy to implement a single emonTx, just edit the sketch to output a node id and payload in the &quot;nodeid var1&nbsp;var2 var3...&quot; format and edit emonhub.conf.</p>
<p>Paul&nbsp;.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31074"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8280.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChristianZ&#039;s picture" title="ChristianZ&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/8280.html" title="View user profile.">ChristianZ</a> on Mon, 08/06/2015 - 19:40.</div>
    <div class="content">
     <p>That sounds great - thanks for the help.<br />
I will have a look at the serial-direct discussions.</p>
<p>I saw a Arduino script for &quot;serial-direct&quot; - is it possible to use the discrete sample sketch with RF and export the data to the serial port as well ?<br />
And is it possible to decrease the interval between measurements and serial send ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31075"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Mon, 08/06/2015 - 20:38.</div>
    <div class="content">
     <p>I would of thought this setup would work with any of the OEM sketches, most of them already have some foem of serial output for debugging. The existing serial prints just need to be replaced with the &quot;OEM formatted payload&quot; in the form nodeid&nbsp;val1&nbsp;val2 val3....etc&quot; so yes you should be able to pas the same dat over serial and by rf from the same sketch.</p>
<p>Shortening the interval between serial prints is very do&#39;able&nbsp;depending on what other stuff is happening you could probably&nbsp;do 1 sec, however if you are sending rf packets in tandem that could cause traffic&nbsp;issues on the rf network so you need to only go as fast as the rf will let you or add some code to increase the frequency of the serial outputs only which will involve some totalling and/or averaging so not so straight forward.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31076"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8280.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChristianZ&#039;s picture" title="ChristianZ&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/8280.html" title="View user profile.">ChristianZ</a> on Mon, 08/06/2015 - 20:56.</div>
    <div class="content">
     <p>The idea behind was to screw off the RF Antennae from 3 TxV3 and give them an interval of 1/s or below.<br />
I&#39;d realy like to do some &quot;profiling&quot; on the current lines to decide between &quot;devices&quot; beeing switched on and of.</p>
<p>The idea was to change the Interval maybe by the dip switches (instead of US, ...) and to omit things like one wire Temp sensors or pulse counting (since I don&#39;t need it - maybe pulse....).</p>
<p>I guess even RF sending could be turned on or of by dip switches.</p>
<p>Which interval will be the smallest possible (with serial transmit only) ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31077"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8280.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChristianZ&#039;s picture" title="ChristianZ&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/8280.html" title="View user profile.">ChristianZ</a> on Mon, 08/06/2015 - 21:15.</div>
    <div class="content">
     <p>and a little off topic - regarding calibration....</p>
<p>Do I need to calibrate the readings for the TxV3 when ordered with a standard AC/AC Adapter ?<br />
And when YES, what do I need to calibrate ?</p>
<p>Especially - Do I need to calibrate the internal reference voltage or not ?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31078"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Mon, 08/06/2015 - 21:47.</div>
    <div class="content">
     <p><em>Do I need to calibrate the readings for the TxV3 when ordered with a standard AC/AC Adapter ?</em></p>
<p>Most likely yes, to compensate for component variations.</p>
<p><em>And when YES, what do I need to calibrate ?</em></p>
<p>Voltage, Current and Phase Angle.</p>
<p><em>Especially - Do I need to calibrate the internal reference voltage or not ?</em></p>
<p>No. &nbsp; It doesn&#39;t matter what the Vref&nbsp;is so long as it&#39;s stable &nbsp;(actually, I think most OEM sketches use Vcc as the Vref). &nbsp; Any component variations in Vref&nbsp;will get sorted out when you calibrate the above items. &nbsp;</p>
<p>The only exception to that is when you&#39;re running off batteries. &nbsp;ReadVcc() effectively uses&nbsp;one of the internal bandgap voltages to measure the battery voltage. &nbsp;If you want that battery&nbsp;measurement to be accurate then you need to know your actual bandap voltage. &nbsp;Since you&#39;re running of mains, you can ignore it.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31105"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 09/06/2015 - 11:53.</div>
    <div class="content">
     <p>I would disable the rf in code rather than unscrew the antenna to reduce the workload (and possible seepage) I do not know what speeds you could manage as there are too many variables (for me anyways) things to bear in mind is the prints can slow down the code so may impact readings. If the print loop is independent of the calculations you may end up sending the same results multiple times in between calc cycles.</p>
<p>A RPi 2 B would be better suited to this than a B or B+ and it will probally be best to throttle the uploads to emoncms. If you set a send interval of 10secs&nbsp;for instance emonhub&nbsp;will collate all the data and send it in one go every 10&nbsp;seconds rather than bombard the server. This is an absolute must if sending to emoncms.org, you can of course send as frequently as you like to a local server but it won&#39;t improve anything except responsiveness of the widgets as the same number of data points are passed just in&nbsp;batches rather than singly.</p>
<p>It may also be a good idea&nbsp;to use a&nbsp;localhost&nbsp;url to keep the traffic off the LAN or going via a DNS etc.</p>
<p>It will be interesting to hear back what speeds you obtain, I know on occasions&nbsp;when I have omited a delay data frames can successfully accumulate much faster than I could count but I have never actually checked the accuracy or validity of them. maybe someone could theorize an estimate??</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31106"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8280.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChristianZ&#039;s picture" title="ChristianZ&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/8280.html" title="View user profile.">ChristianZ</a> on Tue, 09/06/2015 - 12:48.</div>
    <div class="content">
     <p>Maybe I misunderstood the whole process of measurement within the script.</p>
<p>As far as I understood, the sketch does a discrete sampling of same values (Voltage from AC/AC, Power from CT1..4). After having recorded these samples (how long is the sample period ?) the RMS values are transmitted to a receiver (emonHub via RF or Serial).</p>
<p>What happens now ?<br />
From the sketch code I would guess, emonTxV3 goes to sleep for 10 seconds and start again with sampling and sending.</p>
<p>So from my point of view, all values (power, current) in between these 10s are lost and not recorded. High loads within this period will not be recorded.</p>
<p>&nbsp;</p>
<p>What I am actually trying to do is - put 3x emonTxV3 into the mains/fuse box in the building. Connect each of them via serial to one Pi B+ or Pi2 (doesn&#39;t matter for me) and configure the Pi&#39;s emonHub to send it to a local 2nd &quot;Pi 2&quot; which has a SSD attached and records the data inside its emonCMS with a MariaDB,</p>
<p>The emonCMS / MariaDB is already working now for RF measurements each 10s from my existing emonTxV3.<br />
From my stomache feeling a few Bytes of data each second shouldn&#39;t be a problem - neighther for a Pi B+ nor for the LAN. But I might be wrong on this.<br />
I am not using emonCMS.org online at all - just local recording with a fixed IP.</p>
<p>What I didn&#39;t understand was this</p>
<blockquote><p>&quot;If you set a send interval of 10secs&nbsp;for instance emonhub&nbsp;will collate all the data and send it in one go every 10&nbsp;seconds rather than bombard the server&quot;</p>
</blockquote>
<p>I only found the setting for altering the send interval inside the sketch file for the TxV3. I did not see any such setting for emonhub at all.<br />
Does emonHub collate the data and sends 10packets at once after 10s ?</p>
<p>Thanks for all the replies ! It was realy realy helpful so for for me as a novice.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31109"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 09/06/2015 - 14:04.</div>
    <div class="content">
     <p>I have been a bit hazy on what your end goal was so answering direct questions and giving generalized info. When you mention &quot;discreet sampling sketches&quot; and also &quot;sending serial data every second&quot; I didn&#39;t imagine you meant both together I thought you where exploring avenues.</p>
<p>There would be very little point in using the discreet sketch, you mention &quot;profiling&quot; and data at 1s intervals, the discreet sketch&#39;s <u>sample period</u> is tiny&nbsp;compared to the <u>update interval</u>&nbsp;and even bringing the interval down to 1s you are only getting part of the picture. You should use a continuous sampling sketch for there to be any point in a 1s interval.</p>
<p>The <u>update interval</u>&nbsp;defined in the sketch will set how often the data is forwarded to emonHub&nbsp;(by serial or rfm) when emonhub&nbsp;receives&nbsp;each packet it places it in a buffer and then independently the buffer is flushed regularly to forward the data to emoncms. With a 10s <u>update interval</u>&nbsp;the buffer operation is transparent unless there is a network issue and the data backs up and gets forwarded when the network comes up.</p>
<p>When sending &gt;packets per second it would be easier going on all involved&nbsp;if there was 1 update of 30+ frames to emoncms(s) rather than 30+ attempted connections. It isn&#39;t usually needed but in emonhub.conf in the emoncms interfacers&nbsp;[[[runtimesettings]]] you can define<strong> interval = 10</strong> which will limit the update frequency and buffer all the packets for bulk upload, each with it&#39;s own timestamp so emoncms still gets the same granularity of data but in manageable&nbsp;chunks every 10s.</p>
<p>The comment about localhost&nbsp;was aimed at not extending the data&#39;s journey unnecessarily&nbsp;thus increase speed and prevent outside influence preventing delivery as 3+ packets per second will shorten the time it takes for the buffers to fill up. There just seemed little point in sending data to <a href="http://www.mydomain.com/" title="www.mydomain.com">www.mydomain.com</a> -&gt; mydns.com -&gt; local router -&gt; back to the same device if speed was the goal, you will just use the LAN ip for your 2nd Pi in your case and no I wouldn&#39;t expect the amount of data to be an issue unless the network stalls. With the default buffer size of 1000 it would only take around 5 mins to overflow that at 3+ frames per sec,&nbsp;</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31111"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8280.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChristianZ&#039;s picture" title="ChristianZ&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/8280.html" title="View user profile.">ChristianZ</a> on Tue, 09/06/2015 - 14:40.</div>
    <div class="content">
     <p>Is there an example of a continuous sampling sketch available ?<br />
As I pointed out - I am really new to all of this - I&#39;m not sure if I can create a suitable sketch from scratch.</p>
<p>As for the discrete sketch - I can easily choose 1s intervall - since the sampling time is much short - did I get that right ? How would I enlarge the sampling time (to let&#39;s say 3/4 of a second) ?</p>
<p>Just for the first tests without caring about continuous measurement.</p>
<p>What is the backdrop (regarding power consumption) with continuous measurement vs. discrete sampling ?</p>
<p>&nbsp;</p>
<p>Thanks for the help again !</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31117"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/4440.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-4440.jpg" alt="pb66&#039;s picture" title="pb66&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/4440.html" title="View user profile.">pb66</a> on Tue, 09/06/2015 - 17:09.</div>
    <div class="content">
     <p><a href="https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3/RFM/emonTxV3.4/emonTxV3_4_continuous_kwhtotals/emonTxV3_4_continuous_kwhtotals.ino">https://github.com/openenergymonitor/emonTxFirmware/blob/master/emonTxV3/RFM/emonTxV3.4/emonTxV3_4_continuous_kwhtotals/emonTxV3_4_continuous_kwhtotals.ino</a></p>
<p>I don&#39;t no for sure but I would expect any &quot;serial direct&quot; examples you have found to be continuous sampling as even if you don&#39;t have an AC adapter, the Pi would be used to&nbsp;power a directly connected emonTx&nbsp;so Battery life is not a concern. The discreet sampling&#39;s power consumption is only good to prolong battery life, since when using the AC adapter to power the Pi running a continuous monitoring sketch, imposes a 20mA&nbsp;current limit, I think&nbsp;we can assume the current drawn is of negligible consequence compared to running the 2 Pi&#39;s. In&nbsp;fact&nbsp;not sending the data by rf will possibly offset any increase due to not sleeping</p>
<p>I see no benefit of rewriting a sketch designed for a scenario you are not using, to almost fit the gap that is already catered for.&nbsp;I&#39;m still not entirely&nbsp;sure of your goal. but if you just&nbsp;want 3 emonTx&#39;s&nbsp;reporting every 1s then 3 x continuous sampling sketches with a 1s interval is by far&nbsp;your best bet.</p>
<p>Paul</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31133"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8280.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="ChristianZ&#039;s picture" title="ChristianZ&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/8280.html" title="View user profile.">ChristianZ</a> on Tue, 09/06/2015 - 21:46.</div>
    <div class="content">
     <p>Thanks a lot - that helped me out.<br />
Next step is to order the missing 2 TxV3s and get running :-)</p>
<p>I will update this&nbsp; thread next week when I&#39;ve got some results.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-31134"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Connecting multiple (3 at least) emonTxV3 to Raspberry Pi via serial...</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 09/06/2015 - 22:53.</div>
    <div class="content">
     <p>Paul wrote <i>"I would disable the rf in code rather than unscrew the antenna to reduce the workload (and possible seepage)"</i></p>
<p>You should definitely do that, otherwise you risk damage to the RFM69CW radio module if it operates at full power without an antenna. (The data sheet specifies "Maximum VSWR at antenna port at +13dBm - 3:1")</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10820"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-PUy3mI9_uUvOeLwvtvbp63XsmPSuE32OW-jNOSsagyc" value="form-PUy3mI9_uUvOeLwvtvbp63XsmPSuE32OW-jNOSsagyc"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
