<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/1131 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 15:18:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>MK2 PV Controller + emonTx, together | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">MK2 PV Controller + emonTx, together</h3>
        <span class="submitted">Submitted by Guest on Mon, 08/10/2012 - 19:08</span>
        <div class="content"><p>I plan to build the Mk2&nbsp;controller (using the PCBs from Rich). &nbsp;I&#39;d also like to play around with an arduino to measure a pile of (mostly undetermined) stuff. &nbsp;Given that I don&#39;t <strike>really</strike> know what I&#39;m doing, I want to dedicate one arduino&nbsp;(aPV) to the PV controller work, and use another (emonTx) for everything else. &nbsp;Both arduinos would be in the same box, &nbsp;sharing ground and +5v. &nbsp;(Maybe need a bigger&nbsp;PSU?)</p>
<p>I appreciate some folk have managed to combine both functions within the same&nbsp;arduino, but I&#39;d rather keep them separate, so I can play around with the&nbsp;emonTx&nbsp;without compromising the immersion control algorithm.</p>
<p>Given I already have the current/voltage sensor and Vref circuitry for aPV, is there any reason why I can&#39;t connect the derived signals (on&nbsp;an1&nbsp;&amp; an2) to both arduinos at the same time? &nbsp;(So I can measure imported power on the emonTx.)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="1176.html" class="topic-previous" title="Go to previous forum topic">‹ Solar Dump Poll</a>
              <a href="1136.html" class="topic-next" title="Go to next forum topic">Online Engineering Calculator ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-6561"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MK2 PV Controller + emonTx, together</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Mon, 08/10/2012 - 20:00.</div>
    <div class="content">
     <p>Remember that if you intend to use the same input signals to both systems, you need to be careful that both systems use the same analogue reference voltage and consequently the same mid-point bias voltage. Bear in mind that the RFM12B module has a maximum recommended supply voltage of 3.8 V, which implies you must retain the 3.3 V supply for the emonTx.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6562"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RJ&#039;s picture" title="RJ&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: MK2 PV Controller + emonTx, together</h3>

    <div class="submitted">Submitted by RJ (not verified) on Mon, 08/10/2012 - 21:31.</div>
    <div class="content">
     <p>Um, very good point Robert. &nbsp;(BTW, great name.) &nbsp;</p>
<p>I was intending to wait for the new emonTx board, and connect it using wired ethernet (I think that option is coming). &nbsp;But I see that the ethernet module that has been proposed is also 3.3V (although it says that 5V I/O signals are tolerated, it doesn&#39;t say about max supply voltage. Also, I suppose there&#39;s no guarantee that particular module will end up on the new board). &nbsp;So that wouldn&#39;t work either.</p>
<p>Ho hum, back to the drawing board.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6563"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1399.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1399.jpg" alt="Series530&#039;s picture" title="Series530&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MK2 PV Controller + emonTx, together</h3>

    <div class="submitted">Submitted by <a href="../user/1399.html" title="View user profile.">Series530</a> on Tue, 09/10/2012 - 05:01.</div>
    <div class="content">
     <p>I don&#39;t know what other stuff you want to measure but, unless its a lot, the arduino can be used to run the MK2 sketch and you can still do some other stuff as well in parallel with it. No issues occur then with regard to power supplies. You only need to change the pull up resistor which drives the MOC&nbsp;photo LED.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6568"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/450.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="stuart&#039;s picture" title="stuart&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MK2 PV Controller + emonTx, together</h3>

    <div class="submitted">Submitted by <a href="../user/450.html" title="View user profile.">stuart</a> on Tue, 09/10/2012 - 11:03.</div>
    <div class="content">
     <p>Before you get to far down the track, have a read through this!</p>
<p><a href="1002.html" title="http://openenergymonitor.org/emon/node/1002">http://openenergymonitor.org/emon/node/1002</a></p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6586"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="RJ&#039;s picture" title="RJ&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: MK2 PV Controller + emonTx, together</h3>

    <div class="submitted">Submitted by RJ (not verified) on Tue, 09/10/2012 - 19:53.</div>
    <div class="content">
     <p>Series530</p>
<p>Are you suggesting running the MK2 sketch on the emonTx (at 3.3V)? &nbsp;Would that work without any further modifications? &nbsp;(Except changing the pull-up resistor - I guess to ~120ohms?)</p>
<p>Stuart</p>
<p>I did look at your design, but I wasn&#39;t convinced that I understood all the proposed changes to the design, plus I&#39;ve already bought Rich&#39;s PCBs, so I&#39;m kinda committed down that track.</p>
<p>Thanks to both!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-6588"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/1399.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-1399.jpg" alt="Series530&#039;s picture" title="Series530&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: MK2 PV Controller + emonTx, together</h3>

    <div class="submitted">Submitted by <a href="../user/1399.html" title="View user profile.">Series530</a> on Tue, 09/10/2012 - 20:52.</div>
    <div class="content">
     <p>Sure - it runs beautifully on these units. My sketches are extensions of the MK2 sketch and one runs on the emonTX while the other runs on the emonGLCD. Just change the pull up resistor for the MOC and that&#39;s it. If you want to be fancy add in the LEDs if you use my sketch or run as it is if you use Robins MK2.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/1131"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-OE2VoCOlBo_H4TRInKUgKvGNIGgiBfSrSce74B7mBXk" value="form-OE2VoCOlBo_H4TRInKUgKvGNIGgiBfSrSce74B7mBXk"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
