<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/10561 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 13:48:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Project announcement: PiPowerMeter | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/3.html">Archived: General Discussion</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Project announcement: PiPowerMeter</h3>
        <span class="submitted">Submitted by <a href="../user/8088.html" title="View user profile.">crjens</a> on Mon, 04/05/2015 - 21:24</span>
        <div class="content"><p>Hi,</p>
<p>I&#39;ve been working on a Raspberry Pi based home&nbsp;energy monitor that i&#39;d&nbsp;like to share with the group. &nbsp;It&#39;s based on the Cirrcus Logic CS5463 energy IC and supports monitoring up to 128 circuits. &nbsp;The Raspberry Pi runs a nodejs based service that controls the hardware and a web based monitoring portal. &nbsp;All data are stored locally on the Pi on a sqlite database.&nbsp; The system is 100%&nbsp;stand-alone and&nbsp;requires no additional hardware or servers. &nbsp;A couple systems have been running very reliably for almost a year.</p>
<p>The source code, Eagle files and additional information is available on Github:&nbsp;<a href="https://github.com/crjens/PiPowerMeter">https://github.com/crjens/PiPowerMeter</a></p>
<p>Please feel free to contact me with questions, comments, feedback, etc.</p>
<p>Thanks,</p>
<p>Craig</p>
<p><a href="mailto:crjens@hotmail.com">crjens@hotmail.com</a></p>
  <div class="forum-topic-navigation clear-block">
          <a href="10500.html" class="topic-previous" title="Go to previous forum topic">‹ RTD Temperature Sensing</a>
              <a href="10546.html" class="topic-next" title="Go to next forum topic">What displays will work with Landis Gyr E470 meter? ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-30139"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7977.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Morzel&#039;s picture" title="Morzel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/7977.html" title="View user profile.">Morzel</a> on Wed, 06/05/2015 - 10:21.</div>
    <div class="content">
     <p>As far as I can see the CS5463 IC has been designed for continuous operation, while your implementation is built around a lot of multiplexing, which makes me wonder how you developed/implemented that particular strategy especially with the filtering that is part of the IC.</p>
<p>I had a quick glimpse in the code/schematic, and if i have understood it correctly (probably not ;-), the multiplexing bit is implemented as follows:</p>
<ol>
<li>Disable CS5463</li>
<li>Instruct MUX to pass selected CT</li>
<li>Enable CS5463</li>
<li>Read one full cycle of samples (or until end of next cycle?)&nbsp; U &amp; I and compute your own P (instead of using the value calculated by the CS5463)</li>
<li>Select next CT, go to 1</li>
</ol>
<p>Is this correct?</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30142"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="crjens&#039;s picture" title="crjens&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/8088.html" title="View user profile.">crjens</a> on Wed, 06/05/2015 - 16:47.</div>
    <div class="content">
     <p>Thanks for your comments. &nbsp;</p>
<p>The CS5463&nbsp;has both single and continuous read modes but&nbsp;as you inferred&nbsp;I found that the multiplexing and filtering circuits created a small amount of ringing on the current and voltage waveforms for the first 50ms&nbsp;or so after switching. &nbsp;The ringing wasn&#39;t significant but in order to ensure the most accurate results I ended up running the chip in continuous mode and ignoring the first cycle (cycle time = 1s). &nbsp;See the <em>ReadCycleWithInterrupts </em>method in&nbsp;<a href="https://github.com/crjens/cs5463/blob/master/CS5463.cc">CS5463.cc</a>. &nbsp;This gave the filters plenty of time to settle before taking the&nbsp;actual reading. &nbsp;You can see the actual V &amp; I waveforms <a href="../../../raw.githubusercontent.com/crjens/PiPowerMeter/master/Documentation/instant.png">here</a>.</p>
<p>The logic is pretty much as you stated except for that fact that I don&#39;t calculate my own P based on V&amp;I (and there&#39;s an additional step of MUX&#39;ing in the correct voltage channel). &nbsp;All results are calculated directly&nbsp;by the&nbsp;CS5463&nbsp;thus ensuring extremely&nbsp;high&nbsp;accuracy by taking phase angle into account. &nbsp;What you are seeing in the code is probably scaling the output results of the CS5463&nbsp;into actual values&nbsp;(amps/volts/watts/vars/etc)&nbsp;to account for the sense resistors. &nbsp;</p>
<p>&nbsp;</p>
<p><i>Look across to the right and read "NEW USERS, PLEASE READ - Posts held for moderation"</i></p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30147"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7977.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Morzel&#039;s picture" title="Morzel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/7977.html" title="View user profile.">Morzel</a> on Wed, 06/05/2015 - 18:46.</div>
    <div class="content">
     <p>For some reason I can no longer see the answer of the OP even though it was visible just now -- so bear with me: I&#39;m responding to that vanished response, not just talking to myself ;-)</p>
<p>I use the word &quot;cycle&quot; when I actually mean &quot;period&quot; of the sinusoid, and I have the impression that the &quot;cycle&quot; you&#39;re talking about is a predefined amount of time during which you sample one channel before you switch to the next.</p>
<p>Looking further into the code, an expanded version of my analysis would be:</p>
<ol>
<li>Instruct MUX to pass selected CT</li>
<li>Enable CS5463 - wait until it signifies that it is ready to perform conversions</li>
<li>Clear CS5463 buffers</li>
<li>Read (and throw away) 10ms worth of samples to let the filters settle</li>
<li>Read 500ms (&quot;one cycle&quot;) worth of samples for actual calculation</li>
<li>Disable CS5463</li>
<li>Select next CT, go to 1</li>
</ol>
<p>So if there are N connected channels, there is a duty cycle of approximately 1/N for sampling of each of the channels, and I presume you interpolate (or hold) the measurements per channel during the time that other channels are sampled?</p>
<p>I&#39;m curious how that would work with variable loads (e.g. for PV monitoring) or loads that are switched with periods in the same order as your cycles (e.g. microwave). How do measurements of these kind of loads turn out?</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30150"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="crjens&#039;s picture" title="crjens&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/8088.html" title="View user profile.">crjens</a> on Wed, 06/05/2015 - 21:37.</div>
    <div class="content">
     <p>Sorry for the confusion. &nbsp;</p>
<p>The cycle I was referring to was the computation cycle of the CS5463 which defaults to&nbsp;1 second. &nbsp;This means that the IC will sample the input V &amp; I waveforms at its internal sample rate of 4000Hz for 1 second and then perform calculations to determine the various outputs Vrms, Irms, Pave, Qave, Pf,&nbsp;etc. &nbsp;Since there is some ringing due to the MUX&#39;s and input filters, I allow the chip to perform two complete computation cycles and throw&nbsp;out the first one. &nbsp;This repeats sequentially&nbsp;for each connected channel. &nbsp;</p>
<p>The read loop is as follows:</p>
<ol>
<li>Disable CS5463</li>
<li>Select next CT and corresponding voltage channel (via MUX&#39;s)</li>
<li>Enable CS5463&nbsp;in continuous mode</li>
<li>Read first computation cycle and throw it away (due to ringing)</li>
<li>Read next computation cycle and return results</li>
<li>goto&nbsp;1</li>
</ol>
<p>Each read loop takes about 2 seconds (1s for each computation cycle + a couple ms&nbsp;for switching MUX&#39;s and other overhead) so the effective sample rate per CT is ~2N seconds where N is the total number of connected CT&#39;s. &nbsp;</p>
<p>If you need a system that monitors a circuit 100% of the time&nbsp;for metering/billing then this probably isn&#39;t what you are looking for but my&nbsp;primary goal was to create a simple stand-alone system to help me understand my overall energy usage and this design works very well for that. &nbsp;I&#39;m able to monitor and report on usage of every circuit in my home without the need for multiple hardware devices or&nbsp;computers. &nbsp;With this system I was able to identify a refrigerator in my garage that had a stuck thermostat and was never cycling off and a computer that was never entering sleep mode. Those two things alone will save me more than $150/year in electricity costs.&nbsp; I can also tell which circuits are using the most energy and identify&nbsp;circuits with&nbsp;inefficient appliances. &nbsp;For example,&nbsp;DVR&#39;s suck about 50W 24/7 (even when not in use) and, yes, LED light bulbs really do use about&nbsp;90% less energy than incandescent&#39;s.​</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30151"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7977.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Morzel&#039;s picture" title="Morzel&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/7977.html" title="View user profile.">Morzel</a> on Wed, 06/05/2015 - 22:00.</div>
    <div class="content">
     <p>All clear now :-)</p>
<p>That seems indeed the most logical approach in multiplexing channels for this kind of IC, as it allows you to keep using its most important feature: the integrated power calculations. While you could implement multiplexing in more or less the same fashion as with the emonTX, you&#39;d basically turn the IC into a dual channel ADC without much added value. That would be a waste...</p>
<p>While I can appreciate that this implementation is definitely fit for your purpose (and probably of a lot of others too), my (overly inquisitive) inner engineer gets twitchy at the idea that I might be missing interesting data during those times that I&#39;m not looking :-P.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30152"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/10.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/pictures/picture-10.jpg" alt="glyn.hudson&#039;s picture" title="glyn.hudson&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/10.html" title="View user profile.">glyn.hudson</a> on Wed, 06/05/2015 - 22:26.</div>
    <div class="content">
     <p>Very interesting, have you got some photos of the hardware?&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30155"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Thu, 07/05/2015 - 01:40.</div>
    <div class="content">
     <p>Being able to view the waveform is a very nice feature! &nbsp;I need to drag a scope out to my energy monitor when I want to do that.</p>
<p>It looks like you might be in a position to answer a long standing question that comes up periodically in these forums. &nbsp;How much does the voltage vary between the two 110V legs? &nbsp;The general consensus is &quot;not much&quot;, but there&#39;s never been much hard data to back that up. Seeing a week long&nbsp;graph of (V1rms - V2rms) would be interesting, if that&#39;s easy for you to add.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30159"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="crjens&#039;s picture" title="crjens&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/8088.html" title="View user profile.">crjens</a> on Thu, 07/05/2015 - 16:28.</div>
    <div class="content">
     <p>I grabbed a couple photos with my phone this morning. &nbsp;Sorry for the poor quality but this should give you an idea of what it looks like. &nbsp;I&#39;ll try and get some better shots when i get some time.</p>
<p>Attached are&nbsp;a couple photos of&nbsp;the&nbsp;installation in my garage. &nbsp;The electronics are mounted inside a plastic project box to protect them&nbsp;from the elements inside&nbsp;my relatively dirty garage. &nbsp;My setup is composed of a controller board plus&nbsp;3 stacked current boards and&nbsp;monitors a total of&nbsp;36 circuits (34 branch circuits and 2 mains).&nbsp;&nbsp;It&#39;s a slightly older version of the hardware than what&#39;s currently on <a href="https://github.com/crjens/PiPowerMeter">GitHub </a>but the physical size of the boards is the same. &nbsp;The primary difference is that the Raspberry Pi now attaches directly to the new boards where the one in these photos&nbsp;requires a ribbon cable. &nbsp;</p>
<p>The other two photos show the controller and current&nbsp;boards along with a Raspberry Pi and 100A&nbsp;CT for size reference. &nbsp;The controller board contains the Raspberry Pi connector,&nbsp;power supply, voltage sense circuitry and CS5463 IC. &nbsp;The current board has connectors for 16 multiplexed current channels. &nbsp;The boards are designed so you can stack up to 8 current boards on one controller to monitor&nbsp;up to 128 circuits. &nbsp;The power supply on the controller board powers the Raspberry Pi and all the circuitry so you just need to bring&nbsp;in a 4 wire 240V&nbsp;circuit from your panel (two 120V legs&nbsp;plus neutral and ground) for the power and voltage reference plus the CT&#39;s for each circuit you want to monitor.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30161"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="crjens&#039;s picture" title="crjens&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/8088.html" title="View user profile.">crjens</a> on Thu, 07/05/2015 - 16:40.</div>
    <div class="content">
     <p>Here&#39;s plot of V1rms-V2rms&nbsp;for every minute over the last month. &nbsp;The Max is 2.53, Mean is&nbsp;-0.01012 and StdDev is 0.34359. &nbsp;Data were collected in Sammamish, WA (near Seattle).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30169"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Fri, 08/05/2015 - 00:19.</div>
    <div class="content">
     <p>Very nice, thank-you.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30240"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5462.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="michaeljquinn&#039;s picture" title="michaeljquinn&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/5462.html" title="View user profile.">michaeljquinn</a> on Sun, 10/05/2015 - 10:42.</div>
    <div class="content">
     <p>Very cool craig, a couple of questions</p>
<p>1) here in AUS we are 230V/50Hz</p>
<p>2) I am on single phase</p>
<p>3) what CT&#39;s do you recommend</p>
<p>4) What is your voltage reference source ?</p>
<p>5) Power supply for boards</p>
<p>&nbsp;</p>
<p>thanks&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30241"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="crjens&#039;s picture" title="crjens&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/8088.html" title="View user profile.">crjens</a> on Sun, 10/05/2015 - 17:09.</div>
    <div class="content">
     <p>@michaeljquinn&nbsp;</p>
<p>1) 230V/50Hz&nbsp;should work just fine. &nbsp;You will need to use a smaller voltage sense resistor but everything else stays the same</p>
<p>2) Single phase is no problem</p>
<p>3) You can use any CT&#39;s that you want. &nbsp;The only restriction is that they should be current sense type (no built in voltage sense resistor).&nbsp; The software allows you to set a scale factor to accommodate for the CT turns ratio. &nbsp;That said, I&#39;ve had very good luck with the <a href="http://www.yhdc.com/en/product/category/Spilt-core-current-transformer/">YHDC</a>&nbsp;split core CT&#39;s that are readily available.</p>
<p>4) The main board contains&nbsp;1:1 isolation transformers and a voltage divider circuit for voltage sensing. &nbsp;You simply wire it up directly to the panel through a breaker. &nbsp;</p>
<p>5) &nbsp;The main board also has a universal AC/DC power supply to power the electronics. &nbsp;It runs off the same input as the voltage sense circuitry.</p>
<p>I have a few extra sets of boards available if you are interested in experimenting with the hardware. &nbsp;Email&nbsp;me offline at <a href="mailto:crjens@hotmail.com">crjens@hotmail.com</a> if you are interested.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30246"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/3016.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="dBC&#039;s picture" title="dBC&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/3016.html" title="View user profile.">dBC</a> on Sun, 10/05/2015 - 19:25.</div>
    <div class="content">
     <p>What setup conditions did you use to calibrate away the phase errors? &nbsp;I&#39;d imagine that calibration setting will need a bit of tweaking moving from 60Hz to 50Hz. &nbsp;It&#39;ll typically also need tweaking if you change your make/model of CT.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30259"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="crjens&#039;s picture" title="crjens&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/8088.html" title="View user profile.">crjens</a> on Mon, 11/05/2015 - 15:51.</div>
    <div class="content">
     <p>The CS5463&nbsp;has configuration settings for both the fundamental frequency (50/60Hz) as well as phase compensation to cancel out phase shift introduced by the voltage and/or current sensors. &nbsp;</p>
<p>I ran a series of simple tests with known resistive loads and played with the phase compensation until the chip output a unity power factor. &nbsp;It&#39;s probably not the most scientific approach but it was good enough for my purposes. &nbsp;The settings can easily be changed via configuration if you use different CT&#39;s.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30326"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/7916.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="piperpilot&#039;s picture" title="piperpilot&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/7916.html" title="View user profile.">piperpilot</a> on Thu, 14/05/2015 - 02:20.</div>
    <div class="content">
     <p>@crjens</p>
<p>Very interesting project! &nbsp;I was looking at the CS5463 chip myself at one point...seems like a great device. &nbsp;A couple of questions:</p>
<p>1. &nbsp;Instead of providing a direct mains voltage into your project, could you have used a AC/AC transformer? &nbsp;I have played around with a 12VAC and feel safer using that than mains voltage to my board.</p>
<p>2. &nbsp;I know its higher cost, but could you have one CS5463 per circuit you want to monitor? &nbsp;In this design you would just MUX the serial and read the accumulated values every x seconds?</p>
<p>I&#39;m looking at different ways to achieve branch circuit monitoring...I have about 40 circuits in my breaker right now and finding an efficient solution is challenging.</p>
<p>Thanks for posting your project!</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-30327"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/8088.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="crjens&#039;s picture" title="crjens&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Project announcement: PiPowerMeter</h3>

    <div class="submitted">Submitted by <a href="../user/8088.html" title="View user profile.">crjens</a> on Thu, 14/05/2015 - 05:03.</div>
    <div class="content">
     <p>@piperpilot​</p>
<p>I did look into using a couple of standard AC/AC wall-wart type transformers instead of bringing the line voltage onto the board but decided against it for a couple reasons:</p>
<ul>
<li>In the US it would require two transformers and each would need to be plugged into outlets wired on opposing phases. &nbsp;Not a huge deal but would require additional wiring.</li>
<li>I needed to power the Raspberry Pi which would require either another AC/DC wall-wart or would introduce additional phase shift by loading the AC/AC transformer.</li>
</ul>
<p>I ended up&nbsp;mitigating&nbsp;the safety issues by using 1:1 AC isolation transformers on the board to isolate the electronics&nbsp;from the power line. &nbsp;Having line voltage directly on the board also allowed me to make use of a pcb mounted AC/DC power supply to power the Raspberry Pi and other electronics. &nbsp;It&#39;s probably not as good from a safety perspective as external transformers but&nbsp;the convenience and simplicity&nbsp;of running a single power line won out for me.</p>
<p>It would be possible to use a separate CS5463 for each circuit and doing that would allow you to monitor each circuit 100% of the time. &nbsp;There would probably&nbsp;be some complexity in the design of the circuitry to be able to individually address each of the chips but i&#39;m sure it would be possible.</p>
<p>I&#39;ve found that sampling each circuit at approximately 1 minute intervals works very well for my purposes so i didn&#39;t consider such a design. &nbsp;If you can&#39;t live with periodic sampling then that would be a good solution.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/10561"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-lG5Q4wpdvMJuu9K8P25Xyoq1jXqGv8w9X68CpvuPSPE" value="form-lG5Q4wpdvMJuu9K8P25Xyoq1jXqGv8w9X68CpvuPSPE"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
