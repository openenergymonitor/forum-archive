<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/3802 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:21:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Using hall effect sensors  | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/4.html">Archived: Hardware</a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">Using hall effect sensors </h3>
        <span class="submitted">Submitted by <a href="../user/5458.html" title="View user profile.">fca</a> on Sat, 08/02/2014 - 00:51</span>
        <div class="content"><p>Hi i have several device craft&nbsp; sensors that i would like to use with emon</p>
<p><img alt="" src="http://ep.yimg.com/ca/I/yhst-128223196112092_2227_3660688" style="width: 180px; height: 145px;" /></p>
<p><a href="http://site.devicecraft.com/DataSheets/DeviceCraft_CurrentSensor_Is_5_and6and7.pdf" title="http://site.devicecraft.com/DataSheets/DeviceCraft_CurrentSensor_Is_5_and6and7.pdf">http://site.devicecraft.com/DataSheets/DeviceCraft_CurrentSensor_Is_5_an...</a></p>
<p>i have used these sensors with success reading DC current with my own code.. now i want to use them to read AC and if possible with emon lib...</p>
<p>These sensor&nbsp; have a voltage out linear with the current sensed with the zero current at vcc/2 ... this is working fine with DC ...</p>
<p>In the sheet it says this about AC</p>
<p>&nbsp;</p>
<p><em>&quot;Sensing AC Current<br />
	The devicecraft hall effect sensor is capable of sensing both AC and DC currents. When sensing AC&nbsp; currents the output voltage will also be AC floating on &frac12; the power supply rail. The RMS AC current can be<br />
	calculated by sampling the signal and converting to a DC value proportional to the AC RMS reading. The sensed AC voltage may also be AC coupled with a series capacitor/resistor to ground and connected to a RMS<br />
	to DC converter or peak detector.<br />
	When sensing AC current the output may be phase shifted or non sinusoidal. Inductive loads, such as motors, and power supplies using peak rectification will produce a phase shifted or distorted sine wave. The<br />
	sensed current waveform along with the AC voltage can be used to accurately calculated the power factor.&quot;</em></p>
<p>&nbsp;</p>
<p>So its possible to use this sensor with emon ? im trying the currentonly example..</p>
<p>but no clue what to put here</p>
<p>emon1.current(2, <strong>xxx);</strong></p>
<p>and here</p>
<p>Irms = emon1.calcIrms(<strong>yyyyy</strong>);</p>
<p>&nbsp;</p>
<p>thanks</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="3838.html" class="topic-previous" title="Go to previous forum topic">‹ EmonTv V3 voltage output</a>
              <a href="3814.html" class="topic-next" title="Go to next forum topic">Emontx v3 - Prebuilt High amps readings ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-18276"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using hall effect sensors </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 08/02/2014 - 02:02.</div>
    <div class="content">
     <p>I haven&#39;t got a clue either about what you need to substitute in xxx, because you don&#39;t say what the characteristics of your particular Hall effect device are. If you look at the page in Building Blocks that describes the theoretical basis of those calibration constants, that might help you to work out what value you need for xxx.&nbsp; yyyyy is simply the number of samples over which the average is calculated (and if you&#39;d read the comment in emonLib, you would have known that).</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18277"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5458.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fca&#039;s picture" title="fca&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using hall effect sensors </h3>

    <div class="submitted">Submitted by <a href="../user/5458.html" title="View user profile.">fca</a> on Sat, 08/02/2014 - 02:40.</div>
    <div class="content">
     <p>Hi i have posted the link with the spec sheet of the hall</p>
<p>here again</p>
<p><a href="http://site.devicecraft.com/DataSheets/DeviceCraft_CurrentSensor_Is_5_and6and7.pdf" title="http://site.devicecraft.com/DataSheets/DeviceCraft_CurrentSensor_Is_5_and6and7.pdf">http://site.devicecraft.com/DataSheets/DeviceCraft_CurrentSensor_Is_5_an...</a></p>
<p>&nbsp;</p>
<p>thanks for your help</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18284"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using hall effect sensors </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 08/02/2014 - 12:27.</div>
    <div class="content">
     <p>You need to look at that spec. sheet, then read my reply again, very carefully this time. What do you think this line</p>
<h3 class="rteindent1">
	<strong>Please specify sensitivity when ordering. 25,30,35,40,45,50,,, 135,140 Amps</strong></h3>
<p>means? Have you read the article I suggested you read? Did you find the section headed</p>
<h3 class="rteindent1">
	If you use a current transformer with a built-in burden (voltage output type)</h3>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18287"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5458.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fca&#039;s picture" title="fca&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using hall effect sensors </h3>

    <div class="submitted">Submitted by <a href="../user/5458.html" title="View user profile.">fca</a> on Sat, 08/02/2014 - 20:43.</div>
    <div class="content">
     <p>Hi</p>
<p>i have both the&nbsp;25amp&nbsp;version and the 80amp ...</p>
<p>I will read again the article and come back .</p>
<p>&nbsp;</p>
<p>Thanks once again for your help&nbsp;&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18289"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5458.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fca&#039;s picture" title="fca&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using hall effect sensors </h3>

    <div class="submitted">Submitted by <a href="../user/5458.html" title="View user profile.">fca</a> on Sat, 08/02/2014 - 21:15.</div>
    <div class="content">
     <p>Hi found this :</p>
<p>&quot;If you use a current transformer with a built-in burden (voltage output type)</p>
<p>
	Look at the last line of the theory where the current constant is derived:<br />
	current constant = (100 &divide; 0.050) &divide; 18 = 111.11<br />
	&quot;100&quot; is the current transformer primary current, and &quot;0.050 &times; 18&quot; is in fact the voltage across the burden resistor for the standard c.t. and burden at that current, so to arrive at your current constant you simply substitute your transformer&#39;s rated current in place of &quot;100&quot; and the voltage it gives in place of &quot;0.050 &times; 18&quot;. For example, the Yhdc SCT-013-030 gives 1 V at a rated current of 30 A, so for this transformer you have:<br />
	current constant = 30 &divide; 1 = 30&quot;</p>
<p>But still don&#39;t get how to initialize emon</p>
<p>the devicecrat&nbsp;has sensitivity of of 2v&nbsp;for the 25amps</p>
<p>2000/25 =80mv/ amp&nbsp;</p>
<p>please help&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18290"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using hall effect sensors </h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Sat, 08/02/2014 - 21:45.</div>
    <div class="content">
     <p>The important part for you is the example: &quot;the Yhdc SCT-013-030 gives 1 V at a rated current of 30 A, so for this transformer you have: current constant = 30 &divide; 1 = 30&quot;</p>
<p>Using your numbers, you say your Hall effect device gives you 2 V at 25 or 80 A, therefore your calibration constant - xxx in emon1.current(2, xxx); - is 25 &divide; 2 = 12.5 or, for the larger device, 80 &divide; 2 = 40.</p>
<p>There is one problem here: I do not believe your numbers. The data sheet says the sensitivity of the 25 A device is 65 mV/A, and that is clearly correct because at 25 A rms, the output is 1.625 V rms or 4.59 V peak-peak, which is a little less than the maximum that the output can swing, and that is 5 V - 200 mV = 4.8 V. Therefore your current calibration constant for that one should really be 25 &divide; 1.625 = 15.3846&nbsp; which is exactly the same as 1/ 65.</p>
<p>So you should have: emon1.current(2, 15.3846);&nbsp; for the 25 A input.</p>
<p>&nbsp;</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-18350"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/5458.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="fca&#039;s picture" title="fca&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: Using hall effect sensors </h3>

    <div class="submitted">Submitted by <a href="../user/5458.html" title="View user profile.">fca</a> on Tue, 11/02/2014 - 23:04.</div>
    <div class="content">
     <p>Hi and thanks for your help ...</p>
<p>i csn confirm that the 2v&nbsp;we&#39;re correct confirmed by the maker and by the readings &nbsp;I had to adjust it from 12.5 to 12.8 in the 25amp&nbsp;, but &nbsp;I&#39;m powering the arduino from USB I have to check with the final power supplied to be used ...</p>
<p>now I have to start the voltage sensing and how to calculate daily&nbsp;kWh on the arguino itself but I will open other &nbsp;posts&nbsp;</p>
<p>&nbsp;</p>
<p>thanks again for your help</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/3802"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-0ZpB_GxE5UgbCcCHDcye7HJsHt5dMbKG3JMM2Manj4c" value="form-0ZpB_GxE5UgbCcCHDcye7HJsHt5dMbKG3JMM2Manj4c"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
<div style="margin:0 auto;width:1000px;">
  <div style ="float:right;width:400px;padding-right:20px;">
    <script>
      (function() {
        var cx = '006198118389747886812:rtaoc3wurta';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
</div>

</body>
</html>
