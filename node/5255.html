<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">


<!-- Mirrored from openenergymonitor.org/emon/node/5255 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:11:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>RFM12b Packet Generator - Structure definition-using NanodeRF? | Archived Forum</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/default/files/emon3_favicon.png" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/themes/emon3/style4b43.css?r" />
<style type="text/css" media="all">@import "../sites/all/themes/emon3/user_bar.css";</style>
    <script type="text/javascript"> </script>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>

<body>

<div id="box">

<table border="0" cellpadding="0" cellspacing="0" id="header">
  <tr>
    <td id="logo">
       <h1 class='site-name'><a href="../index.html" title="Home">Archived Forum</a></h1>    </td>
    <td id="menu">
      
                  
      
    </td>
  </tr>
  <tr>
    <td colspan="2"><div></div></td>
</tr>
</table>
<!--<div style="background-color:#444444; border-top: 1px solid #888; height:32px;">-->

<table border="0" cellpadding="0" cellspacing="0" id="content">
  <tr>
        <td valign="top">
            <div id="main">
        <div class="breadcrumb"><a href="../index.html">Home</a> » <a href="../forum.html">Forums</a> » <a href="../forum/6.html">Archived: Questions and support </a></div>     
        <div class="tabs"></div>
                          <div class="node">

    
    
          <div class="comment" >
                <h3 class="title" style="">RFM12b Packet Generator - Structure definition-using NanodeRF?</h3>
        <span class="submitted">Submitted by Guest on Mon, 02/06/2014 - 19:27</span>
        <div class="content"><p>Exceptional work, well done.</p>
<p>Hope this is possible and is not the reason why I am receiving strange values</p>
<p>I use a NanodeRF SMT to upload data to a debian server. I have uploaded the example code from my RFM12b Packet Generator page (bottom section) to a emonTX and it is receiving data but not as expected. I assume that I need to include the top section ( labled Structure definition) to somewhere in the NanodeRF SMT? Or is this code specific to using a Rpie? (Hm, paket gen..gues that is what it means -&nbsp; for the Rpie to generate RF packets?) Would it be possible to edit the decode section of the NanodeRF to achive a useable reply? or would it be more likely a case of seting up a response from the server similar to how the time is done? if so any direction would help..</p>
<p>
	Here is a example of what the emonTX recives (Time is correct but the rest of the values do not relate to the setpoints):</p>
<p>glcdspace: 116<br />
	hour: 21<br />
	minute: 18<br />
	second: 6<br />
	radiatorA_setpoint: 2599<br />
	radiatorB_setpoint: 0<br />
	radiatorC_setpoint: 28<br />
	lightA: 4<br />
	lightB: 61<br />
	lightC: 156<br />
	lightD: 9</p>
<p>
	Thanx, Help is appreciated..<br />
	&nbsp;</p>
  <div class="forum-topic-navigation clear-block">
          <a href="5271.html" class="topic-previous" title="Go to previous forum topic">‹ Cannot send session cache limiter - headers already sent</a>
              <a href="5254.html" class="topic-next" title="Go to next forum topic">Transform CT1-3 into CT4 ›</a>
      </div>
</div>
      </div>
    
    <div class="links">&raquo; <ul class="links inline"><li class="comment_forbidden first last"></li>
</ul></div>  </div>
<div id="comments">
  <a id="comment-21788"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12b Packet Generator - Structure definition-using NanodeRF?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 03/06/2014 - 12:09.</div>
    <div class="content">
     <p>I&#39;m not sure that I understand your question, nor what you are trying to achieve. I think you need to explain a little more about what you have and what you want to do.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21793"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <img src="../sites/default/files/imagecache/avatar/default_0.png" alt="gmza&#039;s picture" title="gmza&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12b Packet Generator - Structure definition-using NanodeRF?</h3>

    <div class="submitted">Submitted by gmza (not verified) on Tue, 03/06/2014 - 15:55.</div>
    <div class="content">
     <p>Thanx for trying to help.</p>
<p>I want to modify the packet generator control example to work with a nanodeRF.</p>
<p>I am just not sure of the approach,&nbsp; I could (just my lack of coding skills )&nbsp; use&nbsp; dials and / or set points to update feeds, then have the nanodeRF poll those feeds and when that feed value changes it (the nanodeRF) could action whatever the perimeter is (some grat examples on polling and reacting for the nanodeRF).</p>
<p>I am also trying to avoid using the nanodeRF as a relay, first price would be to pass the data to a dedicated relay node.</p>
<p>With this approach I am already stuck at how the nanodeRF could send data to another node.</p>
<p>It would be great get direction on how use the nanodeRf instead of the Raspberry Pie or in a simpler sense how&nbsp; to set up the nanodeRF to relay feed values to a listening node similarly on how it relays the time to the GLCD.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<a id="comment-21799"></a>
  <div class="comment comment-published" >
    <div class="picture">
  <a href="../user/924.html" title="View user profile."><img src="../sites/default/files/imagecache/avatar/default_0.png" alt="Robert Wall&#039;s picture" title="Robert Wall&#039;s picture" width="50" height="50" class="imagecache imagecache-avatar"/></a></div>

<h3 class="title" style="padding-bottom:5px">Re: RFM12b Packet Generator - Structure definition-using NanodeRF?</h3>

    <div class="submitted">Submitted by <a href="../user/924.html" title="View user profile.">Robert Wall</a> on Tue, 03/06/2014 - 19:04.</div>
    <div class="content">
     <p>The Nanode is, as you appreciate, already receiving data in the form of the time, and broadcasting it to the GLCD. You want to do exactly the same thing, and with an only slightly different packet of data.</p>
<p>What you need to do is to extract the received data packet in the correct format. The blog post about the Packet Generator says &quot;the module generates example Arduino code&quot; so you need to take that code and merge it into the NanodeRF sketch in a similar way to the way it receives the time. You can then retransmit the data, again in much the same way as the time is transmitted.</p>
<p>You will do all that inside <em>my_callback(...)&nbsp;</em> Where you have<em> &quot;<em>else if(line_buf[0]==&#39;t&#39;)&quot; </em></em>you will need to find something unique to detect the packet of data and change the &quot;if (....)&quot; to detect that, then the block that follows will pack the data into a structure (like the emonTx code does) and finally you send it with rf12_sendStart(...) exactly as it is done now.</p>
<p>At the listener (relays) node, you will use the same structure to get the individual items of data, and you will have a sketch that looks like the GLCD sketch but without any of the GLCD components. Inside the block that follows &quot;if (rf12_recvDone())&quot; you will extract the data items and process them however you wish, in much the same way as the GLCD does.</p>
         </div>
    <div class="links">&raquo; <ul class="links"><li class="comment_forbidden first last"></li>
</ul></div>
  </div>
<form action="https://openenergymonitor.org/emon/node/5255"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>  <div class="box">
    <h2 class="title">Comment viewing options</h2>    <div class="content"><div class="container-inline"><input type="hidden" name="form_build_id" id="form-Pd5xsqe6kdNqYk7IxF4sN2UFNnbXVNLEbhCrDm4cx6c" value="form-Pd5xsqe6kdNqYk7IxF4sN2UFNnbXVNLEbhCrDm4cx6c"  />
<input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300" selected="selected">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div></div>
 </div>


</div></form>
</div>
      
              </div>
    </td>
      </tr>
</table>

<div id="footer">
  <p>Open-source tools for energy monitoring and analysis.&nbsp;Forum has moved to: <a href="https://community.openenergymonitor.org/">https://community.openenergymonitor.org</a></p>
   
</div>


</div>
</body>


<!-- Mirrored from openenergymonitor.org/emon/node/5255 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Feb 2017 16:11:13 GMT -->
</html>
